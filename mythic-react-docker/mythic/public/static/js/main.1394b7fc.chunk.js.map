{"version":3,"sources":["components/MythicComponents/MythicTextField.js","assets/mythic.svg","cache.js","components/utilities/Snackbar.js","components/pages/Login/LoginForm.js","components/pages/Settings/SettingsOperatorAPIToken.js","components/pages/Settings/SettingsOperatorDialog.js","components/pages/Settings/SettingsOperatorDeleteDialog.js","components/MythicComponents/MythicDialog.js","components/utilities/Time.js","components/pages/Settings/SettingsOperator.js","components/pages/Settings/SettingsOperatorTable.js","components/pages/Settings/Settings.js","components/pages/Logout/Logout.js","components/pages/PayloadTypesC2Profiles/PayloadTypeBuildDialog.js","components/pages/PayloadTypesC2Profiles/PayloadTypeCard.js","components/pages/PayloadTypesC2Profiles/PayloadTypeContainerDisplay.js","components/pages/PayloadTypesC2Profiles/C2ProfileBuildDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileOutputDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileConfigDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileStartStopOutputDialog.js","components/pages/CreatePayload/CreatePayloadParameter.js","components/pages/CreatePayload/CreatePayloadC2ProfileParametersTable.js","components/pages/PayloadTypesC2Profiles/C2ProfileSavedInstancesDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfilesCard.js","components/pages/PayloadTypesC2Profiles/C2ProfileContainerDisplay.js","components/pages/PayloadTypesC2Profiles/TranslationContainerCard.js","components/pages/PayloadTypesC2Profiles/TranslationContainerDisplay.js","components/pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles.js","components/pages/CreatePayload/CreatePayloadNavigationButtons.js","components/pages/CreatePayload/Step1SelectOS.js","components/pages/CreatePayload/CreatePayloadBuildParametersTable.js","components/pages/CreatePayload/Step2SelectPayloadType.js","components/MythicComponents/MythicConfirmDialog.js","components/pages/CreatePayload/Step3SelectCommands.js","components/pages/CreatePayload/Step4C2Profiles.js","components/pages/CreatePayload/PayloadSubscriptionNotification.js","components/pages/CreatePayload/Step5Build.js","components/pages/CreatePayload/CreatePayload.js","components/pages/CreateWrapper/CreatePayloadNavigationButtons.js","components/pages/CreateWrapper/Step1SelectOS.js","components/pages/CreateWrapper/CreatePayloadParameter.js","components/pages/CreateWrapper/CreatePayloadBuildParametersTable.js","components/pages/CreateWrapper/Step2SelectPayloadType.js","components/pages/Payloads/DetailedPayloadTable.js","components/pages/CreateWrapper/Step3SelectPayload.js","components/pages/CreateWrapper/PayloadSubscriptionNotification.js","components/pages/CreateWrapper/Step5Build.js","components/pages/CreateWrapper/CreatePayload.js","components/pages/EventFeed/EventFeedTableEventsActions.js","components/pages/EventFeed/EventFeedTableEvents.js","components/pages/EventFeed/EventFeedTableInput.js","components/pages/EventFeed/EventFeedTable.js","components/pages/EventFeed/EventFeed.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialogRow.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialog.js","components/pages/Operations/OperationTableRowNotificationsDialog.js","components/pages/Operations/OperationTableRow.js","components/pages/Operations/OperationTable.js","components/pages/Operations/Operations.js","components/pages/BrowserScripts/EditScriptDialog.js","components/pages/BrowserScripts/BrowserScriptsTableRow.js","components/pages/BrowserScripts/BrowserScriptsTable.js","themes/Themes.js","components/pages/BrowserScripts/BrowserScriptsOperationsTableRow.js","components/pages/BrowserScripts/BrowserScriptsOperationsTable.js","components/pages/BrowserScripts/BrowserScripts.js","components/pages/Payloads/PayloadDescriptionDialog.js","components/pages/Payloads/PayloadFilenameDialog.js","components/pages/Payloads/PayloadBuildMessageDialog.js","components/pages/Payloads/PayloadsTableRowC2Status.js","components/pages/Payloads/PayloadsTableRowBuildStatus.js","components/pages/Payloads/PayloadConfigCheckDialog.js","components/pages/Payloads/PayloadRedirectRulesDialog.js","components/pages/Payloads/PayloadsTableRow.js","components/pages/Payloads/ImportPayloadConfigDialog.js","components/pages/Payloads/PayloadsTable.js","components/pages/Payloads/Payloads.js","components/pages/Callbacks/D3ContextMenu.js","components/pages/Callbacks/C2PathDialog.js","components/pages/ExpandedCallback/ExpandedCallbackSideDetails.js","components/MythicComponents/MythicTabPanel.js","components/utilities/Clipboard.js","components/pages/Callbacks/ResponseDisplayScreenshotModal.js","components/pages/Callbacks/ResponseDisplayScreenshot.js","components/pages/Callbacks/ResponseDisplayPlaintext.js","components/MythicComponents/MythicSelectFromListDialog.js","components/pages/Callbacks/TaskParametersDialogRow.js","components/pages/Callbacks/TaskParametersDialog.js","components/pages/Callbacks/TaskFromUIButton.js","components/pages/Callbacks/ResponseDisplayTable.js","components/pages/Callbacks/ResponseDisplayDownload.js","components/pages/Callbacks/ResponseDisplay.js","components/pages/Callbacks/TaskCommentDialog.js","components/pages/Callbacks/TaskTagDialog.js","components/pages/Callbacks/TaskOpsecDialog.js","components/pages/Callbacks/TaskViewParametersDialog.js","components/pages/Callbacks/TaskViewStdoutStderrDialog.js","components/pages/Callbacks/TaskTokenDialog.js","components/pages/Callbacks/TaskDisplayContainer.js","components/pages/Callbacks/TaskDisplay.js","components/pages/Callbacks/CallbacksTabsTaskingFilterDialog.js","components/pages/Callbacks/CallbacksTabsTaskingInputTokenSelect.js","components/pages/Callbacks/CallbacksTabsTaskingInput.js","components/pages/Callbacks/CallbacksTabsTasking.js","components/pages/ExpandedCallback/ExpandedCallback.js","components/pages/Home/QuickStartCard.js","components/pages/Home/AgentC2Overview.js","components/pages/Home/Home.js","components/utilities/LoggedInRoute.js","components/pages/Callbacks/CallbacksTabsFileBrowserTree.js","components/pages/Callbacks/DownloadHistoryDialog.js","components/pages/Callbacks/CallbacksTabsFileBrowserTable.js","components/pages/Callbacks/CallbacksTabsFileBrowser.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTree.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTable.js","components/pages/Callbacks/CallbacksTabsProcessBrowser.js","components/pages/Callbacks/CallbacksTabs.js","components/pages/Callbacks/HeightsDialog.js","components/MythicComponents/MythicTable.js","components/MythicComponents/MythicTransferList.js","components/MythicComponents/MythicDisplayTextDialog.js","components/pages/Callbacks/CallbackMutations.js","components/pages/Callbacks/DetailedCallbackTable.js","components/pages/Callbacks/CallbacksTableRow.js","components/pages/Callbacks/CallbacksTable.js","components/pages/Callbacks/ManuallyAddEdgeDialog.js","components/pages/Callbacks/CallbacksGraph.js","components/pages/Callbacks/CallbacksTop.js","components/pages/Callbacks/Callbacks.js","components/pages/Search/SearchTabTasks.js","components/MythicComponents/MythicSnackDownload.js","components/pages/Search/FileMetaTable.js","components/pages/Search/FileBrowserTable.js","components/pages/Search/SearchTabFiles.js","components/pages/Search/CredentialTable.js","components/pages/Search/CredentialTableNewCredentialDialog.js","components/pages/Search/SearchTabCredentials.js","components/pages/Search/KeylogsTable.js","components/pages/Search/SearchTabKeylog.js","components/pages/Search/TokenDescriptionDialog.js","components/pages/Search/TokenTable.js","components/pages/Search/SearchTabTokens.js","components/pages/Search/CallbackSearchTable.js","components/pages/Search/SearchTabCallbacks.js","components/pages/Search/ArtifactTable.js","components/pages/Search/SearchTabArtifacts.js","components/pages/Search/SocksSearchTable.js","components/pages/Search/SearchTabSocks.js","components/pages/Search/Search.js","components/TopAppBarNotifications.js","components/EventFeedNotifications.js","components/mythic_red_small.svg","components/TopAppBar.js","components/utilities/useDarkMode.js","components/pages/SingleTaskView/TaskArtifactsTable.js","components/pages/SingleTaskView/TaskMITREATTACKTable.js","components/pages/SingleTaskView/TaskFilesTable.js","components/pages/SingleTaskView/TaskCredentialsTable.js","components/pages/SingleTaskView/MetadataTable.js","components/pages/SingleTaskView/IncludeMoreTasksDialog.js","components/pages/SingleTaskView/SingleTaskView.js","themes/GlobalStyles.js","components/App.js","index.js"],"names":["ValidationTextField","withStyles","root","borderColor","borderWidth","borderLeftWidth","padding","TextField","MythicTextField","onChange","evt","name","props","value","target","error","validate","checkError","onKeyPress","event","key","undefined","onEnter","style","width","this","fullWidth","placeholder","label","autoFocus","variant","disabled","required","requiredValue","InputLabelProps","inputLabelProps","multiline","type","InputProps","helperText","errorText","marginBottom","React","Component","meState","makeVar","menuOpen","localStorage","getItem","loggedIn","access_token","refresh_token","user","JSON","parse","successfulRefresh","data","setItem","FailedRefresh","console","log","removeItem","useSnackbarRef","SnackbarUtilsConfigurator","useSnackbar","snackActions","success","msg","options","toast","warning","info","dismiss","closeSnackbar","enqueueSnackbar","LoginForm","me","useReactiveVar","useState","username","setUsername","password","setPassword","useEffect","submit","e","preventDefault","requestOptions","method","headers","body","stringify","fetch","then","response","json","successfulLogin","restartWebsockets","catch","toString","justifyContent","display","to","locationState","location","state","from","pathname","redirectPath","src","logo","height","alt","onSubmit","Button","color","onClick","marginRight","APITokenRow","TableRow","TableCell","startIcon","Switch","checked","active","id","onChanged","inputProps","token_type","token_value","SettingsOperatorDialog","passwordOld","setPasswordOld","passwordNew","setPasswordNew","Fragment","DialogTitle","title","DialogContent","dividers","DialogContentText","margin","DialogActions","handleClose","onAccept","SettingsOperatorDeleteDialog","onClose","MythicDialog","descriptionElementRef","useRef","open","descriptionElement","current","focus","Dialog","scroll","maxWidth","innerDialog","MythicModifyStringDialog","comment","setComment","onCommitSubmit","MythicViewJSONAsTableDialog","tableType","setTableType","setHeaders","permissions","permissionDict","constructor","Object","Array","isArray","push","leftColumn","rightColumn","length","keys","Paper","elevation","position","TableContainer","component","className","Table","size","TableHead","map","header","index","TableBody","element","hover","wordBreak","whiteSpace","row","MythicViewObjectPropertiesAsTableDialog","reduce","prev","toLocalTime","date","view_utc_time","init_date","Date","toDateString","toTimeString","substring","getTimeDifference","checkin_time","now","getTime","getTimezoneOffset","millisec","Math","abs","seconds","trunc","minutes","hours","days","output","useInterval","callback","delay","savedCallback","setInterval","clearInterval","SettingsOperator","setOpen","openUpdate","setOpenUpdateDialog","openDelete","setOpenDeleteDialog","apitokenOnChanged","onDeleteOperator","onUsernameChanged","onViewUTCChanged","onActiveChanged","last_login","creation_time","admin","onAdminChanged","IconButton","paddingBottom","paddingTop","colSpan","Collapse","in","timeout","unmountOnExit","Box","Typography","gutterBottom","float","apitokens","token","SettingsOperatorTable","theme","useTheme","openNew","setOpenNewDialog","backgroundColor","pageHeader","main","pageHeaderText","marginTop","textAlign","marginLeft","onNewOperator","operator","op","GET_Operator","gql","operatorsUpdateViewUTCTime","operatorsUpdateAdmin","operatorsUpdateActive","operatorsDelete","operatorsUpdateUsername","newOperatorMutation","Settings","useQuery","fetchPolicy","loading","useMutation","onCompleted","result","update_operator_by_pk","onError","err","updateUTC","update","cache","existingOperators","readQuery","query","removedOperator","newFinalOperators","filter","writeQuery","deleteOperator","updateAdmin","updateActive","createOperator","status","newOperator","updateUsername","LinearProgress","variables","Logout","accessToken","refreshToken","GET_Payload_Details","PayloadTypeBuildDialog","buildParams","setBuildParams","payload_name","payloadtype","buildparameters","param","description","parameter_type","parameter","verifier_regex","useStyles","makeStyles","expand","transform","transition","transitions","create","duration","shortest","expandOpen","running","notrunning","StyledAvatar","badge","boxShadow","top","left","borderRadius","animation","border","content","opacity","Badge","PayloadTypeCard","classes","wrappedPayloads","setWrappedPayloads","openBuildingDialog","setOpenBuildingDialog","supportedOS","setSupportedOS","last_heartbeat","wrap_these_payload_types","wrapped","cur","ptype","join","supported_os","split","Card","overlap","invisible","anchorOrigin","vertical","horizontal","CardMedia","media","objectFit","CardContent","author","note","paddingRight","alignItems","flexDirection","alignContent","href","wrapper","SUB_Payload_Types","PayloadTypeContainerDisplay","useSubscription","payloadTypes","setPayloadTypes","pt","GET_C2_Details","C2ProfileBuildDialog","c2profile","c2profileparameters","default_value","randomize","format_string","getProfileOutputQuery","C2ProfileOutputDialog","profile_id","getProfileOutput","getProfileConfigQuery","C2ProfileConfigDialog","config","setConfig","filename","downloadContainerFile","atob","onConfigSubmit","btoa","C2ProfileStartStopOutputDialog","CreatePayloadParameter","passedValue","returnAllDictValues","setValue","dictValue","setDictValue","dictOptions","setDictOptions","dictSelectOptions","setDictSelectOptions","dictSelectOptionsChoice","setDictSelectOptionsChoice","chooseOptions","setChooseOptions","dateValue","setDateValue","submitDictChange","list","condensed","opt","custom","tmpDate","setDate","getDate","parseInt","onChangeDate","includes","toISOString","slice","initial","default_show","dictSelectOptionsInitial","count","preCount","max","onChangeValue","onChangeText","testParameterValues","curVal","RegExp","test","addDictValEntry","choice","anchorPopoverEl","setAnchorPopoverEl","openDescription","Boolean","handlePopoverClose","onMouseEnter","currentTarget","onMouseLeave","Popover","anchorEl","transformOrigin","disableRestoreFocus","pointerEvents","PaperProps","palette","primary","dark","light","utils","DateFnsUtils","Grid","container","justify","disableToolbar","format","KeyboardButtonProps","FormControl","Select","native","i","newValues","removeDictEntry","Input","startAdornment","updated","onChangeDictKey","onChangeDictVal","selectOpt","MenuItem","getParameterObject","CreatePayloadC2ProfileParametersTable","paramName","getProfileInstaceQuery","deleteInstanceMutation","createInstanceMutation","C2ProfileSavedInstancesDialog","instanceName","setInstanceName","selectedInstance","setSelectedInstance","createdInstances","setCreatedInstances","baseParameters","setBaseParameters","currentParameters","setCurrentParameters","operation_id","current_operation_id","parameters","c2profile_by_pk","random","RandExp","gen","sort","a","b","localeCompare","c2profileparametersinstances","useLazyQuery","updates","c2profileparametersinstance","inst","c2profileparameter","getInstanceValues","updatedInstances","instance_name","deleteInstance","create_c2_instance","createInstance","spacing","item","xs","InputLabel","c2Name","parameterName","c2params","c2profile_id","c2_instance","startStopProfileMutation","setProfileConfigMutation","C2ProfilesCard","dropdownOpen","setDropdownOpen","dropdownAnchorRef","handleDropdownToggle","prevOpen","handleDropdownClose","contains","setOutput","startStopProfile","setOpenProfileStartStopDialog","onStartStopProfile","action","openProfileDialog","setOpenProfileDialog","openProfileConfigDialog","setOpenProfileConfigDialog","openProfileStartStopDialog","openProfileSavedInstancesDialog","setOpenProfileSavedInstancesDialog","uploadContainerFile","configSubmit","is_p2p","icon","faLink","payloadtypec2profiles","translation_container","toLowerCase","container_running","ButtonGroup","ref","file_path","Popper","role","disablePortal","zIndex","TransitionProps","placement","Grow","ClickAwayListener","onClickAway","MenuList","SUB_C2_Profiles","C2ProfileContainerDisplay","setC2profile","paddingLeft","TranslationContainerCard","faLanguage","payloadtypes","SUB_Translation_Containers","TranslationContainerDisplay","translationContainers","setTranslationContainers","translationContainersWithPayloads","setTranslationContainersWithPayloads","unassigned","translationcontainer","tr","assigned","PayloadTypesC2Profiles","CreatePayloadNavigationButtons","first","canceled","finished","last","GET_Payload_Types","Step1SelectOS","os","setOS","osOptions","setOSOptions","sortedOptions","currentOptions","adds","prevData","CircularProgress","align","FormHelperText","CreatePayloadBuildParametersTable","buildParameters","Step2SelectPayloadType","selectedPayloadType","setSelectedPayloadType","fileExtension","setFileExtension","supportsDynamicLoading","setSupportsDynamicLoading","payloadTypeParameters","setSelectedPayloadTypeParameters","buildOptions","payload_type","file_extension","supports_dynamic_loading","payloadtypedata","payload","params","p","newParams","finishedParams","MythicConfirmDialog","dialogText","maxHeight","cancelText","acceptText","paper","overflow","button","Step3SelectCommands","commands","setCommands","commandOptions","setCommandOptions","openConfirmDialog","setOpenConfirmDialog","payloadType","allCommands","command","attributes","selected","reason","include_command","entries","selectedCommands","c","cmd","CommandTransferSelect","foundExit","cmdNames","setChecked","setLeft","right","setRight","leftChecked","intersection","rightChecked","hoveredCommand","setHoveredCommnad","not","find","handleToggle","currentIndex","itemKey","findIndex","indexOf","newChecked","splice","initialLeft","initialRight","setHoveredData","innerText","customList","items","CardHeader","cardHeader","Divider","List","dense","valueObj","labelId","ListItem","ListItemIcon","Checkbox","tabIndex","disableRipple","ListItemText","direction","concat","Step4C2Profiles","c2Profiles","setC2Profiles","profiles","c2","original","fixedArray","hasOwnProperty","customInfo","updateC2Parameter","updatedc2","curC2","curc2","FormControlLabel","control","toggleC2Selection","labelPlacement","onChangeCreatedInstanceName","allValid","includedC2","forEach","subscribe_payloads","breakpoints","up","minWidth","typography","fontWeight","actionRoot","icons","collapse","checkIcon","fontSize","textTransform","SnackMessage","forwardRef","expanded","setExpanded","CardActions","clsx","download","window","origin","file_id","SnackMessageError","PayloadSubscriptionNotification","fromNow","build_phase","build_message","persist","filemetum","agent_file_id","uuid","autoHideDuration","build_error","build_stderr","create_payload","Step5Build","setFilename","setDescription","createPayload","createPayloadMutation","final_values","finishedPayload","CreatePayload","setPayload","activeStep","setActiveStep","handleStepData","stepData","handleNext","cancelStep","handleBack","steps","prevActiveStep","Stepper","alternativeLabel","Step","StepLabel","step","getStepContent","disableNext","selectedPayloadTypeID","setSelectedPayloadTypeID","payload_type_id","DetailedPayloadTable","DetailedPayloadInnerTable","setBuildParameters","payload_id","commandState","payloadcommands","mythic","version","buildParametersState","buildparameterinstances","buildparameter","enc_key","enc_key_base64","dec_key","dec_key_base64","c2ProfilesState","c2_profile","pageHeaderColor","filename_text","sha1","md5","j","wrapped_payload_id","Step3SelectPayload","payloadOptions","setPayloadOptions","payloadtype_by_pk","payloads","PayloadSelect","selectedPayload","stickyHeader","PayloadsTableRow","onSelected","openDetailedView","setOpenDetailedView","tag","CreatePayloadWrapper","EventFeedTableEventsActions","setAnchorEl","onUpdateResolution","resolved","handleClick","useCallback","ListItemSecondaryAction","Menu","level","onUpdateLevel","getSurroundingEvents","onUpdateDeleted","inline","EventFeedTableEvents","ListItemAvatar","Avatar","disableTypography","timestamp","secondary","overflowX","textBackgroundColorSuccess","textBackgroundColor","textBackgroundColorMythic","textBackgroundColorError","message","EventFeedTableInput","setMessage","onSubmitMessage","bottom","endAdornment","Row","EventList","operationeventlog","listRef","createRef","getItemSize","match","eventlogWithFunctions","oplog","resetAfterIndex","itemData","itemCount","itemSize","overscanCount","EventFeedTable","messagesEndRef","scrollToBottom","scrollIntoView","behavior","stopPropagation","loadMore","loadNextError","resolveViewableErrors","resolveAllErrors","GET_Event_Feed","SUB_Event_Feed","GET_Surrounding_Events","Create_Operational_Event_Log","GET_Event_Feed_Next_Error","Update_Deleted","Update_Resolution","Update_Level","Update_ResolveViewableErrors","Update_ResolveAllErrors","EventFeed","setOperationEventLog","offset","setOffset","eventQuerySize","shouldResubscribe","onSubscriptionData","subscriptionData","newEvents","indx","updatingPrev","getMoreTasking","foundNew","getSurroundingEventQuery","getNextError","newOperationEventLog","removedMessage","update_operationeventlog","returning","newMessages","updateDeleted","updatedMessage","update_operationeventlog_by_pk","updatedMessages","updateResolution","updateLevel","updated_ids","updateResolveViewable","updateResolveAllErrors","lower_id","upper_id","resolveIds","ids","OperationTableRowUpdateOperatorsDialogRow","viewMode","setViewMode","inputRef","view_mode","updateOperator","input","GET_Operations","Update_Lead","Update_OperatorViewMode","Remove_OperatorFromOperation","Add_OperatorsToOperation","OperationTableRowUpdateOperatorsDialog","operators","setOperators","setAdmin","originalOperators","setOriginalOperators","allOperators","operation_by_pk","operatoroperations","updateAssignments","operatoroperation_id","updateOperationLead","addOperators","removeOperatorsMutation","updateOperatorViewMode","newAdmin","admin_id","newOperators","removeOperators","oldMatch","oop","operator_id","operatoroperation_ids","GET_OperationData","Update_Operation","OperationTableRowNotificationsDialog","setName","channel","setChannel","displayName","setDisplayName","iconEmoji","setIconEmoji","iconURL","setIconURL","webhook","setWebhook","webhookMessage","setWebhookMessage","complete","setComplete","updateOperation","display_name","icon_emoji","icon_url","webhook_message","onTextChange","updateCurrentOpertionMutation","OperationTableRow","openUpdateNotifications","setOpenUpdateNotifications","openUpdateOperators","setOpenUpdateOperators","setOpenBlocklists","openChangeCurrentOperation","setOpenChangeCurrentOperation","operation_name","current_operation","updateCurrentOperationState","updateCurrentOperation","user_id","OperationTable","operation","Operations","getCommandsAndPayloadTypesQuery","EditScriptDialog","script","setScript","selectedCommand","setSelectedCommand","payloadTypeCmdOptions","setPayloadTypeCmdOptions","setAuthor","inputPTRef","inputCMDRef","command_id","onSubmitEdit","cmds","mode","setOptions","new","onRevert","BrowserScriptsTableRow","openEdit","setOpenEdit","isApplied","setIsApplied","openDeleteDialog","found","browserscriptoperations","onDelete","browserscript_id","onToggleActive","user_modified","onSubmitRemoveFromOperation","onSubmitApplyToOperation","container_version","BrowserScriptsTable","openNewScriptDialog","setOpenNewScriptDialog","onSubmitNew","browserscript","onToggleOperation","muiTheme","createMuiTheme","BrowserScriptsOperationsTableRow","openViewScript","setOpenViewScript","readOnly","BrowserScriptsOperationsTable","browserscriptoperation","SUB_BrowserScripts","SUB_OperationBrowserScripts","updateBrowserScriptActive","updateBrowserScriptScript","updateBrowserScriptRevert","addBrowserScript","deleteBrowserScriptMutation","BrowserScripts","browserScripts","setBrowserScripts","operationBrowserScripts","setOperationBrowserScripts","toggleActive","updateScript","revertScript","createBrowserScript","deleteBrowserScript","updateDescriptionMutation","getDescriptionQuery","PayloadDescriptionDialog","payload_by_pk","updateDescription","getFilenameQuery","PayloadFilenameDialog","fileId","setFileId","PayloadBuildMessageDialog","payloadData","setPayloadData","viewError","setViewError","build_stdout","PayloadsTableRowC2Status","payloadc2profiles","Tooltip","PayloadsTableRowBuildStatus","thickness","checkPayloadConfigurationQuery","PayloadConfigCheckDialog","config_check","generateRedirectRulesMutation","PayloadRedirectRulesDialog","redirect_rules","rebuildPayloadMutation","exportPayloadConfigQuery","setOpenDescriptionDialog","openFilename","setOpenFilenameDialog","openBuildMessage","setOpenBuildMessageDialog","openConfigCheckDialog","setOpenConfigCheckDialog","openRedirectRulesDialog","setOpenRedirectRulesDialog","triggerRebuild","export_payload_config","dataBlob","Blob","ele","document","getElementById","URL","createObjectURL","click","createElement","appendChild","exportConfig","callback_alert","onAlertChanged","onDeletePayload","option","handleMenuItemClick","ImportPayloadConfigDialog","fileValue","setFileValue","reader","FileReader","onload","contents","files","readAsBinaryString","hidden","PayloadsTable","onUpdateCallbackAlert","openPayloadImport","setOpenPayloadImport","payloadFragment","SUB_Payloads","Get_Payloads","payloadsDelete","payloadsCallbackAlert","Payloads","setPayloads","update_payload_by_pk","deletePayload","callbackAlert","createContextMenu","g","d","menuItems","svgId","x","y","d3","remove","append","attr","selectAll","enter","on","text","menuFactory","pageX","pageY","C2PathDialog","dagreRef","reZoom","setReZoom","drawC2PathElements","callbackgraphedges","rankDir","label_components","packet_flow_view","include_disconnected","show_all_nodes","parent","node","edges","view_config","node_events","svgGroup","disconnected","disconnectedArrow","connected","connectedArrow","nodeColor","nodeLabelStyle","edgeLabelStyle","add_edge_to_mythic","edge","source","add_node","setEdge","edge_id","end_timestamp","labelStyle","arrowheadStyle","setNode","getLabel","shape","isParent","host","clusterLabelPos","graphGroup","setParent","add_edge_p2p","destination","createEdge","adjusted_direction","dagreD3","graphlib","Graph","compound","multigraph","directed","setGraph","rankdir","setDefaultEdgeLabel","svg","select","_groups","zoom","call","hasEdge","render","getBoundingClientRect","shapes","circle","bbox","shapeSvg","insert","intersect","point","square","candidates","children","longest","outEdges","graphWidth","graph","graphHeight","zoomScale","min","translateX","translateY","translate","scale","SUB_Edges","ExpandedCallbackSideDetails","ExpandedCallbackSideDetailsTable","displayTime","setDisplayTime","openEditDescriptionDialog","setOpenEditDescriptionDialog","activeEgress","setActiveEgress","activeEgressBool","setActiveEgressBool","openC2Dialog","setOpenC2Dialog","setCallbackgraphedges","callbackgraphedgesAll","setCallbackgraphedgesAll","hasEgressRoute","setHasEgressRoute","callbackEdges","setCallbackEdges","callbackgraphedge","curTime","last_checkin","routes","getEdges","activeOnly","myEdges","foundMore","newEdges","myActiveEdges","locked","locked_operator","integrity_level","ip","external_ip","domain","architecture","pid","sleep_info","cursor","process_name","extra_info","MythicTabPanel","other","tabInfo","getCallbackData","a11yProps","MythicTabLabel","onContextMenu","onCloseTab","selectionFollowsFocus","textColor","indicator","onEditTabDescription","Tab","tabID","MythicSearchTabLabel","iconComponent","copyStringToClipboard","str","el","setAttribute","execCommand","removeChild","ResponseDisplayScreenshotModal","setZoom","ResponseDisplayScreenshot","openScreenshot","setOpenScreenshot","toUTCString","ResponseDisplayPlaintext","plaintext","MythicSelectFromListDialog","setSelected","opts","identifier","getDynamicQueryParams","TaskParametersDialogRow","ChoiceOptions","setChoiceOptions","boolValue","setBoolValue","arrayValue","setArrayValue","choiceMultipleValue","setChoiceMultipleValue","agentConnectNewHost","setAgentConnectNewHost","agentConnectNewPayload","setAgentConnectNewPayload","agentConnectHost","setAgentConnectHost","agentConnectPayloadOptions","setAgentConnectPayloadOptions","agentConnectPayload","setAgentConnectPayload","agentConnectC2ProfileOptions","setAgentConnectC2ProfileOptions","agentConnectC2Profile","setAgentConnectC2Profile","openAdditionalPayloadOnHostMenu","setOpenAdditionalPayloadOnHostmenu","dynamic_query_function","choices","getDynamicParams","callback_id","parameter_name","commandInfo","onChangeAgentConnect","host_index","payload_index","c2_index","agentConnectValue","agent_uuid","onChangeChoiceMultiple","l","onChangeNumber","onSwitchChange","onFileChange","onChangeAgentConnectHost","onChangeAgentConnectPayload","onChangeAgentConnectC2Profile","onChangeAgentConnectNewHost","onChangeAgentConnectNewPayload","onAgentConnectAddNewPayloadOnHost","payload_choices","addNewArrayValue","newArray","multiple","tableLayout","removed","removeArrayValue","n","v","values","onChangeArrayText","c2_profile_id","crypto_type","callback_uuid","agent_callback_id","onChangeLinkInfo","account","realm","credential_text","textOverflow","GetLoadedCommandsQuery","getAllCommandsQuery","getAllEdgesQuery","getAllPayloadsQuery","getAllPayloadsOnHostsQuery","addPayloadOnHostMutation","getCommandQuery","getCredentialsQuery","TaskParametersDialog","setCommandInfo","setParameters","rawParameters","setRawParameters","all","loaded","credentials","requiredPieces","setRequiredPieces","getAllCommands","allCommandsLoading","getLoadedCommands","loadedCommandsLoading","getAllEdges","loadedAllEdgesLoading","getAllPayloads","loadedAllPayloadsLoading","getAllPayloadsOnHosts","loadedAllPayloadsOnHostsLoading","getAllCredentials","loadedCredentialsLoading","addPayloadOnHost","requiredPiecesInitial","command_by_pk","commandparameters","choices_are_all_commands","choices_are_loaded_commands","payloadtype_id","setB","Set","has","getLinkInfoFromAgentConnect","getLinkInfoValue","sorted","defaultV","choice_filter_by_command_attributes","cmd_attributes","loadedcommands","credential","agentConnectNewPayloads","profile","organized","payloadonhost","entry","duplicated_payload","c2info","val","c2array","payloadInfo","callbacks","prior","supported_agents","build_requirements","supported_agent_build_parameters","matched","build_param","edge_choices","ui_position","collapsedParameters","collapsedFiles","help_cmd","needs_admin","getLoadedCommandsQuery","TaskFromUIButton","ui_feature","onTasked","fileBrowserCommands","setFileBrowserCommands","openSelectCommandDialog","setOpenSelectCommandDialog","openParametersDialog","setOpenParametersDialog","createTaskingMutation","createTask","callbackData","availableCommands","callback_by_pk","finalCommands","ResponseDisplayTableStringCell","cellData","rowData","ResponseDisplayTableSizeCell","bytes","floor","parseFloat","pow","toFixed","getStringSize","ResponseDisplayTableActionCell","openButton","setOpenButton","openTaskingButton","setOpenTaskingButton","leftColumnTitle","rightColumnTitle","CellRenderer","columnData","dataKey","DisplayData","noRowsRender","ResponseDisplayTable","table","allHeaders","setAllHeaders","allData","sortBy","setSortBy","headerWidths","setHeaderWidths","widthRef","sortDirection","setSortDirection","rowStyle","sortTable","tmpData","sortType","h","reverse","rowGetter","resizeRow","deltaX","prevWidths","percentDelta","offsetWidth","nextHeader","updatedWidths","headerRenderer","disableSort","axis","defaultClassName","defaultClassNameDragging","onDrag","unSpecifiedWidths","remainingWidths","headerWidthData","rows","headerData","cellRenderer","headerHeight","noRowsRenderer","rowCount","rowHeight","col","ResponseDisplayDownload","subResponsesQuery","getResponsesLazyQuery","getAllResponsesLazyQuery","taskScript","ResponseDisplay","viewBrowserScript","setViewBrowserScript","rawResponses","setRawResponses","browserScriptData","setBrowserScriptData","highestFetched","setHighestFetched","totalFetched","setTotalFetched","search","setSearch","selectAllOutput","setSelectAllOutput","task_id","task","fetchLimit","newerResponses","r","outputResponses","rawResponseArray","highestFetchedId","totalFetchedSoFar","fetchMoreResponses","res","unb64script","fun","Function","fetchScripts","responses","maxID","responseArray","searchText","changeTotalCount","response_aggregate","aggregate","fetchAllResponses","currentPage","onSubmitSearch","searchOutput","scr","dl","updateCommentMutation","getCommentQuery","TaskCommentDialog","task_by_pk","updateComment","addTaskTagMutation","removeTaskTagMutation","getTaskTagsQuery","TaskTagDialog","newTag","setNewTag","currentTags","tasktag","allTags","setOriginalTags","addTaskTag","removeTaskTag","originalTags","tasktag_id","updateOpsecRequestMutation","getOpsecQuery","TaskOpsecDialog","opsecMessage","setOpsecMessage","opsecData","setOpsecData","opsec_pre_bypass_user","opsec_pre_message","opsec_post_blocked","opsec_post_bypass_user","opsec_post_message","requestOpsecBypass","updateOpsecRequest","opsec_pre_blocked","opsec_pre_bypassed","opsec_post_bypassed","getParametersQuery","TaskViewParametersDialog","original_params","display_params","TaskViewStdoutStderrDialog","stdout","stderr","allTokenDataFragment","getTokenInfo","TaskTokenDialog","tokenData","setTokenData","logonsessionData","setLogonSessionData","authenticationData","setAuthenticationData","tokenKeys","logonsessionKeys","authenticationpackageKeys","token_id","token_by_pk","reducedTokenData","logonsession","reducedLogonSessionData","authenticationpackages","reducedAuthenticationData","pkg","authpkg","ReissueTaskMutationGQL","ReissueTaskHandlerMutationGQL","ToggleButtonInButtonGroup","disableElevation","others","ToggleButton","TaskDisplayContainer","totalCount","setTotalcount","openCommentDialog","setOpenCommentDialog","openTokenDialog","setOpenTokenDialog","openStdoutStderrDialog","setOpenStdoutStderrDialog","openOpsecDialog","setOpenOpsecDialog","openTaskTagDialog","setOpenTaskTagDialog","commandID","setCommandID","setSearchOutput","setCurrentPage","downloadResponses","reissue_task","reissueTask","reissue_task_handler","reissueTaskHandler","responses_aggregate","newTotal","orientation","faExpandArrowsAlt","faExternalLinkAlt","faBook","background","Pagination","ceil","page","boundaryCount","taskDisplayFragment","getSubTaskingQuery","heading","pxToRem","secondaryHeading","taskAndTimeDisplay","secondaryHeadingExpanded","verticalAlign","details","column","accordionUseStyles","expandIcon","MinusSquare","SvgIcon","PlusSquare","StyledTreeItem","iconContainer","group","borderLeft","fade","TreeItem","TaskDisplayPreMemo","filterOptions","nodesSelected","setNodesSelected","toggleTaskTree","newSelection","TreeView","toggleSelection","TaskDisplay","memo","TaskStatusDisplay","completed","ColoredTaskDisplay","themeColor","setThemeColor","minHeight","TaskRow","taskingData","setTaskingData","isFetchingSubtasks","setIsFetchingSubtasks","shouldDisplay","setShouldDisplay","notifyOnNetworkStatusChange","stopPolling","startPolling","getSubTasking","getSubTasks","toggleTaskDropdown","onLabelClick","nodeId","onIconClick","tasks","tsk","TaskLabel","displayComment","setDisplayComment","alertBadges","setAlertBadges","accordionClasses","prevResponseCount","Accordion","onEntered","isAppearing","block","defaultExpanded","AccordionSummary","commentOperator","badgeContent","AccordionDetails","MenuProps","ITEM_HEIGHT","getContentAnchorEl","formControl","chips","flexWrap","chip","noLabel","operatorQuery","CallbacksTabsTaskingFilterDialog","onlyOperators","setOnlyOperators","operatorUsernames","setOperatorUsernames","onlyHasComments","setOnlyHasComments","onlyCommands","setOnlyCommands","everythingBut","setEverythingBut","onlyParameters","setOnlyParameters","filterCommandOptions","renderValue","Chip","CallbacksTabsTaskingInputTokenSelect","changeSelectedToken","User","tokenId","TokenId","CallbacksTabsTaskingInputPreMemo","highlighted","setHighlighted","openAutocomplete","setOpenAutocomplete","autocompleteOptions","setAutocompleteOptions","loadedOptions","setLoadedOptions","taskOptions","setTaskOptions","openFilterOptionsDialog","setOpenFilterOptionsDialog","tokenOptions","setTokenOptions","nonLoadedCommands","deDup","updatedAny","tokens","updatedEntries","compareDicts","onKeyDown","code","onSubmitCommandLine","onClickFilter","Autocomplete","freeSolo","autoHighlight","onOpen","inputValue","matchSorter","disableClearable","disableListWrap","clearOnEscape","openOnFocus","onHighlightChange","onInputChange","newInputValue","renderInput","onSubmitFilter","CallbacksTabsTaskingInput","CallbacksTabsTaskingLabel","payloadDescription","callbackDescription","callbackID","customDescription","taskingDataFragment","GetLoadedCommandsSubscription","getTaskingQuery","getNextBatchTaskingQuery","CallbacksTabsTaskingPanel","callbacktokens","setNonLoadedCommands","taskingDataRef","selectedToken","setSelectedToken","setFilterOptions","loader","canScroll","setCanScroll","fetched","setFetched","fetchedAllTasks","setFetchedAllTasks","allCmds","help","subscriptionDataCallback","oldLength","mergedData","oldArray","equalTaskTrees","useLayoutEffect","getInfiniteScrollTasking","loadingMore","onCreateTask","newFilter","trim","commandParams","com","SUB_Callbacks","ExpandedCallback","callbackId","useParams","setCallbacks","setTabInfo","tabType","avatar","red","QuickStartCard","subheader","styl","Link","underline","GetC2ProfilesAndPayloadTypes","AgentC2Overview","payloadTypeRows","setPayloadTypeRows","wrappers","setWrappers","c2Headers","payloadRows","payloadc2","wrapperRows","w","wr","Home","LoggedInRoute","rest","visuallyHidden","clip","getNodeData","nestingLevel","fetchFolderData","setTableData","isLeaf","filebrowserobjs","isOpenByDefault","name_text","CallbacksTabsFileBrowserTree","treeWalker","treeRoot","is_file","async","FileBrowserNode","isOpen","o","filebrowserobj","FileBrowserRow","fetchItems","clickIcon","parent_id","filebrowserobjs_aggregate","folderColor","danger","DownloadHistoryDialog","history","setHistory","hist","chunks_received","total_chunks","getPermissionsDataQuery","getFileDownloadHistory","updateFileComment","FileBrowserTableRowStringCell","onTaskRowAction","CallbacksTabsFileBrowserTable","setAllData","actions","modify_time","columnWidths","setColumnWidths","columns","setColumns","getNext","onRowDoubleClick","showDeletedFiles","selectedFolder","filteredData","f","deleted","FileBrowserTableRowNameCell","textDecoration","filemeta","FileBrowserTableRowSizeCell","FileBrowserTableRowActionCell","fileCommentDialogOpen","setFileCommentDialogOpen","viewPermissionsDialogOpen","setViewPermissionsDialogOpen","fileHistoryDialogOpen","setFileHistoryDialogOpen","permissionData","setPermissionData","downloadHistory","setDownloadHistory","filebrowserobj_by_pk","getPermissions","getHistory","whichOption","optionsA","optionsB","filebrowserobj_id","full_path_text","path","parent_path_text","uifeature","fileDataFragment","rootFileQuery","folderQuery","fileDataSubscription","getDeltaFilesQuery","getCallbackDataQuery","CallbacksTabsFileBrowserLabel","CallbacksTabsFileBrowserPanel","fileBrowserRoots","fileBrowserRootsState","setFileBrowserRootsState","setSelectedFolder","selectedFolderDataRef","selectedFolderData","setSelectedFolderData","searchCallback","setSearchCallback","taskInfo","setTaskInfo","uiFeature","setUIFeature","currentCallbackIDSetInTable","lastFetchedTime","savedStateForConfirmDialog","setSavedStateForConfirmDialog","setShowDeletedFiles","subscribeToMore","roots","updatingData","obj","foundHost","rootEntry","mergeData","getFileDeltas","newRoots","workingSet","getFolderData","all_objects","startsWith","getCommandOptions","fullPath","onSetTableData","confirmed","subscribeToMoreCallback","lastTime","onListFilesButton","onUploadFileButton","onChangeCallbackID","toggleShowDeletedFiles","showStatus","initialCallbackID","subscribeToNewFileBrowserObjs","updateQuery","FileBrowserTableTop","hostname","setHostname","setFullPath","setCallbackID","setLocalShowDeletedFiles","manuallySetCallbackID","setManuallySetCallbackID","onLocalListFilesButton","CallbacksTabsProcessBrowserTree","process_id","getDetailedData","getProcessTokenData","CallbacksTabsProcessBrowserTable","parent_process_id","bin_path","process_by_pk","getTokens","dataFragment","taskFragment","getNextProcessQuery","getPrevProcessQuery","getLatestTaskForHost","CallbacksTabsProcessBrowserLabel","CallbacksTabsProcessBrowserPanel","currentOS","setCurrentOS","makeTree","process","dataTree","processes","getNextProcessDataByHostAndTask","getPreviousProcessDataByHostAndTask","process_aggregate","onNextButton","onPreviousButton","onDiffButton","ProcessBrowserTableTop","taskID","setTaskID","CallbacksTabs","openTabs","clickedTabId","clearSelectedTab","callbackTokens","setCallbackTokens","callbacktoken","onCloseTabLocal","AppBar","Tabs","newValue","indicatorColor","scrollButtons","tab","HeightsDialog","heights","setHeights","newHeights","descendingComparator","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","EnhancedTableHead","onSelectAllClick","numSelected","onRequestSort","indeterminate","headCells","headCell","shownColumns","disablePadding","TableSortLabel","property","EnhancedTableRow","isItemSelected","MythicTransferListDialog","leftTitle","setLeftTitle","rightTitle","setRightTitle","dialogTitle","MythicDisplayTextDialog","hideCallbackMutation","toggleHideCallbackMutations","removeEdgeMutation","addEdgeMutation","unlockCallbackMutation","lockCallbackMutation","updateDescriptionCallbackMutation","updateSleepInfoCallbackMutation","DetailedCallbackTable","commandsWithScriptOnly","CallbacksTableRowPreMemo","openMetaDialog","setOpenMetaDialog","openSleepDialog","setOpenSleepDialog","openOSDialog","setOpenOSDialog","setShownColumns","onOpenTab","updateCallback","hideCallback","displayOSInfo","getOSIcon","faWindows","faLinux","faApple","faChrome","faQuestion","toggleLock","TimeUpdater","sleep","updateSleepInfo","CallbacksTableRow","TimeUpdaterPreMemo","lastCheckin","setLastCheckin","useToolbarStyles","highlight","lighten","flex","EnhancedTableToolbar","Toolbar","onHideSelected","openDialog","CallbacksTable","setOrder","setOrderBy","openAdjustColumnsDialog","setOpenAdjustColumnsDialog","allColumns","setAllColumns","selectedIndex","newSelected","isSelected","lockCallback","unlockCallback","updateSleep","tableHeadCells","useMemo","numeric","numberic","allColumnNames","cell","localSettings","updateDescriptionSubmit","updated_selected","newSelecteds","cal","getP2PProfilesAndCallbacks","selectEmpty","ManuallyAddEdgeDialog","callbackOptions","setCallbackOptions","profileOptions","setProfileOptions","selectedDestination","setSelectedDestination","selectedProfile","setSelectedProfile","inputRefDestination","filteredProfileOptions","callbackc2profiles","source_profile","cbopts","cb","loadedLinkCommandsQuery","CallbacksGraph","linkCommands","setLinkCommands","openSelectLinkCommandDialog","setOpenSelectLinkCommandDialog","selectedLinkCommand","setSelectedLinkCommand","selectedCallback","setSelectedCallback","manuallyRemoveEdgeDialogOpen","setManuallyRemoveEdgeDialogOpen","manuallyAddEdgeDialogOpen","setManuallyAddEdgeDialogOpen","edgeOptions","setEdgeOptions","addEdgeSource","setAddEdgeSource","getLinkCommands","viewConfig","setViewConfig","manuallyRemoveEdge","manuallyAddEdge","elm","nodeEdges","getNodeEdges","fulledg","view","saveSvgAsPng","allEdges","getConfigString","source_id","destination_id","CallbacksTop","topDisplay","onOpenTabLocal","tabData","topHeight","flexGrow","speedDial","Callbacks","setTopDisplay","setOpenTabs","setClickedTabId","oldTabs","tabs","oldHeights","onSubmitHeights","tabSet","t","tabHeight","SpeedDialWrapper","SpeedDialWrapperPreMemo","openHeightsDialog","setOpenHeightsDialog","SpeedDial","ariaLabel","SpeedDialIcon","FabProps","SpeedDialAction","tooltipTitle","responseSearch","parameterSearch","commentSearch","SearchTabTasksLabel","SearchTabTasksSearchPanel","searchField","setSearchField","searchFieldOptions","submitSearch","querySearch","querySearchField","adjustedSearch","onOutputSearch","onParameterSearch","onCommentSearch","adjustedSearchField","queryParams","get","onChangeSearchField","changeSearchParam","FormLabel","RadioGroup","Radio","SearchTabTasksPanel","setTotalCount","task_aggregate","getOutputSearch","getParameterSearch","getCommentSearch","new_search","field","siblingCount","showFirstButton","showLastButton","MythicSnackDownload","downloadLink","downloadBulkQuery","updateFileDeleted","FileMetaDownloadTable","setFiles","onToggleSelection","initialSelected","file","download_bulk","downloadBulk","fileIds","FileMetaDownloadTableRow","setOpenDelete","openDetails","setOpenDetails","update_filemeta_by_pk","deleteFile","full_remote_path_text","chunk_size","FileMetaUploadTable","FileMetaUploadTableRow","FileMetaScreenshotTable","FileMetaScreenshotTableRow","FileBrowserTable","onEditComment","FileBrowserTableRow","editCommentDialogOpen","setEditCommentDialogOpen","update_filebrowserobj_by_pk","fileMetaFragment","fileBrowserFragment","filenameFileMetaUploadSearch","filenameFileMetaDownloadSearch","filenameFileBrowserSearch","hashFileMetaUploadSearch","hashFileMetaDownloadSearch","commentFileMetaUploadSearch","commentFileMetaDownloadSearch","commentFileBrowserSearch","filenameFileMetaScreenshotSearch","hashFileMetaScreenshotSearch","commentFileMetaScreenshotSearch","SearchTabFilesLabel","SearchTabFilesSearchPanel","searchHost","setSearchHost","searchLocation","setSearchLocation","searchLocationOptions","querySearchHost","adjustedSearchHost","onFilenameSearch","onHashSearch","onChangeSearchLocation","SearchTabFilesPanel","fileMetaData","setFileMetaData","fileBrowserData","setFileBrowserData","handleFileMetaSearchResults","filemeta_aggregate","handleFileBrowserSearchResults","filebrowserobj_aggregate","getfilenameFileMetaUploadSearch","getfilenameFileMetaDownloadSearch","getfilenameFileBrowserSearch","getfilenameFileMetaScreenshotSearch","gethashFileMetaUploadSearch","gethashFileMetaDownloadSearch","gethashFileMetaScreenshotSearch","getcommentFileMetaUploadSearch","getcommentFileMetaDownloadSearch","getcommentFileBrowserSearch","getcommentFileMetaScreenshotSearch","hash","updateCredentialComment","updateCredentialAccount","updateCredentialRealm","updateCredentialCredential","updateCredentialDeleted","CredentialTable","setCredentials","cred","onEditAccount","onEditRealm","onEditCredential","onEditDeleted","CredentialTableRow","editAccountDialogOpen","setEditAccountDialogOpen","editRealmDialogOpen","setEditRealmDialogOpen","editCredentialDialogOpen","setEditCredentialDialogOpen","update_credential_by_pk","updateAccount","updateRealm","updateCredential","credential_id","CredentialTableNewCredentialDialog","credentialType","setCredentialType","setAccount","setRealm","setCredential","credentialFragment","accountSearch","realmSearch","credentialSearch","createCredentialMutation","SearchTabCredentialsLabel","SearchTabCredentialsSearchPanel","createCredentialDialogOpen","setCreateCredentialDialogOpen","createCredential","onAccountSearch","onRealmSearch","onCredentialSearch","OnTypeSearch","SearchTabCredentialsPanel","credentialaData","setCredentialData","handleCredentialSearchResults","credential_aggregate","getAccountSearch","getRealmSearch","getCredentialSearch","KeylogsTable","keylogs","setKeylogs","KeylogTableRow","keystrokes_text","keylogFragment","keylogSearch","userUniqueSearch","userSearch","programSearch","programUniqueSearch","hostSearch","SearchTabKeylogsLabel","SearchTabKeylogsSearchPanel","onKeylogSearch","onUserSearch","onProgramSearch","onHostSearch","SearchTabKeylogsPanel","keylogData","setKeylogData","handleKeylogSearchResults","keylog_aggregate","keylog","getKeylogSearch","getUserSearch","getUserUniqueSearch","getProgramSearch","getProgramUniqueSearch","getHostSearch","program","TokenDescriptionDialog","updateCallbacksOfDeletedToken","TokenTable","setTokens","TokenTableRow","viewTokenDialog","setViewTokenDialog","editDescriptionDialog","setEditDescriptionDialog","updateCallbackTokensDeleted","update_token_by_pk","Groups","LogonId","LogonType","cbt","tokenFragment","userGroupSearch","SIDSearch","logonTypeSearch","SearchTabTokensLabel","SearchTabTokensSearchPanel","onUserGroupSearch","onSIDSearch","onLogonTypeSearch","SearchTabTokensPanel","handleTokenSearchResults","token_aggregate","getUserGroupSearch","getSIDSearch","getLogonTypeSearch","logontype","sid","CallbackSearchTable","CallbackSearchTableRow","init_callback","callbackFragment","domainSearch","descriptionSearch","ipSearch","SearchTabCallbacksLabel","SearchTabCallbacksSearchPanel","onDomainSearch","onDescriptionSearch","onIPSearch","SearchTabCallbacksPanel","setCallbackData","handleCallbackSearchResults","callback_aggregate","getDomainSearch","getDescriptionSearch","getIPSearch","ArtifactTable","artifacts","setArtifacts","ArtifactTableRow","artifact","artifact_instance_text","artifactFragment","artifactSearch","commandSearch","typeSearch","taskSearch","callbackSearch","SearchTabArtifactsLabel","SearchTabArtifactsSearchPanel","onArtifactSearch","onCommandSearch","onTypeSearch","onTaskSearch","onCallbackSearch","SearchTabArtifactsPanel","artifactData","setArtifactData","taskartifact_aggregate","taskartifact","getArtifactSearch","getCommandSearch","getTypeSearch","getTaskSearch","getCallbackSearch","stopSocks","SocksSearchTable","port","SearchTabSocksLabel","faSocks","SearchTabSocksPanel","onSocksSearch","Search","tabTypes","URLSearchParams","setQueryParams","currentParams","set","replaceState","kye","SUB_Event_Logs","TopAppBarNotifications","operationeventlog_aggregate","EventFeedNotifications","errorData","_image","_extends","assign","arguments","prototype","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMythicRedSmall","_ref","svgRef","titleId","xmlns","xmlnsXlink","viewBox","enableBackground","xmlSpace","ForwardRef","drawerWidth","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","appBar","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","nested","mythicElement","TopAppBar","settingsRef","documentationRef","documentationAnchorEl","setDocumentationAnchorEl","openGlobal","setOpenGlobal","openCreate","setOpenCreate","openOperations","setOpenOperations","openData","setOpenData","handleDrawerClose","handleDocumentationClose","menuButton","faBiohazard","nodeRef","MenuListProps","Drawer","anchor","onEscapeKeyDown","ListSubheader","toggleTheme","TaskArtifactsTable","taskartifacts","TaskMITREATTACKTable","attacks","setAttacks","newAdds","attacktasks","old","attck","attack","t_num","TaskFilesTable","is_screenshot","is_payload","is_download_from_agent","TaskCredentialsTable","MetadataQuery","TaskMetadataTable","setTasks","getMetadata","task_range","taskIDs","IncludeMoreTasksDialog","taskSelected","setTaskSelected","beforeCount","setBeforeCount","afterCount","setAfterCount","searchTerm","setSearchTerm","setOperator","submitFetchTasks","taskInfoFragment","tasksQuery","getTasksAcrossAllCallbacksQuery","getTasksAcrossACallbackQuery","getTasksAcrossAllCallbacksByOperatorQuery","SingleTaskView","taskId","setTaskIDs","removing","setRemoving","openIncludeMoreTasksDialog","setOpenIncludeMoreTasksDialog","taskData","allNewParents","parent_task_id","recent_callback","allParents","allTaskIds","subIds","completedData","before","after","getTasksAcrossAllCallbacks","getTasksAcrossACallback","getTasksAcrossAllCallbacksByOperator","getTasks","toggleTaskToRemove","range","numbers","ranges","expand_range","all_nums","rstart","rend","collapse_range","remainingTasks","remainingTaskIDs","setTaskSearchInfo","baseTask","GlobalStyles","createGlobalStyle","tableBorder","tableHover","App","setTheme","mountedComponent","setMountedComponent","setMode","localTheme","useDarkMode","themeMode","themeToggler","tableHeader","ThemeProvider","CssBaseline","maxSnack","contentShift","exact","InMemoryCache","typePolicies","Query","fields","retryLink","RetryLink","jitter","attempts","retryIf","_operation","httpLink","HttpLink","uri","reconnect","connectionParams","Authorization","authLink","setContext","_","promiseToObservable","promise","Observable","subscriber","closed","next","errorLink","graphQLErrors","networkError","forward","extensions","GetNewToken","flatMap","websocketClient","SubscriptionClient","protocol","wsLink","WebSocketLink","splitLink","definition","getMainDefinition","kind","apolloClient","ApolloClient","link","operations","close","connect","sendMessage","MessageTypes","GQL_START","ReactDOM","StrictMode","ApolloProvider","client"],"mappings":"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0H3Bk1C,GAAel1C,aAAH,uIAChBi1C,IAQK,SAASE,GAAgBtlD,GAC5B,IAAMoP,EAAQC,eACd,EAAkCnL,mBAAS,IAA3C,mBAAOqhD,EAAP,KAAkBC,EAAlB,KACA,EAAgDthD,mBAAS,IAAzD,mBAAOuhD,EAAP,KAAyBC,EAAzB,KACA,EAAoDxhD,mBAAS,IAA7D,mBAAOyhD,EAAP,KAA2BC,EAA3B,KACMC,EAAY,CACd,UACA,eACA,qBACA,kBACA,QACA,mBACA,2BACA,kBACA,cACA,sBACA,qBACA,iBACA,eACA,eACA,cACA,iBACA,wBACA,eACA,WACA,gBACA,gBACA,iBACA,WACA,QACA,WACA,gBACA,uBACA,oBACA,aACA,SACA,SACA,uBACA,kBACA,qBACA,UACA,iBACA,oBACA,WACA,cACA,gBACA,eACA,YACA,WACA,2BACA,kBACA,aACA,OACA,iBACA,SACA,SACA,aACA,SACA,QACA,kBACA,kBACA,cACA,wBACA,eACA,mBACA,aACA,yBACA,mBACA,aACA,kCACA,yBACA,iBACA,sBACA,gCACA,eACA,OACA,qBACA,qBACA,YACA,SACA,WACA,UACA,YACA,aACA,WACA,OACA,sBACA,wBACA,wBACA,kBACA,WAEEC,EAAmB,CACvB,UACA,WACA,cACA,YACA,YACA,MACA,YACA,cACA,gBACA,MACA,YACA,sBACA,kBACA,6CACA,cACA,cACA,gBACA,qBACA,aACA,cACA,kBACA,oBACA,qBACA,WAEIC,EAA4B,CAChC,OACA,WAiDJ,OA/CEp1C,aAAS00C,GAAc,CACnB/yC,UAAW,CAAC0zC,SAAUhmD,EAAMgmD,UAC5Bj1C,YAAa,SAAAnO,GACT,GAAwB,OAArBA,EAAKqjD,YAAqB,CACzBT,EAAa5iD,EAAKqjD,aAClB,IAAMC,EAAmBL,EAAUr6C,QAAQ,SAACC,EAAMjL,GAChD,YAA6BC,IAA1BmC,EAAKqjD,YAAYzlD,IAAgD,OAA1BoC,EAAKqjD,YAAYzlD,IAA2C,KAA1BoC,EAAKqjD,YAAYzlD,GACrF,GAAN,mBAAWiL,GAAX,CAAiB,CAAC,KAAQjL,EAA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","file":"static/js/main.1394b7fc.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {TextField} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nconst ValidationTextField = withStyles({\n      root: {\n        '& input:valid + fieldset': {\n          borderColor: 'grey',\n          borderWidth: 1,\n        },\n        '& input:invalid + fieldset': {\n          borderColor: 'red',\n          borderWidth: 2,\n        },\n        '& input:valid:focus + fieldset': {\n          borderLeftWidth: 6,\n          padding: '4px !important', // override inline-style\n        },\n      },\n    })(TextField);\n\nclass MythicTextField extends React.Component {\n    \n    static propTypes = {\n        placeholder: PropTypes.string,\n        name: PropTypes.string,\n        validate: PropTypes.func,\n        width: PropTypes.number,\n        onChange: PropTypes.func.isRequired,\n        requiredValue: PropTypes.bool,\n        type: PropTypes.string,\n        onEnter: PropTypes.func,\n        autoFocus: PropTypes.bool\n    }\n    onChange = evt => {\n        const name = this.props.name;\n        const value = evt.target.value;\n        const error = this.props.validate ? this.props.validate(value) : false;\n        this.props.onChange(name, value, error);\n    }\n    checkError = () => {\n        return this.props.validate ? this.props.validate(this.props.value) : false\n    }\n    onKeyPress = (event) => {\n      if(event.key === \"Enter\"){\n        if(this.props.onEnter !== undefined){\n          this.props.onEnter();\n        }\n      }else{\n        this.onChange(event);\n      }\n    }\n    render(){\n        return (\n            <div style={{width:  this.props.width ? this.props.width + \"rem\" : \"100%\"}}>\n                <ValidationTextField \n                    fullWidth={true} \n                    placeholder={this.props.placeholder} \n                    value={this.props.value} \n                    onChange={this.onChange}\n                    onKeyPress={this.onKeyPress} \n                    label={this.props.name} \n                    autoFocus={this.props.autoFocus ? true : false}\n                    variant=\"outlined\" \n                    disabled={this.props.disabled === undefined ? false : this.props.disabled}\n                    required={this.props.requiredValue ? this.props.requiredValue : false} \n                    InputLabelProps={this.props.inputLabelProps}\n                    multiline={this.props.multiline ? this.props.multiline : false}\n                    error={this.checkError()} \n                    type={this.props.type === undefined ? \"text\" : this.props.type}\n                    InputProps={this.props.InputProps}\n                    helperText={this.checkError() ? this.props.errorText : this.props.helperText}\n                    style={{\n                        padding:0,\n                        marginBottom: this.props.marginBottom ? this.props.marginBottom : \"10px\"\n                    }}/>\n            </div>\n        )\n    }\n}\nexport default MythicTextField;\n","export default __webpack_public_path__ + \"static/media/mythic.7189479f.svg\";","import { makeVar } from '@apollo/client';\n\nexport const meState = makeVar({});\nexport const menuOpen = makeVar(false);\n\nif (localStorage.getItem(\"access_token\") !== null){\n    meState({\n        loggedIn: true,\n        access_token: localStorage.getItem(\"access_token\"),\n        refresh_token: localStorage.getItem(\"refresh_token\"),\n        user: JSON.parse(localStorage.getItem(\"user\"))\n    });\n}\nexport const successfulLogin = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    localStorage.setItem(\"refresh_token\", data.refresh_token);\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\n    meState({\n        loggedIn: true,\n        ...data\n    });\n}\nexport const successfulRefresh = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    meState[\"loggedIn\"] = true;\n}\nexport const FailedRefresh = () =>{\n    console.log(\"failed refresh\");\n    localStorage.removeItem(\"access_token\");\n    localStorage.removeItem(\"refresh_token\");\n    localStorage.removeItem(\"user\");\n    meState({\n        loggedIn: false,\n        access_token: null,\n        refresh_token: null,\n        user: null\n    });\n    \n}\n\nexport const updateCurrentOperationState = ({operation_name, operation_id}) => {\n    meState({...meState, user: {...meState.user, current_operation: operation_name, current_operation_id: operation_id}})\n}\n","import { useSnackbar } from 'notistack'\n\nlet useSnackbarRef = null;\n\nexport const SnackbarUtilsConfigurator = () => {\n  useSnackbarRef = useSnackbar();\n\n  return null;\n};\n\nexport const snackActions = {\n  success(msg, options) {\n    this.toast(msg, 'success', options)\n  },\n  warning(msg, options) {\n    this.toast(msg, 'warning', options)\n  },\n  info(msg, options) {\n    this.toast(msg, 'info', options)\n  },\n  error(msg, options) {\n    this.toast(msg, 'error', options)\n  },\n  dismiss(){\n    useSnackbarRef.closeSnackbar();\n  },\n  toast(msg, variant = 'default', options) {\n    useSnackbarRef.enqueueSnackbar(msg, { variant, ...options })\n  }\n}\n","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport logo from '../../../assets/mythic.svg';\nimport { Redirect } from 'react-router-dom';\nimport { meState, successfulLogin, FailedRefresh } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {restartWebsockets} from '../../../index';\nimport { snackActions } from '../../utilities/Snackbar';\n\nexport function LoginForm(props){\n    const me = useReactiveVar(meState);\n    const [username, setUsername] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    useEffect( () => {\n        FailedRefresh();\n    }, [])\n    const submit = e => {\n        e.preventDefault();\n        if( username === \"\" || password === \"\"){\n            snackActions.warning(\"Username and Password required\");\n            return;\n        }\n        const requestOptions = {\n            method: \"POST\",\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({username, password})\n        };\n        fetch('/auth', requestOptions).then((response) => {\n            response.json().then(data => {\n                //console.log(data)\n                if(\"access_token\" in data){\n                    successfulLogin(data);\n                    restartWebsockets();\n                }else{\n                    snackActions.warning(\"Invalid Username or Password\");\n                    console.log(\"Error\", data);\n                }\n            }).catch(error => {\n                snackActions.warning(\"Error getting JSON from server\");\n                console.log(\"Error trying to get json response\", error.toString());\n            });\n        }).catch(error => {\n            snackActions.warning(\"Error talking to server\");\n            console.log(\"There was an error!\", error.toString());\n        });\n    }\n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordChange = (name, value, error) => {\n        setPassword(value);\n    }\n    const redirectPath = () => {\n        const locationState = props.location.state;\n        return locationState && locationState.from ? locationState.from.pathname : '/new/';\n    }\n    return (\n        <div style={{justifyContent: \"center\", display: \"flex\"}}>\n        { \n            me.loggedIn ?\n                (\n                    <Redirect to={redirectPath()}/>\n                )\n               : (\n                    <div>\n                    <img src={logo} height=\"400px\" alt=\"Mythic logo\"/>\n                        <form onSubmit={submit}>\n                            <MythicTextField name='username' value={username} onChange={onUsernameChange} width={30} />\n                            <MythicTextField name='password' type=\"password\" value={password} onChange={onPasswordChange} width={30} />\n                            <Button type=\"submit\" color=\"primary\" onClick={submit} variant=\"contained\" style={{marginRight: \"10px\"}}>Login</Button>\n                        </form>\n                    </div>\n                )\n        }\n        </div>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { snackActions } from '../../utilities/Snackbar';\n\nexport function APITokenRow(props){\n    const onChanged = (evt) => {\n        const {name} = evt.target;\n        const {id} = props;\n        props.onChanged({id, name});\n    }\n    return (\n            <TableRow key={\"apitokenRow\" + props.id}>\n                <TableCell><Button onClick={() => snackActions.warning(\"Not Implemented Yet\")} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button></TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />\n                </TableCell>\n                <TableCell>{props.token_type}</TableCell>\n                <TableCell>{props.token_value}</TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function SettingsOperatorDialog(props) {\n    const [username, setUsername] = React.useState(props.username ? props.username : \"\");\n    const [passwordOld, setPasswordOld] = React.useState(\"\");\n    const [passwordNew, setPasswordNew] = React.useState(\"\");\n    \n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordOldChange = (name, value, error) => {\n        setPasswordOld(value);\n    }\n    const onPasswordNewChange = (name, value, error) => {\n        setPasswordNew(value);\n    }\n    const onAccept = () =>{\n        props.onAccept(props.id, username, passwordOld, passwordNew);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            Use this dialog to update some information about an operator.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            placeholder={props.username}\n            value={username}\n            onChange={onUsernameChange}\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordOld\"\n            onChange={onPasswordOldChange}\n            name=\"old password\"\n            type=\"password\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordNew\"\n            onChange={onPasswordNewChange}\n            name=\"new password\"\n            type=\"password\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"primary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n\nexport function SettingsOperatorDeleteDialog(props) {\n    const onAccept = () =>{\n        props.onAccept(props.id);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Delete Operator</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This deletes an operator and prevents them from permanently logging in again. If you want a temporary solution, disable the operator instead.\n          </DialogContentText>\n          <DialogContentText>\n            Are you sure you want to delete operator \"{props.username}\"?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Delete\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from './MythicTextField';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function MythicDialog(props) {\n  const descriptionElementRef = React.useRef(null);\n  React.useEffect(() => {\n    if (props.open) {\n      const { current: descriptionElement } = descriptionElementRef;\n      if (descriptionElement !== null) {\n        descriptionElement.focus();\n      }\n    }\n  }, [props.open]);\n\n  return (\n      <Dialog\n        open={props.open}\n        onClose={props.onClose}\n        scroll=\"paper\"\n        maxWidth={props.maxWidth}\n        fullWidth={props.fullWidth}\n        aria-labelledby=\"scroll-dialog-title\"\n        aria-describedby=\"scroll-dialog-description\"\n      >\n        {props.innerDialog}\n      </Dialog>\n  );\n}\n\nexport function MythicModifyStringDialog(props) {\n  const [comment, setComment] = React.useState(\"\");\n    const onCommitSubmit = () => {\n        props.onSubmit(comment);\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n    useEffect( () => {\n      setComment(props.value);\n    }, [props.value]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewJSONAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n  const [tableType, setTableType] = React.useState(\"dictionary\");\n  const [headers, setHeaders] = React.useState([]);\n    useEffect( () => {\n      let permissions = [];\n      try{\n        let permissionDict;\n        if(props.value.constructor === Object){\n          permissionDict = props.value;\n        }else{\n          permissionDict = JSON.parse(props.value);\n        } \n        \n        if(permissionDict.constructor === Object){\n          for(let key in permissionDict){\n            if(permissionDict[key].constructor === Object || Array.isArray(permissionDict[key])){\n              permissions.push({\"name\": key, \"value\": JSON.stringify(permissionDict[key], null, 2)});\n            }else{\n              permissions.push({\"name\": key, \"value\": permissionDict[key]});\n            }\n            \n            setHeaders([props.leftColumn, props.rightColumn]);\n          }\n        }else{\n          setTableType(\"array\");\n          if(permissionDict.length > 0){\n            setHeaders(Object.keys(permissionDict[0]));\n            permissions = permissionDict;\n          }else{\n            setHeaders([]);\n          }\n        }\n      }catch(error){\n        console.log(error);\n      }\n      setComment(permissions);\n    }, [props.value, props.leftColumn, props.rightColumn]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          {headers.map( (header, index) => (\n                            <TableCell key={'header' + index}>{header}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {tableType === \"dictionary\" ? (\n                      comment.map( (element, index) => (\n                        <TableRow key={'row' + index} hover>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell style={{wordBreak: \"break-all\", whiteSpace: \"pre-wrap\"}}>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))\n                    ) : (\n                      comment.map( (row, index) => (\n                        <TableRow key={'row' + index} hover>\n                            {Object.keys(row).map( (key) => (\n                              <TableCell key={\"row\" + index + \"cell\" + key}>{row[key]}</TableCell>\n                            ))}\n                        </TableRow>\n                      ))\n                    ) }\n                    \n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewObjectPropertiesAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n    useEffect( () => {\n        const permissions = props.keys.reduce( (prev, key) => {\n          if(props.value[key] !== undefined && props.value[key] !== null && props.value[key] !== \"\"){\n            return [...prev, {\"name\": key, \"value\": props.value[key]}]\n          }\n          else{\n            return [...prev];\n          }\n        }, []);\n\n      setComment(permissions);\n    }, [props.value, props.keys]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell>{props.leftColumn}</TableCell>\n                          <TableCell>{props.rightColumn}</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {comment.map( (element, index) => (\n                      <TableRow key={'row' + index}>\n                        <TableCell>{element.name}</TableCell>\n                        <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import {useEffect, useRef } from 'react';\n\nexport function toLocalTime(date, view_utc_time) {\n    try {\n        if(date === null){\n            return \"N/A\";\n        }\n        let init_date = new Date(date);\n        if (view_utc_time) {\n            return date + \" UTC\";\n        }\n        return init_date.toDateString() + \" \" + init_date.toTimeString().substring(0, 8);\n    } catch (error) {\n        console.log(\"warning\", \"Failed to get local time converted: \" + error.toString());\n    }\n\n}\n\nexport function getTimeDifference(checkin_time) {\n    let date = new Date();\n    let now = date.getTime() + date.getTimezoneOffset() * 60000;\n    let millisec = Math.abs(now - (new Date(checkin_time).getTime()));\n    let seconds = Math.trunc(((millisec / 1000)) % 60);\n    let minutes = Math.trunc(((millisec / (1000 * 60))) % 60);\n    let hours = Math.trunc(((millisec / (1000 * 60 * 60))) % 24);\n    let days = Math.trunc(((millisec / (1000 * 60 * 60 * 24))) % 365);\n    let output = \"\";\n    if(days !== 0){ output += days + \"d\";}\n    if(hours !== 0){ output += hours + \"h\";}\n    if(minutes !== 0){ output += minutes + \"m\";}\n    output += seconds + \"s\";\n    return output;\n}\n//https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n\n    let id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { APITokenRow } from './SettingsOperatorAPIToken';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { SettingsOperatorDeleteDialog } from './SettingsOperatorDeleteDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nexport function SettingsOperator(props){\n    const [open, setOpen] = React.useState(false);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const onViewUTCChanged = (evt) => {\n        const {id} = props;\n        props.onViewUTCChanged(id, !props[evt.target.name]);\n    }\n    const onAdminChanged = (evt) => {\n        const {id} = props;\n        props.onAdminChanged(id, !props[evt.target.name]);\n    }\n    const onActiveChanged = (evt) => {\n        const {id} = props;\n        props.onActiveChanged(id, !props[evt.target.name]);\n    }\n    const apitokenOnChanged = (id, name) => {\n        \n    }\n    const onAccept = (id, username, passwordOld, passwordNew) => {\n        console.log(\"settingsoperator onAccept\", id, username, passwordOld, passwordNew);\n        if(username !== props.username){\n          props.onUsernameChanged(id, username);\n        }\n        setOpenUpdateDialog(false);\n    }\n    const onAcceptDelete = (id) => {\n        props.onDeleteOperator(id);\n        setOpenDeleteDialog(false);\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id}>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button>\n                    <MythicDialog open={openDelete} \n                        onClose={()=>{setOpenDeleteDialog(false);}} \n                        innerDialog={<SettingsOperatorDeleteDialog onClose={()=>{setOpenDeleteDialog(false);}}  onAccept={onAcceptDelete} {...props} />}\n                     />\n                </TableCell>\n                <TableCell>{props.username}</TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Update</Button>\n                    <MythicDialog open={openUpdate} \n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<SettingsOperatorDialog onAccept={onAccept} handleClose={()=>{setOpenUpdateDialog(false);}} title=\"Update Operator\"  {...props}/>}\n                     />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.view_utc_time}\n                        onChange={onViewUTCChanged}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"view_utc_time\"\n                      />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onActiveChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />\n                </TableCell>\n                <TableCell>{toLocalTime(props.last_login, me.user.view_utc_time)}</TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.admin}\n                        onChange={onAdminChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"admin\"\n                      />\n                </TableCell>\n                <TableCell>\n                    <IconButton aria-label=\"expand row\" size=\"small\" onClick={() => setOpen(!open)}>\n                        {open ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                      </IconButton>\n                </TableCell>\n            </TableRow>\n            <TableRow>\n            <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={9}>\n              <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                <Box margin={1}>\n                  <Typography variant=\"h6\" gutterBottom component=\"div\" style={{display: \"inline-block\"}}>\n                    API Tokens\n                  </Typography>\n                  <Button size=\"small\" onClick={() => snackActions.warning(\"Not Implemented Yet\")} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New</Button>\n                  <Table size=\"small\" aria-label=\"tokens\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell style={{width: \"7rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Active</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Type</TableCell>\n                        <TableCell>Token</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {\n                        props.apitokens.map((token) => (<APITokenRow {...token} onChanged={apitokenOnChanged} key={\"token\" + token.id} />))\n                      }\n                    </TableBody>\n                  </Table>\n                </Box>\n              </Collapse>\n            </TableCell>\n          </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { SettingsOperator } from './SettingsOperator';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function SettingsOperatorTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            props.onNewOperator(username, passwordNew);\n            setOpenNewDialog(false);\n        }\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Settings\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n        <MythicDialog open={openNew} \n            onClose={()=>{setOpenNewDialog(false);}} \n            innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewDialog(false);}}  {...props}/>}\n         />\n        <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n            <TableHead>\n                <TableRow>\n                    <TableCell style={{width: \"9rem\"}}>Delete Account</TableCell>\n                    <TableCell>Username</TableCell>\n                    <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                    <TableCell style={{width: \"10rem\"}}>UTC Timestamps</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Account Active</TableCell>\n                    <TableCell>Last Login</TableCell>\n                    <TableCell>Account Creation Date</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Admin Status</TableCell>\n                    <TableCell style={{width: \"5rem\"}}>More...</TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n            \n            {props.operator.map( (op) => (\n                <SettingsOperator\n                    onViewUTCChanged={props.onViewUTCChanged}\n                    onAdminChanged={props.onAdminChanged}\n                    onActiveChanged={props.onActiveChanged} \n                    onDeleteOperator={props.onDeleteOperator}\n                    onUsernameChanged={props.onUsernameChanged}\n                    key={\"operator\" + op.id}\n                    {...op}\n                />\n            ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { SettingsOperatorTable } from './SettingsOperatorTable';\nimport {useMutation, useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst GET_Operator = gql`\nquery GetOperators {\n  operator(where: {deleted: {_eq: false}}, order_by: {username: asc}) {\n    active\n    admin\n    creation_time\n    deleted\n    id\n    last_login\n    username\n    view_utc_time\n    apitokens {\n      token_value\n      token_type\n      active\n      id\n    }\n  }\n}\n`;\nconst operatorsUpdateViewUTCTime = gql`\nmutation SettingsUpdateOperatorViewUTCTime($id: Int!, $view_utc_time: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {view_utc_time: $view_utc_time}) {\n    id\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdateAdmin = gql`\nmutation SettingsUpdateOperatorAdminMutation($id: Int!, $admin: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {admin: $admin}) {\n      id\n      admin\n  }\n}\n`;\nconst operatorsUpdateActive = gql`\nmutation SettingsUpdateOperatorActiveMutation($id: Int!, $active: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {active: $active}) {\n      id\n      active\n  }\n}\n`;\nconst operatorsDelete = gql`\nmutation SettingsDeleteOperatorMutation($id: Int!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {deleted: true}) {\n      id\n      deleted\n  }\n}\n`;\nconst operatorsUpdateUsername = gql`\nmutation SettingsUsernameOperatorMutation($id: Int!, $username: String!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {username: $username}) {\n      id\n      username\n  }\n}\n`;\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    active\n    creation_time\n    deleted\n    error\n    id\n    last_login\n    status\n    username\n    view_utc_time\n  }\n}\n`;\nexport function Settings(props){\n    const me = useReactiveVar(meState);\n    const { loading, error, data } = useQuery(GET_Operator, {fetchPolicy: \"network-only\"});\n    const [updateUTC] = useMutation(operatorsUpdateViewUTCTime, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          if(result.update_operator_by_pk.id === me.user.id){\n              const state = meState();\n              state.user.view_utc_time = result.update_operator_by_pk.view_utc_time;\n              meState(state);\n          }\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: (err) => {\n          console.log(err);\n          snackActions.error(\"Unable to update operator timestamps without Admin permissions\");\n        }\n    });\n    const [deleteOperator] = useMutation(operatorsDelete, {\n        update: (cache, {data}) => {\n            const existingOperators = cache.readQuery({query: GET_Operator});\n            const removedOperator = data.update_operator_by_pk;\n            const newFinalOperators = existingOperators.operator.filter(op => (op.id !== removedOperator.id));\n            cache.writeQuery({\n                query: GET_Operator,\n                data: {operator: newFinalOperators}\n            });\n        },\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: () => {\n          snackActions.warning(\"Unable to delete operator without Admin permissions\");\n        }\n    });\n    const [updateAdmin] = useMutation(operatorsUpdateAdmin, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator admin status without Admin permissions\");\n      }\n    });\n    const [updateActive] = useMutation(operatorsUpdateActive, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator active status without Admin permissions\");\n      }\n    });\n    const [newOperator] = useMutation(newOperatorMutation, {\n        update: (cache, {data}) => {\n            if(data.createOperator.status === \"success\"){\n                const existingOperators = cache.readQuery({query: GET_Operator});\n                const newOperator = data.createOperator;\n                cache.writeQuery({\n                    query: GET_Operator,\n                    data: {operator: [newOperator, ...existingOperators.operator]}\n                });\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateUsername] = useMutation(operatorsUpdateUsername, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's username without Admin permissions\");\n      }\n    })\n    const onViewUTCChanged = (id, value) => {\n        updateUTC({variables: {id, view_utc_time: value}});\n    }\n    const onAdminChanged = (id, value) => {\n        updateAdmin({variables: {id, admin: value}});\n    }\n    const onActiveChanged = (id, value) => {\n        updateActive({variables: {id, active: value}});\n    }\n    const onNewOperator = (username, password) => {\n        newOperator({variables: {username, password}});\n    }\n    const onDeleteOperator = (id) => {\n        deleteOperator({variables: {id}});\n    }\n    const onUsernameChanged = (id, value) => {\n      updateUsername({variables: {id, username: value}})\n    }\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n    <div style={{height: \"calc(94vh)\", marginTop: \"10px\", marginRight: \"5px\"}}>\n        <SettingsOperatorTable \n            onViewUTCChanged={onViewUTCChanged}\n            onAdminChanged={onAdminChanged}\n            onActiveChanged={onActiveChanged}\n            onNewOperator={onNewOperator}\n            onDeleteOperator={onDeleteOperator}\n            onUsernameChanged={onUsernameChanged}\n            {...data} />\n        </div>\n    );\n} \n","import React, {useEffect} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport { meState, menuOpen } from '../../../cache';\n\nexport function Logout(props){\n    useEffect(() => {\n        meState({loggedIn:false, accessToken: null, refreshToken: null, user: null});\n        localStorage.removeItem(\"access_token\");\n        localStorage.removeItem(\"refresh_token\");\n        localStorage.removeItem(\"user\");\n        menuOpen(false);\n    })\n    return(\n        <Redirect to='/new/login' />\n    )\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_name: String!) {\n  payloadtype(where: {ptype: {_eq: $payload_name}}) {\n    buildparameters (where: {deleted: {_eq: false} } ){\n      description\n      name\n      id\n      parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function PayloadTypeBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_Payload_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            console.log(data);\n            setBuildParams(data.payloadtype[0].buildparameters);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id}>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                            Scripting/Building Name:<br/>{param.name}<br/>\n                            Parameter Type:<br/>{param.parameter_type}<br/>\n                            Default Parameter:<br/>{param.parameter}<br/>\n                            Required value?<br/>{param.required ? \"Yes\": \"No\"}<br/>\n                            Verifier Regex:<br/>{param.verifier_regex}<br/>\n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {PayloadTypeBuildDialog} from './PayloadTypeBuildDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function PayloadTypeCard(props) {\n  const classes = useStyles();\n  const [wrappedPayloads, setWrappedPayloads] = React.useState(\"\");\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [supportedOS, setSupportedOS] = React.useState(\"\");\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  useEffect( () => {\n    if( props.wrap_these_payload_types.length > 0){\n      const wrapped = props.wrap_these_payload_types.map( (cur) => {\n        return cur.wrapped.ptype;\n      });\n      setWrappedPayloads(wrapped.join(\", \"));\n    }\n    else{\n      setWrappedPayloads(\"\");\n    }\n    setSupportedOS(props.supported_os.split(\",\").join(\", \"));\n  }, [props.wrap_these_payload_types, props.supported_os]);\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <CardMedia\n            className={classes.media}\n            component=\"img\"\n            style={{width: \"125px\", height: \"125\", padding: \"10px\", objectFit: \"unset\"}}\n            src={\"/static/\" + props.ptype + \".svg\"}\n          />\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.ptype}</Typography>\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Operating Systems:</b> {supportedOS}\n              </Typography>\n              \n              {props.wrap_these_payload_types.length === 0 ? (null) : (\n                <Typography variant=\"body1\" component=\"p\">\n                  <b>Wrapped Payload Types:</b> {wrappedPayloads}\n                </Typography>\n              )}\n              <Typography variant=\"body2\" component=\"p\">\n                {props.note}\n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={props.wrapper ? \"/docs/wrappers/\" + props.ptype : \"/docs/agents/\" + props.ptype} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Building Info</Button>\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                    onClose={()=>{setOpenBuildingDialog(false);}} \n                    innerDialog={<PayloadTypeBuildDialog {...props} payload_name={props.ptype} />}\n                 />\n          </div>\n    </Card>\n  );\n}\n","import React, { useEffect }  from 'react';\nimport { PayloadTypeCard } from './PayloadTypeCard';\nimport {useSubscription, gql } from '@apollo/client';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\n\n const SUB_Payload_Types = gql`\n subscription getPayloadTypesSubscription {\n  payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n    author\n    container_running\n    id\n    last_heartbeat\n    note\n    ptype\n    supported_os\n    wrapper\n    translationcontainer {\n        id\n        name\n        last_heartbeat\n        container_running\n    }\n    wrap_these_payload_types {\n        id\n        wrapped {\n          ptype\n        }\n    }\n  }\n}\n `;\n\n\nexport function PayloadTypeContainerDisplay(props){\n    const theme = useTheme();\n    const {  data } = useSubscription(SUB_Payload_Types);\n    const [payloadTypes, setPayloadTypes] = React.useState([]);\n    useEffect( () => {\n      if(data === undefined){\n        setPayloadTypes([]);\n        return;\n      }\n      setPayloadTypes(data.payloadtype);\n    }, [data])\n    return (\n      <React.Fragment>\n          <div style={{ width: \"49%\",display: \"inline-flex\", flexDirection: \"column\", alignItems: \"stretch\"}}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                  <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                      Payload Types\n                  </Typography>\n                </Paper> \n              {\n                  payloadTypes.map( (pt) => (\n                      <PayloadTypeCard key={\"payloadtype\" + pt.id} {...pt} />\n                  ))\n              }\n              \n          </div>\n          \n      </React.Fragment>\n    );\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_C2_Details = gql`\nquery GetPC2Details($payload_name: String!) {\n  c2profile(where: {name: {_eq: $payload_name}}) {\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      name\n      parameter_type\n      id\n      randomize\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function C2ProfileBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_C2_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            setBuildParams(data.c2profile[0].c2profileparameters);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id}>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                            Scripting/Building Name:<br/>{param.name}<br/>\n                            Parameter Type:<br/>{param.parameter_type}<br/>\n                            Default Parameter:<br/>{param.default_value}<br/>\n                            Required value?<br/>{param.required ? \"Yes\": \"No\"}<br/>\n                            Verifier Regex:<br/>{param.verifier_regex}<br/>\n                            Randomize value?: <br/>{param.randomize ? \"Yes\" : \"No\" }<br/>\n                            Random Format String: <br/>{param.format_string}<br/>\n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getProfileOutputQuery = gql`\nquery getProfileOutput($id: Int!) {\n  getProfileOutput(id: $id) {\n    status\n    error\n    output\n  }\n}\n`;\n\nexport function C2ProfileOutputDialog(props) {\n    const { loading, error, data } = useQuery(getProfileOutputQuery, {\n        variables: {id: props.profile_id},\n        onCompleted: data => {\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <MythicTextField multiline={true} onChange={()=>{return}} value={data.getProfileOutput.output} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getProfileConfigQuery = gql`\nquery getProfileConfigOutput($id: Int!, $filename: String!) {\n  downloadContainerFile(id: $id, filename: $filename) {\n    status\n    error\n    filename\n    data\n  }\n}\n`;\n\nexport function C2ProfileConfigDialog(props) {\n    const [config, setConfig] = useState(\"\");\n    const { loading, error } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.profile_id, filename: \"config.json\"},\n        onCompleted: data => {\n            if(data.downloadContainerFile.status === \"error\"){\n                setConfig(\"Errored trying to read file from container\\n\" + data.downloadContainerFile.error);\n            }else{\n                setConfig(atob(data.downloadContainerFile.data));\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    \n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onConfigSubmit = () => {\n        props.onConfigSubmit(btoa(config));\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setConfig(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Configuration</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={onChange} value={config} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function C2ProfileStartStopOutputDialog(props) {\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <MythicTextField multiline={true} value={props.output} onChange={() => {return}} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport {Typography} from '@material-ui/core';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.map( (opt) => {\n            if(returnAllDictValues){\n                return{\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }\n            }\n            return {[opt.key]: opt.value};\n        });\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            const options = JSON.parse(default_value);\n            setDictOptions(options);\n            let initial = options.reduce( (prev, op) => {\n                // find all the options that have a default_show of true\n                if(op.default_show){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                }else{\n                    return [...prev];\n                }\n            }, [] );\n            submitDictChange(initial);\n            setDictValue(initial);\n            let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                //for each option, check how many instances of it are allowed\n                // then check how many we have currently\n                const count = initial.reduce( (preCount, cur) => {\n                    if(cur.name === op.name){return preCount + 1}\n                    return preCount;\n                }, 0);\n                if(op.max === -1 || op.max > count){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                }else{\n                    return [...prev]\n                }\n            }, []);\n            setDictSelectOptions(dictSelectOptionsInitial);\n            if (dictSelectOptionsInitial.length > 0){\n                setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                //console.log(\"passed dictionaryvalue\", passedValue);\n                setDictValue(passedValue);\n                submitDictChange(passedValue);\n            }\n            \n        }else{\n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        const choice = dictSelectOptionsChoice;\n        setDictValue([...dictValue, choice]);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = dictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + \"i\"} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + id + 'popover' : undefined}>\n                            {description}\n                    </Typography>\n                    <Popover id={'taskparam' + id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{name.length > 0 ? name : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\n\n\nexport function CreatePayloadC2ProfileParametersTable(props){\n\n    const onChange = (paramName, value, error) => {\n        props.onChange(props.name, paramName, value, error);\n    }\n    return (\n    <TableContainer component={Paper} className=\"mythicElement\">\n  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"20%\"}}>Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {props.c2profileparameters.map( (op) => (\n                        <CreatePayloadParameter key={\"c2paramtablerow\" + op.id} returnAllDictValues={props.returnAllDictValues} onChange={onChange} {...op} />\n                    ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {useState} from 'react';\nimport {Button, Typography} from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useLazyQuery, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {CreatePayloadC2ProfileParametersTable} from '../CreatePayload/CreatePayloadC2ProfileParametersTable';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport * as RandExp from 'randexp';\n\nconst getProfileConfigQuery = gql`\nquery getProfileParameters($id: Int!, $operation_id: Int!) {\n  c2profile_by_pk(id: $id) {\n    c2profileparameters(where: {deleted: {_eq: false}}, order_by: {name: asc}){\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n      instance_name\n    }\n  }\n}\n`;\nconst getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    id\n    value\n  }\n}\n`;\nconst deleteInstanceMutation = gql`\nmutation deleteSavedInstance($name: String!, $operation_id: Int!){\n  delete_c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}){\n    affected_rows\n  }\n}\n`;\nconst createInstanceMutation = gql`\nmutation createNewC2Instance($instance_name: String!, $c2_instance: String!, $c2profile_id: Int!){\n  create_c2_instance(c2_instance: $c2_instance, instance_name: $instance_name, c2profile_id: $c2profile_id){\n    status\n    error\n  }\n}\n`;\n\nexport function C2ProfileSavedInstancesDialog(props) {\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [instanceName, setInstanceName] = useState(\"\");\n    const [selectedInstance, setSelectedInstance] = useState(\"\");\n    const [createdInstances, setCreatedInstances] = useState([]);\n    const [baseParameters, setBaseParameters] = useState([]);\n    const [currentParameters, setCurrentParameters] = useState([]);\n    const { loading } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const parameters = data.c2profile_by_pk.c2profileparameters.map( (param) => {\n              if(param.format_string !== \"\"){\n                  const random = new RandExp(param.format_string).gen();\n                  return {...param, default_value: random, value: random}\n              }else if(param.default_value !== \"\"){\n                  if(param.parameter_type === \"ChooseOne\"){\n                      return {...param, value: param.default_value.split(\"\\n\")[0]}\n                  }else if(param.parameter_type === \"Dictionary\"){\n                      let tmp = JSON.parse(param.default_value);\n                      let initial = tmp.reduce( (prev, op) => {\n                          // find all the options that have a default_show of true\n                          if(op.default_show){\n                              return [...prev, {value: op.default_value, key: op.name === \"*\" ? \"\": op.name, name: op.name, custom: op.name === \"*\" ? true : false} ];\n                          }else{\n                              return [...prev];\n                          }\n                      }, [] );\n                      return {...param, value: initial}\n                  }else if(param.parameter_type === \"Date\"){\n                    let tmpDate = new Date();\n                    tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                    return {...param, value: tmpDate.toISOString().slice(0,10)}\n                  }else{\n                      return {...param, value: param.default_value}\n                  }\n              }else{\n                return {...param, error: param.required, value: param.default_value}\n              }\n          });\n          parameters.sort((a,b) => -b.description.localeCompare(a.description));\n          setBaseParameters([...parameters]);\n          setCurrentParameters([...parameters]);\n          setCreatedInstances(data.c2profile_by_pk.c2profileparametersinstances);\n        },\n        onError: data => {\n          \n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n      onCompleted: (data) => {\n        const updates = data.c2profileparametersinstance.map( (cur) => {\n          let inst = {...cur, ...cur.c2profileparameter};\n          if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n            inst[\"value\"] = JSON.parse(inst[\"value\"]);\n        }\n          return inst;\n        })\n        updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n        setCurrentParameters(updates);\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch instance data: \" + data);\n        console.log(data);\n      },\n      fetchPolicy: \"no-cache\"\n    })\n    const [deleteInstance] = useMutation(deleteInstanceMutation, {\n      onCompleted: (data) => {\n        setSelectedInstance(\"\")\n        setInstanceName(\"\");\n        setCurrentParameters([...baseParameters]);\n        const updatedInstances = createdInstances.filter( (cur) => cur.instance_name !== selectedInstance);\n        setCreatedInstances(updatedInstances);\n        snackActions.success(\"Sucessfully deleted instance\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to delete instance: \" + data);\n      }\n    });\n    const [createInstance] = useMutation(createInstanceMutation, {\n      onCompleted: (data) => {\n        if(data.create_c2_instance.status === \"success\"){\n          snackActions.success(\"Successfully created instance\");\n        }else{\n          snackActions.error(\"Failed to create instance: \" + data.create_c2_instance.error);\n        }\n        props.onClose();\n        \n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to create instance: \" + data);\n      }\n    })\n    if (loading) {\n     return <LinearProgress />;\n    }\n    const onConfigSubmit = () => {\n      if(instanceName.length === 0){\n        snackActions.warning(\"Must supply an instance name\");\n        return;\n      }\n        const config = currentParameters.reduce( (prev, cur) => {\n          return {...prev, [cur.name]: cur.value}\n        }, {});\n        createInstance({variables: {operation_id: me.user.current_operation_id, instance_name: instanceName, c2profile_id: props.id, c2_instance: JSON.stringify(config)}})\n    }\n    const onChange = (name, value, error) => {\n      setInstanceName(value);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n      const c2params = currentParameters.map( (param) => {\n        if (param.name === parameterName){\n            return {...param, error, value}\n        }\n        return param;\n      });\n      console.log(c2params);\n      setCurrentParameters(c2params);\n    }\n    const onChangeCreatedInstanceName = (evt) => {\n      setSelectedInstance(evt.target.value);\n      setInstanceName(evt.target.value);\n      if(evt.target.value === \"\"){\n        setCurrentParameters([...baseParameters]);\n      }else{\n        setCurrentParameters([]);\n        getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n      }\n    }\n    const deleteInstanceButton = () => {\n      setCurrentParameters([]);\n      deleteInstance({variables: {name: selectedInstance, operation_id: me.user.current_operation_id}})\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Save an Instance of {props.name}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <Typography style={{paddingBottom: \"10px\"}}>\n            Saving an instance of the parameters allows you to select them from a dropdown when creating agents later, saving time and typos.\n          </Typography>\n            {createdInstances.length > 0 ? (\n              <Grid container spacing={2} style={{paddingTop: \"10px\"}}>\n                <Grid item xs={6}>\n                  <FormControl style={{width: \"100%\"}}>\n                  <InputLabel >Select an Existing Instance</InputLabel>\n                      <Select\n                        style={{width: \"100%\", marginBottom: \"10px\"}}\n                        value={selectedInstance}\n                        label=\"Select an Existing Instance\"\n                        onChange={onChangeCreatedInstanceName}\n                      >\n                        <MenuItem value=\"\">New Instance</MenuItem>\n                      {\n                          createdInstances.map((opt, i) => (\n                              <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                          ))\n                      }\n                      </Select>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                  {selectedInstance.length > 0 ? (\n                    <Button style={{backgroundColor: theme.palette.error.main, color: \"white\"}} variant=\"contained\" onClick={deleteInstanceButton}> Delete Instance</Button>\n                  ) : (null)}\n                </Grid>\n            </Grid>\n            ) : (null)}\n            <MythicTextField name=\"Instance Name\" onChange={onChange} value={instanceName} style={{paddingTop: \"10px\"}}/>\n            <CreatePayloadC2ProfileParametersTable {...props} returnAllDictValues={true} c2profileparameters={currentParameters} onChange={updateC2Parameter} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            {selectedInstance.length > 0 ? (\"Update\") : (\"Create\")}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport {C2ProfileBuildDialog} from './C2ProfileBuildDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport {useMutation, gql} from '@apollo/client';\nimport {C2ProfileOutputDialog} from './C2ProfileOutputDialog';\nimport {C2ProfileConfigDialog} from './C2ProfileConfigDialog';\nimport {C2ProfileStartStopOutputDialog} from './C2ProfileStartStopOutputDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport {C2ProfileSavedInstancesDialog} from './C2ProfileSavedInstancesDialog';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\nconst startStopProfileMutation = gql`\nmutation StartStopProfile($id: Int!, $action: String) {\n  startStopProfile(id: $id, action: $action) {\n    status\n    error\n    output\n  }\n}\n`;\nconst setProfileConfigMutation = gql`\nmutation setProfileConfiguration($id: Int!, $file_path: String!, $data: String!) {\n  uploadContainerFile(id: $id, file_path: $file_path, data: $data) {\n    status\n    error\n    filename\n  }\n}\n`;\nexport function C2ProfilesCard(props) {\n  const classes = useStyles();\n  let date = new Date();\n  const theme = useTheme();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n  const dropdownAnchorRef = React.useRef(null);\n  const handleDropdownToggle = () => {\n    setDropdownOpen((prevOpen) => !prevOpen);\n  };\n  const handleDropdownClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setDropdownOpen(false);\n  };\n  const [startStopProfile] = useMutation(startStopProfileMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            setOutput(data.startStopProfile.output);\n            setOpenProfileStartStopDialog(true);\n        }\n    });\n    const onStartStopProfile = () => {\n        if(props.running){\n            snackActions.info(\"Submitting stop task...\" );\n        }else{\n            snackActions.info(\"Submitting start task...\" );\n        }  \n        startStopProfile({variables: {id: props.id, action: props.running ? \"stop\" : \"start\"}});\n    }\n    const [openProfileDialog, setOpenProfileDialog] = React.useState(false);\n    const [openProfileConfigDialog, setOpenProfileConfigDialog] = React.useState(false);\n    const [output, setOutput] = React.useState(\"\");\n    const [openProfileStartStopDialog, setOpenProfileStartStopDialog] = React.useState(false);\n    const [openProfileSavedInstancesDialog, setOpenProfileSavedInstancesDialog] = React.useState(false);\n    const [configSubmit] = useMutation(setProfileConfigMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            //console.log(data);\n            if(data.uploadContainerFile.status === \"success\"){\n                snackActions.success(\"Updated file\");\n            }else{\n                snackActions.error(\"Error updating: \" + data.uploadContainerFile.error );\n            }\n        }\n    });\n    const onConfigSubmit = (content) => {\n        configSubmit({variables: {id: props.id, file_path: \"config.json\", data: content}});\n    }\n  return (\n    <Card className={classes.root} elevation={5} style={{maxWidth: \"100%\"}}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            {props.is_p2p ? \n            (<FontAwesomeIcon icon={faLink} size=\"6x\" style={{width: \"125px\", height: \"125px\"}} />)\n            : \n            (<WifiIcon style={{width: \"125px\", height: \"125px\"}}/>)\n            }\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\"}}>{props.name}</Typography>\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Agents:</b> {props.payloadtypec2profiles.map( (pt) => (pt.payloadtype.ptype + \" \") )}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                {props.description}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n              { props.translation_container ? (\n                  <Typography variant=\"body1\" component=\"p\">\n                    <b>Translation Container:</b> {props.translation_container}\n                  </Typography>\n              ) : (null)\n              }\n                \n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={\"/docs/c2-profiles/\" + props.name.toLowerCase()} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Build Info</Button>\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                onClose={()=>{setOpenBuildingDialog(false);}} \n                innerDialog={<C2ProfileBuildDialog {...props} onClose={()=>{setOpenBuildingDialog(false);}} payload_name={props.name} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileStartStopDialog} \n                onClose={()=>{setOpenProfileStartStopDialog(false);}} \n                innerDialog={<C2ProfileStartStopOutputDialog output={output} onClose={()=>{setOpenProfileStartStopDialog(false);}} payload_name={props.name} />}\n            />\n            {props.container_running ? (\n                   props.running ?\n                   (\n                    <ButtonGroup variant=\"contained\" color={props.running ? \"primary\" : \"secondary\"} ref={dropdownAnchorRef} aria-label=\"split button\">\n                       <Button size=\"small\" onClick={onStartStopProfile} style={{width: \"100%\"}}>Stop Profile</Button>\n                       <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                   )\n                   :\n                   (\n                     props.is_p2p ? (\n                      null\n                     ) : (\n                      <ButtonGroup variant=\"contained\" color={props.running ? \"primary\" : \"secondary\"} ref={dropdownAnchorRef} aria-label=\"split button\">\n                        <Button size=\"small\" onClick={onStartStopProfile} style={{width: \"100%\"}}>Start Profile</Button>\n                        <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                     )\n                      \n                   )\n            ) : (\n              <Button disabled color=\"secondary\">Container Offline</Button>\n            )}\n             <Button size=\"small\" variant=\"contained\" color=\"primary\" onClick={() => {setOpenProfileSavedInstancesDialog(true);}}><BookmarkIcon /> Saved Instances</Button>\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileDialog} \n                onClose={()=>{setOpenProfileDialog(false);}} \n                innerDialog={<C2ProfileOutputDialog {...props} payload_name={props.name} onClose={()=>{setOpenProfileDialog(false);}} profile_id={props.id} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileConfigDialog} \n                onClose={()=>{setOpenProfileConfigDialog(false);}} \n                innerDialog={<C2ProfileConfigDialog {...props} onConfigSubmit={onConfigSubmit} payload_name={props.name} onClose={()=>{setOpenProfileConfigDialog(false);}} profile_id={props.id} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileSavedInstancesDialog} \n                onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} \n                innerDialog={<C2ProfileSavedInstancesDialog {...props} onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} />}\n            />\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleDropdownClose}>\n                      <MenuList id=\"split-button-menu\">\n                        <MenuItem key={\"dropdownprofile\" + props.id + \"menu1\"} onClick={()=>{setOpenProfileConfigDialog(true);}}>View/Edit Config</MenuItem>\n                       {\n                        props.running ? \n                        (<MenuItem key={\"dropdownprofile\" + props.id + \"menu2\"} onClick={()=>{setOpenProfileDialog(true);}}>View Stdout/Stderr</MenuItem>) : (null)\n                       }\n                      </MenuList>\n                      \n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n          </div>\n    </Card>\n  );\n}\n","import React, {useEffect} from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {C2ProfilesCard} from './C2ProfilesCard';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_C2_Profiles = gql`\nsubscription getPayloadTypesSubscription {\n   c2profile(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   author\n   id\n   container_running\n   description\n   is_p2p\n   last_heartbeat\n   name\n   running\n   payloadtypec2profiles(order_by: {payloadtype: {ptype: asc}}) {\n     payloadtype {\n       ptype\n     }\n   }\n }\n}\n`;\n\nexport function C2ProfileContainerDisplay(props) {\n  const { data } = useSubscription(SUB_C2_Profiles, {fetchPolicy: \"network-only\"});\n  const [c2profile, setC2profile] = React.useState([]);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setC2profile([]);\n      return;\n    }\n    setC2profile(data.c2profile);\n  }, [data])\n  return (\n        <div style={{width: \"49%\", display: \"inline-flex\", flexDirection: \"column\", alignItems: \"stretch\", paddingLeft: \"10px\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  C2 Profiles\n              </Typography>\n            </Paper> \n            {\n                c2profile.map( (pt) => (\n                    <C2ProfilesCard key={\"c2prof\" + pt.id} {...pt} />\n                ))\n            }\n        </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLanguage } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function TranslationContainerCard(props) {\n  const classes = useStyles();\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <FontAwesomeIcon icon={faLanguage} size=\"6x\" style={{width: \"125px\", height: \"125px\"}} />\n        </StyledAvatar>\n        <div>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.name}</Typography>\n          {props.payloadtypes.length > 0 ? (\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Translated Payload Types:</b> {props.payloadtypes.map( (pt) => pt.ptype).join(\", \")}\n              </Typography>\n          ): (null)}\n        </div>\n    </Card>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {TranslationContainerCard} from './TranslationContainerCard';\nimport {useSubscription, gql } from '@apollo/client';\nconst SUB_Translation_Containers = gql`\nsubscription getTranslationContainersSubscription {\n translationcontainer(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   name\n   id\n   container_running\n   last_heartbeat\n   payloadtypes(order_by: {ptype: asc}) {\n       ptype\n       id\n   }\n }\n}\n`;\nexport function TranslationContainerDisplay(props) {\n  const [translationContainers, setTranslationContainers] = React.useState([]);\n  const [translationContainersWithPayloads, setTranslationContainersWithPayloads] = React.useState([]);\n  const {  data } = useSubscription(SUB_Translation_Containers);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setTranslationContainers([]);\n      return;\n    }\n    const unassigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length === 0);\n    const assigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length > 0);\n    setTranslationContainers(unassigned);\n    setTranslationContainersWithPayloads(assigned); \n  }, [data]);\n  return (\n    <div style={{width: \"100%\", display: \"inline-flex\", flexDirection: \"column\", alignItems: \"stretch\", }}>\n      {\n        translationContainers.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers Not Assigned to Payload Types\n              </Typography>\n            </Paper> \n            {translationContainers.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n      {\n        translationContainersWithPayloads.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers\n              </Typography>\n            </Paper> \n            {translationContainersWithPayloads.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n    </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport {PayloadTypeContainerDisplay} from './PayloadTypeContainerDisplay';\nimport {C2ProfileContainerDisplay} from './C2ProfileContainerDisplay';\nimport {TranslationContainerDisplay} from './TranslationContainerDisplay';\n\n\nexport function PayloadTypesC2Profiles(props){\n\n    return (\n      <React.Fragment>\n        \n            <PayloadTypeContainerDisplay />\n\n            <C2ProfileContainerDisplay />\n\n          <TranslationContainerDisplay />\n\n\n      </React.Fragment>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [supportsDynamicLoading, setSupportsDynamicLoading] = React.useState(false);\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n                    console.log(props.prevData);\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setFileExtension(props.prevData.file_extension);\n                    setSupportsDynamicLoading(props.prevData.supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    setSupportsDynamicLoading(data.payloadtype[0].supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }\n                                return {...param, error: param.required, value: param.default_value}\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    console.log(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"file_extension\": fileExtension, \n                        \"supports_dynamic_loading\": supportsDynamicLoading,\n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSupportsDynamicLoading(payload.supports_dynamic_loading);\n                const params = payload.buildparameters.map( (param) => {\n                    console.log(param);\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicConfirmDialog(props) {\n    const theme = useTheme();\n    const handleSubmit = () => {\n        props.onSubmit();\n        props.onClose();\n    }\n\n  return (\n    <MythicDialog fullWidth={false} maxWidth=\"sm\" open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle >{props.title ? (props.title) : (\"Are you sure?\")}</DialogTitle>\n            {props.dialogText === undefined ? (null) : (\n              <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n                <DialogContentText>\n                  {props.dialogText}\n                </DialogContentText>\n              </DialogContent>\n            )}\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                {props.cancelText ? (props.cancelText) : (\"Close\")}\n              </Button>\n              <Button onClick={handleSubmit} autoFocus variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                {props.acceptText ? (props.acceptText) : (\"Remove\")}\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nconst GET_Payload_Types = gql`\nquery getCommands($payloadType: String!) {\n  command(where: {payloadtype: {ptype: {_eq: $payloadType}}, script_only: {_eq: false}, deleted: {_eq: false}}, order_by: {cmd: asc}) {\n    cmd\n    attributes\n    id\n    supported_ui_features\n    help_cmd\n    description\n    needs_admin\n  }\n}\n `;\n\nexport function Step3SelectCommands(props){\n    const [commands, setCommands] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type\"]},\n        onCompleted: () => {\n          \n          if(!props.buildOptions[\"supports_dynamic_loading\"]){\n              \n              const allCommands = data.command.map( c => {\n                return {...c, selected: true, disabled: true, reason: \"Agent doesn't support dynamic loading\"}\n              });\n              setCommandOptions(allCommands);\n          }else{\n            const allCommands = data.command.reduce( (prev, cur) => {\n              try{\n                const attributes = JSON.parse(cur.attributes);\n                if(attributes[\"supported_os\"].length === 0 || attributes[\"supported_os\"].includes(props.buildOptions[\"os\"])){\n                  if(attributes[\"builtin\"] !== undefined && attributes[\"builtin\"]){\n                    return [...prev, {...cur, disabled: true, selected: true, reason: \"This command is builtin and must be included\"}];\n                  }else{\n                    try{\n                      if(attributes[\"load_only\"] !== undefined && attributes[\"load_only\"]){\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"This command can only be loaded in once a callback is established\"}]\n                      }\n                      let include_command = true;\n                      if(attributes[\"filter_by_build_parameter\"] !== undefined){\n                        // if filter_attributes has keys, we need to filter down based on all of them\n                        for( const[key, value] of Object.entries(attributes[\"filter_by_build_parameter\"])){\n                            for(let i = 0; i < props.buildOptions.parameters.length; i++){\n                              if(props.buildOptions.parameters[i][\"name\"] === key){\n                                if(props.buildOptions.parameters[i][\"value\"] !== value){\n                                  include_command = false;\n                                }\n                              }\n                            }\n                        }\n                      }\n                      if(include_command){\n                        if(attributes[\"suggested_command\"] !== undefined && attributes[\"suggested_command\"]){\n                          return [...prev, {...cur, disabled: false, selected: true, reason: \"This command is suggested to be included\"}]\n                        }else{\n                          return [...prev, {...cur, disabled: false, selected: false, reason: \"\"}];\n                        }\n                      }\n                    }catch(error){\n                      console.error(error);\n                    }\n                  }\n                }\n                return [...prev, {...cur, disabled: true, selected: false, reason: \"This command isn't supported by the selected OS\"}];\n              }catch(error){\n                return [...prev, {...cur, disabled: false, selected: false, reason: \"Failed to parse command attributes\"}];\n              }\n            }, []);\n            setCommandOptions(allCommands);\n            if(props.prevData !== undefined){\n              const selectedCommands = allCommands.map( (c) => {\n                if(props.prevData.includes(c.cmd)){\n                  return {...c, selected: true};\n                }else{\n                  return {...c, selected: false};\n                }\n              })\n              setCommandOptions(selectedCommands);\n            }\n          }\n        }\n    });\n    const finished = (selectedCommands) => {\n        let foundExit = false;\n        for(let i = 0; i < selectedCommands.length; i++){\n            if(selectedCommands[i][\"supported_ui_features\"].includes(\"callback_table:exit\")){\n              foundExit = true;\n              break;\n            }\n        }\n        if(foundExit){\n          const cmdNames = selectedCommands.map( c => c.cmd);\n          props.finished(cmdNames);\n        }else{\n          setOpenConfirmDialog(true);\n          setCommands(selectedCommands);\n        }\n    }\n    const acceptConfirm = () => {\n      const cmdNames = commands.map( c => c.cmd);\n      props.finished(cmdNames);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Build Commands Into Agent\n        </Typography> <br/>\n        <CommandTransferSelect commands={commandOptions} payload_type={props.buildOptions[\"payload_type\"]} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        <MythicConfirmDialog open={openConfirmDialog} \n            title={\"No exit command selected, continue?\"} \n            onClose={() => setOpenConfirmDialog(false)} \n            acceptText=\"Accept\"\n            onSubmit={acceptConfirm} />\n        \n        </div>\n    );\n} \n\nfunction CommandTransferSelect(props) {\n  const classes = useStyles();\n  const [checked, setChecked] = React.useState([]);\n  const [left, setLeft] = React.useState([]);\n  const [right, setRight] = React.useState([]);\n  const leftChecked = intersection(checked, left);\n  const rightChecked = intersection(checked, right);\n  const [hoveredCommand, setHoveredCommnad] = React.useState({});\n  function not(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) === undefined)\n  }\n  \n  function intersection(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) !== undefined)\n  }\n  const handleToggle = (value) => () => {\n    let currentIndex = -1;\n    if(props.itemKey){\n      currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n    }else{\n      currentIndex = checked.indexOf(value);\n    }\n    \n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  };\n\n  const handleAllRight = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(cur.disabled && !cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && !cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n\n  const handleCheckedRight = () => {\n    setRight(right.concat(leftChecked));\n    setLeft(not(left, leftChecked));\n    setChecked(not(checked, leftChecked));\n  };\n\n  const handleCheckedLeft = () => {\n    setLeft(left.concat(rightChecked));\n    setRight(not(right, rightChecked));\n    setChecked(not(checked, rightChecked));\n  };\n\n  const handleAllLeft = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if((cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n  useEffect( () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n        if(!cur.selected){\n          return [...prev, {...cur}];\n        }else{\n          return [...prev];\n        }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  }, [props.commands]);\n  const setHoveredData = (event) => {\n    const cmd = props.commands.filter( c => c.cmd === event.target.innerText );\n    if(cmd.length > 0){\n      setHoveredCommnad(cmd[0]);\n    }\n  }\n  const customList = (title, items) => (\n    <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(40vh)\", overflow: \"auto\"}} elevation={5}>\n      \n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = valueObj[\"cmd\"];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <div onMouseEnter={setHoveredData} key={'commandtransfer' + value}>\n                  <ListItem style={{padding:0}} disabled={valueObj[\"disabled\"]} \n                    key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}\n                    >\n                    <ListItemIcon>\n                      <Checkbox\n                        disabled={valueObj[\"disabled\"]}\n                        checked={checked.findIndex( (element) => element[\"cmd\"] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                </div>\n              );\n            })}\n            <ListItem />\n          </List>\n        \n    </Paper>\n  );\n  const finished = () => {\n    props.finished(right);\n  }\nreturn (\n  <React.Fragment>\n      <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n        <Grid item xs={5}>{customList(\"Available Commands\", left)}</Grid>\n        <Grid item>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllRight}\n              disabled={left.length === 0}\n              aria-label=\"move all right\"\n            >\n              \n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedRight}\n              disabled={leftChecked.length === 0}\n              aria-label=\"move selected right\"\n            >\n              &gt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedLeft}\n              disabled={rightChecked.length === 0}\n              aria-label=\"move selected left\"\n            >\n              &lt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllLeft}\n              disabled={right.length === 0}\n              aria-label=\"move all left\"\n            >\n              \n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item xs={5}>{customList(\"Commands Included\", right)}</Grid>\n      </Grid>\n      <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.root}>\n        <Grid item xs={12} style={{height: \"100%\", marginBottom: \"10px\"}}>\n          {hoveredCommand[\"cmd\"] !== undefined &&\n            <Paper className={classes.paper} style={{width: \"100%\"}} elevation={5}>\n              \n                <CardHeader className={classes.cardHeader}\n                  title={\n                    <React.Fragment>\n                      {hoveredCommand[\"cmd\"]}\n                      <Button variant=\"contained\" color=\"primary\" href={\"/docs/agents/\" + props.payload_type + \"/commands/\" + hoveredCommand[\"cmd\"]} \n                        style={{marginLeft: \"10px\", float: \"right\"}}  target=\"_blank\">Documentation\n                      </Button>\n                    </React.Fragment>\n                  }\n                />\n                <Divider />\n                {hoveredCommand[\"reason\"] !== \"\" ? (\n                  <Typography variant=\"body1\" align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>{hoveredCommand[\"disabled\"] ? (\"Disabled Reason: \") : (\"Information: \")} </b>{hoveredCommand[\"reason\"]}\n                  </Typography>\n                ) : (null)}\n                <br/>\n                <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Commandline Help: </b>{hoveredCommand[\"help_cmd\"]}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Needs Admin Permissions: </b>{hoveredCommand[\"needs_admin\"] ? \"True\": \"False\"}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Description: </b>{hoveredCommand[\"description\"]}\n                  </Typography>\n            </Paper>\n          }\n          \n        </Grid>\n      </Grid>\n      <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n  </React.Fragment>\n);\n}","import React from 'react';\nimport {useQuery, gql, useLazyQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadC2ProfileParametersTable} from './CreatePayloadC2ProfileParametersTable';\nimport Typography from '@material-ui/core/Typography';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport * as RandExp from 'randexp';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesC2ProfilesQuery($payloadType: String!, $operation_id: Int!) {\n  c2profile(where: {payloadtypec2profiles: {payloadtype: {ptype: {_eq: $payloadType}}}, deleted: {_eq: false}}) {\n    name\n    is_p2p\n    description\n    id\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n        instance_name\n    }\n  }\n}\n `;\n const getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n      c2profile {\n          name\n      }\n    }\n    id\n    value\n  }\n}\n`;\n\nexport function Step4C2Profiles(props){\n    const me = useReactiveVar(meState);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [selectedInstance, setSelectedInstance] = React.useState(\"\");\n    const { loading, error } = useQuery(GET_Payload_Types, {variables:{payloadType: props.buildOptions[\"payload_type\"], operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const profiles = data.c2profile.map( (c2) => {\n                if(props.prevData !== undefined){\n                    //console.log(props.prevData);\n                    for(let p = 0; p < props.prevData.length; p++){\n                        if(props.prevData[p][\"name\"] === c2.name){\n                            // we selected this c2 profile before and clicked back, so re-fill it out\n                            const parameters = props.prevData[p][\"c2profileparameters\"].map( (c) => {\n                                if(c.parameter_type === 'Dictionary'){\n                                    const original = JSON.parse(c.default_value);\n                                    const fixedArray = c.value.map( (p) => {\n                                        const keys = Object.keys(p);\n                                        if(p.hasOwnProperty(\"default_value\")){\n                                            return {...p};\n                                        }\n                                        let customInfo = {};\n                                        for(let i = 0; i < original.length; i++){\n                                            if(original[i][\"name\"] === keys[0]){\n                                                return {...original[i], \"key\": keys[0], \"value\": p[keys[0]]};\n                                            }\n                                            if(original[i][\"name\"] === \"*\"){\n                                                customInfo = original[i];\n                                            }\n                                        }\n                                        return {...customInfo, \"key\": keys[0], \"value\": p[keys[0]]};\n                                    })\n                                    return {...c, value: fixedArray};\n                                    \n                                }\n                                return c;\n                            })\n                            \n                            parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                            return {...c2, \"selected\": true, c2profileparameters: parameters};\n                        }\n                    }\n                }\n                \n                const parameters = c2.c2profileparameters.map( (param) => {\n                    if(param.format_string !== \"\"){\n                        const random = new RandExp(param.format_string).gen();\n                        return {...param, default_value: random, value: random}\n                    }else if(param.default_value !== \"\"){\n                        if(param.parameter_type === \"ChooseOne\"){\n                            return {...param, value: param.default_value.split(\"\\n\")[0]}\n                        }else if(param.parameter_type === \"Dictionary\"){\n                            let tmp = JSON.parse(param.default_value);\n                            let initial = tmp.reduce( (prev, op) => {\n                                // find all the options that have a default_show of true\n                                if(op.default_show){\n                                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                                }else{\n                                    return [...prev];\n                                }\n                            }, [] );\n                            return {...param, value: initial}\n                        }else if(param.parameter_type === \"Date\"){\n                            var tmpDate = new Date();\n                            if(param.default_value !== \"\"){\n                                tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                            }\n                            return {...param, value: tmpDate.toISOString().slice(0,10)}\n                        }else{\n                            return {...param, value: param.default_value}\n                        }\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                return {...c2, \"selected\": false, c2profileparameters: parameters};\n            });\n            profiles.sort((a, b) => -b.name.localeCompare(a.name))\n            //console.log(profiles);\n            setC2Profiles(profiles);\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const finished = () => {\n        let allValid = true;\n        let includedC2 = false;\n        c2Profiles.forEach( (c2) => {\n            if(c2.selected){\n                includedC2 = true;\n                c2.c2profileparameters.forEach( (param) => {\n                    if(param.error){\n                        snackActions.warning(c2.name + \"'s parameter \" + param.name + \" is invalid\");\n                        allValid = false;\n                    }\n                });\n            }\n        });\n        if(allValid){\n            //console.log(c2Profiles);\n            if(!includedC2){\n                snackActions.warning(\"Must select at least one C2 to include\");\n                return;\n            }\n            props.finished(c2Profiles);\n        }\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const toggleC2Selection = (evt, c2) => {\n        const updatedc2 = c2Profiles.map( (curc2) => {\n            if(c2.name === curc2.name){\n                return {...curc2, selected: !curc2.selected}\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n        const updatedc2 = c2Profiles.map( (curC2) => {\n            if(curC2.name === c2Name){\n                const c2params = curC2.c2profileparameters.map( (param) => {\n                    if (param.name === parameterName){\n                        return {...param, error, value}\n                    }\n                    return param;\n                });\n                return {...curC2, c2profileparameters: c2params};\n            }\n            return curC2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n        onCompleted: (data) => {\n          const updates = data.c2profileparametersinstance.map( (cur) => {\n            let inst = {...cur, ...cur.c2profileparameter};\n            if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n                inst[\"value\"] = JSON.parse(inst[\"value\"]);\n            }\n            return inst;\n          })\n          updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n          const updatedc2 = c2Profiles.map( (curc2) => {\n            if(updates[0].c2profile.name === curc2.name){\n                return {...curc2, c2profileparameters: updates};\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to fetch instance data: \" + data);\n          console.log(data);\n        },\n        fetchPolicy: \"no-cache\"\n      })\n    const onChangeCreatedInstanceName = (evt, c2) => {\n        setSelectedInstance(evt.target.value);\n        if(evt.target.value !== \"\"){\n            const updatedc2 = c2Profiles.map( (curc2) => {\n                if(c2.name === curc2.name){\n                    curc2.c2profileparameters = [];\n                }\n                return curc2;\n            });\n            setC2Profiles(updatedc2);\n            getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n        }\n      }\n      if (loading) {\n        return <div><CircularProgress /></div>;\n       }\n       if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n       }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select C2 Profiles\n            </Typography>\n            {\n                c2Profiles.map( (c2) => (\n                <React.Fragment key={\"step4c2switch\" + c2.id}>\n                    <FormControlLabel\n                      value=\"top\"\n                      control={\n                      <Switch\n                        checked={c2.selected}\n                        onChange={evt => toggleC2Selection(evt, c2)}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />}\n                      label={c2.name}\n                      labelPlacement=\"top\"\n                      style={{display: \"inline\"}}\n                    />\n                    {c2.c2profileparametersinstances.length > 0 && c2.selected ? (\n                        <FormControl style={{width: \"100%\"}}>\n                        <InputLabel >Select an Existing Instance</InputLabel>\n                            <Select\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedInstance}\n                              label=\"Select an Existing Instance\"\n                              onChange={evt => onChangeCreatedInstanceName(evt, c2)}\n                            >\n                              <MenuItem value=\"\">New Instance</MenuItem>\n                            {\n                                c2.c2profileparametersinstances.map((opt, i) => (\n                                    <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                    ) : (null)}\n                    <Typography variant=\"body1\" align=\"left\" id=\"selectc2profiles\" component=\"div\" key={\"step4desc\" + c2.id}\n                        style={{\"marginLeft\": \"10px\"}}>\n                          {c2.description}\n                    </Typography>\n                    { c2.selected ? ( \n                        <CreatePayloadC2ProfileParametersTable key={\"step4table\" + c2.id} returnAllDictValues={false} {...c2} onChange={updateC2Parameter} />\n                        ):(null)\n                    }\n                </React.Fragment>\n                ))\n            }\n<br/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n        </div>\n    );\n} \n","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                snackActions.info(`Building payload ${data.payload[0].uuid}...`, {autoHideDuration: 5000});\n            }else{\n                if(data.payload[0].build_error !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const c2Profiles = props.buildOptions[3].reduce( (prev, c2) => {\n            if(c2.selected){\n                const parameters = c2.c2profileparameters.reduce( (prev, param) => {\n                    if(param.parameter_type === \"Dictionary\"){\n                        const final_values = param.value.map( (p) => {\n                            return {name: p.name, key: p.key, value: p.value, custom: p.custom}\n                        });\n                        return {...prev, [param.name]: final_values};\n                    }\n                    return {...prev, [param.name]: param.value}\n                }, {});\n                return [...prev, {\"c2_profile\": c2.name, \"c2_profile_parameters\": parameters}];\n            }\n            return prev;\n        }, []);\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": props.buildOptions[2],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": c2Profiles\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectCommands} from './Step3SelectCommands';\nimport {Step4C2Profiles} from './Step4C2Profiles';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Commands', 'Select C2 Profiles', 'Build']\n}\n\nexport function CreatePayload(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectCommands buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step4C2Profiles buildOptions={payload[1]} prevData={payload[3]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 4:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n                disabled={props.disableNext}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport {Typography} from '@material-ui/core';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.map( (opt) => {\n            if(returnAllDictValues){\n                return{\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }\n            }\n            return {[opt.key]: opt.value};\n        });\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            const options = JSON.parse(default_value);\n            setDictOptions(options);\n            let initial = options.reduce( (prev, op) => {\n                // find all the options that have a default_show of true\n                if(op.default_show){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                }else{\n                    return [...prev];\n                }\n            }, [] );\n            submitDictChange(initial);\n            setDictValue(initial);\n            let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                //for each option, check how many instances of it are allowed\n                // then check how many we have currently\n                const count = initial.reduce( (preCount, cur) => {\n                    if(cur.name === op.name){return preCount + 1}\n                    return preCount;\n                }, 0);\n                if(op.max === -1 || op.max > count){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                }else{\n                    return [...prev]\n                }\n            }, []);\n            setDictSelectOptions(dictSelectOptionsInitial);\n            if (dictSelectOptionsInitial.length > 0){\n                setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                setDictValue(passedValue);\n                submitDictChange(passedValue);\n            }\n            \n        }else{\n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        const choice = dictSelectOptionsChoice;\n        setDictValue([...dictValue, choice]);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = dictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + \"i\"} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + id + 'popover' : undefined}>\n                            {description}\n                    </Typography>\n                    <Popover id={'taskparam' + id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{name.length > 0 ? name : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedPayloadTypeID, setSelectedPayloadTypeID] = React.useState(0);\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setSelectedPayloadTypeID(props.prevData.payload_type_id);\n                    setFileExtension(props.prevData.file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setSelectedPayloadTypeID(data.payloadtype[0].id);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }\n                                return {...param, error: param.required, value: param.default_value}\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"payload_type_id\": selectedPayloadTypeID,\n                        \"file_extension\": fileExtension, \n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSelectedPayloadTypeID(payload.id);\n                const params = payload.buildparameters.map( (param) => {\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_id: Int!, $operation_id: Int!) {\n  payload(where: {id: {_eq: $payload_id}, operation_id: {_eq: $operation_id}}) {\n    uuid\n    wrapped_payload_id\n    payloadtype{\n        ptype\n    }\n    payloadcommands {\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    filemetum {\n      filename_text\n      agent_file_id\n      id\n      md5\n      sha1\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        description\n      }\n    }\n    os\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n  }\n}\n`;\nexport function DetailedPayloadTable(props){\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Payload Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n           <DetailedPayloadInnerTable {...props} />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\nfunction DetailedPayloadInnerTable(props){\n  const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {payload_id: props.payload_id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const commandState = data.payload[0].payloadcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            }).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0));\n            setCommands(commandState);\n            const buildParametersState = data.payload[0].buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.payload[0].c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n      <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.payload[0].payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.payload[0].os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.payload[0].uuid}</TableCell>\n                    </TableRow>\n                    { data.payload[0].filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.payload[0].filemetum.filename_text}</TableCell>\n                        </TableRow>\n                        \n                    ) : null }\n\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.payload[0].filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.payload[0].filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.payload[0].filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + props.payload_id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + props.payload_id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + props.payload_id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                          {cmd.enc_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Encryption Key: </b> {cmd.enc_key}\n                                          </React.Fragment>) }\n                                        {cmd.dec_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Decryption Key: </b> {cmd.dec_key}\n                                        </React.Fragment>) }\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                                \n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n                {commands.length > 0 &&\n                <React.Fragment>\n                    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Loaded Commands\n                      </Typography>\n                    </Paper>\n                    <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Command Name</TableCell>\n                        <TableCell>Mythic Version</TableCell>\n                        <TableCell>Loaded Version</TableCell>\n                        <TableCell>Documentation</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {\n                        commands.map( (cmd) => (\n                            <TableRow key={cmd.cmd + props.payload_id} hover>\n                                <TableCell>{cmd.cmd}</TableCell>\n                                <TableCell>{cmd.mythic}</TableCell>\n                                <TableCell>{cmd.payload}</TableCell>\n                                <TableCell>\n                                <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                                    href={\"/docs/agents/\" + data.payload[0].payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button>\n                                </TableCell>\n                            </TableRow>\n                        ))\n                        \n                      }\n                    </TableBody>\n                  </Table>\n                </React.Fragment>\n                }\n              {data.payload[0].wrapped_payload_id !== null &&\n                <React.Fragment>\n                  <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Wrapped Payload Information\n                      </Typography>\n                    </Paper>\n                  <DetailedPayloadInnerTable payload_id={data.payload[0].wrapped_payload_id} />\n                </React.Fragment>\n              }\n          </React.Fragment>\n        )\n}","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from '../Payloads/DetailedPayloadTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport InfoIcon from '@material-ui/icons/Info';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nconst GET_Payload_Types = gql`\nquery getWrappablePayloads($payloadType: Int!) {\n  payloadtype_by_pk(id: $payloadType) {\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n        payloads(where: {auto_generated: {_eq: false}, build_phase: {_eq: \"success\"}, deleted: {_eq: false}}) {\n          id\n          tag\n          uuid\n          creation_time\n          filemetum {\n            agent_file_id\n            filename_text\n            id\n          }\n        }\n      }\n    }\n  }\n}\n `;\n\nexport function Step3SelectPayload(props){\n    const [payloadOptions, setPayloadOptions] = React.useState([]);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type_id\"]},\n        onCompleted: () => {\n          if(data.payloadtype_by_pk.wrap_these_payload_types.length > 0){\n            let options = [];\n            for(let i = 0; i < data.payloadtype_by_pk.wrap_these_payload_types.length; i++){\n              for(let j = 0; j < data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads.length; j++){\n                options.push({ptype: data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.ptype, ...data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads[j] })\n              }\n            }\n            setPayloadOptions(options);\n          }else{\n            snackActions.warning(\"No supported payload for that wrapper\");\n          }\n          \n        }\n    });\n    const finished = (selectedPayload) => {\n      if(selectedPayload.uuid === undefined){\n        snackActions.error(\"Can't continue without selecting a payload\");\n        return;\n      }\n      props.finished(selectedPayload.uuid);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Wrap Agent Into New Payload\n        </Typography> <br/>\n        <PayloadSelect payloadOptions={payloadOptions} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        </div>\n    );\n} \n\nfunction PayloadSelect(props) {\n  const classes = useStyles();\n  \n  const finished = (payload) => {\n    props.finished(payload);\n  }\nreturn (\n  <React.Fragment>\n      <TableContainer component={Paper}>\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Select</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.payloadOptions.map( (op) => (\n                    <PayloadsTableRow\n                        onSelected={finished}\n                        key={\"payload\" + op.id}\n                        payload={op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <div style={{paddingTop: \"20px\"}}>\n           <CreatePayloadNavigationButtons disableNext first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n        </div>\n      \n  </React.Fragment>\n);\n}\n\nexport function PayloadsTableRow(props){\n  const [openDetailedView, setOpenDetailedView] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const onSelected = () => {\n      props.onSelected(props.payload);\n  }\n  return (\n      <React.Fragment>\n          <TableRow key={\"payload\" + props.payload.uuid} hover>\n              <TableCell>\n              <Button size=\"small\" onClick={onSelected} color=\"primary\" variant=\"contained\">Select</Button>\n              </TableCell>\n              <TableCell>{toLocalTime(props.payload.creation_time, me.user.view_utc_time)}</TableCell>\n              <TableCell>{props.payload.filemetum.filename_text}</TableCell>\n              <TableCell>{props.payload.tag}</TableCell>\n              <TableCell>\n                  <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                      <InfoIcon />\n                  </IconButton>\n              </TableCell>\n          </TableRow>\n          <TableRow>\n          {openDetailedView ? (\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                onClose={()=>{setOpenDetailedView(false);}} \n                innerDialog={<DetailedPayloadTable {...props} payload_id={props.payload.id} onClose={()=>{setOpenDetailedView(false);}} />}\n            />\n          ) : (null) }\n        </TableRow>\n      </React.Fragment>\n      )\n}","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                snackActions.info(`Building payload ${data.payload[0].uuid}...`, {autoHideDuration: 5000});\n            }else{\n                if(data.payload[0].build_error !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": [],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": [],\n            \"wrapper\": true,\n            \"wrapped_payload\": props.buildOptions[2]\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectPayload} from './Step3SelectPayload';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Payload', 'Build']\n}\n\nexport function CreatePayloadWrapper(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectPayload buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nexport function EventFeedTableEventsActions(props){\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    \n    const onUpdateResolution = () => {\n        handleClose();\n        props.onUpdateResolution({id: props.id, resolved: !props.resolved});\n    }\n    const onUpdateLevel = () => {\n        handleClose();\n        props.onUpdateLevel({id:props.id});\n    }\n    const handleClose = () => {\n        setAnchorEl(null);\n      };\n    const onUpdateDeleted = () => {\n        handleClose();\n        props.onUpdateDeleted({id:props.id});\n    }\n    const getSurroundingEvents = () => {\n        handleClose();\n        props.getSurroundingEvents({id:props.id});\n    }\n    const handleClick = React.useCallback((e) => {\n        setAnchorEl(e.currentTarget)\n    }, []);\n    return (\n        <ListItemSecondaryAction>\n            <IconButton aria-controls={\"eventmenu\" + props.id} aria-haspopup=\"true\" onClick={handleClick}><MoreVertIcon/></IconButton>\n                <Menu elevation={5} id={\"eventmenu\" + props.id} anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleClose} >\n                    {\n                        props.level === \"warning\" && props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Unresolve</MenuItem>\n                        ) : ( props.level === \"warning\" && !props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Resolve</MenuItem>\n                            ) : (\n                            <MenuItem onClick={onUpdateLevel}>Make Warning</MenuItem>\n                            )\n                        )\n                    }\n                    <MenuItem onClick={getSurroundingEvents}>Get Surrounding Events</MenuItem>\n                    <MenuItem onClick={onUpdateDeleted}><DeleteIcon/>Delete</MenuItem>\n                </Menu>\n            </ListItemSecondaryAction>\n        )\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EventFeedTableEventsActions} from './EventFeedTableEventsActions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: '36ch',\n  },\n  inline: {\n    display: 'inline',\n  },\n}));\n\nexport function EventFeedTableEvents(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n\n    return (\n            <ListItem alignItems=\"flex-start\" style={{...props.style, }}>\n                <ListItemAvatar>\n                    <Avatar>\n                        {props.operator ? props.operator.username[0] : \"M\"}\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText disableTypography \n                    primary={\n                        <React.Fragment>\n                          <Typography\n                            component=\"span\"\n                            variant=\"body1\"\n                            className={classes.inline}\n                            style={{fontWeight: \"bold\", margin: 0, padding: 0}}\n                          >\n                            {props.operator ? props.operator.username : \"Mythic\"}\n                            {props.count > 1 ? \" ( \" + props.count + \" )\" : \"\"}\n                          </Typography>\n                          <Typography\n                            component=\"span\"\n                            variant=\"caption\"\n                            className={classes.inline}\n                            style={{margin: \"0 0 0 10px\"}}\n                            >\n                            {toLocalTime(props.timestamp, me.user.view_utc_time)}\n                            </Typography>\n                        </React.Fragment>\n                    }\n                    secondary={\n                          <pre style={{overflowX: \"auto\", width: \"max-content\", maxWidth: \"97%\", margin: \"0 0 0 0\", borderRadius: \"9px\", padding: \"5px\", backgroundColor: props.level === \"warning\" && props.resolved ? theme.palette.textBackgroundColorSuccess : (props.level === \"warning\" && !props.resolved ? theme.palette.textBackgroundColorError : (props.operator ? theme.palette.textBackgroundColor : theme.palette.textBackgroundColorMythic))}}>{props.message}</pre>\n                    }\n                    style={{}}\n                />\n                <EventFeedTableEventsActions id={props.id} level={props.level} \n                  onUpdateDeleted={props.onUpdateDeleted}\n                  onUpdateResolution={props.onUpdateResolution} \n                  onUpdateLevel={props.onUpdateLevel} \n                  getSurroundingEvents={props.getSurroundingEvents} \n                  resolved={props.resolved}/>\n\n            </ListItem>\n        )\n}\n\n\n","import React from 'react';\nimport SendIcon from '@material-ui/icons/Send';\nimport IconButton from '@material-ui/core/IconButton';\nimport {TextField} from '@material-ui/core';\n\nexport function EventFeedTableInput(props){\n    const [message, setMessage] = React.useState(\"\");\n    const onMessageChange = (evt) => {\n        evt.preventDefault();\n        setMessage(evt.target.value);\n    }\n    const onSubmitMessage = (e) => {\n        e.preventDefault();\n        if(message && message.length > 0){\n            props.onSubmitMessage(message);\n            setMessage(\"\");\n        }\n    } \n\n    return (          \n        <div style={{padding: \"0\", margin: \"0\", position: \"absolute\", bottom: 0, width: \"100%\"}}>\n            <form onSubmit={onSubmitMessage}>\n                <TextField InputProps={{endAdornment:\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitMessage}>\n                        <SendIcon/>\n                    </IconButton>\n                    }} \n                    fullWidth\n                    size=\"small\"\n                    style={{padding:0,margin:0}}\n                    variant=\"outlined\"\n                    value={message} onChange={onMessageChange}\n                    label=\"Type Message...\" \n                />\n            </form>\n        </div>  \n    )\n}\n\n","import React, { useEffect, useRef } from 'react';\nimport { EventFeedTableEvents } from './EventFeedTableEvents';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport { EventFeedTableInput } from './EventFeedTableInput';\nimport {Button} from '@material-ui/core';\nimport {VariableSizeList } from 'react-window';\nimport Autosizer from 'react-virtualized-auto-sizer';\n\nconst Row = ({data, index, style}) => {\n    const op = data[data.length - index - 1];\n    return (\n        <div style={style}>\n            <EventFeedTableEvents\n                {...op}\n            />\n        </div> \n    )\n};\n\nconst EventList = ({onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, operationeventlog}) => {\n    const listRef = React.createRef();\n    const getItemSize = (index) => {\n        const op = operationeventlog[operationeventlog.length - index - 1];\n        return 75 + (20 * (op[\"message\"].match(/\\n/g) || []).length);\n    }\n    const eventlogWithFunctions = operationeventlog.map( (oplog) => {\n        return {onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, ...oplog}\n    });\n    useEffect( () => {\n        if(listRef.current){\n            listRef.current.resetAfterIndex(0);\n        }\n    }, [operationeventlog])\n    return (\n        <Autosizer>\n            {({height, width}) => (\n                <VariableSizeList\n                    ref={listRef}\n                    height={height-50}\n                    itemData={eventlogWithFunctions}\n                    itemCount={operationeventlog.length}\n                    width={width}\n                    itemSize={getItemSize}\n                    overscanCount={20}\n                    >\n                        {Row}\n                </VariableSizeList>\n            )}\n        </Autosizer>\n    )\n};\n\nexport function EventFeedTable(props){\n    const messagesEndRef = useRef(null);\n    const theme = useTheme();\n    \n    const onSubmitMessage = (message) => {\n        if(message && message.length > 0){\n            props.onSubmitMessage({level:\"info\", message});\n            scrollToBottom();\n        }\n    } \n    const scrollToBottom = () => {\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" })\n      }\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main,  color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Operational Event Messages\n                </Typography>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.loadMore()}}>Load More Events</Button>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.loadNextError()}}>Load All Errors</Button>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.resolveViewableErrors()}}>Resolve Viewable Errors</Button>\n                <Button variant=\"contained\" color={\"secondary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.resolveAllErrors()}}>Resolve All Errors</Button>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", height: \"calc(90vh)\", backgroundColor: theme.body}} variant={\"elevation\"}>\n                <EventList \n                    onUpdateResolution={props.onUpdateResolution}\n                    onUpdateLevel={props.onUpdateLevel}\n                    onUpdateDeleted={props.onUpdateDeleted}\n                    getSurroundingEvents={props.getSurroundingEvents}\n                    operationeventlog={props.operationeventlog}/>\n                <div ref={messagesEndRef} />\n                <EventFeedTableInput onSubmitMessage={onSubmitMessage} />\n            </Paper>\n        </React.Fragment>\n    )\n}","import React  from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {EventFeedTable} from './EventFeedTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst SURROUNDING_EVENTS = 5;\nconst EVENT_QUERY_SIZE = 100;\nconst GET_Event_Feed = gql`\nquery GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const SUB_Event_Feed = gql`\nsubscription GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\nconst GET_Surrounding_Events = gql`\nquery GetSurroundingOperationEventLogs($operation_id: Int!, $lower_id: Int!, $upper_id: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, id: {_gt: $lower_id, _lt: $upper_id}}, order_by: {id: desc}) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const Create_Operational_Event_Log = gql`\nmutation CreateOperationEventLog($message: String!, $level: String!) {\n  insert_operationeventlog_one(object:{level: $level, message: $message}) {\n    id\n  }\n}\n `;\n const GET_Event_Feed_Next_Error = gql`\n query GetOperationEventLogError($operation_id: Int!) {\n   operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}}, order_by: {id: desc}) {\n     id\n     level\n     message\n     resolved\n     timestamp\n     count\n     operator {\n       id\n       username\n     }\n   }\n }\n  `;\n  const Update_Deleted = gql`\nmutation UpdateDeletedOperationEventLog($id: Int!) {\n  update_operationeventlog(where:{id: {_eq: $id}}, _set: {deleted: true}) {\n    returning{\n        id\n        deleted\n    }\n  }\n}\n `;\n const Update_Resolution = gql`\nmutation UpdateResolutionOperationEventLog($id: Int!, $resolved: Boolean!) {\n  update_operationeventlog_by_pk(pk_columns:{id: $id}, _set: {resolved: $resolved}) {\n    id\n    resolved\n  }\n}\n `;\n const Update_Level = gql`\nmutation UpdateLevelOperationEventLog($id: Int!) {\n  update_operationeventlog_by_pk(pk_columns: {id: $id}, _set: {level: \"warning\"}) {\n    id\n    level\n  }\n}\n `;\n const Update_ResolveViewableErrors = gql`\n mutation UpdateResolveViewableErrorsOperationEventLog($ids: [Int]!) {\n   update_operationeventlog(where:{id: {_in: $ids}}, _set: {resolved: true}) {\n     returning{\n         id\n         resolved\n     }\n   }\n }\n  `;\n  const Update_ResolveAllErrors = gql`\n  mutation UpdateResolveAllErrorsOperationEventLog($operation_id: Int!) {\n    update_operationeventlog(where: {resolved: {_eq: false}, operation_id: {_eq: $operation_id}}, _set: {resolved: true}) {\n      returning{\n          id\n          resolved\n      }\n    }\n  }\n   `;\nexport function EventFeed(props){\n  const me = useReactiveVar(meState);\n  const [operationeventlog, setOperationEventLog] = React.useState([]);\n  const [offset, setOffset] = React.useState(0);\n  useSubscription(SUB_Event_Feed, {\n    variables: {operation_id: me.user.current_operation_id, offset: 0, eventQuerySize: EVENT_QUERY_SIZE}, fetchPolicy: \"network-only\",\n    shouldResubscribe: true,\n    onSubscriptionData: ({subscriptionData}) => {\n      if(offset === 0){\n        setOffset(subscriptionData.data.operationeventlog.length);\n      }\n      const newEvents = subscriptionData.data.operationeventlog.reduce( (prev, cur) => {\n        if(prev.find(({ id }) => id === cur.id)){\n          let indx = prev.findIndex( ({id}) => id === cur.id);\n          let updatingPrev = [...prev];\n          updatingPrev[indx] = cur;\n          return [...updatingPrev];\n        }\n        return [...prev, cur];\n      }, [...operationeventlog]);\n      newEvents.sort((a,b) => (a.id > b.id) ? -1 : ((b.id > a.id) ? 1 : 0));\n      setOperationEventLog(newEvents);\n    }\n});\n  const [getMoreTasking] = useLazyQuery(GET_Event_Feed, {\n      onError: data => {\n          console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        snackActions.dismiss();\n          if(data.operationeventlog.length === 0){\n            snackActions.info(\"No more events\");\n            return;\n          }\n          const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n            if(prev.find(({ id }) => id === cur.id)){\n              return [...prev];\n            }\n            return [...prev, cur];\n          }, [...operationeventlog]);\n          setOffset(offset + EVENT_QUERY_SIZE);\n          setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more events\");\n      }\n  });\n  const [getSurroundingEventQuery] = useLazyQuery(GET_Surrounding_Events, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        snackActions.dismiss();\n        let foundNew = false;\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          foundNew = true;\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        if(foundNew){\n          snackActions.success(\"Successfully fetched surrounding events\");\n        }else{\n          snackActions.info(\"No additional surrounding events\");\n        }\n        \n    }\n});\n  const [getNextError] = useLazyQuery(GET_Event_Feed_Next_Error, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      snackActions.dismiss();\n        if(data.operationeventlog.length === 0){\n          snackActions.info(\"No more events\");\n          return;\n        }\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more errors\");\n    }\n  });\n  const [newOperationEventLog] = useMutation(Create_Operational_Event_Log);\n  const [updateDeleted] = useMutation(Update_Deleted, {\n    update: (cache, {data}) => {\n        const removedMessage = data.update_operationeventlog.returning[0];\n        const newMessages = operationeventlog.filter(op => (op.id !== removedMessage.id));\n        setOperationEventLog(newMessages);\n        snackActions.success(\"Successfully deleted event log\");\n    }\n  });\n  const [updateResolution] = useMutation(Update_Resolution, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, resolved: updatedMessage.resolved};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateLevel] = useMutation(Update_Level, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, level: updatedMessage.level};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateResolveViewable] = useMutation(Update_ResolveViewableErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss();\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Viewable Errors to Resolve\");\n      }\n      \n    }\n  });\n  const [updateResolveAllErrors] = useMutation(Update_ResolveAllErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss()\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Errors to Resolve\");\n      }\n      \n    }\n  });\n  const onUpdateDeleted = ({id}) => {\n      snackActions.info(\"Deleting event log...\");\n      updateDeleted({variables: {id}});\n  }\n  const onSubmitMessage = ({level, message}) => {\n      newOperationEventLog({variables: {level, message}});\n  }\n  const onUpdateResolution = ({id, resolved}) => {\n    updateResolution({variables: {id, resolved}});\n  }\n  const onUpdateLevel = ({id}) => {\n    updateLevel({variables: {id}})\n  }\n  const loadMore = () => {\n    snackActions.info(\"Loading more events...\");\n    getMoreTasking({variables: {operation_id: me.user.current_operation_id, offset: offset, eventQuerySize: EVENT_QUERY_SIZE}})\n  }\n  const loadNextError = () => {\n    snackActions.info(\"Loading more errors...\");\n    getNextError({variables: {operation_id: me.user.current_operation_id}})\n  }\n  const getSurroundingEvents = ({id}) => {\n    snackActions.info(\"Loading surrounding events...\");\n    getSurroundingEventQuery({variables: {lower_id: id - SURROUNDING_EVENTS, upper_id: id + SURROUNDING_EVENTS, operation_id: me.user.current_operation_id}})\n  }\n  const resolveViewableErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    const resolveIds = operationeventlog.reduce( (prev, cur) => {\n      if(cur.level === \"warning\" && !cur.resolved){\n        return [...prev, cur.id];\n      }else{\n        return [...prev];\n      }\n    }, []);\n    updateResolveViewable({variables: {ids: resolveIds}});\n  }\n  const resolveAllErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    updateResolveAllErrors({variables: {operation_id: me.user.current_operation_id}});\n  }\n  return (\n      <EventFeedTable onSubmitMessage={onSubmitMessage} operationeventlog={operationeventlog} loadMore={loadMore} loadNextError={loadNextError}\n                      onUpdateDeleted={onUpdateDeleted} onUpdateResolution={onUpdateResolution} onUpdateLevel={onUpdateLevel} getSurroundingEvents={getSurroundingEvents}\n                      resolveViewableErrors={resolveViewableErrors} resolveAllErrors={resolveAllErrors}\n      />\n  );\n}\n","import React, { useEffect, useRef } from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nexport function OperationTableRowUpdateOperatorsDialogRow(props){\n    const [checked, setChecked] = React.useState(false);\n    const [viewMode, setViewMode] = React.useState(\"operator\");\n    const options = [\"operator\", \"spectator\", \"lead\", \"developer\"];\n    const inputRef = useRef(null); \n    useEffect( () => {\n      setChecked(props.operator.checked);\n      setViewMode(props.operator.view_mode);\n    }, [props.operator]);\n    const onBoolChange = (event) => {\n      setChecked(event.target.checked);\n      props.updateOperator({...props.operator, checked: event.target.checked, view_mode: viewMode});\n    }\n    const handleChange = (event) => {\n      setViewMode(event.target.value);\n      props.updateOperator({...props.operator, checked, view_mode: event.target.value});\n    };\n    return (\n        <React.Fragment>\n            <TableRow>\n                <TableCell><Switch checked={checked} onChange={onBoolChange} color=\"secondary\" /></TableCell>\n                <TableCell>{props.operator.username}</TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={viewMode}\n                        onChange={handleChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        {options.map( (opt) => (\n                            <MenuItem value={opt} key={opt}>{opt}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React, {  } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation, useQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport {OperationTableRowUpdateOperatorsDialogRow} from './OperationTableRowUpdateOperatorsDialogRow';\n\nconst GET_Operations = gql`\nquery GetOperation($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n}\n`;\nconst Update_Lead = gql`\nmutation updateLeadMutation($operation_id: Int!, $admin_id: Int!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {admin_id: $admin_id}) {\n    admin {\n      id\n      username\n    }\n    id\n  }\n}\n`;\nconst Update_OperatorViewMode = gql`\nmutation updateOperatorViewMode($operatoroperation_id: Int!, $view_mode: String!) {\n  update_operatoroperation_by_pk(pk_columns: {id: $operatoroperation_id}, _set: {view_mode: $view_mode}) {\n    id\n    view_mode\n  }\n}`;\nconst Remove_OperatorFromOperation = gql`\nmutation removeOperatorsFromOperation($operatoroperation_ids: [Int!]!) {\n  delete_operatoroperation(where: {id: {_in: $operatoroperation_ids}}) {\n    returning {\n      id\n    }\n  }\n}`;\nconst Add_OperatorsToOperation = gql`\nmutation addNewOperators($operators: [operatoroperation_insert_input!]!) {\n  insert_operatoroperation(objects: $operators) {\n    returning {\n      id\n    }\n  }\n}`;\nexport function OperationTableRowUpdateOperatorsDialog(props) {\n    const [operators, setOperators] = React.useState([]);\n    const [admin, setAdmin] = React.useState({});\n    const [originalOperators, setOriginalOperators] = React.useState([]);\n    useQuery(GET_Operations, {variables: {operation_id: props.id}, fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      const allOperators = data.operator.map( (operator) => {\n        return {...operator, checked: false}\n      });\n      setOriginalOperators(data.operation_by_pk.operatoroperations);\n      setAdmin(data.operation_by_pk.admin);\n      const updateAssignments = allOperators.map( (operator) => {\n        const assigned = data.operation_by_pk.operatoroperations.find( (op) => op.operator.id === operator.id );\n        if( assigned ){\n          if(assigned.operator.id === data.operation_by_pk.admin.id){\n            return {...operator, checked: true, view_mode: \"lead\", operatoroperation_id: assigned.id};\n          }\n          return {...operator, checked: true, view_mode: assigned.view_mode, operatoroperation_id: assigned.id};\n        }\n        return {...operator, view_mode: \"operator\"};\n      });\n      updateAssignments.sort( (a,b) => a.username > b.username ? 1 : -1)\n      setOperators(updateAssignments);\n    },\n    onError: (data) => {\n      snackActions.error(\"Failed to get operational data\");\n      console.error(data);\n    }\n    });\n    const [updateOperationLead] = useMutation(Update_Lead, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated Lead\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operation\");\n        console.log(\"error updating operation\", data);\n      }\n    })\n    const [addOperators] = useMutation(Add_OperatorsToOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully added operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to add operators\");\n        console.error(\"error adding operators to operation\", data);\n      }\n    })\n    const [removeOperatorsMutation] = useMutation(Remove_OperatorFromOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully removed operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to remove operators\");\n        console.error(\"error removing operators from operation\", data);\n      }\n    })\n    const [updateOperatorViewMode] = useMutation(Update_OperatorViewMode, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated operator view mode\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operator view mode\");\n        console.error(\"failed to update view mode: \", data);\n      }\n    })\n    const onAccept = () =>{\n      // make sure there is only one with view_mode of \"lead\"\n      //   set that operator as the lead, add/remove the other operators\n      const newAdmin = operators.find( (op) => op.view_mode === \"lead\");\n      if(!newAdmin){\n        snackActions.error(\"No Lead for the operation is set\");\n        return;\n      }\n      if(newAdmin.id !== admin.id){\n        updateOperationLead({variables: {\n          operation_id: props.id,\n          admin_id: newAdmin.id\n        }});\n      }\n      // now loop through the props.assignedOperators to see \n      let newOperators = [];\n      let removeOperators = [];\n      operators.forEach( (op) => {\n        let oldMatch = originalOperators.find( (oop) => oop.operator.id === op.id);\n        if(oldMatch){\n          // op was listed in the original set, so we're looking to update or remove based on checked/view_mode\n          if(op.checked){\n            // op is still checked, so just a potential update\n            if(op.view_mode !== oldMatch.view_mode){\n              console.log(\"update:\", op);\n              updateOperatorViewMode({variables: {operatoroperation_id: oldMatch.id, view_mode: op.view_mode}})\n\n            }\n          }\n          else{\n            // op is unchecked, but was originally listed, so remove this operator\n            removeOperators.push(oldMatch.id);\n          }\n          //op was checked then, is checked now, and nothing changed. just move on\n        }else{\n          //op wasn't listed, so if checked is true, then we want to add them to the operation\n          if(op.checked){\n            newOperators.push({operation_id: props.id, operator_id: op.id, view_mode: op.view_mode});\n          }\n          // op wasnt checked then, isn't checked now, so move on\n        }\n      });\n      if(newOperators.length > 0){\n        addOperators({variables: {operators: newOperators}});\n      }\n      if(removeOperators.length > 0){\n        removeOperatorsMutation({variables: {operatoroperation_ids: removeOperators}});\n      }      \n      props.onClose();\n    }\n    const updateOperator = (op) => {\n      let updates = [...operators];\n      if(op.view_mode === \"lead\"){\n        //make sure nobody else has this, if they do, demote them down to \"operator\"\n        updates = updates.map( (operator) => {\n          if(operator.view_mode === \"lead\"){\n            return {...operator, view_mode: \"operator\"}\n          }\n          return {...operator}\n        });\n      }\n      updates = updates.map( (operator) => {\n        if(operator.id === op.id){\n          return {...op};\n        }\n        return {...operator};\n      });\n      setOperators(updates);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify Operator Assignments</DialogTitle>\n        <DialogContent dividers={true}>\n          <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>   \n              <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"8rem\"}}>Assign to Operation</TableCell>\n                          <TableCell style={{width: \"8rem\"}}>Operator</TableCell>\n                          <TableCell style={{width: \"10rem\"}}>Role</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                  \n                  {operators.map( (op) => (\n                      <OperationTableRowUpdateOperatorsDialogRow\n                          key={\"operator\" + op.id} operator={op} updateOperator={updateOperator}\n                      />\n                  ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Switch from '@material-ui/core/Switch';\n\nconst GET_OperationData = gql`\nquery GetOperations($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    name\n    id\n    channel\n    display_name\n    icon_emoji\n    icon_url\n    webhook\n    webhook_message\n    complete\n  }\n}\n`;\nconst Update_Operation = gql`\nmutation MyMutation($operation_id: Int!, $channel: String!, $complete: Boolean!, $display_name: String!, $icon_emoji: String!, $icon_url: String!, $name: String!, $webhook: String!, $webhook_message: String!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {channel: $channel, complete: $complete, display_name: $display_name, icon_emoji: $icon_emoji, icon_url: $icon_url, name: $name, webhook: $webhook, webhook_message: $webhook_message}) {\n    id\n    name\n  }\n}\n`;\nexport function OperationTableRowNotificationsDialog(props) {\n    const [name, setName] = React.useState(\"\");\n    const [channel, setChannel] = React.useState(\"\");\n    const [displayName, setDisplayName] = React.useState(\"\");\n    const [iconEmoji, setIconEmoji] = React.useState(\"\");\n    const [iconURL, setIconURL] = React.useState(\"\");\n    const [webhook, setWebhook] = React.useState(\"\");\n    const [webhookMessage, setWebhookMessage] = React.useState(\"\");\n    const [complete, setComplete] = React.useState(false);\n    const [updateOperation] = useMutation(Update_Operation, {\n      onCompleted: (data) => {\n        console.log(data);\n        snackActions.success(\"Successfully updated operation\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operation\");\n        console.log(\"error updating operation\", data);\n      }\n    })\n    useQuery(GET_OperationData, {\n      fetchPolicy: \"no-cache\",\n      variables: {operation_id: props.id},\n      onCompleted: (data) => {\n          setName(data.operation_by_pk.name);\n          setChannel(data.operation_by_pk.channel);\n          setDisplayName(data.operation_by_pk.display_name);\n          setIconEmoji(data.operation_by_pk.icon_emoji);\n          setIconURL(data.operation_by_pk.icon_url);\n          setWebhook(data.operation_by_pk.webhook);\n          setWebhookMessage(data.operation_by_pk.webhook_message);\n          setComplete(data.operation_by_pk.complete);\n      },\n      onError: () => {\n        snackActions.error(\"Failed to fetch data\");\n      }\n    });\n    const onTextChange = (name, value, error) => {\n      switch(name){\n        case \"name\":\n          setName(value);\n          break;\n        case \"Webhook Channel\":\n          setChannel(value);\n          break;\n        case \"Webhook Display Name\":\n          setDisplayName(value);\n          break;\n        case \"Webhook Icon Emoji\":\n          setIconEmoji(value);\n          break;\n        case \"Webhook Icon URL\":\n          setIconURL(value);\n          break;\n        case \"Webhook URL\":\n          setWebhook(value);\n          break;\n        case \"Webhook POST Message\":\n          setWebhookMessage(value);\n          break;\n        default:\n          break;\n      }\n    }\n    const onBoolChange = (event) => {\n      setComplete(event.target.checked);\n    }\n    const onAccept = () =>{\n      updateOperation({variables: {\n        operation_id: props.id,\n        name: name,\n        channel: channel,\n        display_name: displayName,\n        icon_emoji: iconEmoji,\n        icon_url: iconURL,\n        webhook: webhook,\n        webhook_message: webhookMessage,\n        complete: complete\n      }});\n      props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify {name}</DialogTitle>\n        <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n          <DialogContentText>\n            Use this dialog to update some information about an operation.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            value={name}\n            onChange={onTextChange}\n            margin=\"dense\"\n            name=\"name\"\n          />\n          Complete Operation? <Switch checked={complete} onChange={onBoolChange} color=\"secondary\" />\n          <MythicTextField\n            margin=\"dense\"\n            value={channel}\n            onChange={onTextChange}\n            name=\"Webhook Channel\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={displayName}\n            onChange={onTextChange}\n            name=\"Webhook Display Name\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconEmoji}\n            onChange={onTextChange}\n            name=\"Webhook Icon Emoji\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconURL}\n            onChange={onTextChange}\n            name=\"Webhook Icon URL\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={webhook}\n            onChange={onTextChange}\n            name=\"Webhook URL\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            multiline={true}\n            value={webhookMessage}\n            onChange={onTextChange}\n            name=\"Webhook POST Message\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { } from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { OperationTableRowUpdateOperatorsDialog } from './OperationTableRowUpdateOperatorsDialog';\nimport { meState, updateCurrentOperationState } from '../../../cache';\nimport {useReactiveVar, useMutation, gql} from '@apollo/client';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport {OperationTableRowNotificationsDialog} from './OperationTableRowNotificationsDialog';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\n\nconst updateCurrentOpertionMutation = gql`\nmutation updateCurrentOpertionMutation($operator_id: Int!, $operation_id: Int!) {\n  update_operator_by_pk(pk_columns: {id: $operator_id}, _set: {current_operation_id: $operation_id}) {\n    id\n  }\n}\n`;\nexport function OperationTableRow(props){\n    const [openUpdateNotifications, setOpenUpdateNotifications] = React.useState(false);\n    const [openUpdateOperators, setOpenUpdateOperators] = React.useState(false);\n    const [openBlocklists, setOpenBlocklists] = React.useState(false);\n    const [openChangeCurrentOperation, setOpenChangeCurrentOperation] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [updateCurrentOperation] = useMutation(updateCurrentOpertionMutation, {\n      onCompleted: (data) => {\n        updateCurrentOperationState({operation_name: props.name, operation_id: props.id});\n        snackActions.success(\"Updated current operation\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update current operation\");\n        console.error(data);\n      }\n    })\n    const makeCurrentOperation = () => {\n      updateCurrentOperation({variables: {operator_id: me.user.user_id, operation_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id}>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateNotifications(true);}} startIcon={<EditIcon/>} color=\"secondary\" variant=\"contained\">Edit</Button>\n                    <MythicDialog open={openUpdateNotifications} fullWidth\n                        onClose={()=>{setOpenUpdateNotifications(false);}} \n                        innerDialog={<OperationTableRowNotificationsDialog onClose={()=>{setOpenUpdateNotifications(false);}} id={props.id} />}\n                     />\n                </TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateOperators(true);}} startIcon={<AssignmentIndIcon/>} color=\"secondary\" variant=\"contained\">Edit</Button>\n                    <MythicDialog open={openUpdateOperators} maxHeight={\"calc(80vh)\"} fullWidth\n                        onClose={()=>{setOpenUpdateOperators(false);}} \n                        innerDialog={<OperationTableRowUpdateOperatorsDialog id={props.id} onClose={()=>{setOpenUpdateOperators(false);}}/>}\n                     />\n                </TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenBlocklists(true);snackActions.warning(\"Not Implemented\")}} startIcon={<TuneIcon/>} color=\"primary\" variant=\"contained\">Edit</Button>\n                    \n                </TableCell>\n                <TableCell>{props.name}</TableCell>\n                <TableCell>{props.admin.username}</TableCell>\n                <TableCell>\n                <Button size=\"small\" startIcon={<AssessmentIcon/>} onClick={() => {snackActions.warning(\"Not Implemented\")}} color=\"primary\" variant=\"contained\">Analysis</Button>\n                </TableCell>\n                <TableCell>{props.id === me.user.current_operation_id ? (\"Current Operation\") : (\n                  <React.Fragment>\n                    <Button size=\"small\"startIcon={<PlayArrowIcon/>} onClick={()=>{setOpenChangeCurrentOperation(true);}} color=\"primary\" variant=\"contained\">Make Current</Button>\n                    <MythicConfirmDialog onClose={() => {setOpenChangeCurrentOperation(false);}} onSubmit={makeCurrentOperation} \n                      open={openChangeCurrentOperation} title={\"Change Current Operation?\"} acceptText={\"Update\"}\n                      dialogText={\"Changing operations will force you to log in again\"}/>\n                  </React.Fragment>\n                )}</TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { OperationTableRow } from './OperationTableRow';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function OperationTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Operations Management\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operation</Button>\n            <MythicDialog open={openNew} \n                onClose={()=>{setOpenNewDialog(false);}} \n                innerDialog={null}\n            />\n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"8rem\"}}>Configure</TableCell>\n                        <TableCell style={{width: \"8rem\"}}>Operators</TableCell>\n                        <TableCell style={{width: \"10rem\"}}>Assign Blocklists</TableCell>\n                        <TableCell>Operation Name</TableCell>\n                        <TableCell>Operation Admin</TableCell>\n                        <TableCell style={{width: \"10rem\"}}>Analysis</TableCell>\n                        <TableCell style={{width: \"12rem\"}}>Operation Status</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.operation.map( (op) => (\n                    <OperationTableRow\n                        key={\"operation\" + op.id}\n                        {...op} operator={props.operator}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { OperationTable } from './OperationTable';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_Operations = gql`\nquery GetOperations {\n  operation(order_by: {name: asc}) {\n    complete\n    name\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n}\n`;\nexport function Operations(props){\n    const { loading, error, data } = useQuery(GET_Operations, {fetchPolicy: \"network-only\"});\n\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n    <div style={{height: \"calc(94vh)\", marginTop: \"10px\", marginRight: \"5px\"}}>\n        <OperationTable \n            {...data} />\n        </div>\n    );\n} \n","import React, {useEffect, useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport \"ace-builds/src-noconflict/theme-monokai\";\nimport {useTheme} from '@material-ui/core/styles';\nimport { gql, useQuery } from '@apollo/client';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nconst getCommandsAndPayloadTypesQuery = gql`\nquery getCommandsAndPayloadTypes{\n  payloadtype(order_by: {ptype: asc}){\n    id\n    ptype\n    commands(order_by: {cmd: asc}){\n      id\n      cmd\n    }\n  }\n}\n`;\n\nexport function EditScriptDialog(props) {\n    const theme = useTheme();\n    const [script, setScript] = React.useState(\"\");\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedCommand, setSelectedCommand] = React.useState('');\n    const [payloadTypeCmdOptions, setPayloadTypeCmdOptions] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [author, setAuthor] = React.useState('');\n    const inputPTRef = useRef(null); \n    const inputCMDRef = useRef(null); \n    useQuery(getCommandsAndPayloadTypesQuery, {\n      onCompleted: data => {\n        setPayloadTypeCmdOptions(data.payloadtype);\n        if(props.payload_type_id !== undefined){\n          setSelectedPayloadType(props.payload_type_id);\n        }else{\n          if(data.payloadtype.length > 0){\n            setSelectedPayloadType(data.payloadtype[0].id);\n          }\n        }\n        if(props.command_id !== undefined){\n          setSelectedCommand(props.command_id);\n          for(let i = 0; i < data.payloadtype.length; i++){\n            if(props.payload_type_id === data.payloadtype[i].id){\n              setCommandOptions(data.payloadtype[i].commands)\n            }\n          }\n        }else{\n          if(data.payloadtype.length > 0){\n            if(data.payloadtype[0].commands.length > 0){\n              setCommandOptions(data.payloadtype[0].commands);\n              setSelectedCommand(data.payloadtype[0].commands[0].id);\n            }\n          }\n        }\n        if(props.author !== undefined){\n          setAuthor(props.author);\n        }\n      },\n      onError: data => {\n\n      }\n    })\n    useEffect( () => {\n        if(props.script !== undefined){\n          setScript(atob(props.script));\n        }        \n    }, [props.script]);\n    const onChange = (value) => {\n        setScript(value);\n    }\n    const onSubmit = () => {\n        props.onSubmitEdit({script: btoa(script), command_id: selectedCommand, payload_type_id: selectedPayloadType, author});\n        props.onClose();\n    }\n    const onRevert = () => {\n        props.onRevert();\n        props.onClose();\n    }\n    const onChangeSelectedPayloadType = (event) => {\n      setSelectedPayloadType(event.target.value);\n      const cmds = payloadTypeCmdOptions.filter( (p) => p.id === event.target.value);\n      setCommandOptions(cmds[0].commands);\n      setSelectedCommand(cmds[0].commands[0].id);\n    }\n    const onChangeSelectedCommand = (event) => {\n      setSelectedCommand(event.target.value);\n    }\n    const onChangeAuthor = (name, value, error) => {\n      setAuthor(value);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >\n          {props.title ? props.title : \"Edit BrowserScript Code\"}\n          </DialogTitle>\n        <DialogContent dividers={true}>\n        <FormControl style={{width: \"50%\"}}>\n            <InputLabel ref={inputPTRef}>Payload Type</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedPayloadType}\n              onChange={onChangeSelectedPayloadType}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {payloadTypeCmdOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"payloadtype\" + opt.id}>{opt.ptype}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <FormControl style={{width: \"50%\", paddingBottom: \"10px\"}}>\n            <InputLabel ref={inputCMDRef}>Command</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedCommand}\n              onChange={onChangeSelectedCommand}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {commandOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"command\" + opt.id}>{opt.cmd}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <MythicTextField value={author} onChange={onChangeAuthor} name=\"Author\" fullWidth />\n           <AceEditor\n                mode=\"javascript\"\n                theme={theme.palette.type === 'dark' ? 'monokai' : 'github'}\n                width=\"100%\"\n                value={script} \n                focus={true}\n                onChange={onChange}\n                setOptions={{\n                \n                }}\n            />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" style={{backgroundColor: theme.palette.primary.main}}>\n            Close\n          </Button>\n          {props.new ? (\n            <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n              Create\n          </Button>\n          ) : (\n            <React.Fragment>\n              <Button onClick={onRevert} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n                Revert\n              </Button>\n          \n              <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                Save\n              </Button>\n            </React.Fragment>\n          )}\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {Button, Switch} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function BrowserScriptsTableRow(props){\n    const theme = useTheme();\n    const [openEdit, setOpenEdit] = React.useState(false);\n    const [isApplied, setIsApplied] = React.useState(false);\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const onSubmitEdit = ({script, command_id, payload_type_id, author}) => {\n        props.onSubmitEdit({browserscript_id: props.id, script, command_id, payload_type_id, author});\n    }\n    const onRevert = () => {\n        props.onRevert({browserscript_id: props.id, script: props.container_version});\n    }\n    const onSubmitApplyToOperation = () => {\n        props.onSubmitApplyToOperation({browserscript_id: props.id});\n    }\n    const onSubmitRemoveFromOperation = () => {\n        props.onSubmitRemoveFromOperation({browserscript_id: props.id});\n    }\n    useEffect( () => {\n        let found = false;\n        props.browserscriptoperations.forEach( (op) => {\n            if(op.operation_id === props.operation_id){\n                found = true;\n            }\n        } );\n        setIsApplied(found);\n    }, [props.browserscriptoperations, props.operation_id]);\n    const onToggleActive = () => {\n        props.onToggleActive({browserscript_id: props.id, active: !props.active});\n    }\n    const onConfirmDelete = () => {\n        props.onDelete({browserscript_id: props.id})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.id}>\n                <TableCell>\n                    <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onConfirmDelete} open={openDeleteDialog}/>\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onToggleActive}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'checkbox', \"track\": \"white\" }}\n                        name=\"Active\"\n                      />\n                </TableCell>\n                <TableCell>{props.payloadtype.ptype}</TableCell>\n                <TableCell>{props.command === null ? \"Support Script: \" + props.name : props.command.cmd}</TableCell>\n                <TableCell>{props.author}</TableCell>\n                <TableCell>{props.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" onClick={ () => {setOpenEdit(true);} } color=\"primary\"> Edit </Button></TableCell>\n                <TableCell>\n                    {isApplied ?\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitRemoveFromOperation} color=\"secondary\">Remove</Button>)\n                    :\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitApplyToOperation} color=\"primary\">Apply</Button>)\n                    }\n                </TableCell>\n                {openEdit ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openEdit} \n                        onClose={()=>{setOpenEdit(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenEdit(false);}} payload_type_id={props.payloadtype.id} command_id={props.command.id}\n                                script={props.script} onSubmitEdit={onSubmitEdit} onRevert={onRevert} author={props.author}/>\n                        } />    \n                    ) : (null)\n                }\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React  from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsTableRow } from './BrowserScriptsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport Button from '@material-ui/core/Button';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\n\n\nexport function BrowserScriptsTable(props){\n    const theme = useTheme();\n    const [openNewScriptDialog, setOpenNewScriptDialog] = React.useState(false);\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Browser Scripts\n                </Typography>\n                <Button size=\"small\" onClick={() => setOpenNewScriptDialog(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Script</Button>\n                {openNewScriptDialog ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openNewScriptDialog} \n                        onClose={()=>{setOpenNewScriptDialog(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenNewScriptDialog(false);}} title=\"Create New Browser Script\" new={true} onSubmitEdit={props.onSubmitNew} />\n                        } />    \n                    ) : (null)\n                }\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Active</TableCell>\n                        <TableCell >Payload</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell> Author</TableCell>\n                        <TableCell style={{width: \"15em\"}}>User Modified?</TableCell>\n                        <TableCell style={{width: \"8em\"}}> Edit</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Apply to Operation</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.browserscript.map( (op) => (\n                    <BrowserScriptsTableRow onSubmitApplyToOperation={props.onSubmitApplyToOperation} \n                    onSubmitRemoveFromOperation={props.onSubmitRemoveFromOperation} \n                    operation_id={props.operation_id} onToggleActive={props.onToggleActive} \n                    onSubmitEdit={props.onSubmitEdit} onRevert={props.onRevert} \n                    onToggleOperation={props.onToggleOperation}\n                    onDelete={props.onDelete}\n                        key={\"script\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n        \n    )\n}\n\n","import { createMuiTheme } from '@material-ui/core/styles';\nexport const lightTheme = {\n    body: '#FFF',\n    text: '#363537',\n    textLighter: '#B8B8B8',\n    textDarker: '#B8B8B8',\n    toggleBorder: '#FFF',\n    background: '#363537',\n    tableHeader: '#F5F5F5',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#BEDCFE',\n    callbackTitleColor: '',\n    listItemBackground: '#F5F5F5',\n    menuItemBackground: \"#FBFBFB\",\n    topAppBar: \"\",\n    taskAccordian: \"\",\n    taskAccordianResponse: \"#FAFAFA\",\n    taskAccordianBottom: \"#F5F5F5\",\n    secondaryTextColor: \"\",\n    tabHeaderBackground: \"\",\n    tabHeaderText: \"\",\n    tableLineColor:\"\",\n    eventMessageBackgroundColor: \"\",\n}\nexport const darkTheme = {\n    body: '#212121',\n    text: 'white',\n    textLighter: '#989898',\n    textDarker: '#989898',\n    toggleBorder: '#6B8096',\n    background: '#999',\n    tableHeader: '#484848',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#023064',\n    callbackTitleColor: 'white',\n    listItemBackground: '#303030',\n    primaryButtonTextOnly: \"#7e75ea\",\n    secondaryButtonTextOnly: \"#ea7575\",\n    menuItemBackground: \"#363537\",\n    topAppBar: \"\",\n    taskAccordian: \"#424242\",\n    taskAccordianResponse: \"#616161\",\n    taskAccordianBottom: \"#424242\",\n    secondaryTextColor: \"#E0E0E0\",\n    tabHeaderBackground: \"#363537\",\n    tabHeaderText: \"white\",\n    tableLineColor: \"grey\",\n    eventMessageBackgroundColor: \"#303030\",\n}\nexport const muiTheme = createMuiTheme({\n  palette: {\n    primary: {\n            main: \"#1976d2\"\n        },\n    secondary: {\n            main: \"#dc004e\"\n        },\n    error: {\n            main: \"#f44336\"\n        },\n    warning: {\n            main: \"#ff9800\"\n        },\n    info: {\n            main: \"#2196f3\"\n        },\n    disabled: {\n            main: \"rgba(0, 0, 0, 0.38)\"\n        },\n    },\n    \n});\n\n\n","import React, {useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport {muiTheme} from '../../../themes/Themes';\n\nexport function BrowserScriptsOperationsTableRow(props){\n    const [openViewScript, setOpenViewScript] = React.useState(false);\n    const [displayName, setDisplayName] = React.useState(\"\");\n\n    useEffect( () => {\n        setDisplayName(props.browserscript.command === null ? \"Support Script: \" + props.browserscript.name : props.browserscript.command.cmd);\n    }, [props.browserscript]);\n    return (\n        <React.Fragment>\n            <TableRow key={\"opscript\" + props.browserscript.id}>\n                <TableCell>{props.browserscript.payloadtype.ptype}</TableCell>\n                <TableCell>{displayName}</TableCell>\n                <TableCell>{props.browserscript.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell>{props.operation.admin.username}</TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" style={{color: muiTheme.palette.info.main}} onClick={() => {setOpenViewScript(true);}}> View </Button></TableCell>    \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openViewScript} \n                    onClose={()=>{setOpenViewScript(false);}} \n                    innerDialog={\n                        <AceEditor\n                            mode=\"javascript\"\n                            theme=\"github\"\n                            width=\"100%\"\n                            value={atob(props.browserscript.script)} \n                            focus={true}\n                            readOnly={true}\n                            onChange={() => {}}\n                            setOptions={{\n                            \n                            }}\n                        />\n                    } />\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsOperationsTableRow } from './BrowserScriptsOperationsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function BrowserScriptsOperationsTable(props){\n    const theme = useTheme();\n    return (\n        props.browserscriptoperation.length > 0 &&\n            <React.Fragment>\n                <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        Operation Browser Scripts\n                    </Typography>\n                </Paper>\n                <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(30vh)\"}}>\n                    <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell style={{width: \"10em\"}}>Payload</TableCell>\n                                <TableCell style={{}}>Command</TableCell>\n                                <TableCell style={{width: \"5em\"}}>User Modified?</TableCell>\n                                <TableCell style={{}}>Operator</TableCell>\n                                <TableCell style={{width: \"5em\"}}>View Script</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                        {props.browserscriptoperation.map( (op) => (\n                            <BrowserScriptsOperationsTableRow\n                                key={\"opscriptrow\" + op.browserscript.id}\n                                {...op}\n                            />\n                        ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </React.Fragment>\n    )\n}\n\n","import React  from 'react';\nimport { gql, useMutation, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {BrowserScriptsTable} from './BrowserScriptsTable';\nimport {BrowserScriptsOperationsTable} from './BrowserScriptsOperationsTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst SUB_BrowserScripts = gql`\nsubscription SubscribeBrowserScripts($operator_id: Int!) {\n  browserscript(where: {operator_id: {_eq: $operator_id}, for_new_ui: {_eq: true}}) {\n    active\n    author\n    user_modified\n    script\n    payloadtype {\n      ptype\n      id\n    }\n    name\n    id\n    creation_time\n    container_version_author\n    container_version\n    command {\n      cmd\n      id\n    }\n    browserscriptoperations {\n      operation_id\n      id\n    }\n  }\n}\n `;\nconst SUB_OperationBrowserScripts = gql`\nsubscription SubscribeOperationBrowserScripts($operation_id: Int!) {\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {for_new_ui: {_eq: true}}}){\n    browserscript{\n        active\n        author\n        user_modified\n        script\n        payloadtype {\n          ptype\n          id\n        }\n        name\n        id\n        creation_time\n        container_version_author\n        container_version\n        command {\n          cmd\n          id\n        }\n      }\n   operation{\n    admin{\n        username\n    }\n   }\n  }\n}\n `;\nconst updateBrowserScriptActive = gql`\nmutation updateBrowserScriptActive($browserscript_id: Int!, $active: Boolean!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {active: $active}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptScript = gql`\nmutation updateBrowserScriptScript($browserscript_id: Int!, $script: String!, $command_id: Int!, $payload_type_id: Int!, $author: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, author: $author, user_modified: true, command_id: $command_id, payload_type_id: $payload_type_id}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptRevert = gql`\nmutation updateBrowserScriptRevert($browserscript_id: Int!, $script: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, user_modified: false}) {\n    id\n  }\n}\n`;\nconst addBrowserScript = gql`\nmutation insertNewBrowserScript($script: String!, $author: String!, $payload_type_id: Int!, $command_id: Int!){\n  insert_browserscript_one(object: {script: $script, author: $author, payload_type_id: $payload_type_id, command_id: $command_id}){\n    id\n  }\n}\n`;\nconst deleteBrowserScriptMutation = gql`\nmutation deleteBrowserScriptMutation($browserscript_id: Int!){\n  delete_browserscript_by_pk(id: $browserscript_id){\n    id\n  }\n}\n`;\n\n\nexport function BrowserScripts(props){\n    const me = useReactiveVar(meState);\n    const [browserScripts, setBrowserScripts] = React.useState({\"browserscript\": []});\n    const [operationBrowserScripts, setOperationBrowserScripts] = React.useState({\"browserscriptoperation\": []});\n    useSubscription(SUB_BrowserScripts, {\n      variables: {operator_id: me.user.id}, fetchPolicy: \"no-cache\",\n      shouldResubscribe: true,\n      onSubscriptionData: ({subscriptionData}) => {\n        console.log(subscriptionData)\n        setBrowserScripts(subscriptionData.data);\n      }\n    });\n      useSubscription(SUB_OperationBrowserScripts, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"no-cache\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setOperationBrowserScripts(subscriptionData.data);\n        }\n    });\n    const [toggleActive] = useMutation(updateBrowserScriptActive, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [updateScript] = useMutation(updateBrowserScriptScript, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [revertScript] = useMutation(updateBrowserScriptRevert, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [createBrowserScript] = useMutation(addBrowserScript, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully created new browser script!\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to create new script: \" + data);\n      }\n    });\n    const [deleteBrowserScript] = useMutation(deleteBrowserScriptMutation, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully deleted browser script\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to delete browser script: \" + data);\n      }\n    })\n    const onToggleActive = ({browserscript_id, active}) => {\n        toggleActive({variables: {browserscript_id, active}});\n    }\n    const onSubmitEdit = ({browserscript_id, script, command_id, payload_type_id, author}) => {\n        updateScript({variables: {browserscript_id, script, command_id, payload_type_id, author}});\n    }\n    const onRevert = ({browserscript_id, script}) => {\n        revertScript({variables:{browserscript_id, script}});\n    }\n    const onSubmitApplyToOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitRemoveFromOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitCreateNewBrowserScript = ({script, author, payload_type_id, command_id}) => {\n      createBrowserScript({variables: {author, script, payload_type_id, command_id}});\n    }\n    const onDelete = ({browserscript_id}) => {\n      deleteBrowserScript({variables: {browserscript_id}});\n    }\n    return (\n    <React.Fragment>\n        <BrowserScriptsTable {...browserScripts} operation_id={me.user.current_operation_id} onToggleActive={onToggleActive} \n          onSubmitEdit={onSubmitEdit} onRevert={onRevert} onSubmitNew={onSubmitCreateNewBrowserScript} onDelete={onDelete}\n          onSubmitApplyToOperation={onSubmitApplyToOperation} \n          onSubmitRemoveFromOperation={onSubmitRemoveFromOperation}\n        />\n        <BrowserScriptsOperationsTable {...operationBrowserScripts} />\n    </React.Fragment>\n    );\n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($payload_id: Int!, $description: String) {\n  update_payload_by_pk(pk_columns: {id: $payload_id}, _set: {tag: $description}) {\n    tag\n    id\n  }\n}\n`;\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    tag\n    id\n  }\n}\n`;\n\nexport function PayloadDescriptionDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.tag)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated Description\")\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {payload_id: props.payload_id, description: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($file_id: Int!, $filename: bytea!) {\n  update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {filename: $filename}) {\n    filename_text\n    id\n  }\n}\n`;\nconst getFilenameQuery = gql`\nquery getFilenameQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    filemetum {\n      filename_text\n      id\n    }\n    id\n  }\n}\n`;\n\nexport function PayloadFilenameDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const [fileId, setFileId] = useState();\n    const { loading, error } = useQuery(getFilenameQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.filemetum.filename_text);\n            setFileId(data.payload_by_pk.filemetum.id);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n          snackActions.success(\"Updated filename\");\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {file_id: fileId, filename: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Filename</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    build_message\n    build_stderr\n    build_stdout\n    id\n  }\n}\n`;\n\nexport function PayloadBuildMessageDialog(props) {\n    const [payloadData, setPayloadData] = useState({});\n    const [viewError, setViewError] = useState(false);\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setViewError(props.viewError);\n            let output = \"Message:\\n\" + data.payload_by_pk.build_message;\n            output += \"\\nSTDOUT:\\n\" + data.payload_by_pk.build_stdout;\n            setPayloadData({\"message\": output,\n                            \"error\": \"STDERR:\\n\" + data.payload_by_pk.build_stderr});\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        setViewError(props.viewError);\n    }, [props.viewError]);\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Build Messages</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={viewError ? payloadData[\"error\"] : payloadData[\"message\"]} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PermScanWifiIcon from '@material-ui/icons/PermScanWifi';\n\nexport function PayloadsTableRowC2Status(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {\n                props.payloadc2profiles.map( (c2) => (\n                    <Typography key={c2.c2profile.name + props.uuid}> \n                        {c2.c2profile.is_p2p ?\n                            ( c2.c2profile.container_running ? \n                                <Tooltip title=\"C2 Container online\">\n                                    <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                                </Tooltip>: \n                                <Tooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/>\n                                </Tooltip> )\n                            :\n                        ( c2.c2profile.running ? \n                            <Tooltip title=\"C2 Internal Server Running\">\n                                <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                            </Tooltip> : \n                            (c2.c2profile.container_running ? (\n                                <Tooltip title=\"C2 Internal Server Not Running, but Container Online\">\n                                    <PermScanWifiIcon style={{color: theme.palette.warning.main}}/> \n                                </Tooltip>\n                            ) : (\n                                <Tooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/> \n                                </Tooltip>\n                            ))\n                            )\n                        } - {c2.c2profile.name}\n                    </Typography>\n                )) \n            }\n                \n        </React.Fragment>\n        )\n}\n","import IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { snackActions } from '../../utilities/Snackbar';\nimport ReportProblemIcon from '@material-ui/icons/ReportProblem';\n\nexport function PayloadsTableRowBuildStatus(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {props.build_phase === \"success\" ?\n                ( <Tooltip title=\"Download payload\">\n                    <IconButton variant=\"contained\" target=\"_blank\" color=\"primary\" href={window.location.origin + \"/direct/download/\" + props.filemetum.agent_file_id} download>\n                        <GetAppIcon style={{color: theme.palette.success.main}} />\n                    </IconButton>\n                  </Tooltip>\n                    \n                )\n                : \n                (props.build_phase === \"building\" ? \n                (<Tooltip title=\"Payload still building\">\n                    <IconButton variant=\"contained\"><CircularProgress size={20} thickness={4} style={{color: theme.palette.info.main}}/></IconButton>\n                </Tooltip>) : \n                (<Tooltip title=\"Failed to build payload\">\n                    <IconButton variant=\"contained\" onClick={() => snackActions.warning(\"Payload failed to build, cannot download\")}>\n                        <ReportProblemIcon style={{color: theme.palette.error.main}} />\n                    </IconButton>\n                </Tooltip>\n                ) \n                )\n            }\n        </React.Fragment>\n\n        )\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst checkPayloadConfigurationQuery = gql`\nquery checkPayloadConfigurationQuery($uuid: String!) {\n  config_check(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadConfigCheckDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const { loading, error } = useQuery(checkPayloadConfigurationQuery, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.config_check.status === \"success\"){\n            setMessage(data.config_check.output);\n          }else{\n            snackActions.warning(data.config_check.error);\n            setMessage(\"Error!\\n\" + data.config_check.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Config Check</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={message} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst generateRedirectRulesMutation = gql`\nquery generateRedirectRulesMutation($uuid: String!) {\n  redirect_rules(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadRedirectRulesDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const { loading, error } = useQuery(generateRedirectRulesMutation, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.redirect_rules.status === \"success\"){\n            setMessage(data.redirect_rules.output);\n          }else{\n            snackActions.warning(data.redirect_rules.error);\n            setMessage(\"Error!\\n\" + data.redirect_rules.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Redirect Rules Check</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={message} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from './DetailedPayloadTable';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {PayloadDescriptionDialog} from './PayloadDescriptionDialog';\nimport {PayloadFilenameDialog} from './PayloadFilenameDialog';\nimport {PayloadBuildMessageDialog} from './PayloadBuildMessageDialog';\nimport {PayloadsTableRowC2Status} from './PayloadsTableRowC2Status';\nimport {PayloadsTableRowBuildStatus} from './PayloadsTableRowBuildStatus';\nimport {PayloadConfigCheckDialog} from './PayloadConfigCheckDialog';\nimport {PayloadRedirectRulesDialog} from './PayloadRedirectRulesDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport InfoIcon from '@material-ui/icons/Info';\nimport {useMutation, gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst rebuildPayloadMutation = gql`\nmutation triggerRebuildMutation($uuid: String!) {\n  rebuild_payload(uuid: $uuid) {\n      status\n      error\n      uuid\n  }\n}\n`;\nconst exportPayloadConfigQuery = gql`\nquery exportPayloadConfigQuery($uuid: String!) {\n  export_payload_config(uuid: $uuid) {\n      status\n      error \n      config \n  }\n}\n`;\n\nexport function PayloadsTableRow(props){\n    const [viewError, setViewError] = React.useState(true);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [openDescription, setOpenDescriptionDialog] = React.useState(false);\n    const [openFilename, setOpenFilenameDialog] = React.useState(false);\n    const [openBuildMessage, setOpenBuildMessageDialog] = React.useState(false);\n    const [openDetailedView, setOpenDetailedView] = React.useState(false);\n    const [openConfigCheckDialog, setOpenConfigCheckDialog] = React.useState(false);\n    const [openRedirectRulesDialog, setOpenRedirectRulesDialog] = React.useState(false);\n    const dropdownAnchorRef = useRef(null);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [triggerRebuild] = useMutation(rebuildPayloadMutation, {\n      onCompleted: (data) => {\n        console.log(data);\n        snackActions.success(\"Successfully triggered rebuild\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to trigger rebuild: \" + data);\n      }\n    });\n    const [exportConfig] = useLazyQuery(exportPayloadConfigQuery, {\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        if(data.export_payload_config.status === \"success\"){\n          const dataBlob = new Blob([data.export_payload_config.config], {type: 'text/plain'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = props.filemetum.filename_text + \".json\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = props.filemetum.filename_text + \".json\";\n            document.body.appendChild(element);\n            element.click();\n          }\n        }else{\n          snackActions.error(\"Failed to export configuration: \" + data.export_payload_config.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to export configuration: \" + data)\n      }\n    })\n    const onAlertChanged = () => {\n        const {id, callback_alert} = props;\n        props.onAlertChanged(id, !callback_alert);\n    }\n    const onAcceptDelete = () => {\n        props.onDeletePayload(props.id);\n        setOpenDeleteDialog(false);\n    }\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setOpenUpdateDialog(false);\n    };\n    const options = [{name: 'Rename File', click: () => {\n                        setOpenFilenameDialog(true);\n                     }},\n                     {name: 'Edit Description', click: () => {\n                        setOpenDescriptionDialog(true);\n                     }},\n                     {name: props.callback_alert ? 'Stop Alerting to New Callbacks' : \"Start Alerting to New Callbacks\", click: () => {\n                        onAlertChanged();\n                      }},\n                     {name: 'View Build Message/Stdout', click: () => {\n                        setViewError(false);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'View Build Errors', click: () => {\n                        setViewError(true);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'Trigger New Build', click: () => {\n                      triggerRebuild({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Export Payload Config', click: () => {\n                      exportConfig({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Generate Redirect Rules', click: () => {\n                      setOpenRedirectRulesDialog(true);\n                    }},\n                    {name: 'Check Agent C2 Configuration', click: () => {\n                      setOpenConfigCheckDialog(true);\n                    }}\n                     ]\n    ;\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setOpenUpdateDialog(false);\n      };\n    return (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.uuid} hover>\n                <TableCell>\n                <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                </TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell><Button ref={dropdownAnchorRef} size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Actions</Button>\n                <Popper open={openUpdate} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name + props.uuid}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n                {openDescription ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDescription} \n                        onClose={()=>{setOpenDescriptionDialog(false);}} \n                        innerDialog={<PayloadDescriptionDialog payload_id={props.id} onClose={()=>{setOpenDescriptionDialog(false);}} />}\n                    />\n                ): (null) }\n                {openFilename ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilename} \n                        onClose={()=>{setOpenFilenameDialog(false);}} \n                        innerDialog={<PayloadFilenameDialog payload_id={props.id} onClose={()=>{setOpenFilenameDialog(false);}} />}\n                    />\n                ): (null) }\n                {openBuildMessage ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openBuildMessage} \n                        onClose={()=>{setOpenBuildMessageDialog(false);}} \n                        innerDialog={<PayloadBuildMessageDialog payload_id={props.id} viewError={viewError} onClose={()=>{setOpenBuildMessageDialog(false);}} />}\n                    />\n                ): (null) }\n                {openConfigCheckDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openConfigCheckDialog} \n                        onClose={()=>{setOpenConfigCheckDialog(false);}} \n                        innerDialog={<PayloadConfigCheckDialog uuid={props.uuid} onClose={()=>{setOpenConfigCheckDialog(false);}} />}\n                    />\n                ): (null) }\n                {openRedirectRulesDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openRedirectRulesDialog} \n                        onClose={()=>{setOpenRedirectRulesDialog(false);}} \n                        innerDialog={<PayloadRedirectRulesDialog uuid={props.uuid} onClose={()=>{setOpenRedirectRulesDialog(false);}} />}\n                    />\n                ): (null) }\n                </TableCell>\n                <TableCell>\n                    <PayloadsTableRowBuildStatus {...props} />\n                </TableCell>\n                <TableCell>{props.filemetum.filename_text}</TableCell>\n                <TableCell>{props.tag}</TableCell>\n                <TableCell>\n                    <PayloadsTableRowC2Status payloadc2profiles={props.payloadc2profiles} uuid={props.uuid} />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                        <InfoIcon />\n                    </IconButton>\n                </TableCell>\n            </TableRow>\n            <TableRow>\n            {openDetailedView ? (\n              <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                  onClose={()=>{setOpenDetailedView(false);}} \n                  innerDialog={<DetailedPayloadTable {...props} payload_id={props.id} onClose={()=>{setOpenDetailedView(false);}} />}\n              />\n            ) : (null) }\n          </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\nexport function ImportPayloadConfigDialog(props) {\n  const [fileValue, setFileValue] = React.useState({name: \"\"});\n  const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    const onCommitSubmit = () => {\n      createPayloadMutation({variables: {payload: fileValue.contents}}).catch( (e) => {console.log(e)} );\n        props.onClose();\n    }\n    const onFileChange = (evt) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n          const contents = e.target.result;\n          setFileValue({name: evt.target.files[0].name, contents: contents});\n      }\n      reader.readAsBinaryString(evt.target.files[0]);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Import Payload Config to Generate New Payload</DialogTitle>\n        <DialogContent dividers={true}>\n          <Button variant=\"contained\" component=\"label\"> \n              { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n              <input onChange={onFileChange} type=\"file\" hidden /> \n          </Button>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { PayloadsTableRow } from './PayloadsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport {ImportPayloadConfigDialog} from './ImportPayloadConfigDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\n\nexport function PayloadsTable({payload, onDeletePayload, onUpdateCallbackAlert}){\n    const theme = useTheme();\n    const [openPayloadImport, setOpenPayloadImport] = React.useState(false);\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Payloads\n                </Typography>\n                <Button size=\"small\" href=\"/new/createpayload\" style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Payload</Button>\n                <Button size=\"small\" onClick={() => setOpenPayloadImport(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">Import Payload Config</Button>\n                {openPayloadImport ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openPayloadImport} \n                        onClose={()=>{setOpenPayloadImport(false);}} \n                        innerDialog={<ImportPayloadConfigDialog onClose={()=>{setOpenPayloadImport(false);}} />}\n                    />\n                ): (null) }\n              </Paper>  \n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Delete</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Download</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell >C2 Status</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {payload.map( (op) => (\n                    <PayloadsTableRow\n                        onDeletePayload={onDeletePayload}\n                        onAlertChanged={onUpdateCallbackAlert}\n                        key={\"payload\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { PayloadsTable } from './PayloadsTable';\nimport {useMutation, useQuery, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nconst payloadFragment = gql`\nfragment payloadData on payload {\n  build_message\n  build_phase\n  build_stderr\n  callback_alert\n  creation_time\n  id\n  operator {\n    id\n    username\n  }\n  uuid\n  tag\n  payloadtype {\n    id\n    ptype\n  }\n  filemetum {\n    agent_file_id\n    filename_text\n    id\n  }\n  payloadc2profiles {\n    c2profile {\n      running\n      name\n      is_p2p\n      container_running\n    }\n  }\n}\n`;\nconst SUB_Payloads = gql`\n${payloadFragment}\nsubscription SubPayloadsQuery($operation_id: Int!) {\n  payload(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, auto_generated: {_eq: false}}, order_by: {id: desc}) {\n    ...payloadData\n  }\n}\n`;\nconst Get_Payloads = gql`\n${payloadFragment}\nquery GetPayloadsQuery($operation_id: Int!) {\n  payload(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, auto_generated: {_eq: false}}, order_by: {id: desc}, limit: 20) {\n    ...payloadData\n  }\n}\n`;\nconst payloadsDelete = gql`\nmutation PayloadsDeletePayloadMutation($id: Int!) {\n  update_payload_by_pk(pk_columns: {id: $id}, _set: {deleted: true}) {\n      id\n      deleted\n  }\n}\n`;\nconst payloadsCallbackAlert = gql`\nmutation PayloadsCallbackAlertMutation($id: Int!, $callback_alert: Boolean!) {\n  update_payload_by_pk(pk_columns: {id: $id}, _set: {callback_alert: $callback_alert}) {\n    id\n    callback_alert\n  }\n}\n`;\n\nexport function Payloads(props){\n    const me = useReactiveVar(meState);\n    const [payloads, setPayloads] = React.useState([]);\n    useQuery(Get_Payloads, {\n      variables: {operation_id: me.user.current_operation_id},\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        const updated = data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n    })\n    useSubscription(SUB_Payloads, {\n      variables: {operation_id: me.user.current_operation_id},\n      fetchPolicy: \"no-cache\",\n      onSubscriptionData: ({subscriptionData}) => {\n        const updated = subscriptionData.data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to get payloads\");\n        console.log(data);\n      }\n      });\n    const [deletePayload] = useMutation(payloadsDelete, {\n        onCompleted: (data) => {\n          const updated = payloads.filter( (payload) => payload.id !== data.update_payload_by_pk.id);\n          setPayloads(updated);\n          snackActions.success(\"Successfully deleted\");\n        },\n        onError: (data) => {\n          snackActions.warning(\"Failed to delete payload\");\n          console.log(data);\n        }\n    });\n    const [callbackAlert] = useMutation(payloadsCallbackAlert, {\n      onCompleted: (data) => {\n        const updated = payloads.map( (payload) => {\n          if(payload.id === data.update_payload_by_pk.id){\n            return {...payload, ...data.update_payload_by_pk};\n          }else{\n            return {...payload};\n          }\n        });\n        if(data.update_payload_by_pk.callback_alert){\n          snackActions.success(\"Now Alerting on New Callbacks\");\n        }else{\n          snackActions.success(\"No Longer Alerting on New Callbacks\");\n        }\n        \n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to update callback alerting status\");\n        console.log(data);\n      }\n    });\n    const onDeletePayload = (id) => {\n        deletePayload({variables: {id}});\n    }\n    const onUpdateCallbackAlert = (id, callback_alert) => {\n        callbackAlert({\n            variables: {id, callback_alert}\n        \n        });\n    }\n    return (\n      <div style={{height: \"calc(94vh)\", maxHeight: \"calc(94vh)\", marginTop:\"10px\"}}>\n        <PayloadsTable onDeletePayload={onDeletePayload} onUpdateCallbackAlert={onUpdateCallbackAlert} payload={payloads} />\n      </div>\n    );\n} \n","import * as d3 from \"d3\";\n\nexport const menuFactory = (g, x, y, menuItems, data, svgId) => {\n    d3.select(`.contextMenu`).remove();\n    // Draw the menu\n    if(menuItems.length > 0){\n        d3.select(svgId).append('g').attr('class', 'contextMenu')\n            .selectAll('tmp')\n            .data(menuItems).enter()\n            .append('g').attr('class', \"menuEntry\")\n            .style({'cursor': 'pointer'});\n\n        // Draw menu entries\n        d3.selectAll(`.menuEntry`)\n            .append('rect')\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('rx', 2)\n            .attr('fill', '#ffffff')\n            .attr('width', 180)\n            .attr('height', 30)\n            .on('click', (d) => { d.action(g, data) });\n\n        d3.selectAll(`.menuEntry`)\n            .append('text')\n            .text((d) => { return d.title; })\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('dy', 20)\n            .attr('dx', 10)\n            .on('click', (d) => { d.action(g, data) });\n\n        // Other interactions\n        d3.select('body')\n            .on('click', () => {\n                d3.select(`.contextMenu`).remove();\n                d3.select(`.menuEntry`).remove();\n            });\n        }\n}\n\nexport const createContextMenu = (g, d, menuItems, width, height, svgId) => {\n    menuFactory(g, d3.event.pageX , d3.event.pageY - 80 , menuItems, d, svgId);\n    d3.event.preventDefault();\n}\n","import React, {useRef, useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport * as d3 from 'd3';\nimport {createContextMenu} from './D3ContextMenu';\nimport dagreD3 from 'dagre-d3';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function C2PathDialog(props) {\n    const dagreRef = useRef(null);   \n    const [reZoom, setReZoom] = useState(true);\n    const theme = useTheme();\n    useEffect( () => {\n        const view_config = {\n            rankDir: \"LR\",\n            label_components: [\"id\", \"user\"],\n            packet_flow_view: true,\n            include_disconnected: true,\n            show_all_nodes: true\n        }\n        const node_events = {\n            \"mouseover\": (parent, node, d) => {return},\n            \"mouseout\": (parent, node, d) => {return},\n            \"click\": (parent, node, d) => {return},\n            \"contextmenu\": []\n        }\n        drawC2PathElements(props.callbackgraphedges, dagreRef, reZoom, view_config, node_events, theme);\n        setReZoom(false);\n    }, [props.callbackgraphedges, reZoom, theme])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Callback {props.id}'s Egress Path</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <svg ref={dagreRef} id=\"nodeTree\" style={{width: \"100%\", height: \"calc(78vh)\", marginTop: \"10px\"}}></svg>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n\nexport const drawC2PathElements = (edges, dagreRef, reZoom, view_config, node_events, theme) =>{\n    const disconnected = `stroke: ${theme.palette.warning.main}; stroke-width: 3px; stroke-dasharray: 5, 5; fill:none`;\n    const disconnectedArrow = `fill: ${theme.palette.warning.main}`;\n    const connected = `stroke: ${theme.palette.info.main}; fill: none; stroke-width: 1.5px;`;\n    const connectedArrow = `stroke: ${theme.palette.info.main}; fill: ${theme.palette.info.main}; stroke-width: 1.5px;`\n    const nodeColor = `fill: ${theme.palette.success.main},`;\n    const nodeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const edgeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const add_edge_to_mythic = (g, edge, view_config) => {\n        if(!edge.source.active && !view_config[\"show_all_nodes\"]){return}\n        add_node(g, edge.source, view_config);\n        g.setEdge(edge.source.id, \"Mythic\",  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp,direction: edge.direction,\n            style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n            arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n    }\n    const add_node = (g, node, view_config) => {\n        g.setNode(node.id, {label: getLabel(node, view_config[\"label_components\"]),  node: node, style: nodeColor, labelStyle: nodeLabelStyle, shape: 'circle', isParent:false});\n        g.setNode(node.host, {label:  node.host, clusterLabelPos: 'top', style: `fill:${theme.palette.graphGroup}`, node: null, labelStyle: nodeLabelStyle, isParent: true});\n        g.setParent(node.id, node.host);\n        g.setNode(node.host + \"mythic_expander\", {label:\"\", shape: \"square\", node: node, isParent: false})\n        g.setParent(node.host + \"mythic_expander\", node.host)\n    }\n    const getLabel = (edge, label_components) => {\n        return label_components.map( (name) => {\n            return edge[name]\n        }).join(\", \");\n    }\n    const add_edge_p2p = (g, edge, view_config) => {\n        if(!edge.source.active && !edge.destination.active && !view_config[\"show_all_nodes\"]){\n            return;\n        }else if(!view_config[\"show_all_nodes\"]){\n            //at least one of the two nodes is active and we don't want to show all the nodes\n            if(edge.source.active){add_node(g, edge.source, view_config)}\n            if(edge.destination.active){add_node(g, edge.destination, view_config)}\n            // not adding an edge because one of the nodes could be non-existent\n            if(!edge.source.active || !edge.destination.active){\n                return;\n            }\n        }else{\n            add_node(g, edge.source, view_config);\n            add_node(g, edge.destination, view_config);\n        }\n        if(edge.direction === 1){\n            if(view_config[\"packet_flow_view\"]){\n                createEdge(g, edge, 2);\n            }else{\n                createEdge(g, edge, 1);\n            }\n        }else if(edge.direction === 2){\n            createEdge(g, edge, 2);\n        }else{\n            createEdge(g, edge, 1);\n            createEdge(g, edge, 2);\n        }\n    }\n    const createEdge = (g, edge, adjusted_direction) =>{\n        if(adjusted_direction === 1){\n            g.setEdge(edge.source.id, edge.destination.id,  {label: edge.c2profile.name, edge_id: edge.id,end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }else if(adjusted_direction === 2){\n            g.setEdge(edge.destination.id, edge.source.id,  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }\n    }\n    var g = new dagreD3.graphlib.Graph({ compound: true, multigraph: true, directed: true}).setGraph({rankdir: view_config[\"rankDir\"]}).setDefaultEdgeLabel(function() {return {}; });\n    var svg = d3.select(dagreRef.current);\n    var svgGroup;\n    var test = svg.select(\"g\")._groups[0][0];\n    if(test){\n        svgGroup = svg.select(\"g\");\n    }else{\n        svgGroup = svg.append(\"g\");\n    }\n    var zoom = d3.zoom().on(\"zoom\", function() {\n          svgGroup.attr(\"transform\", d3.event.transform);\n        });\n    if(reZoom){\n        svg.select('g.output').remove();\n        svg.call(zoom);\n    }\n    g.setNode(\"Mythic\", {label: \"\", style: nodeColor, shape: 'circle', node: null, labelStyle: nodeLabelStyle});\n    edges.forEach( (edge) => {\n        if(!view_config[\"include_disconnected\"] && edge.end_timestamp !== null){return}\n        if(edge.destination.id === edge.source.id){\n            if(g.hasEdge(edge.source.id, \"Mythic\", edge.c2profile.name)){\n                // we already have an edge to Mythic from our source id, check if this edge is newer or not\n                if(edge.id > g.edge(edge.source.id, \"Mythic\", edge.c2profile.name).edge_id){\n                    add_edge_to_mythic(g, edge, view_config);\n                }\n            }else{\n                //this is a new edge to mythic\n                add_edge_to_mythic(g, edge, view_config);\n            }\n        }else{\n            if(edge.direction === 1){\n                if(!view_config[\"packet_flow_view\"]){\n                    if(g.hasEdge(edge.source.id, edge.destination.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.source.id, edge.destination.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }else{\n                            console.log(\"doing nothing, dropping data\");\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }\n                \n            }else if(edge.direction === 2){\n                if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                    //we've seen an edge between these two before\n                   \n                    if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    //this is a new edge\n                    add_edge_p2p(g, edge, view_config);\n                }\n            }\n        }\n    });\n    var render = new dagreD3.render();\n    var width = svg.node().getBoundingClientRect().width;\n    var height = svg.node().getBoundingClientRect().height;\n    render.shapes().circle = function circle(parent, bbox, node) {\n         var shapeSvg = parent.insert(\"image\")\n             .attr(\"class\", \"nodeImage\")\n             .attr(\"xlink:href\", function(d) {\n                 if (node.node) {\n                    return \"/static/\" + node.node.payload.payloadtype.ptype + \".svg\";\n                 }else{\n                    return \"/static/mythic.svg\";\n                 }\n             }).attr(\"x\", \"-20px\")\n             .attr(\"y\", \"-20px\")\n             .attr(\"width\", \"40px\")\n             .attr(\"height\", \"40px\")\n             .on(\"mouseover\", function(d) { node_events[\"mouseover\"](parent, node, d) })\n             .on(\"mouseout\", function(d) { node_events[\"mouseout\"](parent, node, d) })\n             .on(\"click\", function(d) { d3.event.preventDefault(); node_events[\"click\"](parent, node, d) })\n             .on(\"contextmenu\", (d) => {createContextMenu(g, node, node_events[\"contextmenu\"], width, height, \"#callbacksgraph\")});\n         node.intersect = function(point) {\n             return dagreD3.intersect.circle(node, 20, point);\n         };\n         return shapeSvg;\n     };\n     render.shapes().square = function square(parent, bbox, node){\n         var shapeSvg = parent.insert(\"rect\")\n            .attr(\"width\", function(d) {\n                let candidates = g.children(node.node.host);\n                let longest = node.node.host.length;\n                if(candidates !== undefined){\n                    candidates.forEach( (x) => {\n                        if(g.node(x).label.length > longest){\n                            longest = g.node(x).label.length;\n                        }\n                    });\n                }\n                if(view_config[\"rankDir\"] === \"LR\"){\n                    // need a box at least as long as the host name or longest label with matching parent\n                    return longest * 9 + \"px\";\n                }else{\n                    // need a box at least as long as the hostname or longest label with matching parent\n                    //   need to also subtract width of elements for everything with an edge to Mythic\n                    if(candidates !== undefined){\n                        let count = 0;\n                        candidates.forEach( (x) => {\n                            if(g.outEdges(x, \"Mythic\").length > 0){\n                                count += 1;\n                            }\n                        });\n                        longest = (longest * 9) - (count * 100);\n                        if(longest < 0){ return 0}\n                        return longest + \"px\";\n                    }else{\n                        console.log(\"candidates were undefined\");\n                    }\n                }\n            })\n            .attr(\"height\", 0);\n        return shapeSvg;\n     }\n     // if a parent has no children then it should be removed\n    \n    render(svgGroup, g);\n    if(reZoom){\n        var graphWidth = g.graph().width + 40;\n        var graphHeight = g.graph().height + 40;\n        var zoomScale = Math.min(width / graphWidth, height / graphHeight);\n        var translateX = (width / 2) - ((graphWidth * zoomScale) / 2)\n        var translateY = (height / 2) - ((graphHeight * zoomScale) / 2);\n        var svgZoom = svg.transition().duration(500);\n        svgZoom.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(zoomScale));\n    }\n    svgGroup.selectAll(\"g.nodes g.label\")\n        .attr(\"transform\", \"translate(0,30)\");\n}\nexport const getNodeEdges = (g, node) =>{\n    return g.nodeEdges(node);\n}\n\n","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {C2PathDialog} from '../Callbacks/C2PathDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\n\nexport function ExpandedCallbackSideDetails(props){\n    const maxWidth = \"30%\";\n    const theme = useTheme();\n    return (\n        <div style={{maxWidth, width: maxWidth, display: \"inline-flex\", height: \"calc(94vh)\", flexDirection: \"column\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Callback {props.callback.id}\n                </Typography>\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\">   \n            <ExpandedCallbackSideDetailsTable {...props.callback} />\n        </TableContainer>\n        </div>\n    )\n}\n\n\nexport function ExpandedCallbackSideDetailsTable(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(props.last_checkin);\n    });\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = callbackEdges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in callbackEdges that are _not_ in myEdges so far\n                const newEdges = callbackEdges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        setCallbackgraphedges(myActiveEdges);\n        setCallbackgraphedgesAll(myEdges);\n    }, [callbackEdges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n    const handleMenuItemClick = (event, index) => {\n        options[index].click(event);\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n\n        setDropdownOpen(false);\n      };\n\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const options = [{name: props.locked ? 'Unlock (Locked by ' + props.locked_operator.username + ')' : 'Lock Callback', icon: props.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                 ];\n    return (\n        <Table  size=\"small\" style={{\"overflow\": \"scroll\"}}>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Elevation Level</TableCell>\n                        <TableCell>{props.integrity_level}\n                            {props.integrity_level > 2 ? (\" ( Elevated Access )\") : \"\"}\n                            {props.integrity_level == 2 ? (\" ( Medium Integrity ) \") : \"\"}\n                            {props.integrity_level < 2 ? (\" ( Low Integrity )\") : \"\"}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Callback Lock Status</TableCell>\n                        <TableCell>\n                            {props.locked ? (\n                                <React.Fragment>\n                                    <LockOpenIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Unlock (Locked by ' + props.locked_operator.username + ')'}\n                                    </Typography>\n                                </React.Fragment>\n                            ) : (\n                                <React.Fragment>\n                                    <LockIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Lock Callback'}\n                                    </Typography>\n                                </React.Fragment>\n                            )}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>IP Address</TableCell>\n                        <TableCell>{props.ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>External IP</TableCell>\n                        <TableCell>{props.external_ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Host</TableCell>\n                        <TableCell>{props.host}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>User</TableCell>\n                        <TableCell>{props.user}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Domain</TableCell>\n                        <TableCell>{props.domain}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>OS / Architecture</TableCell>\n                        <TableCell>{props.os}({props.architecture})</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process ID</TableCell>\n                        <TableCell>{props.pid}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Last Checkin</TableCell>\n                        <TableCell>{displayTime}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Description</TableCell>\n                        <TableCell>{props.description}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Sleep Info</TableCell>\n                        <TableCell>{props.sleep_info}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Agent Type</TableCell>\n                        <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Egress Route</TableCell>\n                        <TableCell>\n                        {hasEgressRoute ? \n                            <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                            <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                        }\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process Name</TableCell>\n                        <TableCell>{props.process_name}</TableCell>\n                    </TableRow>\n                    <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                        onClose={()=>{setOpenC2Dialog(false);}} \n                        innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                    />\n                    <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                        innerDialog={\n                            <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n                        }\n                        />\n                    <TableRow hover>\n                        <TableCell>Extra Info</TableCell>\n                        <TableCell>{props.extra_info}</TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n    )\n}\n","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Tab from '@material-ui/core/Tab';\nimport React from 'react';\n\nexport function MythicTabPanel(props) {\n  const { children, value, index, maxHeight, tabInfo, getCallbackData, ...other } = props;\n  const style = props.style === undefined ? {height: \"100%\", maxHeight: \"100%\", position: \"relative\", width: \"100%\", maxWidth: \"100%\"} : props.style;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      style={style}\n      {...other}\n    >\n      {value === index ? (<React.Fragment>{children}</React.Fragment>) : (null)}\n    </div>\n  )\n}\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\n  };\n}\nexport function MythicTabLabel(props){\n    const {label, index, fullWidth, maxHeight, onContextMenu, onCloseTab, selectionFollowsFocus, textColor, indicator, tabInfo, onEditTabDescription, getCallbackData, ...other} = props;\n    const onClick = (e) => {\n      e.stopPropagation();onCloseTab({tabID: tabInfo.tabID, index: index});\n    }\n    return (\n        <Tab label={\n            <span onContextMenu={onContextMenu} style={{display: \"inline-block\"}}>\n                {label}<IconButton component=\"div\" size=\"small\" onClick={onClick} {...other}><CloseIcon /></IconButton>\n            </span>\n        } {...a11yProps(index)} {...other}/>\n    )\n}\nexport function MythicSearchTabLabel(props){\n  const {label, index, fullWidth, maxHeight, selectionFollowsFocus, textColor, indicator, iconComponent, ...other} = props;\n  return (\n      <Tab label={\n          <span>{label}<br/>{iconComponent}\n          </span>\n      } {...a11yProps(index)} {...other}/>\n  )\n}\n","export function copyStringToClipboard(str) {\n    try {\n        // Create new element\n        let el = document.createElement('textarea');\n        // Set value (string to be copied)\n        el.value = str;\n        if(el.value === \"\"){\n            el.value = \" \";\n        }\n        // Set non-editable to avoid focus and move outside of view\n        el.setAttribute('readonly', '');\n        el.style = {position: 'absolute', left: '-9999px'};\n        document.body.appendChild(el);\n        // Select text inside element\n        el.select();\n        // Copy text to clipboard\n        document.execCommand('copy');\n        // Remove temporary element\n        document.body.removeChild(el);\n        return true;\n    } catch (error) {\n        console.log(\"warning\", \"Failed to copy to clipboard: \" + error.toString());\n        return false;\n    }\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nexport function ResponseDisplayScreenshotModal(props) {\n    const [zoom, setZoom] = React.useState(false);\n    const toggleZoom = () => {\n      setZoom(!zoom);\n    }\n  return (\n    <React.Fragment>\n        <DialogContent dividers={true}>\n            <img onClick={toggleZoom} src={props.href} style={{width: zoom ? \"\" : \"100%\", height: zoom ? \"\" : \"100%\", cursor: zoom ? \"zoom-out\" : \"zoom-in\"}} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport {ResponseDisplayScreenshotModal} from './ResponseDisplayScreenshotModal';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\nexport const ResponseDisplayScreenshot = (props) =>{\n  const [openScreenshot, setOpenScreenshot] = React.useState(false);\n  const now = (new Date()).toUTCString();\n  const clickOpenScreenshot = () => {\n    setOpenScreenshot(true);\n  }\n\n  return (\n    <React.Fragment>\n      <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n                        onClose={()=>{setOpenScreenshot(false);}} \n                        innerDialog={<ResponseDisplayScreenshotModal href={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id + \"?time=\" + now} onClose={()=>{setOpenScreenshot(false);}} />}\n                    />\n      <Button color=\"primary\" variant={props.variant ? props.variant : \"contained\"} onClick={clickOpenScreenshot} style={{marginBottom: \"10px\"}}>{props.name}</Button>\n    </React.Fragment>\n  )   \n}","import React from 'react';\n\nexport const ResponseDisplayPlaintext = (props) =>{\n\n  return (\n      <pre style={{margin: 0, padding: 0, wordBreak: \"break-all\", whiteSpace: \"pre-wrap\"}}>{props.plaintext}</pre>\n  )\n      \n}","import React, {useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicSelectFromListDialog(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const theme = useTheme();\n    const handleChange = (event) => {\n        setSelected(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(selected);\n        props.onClose();\n    }\n    useEffect( () => {\n        //expects options to be an array of dictionaries with a \"display\" field for what gets presented to the user\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(opts[0]);\n        }else{\n            setSelected(\"\");\n        }\n    }, [props.options]);\n  return (\n    <React.Fragment>\n        <DialogTitle >{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl style={{width: \"100%\"}}>\n                  <InputLabel ref={inputRef}>Options</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={selected}\n                    onChange={handleChange}\n                    input={<Input style={{width: \"100%\"}}/>}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {options.map( (opt) => (\n                        <MenuItem value={opt} key={opt[props.identifier]}>{opt[props.display]}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n            {props.action}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport Input from '@material-ui/core/Input';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Paper from '@material-ui/core/Paper';\nimport TableHead from '@material-ui/core/TableHead';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {useTheme} from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport {Typography} from '@material-ui/core';\nimport {useMutation, gql } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Popover from '@material-ui/core/Popover';\n\nconst getDynamicQueryParams = gql`\nmutation getDynamicParamsMutation($callback: Int!, $command: String!, $payload_type: String!, $parameter_name: String!){\n    dynamic_query_function(callback: $callback, command: $command, payload_type: $payload_type, parameter_name: $parameter_name){\n        status\n        error\n        choices\n    }\n}\n`;\n\nexport function TaskParametersDialogRow(props){\n    const [value, setValue] = React.useState('');\n    const theme = useTheme();\n    const [ChoiceOptions, setChoiceOptions] = React.useState([]);\n    const [boolValue, setBoolValue] = React.useState(false);\n    const [arrayValue, setArrayValue] = React.useState([]);\n    const [choiceMultipleValue, setChoiceMultipleValue] = React.useState([]);\n    const [agentConnectNewHost, setAgentConnectNewHost] = React.useState(\"\");\n    const [agentConnectNewPayload, setAgentConnectNewPayload] = React.useState(0);\n    const [agentConnectHost, setAgentConnectHost] = React.useState();\n    const [agentConnectPayloadOptions, setAgentConnectPayloadOptions] = React.useState([]);\n    const [agentConnectPayload, setAgentConnectPayload] = React.useState();\n    const [agentConnectC2ProfileOptions, setAgentConnectC2ProfileOptions] = React.useState([]);\n    const [agentConnectC2Profile, setAgentConnectC2Profile] = React.useState();\n    const [openAdditionalPayloadOnHostMenu, setOpenAdditionalPayloadOnHostmenu] = React.useState(false);\n    const [fileValue, setFileValue] = React.useState({name: \"\"});\n    const [getDynamicParams] = useMutation(getDynamicQueryParams, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if(data.dynamic_query_function.status === \"success\"){\n                setChoiceOptions([...data.dynamic_query_function.choices]);\n                if(props.type === \"Choice\"){\n                    if(data.dynamic_query_function.choices.length > 0){\n                        setValue(data.dynamic_query_function.choices[0]);\n                        props.onChange(props.name, data.dynamic_query_function.choices[0], false);\n                    }\n                }\n            }else{\n                snackActions.warning(\"Failed to fetch dynamic parameter query: \" + data.dynamic_query_function.error);\n            }\n        },\n        onError: (data) => {\n            snackActions.warning(\"Failed to perform dynamic parameter query\");\n            console.log(data);\n        }\n    })\n    useEffect( () => {\n        if(props.dynamic_query_function !== null){\n            if(ChoiceOptions.length === 0){\n                getDynamicParams({variables:{\n                    callback: props.callback_id,\n                    parameter_name: props.name,\n                    command: props.commandInfo.cmd,\n                    payload_type: props.commandInfo.payloadtype.ptype\n                }})\n            }\n        }\n       if(props.type === \"Boolean\"){\n            if(value === \"\"){\n                setBoolValue(props.value);\n                setValue(props.value);\n            }\n       }else if(props.type === \"Array\"){\n            if(arrayValue.length === 0 && props.value.length > 0){\n                setArrayValue(props.value);\n            }\n       }else if(props.type === \"ChoiceMultiple\" && props.dynamic_query_function === null){\n           if(value === \"\"){\n                setChoiceMultipleValue(props.value);\n                setValue(props.value);\n           }\n       }\n       else if(props.type === \"AgentConnect\"){\n            if(props.choices.length > 0){\n                setAgentConnectHost(0);\n                setAgentConnectPayloadOptions(props.choices[0][\"payloads\"]);\n                if(props.choices[0][\"payloads\"].length > 0){\n                    setAgentConnectPayload(0);  \n                    if(props.choices[0][\"payloads\"][0][\"c2info\"].length > 0){\n                        setAgentConnectC2ProfileOptions(props.choices[0][\"payloads\"][0][\"c2info\"]);\n                        setAgentConnectC2Profile(0);\n                    }\n                }else{\n                \n                }\n            }else{\n            \n            }\n       }else{\n           if(value === \"\"){\n               if(props.type === \"Number\"){\n                   if(props.default_value === \"\"){\n                       setValue(0);\n                   }else{\n                        setValue(parseInt(props.default_value));\n                   }\n                   \n               }else{\n                    setValue(props.default_value);\n               }\n                \n           }\n           if(props.dynamic_query_function === null && value===\"\"){\n                setChoiceOptions([...props.choices]);\n                if(props.choices.length > 0 && props.default_value === \"\"){\n                    setValue(props.choices[0]);\n                    props.onChange(props.name, props.choices[0], false);\n                }else if(props.choices.length > 0){\n                    setValue(props.default_value);\n                    props.onChange(props.name, props.default_value, false);\n                }\n           }\n           \n       }\n       \n    }, [props.choices, props.default_value, props.type, props.value, setBoolValue, value]);\n    const onChangeAgentConnect = (host_index, payload_index, c2_index) => {\n        const c2profileparameters = props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].parameters.reduce( (prev, opt) => {\n            return {...prev, [opt.name]: opt.value}\n        }, {});\n        let agentConnectValue = {host: props.choices[host_index][\"host\"], agent_uuid: props.choices[host_index][\"payloads\"][payload_index].uuid,\n        c2_profile: {name: props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].name, parameters: c2profileparameters}};\n        if(props.choices[host_index][\"payloads\"][payload_index].type === \"callback\"){\n            agentConnectValue[\"callback_uuid\"] = props.choices[host_index][\"payloads\"][payload_index][\"agent_callback_id\"];\n        }else{\n            agentConnectValue[\"callback_uuid\"] = \"\";\n        }\n        props.onChange(props.name, agentConnectValue, false);\n    }\n    const onChangeLinkInfo = (index) => {\n        let choice;\n        if(props.choices[index][\"source\"][\"id\"] === props.callback_id){\n            choice = props.choices[index][\"source\"];\n        }else{\n            choice = props.choices[index][\"destination\"];\n        }\n        const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n            if(opt.c2_profile_id === props.choices[index][\"c2profile\"][\"id\"]){\n                return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key, dec_key: opt.dec_key} }\n            }else{\n                return {...prev};\n            }\n        }, {});\n        let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: props.choices[index][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n        props.onChange(props.name, agentConnectValue, false);\n        setValue(index);\n    }\n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, evt.target.value, false);\n    }\n    \n    const onChangeChoiceMultiple = (event) => {\n        const { options } = event.target;\n        const value = [];\n        for (let i = 0, l = options.length; i < l; i += 1) {\n          if (options[i].selected) {\n            value.push(options[i].value);\n          }\n        }\n        setChoiceMultipleValue(value);\n        setValue(value);\n        props.onChange(props.name, value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        props.onChange(props.name, value, error);\n    }\n    const onChangeNumber = (name, value, error) => {\n        setValue(parseInt(value));\n        props.onChange(props.name, parseInt(value), error);\n    }\n    const onSwitchChange = (name, value) => {\n        setBoolValue(value);\n        setValue(value);\n        props.onChange(name, value);\n    }\n    const onFileChange = (evt) => {\n        \n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const contents = btoa(e.target.result);\n            setFileValue({name: evt.target.files[0].name, contents: contents});\n            props.onChange(props.name, {name: evt.target.files[0].name, contents: contents});\n        }\n        reader.readAsBinaryString(evt.target.files[0]);\n        \n    }\n    const onChangeAgentConnectHost = (event) => {\n        setAgentConnectHost(event.target.value); \n        setAgentConnectPayloadOptions(props.choices[event.target.value][\"payloads\"]);\n        if(props.choices[event.target.value][\"payloads\"].length > 0){\n            setAgentConnectPayload(0);  \n            if(props.choices[event.target.value][\"payloads\"][0][\"c2info\"].length > 0){\n                setAgentConnectC2ProfileOptions(props.choices[0][\"payloads\"][0][\"c2info\"]);\n                setAgentConnectC2Profile(0);\n                onChangeAgentConnect(event.target.value, 0, 0);\n            }else{\n                setAgentConnectC2ProfileOptions([]);\n                setAgentConnectC2Profile(null);\n            }\n        }else{\n            setAgentConnectPayloadOptions([]);\n            setAgentConnectPayload(null);\n            setAgentConnectC2ProfileOptions([]);\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectPayload = (event) => {\n        setAgentConnectPayload(event.target.value);\n        setAgentConnectC2ProfileOptions(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"]);\n        if(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"].length > 0){\n            setAgentConnectC2Profile(0);\n            onChangeAgentConnect(agentConnectHost, event.target.value, 0);\n        }else{\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectC2Profile = (event) => {\n        setAgentConnectC2Profile(event.target.value);\n        onChangeAgentConnect(agentConnectHost, agentConnectPayload, event.target.value);\n    }\n    const onChangeAgentConnectNewHost = (name, value, error) => {\n        setAgentConnectNewHost(value);\n    }\n    const onChangeAgentConnectNewPayload = (event) => {\n        setAgentConnectNewPayload(event.target.value);\n    }\n    const onAgentConnectAddNewPayloadOnHost = () => {\n        props.onAgentConnectAddNewPayloadOnHost(agentConnectNewHost, props.payload_choices[agentConnectNewPayload].id);\n        setOpenAdditionalPayloadOnHostmenu(false);\n    }\n    const testParameterValues = (curVal) => {\n        if( props.required && props.verifier_regex !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else if(props.verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const addNewArrayValue = () => {\n        const newArray = [...arrayValue, \"\"];\n        setArrayValue(newArray);\n        props.onChange(props.name, newArray, false);\n    }\n    const removeArrayValue = (index) => {\n        let removed = [...arrayValue];\n        removed.splice(index, 1);\n        setArrayValue(removed);\n        props.onChange(props.name, removed, false);\n    }\n    const onChangeArrayText = (value, error, index) => {\n        let values = [...arrayValue];\n        values[index] = value;\n        setArrayValue(values);\n        props.onChange(props.name, values, false);\n    }\n    const getParameterObject = () => {\n        switch(props.type){\n            case \"Choice\":\n            case \"ChoiceMultiple\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                          native\n                          autoFocus={props.autoFocus}\n                          multiple={props.type === \"ChoiceMultiple\"}\n                          value={props.type === \"ChoiceMultiple\" ? choiceMultipleValue : value}\n                          onChange={props.type === \"ChoiceMultiple\" ? onChangeChoiceMultiple : onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Array\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\">\n                        <Table size=\"small\" style={{tableLayout: \"fixed\", maxWidth: \"100%\", \"overflow\": \"auto\"}}>\n                            <TableRow >\n                                <TableCell style={{width: \"5rem\"}}></TableCell>\n                                <TableCell></TableCell>\n                            </TableRow>\n                            <TableBody>\n                                {arrayValue.map( (a, i) => (\n                                    <TableRow key={'array' + props.name + i} hover>\n                                        <TableCell>\n                                            <Button onClick={() => removeArrayValue(i)} color=\"secondary\" variant=\"outlined\" size=\"small\">X</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                        <MythicTextField required={props.required} placeholder={\"\"} value={a} multiline={false} autoFocus={props.autoFocus && i === 0}\n                                                onChange={(n,v,e) => onChangeArrayText(v, e, i)} display=\"inline-block\" onEnter={addNewArrayValue}\n                                                validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                                            />\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                                <TableRow hover>\n                                    <TableCell>\n                                        <Button onClick={addNewArrayValue} size=\"small\" variant=\"outlined\" color=\"primary\">+</Button>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false}\n                        onChange={onChangeText} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Number\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false} type=\"number\"\n                        onChange={onChangeNumber} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                    <Switch checked={boolValue} onChange={onSwitchChange} />\n                )\n            case \"File\":\n                return (\n                    <Button variant=\"contained\" component=\"label\"> \n                        { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n                    <input onChange={onFileChange} type=\"file\" hidden /> </Button>\n                )\n            case \"LinkInfo\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={(evt) => {onChangeLinkInfo(evt.target.value)}}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={i}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"PayloadList\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={opt.uuid}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"AgentConnect\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\"> \n                        <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                            <TableBody>\n                                {openAdditionalPayloadOnHostMenu ? (\n                                <React.Fragment>\n                                    <TableRow>\n                                        <TableCell style={{width: \"6em\"}}>Hostname</TableCell>\n                                        <TableCell>\n                                            <MythicTextField required={true} placeholder={\"hostname\"} value={agentConnectNewHost} multiline={false} autoFocus={props.autoFocus}\n                                                onChange={onChangeAgentConnectNewHost} display=\"inline-block\"/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Payload on that host</TableCell>\n                                        <TableCell>\n                                            <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectNewPayload}\n                                                  onChange={onChangeAgentConnectNewPayload}\n                                                  input={<Input />}\n                                                >\n                                                {props.payload_choices ? (\n                                                    props.payload_choices.map((opt, i) => (\n                                                        <option key={props.name + \"newpayload\" + i} value={i}>{opt.display}</option>\n                                                    ))\n                                                ) : ( <option key={props.name + \"nooptionnewpayload\"} value=\"-1\">No Payloads</option> )}\n                                                </Select>\n                                            </FormControl>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>\n                                            <Button component=\"span\" variant=\"contained\" style={{backgroundColor: theme.palette.success.main, padding: 0, color: \"white\"}} onClick={onAgentConnectAddNewPayloadOnHost}><AddCircleIcon />Add</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                            <Button component=\"span\" style={{color: theme.palette.warning.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(false)}}><CancelIcon />Cancel</Button>\n                                        </TableCell>\n                                    </TableRow>\n                                </React.Fragment>\n                                ) : (null) }\n                                <TableRow>\n                                    <TableCell style={{width: \"6em\"}}>\n                                        Host \n                                        <IconButton component=\"span\" variant=\"contained\" style={{color: theme.palette.success.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(true)}}><AddCircleIcon /></IconButton>\n                                        <IconButton component=\"span\" variant=\"contained\" style={{color: theme.palette.error.main, padding: 0}}><DeleteIcon /></IconButton>\n                                    </TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectHost}\n                                              onChange={onChangeAgentConnectHost}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                props.choices.map((opt, i) => (\n                                                    <option key={props.name + \"connecthost\" + i} value={i}>{opt.host}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell>Payload</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectPayload}\n                                              onChange={onChangeAgentConnectPayload}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectPayloadOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connectagent\" + i} value={i}>{opt.display}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell>C2 Profile</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectC2Profile}\n                                                  onChange={onChangeAgentConnectC2Profile}\n                                                  input={<Input />}\n                                                >\n                                                {\n                                                    agentConnectC2ProfileOptions.map((opt, i) => (\n                                                        <option key={props.name + \"connectprofile\" + i} value={i}>{opt.name}</option>\n                                                    ))\n                                                }\n                                                </Select>\n                                            </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                        {agentConnectC2ProfileOptions.length > 0 ? (\n                            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                                <TableHead>\n                                        <TableRow>\n                                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                            <TableCell>Value</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                <TableBody>\n                                    \n                                    {agentConnectC2ProfileOptions[agentConnectC2Profile][\"parameters\"].map( (opt) => (\n                                        <TableRow>\n                                            <TableCell>{opt.name}</TableCell>\n                                            <TableCell><pre>{JSON.stringify(opt.value, null, 2)}</pre></TableCell>\n                                        </TableRow>\n                                    ) ) }\n                                </TableBody>\n                            </Table>\n                        ): (null)}\n                    </TableContainer>\n                )\n            case \"Credential-JSON\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Credential-Account\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                            native\n                            value={value}\n                            autoFocus={props.autoFocus}\n                            onChange={onChangeValue}\n                            input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt.account} >\n                                    {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.account + \" )\" : opt.account}\n                                </option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Credential-Realm\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                            native\n                            value={value}\n                            autoFocus={props.autoFocus}\n                            onChange={onChangeValue}\n                            input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt.realm}>\n                                    {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.realm + \" )\" : opt.realm}\n                                </option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Credential-Type\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                            native\n                            value={value}\n                            autoFocus={props.autoFocus}\n                            onChange={onChangeValue}\n                            input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt.type}>{opt.type}\n                                </option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Credential-Credential\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                            native\n                            value={value}\n                            autoFocus={props.autoFocus}\n                            onChange={onChangeValue}\n                            input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt.credential_text} style={{textOverflow: \"ellipsis\"}}>\n                                    {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.credential_text + \" )\" : opt.credential_text}\n                                </option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    return (\n            <TableRow key={\"buildparam\" + props.id}>\n                <TableCell >\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + props.id + 'popover' : undefined}>\n                            {props.name}\n                    </Typography>\n                    {props.required ? (\n                        <Typography component=\"div\" style={{color: theme.palette.warning.main}}>Required</Typography>\n                    ) : (null) }\n                    <Popover id={'taskparam' + props.id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{props.description.length > 0 ? props.description : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {TaskParametersDialogRow} from './TaskParametersDialogRow';\nimport {useQuery, gql, useLazyQuery, useMutation } from '@apollo/client';\n\n//if we need to get all the loaded commands for the callback and filter, use this\nconst GetLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}}) {\n    id\n    command {\n      cmd\n      attributes\n      id\n    }\n  }\n}\n`;\n//if we need to get all the possible commands for a payload type and filter, use this\nconst getAllCommandsQuery = gql`\nquery getAllCommandsQuery($payload_type_id: Int!){\n    command(where: {payload_type_id: {_eq: $payload_type_id}, deleted: {_eq: false}}) {\n        attributes\n        cmd\n        id\n    }\n}\n`;\n//if we need to get all the possible edges for the callback, use this\nconst getAllEdgesQuery = gql`\nquery getAllEdgesQuery($callback_id: Int!){\n    callbackgraphedge(where: {_or: [{source_id:{_eq: $callback_id}}, {destination_id: {_eq: $callback_id}}]}) {\n        id\n        c2profile {\n          id\n          name\n        }\n        direction\n        destination{\n            agent_callback_id\n            host\n            id\n            payload {\n              id\n              uuid\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              value\n              id\n              c2_profile_id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        source{\n            agent_callback_id\n            host\n            id\n            payload {\n              uuid\n              id\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              c2_profile_id\n              value\n              id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        end_timestamp\n      }\n    }\n`;\n// get all payloads query\nconst getAllPayloadsQuery = gql`\nquery getAllPayloadsQuery($operation_id: Int!){\n    payload(where: {deleted: {_eq: false}, build_phase: {_eq: \"success\"}, operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    uuid\n    payloadc2profiles {\n      id\n      c2profile {\n        name\n        id\n      }\n    }\n    payloadtype{\n        id\n        ptype\n    }\n    filemetum {\n        id\n        filename_text\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        name\n        id\n      }\n    }\n  }\n}\n`;\n// get all payloads on hosts\nconst getAllPayloadsOnHostsQuery = gql`\nquery getAllPayloadsOnHostsQuery($operation_id: Int!){\n    payloadonhost(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, payload: {c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}}) {\n    host\n    id\n    payload {\n      auto_generated\n      id\n      tag\n      filemetum {\n        filename_text\n        id\n      }\n      uuid\n      c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n        c2profile {\n          name\n          id\n        }\n        c2profileparameter {\n          crypto_type\n          name\n          id\n        }\n        value\n        enc_key_base64\n        dec_key_base64\n        id\n      }\n      callbacks(where: {active: {_eq: true}}) {\n        agent_callback_id\n        id\n        host\n        description\n        enc_key_base64\n        dec_key_base64\n        crypto_type\n      }\n    }\n  }\n}\n`;\n// use this to add a payload on a host\nconst addPayloadOnHostMutation = gql`\n    mutation addPayloadOnHostMutation($host: String!, $payload_id: Int!){\n        insert_payloadonhost(objects: {host: $host, payload_id: $payload_id}) {\n            affected_rows\n          }\n    }\n`;\n// use this to get all of the parameters and information for the command we're trying to execute\nconst getCommandQuery = gql`\nquery getCommandQuery($id: Int!){\n  command_by_pk(id: $id) {\n    attributes\n    author\n    cmd\n    description\n    help_cmd\n    id\n    needs_admin\n    version\n    payloadtype{\n        ptype\n    }\n    commandparameters {\n      choice_filter_by_command_attributes\n      choices\n      choices_are_all_commands\n      choices_are_loaded_commands\n      default_value\n      description\n      id\n      name\n      required\n      supported_agent_build_parameters\n      supported_agents\n      type\n      dynamic_query_function\n      ui_position\n    }\n    commandopsec {\n      authentication\n      id\n      injection_method\n      process_creation\n    }\n  }\n}\n`;\n// use this to get all of the credentials for the command we're trying to execute\nconst getCredentialsQuery = gql`\nquery getCredentialsQuery($operation_id: Int!){\n    credential(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}}){\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n    }\n}\n`;\nexport function TaskParametersDialog(props) {\n    const [commandInfo, setCommandInfo] = useState({});\n    const [parameters, setParameters] = useState([]);\n    const [rawParameters, setRawParameters] = useState(false);\n    const [requiredPieces, setRequiredPieces] = useState({all: false, loaded: false, edges: false, credentials: false});\n    //get all the data about our command that we can\n    const [getAllCommands, { data: allCommandsLoading}] = useLazyQuery(getAllCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getLoadedCommands, { data: loadedCommandsLoading}] = useLazyQuery(GetLoadedCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllEdges, { data: loadedAllEdgesLoading}] = useLazyQuery(getAllEdgesQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloads, { data: loadedAllPayloadsLoading}] = useLazyQuery(getAllPayloadsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloadsOnHosts, { data: loadedAllPayloadsOnHostsLoading}] = useLazyQuery(getAllPayloadsOnHostsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllCredentials, { data: loadedCredentialsLoading}] = useLazyQuery(getCredentialsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [addPayloadOnHost] = useMutation(addPayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    });\n    useQuery(getCommandQuery, {\n        variables: {id: props.command.id},\n        onCompleted: data => {\n            // do an initial pass to see what other quries we need to make\n            let requiredPiecesInitial = {all: false, loaded: false, edges: false, credentials: false};\n            data.command_by_pk.commandparameters.forEach( (cmd) => {\n                if(cmd.type === \"LinkInfo\"){\n                    requiredPiecesInitial[\"edges\"] = true;\n                }else if(cmd.choices_are_all_commands){\n                    requiredPiecesInitial[\"all\"] = true;\n                }else if(cmd.choices_are_loaded_commands){\n                    requiredPiecesInitial[\"loaded\"] = true;\n                }else if(cmd.type === \"AgentConnect\"){\n                    requiredPiecesInitial[\"connect\"] = true;\n                    //need payloads as well in case the user wants to add a payload to a host\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type === \"PayloadList\"){\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type.includes(\"Credential\")){\n                    requiredPiecesInitial[\"credentials\"] = true;\n                }\n            });\n            setCommandInfo({...data.command_by_pk});\n            if(requiredPiecesInitial[\"edges\"]){getAllEdges({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"all\"]){getAllCommands({variables: {payload_type_id: props.payloadtype_id}});}\n            if(requiredPiecesInitial[\"loaded\"]){getLoadedCommands({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"payloads\"]){getAllPayloads({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"connect\"]){getAllPayloadsOnHosts({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"credentials\"]){getAllCredentials({variables: {operation_id: props.operation_id}});}\n            setRequiredPieces(requiredPiecesInitial);\n            setRawParameters({...data});\n        }\n    });\n    const intersect = (a, b) => {\n      let setB = new Set(b);\n      return [...new Set(a)].filter(x => setB.has(x));\n    }\n    \n    useEffect( () => {\n        const getLinkInfoFromAgentConnect = (choices) => {\n            if(choices.length > 0){\n                const c2profileparameters = choices[0][\"payloads\"][0][\"c2info\"][0].parameters.reduce( (prev, opt) => {\n                    return {...prev, [opt.name]: opt.value}\n                }, {});\n                let agentConnectValue = {host: choices[0][\"host\"], agent_uuid: choices[0][\"payloads\"][0].uuid,\n                c2_profile: {name: choices[0][\"payloads\"][0][\"c2info\"][0].name, parameters: c2profileparameters}};\n                if(choices[0][\"payloads\"][0].type === \"callback\"){\n                    agentConnectValue[\"callback_uuid\"] = props.choices[0][\"payloads\"][0][\"agent_callback_id\"];\n                }\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        };\n        const getLinkInfoValue = (choices) => {\n            let choice;\n            if(choices.length > 0){\n                if(choices[0][\"source\"][\"id\"] === props.callback_id){\n                    choice = choices[0][\"source\"];\n                }else{\n                    choice = choices[0][\"destination\"];\n                }\n                const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n                    if(opt.c2_profile_id === choices[0][\"c2profile\"][\"id\"]){\n                        return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key_base64, dec_key: opt.dec_key_base64} }\n                    }else{\n                        return {...prev};\n                    }\n                }, {});\n                let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: choices[0][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        }\n        if(rawParameters && (!requiredPieces[\"loaded\"] || loadedCommandsLoading) &&\n                       (!requiredPieces[\"all\"] || allCommandsLoading) &&\n                       (!requiredPieces[\"edges\"] || loadedAllEdgesLoading) &&\n                       (!requiredPieces[\"payloads\"] || loadedAllPayloadsLoading) && \n                       (!requiredPieces[\"connect\"] || loadedAllPayloadsOnHostsLoading) &&\n                       (!requiredPieces[\"credentials\"] || loadedCredentialsLoading) ){\n            //only process the parameter once we have fetched all of the required pieces\n            const params = rawParameters.command_by_pk.commandparameters.map( (cmd) => {\n                switch(cmd.type){\n                    case \"Boolean\":\n                        if(cmd.default_value){\n                            return {...cmd, value: cmd.default_value.toLowerCase() === \"true\"}\n                        }else{\n                            return {...cmd, value: false}\n                        }\n                    case \"String\":\n                        return {...cmd, value: cmd.default_value};\n                    case \"Number\":\n                        return {...cmd, value: cmd.default_value === \"\" ? 0 : parseInt(cmd.default_value)};\n                    case \"Array\":\n                        if(cmd.default_value.length > 0){\n                            return {...cmd, value: JSON.parse(cmd.default_value)};\n                        }else{\n                            return {...cmd, value: []};\n                        }\n                    case \"Choice\":\n                    case \"ChoiceMultiple\":\n                        let choices = cmd.choices.split(\"\\n\");\n                        let defaultV = cmd.default_value;\n                        if(cmd.type === \"ChoiceMultiple\"){\n                            if(cmd.default_value !== \"\"){\n                                defaultV = JSON.parse(cmd.default_value);\n                            }else{\n                                defaultV = [];\n                            }\n                        }else{\n                            if(choices.length > 0){\n                                defaultV = cmd.default_value === \"\" ? choices[0] : cmd.default_value;\n                            }\n                        }\n                        let filter = JSON.parse(cmd.choice_filter_by_command_attributes);\n                        if(cmd.choices_are_all_commands){\n                            //get all of the latest commands\n                            choices = [...allCommandsLoading.command];\n                            choices = choices.reduce( (prev, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prev, c.cmd];\n                                }else{\n                                    return prev;\n                                }\n                            }, []);\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }else if(cmd.choices_are_loaded_commands){\n                            //get all of the loaded commands\n                            choices = [...loadedCommandsLoading.loadedcommands];\n                            choices = choices.reduce( (prev, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.command.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prev, c.command.cmd];\n                                }else{\n                                    return prev;\n                                }\n                            }, []);\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }\n                        return {...cmd, choices: choices, default_value: defaultV, value: defaultV}\n                    case \"File\":\n                        return {...cmd, value: {} }\n                    \n                    case \"Credential-JSON\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return {...cmd, value: loadedCredentialsLoading.credential[0], choices: loadedCredentialsLoading.credential}\n                        }else{\n                            return {...cmd, value: {}, choices: []}\n                        }\n                    case \"Credential-Account\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return {...cmd, value: loadedCredentialsLoading.credential[0][\"account\"], choices: loadedCredentialsLoading.credential}\n                        }else{\n                            return {...cmd, value: \"\", choices: []}\n                        }\n                    case \"Credential-Realm\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return {...cmd, value: loadedCredentialsLoading.credential[0][\"realm\"], choices: loadedCredentialsLoading.credential}\n                        }else{\n                            return {...cmd, value: \"\", choices: []}\n                        }\n                    case \"Credential-Type\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return {...cmd, value: loadedCredentialsLoading.credential[0][\"type\"], choices: loadedCredentialsLoading.credential}\n                        }else{\n                            return {...cmd, value: \"\", choices: []}\n                        }\n                    case \"Credential-Credential\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return {...cmd, value: loadedCredentialsLoading.credential[0][\"credential_text\"], choices: loadedCredentialsLoading.credential}\n                        }else{\n                            return {...cmd, value: \"\", choices: []}\n                        }\n                    case \"AgentConnect\":\n                    //want to make a format of [ {host: \"hostname\", payloads: [ {uuid: \"uuid\" } ], callbacks: [ { agent_callback_id: \"uuid\" } ] } ]\n                        const agentConnectNewPayloads = loadedAllPayloadsLoading.payload.reduce( (prev, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prev, profile) => {\n                                return [...prev, profile.c2profile.name];\n                            }, []).join(\",\");\n                            return [...prev, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                        }, []);\n                        const organized = loadedAllPayloadsOnHostsLoading.payloadonhost.reduce( (prev, entry) => {\n                            let found = false;\n                            const updates = prev.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    //now we need to merge this entry with our current payloads/callbacks for the host\n                                    let duplicated_payload = false;\n                                    host.payloads.forEach( (p) => {\n                                        if(p.id === entry.payload.id){duplicated_payload = true}\n                                    });\n                                    if(duplicated_payload){return host}\n                                    const c2info = entry.payload.c2profileparametersinstances.reduce( (prev, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.c2profileparameter.crypto_type, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prev){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prev, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\"};\n                                    const callbacks = entry.payload.callbacks.reduce( (prior, callback) => {\n                                        if(callback.host === entry.host){\n                                            return [...prior, {...entry.payload, c2info: c2array, c2profileparametersinstances: entry.payload.c2profileparametersinstances,  display: \"Callback \" + callback.id + \" - \" + callback.description, ...callback, type: \"callback\"}];\n                                        }else{\n                                            return prior;\n                                        }\n                                    }, []);\n                                    return {...host, payloads: [...host.payloads, payloadInfo, ...callbacks]}\n                                }else{\n                                    //this doesn't match our host, so don't modify\n                                    return host; \n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.payload.c2profileparametersinstances.reduce( (prev, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.c2profileparameter.crypto_type, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prev){\n                                        //we just want to add a new entry to the c2profile.name list\n                                        \n                                        return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prev, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\"};\n                                const callbacks = entry.payload.callbacks.reduce( (prior, callback) => {\n                                    if(callback.host === entry.host){\n                                        return [...prior, {...entry.payload, c2info: c2array, c2profileparametersinstances: entry.payload.c2profileparametersinstances,  display: \"Callback \" + callback.id + \" - \" + callback.description, ...callback, type: \"callback\"}];\n                                    }else{\n                                        return prior;\n                                    }\n                                }, []);\n                                return [...prev, {host: entry.host, payloads: [payloadInfo, ...callbacks] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        return {...cmd, choices: organized, payload_choices: agentConnectNewPayloads, value: getLinkInfoFromAgentConnect(organized)}\n                    case \"PayloadList\":\n                        let supported_agents = cmd.supported_agents.split(\",\");\n                        if(supported_agents.indexOf(\"\") !== -1){supported_agents.splice(supported_agents.indexOf(\"\"))}\n                        const build_requirements = JSON.parse(cmd.supported_agent_build_parameters);\n                        const payloads = loadedAllPayloadsLoading.payload.reduce( (prev, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prev, profile) => {\n                                return [...prev, profile.c2profile.name];\n                            }, []).join(\",\");\n                            if(supported_agents.length > 0 && !supported_agents.includes(payload.payloadtype.ptype)){return prev};\n                            let matched = true;\n                            if(payload.payloadtype.ptype in build_requirements){\n                                //this means we have a filtering condition on our payload\n                                for(const [key, value] of Object.entries(build_requirements[payload.payloadtype.ptype])){\n                                    payload.buildparameterinstances.forEach( (build_param) => {\n                                        if(build_param.buildparameter.name === key){\n                                            if(build_param.parameter !== value){matched = false}\n                                        }\n                                    });\n                                }\n                            }\n                            if(matched){\n                                return [...prev, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                            }else{\n                                return prev;\n                            }\n                            \n                        }, []);\n                        //now filter the payloads based on supported_agents and supported_agent_build_parameters\n                        if(payloads.length > 0){\n                            return {...cmd, choices: payloads, default_value: payloads[0].uuid, value: payloads[0].uuid}\n                        }else{\n                            return {...cmd, choices: payloads, value: null}\n                        }\n                    case \"LinkInfo\":\n                        const edge_choices = loadedAllEdgesLoading.callbackgraphedge.reduce( (prev, edge) => {\n                            if(edge.source.id === edge.destination.id) {return prev}\n                            if(edge.direction === 1){\n                                return [...prev, {...edge, display: \"Callback \" + edge.source.id + \" --\" + edge.c2profile.name + \"--> Callback \" + edge.destination.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            }else if(edge.direction === 2){\n                                return [...prev, {...edge, display: \"Callback \" + edge.destination.id + \"-> \" + edge.c2profile.name + \"--> Callback \" + edge.source.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            } else{\n                                return prev;\n                            }\n                        }, []);\n                        if(edge_choices.length > 0){\n                            return {...cmd, choices: edge_choices, value: getLinkInfoValue(edge_choices)};\n                        }else{\n                            return {...cmd, choices: edge_choices, value: {}};\n                        }\n                    default:\n                        return {...cmd}\n                }\n            } );\n            const sorted = params.sort((a, b) => (a.ui_position > b.ui_position) ? 1 : -1)\n            if(sorted.length > 0){\n                sorted[0][\"autoFocus\"] = true;\n            }\n            setParameters(sorted);\n        }\n    }, [rawParameters, loadedCommandsLoading, allCommandsLoading, loadedAllEdgesLoading, requiredPieces, loadedAllPayloadsLoading, loadedCredentialsLoading, loadedAllPayloadsOnHostsLoading, props.callback_id, props.choices]);\n    const onSubmit = () => {\n        const collapsedParameters = parameters.reduce( (prev, param) => {\n            switch(param.type){\n                case \"String\":\n                case \"Boolean\":\n                case \"Number\":\n                case \"Choice\":\n                case \"ChoiceMultiple\":\n                case \"Credential-Account\":\n                case \"Credential-Realm\":\n                case \"Credential-Type\":\n                case \"Credential-Credential\":\n                case \"Credential-JSON\":\n                case \"AgentConnect\":\n                case \"PayloadList\":\n                case \"Array\":\n                case \"LinkInfo\":\n                    return {...prev, [param.name]: param.value}\n                case \"File\":\n                    return {...prev, [param.name]: param.value.name}\n                default:\n                    return {...prev}\n            }\n        }, {});\n        const collapsedFiles = parameters.reduce( (prev, param) => {\n            if(param.type === \"File\"){\n                return {...prev, [param.name]: param.value.contents}\n            }else{\n                return {...prev}\n            }\n        }, {});\n        props.onSubmit(props.command.cmd, JSON.stringify(collapsedParameters), JSON.stringify(collapsedFiles));\n    }\n    const onAgentConnectAddNewPayloadOnHost = (host, payload) => {\n        addPayloadOnHost({variables: {host: host, payload_id: payload} })\n    }\n    const onChange = (name, value, error) => {\n        const params = parameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value: value};\n            }else{\n                return {...param};\n            }\n        });\n        setParameters(params);\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.command.cmd}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <Typography component=\"div\" >\n                <b>Help</b> <pre style={{margin:0}}>{props.command.help_cmd}</pre>\n                <b>Description</b> <pre style={{margin:0, wordBreak: \"break-all\", overflow: \"word-wrap\", whiteSpace: \"pre-wrap\"}}>{props.command.description}</pre>\n                <b>Requires Admin?</b> {props.command.needs_admin ? \"True\": \"False\"}\n            </Typography>\n            <TableContainer component={Paper} className=\"mythicElement\"> \n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                            <TableCell>Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {parameters.map( (op) => (\n                            <TaskParametersDialogRow onSubmit={onSubmit} key={\"taskparameterrow\" + op.id} onChange={onChange} commandInfo={commandInfo} {...op} callback_id={props.callback_id} onAgentConnectAddNewPayloadOnHost={onAgentConnectAddNewPayloadOnHost}/>\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport {gql, useMutation, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\n\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $ui_feature: String!) {\n    callback_by_pk(id: $callback_id){\n        operation_id\n        loadedcommands(where: {command: {supported_ui_features: {_ilike: $ui_feature}}}) {\n            id\n            command {\n              cmd\n              help_cmd\n              description\n              id\n              needs_admin\n              payload_type_id\n              attributes\n              commandparameters {\n                id\n                type \n              }\n              supported_ui_features\n            }\n          }\n        payload {\n            payloadtype {\n                id\n                commands(where: {script_only: {_eq: true}, deleted: {_eq: false}, supported_ui_features: {_ilike: $ui_feature }}){\n                    id\n                    cmd\n                    help_cmd\n                    description\n                    needs_admin\n                    attributes\n                    payload_type_id\n                    commandparameters {\n                        id\n                        type\n                    }\n                    supported_ui_features\n                  }\n            }\n        }\n    }\n}\n`;\n\nexport const TaskFromUIButton = ({callback_id, ui_feature, parameters, onTasked}) =>{\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState([]);\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + callback_id);\n            }\n            onTasked();\n        },\n        onError: data => {\n            console.error(data);\n            onTasked();\n        }\n    });\n    const {data: callbackData} = useQuery(getLoadedCommandsQuery, {\n        variables: {callback_id: callback_id, ui_feature: \"%\" + ui_feature + \"%\"},\n        onCompleted: (data) => {\n            const availableCommands = data.callback_by_pk.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.callback_by_pk.payload.payloadtype.commands.reduce( (prev, cur) => {\n                return [...prev, cur];\n            }, [...availableCommands]);\n            setFileBrowserCommands(finalCommands);\n            if(finalCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support the \" + ui_feature + \" feature\");\n            }else if(finalCommands.length === 1){\n                setSelectedCommand({...finalCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: callback_id, command: cmd, params: parameters, files}});\n    }\n    useEffect( () => {\n        if(selectedCommand.commandparameters === undefined){\n            return;\n        }\n        if(selectedCommand.commandparameters.length > 0){\n            if(parameters === undefined || parameters === null){\n                setOpenParametersDialog(true);\n            }else{\n                createTask({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters}});\n            }\n        }else{\n            if(parameters === undefined || parameters === null){\n                createTask({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: \"\"}});\n            }else{\n                createTask({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters}});\n            }\n            \n        }\n    }, [selectedCommand])\n    return (\n        <div>\n            {openSelectCommandDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                        onClose={()=>{setOpenSelectCommandDialog(false);}} \n                        innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                            onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                            action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                    />\n            }\n            {openParametersDialog &&\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                onClose={()=>{setOpenParametersDialog(false);}} \n                innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={callback_id} payloadtype_id={callbackData.callback_by_pk.payload.payloadtype.id}\n                    operation_id={callbackData.callback_by_pk.operation_id} \n                    onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n            />\n            }\n        </div>\n    )\n}\n","import React, {useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport { MythicViewJSONAsTableDialog, MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport {TaskFromUIButton} from './TaskFromUIButton';\n\nconst ResponseDisplayTableStringCell = ({cellData, rowData}) => {\n  return (\n    <div style={{...cellData[\"cellStyle\"]}}>\n      {cellData[\"plaintext\"]}\n    </div>\n          \n  )\n}\nconst getStringSize = ({cellData}) => {\n  try{\n      // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n      let bytes = parseInt(cellData[\"plaintext\"]);\n      if (cellData[\"plaintext\"] === ''){\n        return (\n          <div style={{...cellData[\"cellStyle\"]}}>\n          </div>\n        )\n      }\n      if (bytes === 0){\n        return (\n          <div style={{...cellData[\"cellStyle\"]}}>\n            {\"0 Bytes\"}\n          </div>\n        )\n      };\n      const decimals = 2;\n      const k = 1024;\n      const dm = decimals < 0 ? 0 : decimals;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      const size = parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n      return (\n        <div style={{...cellData[\"cellStyle\"]}}>\n          {size}\n        </div>\n      )\n  }catch(error){\n    return (\n      <div style={{...cellData[\"cellStyle\"]}}>\n        {cellData[\"plaintext\"]}\n      </div>\n    )\n  }\n}\nconst ResponseDisplayTableSizeCell = ({cellData}) => {\n  \n  return (\n          getStringSize({cellData})\n  )\n}\nconst ResponseDisplayTableActionCell = ({cellData, callback_id, rowData}) => {\n  const [openButton, setOpenButton] = React.useState(false);\n  const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n  const theme = useTheme();\n  return (\n    <div style={{...cellData[\"cellStyle\"]}}>\n      {cellData.plaintext ? cellData.plaintext : null}\n      {cellData.button ? (\n        <React.Fragment>\n          {cellData.button.type.toLowerCase() === \"dictionary\" ? (\n            <React.Fragment>\n              <Button size=\"small\" title=\"Display Data\"\n                variant=\"contained\" color=\"primary\" onClick={() => setOpenButton(true)} disabled={cellData.button.disabled}>{cellData.button.name}</Button>\n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openButton} \n                        onClose={()=>{setOpenButton(false);}} \n                        innerDialog={<MythicViewJSONAsTableDialog title={cellData.button.title} leftColumn={cellData.button.leftColumnTitle} \n                        rightColumn={cellData.button.rightColumnTitle} value={cellData.button.value} onClose={()=>{setOpenButton(false);}} />}\n                    />\n            </React.Fragment>\n          ) : (\n            <React.Fragment>\n               {cellData.button.type.toLowerCase() === \"task\" ? (\n                 <React.Fragment>\n                   <Button size=\"small\" title=\"Issues a task\"\n                    onClick={() => setOpenTaskingButton(true)} disabled={cellData.button.disabled} variant=\"contained\" color=\"secondary\" >{cellData.button.name}</Button>\n                   {openTaskingButton && \n                      <TaskFromUIButton ui_feature={cellData.button.ui_feature} \n                        callback_id={callback_id} \n                        parameters={cellData.button.parameters}\n                        onTasked={() => setOpenTaskingButton(false)}/>\n                    }\n                </React.Fragment>\n               ) : (null)}\n            </React.Fragment>\n          )}\n          \n        </React.Fragment>\n        \n      ) : (null)}\n    </div>\n  )\n}\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n  const DisplayData = () => {\n    switch(columnData.format){\n      case \"string\":\n        return <ResponseDisplayTableStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n      case \"size\":\n        return <ResponseDisplayTableSizeCell cellData={rowData[dataKey]} rowData={rowData}/>\n      case \"button\":\n        return <ResponseDisplayTableActionCell callback_id={columnData.callback_id} cellData={rowData[dataKey]} rowData={rowData}/>\n      default:\n        return <ResponseDisplayTableStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n    }\n  };\n  return (\n    DisplayData()\n  )\n}\nconst noRowsRender = () => {\n  return (\n    <div>NO DATA</div>\n  )\n}\n\nexport const ResponseDisplayTable = ({table, callback_id}) =>{\n  const theme = useTheme();\n  const [allHeaders, setAllHeaders] = React.useState([]);\n  const allData = React.useRef([]);\n  const [sortBy, setSortBy] = React.useState(\"\");\n  const [headerWidths, setHeaderWidths] = React.useState({});\n  const widthRef = React.useRef(null);\n  const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n  const rowStyle =  ({index}) => {\n    if(index < 0){\n      return {backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main};\n    }\n    return allData.current[index][\"rowStyle\"] || {};\n  };\n  const sortTable = ({sortBy, sortDirection}) => {\n    const tmpData = [...allData.current];\n    const sortType = table.headers.filter( h => h[\"plaintext\"] === sortBy)[0][\"type\"];\n    if(sortType === \"number\" || sortType === \"size\"){\n      tmpData.sort((a, b) => (parseInt(a[sortBy][\"plaintext\"]) > parseInt(b[sortBy][\"plaintext\"]) ? 1 : -1));\n    }else if(sortType === \"date\"){\n      tmpData.sort((a,b) => ( (new Date(a[sortBy][\"plaintext\"])) > (new Date(b[sortBy][\"plaintext\"])) ? 1: -1));\n    }else{\n      tmpData.sort( (a, b) => a[sortBy][\"plaintext\"] > b[sortBy][\"plaintext\"] ? 1 : -1);\n    }\n    if(sortDirection === \"DESC\"){\n      tmpData.reverse();\n    }\n    allData.current = [...tmpData];\n    setSortBy(sortBy);\n    setSortDirection(sortDirection);\n\n  };\n  const rowGetter = ({index}) => {\n    return allData.current[index];\n  };\n  const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const prevWidths = {...headerWidths};\n    const percentDelta = deltaX / widthRef.current.offsetWidth;\n    let nextHeader = \"\";\n    for(let i = 0; i < table.headers.length; i++){\n      //console.log(\"testing\", table.headers[i][\"plaintext\"], dataKey);\n      if(table.headers[i][\"plaintext\"] === dataKey){\n        if(i+1 < table.headers.length){\n          nextHeader = table.headers[i+1][\"plaintext\"];\n        }\n      }\n    }\n    if(nextHeader === \"\"){\n      console.log(\"next header not found\");\n      return;\n    }\n    const updatedWidths = {...prevWidths, \n      [dataKey]: prevWidths[dataKey] + percentDelta,\n      [nextHeader]: prevWidths[nextHeader] - percentDelta\n    };\n    setHeaderWidths(updatedWidths);\n  }, [headerWidths]);\n  const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n    return (\n      <React.Fragment key={\"header\" + dataKey}>\n        <span style={{alignContent: \"center\", display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n          {label}\n          {sortBy === label ? (\n            sortDirection === \"ASC\" ? (\n              <ArrowDownwardIcon />\n            ) : (\n              <ArrowUpwardIcon />\n            )\n          ) :(null) }\n        </span>\n        <Draggable\n          axis=\"x\"\n          defaultClassName=\"DragHandle\"\n          defaultClassNameDragging=\"DragHandleActive\"\n          onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n          position={{x:0}}\n          zIndex={999}\n          >\n            <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n        </Draggable>        \n      </React.Fragment>\n    )\n  }, [resizeRow]);\n\n  useEffect( () => {\n    const unSpecifiedWidths = table.headers.reduce( (prev, cur) => {\n      if(cur.width){\n        return prev;\n      }else{\n        return prev + 1;\n      }\n    }, 0);\n    const totalSpecifedWidths = table.headers.reduce( (prev, cur) => {\n      if(cur.width){\n        return prev + cur.width;\n      }else{\n        return prev;\n      }\n    }, 0);\n    const remainingWidths = 100 - totalSpecifedWidths;\n\n    const headerWidthData = table.headers.reduce( (prev, cur) => {\n      return {...prev, [cur[\"plaintext\"]]: ( cur.width ? (cur.width/100) : (remainingWidths / unSpecifiedWidths / 100)  )};\n    }, {});\n    setHeaderWidths({...headerWidthData});\n  }, [table.headers])\n  useEffect( () => {\n    allData.current = [...table.rows];\n  }, [table.rows])\n  useEffect( () => {\n      const headerData = table.headers.map( (header) => {\n        return {\n          dataKey: header[\"plaintext\"],\n          label: header[\"plaintext\"],\n          width: headerWidths[header[\"plaintext\"]] * widthRef.current.offsetWidth,\n          columnData: {format: header[\"type\"] === undefined ? \"string\" : header[\"type\"], callback_id: callback_id},\n          cellRenderer: CellRenderer,\n          headerRenderer: headerRenderer\n        }\n      });\n      setAllHeaders(headerData);\n      if(headerData.length > 0){\n        setSortBy(headerData[0][\"dataKey\"]);\n      }\n  }, [table.headers, headerWidths]);\n\n  return (\n      <React.Fragment>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  {table.title}\n              </Typography>\n          </Paper>\n          <div style={{height: \"calc(45vh)\", width: \"100%\"}} ref={widthRef}>\n            <AutoSizer>\n              {({height, width}) => (\n                <Table\n                  height={height}\n                  width={width}\n                  headerHeight={25}\n                  noRowsRenderer={noRowsRender}\n                  rowCount={allData.current.length}\n                  rowGetter={ rowGetter }\n                  rowHeight={35}\n                  rowStyle={rowStyle}\n                  sort={sortTable}\n                  sortBy={sortBy}\n                  sortDirection={sortDirection}\n                  >\n                    {allHeaders.map( (col) => (\n                      <Column key={\"col\" + col.dataKey} {...col} />\n                    ))}\n                  </Table>\n              )}\n            </AutoSizer>\n            \n          </div>\n      </React.Fragment>\n    \n  )   \n}","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Button } from '@material-ui/core';\n\nexport const ResponseDisplayDownload = (props) =>{\n  return (\n    <React.Fragment>\n      <Tooltip title=\"Download payload\">\n        <IconButton variant=\"contained\" component=\"a\" target=\"_blank\" color=\"primary\" href={\"/api/v1.4/files/download/\" + props.download.agent_file_id} download>\n            <GetAppIcon  />\n        </IconButton>\n      </Tooltip>\n    </React.Fragment>\n  )   \n}","import React, {useEffect} from 'react';\nimport {useSubscription, gql, useLazyQuery } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {ResponseDisplayScreenshot} from './ResponseDisplayScreenshot';\nimport {ResponseDisplayPlaintext} from './ResponseDisplayPlaintext';\nimport {ResponseDisplayTable} from './ResponseDisplayTable';\nimport {ResponseDisplayDownload} from './ResponseDisplayDownload';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { IconButton } from '@material-ui/core';\n\n\nconst subResponsesQuery = gql`\nsubscription subResponsesQuery($task_id: Int!, $fetchLimit: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, limit: $fetchLimit, order_by: {id: desc}) {\n    id\n    response: response_text\n  }\n}`;\nconst getResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $fetchLimit: Int!, $offset: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}, limit: $fetchLimit, offset: $offset, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst taskScript = gql`\nquery getBrowserScriptsQuery($command_id: Int!, $operator_id: Int!, $operation_id: Int!){\n  browserscript(where: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}, operator_id: {_eq: $operator_id}}) {\n    script\n    id\n  }\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}}}) {\n    browserscript {\n      script\n      id\n    }\n  }\n}\n\n`;\n\nexport const ResponseDisplay = (props) =>{\n    const theme = useTheme();\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [output, setOutput] = React.useState(\"\");\n    const [rawResponses, setRawResponses] = React.useState([]);\n    const [browserScriptData, setBrowserScriptData] = React.useState({});\n    const script = React.useRef();\n    const me = useReactiveVar(meState);\n    const [highestFetched, setHighestFetched] = React.useState(0);\n    const [totalFetched, setTotalFetched] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    const {error} = useSubscription(subResponsesQuery, {variables: {task_id: props.task.id, fetchLimit: props.fetchLimit}, fetchPolicy: \"network_only\",\n    onSubscriptionData: ({subscriptionData}) => {\n      if(totalFetched === 0 && subscriptionData.data.response.length === props.fetchLimit){\n        fetchMoreResponses({variables: {task_id: props.task.id, fetchLimit: props.fetchLimit, offset: 0, search: \"%_%\"}});\n        return;\n      }else if(totalFetched >= props.fetchLimit){\n        // we won't display it\n        console.log(\"got more than we can see currently\");\n        return;\n      }else \n      // we still have some room to view more, but only room for fetchLimit - totalFetched \n      if(subscriptionData.data.response.length > 0){\n        const newerResponses = subscriptionData.data.response.filter( r => r.id > highestFetched);\n        newerResponses.sort( (a,b) => a.id > b.id ? 1 : -1);\n        let outputResponses = output;\n        let rawResponseArray = [...rawResponses];\n        let highestFetchedId = highestFetched;\n        let totalFetchedSoFar = totalFetched;\n        for(let i = 0; i < newerResponses.length; i++){\n          if(totalFetchedSoFar < props.fetchLimit){\n            outputResponses += newerResponses[i][\"response\"];\n            rawResponseArray.push(newerResponses[i][\"response\"]);\n            highestFetchedId = newerResponses[i][\"id\"];\n            totalFetchedSoFar += 1;\n          }else{\n            break;\n          }\n        }\n        setOutput(outputResponses);\n        setRawResponses(rawResponseArray);\n        setHighestFetched(highestFetchedId);\n        setTotalFetched(totalFetchedSoFar);\n      }\n    }\n    });\n    useEffect( () => {\n      if(script.current === undefined){\n        setViewBrowserScript(false);\n      }else{\n        setViewBrowserScript(props.viewBrowserScript);\n        if(props.viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, rawResponses);\n            setBrowserScriptData(res);\n          }catch(error){\n            setViewBrowserScript(false);\n          }\n            \n        }\n      }\n    }, [props.viewBrowserScript]);\n    const [fetchScripts] = useLazyQuery(taskScript, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        if(data.browserscriptoperation.length > 0){\n          try{\n            let unb64script = atob(data.browserscriptoperation[0][\"script\"]);\n            //console.log(unb64script);\n            setViewBrowserScript(true);\n          }catch(error){\n            snackActions.error(error.toString());\n            setViewBrowserScript(false);\n          }\n          \n        }else if(data.browserscript.length > 0){\n          \n          try{\n            let unb64script = atob(data.browserscript[0][\"script\"]);\n            let fun = Function('\"use strict\";return(' + unb64script + ')')();\n            script.current = fun;\n            setViewBrowserScript(true);\n            let res = script.current(props.task, rawResponses);\n            setBrowserScriptData(res);\n          }catch(error){\n            snackActions.error(error.toString());\n            setViewBrowserScript(false);\n          }\n        }else{\n          setViewBrowserScript(false);\n        }\n      },\n      onError: (data) => {\n        console.log(data);\n      }\n    });\n    const [fetchMoreResponses] = useLazyQuery(getResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + cur.response;\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched);\n        setHighestFetched(maxID);\n        setOutput(responses);\n        const responseArray = data.response.map( r => r.response);\n        setRawResponses(responseArray);\n        if(viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, responseArray);\n            setBrowserScriptData(res);\n          }catch(error){\n            console.log(error);\n            setViewBrowserScript(false);\n          }\n          \n        }\n        setTotalFetched(data.response.length);\n        if(props.searchText !== \"\" || selectAllOutput){\n          setSelectAllOutput(false);\n          props.changeTotalCount(data.response_aggregate.aggregate.count);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch more responses: \" + data)\n      }\n    })\n    const [fetchAllResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + cur.response;\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched);\n        setHighestFetched(maxID);\n        setOutput(responses);\n        const responseArray = data.response.map( r => r.response);\n        setRawResponses(responseArray);\n        if(viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, responseArray);\n            setBrowserScriptData(res);  \n          }\n          catch(error){\n            setViewBrowserScript(false);\n            console.log(error);\n          }\n        }\n        setTotalFetched(data.response.length);\n        props.changeTotalCount(0);\n      },\n      onError: (data) => {\n\n      }\n    })\n    useEffect( () => {\n      if(props.command_id !== undefined){\n        fetchScripts({variables: {command_id: props.command_id, operator_id: me.user.user_id, operation_id: me.user.current_operation_id}});\n      }\n    }, [props.command_id]);\n    useEffect( () => {\n      if(script.current !== undefined){\n        try{\n          let res = script.current(props.task, rawResponses);\n          setBrowserScriptData(res);\n        }catch(error){\n          setViewBrowserScript(false);\n          console.log(error);\n        }\n        \n      }\n    }, [rawResponses]);\n    useEffect( () => {\n      if(props.searchText === undefined || props.searchText === \"\"){\n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: props.fetchLimit * (props.currentPage - 1),\n          search: \"%_%\"\n        }})\n      }else{  \n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: props.fetchLimit * (props.currentPage - 1),\n          search: \"%\" +  props.searchText + \"%\"\n        }})\n      }\n      \n    }, [props.currentPage]);\n    useEffect( () => {\n      if(props.searchText === undefined || props.searchText === \"\"){\n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: 0,\n          search: \"%_%\"\n        }})\n      }else{  \n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: 0,\n          search: \"%\" + props.searchText + \"%\"\n        }})\n      }\n    }, [props.searchText]);\n    useEffect( () => {\n      if(props.selectAllOutput){\n        setSelectAllOutput(true);\n        fetchAllResponses({variables: {task_id: props.task.id, search: \"%\" + props.searchText + \"%\"}})\n      }else{\n        setHighestFetched(0);\n        setTotalFetched(0);\n        fetchMoreResponses({variables: {task_id: props.task.id, fetchLimit: props.fetchLimit, offset: 0, search: \"%\" + props.searchText + \"%\"}})\n      }\n    }, [props.selectAllOutput]);\n    const onSubmitSearch = React.useCallback( () => {\n      props.onSubmitSearch(search)\n    }, [search]);\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n\n  return (\n    <React.Fragment>\n      {props.searchOutput &&\n        <MythicTextField value={search} onEnter={onSubmitSearch} onChange={(n,v,e) => setSearch(v)} placeholder=\"Search Output of This Task\" name=\"Search...\"\n          InputProps={{\n            endAdornment: \n            <React.Fragment>\n                <Tooltip title=\"Search\">\n                    <IconButton onClick={onSubmitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                </Tooltip>\n            </React.Fragment>,\n            style: {padding: 0}\n        }}\n        ></MythicTextField>\n      }\n      <div style={{overflow: \"auto\", maxWidth: \"100%\", width: \"100%\", maxHeight: \"calc(50vh)\"}}>\n        {viewBrowserScript ? (\n          <React.Fragment>\n              {browserScriptData[\"screenshot\"] &&\n                browserScriptData[\"screenshot\"].map( (scr, index) => (\n                  <ResponseDisplayScreenshot key={\"screenshot\" + index + 'fortask' + props.task.id} {...scr} />\n                ))\n              }\n              {browserScriptData[\"plaintext\"] &&\n                <ResponseDisplayPlaintext plaintext={browserScriptData[\"plaintext\"]} />\n              }\n              {browserScriptData[\"table\"] &&\n                browserScriptData[\"table\"].map( (table, index) => (\n                  <ResponseDisplayTable callback_id={props.task.callback_id} table={table} key={\"tablefortask\" + props.task.id + \"table\" + index} />\n                ))\n                \n              }\n              {browserScriptData[\"download\"] &&\n                browserScriptData[\"download\"].map( (dl, index) => (\n                  <ResponseDisplayDownload download={dl} key={\"download\" + index + \"fortask\" + props.task.id} />\n                ))\n              }\n          </React.Fragment>\n        ) : (\n          <ResponseDisplayPlaintext plaintext={output} />\n        )}\n      </div>\n  </React.Fragment>\n  )\n      \n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($task_id: Int!, $comment: String) {\n  update_task_by_pk(pk_columns: {id: $task_id}, _set: {comment: $comment}) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\n\nexport function TaskCommentDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getCommentQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(data.task_by_pk.comment)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateComment({variables: {task_id: props.task_id, comment: comment}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Comment</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useReactiveVar, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { meState } from '../../../cache';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport NoteAddIcon from '@material-ui/icons/NoteAdd';\nimport { IconButton } from '@material-ui/core';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst addTaskTagMutation = gql`\nmutation addTaskTag ($task_id: Int!, $tag: String!) {\n  insert_tasktag_one(object: {task_id: $task_id, tag: $tag}){\n    id\n  }\n}\n`;\nconst removeTaskTagMutation = gql`\nmutation removeTaskTag($tasktag_id: Int!){\n  delete_tasktag_by_pk(id: $tasktag_id){\n    id\n  }\n}\n`;\nconst getTaskTagsQuery = gql`\nquery getTaskTags ($operation_id: Int!) {\n  tasktag(where: {operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    task_id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\n  \nexport function TaskTagDialog(props) {\n    const [newTag, setNewTag] = useState(\"\");\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getTaskTagsQuery, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n          const currentTags = data.tasktag.reduce( (prev, cur) => {\n            if(cur.task_id === props.task_id){\n              return [...prev, cur];\n            }else{\n              return [...prev];\n            }\n          }, []);\n          const allTags = data.tasktag.reduce( (prev, cur) => {\n            if(prev.find( element => element.tag === cur.tag) || currentTags.find( element => element.tag === cur.tag)){\n              return [...prev];\n            }else{\n              return [...prev, cur];\n            }\n          }, []);\n          \n          setLeft(allTags);\n          setRight(currentTags);\n          setOriginalTags([...currentTags]);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [addTaskTag] = useMutation(addTaskTagMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [removeTaskTag] = useMutation(removeTaskTagMutation, {\n      update: (cache, {data}) => {\n          //console.log(data);\n      }\n  });\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [originalTags, setOriginalTags] = React.useState([]);\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n\n    const handleToggle = (value) => () => {\n      const currentIndex = checked.indexOf(value);\n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((value) => {\n              const labelId = `transfer-list-item-${value.id}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value.id} role=\"listitem\" button onClick={handleToggle(value)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={checked.indexOf(value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value.tag} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onChange = (name, value, error) => {\n        setNewTag(value);\n    }\n    const addNewTag = () => {\n      if(!right.find(element => element.tag === newTag) && !left.find(element => element.tag === newTag)){\n        if(newTag !== \"\"){\n          setRight([...right, {tag: newTag, id: 0, task_id: 0}]);\n        }\n      }\n      setNewTag(\"\");\n    }\n    const setFinalTags = () => {\n\n      originalTags.forEach( (tag) => {\n        // go through the original tags and see if they exist in the right, if so, move on\n        // if the tag doesn't exist, we delete it\n        if(!right.find(element => element.id === tag.id)){\n          removeTaskTag({variables: {tasktag_id: tag.id}});\n        }\n      });\n      right.forEach( (tag) => {\n        // go through the right tags and see if they existed in the original, if so, move on\n        // if the tag doesn't exist, we add it\n        if(!originalTags.find(element => element.id === tag.id)){\n          addTaskTag({variables: {task_id: props.task_id, tag: tag.tag}});\n        }\n      });\n      if(newTag !== \"\"){\n        addTaskTag({variables: {task_id: props.task_id, tag: newTag}});\n      }\n      snackActions.success(\"Updated tags\");\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Tags</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(\"Unused Tags In Operation\", left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                \n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                \n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(\"Applied Tags To Task\", right)}</Grid>\n        </Grid>\n        <MythicTextField autoFocus multiline={false} name=\"Add New Tag...\" onChange={onChange} value={newTag} style={{display:\"inline-block\"}} \n          InputProps={{\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton style={{color: muiTheme.palette.success.main}} variant=\"contained\" onClick={addNewTag}><NoteAddIcon/></IconButton>\n                    </React.Fragment>\n                }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { useSnackbar } from 'notistack';\n\nconst updateOpsecRequestMutation = gql`\nmutation requestOpsecBypass ($task_id: Int!) {\n    requestOpsecBypass(task_id: $task_id){\n        status\n        error\n    }\n}\n`;\nconst getOpsecQuery = gql`\nquery getOPSECQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    opsec_pre_blocked\n    opsec_pre_message\n    opsec_pre_bypassed\n    opsec_pre_bypass_user{\n        username\n        id\n    }\n    opsec_post_blocked\n    opsec_pre_bypass_role\n    opsec_post_message\n    opsec_post_bypassed\n    opsec_post_bypass_role\n    opsec_post_bypass_user{\n        username\n        id\n    }\n    id\n  }\n}\n`;\n\nexport function TaskOpsecDialog(props) {\n    const [opsecMessage, setOpsecMessage] = useState(\"\");\n    const [opsecData, setOpsecData] = useState({});\n    const { enqueueSnackbar } = useSnackbar();\n    const { loading, error } = useQuery(getOpsecQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let message = \"OPSEC PreCheck Message\";\n            console.log(data);\n            if(data.task_by_pk.opsec_pre_bypass_user !== null){\n                message += \" (bypassed by \" + data.task_by_pk.opsec_pre_bypass_user.username + \")\";\n            }\n            message += \":\\n\\n\" + data.task_by_pk.opsec_pre_message + \"\\n\";\n            if(data.task_by_pk.opsec_post_blocked){\n                message += \"\\nOPSEC PostCheck Message\";\n                if(data.task_by_pk.opsec_post_bypass_user !== null){\n                    message += \" (bypassed by \" + data.task_by_pk.opsec_post_bypass_user.username + \")\";\n                }\n                message += \":\\n\\n\" + data.task_by_pk.opsec_post_message + \"\\n\";\n                \n            }\n            setOpsecData(data.task_by_pk);\n            setOpsecMessage(message);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateOpsecRequest] = useMutation(updateOpsecRequestMutation, {\n        update: (cache, {data}) => {\n            if(data.requestOpsecBypass.status === \"success\"){\n                enqueueSnackbar(\"Bypass processed successfully\", {variant: \"success\"});\n            }else{\n                enqueueSnackbar(data.requestOpsecBypass.error, {variant: \"warning\"});\n            }\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onRequestSubmit = () => {\n       console.log(props.task_id);\n        updateOpsecRequest({variables: {task_id: props.task_id}});\n        props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Request OPSEC Bypass</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={opsecMessage} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          {(opsecData.opsec_pre_blocked === true && !opsecData.opsec_pre_bypassed) || (opsecData.opsec_post_blocked === true && !opsecData.opsec_post_bypassed) ?\n          (\n            <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Submit Bypass Request</Button>\n          ) : (null) }\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    display_params\n    original_params\n    params\n    id\n  }\n}\n`;\n\nexport function TaskViewParametersDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(\"Original Parameters:\\n\" + data.task_by_pk.original_params + \"\\n\\nAgent Parameters:\\n\" + data.task_by_pk.params + \"\\n\\nDisplay Parameters:\\n\" + data.task_by_pk.display_params);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    stdout\n    stderr\n    id\n  }\n}\n`;\n\nexport function TaskViewStdoutStderrDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(\"[STDOUT]:\\n\" + data.task_by_pk.stdout + \"\\n\\[STDERR]:\\n\" + data.task_by_pk.stderr);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Typography } from '@material-ui/core';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const allTokenDataFragment = gql`\nfragment allTokenData on token {\n    id\n    Address\n    AppContainer\n    AppContainerNumber\n    AppContainerSid\n    AppId\n    AppModelPolicies\n    AppModelPolicyDictionary\n    AttributesFlags\n    AuditPolicy\n    AuthenticationId_id\n    BnoIsolationPrefix\n    CanSynchronize\n    Capabilities\n    CreationTime\n    DefaultDacl\n    DenyOnlyGroups\n    DeviceClaimAttributes\n    DeviceGroups\n    Elevated\n    ElevationType\n    EnabledGroups\n    ExpirationTime\n    Filtered\n    Flags\n    FullPath\n    GrantedAccess\n    GrantedAccessGeneric\n    GrantedAccessMask\n    GroupCount\n    Groups\n    Handle\n    HandleReferenceCount\n    HasRestrictions\n    ImpersonationLevel\n    Inherit\n    IntegrityLevel\n    IntegrityLevelSid\n    IsClosed\n    IsContainer\n    IsPseudoToken\n    IsRestricted\n    IsSandbox\n    LogonSid\n    LowPrivilegeAppContainer\n    MandatoryPolicy\n    ModifiedId\n    Name\n    NoChildProcess\n    NotLow\n    NtType\n    NtTypeName\n    Origin\n    Owner\n    PackageFullName\n    PackageIdentity\n    PackageName\n    PointerReferenceCount\n    PrimaryGroup\n    PrivateNamespace\n    Privileges\n    ProcessUniqueAttribute\n    ProtectFromClose\n    Restricted\n    RestrictedDeviceClaimAttributes\n    RestrictedDeviceGroups\n    RestrictedSids\n    RestrictedSidsCount\n    RestrictedUserClaimAttributes\n    SandboxInert\n    Sddl\n    SecurityAttributes\n    SecurityDescriptor\n    SessionId\n    Source\n    ThreadID\n    TokenId\n    TokenType\n    TrustLevel\n    UIAccess\n    User\n    UserClaimAttributes\n    VirtualizationAllowed\n    VirtualizationEnabled\n    WriteRestricted\n    task_id\n    logonsession {\n      id\n      LogonId\n      UserName\n      LogonDomain\n      LogonType\n      SessionId\n      Sid\n      LogonTime\n      LogonServer\n      DnsDomainName\n      Upn\n      UserFlags\n      LastSuccessfulLogon\n      LastFailedLogon\n      FailedAttemptCountSinceLastSuccessfulLogon\n      LogonScript\n      ProfilePath\n      HomeDirectory\n      HomeDirectoryDrive\n      LogoffTime\n      KickOffTime\n      PasswordLastSet\n      PasswordCanChange\n      PasswordMustChange\n      task_id\n      authenticationpackages {\n        id\n        Name\n        task_id\n      }\n    }\n}\n`;\nconst getTokenInfo = gql`\n${allTokenDataFragment}\nquery getTokenInfo ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    ...allTokenData\n  }\n}\n`;\n\nexport function TaskTokenDialog(props) {\n    const theme = useTheme();\n    const [tokenData, setTokenData] = useState([]);\n    const [logonsessionData, setLogonSessionData] = useState([]);\n    const [authenticationData, setAuthenticationData] = useState([]);\n    const tokenKeys = [\n        \"Address\",\n        \"AppContainer\",\n        \"AppContainerNumber\",\n        \"AppContainerSid\",\n        \"AppId\",\n        \"AppModelPolicies\",\n        \"AppModelPolicyDictionary\",\n        \"AttributesFlags\",\n        \"AuditPolicy\",\n        \"AuthenticationId_id\",\n        \"BnoIsolationPrefix\",\n        \"CanSynchronize\",\n        \"Capabilities\",\n        \"CreationTime\",\n        \"DefaultDacl\",\n        \"DenyOnlyGroups\",\n        \"DeviceClaimAttributes\",\n        \"DeviceGroups\",\n        \"Elevated\",\n        \"ElevationType\",\n        \"EnabledGroups\",\n        \"ExpirationTime\",\n        \"Filtered\",\n        \"Flags\",\n        \"FullPath\",\n        \"GrantedAccess\",\n        \"GrantedAccessGeneric\",\n        \"GrantedAccessMask\",\n        \"GroupCount\",\n        \"Groups\",\n        \"Handle\",\n        \"HandleReferenceCount\",\n        \"HasRestrictions\",\n        \"ImpersonationLevel\",\n        \"Inherit\",\n        \"IntegrityLevel\",\n        \"IntegrityLevelSid\",\n        \"IsClosed\",\n        \"IsContainer\",\n        \"IsPseudoToken\",\n        \"IsRestricted\",\n        \"IsSandbox\",\n        \"LogonSid\",\n        \"LowPrivilegeAppContainer\",\n        \"MandatoryPolicy\",\n        \"ModifiedId\",\n        \"Name\",\n        \"NoChildProcess\",\n        \"NotLow\",\n        \"NtType\",\n        \"NtTypeName\",\n        \"Origin\",\n        \"Owner\",\n        \"PackageFullName\",\n        \"PackageIdentity\",\n        \"PackageName\",\n        \"PointerReferenceCount\",\n        \"PrimaryGroup\",\n        \"PrivateNamespace\",\n        \"Privileges\",\n        \"ProcessUniqueAttribute\",\n        \"ProtectFromClose\",\n        \"Restricted\",\n        \"RestrictedDeviceClaimAttributes\",\n        \"RestrictedDeviceGroups\",\n        \"RestrictedSids\",\n        \"RestrictedSidsCount\",\n        \"RestrictedUserClaimAttributes\",\n        \"SandboxInert\",\n        \"Sddl\",\n        \"SecurityAttributes\",\n        \"SecurityDescriptor\",\n        \"SessionId\",\n        \"Source\",\n        \"ThreadID\",\n        \"TokenId\",\n        \"TokenType\",\n        \"TrustLevel\",\n        \"UIAccess\",\n        \"User\",\n        \"UserClaimAttributes\",\n        \"VirtualizationAllowed\",\n        \"VirtualizationEnabled\",\n        \"WriteRestricted\",\n        \"task_id\"\n    ]\n    const logonsessionKeys = [\n      \"LogonId\",\n      \"UserName\",\n      \"LogonDomain\",\n      \"LogonType\",\n      \"SessionId\",\n      \"Sid\",\n      \"LogonTime\",\n      \"LogonServer\",\n      \"DnsDomainName\",\n      \"Upn\",\n      \"UserFlags\",\n      \"LastSuccessfulLogon\",\n      \"LastFailedLogon\",\n      \"FailedAttemptCountSinceLastSuccessfulLogon\",\n      \"LogonScript\",\n      \"ProfilePath\",\n      \"HomeDirectory\",\n      \"HomeDirectoryDrive\",\n      \"LogoffTime\",\n      \"KickOffTime\",\n      \"PasswordLastSet\",\n      \"PasswordCanChange\",\n      \"PasswordMustChange\",\n      \"task_id\"\n    ]\n    const authenticationpackageKeys = [\n      \"Name\",\n      \"task_id\"\n    ]\n    useQuery(getTokenInfo, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            if(data.token_by_pk !== null){\n                setTokenData(data.token_by_pk);\n                const reducedTokenData = tokenKeys.reduce( (prev, key) => {\n                  if(data.token_by_pk[key] !== undefined && data.token_by_pk[key] !== null && data.token_by_pk[key] !== \"\"){\n                    return [...prev, {\"name\": key, \"value\": data.token_by_pk[key]}]\n                  }\n                  else{\n                    return [...prev];\n                  }\n                }, []);\n                setTokenData(reducedTokenData);\n                if(data.token_by_pk.logonsession !== null){\n                  const reducedLogonSessionData = logonsessionKeys.reduce( (prev, key) => {\n                    if(data.token_by_pk.logonsession[key] !== undefined && data.token_by_pk.logonsession[key] !== null && data.token_by_pk.logonsession[key] !== \"\"){\n                      return [...prev, {\"name\": key, \"value\": data.token_by_pk.logonsession[key]}]\n                    }\n                    else{\n                      return [...prev];\n                    }\n                  }, []);\n                  setLogonSessionData(reducedLogonSessionData);\n                  if (data.token_by_pk.logonsession.authenticationpackages.length > 0){\n                    const reducedAuthenticationData = data.token_by_pk.logonsession.authenticationpackages.map( (pkg) => {\n                      const packageData = authenticationpackageKeys.reduce( (prev, key) => {\n                        if(pkg[key] !== undefined && pkg[key] !== null && pkg[key] !== \"\"){\n                          return [...prev, {\"name\": key, \"value\": pkg[key]}];\n                        }else{\n                          return [...prev];\n                        }\n                      }, []);\n                      return packageData;\n                    })\n                    \n                    setAuthenticationData(reducedAuthenticationData);\n                  }\n                }\n                \n            }\n        },\n        onError: data => {\n            snackActions.error(data)\n        },\n        fetchPolicy: \"network-only\"\n    });\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Token Information</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Token Data\n              </Typography>\n            </Paper>\n          <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n            <TableContainer component={Paper} className=\"mythicElement\">\n              <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>Token Property</TableCell>\n                            <TableCell>Token Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {tokenData.map( (element, index) => (\n                        <TableRow key={'row' + index}>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                </Table>\n              </TableContainer>\n          </Paper>\n        \n        {logonsessionData.length > 0 &&\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Associated Logon Session Data\n              </Typography>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n              <TableContainer component={Paper} className=\"mythicElement\">\n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                      <TableHead>\n                          <TableRow>\n                              <TableCell>Logon Session Property</TableCell>\n                              <TableCell>Logon Session Value</TableCell>\n                          </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {logonsessionData.map( (element, index) => (\n                          <TableRow key={'logondatarow' + index}>\n                            <TableCell>{element.name}</TableCell>\n                            <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                  </Table>\n                </TableContainer>\n            </Paper>\n          </React.Fragment>\n        }\n        {authenticationData.map( authpkg => (\n            <React.Fragment key={\"authpkg\" + authpkg.id}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Associated Authentication Package\n                </Typography>\n              </Paper>\n              \n              <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n                <TableContainer component={Paper} className=\"mythicElement\">\n                  <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>Authentication Package Property</TableCell>\n                                <TableCell>Authentication Package Value</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {authpkg.map( (element, index) => (\n                            <TableRow key={'authpackage' + authpkg.id + \"row\" + index}>\n                              <TableCell>{element.name}</TableCell>\n                              <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                            </TableRow>\n                          ))}\n                        </TableBody>\n                    </Table>\n                  </TableContainer>\n              </Paper>\n            </React.Fragment>\n        ))\n        }\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport { ButtonGroup, Button} from '@material-ui/core';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport {ResponseDisplay} from './ResponseDisplay';\nimport RateReviewOutlinedIcon from '@material-ui/icons/RateReviewOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskCommentDialog} from './TaskCommentDialog';\nimport {TaskTagDialog} from './TaskTagDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport {TaskOpsecDialog} from './TaskOpsecDialog';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {TaskViewParametersDialog} from './TaskViewParametersDialog';\nimport {TaskViewStdoutStderrDialog} from './TaskViewStdoutStderrDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport LocalOfferOutlinedIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CodeIcon from '@material-ui/icons/Code';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport {TaskTokenDialog} from './TaskTokenDialog';\nimport Grid from '@material-ui/core/Grid';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport {gql, useMutation, useLazyQuery } from '@apollo/client';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBook} from '@fortawesome/free-solid-svg-icons';\nimport { faExternalLinkAlt, faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst ReissueTaskMutationGQL = gql`\nmutation reissueTaskMutation($task_id: Int!){\n  reissue_task(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst ReissueTaskHandlerMutationGQL = gql`\nmutation reissueTaskHandlerMutation($task_id: Int!){\n  reissue_task_handler(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n}`;\nconst ToggleButtonInButtonGroup = React.forwardRef( ({disableElevation, fullWidth, children, ref, ...others}) => {\n  return (\n    <ToggleButton {...others} ref={ref}>{children}</ToggleButton>\n  )\n});\n  \n\nexport const TaskDisplayContainer = ({task}) => {\n    const theme = useTheme();\n    const [totalCount, setTotalcount] = React.useState(0);\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [openCommentDialog, setOpenCommentDialog] = React.useState(false);\n    const [openTokenDialog, setOpenTokenDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openStdoutStderrDialog, setOpenStdoutStderrDialog] = React.useState(false);\n    const [openOpsecDialog, setOpenOpsecDialog] = React.useState(false);\n    const [openTaskTagDialog, setOpenTaskTagDialog] = React.useState(false);\n    const [commandID, setCommandID] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchOutput, setSearchOutput] = React.useState(false);\n    const [fetchLimit, setFetchLimit] = React.useState(10);\n    const [currentPage, setCurrentPage] = React.useState(1);\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    const [downloadResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n          const output = data.response.reduce( (prev, cur) => {\n            return prev + cur.response;\n          }, \"\");\n          const dataBlob = new Blob([output], {type: 'text/plain'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = \"task_\" + task.id + \".txt\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = \"task_\" + task.id + \".txt\";\n            document.body.appendChild(element);\n            element.click();\n          }\n      },\n      onError: (data) => {\n\n      }\n    })\n    const [reissueTask] = useMutation(ReissueTaskMutationGQL, {\n      onCompleted: data => {\n        if(data.reissue_task.status === \"success\"){\n          snackActions.success(\"Successfully re-issued task to Mythic\");\n        }else{\n          snackActions.error(\"Failed to re-issue task to Mythic: \" + data.reissue_task.error);\n        }\n      },  \n      onError: data => {\n        console.log(data);\n        snackActions.error(\"Failed to re-issue task: \" + data);\n      }\n    });\n    const [reissueTaskHandler] = useMutation(ReissueTaskHandlerMutationGQL, {\n      onCompleted: data => {\n        if(data.reissue_task_handler.status === \"success\"){\n          snackActions.success(\"Successfully resubmitted task for handling\");\n        }else{\n          snackActions.warning(\"Failed to resubmit task for handling: \" + data.reissue_task_handler.error);\n        }\n        \n      },\n      onError: data => {\n        console.log(data);\n        snackActions.error(\"Error resubmitting task for handling: \" + data);\n      }\n    });\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(task.original_params);\n        if(result){\n          snackActions.success(\"Copied text!\");\n        }else{\n          snackActions.error(\"Failed to copy text\");\n        }\n    }\n    const onReissueTask = () => {\n      reissueTask({variables: {task_id: task.id}});\n    }\n    const onReissueTaskHandler = () => {\n      reissueTaskHandler({variables: {task_id: task.id}});\n    }\n    useEffect( () => {\n        setCommandID(task.command === null ? 0 : task.command.id);\n        if(task.responses_aggregate !== undefined){\n          setTotalcount(task.responses_aggregate.aggregate.count);  \n        }\n    }, [task.command, task.responses_aggregate]);\n    const onSubmitSearch = ( value) => {\n      setSearch(value);\n      if(value === \"\"){\n        if(task.responses_aggregate !== undefined){\n          setTotalcount(task.responses_aggregate.aggregate.count);  \n        }else{\n          setTotalcount(0);\n        }\n      }\n      setCurrentPage(1);\n    }\n    const onChangePage = (event, value) => {\n      setCurrentPage(value);\n    }\n    const changeTotalCount = React.useCallback( (newTotal) => {\n      setTotalcount(newTotal);\n      setCurrentPage(1);\n    }, []);\n    const onDownloadResponses = () => {\n      downloadResponses({variables: {task_id: task.id}})\n    }\n    return (\n      <React.Fragment>\n        <Grid container spacing={0} style={{maxWidth: \"100%\"}}>\n            <Grid item xs={1} style={{maxWidth: \"5rem\"}}>\n              <ButtonGroup size=\"large\" color=\"primary\" orientation=\"vertical\">\n              \n                <Tooltip title=\"Toggle BrowserScript\">\n                <ToggleButtonInButtonGroup size=\"small\" color=\"primary\" value=\"view browserscript\"\n                    onChange={() => {setViewBrowserScript(!viewBrowserScript)}} selected={viewBrowserScript} ><CodeIcon/>\n                  </ToggleButtonInButtonGroup>\n                </Tooltip>\n                <Tooltip title=\"Fetch All Output\">\n                  <ToggleButtonInButtonGroup size=\"small\" color=\"primary\" value=\"fetchAllOutput\"\n                    onChange={() => {setSelectAllOutput(!selectAllOutput)}} selected={selectAllOutput} >\n                      <FontAwesomeIcon icon={faExpandArrowsAlt} size=\"lg\" />\n                  </ToggleButtonInButtonGroup>\n                </Tooltip>\n                <Tooltip title=\"Search Task Output\">\n                  <ToggleButtonInButtonGroup size=\"small\" color=\"primary\" value=\"searchOutput\"\n                    onChange={() => {setSearchOutput(!searchOutput)}} selected={searchOutput} >\n                     <SearchIcon />\n                  </ToggleButtonInButtonGroup>\n                </Tooltip>\n                <Tooltip title=\"Download output\"><Button onClick={onDownloadResponses} color=\"primary\"><GetAppIcon/></Button></Tooltip>\n                <Tooltip title=\"Edit Tags\"><Button color=\"primary\" onClick={()=>{setOpenTaskTagDialog(true);}}><LocalOfferOutlinedIcon/></Button></Tooltip>\n                <Tooltip title=\"Link Task\">\n                  <Button color=\"primary\" href={'/new/task/' + task.id} target=\"_blank\" \n                    onClick={()=> {window.open('/new/task/' + task.id, \"_blank\")}}>\n                      <FontAwesomeIcon icon={faExternalLinkAlt} size=\"lg\" />\n                    </Button></Tooltip>\n                <Tooltip title=\"Copy original params to clipboard\"><Button color=\"primary\" onClick={copyToClipboard}><FileCopyOutlinedIcon/></Button></Tooltip>\n                <Tooltip title=\"Edit Comment\"><Button color=\"primary\" onClick={()=>{setOpenCommentDialog(true);}}><RateReviewOutlinedIcon/></Button></Tooltip>\n                <Tooltip title=\"View All Parameters\"><Button color=\"primary\" onClick={()=>{setOpenParametersDialog(true);}}><KeyboardIcon/></Button></Tooltip>\n                <Tooltip title=\"View Stdout/Stderr of Task\">\n                  <Button color=\"primary\" onClick={()=>{setOpenStdoutStderrDialog(true);}}>\n                    <FontAwesomeIcon icon={faBook} size=\"lg\" />\n                  </Button>\n                </Tooltip>\n                {task.opsec_pre_blocked === null ? (\n                  null\n                ) : (  task.opsec_pre_bypassed === false ? (\n                          <Tooltip title=\"Submit OPSEC PreCheck Bypass Request\"><Button style={{color: theme.palette.error.main}} onClick={()=>{setOpenOpsecDialog(true);}}><LockIcon/></Button></Tooltip>\n                      ) : (\n                          <Tooltip title=\"View OPSEC PreCheck Data\"><Button style={{color: theme.palette.success.main}} onClick={()=>{setOpenOpsecDialog(true);}}><LockOpenIcon/></Button></Tooltip>\n                      )             \n                  ) \n                }\n                {task.opsec_post_blocked === null ? (\n                  null\n                ) : (  task.opsec_post_bypassed === false ? (\n                          <Tooltip title=\"Submit OPSEC PostCheck Bypass Request\"><Button style={{color: theme.palette.error.main}} onClick={()=>{setOpenOpsecDialog(true);}}><LockIcon/></Button></Tooltip>\n                      ) : (\n                          <Tooltip title=\"View OPSEC PostCheck Data\"><Button style={{color: theme.palette.success.main}} onClick={()=>{setOpenOpsecDialog(true);}}><LockOpenIcon/></Button></Tooltip>\n                      )             \n                  ) \n                }\n                {task.token === null ? (\n                  null\n                ) : (\n                    <Tooltip title=\"View Token Information\"><Button color=\"primary\" onClick={()=>{setOpenTokenDialog(true);}}><ConfirmationNumberIcon/></Button></Tooltip>\n                )}\n                {task.status.toLowerCase().includes(\"error: container\") ? (\n                  <Tooltip title=\"Resubmit Tasking\"><Button style={{color: theme.palette.warning.main}} onClick={onReissueTask}>\n                    <ReplayIcon />\n                  </Button>\n                  </Tooltip>\n                ) : (null)}\n                {task.status.toLowerCase().includes(\"error: task\") ? (\n                  <Tooltip title=\"Resubmit Task Handler\"><Button style={{color: theme.palette.warning.main}} onClick={onReissueTaskHandler}>\n                    <ReplayIcon />\n                  </Button>\n                  </Tooltip>\n                ) : (null)}\n              </ButtonGroup>\n              {openTokenDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTokenDialog} \n                  onClose={()=>{setOpenTokenDialog(false);}} \n                  innerDialog={<TaskTokenDialog token_id={task.token === undefined ? 0 : task.token.id} onClose={()=>{setOpenTokenDialog(false);}} />}\n              />) : (null)\n              }\n              {openOpsecDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openOpsecDialog} \n                  onClose={()=>{setOpenOpsecDialog(false);}} \n                  innerDialog={<TaskOpsecDialog task_id={task.id} onClose={()=>{setOpenOpsecDialog(false);}} />}\n              />) : (null)\n              }\n              {openParametersDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                  onClose={()=>{setOpenParametersDialog(false);}} \n                  innerDialog={<TaskViewParametersDialog task_id={task.id} onClose={()=>{setOpenParametersDialog(false);}} />}\n              />) : (null)\n              }\n              {openStdoutStderrDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openStdoutStderrDialog} \n                  onClose={()=>{setOpenStdoutStderrDialog(false);}} \n                  innerDialog={<TaskViewStdoutStderrDialog task_id={task.id} onClose={()=>{setOpenStdoutStderrDialog(false);}} />}\n              />) : (null)\n              }\n              {openTaskTagDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTaskTagDialog} \n                  onClose={()=>{setOpenTaskTagDialog(false);}} \n                  innerDialog={<TaskTagDialog task_id={task.id} onClose={()=>{setOpenTaskTagDialog(false);}} />}\n              />) : (null)\n              }\n              {openCommentDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openCommentDialog} \n                  onClose={()=>{setOpenCommentDialog(false);}} \n                  innerDialog={<TaskCommentDialog task_id={task.id} onClose={()=>{setOpenCommentDialog(false);}} />}\n              />) : (null)\n              }\n            </Grid>\n            <Grid item xs={11}>\n              <ResponseDisplay task={task} command_id={commandID} viewBrowserScript={viewBrowserScript} onSubmitSearch={onSubmitSearch}\n                searchOutput={searchOutput}\n                fetchLimit={fetchLimit} currentPage={currentPage} searchText={search} changeTotalCount={changeTotalCount} selectAllOutput={selectAllOutput}/>\n            </Grid>\n            <Grid item xs={12} >\n              <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingBottom: \"10px\"}} >\n                {selectAllOutput ? (null) : (\n                  <React.Fragment>\n                    <Pagination count={Math.ceil(totalCount / fetchLimit)} page={currentPage} variant=\"outlined\" color=\"primary\" boundaryCount={2} onChange={onChangePage} />\n                    <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n                  </React.Fragment>\n                )}\n                  \n              </div>\n            </Grid>\n        </Grid>\n      </React.Fragment>\n\t\t\t\t          \n    )\n}","import React, {useEffect, useRef} from 'react';\nimport {Button, IconButton} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles, fade, withStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChatOutlinedIcon from '@material-ui/icons/ChatOutlined';\nimport Badge from '@material-ui/core/Badge';\nimport {useTheme} from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {TaskDisplayContainer} from './TaskDisplayContainer';\n\nexport const taskDisplayFragment = gql`\nfragment taskData on task {\n  comment\n  callback_id\n  commentOperator{\n      username\n  }\n  completed\n  id\n  operator{\n      username\n  }\n  original_params\n  display_params\n  status\n  timestamp\n  command {\n    cmd\n    id\n  }\n  responses_aggregate {\n    aggregate{\n      count\n      max {\n        timestamp\n      }\n    }\n  }\n  opsec_pre_blocked\n  opsec_pre_bypassed\n  opsec_post_blocked\n  opsec_post_bypassed\n  tasks {\n      id\n  }\n  token {\n    id\n  }\n}\n`;\nconst getSubTaskingQuery = gql`\n${taskDisplayFragment}\nquery getSubTasking($task_id: Int!){\n    task(where: {parent_task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n        ...taskData\n  }\n}\n `;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"3px\",\n    marginBottom: \"2px\",\n    marginLeft: \"3px\",\n    marginRight: \"0px\",\n    height: \"auto\",\n    width: \"99%\"\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    whiteSpace: \"pre-line\"\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    overflow: \"auto\", \n    display: \"block\", \n    textOverflow: \"ellipsis\", \n    wordBreak: \"break-all\",\n    maxWidth: \"100%\", \n  },\n  taskAndTimeDisplay: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n    overflow: \"hidden\", \n    display: \"block\", \n    textOverflow: \"ellipsis\", \n    maxWidth: \"100%\", \n    whiteSpace: \"nowrap\"\n  },\n  secondaryHeadingExpanded: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    display: \"block\", \n    overflow: \"auto\",\n    maxWidth: \"100%\", \n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  icon: {\n    verticalAlign: 'middle',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n    marginRight: 0\n  },\n  column: {\n    padding: \"0 5px 0 0\",\n    display: \"inline-block\",\n    margin: 0,\n    height: \"auto\"\n  },\n}));\nconst accordionUseStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: 0,\n    height: \"auto\",\n    width: \"100%\",\n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  content: {\n    margin: 0,\n    height: \"100%\",\n    padding: 0,\n  },\n  expandIcon: {\n    margin: 0,\n  },\n  expanded: {\n    marginRight: 0\n  }\n}));\nfunction MinusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z\" />\n    </SvgIcon>\n  );\n}\nfunction PlusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z\" />\n    </SvgIcon>\n  );\n}\n\nconst StyledTreeItem = withStyles((theme) => ({\n  root: {\n    marginRight: 0,\n    paddingRight: 0,\n    width: \"100%\"\n  },\n  iconContainer: {\n    '& .close': {\n      opacity: 0.3,\n    },\n  },\n  group: {\n    marginLeft: 7,\n    paddingLeft: 18,\n    borderLeft: `1px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n  },\n}))((props) => <TreeItem {...props}  />); \n\nfunction TaskDisplayPreMemo({task, filterOptions}){\n    \n    const classes = useStyles();\n    const [nodesSelected, setNodesSelected] = React.useState([]);\n\n    const toggleTaskTree = React.useCallback((task_id, selected) => {\n    \tif(selected){\n    \t\t// we want to add our treenode to the list if it's not there already\n    \t\tif(nodesSelected.includes(\"treenode:\" + task_id)){\n    \t\t\treturn;\n    \t\t}\n    \t\tsetNodesSelected([...nodesSelected, \"treenode:\" + task_id]);\n    \t}else{\n    \t\t// we want to remove our treenode from the list if it's there\n    \t\tconst newSelection = nodesSelected.reduce( (prev, cur) => {\n\t\t\t\tif(cur === \"treenode:\" + task_id){\n\t\t\t\t\treturn [...prev];\n\t\t\t\t}\n\t\t\t\treturn [...prev, cur];\n    \t\t}, [])\n    \t\tsetNodesSelected(newSelection);\n    \t}\n    }, [nodesSelected]);\n  return (\n  \t<TreeView className={classes.root}\n  \t\texpanded={nodesSelected}\n\t>\n\t\t<TaskRow task={task} filterOptions={filterOptions} nodesSelected={nodesSelected} toggleSelection={toggleTaskTree} />\n    </TreeView>\n  );\n};\nexport const TaskDisplay = React.memo(TaskDisplayPreMemo);\n\nconst TaskStatusDisplay = ({task, theme}) => {\n  if(task.status.toLowerCase().includes(\"error\")){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.error.main}}>{task.status}</Button>)\n  }else if(task.status === \"cleared\"){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.warning.main}}>Cleared</Button>)\n  }else if(task.completed){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.success.main}}>Completed</Button>)\n  }else if(task.status === \"submitted\"){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.info.main}}>{task.status}</Button>)\n  }else if(task.status === \"processing\"){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.warning.main}}>{task.status}</Button>)\n  }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.warning.main}}>OPSEC Blocked (PRE)</Button>)\n  }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n    return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.warning.main}}>OPSEC Blocked (POST)</Button>)\n  }else{\n      return (<Button size=\"small\" style={{padding: \"0\", color: theme.palette.info.main}}>{task.status}</Button>)\n  }\n}\nconst ColoredTaskDisplay = ({task, theme, children}) => {\n  const [themeColor, setThemeColor] = React.useState(theme.palette.info.main);\n  useEffect( () => {\n    if(task.status.toLowerCase().includes(\"error\")){\n      setThemeColor(theme.palette.error.main);\n    }else if(task.completed){\n      setThemeColor(theme.palette.success.main);\n    }else if(task.status === \"submitted\"){\n      setThemeColor(theme.palette.info.main);\n    }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else{\n      setThemeColor(theme.palette.info.main);\n    }\n  }, [task.status, task.completed])\n    return(\n      <span style={{display: \"flex\", margin: 0, borderWidth: 0, padding: 0, minHeight: \"48px\", alignItems: \"center\", height: \"100%\", borderLeft: \"6px solid \" + themeColor, paddingLeft: \"5px\"}}>\n        {children}\n      </span>\n    )\n}\nconst TaskRow = ({task, filterOptions, nodesSelected, toggleSelection}) => {\n\t  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [isFetchingSubtasks, setIsFetchingSubtasks] = React.useState(false);\n    const [shouldDisplay, setShouldDisplay] = React.useState(true);\n    const [getSubTasking, { startPolling, stopPolling }] = useLazyQuery(getSubTaskingQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n        \tif(nodesSelected.includes(\"treenode:\" + task.id)){\n        \t\tstartPolling(2000);\n        \t}else{\n        \t\tstopPolling();\n        \t\tsetIsFetchingSubtasks(false);\n        \t\treturn;\n        \t}\n        \tsetTaskingData(data);\n        }\n    });\n    const getSubTasks = React.useCallback( (event) => {\n    \tif(!isFetchingSubtasks){\n        \ttoggleSelection(task.id, true);\n        \tsetIsFetchingSubtasks(true);\n    \t\tgetSubTasking({variables: {task_id: task.id} });\n    \t\treturn;\n      }\n      //// we're already fetching subtasks, but just clicked the minus sign, so stop\n      toggleSelection(task.id, false);\n    }, [isFetchingSubtasks]);\n    useEffect( () => {\n      /*props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    }); */\n      if(filterOptions === undefined){\n        if(!shouldDisplay){\n          setShouldDisplay(true);\n        }\n        return;\n      }\n      if(filterOptions[\"operatorsList\"].length > 0){\n        if(!filterOptions[\"operatorsList\"].includes(task.operator.username)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commentsFlag\"]){\n        if(task.comment === \"\"){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commandsList\"].length > 0){\n        // only show these commands\n        if(!filterOptions[\"commandsList\"].includes(task.command.cmd)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"everythingButList\"].length > 0){\n        if(task.command !== null){\n          if(filterOptions[\"everythingButList\"].includes(task.command.cmd)){\n            if(shouldDisplay){\n              setShouldDisplay(false);\n            }\n            return;\n          }\n        }\n      }\n      if(filterOptions[\"parameterString\"] !== \"\"){\n        let regex = new RegExp(filterOptions[\"parameterString\"]);\n        if(!regex.test(task.display_params)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(!shouldDisplay){\n        setShouldDisplay(true);\n      }\n    }, [filterOptions, task.comment, task.command, task.display_params, task.operator.username]);\n    const toggleTaskDropdown = React.useCallback( (event, expanded) => {\n      setDropdownOpen(!dropdownOpen);\n    }, [dropdownOpen]);\n    \n    const onLabelClick = React.useCallback( (evt) => {\n      evt.preventDefault();\n    }, []);\n    return (\n      shouldDisplay ? (\n        <StyledTreeItem nodeId={\"treenode:\" + task.id} \n    \t\tonLabelClick={onLabelClick} \n    \t\tonIconClick={getSubTasks}\n    \t\ticon={\n    \t\t\tnodesSelected.includes(\"treenode:\" + task.id) ? (<MinusSquare />) : (task.tasks.length > 0 ? (<PlusSquare />) : (null) )\n    \t\t}\n    \t\tlabel={\n    \t\t\t<TaskLabel task={task} dropdownOpen={dropdownOpen} toggleTaskDropdown={toggleTaskDropdown}/>\n\t    \t}>\n\t    \t{\n\t    \t\ttaskingData.task.map( (tsk) => (\n    \t\t\t\t<TaskRow key={\"taskrow: \" + tsk.id} task={tsk} nodesSelected={nodesSelected} filterOptions={filterOptions} toggleSelection={toggleSelection}/>\n    \t\t\t))\n\t    \t}\n\t\t</StyledTreeItem>\n      ) : (null)\n    )\n}\n\nconst TaskLabel = ({task, dropdownOpen, toggleTaskDropdown}) => {\n  const [fromNow, setFromNow] = React.useState( (new Date()) );\n  const me = useReactiveVar(meState);\n  const theme = useTheme();\n  const [displayComment, setDisplayComment] = React.useState(false);\n  const [alertBadges, setAlertBadges] = React.useState(0);\n  const classes = useStyles();\n  const accordionClasses = accordionUseStyles();\n  const toggleDisplayComment = (evt) => {\n    evt.stopPropagation();\n    setDisplayComment(!displayComment);\n  }\n  const prevResponseCount = useRef(task.responses_aggregate.aggregate.count);\n  useEffect( () => {\n    //console.log(\"in use effect\", prevResponseCount.current, props.task.responses);\n    if(!dropdownOpen){\n        if(task.responses_aggregate.aggregate.count > prevResponseCount.current){\n              if(task.responses_aggregate.aggregate.count === 1 && ( (new Date(task.responses_aggregate.aggregate.max.timestamp) > fromNow ))){\n                toggleTaskDropdown();\n              }else{\n                setAlertBadges(task.responses_aggregate.aggregate.count - prevResponseCount.current);\n              }\n        }\n    }else{\n      prevResponseCount.current = task.responses_aggregate.aggregate.count;\n      setAlertBadges(0);\n    }\n  }, [task.responses_aggregate.aggregate.count, dropdownOpen]);\n  const scrollContent = (node, isAppearing) => {\n    document.getElementById(`scrolltotask${task.id}`).scrollIntoView({\n      behavior: \"smooth\",\n      block: \"start\",\n      inline: \"start\"\n    })\n  }\n  return(\n    <Paper className={classes.root} elevation={5} style={{marginRight: 0}}>\n      <Accordion TransitionProps={{ unmountOnExit: true, onEntered: scrollContent }} defaultExpanded={false} onChange={toggleTaskDropdown} expanded={dropdownOpen} >\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel1c-content-task-${task.id}`}\n          id=\"panel1c-header\"\n          classes={accordionClasses}\n          \n        >  \n          <ColoredTaskDisplay task={task} theme={theme}>\n              <div id={'scrolltotask' + task.id}>\n                {displayComment ? (\n                    <React.Fragment>\n                        <Typography className={classes.secondaryHeading}>{task.commentOperator.username}</Typography>\n                        <Typography className={classes.heading}>{task.comment}</Typography>\n                    </React.Fragment>\n                  ) : (null)}\n                    <Typography className={classes.taskAndTimeDisplay}>Task: {task.id}, {task.operator.username}, {toLocalTime(task.timestamp, me.user.view_utc_time)}</Typography>\n                  <div>\n                    <div className={classes.column}>\n                        <Badge badgeContent={alertBadges} color=\"secondary\" anchorOrigin={{vertical: 'top', horizontal: 'left'}}>\n                            <TaskStatusDisplay task={task} theme={theme}/>\n                        </Badge>\n                      </div>\n                      {task.comment !== \"\" ? (\n                        <div className={classes.column}>\n                            <IconButton size=\"small\" style={{padding: \"0\"}} color=\"primary\" onClick={toggleDisplayComment}><ChatOutlinedIcon/></IconButton>\n                          </div>\n                      ) : (null)}\n                      <div className={classes.column}>\n                        <Typography className={classes.heading}>{task.command === null ? (task.original_params) : (task.command.cmd)}</Typography>\n                      </div><br/>\n                      <div className={classes.column} >\n                        <Typography className={dropdownOpen ? classes.secondaryHeadingExpanded : classes.secondaryHeading}>{task.command === null ? (null) : (task.display_params)}</Typography>\n                      </div>\n                </div>\n            </div>\n          </ColoredTaskDisplay>\n                        \n        </AccordionSummary>\n\n        <AccordionDetails >\n          \n          <TaskDisplayContainer task={task}/>\n        </AccordionDetails>\n      </Accordion>\n  </Paper>\n  )\n}","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport Chip from '@material-ui/core/Chip';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {useQuery, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\nconst operatorQuery = gql`\nquery operatorQuery($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    operators {\n      username\n      id\n    }\n  }\n}`;\nexport function CallbacksTabsTaskingFilterDialog(props) {\n  const me = useReactiveVar(meState);\n  const [onlyOperators, setOnlyOperators] = React.useState([]);\n  const [operatorUsernames, setOperatorUsernames] = React.useState([]);\n  const [onlyHasComments, setOnlyHasComments] = React.useState(false);\n  const [onlyCommands, setOnlyCommands] = React.useState([]);\n  const [everythingBut, setEverythingBut] = React.useState([]);\n  const [onlyParameters, setOnlyParameters] = React.useState(\"\");\n  const [commandOptions, setCommandOptions] = React.useState([]);\n  const classes = useStyles();\n  useQuery(operatorQuery, {variables: {operation_id: me.user.current_operation_id},\n    onCompleted: (data) => {\n      setOperatorUsernames(data.operation_by_pk.operators.map( (op) => op.username));\n    }\n  });\n  useEffect( () => {\n    if(props.filterOptions[\"operatorsList\"] !== undefined){\n      setOnlyOperators(props.filterOptions[\"operatorsList\"]);\n    }\n    if(props.filterOptions[\"commentsFlag\"] !== undefined){\n      setOnlyHasComments(props.filterOptions[\"commentsFlag\"]);\n    }\n    if(props.filterOptions[\"commandsList\"] !== undefined){\n      setOnlyCommands(props.filterOptions[\"commandsList\"]);\n    }\n    if(props.filterOptions[\"parameterString\"] !== undefined){\n      setOnlyParameters(props.filterOptions[\"parameterString\"]);\n    }\n    if(props.filterOptions[\"everythingButList\"] !== undefined){\n      setEverythingBut(props.filterOptions[\"everythingButList\"]);\n    }\n    if(props.filterCommandOptions){\n      setCommandOptions(props.filterCommandOptions);\n    }\n  }, [props.filterOptions]);\n  const onSubmit = () => {\n    props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    });\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    setOnlyParameters(value);\n  }\n  const handleCommentsChange = (event) => {\n    setOnlyHasComments(event.target.checked);\n  }\n  const handleOperatorChange = (event) => {\n    setOnlyOperators(event.target.value);\n  }\n  const handleOnlyCommandsChange = (event) => {\n    setOnlyCommands(event.target.value);\n    if(event.target.value.length > 0){\n      setEverythingBut([]);\n    }\n  }\n  const handleEverythingButChange = (event) => {\n    setEverythingBut(event.target.value);\n    if(event.target.value.length > 0){\n      setOnlyCommands([]);\n    }\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Filter Which Tasks Are Visible</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Only Show Tasks by the Following Operators</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  multiple\n                  id=\"operator-chip\"\n                  value={onlyOperators}\n                  onChange={handleOperatorChange}\n                  input={<Input />}\n                  renderValue={(selected) => (\n                    <div className={classes.chips}>\n                      {selected.map((value) => (\n                        <Chip key={value} label={value} className={classes.chip} />\n                      ))}\n                    </div>\n                  )}\n                  MenuProps={MenuProps}\n                >\n                  {operatorUsernames.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <Checkbox color=\"primary\" checked={onlyOperators.indexOf(name) > -1} />\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n                Only Show Tasks with Comments: <Switch checked={onlyHasComments} onChange={handleCommentsChange} color=\"primary\" name=\"Only Comments\" inputProps={{'aria-label': 'primary checkbox'}}/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"include-chip-label\">Only Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"include-chip-label\"\n                    multiple\n                    id=\"include-chip\"\n                    value={onlyCommands}\n                    onChange={handleOnlyCommandsChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={onlyCommands.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"exclude-chip-label\">Do Not Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"exclude-chip-label\"\n                    multiple\n                    id=\"exclude-chip\"\n                    value={everythingBut}\n                    onChange={handleEverythingButChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={everythingBut.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <MythicTextField value={onlyParameters} onChange={onChange} name=\"Only Show Tasks with the Following Parameter Regex\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect} from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function CallbacksTabsTaskingInputTokenSelect(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const handleChange = (event) => {\n        setSelected(event.target.value);\n        props.changeSelectedToken(event.target.value);\n      };\n    useEffect( () => {\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }else{\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }\n    }, [props.options]);\n    const renderValue = (value) => {\n      if(value === \"Default Token\"){\n        return \"Default Token\";\n      }\n      if(value.User === null){\n        return value.tokenId;\n      }else{\n        return value.User;\n      }\n    }\n  return (\n      <FormControl style={{maxWidth: \"50%\"}}>\n        <InputLabel ref={inputRef}>Tokens</InputLabel>\n        <Select\n          labelId=\"demo-dialog-select-label\"\n          id=\"demo-dialog-select\"\n          value={selected}\n          onChange={handleChange}\n          variant=\"filled\"\n          renderValue={renderValue}\n          input={<Input style={{width: \"100%\"}}/>}\n        >\n          <MenuItem value={\"Default Token\"} key={0}>Default Token</MenuItem>\n          {options.map( (opt) => (\n              <MenuItem value={opt.token} key={opt.token.id}>{opt.token.User === null ? opt.token.TokenId + \" - \" + opt.token.description : opt.token.User + \" - \" + opt.token.description}</MenuItem>\n          ) )}\n        </Select>\n      </FormControl>\n  );\n}\n\n","import { IconButton } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport React, {useEffect} from 'react';\nimport {TextField} from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CallbacksTabsTaskingFilterDialog} from './CallbacksTabsTaskingFilterDialog';\nimport {CallbacksTabsTaskingInputTokenSelect} from './CallbacksTabsTaskingInputTokenSelect';\nimport {matchSorter} from 'match-sorter';\n\n\nexport function CallbacksTabsTaskingInputPreMemo(props){\n    const [message, setMessage] = React.useState(\"\");\n    const [highlighted, setHighlighted] = React.useState(\"\");\n    const [openAutocomplete, setOpenAutocomplete] = React.useState(false);\n    const [autocompleteOptions, setAutocompleteOptions] = React.useState([]);\n    const [loadedOptions, setLoadedOptions] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [openFilterOptionsDialog, setOpenFilterOptionsDialog] = React.useState(false);\n    const [tokenOptions, setTokenOptions] = React.useState([]);\n    useEffect( () => {\n        const options = props.loadedOptions.reduce( (prev, cur)=>{\n            if(prev.findIndex( e => e.cmd === cur.cmd) === -1){\n                return [...prev, cur];\n            }else{\n                return [...prev];\n            }\n            \n        }, [...props.nonLoadedCommands]);\n        const cmds = options.map( c => c.cmd);\n        setLoadedOptions(cmds);\n        if(props.taskOptions){\n            const prevCmds = props.taskOptions.task.map( (task) => {\n                if(task.command){return task.command.cmd + \" \" + task.original_params;}\n                else{return task.original_params};\n            });\n            const deDup = prevCmds.reduce( (prev, cur) => {\n                if(prev.includes(cur)){return prev}\n                return [...prev, cur]\n            }, []);\n            if(deDup.length !== taskOptions.length){\n                setTaskOptions(deDup);\n            }\n            \n        }else{\n            if(taskOptions.length > 0){\n                setTaskOptions([]);\n            }\n        }\n    }, [props.loadedOptions, props.taskOptions, props.nonLoadedCommands]);\n    const compareDicts = (left, right) => {\n        if(Object.keys(left).length !== Object.keys(right).length){\n            return false;\n        }\n        for(const [key, val] of Object.entries(left)){\n            if(left[key] !== right[key]){\n                return false;\n            }\n        }\n        return true;\n    }\n    useEffect( () => {\n        let updatedAny = false;\n        const updated = props.tokens.reduce( (prev, cur) => {\n            if(cur.callback.id !== props.callback_id){\n                return [...prev];\n            }\n            let found = false;\n            const updatedEntries = prev.map( (element) => {\n                if(element.id === cur.id){\n                    found = true;\n                    updatedAny = compareDicts(cur, element);\n                    return {...cur}\n                }else{\n                    return {...element}\n                }\n            });\n            if(found){\n                return [...updatedEntries]\n            }else{\n                updatedAny = true;\n                return [...updatedEntries, cur];\n            }\n        }, [...tokenOptions]);\n        if(updatedAny){\n            setTokenOptions(updated);\n        }\n    }, [props.tokens])\n    const handleInputChange = (evt, newInputValue) => {\n        if(evt === null){\n            //console.log(\"null inputChange\", newInputValue, \"message\", message);\n            return;\n        }\n        //console.log(\"inputChange\", evt, evt.type, newInputValue);\n        if(evt.type === \"keydown\" && evt.key === \"Enter\"){\n            //console.log(\"seeing enter from input change, letting keydown handle it\");\n            return;\n        }\n        setMessage(newInputValue);\n        if(newInputValue.length > 0 && !openAutocomplete && !newInputValue.includes(\" \")){\n            setAutocompleteOptions(loadedOptions);\n            //console.log(\"opening autocomplete in handleInputChange with value\", newInputValue);\n            setOpenAutocomplete(true);\n        }else if(newInputValue.length === 0){\n            setOpenAutocomplete(false);\n        }\n    }\n    const handleAutocompleteChange = (evt, value) => {\n        //console.log(\"onChange\", evt.type, evt.target.value, value, highlighted);\n        if(evt.type === \"change\"){\n            if(value.length > 0 && !value.includes(\" \")){ \n                if(!openAutocomplete){\n                    //console.log(\"handleAutocompleteChange opening autocomplete\", value);\n                    setOpenAutocomplete(true);\n                    setAutocompleteOptions(loadedOptions);\n                }else if(value.includes(\" \")){\n                    setOpenAutocomplete(false);\n                }\n            }else{\n                setOpenAutocomplete(false);\n                //console.log(\"handleAutocomplteChange setting new taskOptions\");\n                setAutocompleteOptions(taskOptions);\n            }\n        }else if(evt.type === \"keydown\"){\n            if(evt.key === \"Escape\"){\n                setOpenAutocomplete(false);\n                return;\n            }\n            //console.log(\"handleAutocompleteChange\", highlighted, value);\n            if(highlighted !== null && evt.key === \"Enter\" && !value.includes(\" \")){\n                setMessage(highlighted + \" \");\n            }else{\n                setMessage(value);\n            } \n        }else if(evt.type === \"click\"){\n            setMessage(value + \" \");\n            setOpenAutocomplete(false);\n        }else if(evt.type === \"blur\"){\n            evt.preventDefault();\n            evt.stopPropagation();\n            return;\n        }\n        if(evt.target.value.length === 0){\n            setOpenAutocomplete(false);\n            setAutocompleteOptions(loadedOptions);\n        }else if(autocompleteOptions.length === 0){\n            setOpenAutocomplete(false);\n            setAutocompleteOptions(loadedOptions);\n        }\n    }\n    const onKeyDown = (evt) => {\n        //console.log(\"keydown_checker\", evt.key);\n        if(evt.code === \"ArrowUp\" || evt.code === \"ArrowDown\"){\n            if(message.length === 0){\n                //console.log(message, message.length, taskOptions);\n                setAutocompleteOptions(taskOptions);\n                setOpenAutocomplete(true);\n            }\n        }else if(evt.key === \"Tab\" ){\n            if(highlighted !== \"\" && openAutocomplete){\n                const highlight = highlighted;\n                setMessage(highlight + \" \");\n                setHighlighted(\"\");\n                setOpenAutocomplete(false);\n                evt.preventDefault();\n                evt.stopPropagation();\n            }\n        }else if(evt.key === \"Enter\"){\n            if(highlighted !== \"\" && openAutocomplete){\n                const highlight = highlighted;\n                setMessage(highlight + \" \");\n                setHighlighted(\"\");\n                setOpenAutocomplete(false);\n                evt.preventDefault();\n                evt.stopPropagation();\n            }else if(!openAutocomplete){\n                //console.log(\"submiting in onKeyDown\");\n                onSubmitCommandLine(evt);\n            }\n        }\n    }\n    const handleHighlightChange = (event, option, reason) => {\n        //console.log(\"highlight change\", event, option, reason);\n        if(message.includes(\" \")){\n            //console.log(\"message has ' ' in handleHighlightChange\");\n            if(openAutocomplete){\n                //console.log(\"autocomplete is open, closing it\");\n                setOpenAutocomplete(false);\n            }\n        }\n        //console.log(\"handleHighlightChange\", option, highlighted);\n        if(reason !== \"mouse\" && option !== null){\n            //console.log(\"highlight change\", option, highlighted, message, message.includes(\" \"));\n            if(option !== null){\n                setHighlighted(option);\n            }\n        }\n    }\n    const onSubmitCommandLine = (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        setOpenAutocomplete(false);\n        //console.log(\"onSubmitCommandLine\", evt, message);\n        props.onSubmitCommandLine(message);\n        setMessage(\"\");\n        setHighlighted(\"\");\n    }\n    const onClickFilter = () => {\n        setOpenFilterOptionsDialog(true);\n    }\n    const filterOptions = (options, {inputValue}) => matchSorter(options, inputValue);\n    \n    return (\n        <div style={{ position: \"absolute\", top:\"92%\", width: \"100%\"}}>\n            <form onSubmit={onSubmitCommandLine}>\n                <Autocomplete\n                    freeSolo\n                    autoHighlight={true}\n                    open={openAutocomplete}\n                    onOpen={(evt) => {\n                        if(evt.type === \"mousedown\"){\n                            setOpenAutocomplete(false);\n                            return false;\n                        }\n                        if(!message.includes(\" \")){\n                            //console.log(\"opening autocomplete in onOpen with message\", message);\n                            setOpenAutocomplete(true);\n                            return true;\n                        }else{\n                            setOpenAutocomplete(false);\n                            return false;\n                        }\n                    }}\n                    onClose={() => setOpenAutocomplete(false)}\n                    id=\"free-solo-2-demo\"\n                    filterOptions={filterOptions}\n                    disableClearable={true}\n                    disableListWrap={true}\n                    clearOnEscape={true}\n                    inputValue={message}\n                    size=\"small\"\n                    openOnFocus={false}\n                    onHighlightChange={handleHighlightChange}\n                    onChange={handleAutocompleteChange}\n                    options={autocompleteOptions}\n                    onInputChange={handleInputChange}\n                    renderInput={(params) => {\n                        return(\n                          <TextField\n                            {...params}\n                            placeholder={\"Start Typing a Command...\"}\n                            onKeyDown={onKeyDown}                         \n                            size=\"small\"\n                            variant=\"outlined\"\n                            InputProps={{ ...params.InputProps, type: 'search',\n                                endAdornment:\n                                <React.Fragment>\n                                <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitCommandLine}><SendIcon/></IconButton>\n                                <IconButton color=\"secondary\" variant=\"contained\" onClick={onClickFilter}><TuneIcon/></IconButton>\n                                </React.Fragment>,\n                                startAdornment: <React.Fragment>\n                                    {tokenOptions.length > 0 ? (\n                                        <CallbacksTabsTaskingInputTokenSelect options={tokenOptions} changeSelectedToken={props.changeSelectedToken}/>\n                                    ) : (null)}\n                                    \n                                </React.Fragment>\n                           \n                            }}\n                          />\n                        )\n                    }}\n                  />\n              </form>\n              {openFilterOptionsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilterOptionsDialog} \n                    onClose={()=>{setOpenFilterOptionsDialog(false);}} \n                    innerDialog={<CallbacksTabsTaskingFilterDialog filterCommandOptions={loadedOptions} onSubmit={props.onSubmitFilter} filterOptions={props.filterOptions} onClose={()=>{setOpenFilterOptionsDialog(false);}} />}\n                />\n              }\n              \n        </div>  \n    )\n}\nexport const CallbacksTabsTaskingInput = React.memo(CallbacksTabsTaskingInputPreMemo);\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect, useRef, useCallback, useLayoutEffect} from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { TaskDisplay } from './TaskDisplay';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsTaskingInput} from './CallbacksTabsTaskingInput';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { IconButton, Tooltip} from '@material-ui/core';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\n\n\nexport function CallbacksTabsTaskingLabel(props){\n    const [description, setDescription] = React.useState(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription ? props.tabInfo.callbackDescription : \"Callback: \" + props.tabInfo.callbackID)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else if(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription){\n            setDescription(props.tabInfo.callbackDescription);\n        }else{\n            setDescription(\"Callback: \" + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const taskingDataFragment = gql`\n    fragment taskData on task {\n        comment\n        callback_id\n        commentOperator{\n            username\n        }\n        completed\n        id\n        operator{\n            username\n        }\n        original_params\n        display_params\n        status\n        timestamp\n        command {\n          cmd\n          id\n        }\n        responses_aggregate {\n            aggregate{\n              count\n              max {\n                timestamp\n              }\n            }\n          }\n        opsec_pre_blocked\n        opsec_pre_bypassed\n        opsec_post_blocked\n        opsec_post_bypassed\n        tasks {\n            id\n        }\n        token {\n            id\n        }\n    }\n`;\nconst GetLoadedCommandsSubscription = gql`\nsubscription GetLoadedCommandsSubscription($callback_id: Int!){\n    loadedcommands(where: {callback_id: {_eq: $callback_id}}){\n        id\n        command {\n            cmd\n            help_cmd\n            description\n            id\n            needs_admin\n            payload_type_id\n            attributes\n            commandparameters {\n                id\n                type \n            }\n        }\n    }\n    \n}\n`;\nconst GetLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($payloadtype: String!) {\n  command(where: {payloadtype: {ptype: {_eq: $payloadtype}}, script_only: {_eq: true}, deleted: {_eq: false}}){\n      id\n      cmd\n      help_cmd\n      description\n      needs_admin\n      attributes\n      payload_type_id\n      commandparameters {\n          id\n          type\n      }\n    }\n}\n`;\nexport const createTaskingMutation = gql`\nmutation createTasking($callback_id: Int!, $command: String!, $params: String!, $files: String, $token_id: Int) {\n  createTask(callback_id: $callback_id, command: $command, params: $params, files: $files, token: $token_id) {\n    status\n    id\n    error\n  }\n}\n`;\n// this is to listen for the latest taskings\nconst fetchLimit = 10;\nconst getTaskingQuery = gql`\n${taskingDataFragment}\nsubscription getTasking($callback_id: Int!, $fromNow: timestamp!){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}, timestamp: {_gt: $fromNow}}, order_by: {id: desc}, limit: 10) {\n        ...taskData\n    }\n}\n `;\nconst getNextBatchTaskingQuery = gql`\n${taskingDataFragment}\nquery getBatchTasking($callback_id: Int!, $offset: Int!, $fetchLimit: Int!){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}}, order_by: {id: desc}, limit: $fetchLimit, offset: $offset) {\n        ...taskData\n    }\n}\n`;\nexport const CallbacksTabsTaskingPanel = ({tabInfo, callbacktokens, index, value, style}) =>{\n    const [commands, setCommands] = React.useState([]);\n    const [nonLoadedCommands, setNonLoadedCommands] = React.useState([]);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [commandInfo, setCommandInfo] = React.useState({});\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const taskingDataRef = React.useRef({task: []});\n    const [fromNow, setFromNow] = React.useState((new Date()).toISOString());\n    const [selectedToken, setSelectedToken] = React.useState({});\n    const [filterOptions, setFilterOptions] = React.useState({\n        \"operatorsList\": [],\n        \"commentsFlag\": false,\n        \"commandsList\": [],\n        \"parameterString\": \"\",\n        \"everythingButList\": []\n    });\n    const loader = useRef(null);\n    const [canScroll, setCanScroll] = React.useState(true);\n    useEffect( () => {\n        taskingDataRef.current = taskingData;\n    }, [taskingData]);\n    const [fetched, setFetched] = React.useState(false);\n    const [fetchedAllTasks, setFetchedAllTasks] = React.useState(false);\n    const messagesEndRef = useRef(null);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Task created\", {autoHideDuration: 1000});\n            }\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [getLoadedCommands ] = useLazyQuery(GetLoadedCommandsQuery, {\n        onCompleted: data => {\n            const allCmds = data.command.reduce( (prev, cur) => {\n                if(prev.includes(cur.cmd)){\n                    return [...prev];\n                }else{\n                    const attributes = JSON.parse(cur.attributes);\n                    if(attributes[\"supported_os\"].length === 0 || attributes[\"supported_os\"].includes(tabInfo.os)){\n                        return [...prev, cur];\n                    }else{\n                        return [...prev];\n                    }\n                }\n            }, []);\n            allCmds.sort((a, b) => -b.cmd.localeCompare(a.cmd));\n            setNonLoadedCommands(allCmds);\n        },\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    useSubscription(GetLoadedCommandsSubscription, {\n        variables: {callback_id: tabInfo.callbackID},\n        onError: data => {\n\n        },\n        onSubscriptionData: ({subscriptionData}) => {\n            const cmds = subscriptionData.data.loadedcommands.reduce( (prev, cur) => {\n                const attributes = JSON.parse(cur.command.attributes);\n                if(attributes[\"supported_os\"].length === 0 || attributes[\"supported_os\"].includes(tabInfo.os)){\n                    return [...prev, cur.command];\n                }else{\n                    return [...prev];\n                }\n            }, [\n                {attributes: {\"supported_os\": []}, commandparameters: [], help: \"clear {all | task#}\", needs_admin: false, cmd: \"clear\", id: -1},\n                {attributes: {\"supported_os\": []}, commandparameters: [], help: \"help {command name}\", needs_admin: false, cmd: \"help\", id: -2},\n                ...nonLoadedCommands\n                ] );\n            cmds.sort((a, b) => -b.cmd.localeCompare(a.cmd));\n            setCommands(cmds);\n        }\n    })\n    const equalTaskTrees = (oldArray, newArray) => {\n        if(oldArray.length !== newArray.length){\n            return false;\n        }\n        for(let i = 0; i < oldArray.length; i++){\n            if(oldArray[i].comment !== newArray[i].comment){\n                return false;\n            }\n            if(oldArray[i].commentOperator !== newArray[i].commentOperator){\n                return false;\n            }\n            if(oldArray[i].completed !== newArray[i].completed){\n                return false;\n            }\n            if(oldArray[i].display_params !== newArray[i].display_params){\n                return false;\n            }\n            if(oldArray[i].original_params !== newArray[i].original_params){\n                return false;\n            }\n            if(oldArray[i].status !== newArray[i].status){\n                return false;\n            }\n            if(oldArray[i].timestamp !== newArray[i].timestamp){\n                return false;\n            }\n            if(oldArray[i].responses_aggregate.aggregate.count !== newArray[i].responses_aggregate.aggregate.count){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_blocked !== newArray[i].opsec_pre_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_bypassed !== newArray[i].opsec_pre_bypassed){\n                return false;\n            }\n            if(oldArray[i].opsec_post_blocked !== newArray[i].opsec_post_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_post_bypassed !== newArray[i].opsec_post_bypassed){\n                return false;\n            }\n            if(oldArray[i].tasks.length !== newArray[i].tasks.length){\n                return false;\n            }\n        }\n        return true;\n    }\n    const subscriptionDataCallback = useCallback( ({subscriptionData}) => {\n        if(!fetched){\n            setFetched(true);\n        }\n        //console.log(subscriptionData);\n        const oldLength = taskingDataRef.current.task.length;\n        const mergedData = subscriptionData.data.task.reduce( (prev, cur) => {\n            const index = prev.findIndex(element => element.id === cur.id);\n            if(index > -1){\n                // need to update an element\n                const updated = prev.map( (element) => {\n                    if(element.id === cur.id){\n                        return cur;\n                    }else{\n                        return element;\n                    }\n                });\n                return updated;\n            }else{\n                return [...prev, cur];\n            }\n        }, [...taskingDataRef.current.task]);\n        mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n        if(!equalTaskTrees(taskingDataRef.current.task, mergedData)){\n            setTaskingData({task: mergedData});\n        }\n        if(mergedData.length > oldLength){\n            setCanScroll(true);\n        }     \n    }, [fetched, setFetched, setCanScroll])\n    useSubscription(getTaskingQuery, {\n        variables: {callback_id: tabInfo.callbackID, fromNow:fromNow},\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"no-cache\",\n        onSubscriptionData: subscriptionDataCallback});\n    const scrollToBottom = useCallback( () => {\n        if(taskingData && messagesEndRef.current){\n            messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n        }\n      }, [taskingData, messagesEndRef]);\n    useLayoutEffect( () => {\n        if(canScroll){\n            scrollToBottom();\n            setCanScroll(false);\n        }\n    }, [canScroll, scrollToBottom]);\n    const [getInfiniteScrollTasking, {loading: loadingMore}] = useLazyQuery(getNextBatchTaskingQuery, {\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: (data) => {\n            let foundNew = false;\n            const mergedData = data.task.reduce( (prev, cur) => {\n                const index = prev.findIndex(element => element.id === cur.id);\n                if(index > -1){\n                    // need to update an element\n                    const updated = prev.map( (element) => {\n                        if(element.id === cur.id){\n                            return cur;\n                        }else{\n                            return element;\n                        }\n                    });\n                    return updated;\n                }else{\n                    foundNew = true;\n                    return [...prev, cur];\n                }\n            }, [...taskingData.task]);\n            mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n            setTaskingData({task: mergedData});    \n            if(!foundNew){\n                snackActions.info(\"No older tasks available\", {autoHideDuration: 1000});\n                setFetchedAllTasks(true);\n            }else{\n                if(data.task.length < fetchLimit){\n                    setFetchedAllTasks(true);\n                }else{\n                    setFetchedAllTasks(false);\n                }\n                snackActions.success(\"Loaded tasks\", {autoHideDuration: 1000});\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    useEffect( () => {\n        getLoadedCommands({variables: {payloadtype: tabInfo.payloadtype}});\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n        setCanScroll(true);\n    }, [])\n    const loadMoreTasks = () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n    }\n    const onSubmitCommandLine = (message) => {\n        const command = message.split(\" \")[0];\n        const params = message.substring(command.length).trim();\n        if(command === \"help\"){\n            return;\n        }\n        const commandParams = commands.find(com => com.cmd === command);\n        if(commandParams === undefined){\n            snackActions.warning(\"Unknown command\", {autoHideDuration: 1000});\n            return; \n        }else if(commandParams.commandparameters.length === 0){\n            // if there are no parameters, just send whatever the user types along\n            onCreateTask({callback_id: tabInfo.callbackID, command: command, params: params});\n        }else{\n            // check if there's a \"file\" component that needs to be displayed\n            const fileParamExists = commandParams.commandparameters.find(param => param.parameter_type === \"File\");\n            if(fileParamExists || params.length === 0){\n                //need to do a popup\n                setCommandInfo({...commandParams, \"typedParameters\": message});\n                setOpenParametersDialog(true);\n                return;\n            }else{\n                onCreateTask({callback_id: tabInfo.callbackID, command: command, params: params});\n            }            \n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        onCreateTask({callback_id: tabInfo.callbackID, command: cmd, params: parameters, files: files});\n    }\n    const onCreateTask = ({callback_id, command, params, files}) => {\n        if(selectedToken.id !== undefined){\n            createTask({variables: {callback_id, command, params, files, token_id: selectedToken.TokenId}});\n        }else{\n            createTask({variables: {callback_id, command, params, files}});\n        }\n    }\n    const onSubmitFilter = (newFilter) => {\n        setFilterOptions(newFilter);\n    }\n    const changeSelectedToken = (token) => {\n        if(token === \"Default Token\"){\n            setSelectedToken(\"Default Token\");\n            return;\n        }\n        if(token.TokenId !== selectedToken.TokenId){\n            setSelectedToken(token);\n        }\n    }\n    return (\n        <MythicTabPanel index={index} value={value} style={style}>\n            <div style={{overflow: \"auto\", height: \"92%\", maxHeight: \"92%\"}}>\n                <div ref={loader} style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n                    {!fetchedAllTasks && <Tooltip title=\"Fetch Older Tasks\"> \n                        <IconButton onClick={loadMoreTasks} variant=\"contained\" color=\"primary\"  ><AutorenewIcon /></IconButton>\n                        </Tooltip>}\n                    {!fetched && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n                    {loadingMore && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n                </div>\n                {\n                    taskingData.task.map( (task) => (\n                        <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} \n                            filterOptions={filterOptions}/>\n                    ))\n                }\n                <div ref={messagesEndRef} />\n            </div>\n            {openParametersDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={commandInfo} callback_id={tabInfo.callbackID} \n                        payloadtype_id={tabInfo.payloadtype_id} operation_id={tabInfo.operation_id} \n                        onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} \n                        />}\n                />\n            }\n            <CallbacksTabsTaskingInput onSubmitFilter={onSubmitFilter} onSubmitCommandLine={onSubmitCommandLine} changeSelectedToken={changeSelectedToken}\n                filterOptions={filterOptions} loadedOptions={commands} nonLoadedCommands={nonLoadedCommands} taskOptions={taskingData} tokens={callbacktokens} callback_id={tabInfo.callbackID}/>\n        </MythicTabPanel>\n    )\n}","import React  from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {ExpandedCallbackSideDetails} from './ExpandedCallbackSideDetails';\nimport  {useParams} from \"react-router-dom\";\nimport {CallbacksTabsTaskingPanel} from '../Callbacks/CallbacksTabsTasking';\nimport { snackActions } from '../../utilities/Snackbar';\n\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    last_checkin\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n    callbacktokens(where: {deleted: {_eq: false}}) {\n      token {\n        TokenId\n        id\n        User\n        description\n      }\n      callback {\n        id\n      }\n      id\n    }\n  }\n}\n `;\n\n\nexport function ExpandedCallback(props){\n    \n    const {callbackId} = useParams();\n    const [callback, setCallbacks] = React.useState({\"payload\": {\"payloadtype\": {\"ptype\": \"\"}}, \"callbacktokens\": []});\n    const [tabInfo, setTabInfo] = React.useState({callbackID: parseInt(callbackId)});\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callbackId}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(subscriptionData.data.callback_by_pk === null){\n            snackActions.error(\"Unknown Callback\");\n            return;\n          }\n          setCallbacks(subscriptionData.data.callback_by_pk);\n          setTabInfo({tabID: \"interact\", tabType: \"interact\", callbackID: parseInt(callbackId), \n          payloadtype: subscriptionData.data.callback_by_pk[\"payload\"][\"payloadtype\"][\"ptype\"],\n          payloadDescription: subscriptionData.data.callback_by_pk[\"payload\"][\"tag\"],\n          callbackDescription: subscriptionData.data.callback_by_pk[\"description\"],\n          os: subscriptionData.data.callback_by_pk[\"payload\"][\"os\"]});\n        }\n    });\n\n    return (\n        <div style={{maxWidth: \"100%\",height: \"calc(96vh)\"}}>\n          {tabInfo.payloadtype !== undefined ? (\n            <React.Fragment>\n              <ExpandedCallbackSideDetails callback={callback} />\n              <CallbacksTabsTaskingPanel style={{height:`calc(${96}vh)`, maxHeight:`calc(${96}vh)`, width:\"69%\", maxWidth: \"69%\", position: \"absolute\", overflow: \"auto\", display: \"inline-flex\", flexDirection: \"column\"}} \n                tabInfo={tabInfo} callbacktokens={callback.callbacktokens}/>\n            </React.Fragment>\n          ) : (\n            <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>Fetching Callback</div>\n          )}\n            \n        </div>\n    );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { red } from '@material-ui/core/colors';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: `100%`,\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n}));\n\nexport function QuickStartCard() {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  return (\n    <Card className={classes.root} elevation={5}>\n      <CardHeader\n        avatar={\n          <Avatar className={classes.avatar}>\n            \n          </Avatar>\n        }\n        title=\"Mythic Quick Start Guide\"\n        subheader=\"Expand this section to learn how to: Generate a Payload, Download the Payload, Get To Callbacks\"\n        style={{paddingBottom: 0, marginBottom: 0}}\n      />\n      <CardActions styl={{padding: 0, margin: 0}}>\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent style={{margin: 0, paddingTop: 0}}>\n          <ol>\n            <li>\n              Create a payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/createpayload\"}>Create -> Create Payload</Link>\n              <ul>\n                <li>Select Desired OS</li>\n                <li>Select Payload Type and Supply Build Parameters</li>\n                <li>Select Commands You Want Stamped Into The Agent</li>\n                <li>Select C2 Profiles and Fill Out Parameters</li>\n                <li>Name Your Payload</li>\n                <li>Provide a Description</li>\n                <li>Build Your Payload</li>\n              </ul>\n            </li>\n            <li>Download Your Payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/payloads\"}>Operational Data -> Payloads</Link></li>\n            <li>Run Your payload\n              <ul>\n                <li>For More Information About Your Agent, Check Out The <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/docs/agents\"}>Internal Documentation</Link></li>\n              </ul>\n            </li>\n            <li>Interact With Your Agent At <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/callbacks\"}>Active Callbacks</Link></li>\n          </ol>\n        </CardContent>\n      </Collapse>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst GetC2ProfilesAndPayloadTypes = gql`\nquery GetC2AndPayloadType {\n  c2profile(where: {deleted: {_eq: false}}) {\n    name\n    id\n  }\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    id\n    payloadtypec2profiles {\n      c2profile {\n        name\n        id\n      }\n    }\n  }\n  wrappers: payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n      }\n    }\n  }\n}\n`;\n\nexport function AgentC2Overview(props){\n    const theme = useTheme();\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [payloadTypeRows, setPayloadTypeRows] = React.useState([]);\n    const [wrappers, setWrappers] = React.useState([]);\n    const { loading } = useQuery(GetC2ProfilesAndPayloadTypes, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const c2Headers = data.c2profile.map( (c2) => c2.name);\n        const payloadRows = data.payloadtype.map( (payload) => {\n          const payloadc2 = payload.payloadtypec2profiles.map( (c2) => {\n            return c2.c2profile.name;\n          })\n          return {ptype: payload.ptype, payloadtypec2profiles: payloadc2 };\n        });\n        c2Headers.sort();\n        payloadRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        const wrapperRows = data.wrappers.map( (payload) => {\n          const wrapped = payload.wrap_these_payload_types.map( (w) => {\n            return w.wrapped.ptype;\n          });\n          return {ptype: payload.ptype, wrapped}\n        });\n        wrapperRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        setWrappers(wrapperRows);\n        setC2Profiles(c2Headers);\n        setPayloadTypeRows(payloadRows);\n      },\n      onError: (data) => {\n\n      }\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    return (\n    <div style={{ marginTop: \"10px\", marginRight: \"5px\"}}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Agent / C2 Overview\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Table  size=\"small\">\n            <TableHead>\n                <TableRow hover>\n                    <TableCell></TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={c2}>{c2}</TableCell>\n                    ))}\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                {payloadTypeRows.map( (payload) => (\n                  <TableRow key={payload.ptype} hover>\n                    <TableCell>{payload.ptype}</TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={'payload' + c2}>\n                        {payload.payloadtypec2profiles.includes(c2) ? \n                        <Tooltip title={payload.ptype + \" supports \" + c2}>\n                            <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                        </Tooltip>\n                     : \"\"}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n        {wrappers.length > 0 && \n          <TableContainer component={Paper} className=\"mythicElement\" style={{marginTop: \"10px\"}}>   \n              <Table  size=\"small\">\n                  <TableHead>\n                      <TableRow hover>\n                          <TableCell></TableCell>\n                          {payloadTypeRows.map( (pt) => (\n                            <TableCell key={'wrapped' + pt.ptype}>{pt.ptype}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                      {wrappers.map( (payload) => (\n                        <TableRow key={'wrapper' + payload.ptype} hover>\n                          <TableCell>{payload.ptype}</TableCell>\n                          {payloadTypeRows.map( (wr) => (\n                            <TableCell key={'payload' + wr.ptype}>\n                              {payload.wrapped.includes(wr.ptype) ? \n                              <Tooltip title={payload.ptype + \" wraps \" + wr.ptype}>\n                                  <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                              </Tooltip>\n                          : \"\"}\n                            </TableCell>\n                          ))}\n                        </TableRow>\n                      ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        }\n      </div>\n    );\n} \n","import React from 'react';\nimport { QuickStartCard } from './QuickStartCard';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {AgentC2Overview} from './AgentC2Overview';\n\n\nexport function Home() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Welcome To Mythic\n      </Typography>\n    </Paper> \n    <QuickStartCard />\n    <AgentC2Overview />\n  </div>\n  );\n}\n","import { Route, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../cache';\n\n\nexport function LoggedInRoute({component, ...rest}){\n    const me = useReactiveVar(meState);\n    return (\n        <Route {...rest} render={(props) => (\n            me.loggedIn && me.user !== null ? (\n                //logged in\n                React.createElement(component, props)\n            ) : (\n                //not logged in\n                <Redirect to={{ \n                    pathname: '/new/login',\n                    state: { from: props.location }\n                }} />\n            )\n        )} />\n    )\n}\n","import React from 'react';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport ComputerIcon from '@material-ui/icons/Computer';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {useTheme} from '@material-ui/core/styles';\nimport {FixedSizeTree} from 'react-vtree';\nimport Autosizer from 'react-virtualized-auto-sizer';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      width: '99%',\n      marginTop: \"3px\",\n      marginBottom: \"2px\",\n      marginLeft: \"3px\",\n      marginRight: \"0px\",\n      height: \"auto\",\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      whiteSpace: \"pre-line\"\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    taskAndTimeDisplay: {\n      fontSize: theme.typography.pxToRem(12),\n      color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    secondaryHeadingExpanded: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      display: \"block\", \n      overflow: \"auto\",\n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"break-word\"\n    },\n    icon: {\n      verticalAlign: 'middle',\n      height: 20,\n      width: 20,\n    },\n    details: {\n      alignItems: 'center',\n    },\n    column: {\n      padding: \"0 5px 0 0\",\n      display: \"inline-block\",\n      margin: 0,\n      height: \"auto\"\n    },\n    paper: {\n        width: '100%',\n        marginBottom: theme.spacing(2),\n      },\n      table: {\n        minWidth: 750,\n      },\n      visuallyHidden: {\n        border: 0,\n        clip: 'rect(0 0 0 0)',\n        height: 1,\n        margin: -1,\n        overflow: 'hidden',\n        padding: 0,\n        position: 'absolute',\n        top: 20,\n        width: 1,\n      },\n  }));\n\nconst getNodeData = (node, nestingLevel, fetchFolderData, setTableData, theme) => ({\n    data: {\n        id: node.id.toString(), // mandatory\n        isLeaf: node.filebrowserobjs === undefined || Object.keys(node.filebrowserobjs).length === 0,\n        isOpenByDefault: true, //mandatory\n        name: node.name_text,\n        nestingLevel,\n        fetchFolderData,\n        setTableData,\n        theme,\n        ...node\n    },\n    nestingLevel,\n    node\n});\nexport const CallbacksTabsFileBrowserTree = ({treeRoot, fetchFolderData, setTableData}) => {\n    const theme = useTheme();\n    function* treeWalker() {\n        for(let i = 0; i < treeRoot.length; i++){\n            yield getNodeData(treeRoot[i], 0, fetchFolderData, setTableData, theme);\n        }\n        while(true){\n            const parent = yield;\n           for( const[key, value] of Object.entries(parent.node.filebrowserobjs)){\n                if(value.is_file){continue}\n                yield getNodeData(value, parent.nestingLevel + 1, fetchFolderData, setTableData, theme);\n           }\n        }\n    }\n    return (\n        treeRoot.length === 0 ? (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No File Browser Data Collected</div>) : (\n            <Autosizer>\n                {({height, width}) => (\n                    <FixedSizeTree\n                        treeWalker={treeWalker}\n                        height={height }\n                        width={width - 10}\n                        itemSize={30}\n                        overscanCount={20}\n                        async\n                        placeholder={<div>Loading....</div>}\n                    >\n                        {FileBrowserNode}\n                    </FixedSizeTree>\n                )}\n            </Autosizer>\n        )\n    )\n}\nconst FileBrowserNode = ({data, isOpen, style, setOpen}) => {\n    \n    return (\n        <div style={{...style, \n                    width: \"calc(100vw)\", display: \"inline-flex\", overflow:\"auto\"}}>\n            {[...Array(data.nestingLevel)].map((o, i) => (\n                <div key={\"folder\" + data.id + \"lines\" + i} style={{borderLeft: `1px dashed ${fade(data.theme.palette.text.primary, 0.4)}`, marginLeft: 15, paddingRight: 15, height: \"100%\", display: \"inline-block\"}}></div>\n            ))}\n            <FileBrowserRow filebrowserobj={data} isOpen={isOpen} setOpen={setOpen}/>\n        </div>\n    )\n    \n}\nconst FileBrowserRow = (props) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const fetchItems = () => {\n        snackActions.info(\"fetching elements...\", {persist: true});\n        props.filebrowserobj.fetchFolderData(props.filebrowserobj);\n        if(!props.isOpen){\n            props.filebrowserobj.fetchFolderData(props.filebrowserobj);\n        }\n        //props.setOpen(!props.isOpen);\n        //props.toggleSelection(props.filebrowserobj.id, !isOpen);\n    }\n    const setTableData = () => {\n        props.filebrowserobj.setTableData(props.filebrowserobj);\n    }\n    const clickIcon = (evt) => {\n        evt.stopPropagation();\n        fetchItems();\n        if(props.isOpen){\n            props.setOpen(!props.isOpen);\n        }else{\n            fetchItems();\n            props.setOpen(!props.isOpen);\n        }\n    }\n    return (\n        <Paper className={classes.root} elevation={5} style={{backgroundColor: theme.body, color: theme.text, alignItems: \"center\", display: \"flex\"}} onClick={setTableData}>\n            {\n                props.filebrowserobj.parent_id === null ? (<ComputerIcon style={{marginLeft: \"3px\", marginRight:\"5px\"}} />) :(\n                props.filebrowserobj.is_file ? (<DescriptionIcon style={{marginLeft: \"3px\", marginRight:\"5px\"}} />) : (\n                    props.isOpen ? (<FolderOpenIcon style={{marginLeft: \"3px\", marginRight:\"5px\", color: props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 0 || props.filebrowserobj.success !== null ? theme.folderColor : \"grey\"}} onClick={clickIcon}/>) : (<FolderIcon style={{paddingTop: \"5px\", marginLeft: \"3px\", marginRight:\"5px\"}} onClick={clickIcon}/>)\n                )\n                )}\n            {props.filebrowserobj.nestingLevel > 0 && props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 99 ? (<Tooltip title=\"Number of known children\">\n                <Badge style={{left: -50}} max={99}\n                    badgeContent={props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count} color=\"primary\" anchorOrigin={{vertical: \"bottom\", horizontal: \"left\"}}></Badge>\n                </Tooltip>) : (null)}\n            <Typography style={{color:props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 0 ||  props.filebrowserobj.success !== null ? theme.palette.text.primary : theme.palette.text.secondary}}>\n                {props.filebrowserobj.parent_id === null ? (props.filebrowserobj.host) : (props.filebrowserobj.name_text)}\n            </Typography>\n            \n            {props.filebrowserobj.success === true && props.filebrowserobj.nestingLevel > 0 ? (\n                <Tooltip title=\"Successfully listed contents of folder\">\n                    <CheckCircleIcon fontSize=\"small\" style={{ color: theme.palette.success.main}}/>\n                </Tooltip>) : (\n                props.filebrowserobj.success === false && props.filebrowserobj.nestingLevel > 0 ? (\n                    <Tooltip title=\"Failed to list contents of folder\">\n                        <ErrorIcon fontSize=\"small\" style={{ color: theme.palette.danger.main}} />\n                    </Tooltip>\n                ) : (\n                    null\n                )\n            )}\n        </Paper>\n    )\n}","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport IconButton from '@material-ui/core/IconButton';\n\nexport function DownloadHistoryDialog(props){\n   const [history, setHistory] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    setHistory(props.value);\n   }, [props.value]);\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"5rem\"}}>Download</TableCell>\n                          <TableCell>Time</TableCell>\n                          <TableCell>Task</TableCell>\n                          <TableCell>Comment</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {history.map( (hist) => (\n                      <TableRow key={'hist' + hist.id}>\n                        <TableCell >{hist.complete ? (\n                          <IconButton href={\"/api/v1.4/files/download/\" + hist.agent_file_id} style={{color: theme.palette.success.main}}><GetAppIcon /></IconButton>\n                        ) : (hist.chunks_received + \"/\" + hist.total_chunks)}</TableCell>\n                        <TableCell>{hist.timestamp}</TableCell>\n                        <TableCell>{hist.task.id}</TableCell>\n                        <TableCell>{hist.task.comment}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n          </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useMutation, useLazyQuery, gql } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog, MythicModifyStringDialog, MythicViewJSONAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Button} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {DownloadHistoryDialog} from './DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { Typography } from '@material-ui/core';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\n\nconst getPermissionsDataQuery = gql`\nquery getPermissionsQuery($filebrowserobj_id: Int!){\n    filebrowserobj_by_pk(id: $filebrowserobj_id){\n        id\n        permissions\n    }\n}\n`;\nconst getFileDownloadHistory = gql`\nquery getFileDownloadHistory($filebrowserobj_id: Int!){\n    filebrowserobj_by_pk(id: $filebrowserobj_id){\n        filemeta {\n            id\n            agent_file_id\n            chunks_received\n            complete\n            total_chunks\n            timestamp\n            task {\n                id\n                comment\n            }\n        }\n    }\n}\n`;\nconst updateFileComment = gql`\nmutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!){\n    update_filebrowserobj_by_pk(pk_columns: {id: $filebrowserobj_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n    const DisplayData = () => {\n        switch(columnData.format){\n        case \"string\":\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n        case \"name\":\n            return <FileBrowserTableRowNameCell cellData={rowData[dataKey]} rowData={rowData} />\n        case \"size\":\n            return <FileBrowserTableRowSizeCell cellData={rowData[dataKey]} />\n        case \"button\":\n            return <FileBrowserTableRowActionCell rowData={rowData} onTaskRowAction={columnData.onTaskRowAction}/>\n        default:\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData} />\n        }\n    };\n    return (\n        DisplayData()\n    )\n}\nexport const CallbacksTabsFileBrowserTable = (props) => {\n    const [allData, setAllData] = React.useState([]);\n    const widthRef = React.useRef(null);\n    const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n    const [sortBy, setSortBy] = React.useState(\"name_text\");\n    const [columnWidths, setColumnWidths] = React.useState({\n        actions: .065,\n        name_text: .45,\n        size: .08,\n        modify_time: .18,\n        comment: .2,\n        \n    })\n    const [columns, setColumns] = React.useState([]);\n    \n    const sortTable = ({sortBy, sortDirection}) => {\n        const tmpData = [...allData];\n        const sortType = columns.filter( h => h.dataKey === sortBy)[0][\"columnData\"][\"format\"];\n        if(sortType === \"number\" || sortType === \"size\"){\n          tmpData.sort((a, b) => (parseInt(a[sortBy]) > parseInt(b[sortBy]) ? 1 : -1));\n        }else if(sortType === \"date\"){\n          tmpData.sort((a,b) => ( (new Date(a[sortBy])) > (new Date(b[sortBy])) ? 1: -1));\n        }else{\n          tmpData.sort( (a, b) => a[sortBy] > b[sortBy] ? 1 : -1);\n        }\n        if(sortDirection === \"DESC\"){\n          tmpData.reverse();\n        }\n        setAllData([...tmpData]);\n        setSortBy(sortBy);\n        setSortDirection(sortDirection);\n    \n    };\n    const rowGetter = ({index}) => {\n        return allData[index];\n    };\n    const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const prevWidths = {...columnWidths};\n        const percentDelta = deltaX / widthRef.current.offsetWidth;\n        let nextHeader = \"\";\n        let getNext = false;\n        for(const [key, val] of Object.entries(columnWidths)){\n            if(getNext){\n                nextHeader = key;\n                break;\n            }else if(key === dataKey){\n                getNext = true;\n            }\n        }\n        if(nextHeader === \"\"){\n            console.log(\"next header not found\");\n            return;\n        }\n        const updatedWidths = {...prevWidths, \n            [dataKey]: prevWidths[dataKey] + percentDelta,\n            [nextHeader]: prevWidths[nextHeader] - percentDelta\n        };\n        setColumnWidths(updatedWidths);\n    }, [columnWidths]);\n    const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n        return (\n          <React.Fragment key={\"header\" + dataKey}>\n            <span style={{display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n              {label}\n              {sortBy === dataKey ? (\n                sortDirection === \"ASC\" ? (\n                  <ArrowDownwardIcon />\n                ) : (\n                  <ArrowUpwardIcon />\n                )\n              ) :(null) }\n            </span>\n            {columnData.format !== \"button\" && label !== \"Comment\" && \n                <Draggable\n                    axis=\"x\"\n                    defaultClassName=\"DragHandle\"\n                    defaultClassNameDragging=\"DragHandleActive\"\n                    onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n                    position={{x:0}}\n                    zIndex={999}\n                    >\n                    <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n                </Draggable>\n            }\n            \n          </React.Fragment>\n        )\n      }, [resizeRow, columns]);\n    const onRowDoubleClick = ({event, index, rowData}) => {\n        if(rowData.is_file){\n            return;\n        }\n        snackActions.info(\"Fetching contents of folder...\");\n        props.onRowDoubleClick(rowData);\n    }\n    useEffect( () => {\n        setColumns([\n            {columnData: {format: \"button\", onTaskRowAction: props.onTaskRowAction}, dataKey: 'actions', label: \"Actions\", \n                cellRenderer: CellRenderer, width: columnWidths.actions * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"name\"}, dataKey: 'name_text', label: \"Name\", \n                cellRenderer: CellRenderer, width: columnWidths.name_text * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"size\"}, dataKey: 'size', label: \"Size\", \n                cellRenderer: CellRenderer, width: columnWidths.size * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"date\"}, dataKey: 'modify_time', label: \"Last Modified\", \n                cellRenderer: CellRenderer,  width: columnWidths.modify_time * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'comment',  label: \"Comment\", \n                cellRenderer: CellRenderer, width: columnWidths.comment * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            \n        ])\n    }, [columnWidths, props.onTaskRowAction]);\n\n    useEffect( () => {\n        //console.log(\"setting selected folder\", props.selectedFolder);\n        if(props.showDeletedFiles){\n            setAllData([...props.selectedFolder]);\n        }else{\n            const filteredData = props.selectedFolder.filter( f => !f.deleted );\n            setAllData([...filteredData]);\n        }\n        \n    }, [props.selectedFolder, props.showDeletedFiles]);\n    \n    return (\n        <div ref={widthRef} style={{width: \"100%\", height: \"90%\", overflow: 'hidden'}}>\n            <AutoSizer>\n                {({height, width}) => (\n                    <Table\n                        headerHeight={25}\n                        rowCount={allData.length}\n                        rowGetter={ rowGetter }\n                        rowHeight={35}\n                        height={height}\n                        width={width}\n                        sort={sortTable}\n                        sortBy={sortBy}\n                        onRowDoubleClick={onRowDoubleClick}\n                        sortDirection={sortDirection}\n                        >\n                        {columns.map( (col) => (\n                            <Column key={\"col\" + col.dataKey} {...col} />\n                        ))}\n                    </Table>\n                )}\n            </AutoSizer>\n        </div>\n    )\n}\nconst FileBrowserTableRowNameCell = ({cellData, rowData}) => {\n    const theme = useTheme();\n    return (\n        <div style={{alignItems: \"center\", display: \"flex\", textDecoration: rowData.deleted ? 'line-through': ''}}>\n            {rowData.is_file ? (<DescriptionIcon style={{marginRight: \"5px\"}}/>) : (<FolderOpenIcon style={{marginRight: \"5px\", color: rowData.filebrowserobjs_aggregate.aggregate.count > 0 || rowData.success !== null ? theme.folderColor : \"grey\"}}/>)}\n            {rowData.filemeta.length > 0 ? (<GetAppIcon style={{color: theme.palette.success.main}}/>) : (null)}\n            <Typography style={{color:rowData.filebrowserobjs_aggregate.aggregate.count > 0 ||  rowData.success !== null ? theme.palette.text.primary : theme.palette.text.secondary}}>\n                {cellData}\n            </Typography>\n            {rowData.success === true ? (\n                <Tooltip title=\"Successfully listed contents of folder\">\n                    <CheckCircleIcon fontSize=\"small\" style={{ color: theme.palette.success.main}}/>\n                </Tooltip>) : (\n                rowData.success === false ? (\n                    <Tooltip title=\"Failed to list contents of folder\">\n                        <ErrorIcon fontSize=\"small\" style={{ color: theme.palette.danger.main}} />\n                    </Tooltip>\n                ) : (\n                    null\n                )\n            )}\n        </div>\n    )\n}\nconst FileBrowserTableRowStringCell = ({cellData}) => {\n    return (\n            cellData\n    )\n}\nconst FileBrowserTableRowSizeCell = ({cellData}) => {\n    const getStringSize = () => {\n        try{\n            // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n            let bytes = parseInt(cellData);\n            if (cellData === '') return '';\n            if (bytes === 0) return '0 Bytes';\n            const decimals = 2;\n            const k = 1024;\n            const dm = decimals < 0 ? 0 : decimals;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n        }catch(error){\n            return cellData;\n        }\n    }\n    return (\n        <div>\n            {getStringSize(cellData)}\n        </div>\n    )\n}\nconst FileBrowserTableRowActionCell = ({rowData, onTaskRowAction}) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [fileCommentDialogOpen, setFileCommentDialogOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState(\"\");\n    const [downloadHistory, setDownloadHistory] = React.useState([]);\n    const [getPermissions] = useLazyQuery(getPermissionsDataQuery, {\n        onCompleted: (data) => {\n            setPermissionData(data.filebrowserobj_by_pk.permissions);\n            if(data.filebrowserobj_by_pk.permissions !== \"\"){\n                setViewPermissionsDialogOpen(true);\n            }else{\n                snackActions.warning(\"No permission data available\");\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getHistory] = useLazyQuery(getFileDownloadHistory, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if(data.filebrowserobj_by_pk.filemeta.length === 0){\n                snackActions.warning(\"File has no download history\");\n            }else{\n                setDownloadHistory(data.filebrowserobj_by_pk.filemeta);\n                setFileHistoryDialogOpen(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    })\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {filebrowserobj_id: rowData.id, comment: comment}})\n    }\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption){\n            case \"A\":\n                optionsA[index].click(event);\n                break;\n            case \"B\":\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n    };\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(rowData.full_path_text);\n        if(result){\n          snackActions.success(\"Copied text!\");\n        }else{\n          snackActions.error(\"Failed to copy text\");\n        }\n    }\n    const optionsA = [{name: 'View Permissions', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getPermissions({variables: {filebrowserobj_id: rowData.id}});\n                    }},\n                    {name: 'Download History', icon: <HistoryIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getHistory({variables: {filebrowserobj_id: rowData.id}});\n                    }},\n                    {name: 'Edit Comment', icon: <EditIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        setFileCommentDialogOpen(true);\n                    }},\n                    {name: 'Copy Path to Clipboard', icon: <FileCopyOutlinedIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        copyToClipboard();\n                    }},\n    ];\n    const optionsB = [{name: 'Task File Listing', icon: <ListIcon style={{paddingRight: \"5px\", color: theme.palette.warning.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"file_browser:list\"\n                        });\n                    }},\n                    {name: 'Task Download', icon: <GetAppIcon style={{paddingRight: \"5px\", color: theme.palette.success.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"file_browser:download\"\n                        });\n                    }},\n                    {name: 'Task File Removal', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"file_browser:remove\"\n                        });\n                        \n                    }},\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{padding:0}} \n                size=\"small\"\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup=\"menu\"\n                onClick={handleDropdownToggle}\n                color=\"primary\"\n                variant=\"contained\"\n                ref={dropdownAnchorRef}\n            >\n                Actions\n            </Button>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4000}}>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                {...TransitionProps}\n                style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n                >\n                <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList id=\"split-button-menu\">\n                        {optionsA.map((option, index) => (\n                        <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(\"A\", event, index)}\n                        >\n                            {option.icon}{option.name}\n                        </MenuItem>\n                        ))}\n                        <Divider />\n                        {optionsB.map((option, index) => (\n                        <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(\"B\", event, index)}\n                        >\n                            {option.icon}{option.name}\n                        </MenuItem>\n                        ))}\n                    </MenuList>\n                    </ClickAwayListener>\n                </Paper>\n                </Grow>\n            )}\n            </Popper>\n            {fileCommentDialogOpen && \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileCommentDialogOpen} \n                    onClose={()=>{setFileCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit File Browser Comment\" onSubmit={onSubmitUpdatedComment} value={rowData.comment} onClose={()=>{setFileCommentDialogOpen(false);}} />}\n                />\n            }\n            {viewPermissionsDialogOpen &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title=\"View Permissions Data\" leftColumn=\"Permission\" rightColumn=\"Value\" value={permissionData} onClose={()=>{setViewPermissionsDialogOpen(false);}} />}\n                />\n            }\n            {fileHistoryDialogOpen &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileHistoryDialogOpen} \n                    onClose={()=>{setFileHistoryDialogOpen(false);}} \n                    innerDialog={<DownloadHistoryDialog title=\"Download History\" value={downloadHistory} onClose={()=>{setFileHistoryDialogOpen(false);}} />}\n                />\n            }\n            \n        </React.Fragment>\n    )\n}\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect, useCallback} from 'react';\nimport {gql, useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useTheme} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsFileBrowserTree} from './CallbacksTabsFileBrowserTree';\nimport {CallbacksTabsFileBrowserTable} from './CallbacksTabsFileBrowserTable';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\n\nconst fileDataFragment = gql`\nfragment fileObjData on filebrowserobj {\n    access_time\n    comment\n    deleted\n    filemeta {\n        id\n    }\n    host\n    id\n    is_file\n    modify_time\n    parent_id\n    size\n    success\n    task {\n        callback {\n            id\n        }\n        operator {\n            id\n        }\n    }\n    full_path_text\n    name_text\n    timestamp\n    parent_path_text\n    filebrowserobjs_aggregate {\n        aggregate {\n            count\n        }   \n    }\n}\n`;\nconst rootFileQuery = gql`\n${fileDataFragment}\nquery myRootFolderQuery($operation_id: Int!) {\n    filebrowserobj(where: {operation_id: {_eq: $operation_id}, parent_id: {_is_null: true}}) {\n      ...fileObjData\n    }\n  }\n`;\nconst folderQuery = gql`\n${fileDataFragment}\nquery myFolderQuery($filebrowserobj_id: Int!, $operation_id: Int!) {\n    filebrowserobj(where: {parent_id: {_eq: $filebrowserobj_id}, operation_id: {_eq: $operation_id}}, order_by: {is_file: asc, name: asc}) {\n      ...fileObjData\n    }\n  }\n`;\nconst fileDataSubscription = gql`\n${fileDataFragment}\nsubscription liveData($now: timestamp!, $operation_id: Int!){\n    filebrowserobj(distinct_on: id, order_by: {id: desc}, where: {timestamp: {_gt: $now}, operation_id: {_eq: $operation_id}}, limit: 1){\n        ...fileObjData\n    }\n}\n`;\nconst getDeltaFilesQuery = gql`\n${fileDataFragment}\nquery myDeltaFilesQuery($lastTime: timestamp!, $now: timestamp!, $operation_id: Int!){\n    filebrowserobj(distinct_on: id, order_by: {id: desc}, where: {_and: [{timestamp: {_gte: $lastTime}}, {timestamp: {_lte: $now}}], operation_id: {_eq: $operation_id}}){\n        ...fileObjData\n    }\n}\n`;\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $payloadtype: String!, $ui_feature: String!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_iregex: $ui_feature}}}) {\n    id\n    command {\n      cmd\n      help_cmd\n      description\n      id\n      needs_admin\n      payload_type_id\n      attributes\n      commandparameters {\n        id\n        type \n      }\n      supported_ui_features\n    }\n  }\n  command(where: {payloadtype: {ptype: {_eq: $payloadtype}}, script_only: {_eq: true}, deleted: {_eq: false}, supported_ui_features: {_iregex: $ui_feature }}){\n      id\n      cmd\n      help_cmd\n      description\n      needs_admin\n      attributes\n      payload_type_id\n      commandparameters {\n          id\n          type\n      }\n      supported_ui_features\n    }\n}\n`;\nconst getCallbackDataQuery = gql`\nquery getCallbackDataQuery($callback_id: Int!){\n    callback_by_pk(id: $callback_id){\n        payload {\n            os\n            payloadtype {\n              ptype\n              id\n            }\n            tag\n            id\n        }\n        id\n        operation_id\n        host\n        active\n    }\n}\n`;\n\nexport function CallbacksTabsFileBrowserLabel(props){\n    const [description, setDescription] = React.useState(\"File Browser: \" + props.tabInfo.callbackID);\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else{\n            setDescription(\"File Browser: \" + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const CallbacksTabsFileBrowserPanel = ({index, value, tabInfo}) =>{\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const selectedFolderDataRef = React.useRef({});\n    const [selectedFolderData, setSelectedFolderData] = React.useState({task: {callback: {id: tabInfo.callbackID}}, host: tabInfo.host, full_path_text: \".\"});\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState({});\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [searchCallback, setSearchCallback] = React.useState({});\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const [uiFeature, setUIFeature] = React.useState(\"\");\n    const currentCallbackIDSetInTable = React.useRef();\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const lastFetchedTime = React.useRef((new Date()).toISOString())\n    const [savedStateForConfirmDialog, setSavedStateForConfirmDialog] = React.useState({});\n    const [showDeletedFiles, setShowDeletedFiles] = React.useState(false);\n    const {subscribeToMore} = useQuery(rootFileQuery, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: (data) => {\n            const roots = data.filebrowserobj.reduce( (prev, cur) => {\n                for( let i = 0; i < prev.length; i++){\n                    if(prev[i][\"host\"] === cur.host){\n                        prev[i].filebrowserobjs.push({...cur, parent_id: cur.host, filebrowserobjs: []});\n                        return [...prev];\n                    }\n                }\n                return [...prev, {...cur, id: cur.host, filebrowserobjs: [{...cur,  parent_id: cur.host, filebrowserobjs: []}]} ]\n            }, []);\n            setFileBrowserRootsState(roots);\n        }, fetchPolicy: \"network-only\"\n    });\n    const [getFileDeltas] = useLazyQuery(getDeltaFilesQuery, {\n        onCompleted: (data) => {\n            let updatingData = [...fileBrowserRoots.current];\n            data.filebrowserobj.forEach( (obj) => {\n                let found = false;\n                if(obj.parent_id === null){\n                    // we could have a new host, a new root, or a n updated root\n                    let foundHost = false;\n                    updatingData.forEach( (root) => {\n                        if(root[\"host\"] === obj[\"host\"]){\n                            foundHost = true;\n                            //console.log(root, obj);\n                            root.filebrowserobjs.forEach( (rootEntry) => {\n                                if(rootEntry[\"name_text\"] === obj[\"name_text\"]){\n                                    found = true;\n                                    rootEntry.comment = obj.comment;\n                                    rootEntry.success = obj.success;\n                                    rootEntry.deleted = obj.deleted;\n                                    rootEntry.filemeta = obj.filemeta;\n                                }\n                            })\n                            \n                        }\n                    });\n                    if(!foundHost){\n                        found = false;\n                    }else if(foundHost && !found){\n                        found = true;\n                        // there's a host entry that matches obj, but this is a new root, so find the match again\n                        updatingData.forEach( (root) => {\n                            if(root[\"host\"] === obj[\"host\"]){\n                                root.filebrowserobjs.push({...obj, parent_id: obj[\"host\"], filebrowserobjs: []});\n                            }\n                        });\n                    }\n                }else{\n                    // parent_id is not null, so it's not a root entry\n                    updatingData.forEach( (root) => {\n                        if(root[\"host\"] === obj[\"host\"]){\n                            found = true;\n                            mergeData(root, obj.parent_id, [obj]);\n                        }\n                    });\n                }\n                if(!found && obj.parent_id === null){\n                    // add a new top-level host entry\n                    updatingData.push({...obj, id: obj[\"host\"], filebrowserobjs: [{...obj, parent_id: obj[\"host\"], filebrowserobjs: []}]});\n                }\n            });\n            setFileBrowserRootsState(updatingData);\n            //console.log(\"updating data\", updatingData, selectedFolderDataRef.current, data.filebrowserobj[0]);\n            if(data.filebrowserobj.length > 0 && selectedFolderDataRef.current.id !== undefined && ( data.filebrowserobj[0].parent_id === selectedFolderDataRef.current.id || ( selectedFolderDataRef.current.host === data.filebrowserobj[0].host) ) ){\n                // this means we got updated data for something in the folder we're currently looking at in the table, so we need to make sure to update the table\n                //console.log(\"updating table\");\n                setSelectedFolder(Object.values(selectedFolderDataRef.current.filebrowserobjs));\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        }\n    })\n    useEffect( () => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState])\n    useEffect( () => {\n        selectedFolderDataRef.current = selectedFolderData;\n    }, [selectedFolderData])\n    const [getFolderData] = useLazyQuery(folderQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"no-cache\",\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n            let found = false;\n            if(data.filebrowserobj.length === 0){\n                snackActions.dismiss();\n                if(selectedFolderData.success === null){\n                    snackActions.info(\"Folder hasn't been listed yet\");\n                }else{\n                    snackActions.info(\"Empty folder\");\n                }\n                setSelectedFolder(Object.values(selectedFolderData.filebrowserobjs));\n                return;\n            }\n            snackActions.dismiss();\n            snackActions.success(\"Fetched data\");\n            const newRoots = fileBrowserRootsState.map( (root) => {\n                if(data.filebrowserobj[0][\"host\"] === root[\"host\"]){\n                    // for each element we get back, add to this root\n                    let workingSet = {...root};\n                    found = true;\n                    mergeData(workingSet, data.filebrowserobj[0].parent_id, data.filebrowserobj);\n                    return workingSet;\n                }else{\n                    return {...root};\n                }\n            });\n            if(!found){\n                // we need to add this as a root element\n                newRoots.push(data.filebrowserobj[0]);\n                mergeData(data.filebrowserobj[0], data.filebrowserobj[0].parent_id, data.filebrowserobj);\n            }\n            //console.log(\"setting new roots\");\n            setFileBrowserRootsState(newRoots);\n            setSelectedFolder(Object.values(selectedFolderData.filebrowserobjs));\n        }\n    });\n    const [getCallbackData] = useLazyQuery(getCallbackDataQuery, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            if(data.callback_by_pk !== null){\n                if(data.callback_by_pk.active){\n                    setSearchCallback({...data.callback_by_pk, \"ui_feature\": \".*\" + uiFeature + \".*\", ...savedStateForConfirmDialog});\n                }else{\n                    snackActions.warning(\"That callback isn't active\");\n                }\n                \n            }else{\n                snackActions.warning(\"Failed to find that Callback\");\n            }\n            setSavedStateForConfirmDialog({});\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch callback data for the specified callback\");\n        }\n    });\n    const mergeData = useCallback( (search, parent_id, all_objects) => {\n        //merge the obj into fileBrowserRoots\n        //console.log('in mergeData');\n        // might need to do a recursive call\n        // if this is a folder with children, check the children\n        if(parent_id === search.id){\n            // iterate for each child we're trying to update/insert\n            //console.log(\"found parent, setting children\");\n            for(let i = 0; i < all_objects.length; i++){\n               if(search.filebrowserobjs[all_objects[i].id] === undefined){\n                search.filebrowserobjs[all_objects[i].id] = {...all_objects[i], filebrowserobjs: {}}\n               }else{\n                search.filebrowserobjs[all_objects[i].id] = {...all_objects[i], filebrowserobjs: search.filebrowserobjs[all_objects[i].id].filebrowserobjs}\n               }\n            }\n            //console.log(\"found parent, set children, returning\");\n            return true;\n        }\n        // this current search isn't all_object's parent, so check search's children for our parent\n       for(const [key, value] of Object.entries(search.filebrowserobjs)){\n           if(all_objects[0].parent_path_text.startsWith(value.full_path_text)){\n               let found = mergeData(value, parent_id, all_objects);\n               if(found){return true};\n           }\n       }\n        return false;\n    }, []);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + searchCallback.id);\n            }\n            setSelectedCommand({});\n            setSearchCallback({});\n            \n            setTaskInfo({});\n            setUIFeature(\"\");\n        },\n        onError: data => {\n            console.error(data);\n            setSelectedCommand({});\n            setSearchCallback({});\n            setTaskInfo({});\n            setUIFeature(\"\");\n        }\n    });\n    const [getCommandOptions] = useLazyQuery(getLoadedCommandsQuery, {\n        onCompleted: (data) => {\n            const availableCommands = data.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.command.reduce( (prev, cur) => {\n                return [...prev, cur];\n            }, [...availableCommands]);\n            setFileBrowserCommands(finalCommands);\n            if(finalCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support that feature\");\n            }else if(finalCommands.length === 1){\n                setSelectedCommand({...finalCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        //console.log(\"useEffect for many things\");\n        if(selectedCommand[\"cmd\"] !== undefined){\n            switch(uiFeature){\n                case \"file_browser:list\":\n                    // static parameters passed\n                    if(taskInfo.path === undefined){\n                        // this is an ls from the top table bar\n                        createTask({variables: {callback_id: searchCallback.id, command: selectedCommand[\"cmd\"], params: JSON.stringify({\n                            \"host\": searchCallback[\"host\"],\n                            \"path\": searchCallback.fullPath,\n                            \"file\": \"\",\n                        })}});\n                    }else{\n                        // this is an ls from the action menu of a row\n                        createTask({variables: {callback_id: currentCallbackIDSetInTable.current, command: selectedCommand[\"cmd\"], params: JSON.stringify({\n                            \"host\": taskInfo.host,\n                            \"path\": taskInfo.path,\n                            \"file\": taskInfo.filename,\n                        })}});\n                    }\n                    break;\n                case \"file_browser:upload\":\n                    // need to do a popup for the user to select the file\n                    setOpenParametersDialog(true);\n                    break;\n                case \"file_browser:download\":\n                    // static parameters passed\n                    // fallsthrough\n                case \"file_browser:remove\":\n                    // static parameters passed\n                    createTask({variables: {callback_id: currentCallbackIDSetInTable.current, command: selectedCommand[\"cmd\"], params: JSON.stringify({\n                        \"host\": taskInfo.host,\n                        \"path\": taskInfo.path,\n                        \"file\": taskInfo.filename,\n                    })}});\n                    break;\n                \n                default:\n                    break;\n            }\n        }\n    }, [selectedCommand, createTask, searchCallback, selectedFolderData.full_path_text, taskInfo.filename, taskInfo.host, taskInfo.path, uiFeature]);\n    useEffect( () => {\n        if(searchCallback.id !== undefined){\n            getCommandOptions({variables: {callback_id: searchCallback.id, payloadtype: searchCallback.payload.payloadtype.ptype, ui_feature: searchCallback.ui_feature}});\n        }\n    }, [searchCallback]);\n    const onSetTableData = useCallback( (filebrowserobj) => {\n        setSelectedFolder(Object.values(filebrowserobj.filebrowserobjs));\n        setSelectedFolderData(filebrowserobj);\n    }, []);\n    const fetchFolderData = useCallback( (filebrowserobj) => {\n        getFolderData({variables: {filebrowserobj_id: filebrowserobj.id, operation_id: me.user.current_operation_id}});\n        setSelectedFolderData(filebrowserobj)\n    }, []);\n    const onListFilesButton = ({callbackID, fullPath}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        setSavedStateForConfirmDialog({fullPath});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"file_browser:list\");\n    }\n    const onUploadFileButton = ({callbackID}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"file_browser:upload\");\n    }\n    const onTaskRowAction = useCallback( ({path, host, filename, uifeature, confirmed}) => {\n        if(uifeature === \"file_browser:remove\" && !confirmed){\n            setSavedStateForConfirmDialog({path, host, filename, uifeature});\n            setOpenConfirmDialog(true);\n        }else{\n            setSavedStateForConfirmDialog({});\n            getCallbackData({variables: {callback_id: currentCallbackIDSetInTable.current}});\n            // clear out commands and re-fetch\n            setFileBrowserCommands([]);\n            setUIFeature(uifeature);\n            setTaskInfo({\n                path, host, filename\n            });\n        }\n    }, []);\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: searchCallback.id, command: cmd, params: parameters, files}});\n    }\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    }\n    const subscribeToMoreCallback = useCallback( (prev, {subscriptionData}) => {\n        if(subscriptionData.data.filebrowserobj.length > 0){\n            getFileDeltas({variables: {operation_id: me.user.current_operation_id, now: (new Date()).toISOString(), lastTime: lastFetchedTime.current}});\n            lastFetchedTime.current = subscriptionData.data.filebrowserobj[0][\"timestamp\"];\n            return;\n        }\n        \n        \n    }, [mergeData]);\n    const toggleShowDeletedFiles = (showStatus) => {\n        setShowDeletedFiles(showStatus);\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            <div style={{maxHeight: \"99%\", overflow: \"auto\", height: \"99%\", width: `calc(31vw)`, display: \"inline-block\"}}>\n                <CallbacksTabsFileBrowserTree showDeletedFiles={showDeletedFiles} treeRoot={fileBrowserRootsState} \n                    fetchFolderData={fetchFolderData} setTableData={onSetTableData} />\n            </div>\n            <div style={{maxHeight: \"99%\", overflow: \"auto\", height: \"99%\", width: `calc(65vw)`, display: \"inline-block\"}}>\n                <FileBrowserTableTop selectedFolderData={selectedFolderData} \n                    onListFilesButton={onListFilesButton} \n                    onUploadFileButton={onUploadFileButton} \n                    onChangeCallbackID={onChangeCallbackID}\n                    toggleShowDeletedFiles={toggleShowDeletedFiles}\n                    initialCallbackID={tabInfo.callbackID}\n                    subscribeToNewFileBrowserObjs={() => subscribeToMore({\n                        document: fileDataSubscription,\n                        variables: {now: (new Date()).toISOString(), operation_id: me.user.current_operation_id},\n                        updateQuery:subscribeToMoreCallback})}/>\n                <CallbacksTabsFileBrowserTable showDeletedFiles={showDeletedFiles} onRowDoubleClick={fetchFolderData}\n                    selectedFolder={selectedFolder} onTaskRowAction={onTaskRowAction}/>\n            </div>\n            {openSelectCommandDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                        onClose={()=>{setOpenSelectCommandDialog(false);}} \n                        innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                            onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                            action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                    />\n            }\n            {openParametersDialog &&\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                onClose={()=>{setOpenParametersDialog(false);}} \n                innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={searchCallback.id} payloadtype_id={searchCallback.payload.payloadtype.id}\n                    operation_id={searchCallback.operation_id} \n                    onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n            />\n            }\n            {openConfirmDialog &&\n                <MythicConfirmDialog onSubmit={() => {onTaskRowAction({...savedStateForConfirmDialog, confirmed: true})}} \n                onClose={()=>{setOpenConfirmDialog(false);}} \n                open={openConfirmDialog}/>\n            }\n            \n        </MythicTabPanel>\n    )\n}\nconst FileBrowserTableTop = ({selectedFolderData, onListFilesButton, initialCallbackID, onUploadFileButton, onChangeCallbackID, subscribeToNewFileBrowserObjs, toggleShowDeletedFiles}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState(\"\");\n    const [fullPath, setFullPath] = React.useState(\"\");\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [showDeletedFiles, setLocalShowDeletedFiles] = React.useState(false);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const onChangeHost = (name, value, error) => {\n        setHostname(value);\n    }\n    const onChangePath = (name, value, error) => {\n        setFullPath(value);\n    }\n    const onChangeID = (name, value, error) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    }\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if(selectedFolderData.task){\n            setCallbackID(selectedFolderData.task.callback.id);\n            \n        }else{\n            setCallbackID(0);\n            onChangeCallbackID(0);\n        }\n    }\n    useEffect( () => {\n        if(selectedFolderData.host !== undefined){\n            setHostname(selectedFolderData.host);\n        }\n        if(selectedFolderData.full_path_text !== undefined){\n            setFullPath(selectedFolderData.full_path_text);\n        }\n        if(!manuallySetCallbackID){\n            if(selectedFolderData.task !== undefined){\n                setCallbackID(selectedFolderData.task.callback.id);\n            }\n            \n        }\n    }, [selectedFolderData, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if(fullPath === \"\"){\n            snackActions.warning(\"Must provide a path to list\");\n            return;\n        }\n        if(callbackID > 0){\n            onListFilesButton({callbackID, fullPath})\n        }else{\n            snackActions.warning(\"Must select a folder or set a callback number first\");\n        }\n    }\n    const onLocalUploadFileButton = () => {\n        if(callbackID > 0){\n            onUploadFileButton({callbackID});\n        }else{\n            snackActions.warning(\"Must select a folder or set a callback number first\");\n        }\n    }\n    useEffect( () => {\n        //console.log(\"useEffect for onChangeCAllbackID\")\n        onChangeCallbackID(callbackID);\n    }, [callbackID])\n    useEffect( () => {\n        subscribeToNewFileBrowserObjs();\n    }, []);\n    const onLocalToggleShowDeletedFiles = () => {\n        setLocalShowDeletedFiles(!showDeletedFiles);\n        toggleShowDeletedFiles(!showDeletedFiles);\n    }\n    return (\n        <Grid container spacing={0} style={{paddingTop: \"10px\"}}>\n            <Grid item xs={4}>\n                <MythicTextField placeholder=\"Host Name\" value={hostname}\n                    onChange={onChangeHost} name=\"Host Name\"/>\n            </Grid>\n            <Grid item xs={7}>\n                    <MythicTextField placeholder=\"Path\" value={fullPath} onEnter={onLocalListFilesButton}\n                        onChange={onChangePath} name=\"Path\" InputProps={{\n                            endAdornment: \n                            <React.Fragment>\n                                <Tooltip title=\"Task callback to list contents\">\n                                    <IconButton style={{padding: \"3px\"}} onClick={onLocalListFilesButton}><RefreshIcon style={{color: theme.palette.info.main}}/></IconButton>\n                                </Tooltip>\n                                <Tooltip title=\"Upload file to folder via callback\">\n                                    <IconButton style={{padding: \"3px\"}} onClick={onLocalUploadFileButton}><CloudUploadIcon style={{color: theme.palette.info.main}}/></IconButton>\n                                </Tooltip>\n                                <Tooltip title={showDeletedFiles ? \"Hide Deleted Files\" : \"Show Deleted Files\"}>\n                                    <IconButton style={{padding: \"3px\"}} onClick={onLocalToggleShowDeletedFiles}>\n                                        {showDeletedFiles ? (\n                                            <VisibilityIcon style={{color: theme.palette.info.main}}/>\n                                        ) : (\n                                            <VisibilityOffIcon style={{color: theme.palette.info.main}}/>\n                                        )}\n                                    </IconButton>\n                                </Tooltip>\n                            </React.Fragment>,\n                            style: {padding: 0}\n                        }}/>\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" placeholder=\"Callback\" name=\"Callback\"\n                    onChange={onChangeID} value={callbackID} InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <Tooltip title=\"Change Callback Based on Data Origin\">\n                                <IconButton style={{padding: \"3px\"}} onClick={revertCallbackID}>\n                                    <LockIcon style={{color: theme.palette.info.main}}/>\n                                </IconButton>\n                            </Tooltip>\n                        ) : (\n                            <Tooltip title=\"Manually Update Callback Number to Prevent Data Origin Tracking\">\n                                <IconButton  style={{padding: \"3px\"}}>\n                                    <RotateLeftIcon disabled style={{color: theme.palette.warning.main}}/> \n                                </IconButton>\n                            </Tooltip>),\n                        style: {padding: 0, margin: 0}\n                    }}/>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, {useCallback} from 'react';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {FixedSizeTree} from 'react-vtree';\nimport Autosizer from 'react-virtualized-auto-sizer';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      width: '99%',\n      marginTop: \"3px\",\n      marginBottom: \"2px\",\n      marginLeft: \"3px\",\n      marginRight: \"0px\",\n      height: \"auto\",\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      whiteSpace: \"pre-line\"\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    taskAndTimeDisplay: {\n      fontSize: theme.typography.pxToRem(12),\n      color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    secondaryHeadingExpanded: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      display: \"block\", \n      overflow: \"auto\",\n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"break-word\"\n    },\n    icon: {\n      verticalAlign: 'middle',\n      height: 20,\n      width: 20,\n    },\n    details: {\n      alignItems: 'center',\n    },\n    column: {\n      padding: \"0 5px 0 0\",\n      display: \"inline-block\",\n      margin: 0,\n      height: \"auto\"\n    },\n    paper: {\n        width: '100%',\n        marginBottom: theme.spacing(2),\n      },\n      table: {\n        minWidth: 750,\n      },\n      visuallyHidden: {\n        border: 0,\n        clip: 'rect(0 0 0 0)',\n        height: 1,\n        margin: -1,\n        overflow: 'hidden',\n        padding: 0,\n        position: 'absolute',\n        top: 20,\n        width: 1,\n      },\n  }));\n\nconst getNodeData = (node, nestingLevel, theme) => ({\n    data: {\n        id: node.id.toString(), // mandatory\n        isLeaf: node.children === undefined || node.children.length === 0,\n        isOpenByDefault: true, //mandatory\n        name: node.name,\n        nestingLevel,\n        theme,\n        ...node\n    },\n    nestingLevel,\n    node\n});\nexport const CallbacksTabsProcessBrowserTree = ({treeRoot, theme}) => {\n    const treeWalker = useCallback(\n        function* treeWalker() {\n            for(let i = 0; i < treeRoot.length; i++){\n                yield getNodeData(treeRoot[i], 0, theme);\n            }\n            while(true){\n                const parent = yield;\n                for(let i = 0; i < parent.node.children.length; i++){\n                    yield getNodeData(parent.node.children[i], parent.nestingLevel + 1, theme);\n                }\n            }\n        }, [treeRoot, theme]);\n    return (\n        treeRoot.length === 0 ? (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Process Listing Data</div>) : (\n            <Autosizer>\n                {({height, width}) => (\n                    <FixedSizeTree\n                        treeWalker={treeWalker}\n                        height={height - 10}\n                        width={width - 10}\n                        itemSize={30}\n                        async\n                        placeholder={<div>Loading....</div>}\n                    >\n                        {FileBrowserNode}\n                    </FixedSizeTree>\n                )}\n            </Autosizer>\n        )\n    )\n}\nconst FileBrowserNode = ({data, isOpen, style, setOpen}) => {\n    return (\n        <div style={{...style, \n                    width: \"calc(100vw)\", display: \"inline-flex\", overflow:\"auto\"}}>\n            {[...Array(data.nestingLevel)].map((o, i) => (\n                <div key={\"folder\" + data.id + \"lines\" + i} style={{borderLeft: `1px dashed ${fade(data.theme.palette.text.primary, 0.4)}`, marginLeft: 15, paddingRight: 15, height: \"100%\", display: \"inline-block\"}}></div>\n            ))}\n            <FileBrowserRow filebrowserobj={data} isOpen={isOpen} setOpen={setOpen}/>\n        </div>\n    )\n    \n}\nconst FileBrowserRow = (props) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    return (\n        <Paper className={classes.root} elevation={5} style={{backgroundColor: theme.body, color: theme.text, alignItems: \"center\", display: \"flex\"}}>\n            <Typography style={{paddingLeft: \"10px\"}}>\n                {props.filebrowserobj.process_id} - {props.filebrowserobj.name}\n            </Typography>\n        </Paper>\n    )\n}","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport { MythicDialog, MythicViewObjectPropertiesAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Button} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\n\nconst getDetailedData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        command_line\n        description\n        signer\n        start_time\n        name\n        bin_path\n    }\n}\n`;\nconst getProcessTokenData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        tokens(where: {deleted: {_eq: false}}) {\n            Address\n            AppContainer\n            AppContainerNumber\n            AppContainerSid\n            AppId\n            AppModelPolicies\n            AppModelPolicyDictionary\n            AttributesFlags\n            AuditPolicy\n            AuthenticationId_id\n            BnoIsolationPrefix\n            CanSynchronize\n            Capabilities\n            CreationTime\n            DefaultDacl\n            DenyOnlyGroups\n            DeviceClaimAttributes\n            DeviceGroups\n            Elevated\n            ElevationType\n            EnabledGroups\n            ExpirationTime\n            Filtered\n            Flags\n            FullPath\n            GrantedAccess\n            GrantedAccessGeneric\n            GrantedAccessMask\n            GroupCount\n            Groups\n            Handle\n            HandleReferenceCount\n            HasRestrictions\n            ImpersonationLevel\n            Inherit\n            IntegrityLevel\n            IntegrityLevelSid\n            IsClosed\n            IsContainer\n            IsPseudoToken\n            IsRestricted\n            IsSandbox\n            LogonSid\n            LowPrivilegeAppContainer\n            MandatoryPolicy\n            ModifiedId\n            Name\n            NoChildProcess\n            NotLow\n            NtType\n            NtTypeName\n            Owner\n            Origin\n            PackageFullName\n            PackageIdentity\n            PackageName\n            PointerReferenceCount\n            PrimaryGroup\n            PrivateNamespace\n            Privileges\n            ProcessUniqueAttribute\n            ProtectFromClose\n            Restricted\n            RestrictedDeviceClaimAttributes\n            RestrictedDeviceGroups\n            RestrictedSids\n            RestrictedSidsCount\n            RestrictedUserClaimAttributes\n            SandboxInert\n            Sddl\n            SecurityAttributes\n            SecurityDescriptor\n            SessionId\n            Source\n            ThreadID\n            TokenId\n            TokenType\n            TrustLevel\n            UIAccess\n            User\n            UserClaimAttributes\n            VirtualizationAllowed\n            VirtualizationEnabled\n            WriteRestricted\n            callbacktokens {\n                callback_id\n            }\n            logonsession {\n                id\n            }\n            task_id\n            timestamp_created\n        }\n    }\n}\n`;\nconst noRowsRender = () => {\n    return (\n        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Data Selected</div>\n    )\n}\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n    const DisplayData = () => {\n        switch(columnData.format){\n        case \"string\":\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n        case \"button\":\n            return <FileBrowserTableRowActionCell rowData={rowData} onTaskRowAction={columnData.onTaskRowAction} os={columnData.os}/>\n        default:\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData} />\n        }\n    };\n    return (\n        DisplayData()\n    )\n}\nexport const CallbacksTabsProcessBrowserTable = (props) => {\n    const widthRef = React.useRef(null);\n    const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n    const [sortBy, setSortBy] = React.useState(\"name\");\n    const [columnWidths, setColumnWidths] = React.useState({\n        actions: .065,\n        parent_process_id: .0714,\n        process_id: .0714,\n        architecture: .06,\n        name: .14,\n        user: .14,\n        bin_path: .40,\n    })\n    const [columns, setColumns] = React.useState([]);\n    \n    const sortTable = ({sortBy, sortDirection}) => {\n        const tmpData = [...allData];\n        const sortType = columns.filter( h => h.dataKey === sortBy)[0][\"columnData\"][\"format\"];\n        if(sortType === \"number\" || sortType === \"size\"){\n          tmpData.sort((a, b) => (parseInt(a[sortBy]) > parseInt(b[sortBy]) ? 1 : -1));\n        }else if(sortType === \"date\"){\n          tmpData.sort((a,b) => ( (new Date(a[sortBy])) > (new Date(b[sortBy])) ? 1: -1));\n        }else{\n          tmpData.sort( (a, b) => a[sortBy] > b[sortBy] ? 1 : -1);\n        }\n        if(sortDirection === \"DESC\"){\n          tmpData.reverse();\n        }\n        setAllData([...tmpData]);\n        setSortBy(sortBy);\n        setSortDirection(sortDirection);\n    \n    };\n    const rowGetter = ({index}) => {\n        return allData[index];\n    };\n    const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const prevWidths = {...columnWidths};\n        const percentDelta = deltaX / widthRef.current.offsetWidth;\n        let nextHeader = \"\";\n        let getNext = false;\n        for(const [key, val] of Object.entries(columnWidths)){\n            if(getNext){\n                nextHeader = key;\n                break;\n            }else if(key === dataKey){\n                getNext = true;\n            }\n        }\n        if(nextHeader === \"\"){\n            console.log(\"next header not found\");\n            return;\n        }\n        const updatedWidths = {...prevWidths, \n            [dataKey]: prevWidths[dataKey] + percentDelta,\n            [nextHeader]: prevWidths[nextHeader] - percentDelta\n        };\n        setColumnWidths(updatedWidths);\n    }, [columnWidths]);\n    const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n        return (\n          <React.Fragment key={\"header\" + dataKey}>\n            <span style={{display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n              {label}\n              {sortBy === dataKey ? (\n                sortDirection === \"ASC\" ? (\n                  <ArrowDownwardIcon />\n                ) : (\n                  <ArrowUpwardIcon />\n                )\n              ) :(null) }\n            </span>\n            {columnData.format !== \"button\" && label !== \"Path\" && \n                <Draggable\n                    axis=\"x\"\n                    defaultClassName=\"DragHandle\"\n                    defaultClassNameDragging=\"DragHandleActive\"\n                    onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n                    position={{x:0}}\n                    zIndex={999}\n                    >\n                    <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n                </Draggable>\n            }\n            \n          </React.Fragment>\n        )\n      }, [resizeRow, columns]);\n    const [allData, setAllData] = React.useState([]);\n    useEffect( () => {\n        setColumns([\n            {columnData: {format: \"button\", onTaskRowAction: props.onTaskRowAction, os: props.os}, dataKey: 'actions', label: \"Actions\", \n                cellRenderer: CellRenderer, width: columnWidths.actions * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"number\"}, dataKey: 'parent_process_id', label: \"PPID\", \n                cellRenderer: CellRenderer, width: columnWidths.parent_process_id * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"number\"}, dataKey: 'process_id', label: \"PID\", \n                cellRenderer: CellRenderer,  width: columnWidths.process_id * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'architecture',  label: \"Arch\", \n                cellRenderer: CellRenderer, width: columnWidths.architecture * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'name',  label: \"Name\", \n                cellRenderer: CellRenderer, width: columnWidths.name * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            \n            {columnData: {format: \"string\"}, dataKey: 'user',  label: \"User\", \n                cellRenderer: CellRenderer, width: columnWidths.user * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'bin_path',  label: \"Path\", \n                cellRenderer: CellRenderer, width: columnWidths.bin_path * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n        ])\n    }, [columnWidths, props.onTaskRowAction, props.os]);\n    useEffect( () => {\n        setAllData(props.selectedFolder);\n    }, [props.selectedFolder]);\n\n    return (\n        <div ref={widthRef} style={{width: \"100%\", height: \"90%\", overflow: \"hidden\"}}>\n            <AutoSizer>\n                {({height, width}) => (\n                    <Table\n                        headerHeight={25}\n                        noRowsRenderer={noRowsRender}\n                        rowCount={allData.length}\n                        rowGetter={ rowGetter }\n                        rowHeight={35}\n                        height={height}\n                        width={width}\n                        sort={sortTable}\n                        sortBy={sortBy}\n                        sortDirection={sortDirection}\n                    >\n                        {columns.map( (col) => (\n                            <Column key={\"col\" + col.dataKey} {...col} />\n                        ))}\n                    </Table>\n                )}\n            </AutoSizer>\n        </div>\n    )\n}\n\nconst FileBrowserTableRowStringCell = ({cellData}) => {\n    return (\n        cellData\n    )\n}\n\nconst FileBrowserTableRowActionCell = ({rowData, onTaskRowAction, os}) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [viewTokensDialogOpen, setViewTokensDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState({});\n    const [tokenData, setTokenData] = React.useState({});\n    const [getPermissions] = useLazyQuery(getDetailedData, {\n        onCompleted: (data) => {\n            setPermissionData(data.process_by_pk);\n            setViewPermissionsDialogOpen(true);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getTokens] = useLazyQuery(getProcessTokenData, {\n        onCompleted: (data) => {\n            if(data.process_by_pk.tokens.length === 0){\n                snackActions.warning(\"No Token Data for Process\");\n            }else{\n                setTokenData(data.process_by_pk.tokens);\n                setViewPermissionsDialogOpen(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption){\n            case \"A\":\n                optionsA[index].click(event);\n                break;\n            case \"B\":\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n    };\n    const optionsA = [{name: 'View Detailed Data', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getPermissions({variables: {process_id: rowData.id}});\n                    }},\n                    {name: 'View Tokens', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getTokens({variables: {process_id: rowData.id}});\n                    }, os: [\"Windows\"]},\n    ];\n    const optionsB = [{name: 'Task Token Listing', icon: <ListIcon style={{paddingRight: \"5px\", color: theme.palette.warning.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:list_tokens\"\n                        });\n                    }, os: [\"Windows\"]},\n                    {name: 'Task Inject', icon: <GetAppIcon style={{paddingRight: \"5px\", color: theme.palette.success.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:inject\"\n                        });\n                    }},\n                    {name: 'Task Steal Token', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:steal_token\"\n                        });\n                        \n                    }, os: [\"Windows\"]},\n                    {name: 'Task Kill Process', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:kill\"\n                        });\n                        \n                    }},\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{padding:0}} \n                size=\"small\"\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup=\"menu\"\n                onClick={handleDropdownToggle}\n                color=\"primary\"\n                variant=\"contained\"\n                ref={dropdownAnchorRef}\n            >\n                Actions\n            </Button>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                {...TransitionProps}\n                style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n                >\n                <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList id=\"split-button-menu\">\n                        {optionsA.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"A\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                        <Divider />\n                        {optionsB.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"B\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                    </MenuList>\n                    </ClickAwayListener>\n                </Paper>\n                </Grow>\n            )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewObjectPropertiesAsTableDialog title=\"View Detailed Data\" leftColumn=\"Attribute\" \n                        rightColumn=\"Value\" value={permissionData} \n                        onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                        keys={[\"name\", \"bin_path\", \"signer\", \"command_line\", \"start_time\", \"description\"]}\n                        />}\n                />\n        </React.Fragment>\n    )\n}\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect} from 'react';\nimport {gql, useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useTheme} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsProcessBrowserTree} from './CallbacksTabsProcessBrowserTree';\nimport {CallbacksTabsProcessBrowserTable} from './CallbacksTabsProcessBrowserTable';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\n\nconst dataFragment = gql`\nfragment objData on process {\n    name\n    process_id\n    parent_process_id\n    architecture\n    bin_path\n    integrity_level\n    id\n    user\n}\n`;\nconst taskFragment = gql`\nfragment taskData on task {\n    id\n    callback {\n        id\n        host\n        payload {\n            id\n            os\n            payloadtype{\n                ptype\n            }\n        }\n    }\n}\n`;\nconst getNextProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_gt: $task_id}}, order_by: {task_id: asc}, limit: 1) {\n        task {\n            ...taskData\n            processes(order_by: {process_id: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getPrevProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_lt: $task_id}}, order_by: {task_id: desc}, limit: 1) {\n        task {\n            ...taskData\n            processes(order_by: {name: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getLatestTaskForHost = gql`\nquery getHostsQuery($operation_id: Int!, $host:String!){\n    process_aggregate(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}}, distinct_on: task_id){\n        aggregate {\n            max {\n              task_id\n            }\n        }\n    }\n}\n`;\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $payloadtype: String!, $ui_feature: String!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_iregex: $ui_feature}}}) {\n    id\n    command {\n      cmd\n      help_cmd\n      description\n      id\n      needs_admin\n      payload_type_id\n      attributes\n      commandparameters {\n        id\n        type \n      }\n      supported_ui_features\n    }\n  }\n  command(where: {payloadtype: {ptype: {_eq: $payloadtype}}, script_only: {_eq: true}, deleted: {_eq: false}, supported_ui_features: {_iregex: $ui_feature }}){\n      id\n      cmd\n      help_cmd\n      description\n      needs_admin\n      attributes\n      payload_type_id\n      commandparameters {\n          id\n          type\n      }\n      supported_ui_features\n    }\n}\n`;\nconst getCallbackDataQuery = gql`\nquery getCallbackDataQuery($callback_id: Int!){\n    callback_by_pk(id: $callback_id){\n        payload {\n            os\n            payloadtype {\n              ptype\n              id\n            }\n            tag\n            id\n        }\n        id\n        operation_id\n        host\n        active\n    }\n}\n`;\nexport function CallbacksTabsProcessBrowserLabel(props){\n    const [description, setDescription] = React.useState(\"Processes: \" + props.tabInfo.host)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else{\n            setDescription(\"Processes: \" + props.tabInfo.host);\n        }\n    }, [props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const CallbacksTabsProcessBrowserPanel = (props) =>{\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState({});\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [searchCallback, setSearchCallback] = React.useState({});\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const [uiFeature, setUIFeature] = React.useState(\"\");\n    const currentCallbackIDSetInTable = React.useRef();\n    const [currentOS, setCurrentOS] = React.useState(\"\");\n    const [getCallbackData] = useLazyQuery(getCallbackDataQuery, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            if(data.callback_by_pk !== null){\n                if(data.callback_by_pk.active){\n                    setSearchCallback({...data.callback_by_pk, \"ui_feature\": \".*\" + uiFeature + \".*\"});\n                }else{\n                    snackActions.warning(\"That callback isn't active\");\n                }\n                \n            }else{\n                snackActions.warning(\"Failed to find that Callback\");\n            }\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch callback data for the specified callback\");\n        }\n    });\n    const makeTree = (root, element) => {\n        if(root.process_id === element.parent_process_id){\n            root.children.push({...element, children: []});\n            return true;\n        }else{\n            // root isn't what we're looking for, but maybe a child of root is\n            for(let i = 0; i < root.children.length; i++){\n                if(makeTree(root.children[i], element)){\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    const [getNextProcessDataByHostAndTask] = useLazyQuery(getNextProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Newer Process Sets\");\n            }\n            \n        }\n    });\n    \n    const [getPreviousProcessDataByHostAndTask] = useLazyQuery(getPrevProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Earlier Process Sets\");\n            }\n            \n        }\n    });\n    useQuery(getLatestTaskForHost, {\n        variables: {operation_id: me.user.current_operation_id, host: props.tabInfo.host},\n        onCompleted: (data) => {\n            if(data.process_aggregate.aggregate.max.task_id === null){\n                snackActions.warning(\"No Process Data for \" + props.tabInfo.host)\n                setTaskInfo({callback: {host: props.tabInfo.host, id: props.tabInfo.callbackID}, id: 0})\n            }else{\n                snackActions.info(\"Fetching latest process data for \" + props.tabInfo.host);\n                getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n                    host: props.tabInfo.host,\n                    task_id: data.process_aggregate.aggregate.max.task_id - 1\n                }});\n            }\n        }, fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState])\n\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + searchCallback.id);\n            }\n            setSelectedCommand({});\n            setSearchCallback({});\n            setUIFeature(\"\");\n        },\n        onError: data => {\n            console.error(data);\n            setSelectedCommand({});\n            setSearchCallback({});\n            setUIFeature(\"\");\n        }\n    });\n    const [getCommandOptions] = useLazyQuery(getLoadedCommandsQuery, {\n        onCompleted: (data) => {\n            const availableCommands = data.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.command.reduce( (prev, cur) => {\n                return [...prev, cur];\n            }, [...availableCommands]);\n            setFileBrowserCommands(finalCommands);\n            if(finalCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support that feature\");\n            }else if(finalCommands.length === 1){\n                setSelectedCommand({...finalCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        if(selectedCommand[\"cmd\"] !== undefined){\n            if(selectedCommand[\"commandparameters\"].length === 0){\n                createTask({variables: {callback_id: searchCallback.id, command: selectedCommand[\"cmd\"], params: \"\"}});\n            }else{\n                switch(uiFeature){\n                    case \"process_browser:list\":\n                        // need to do a popup for the user to select the file\n                        setOpenParametersDialog(true);\n                        break;              \n                    default:\n                        break;\n                }\n            }\n            \n        }\n    }, [selectedCommand, createTask, searchCallback, uiFeature]);\n    useEffect( () => {\n        if(searchCallback.id !== undefined){\n            getCommandOptions({variables: {callback_id: searchCallback.id, payloadtype: searchCallback.payload.payloadtype.ptype, ui_feature: searchCallback.ui_feature}});\n        }\n    }, [searchCallback, getCommandOptions]);\n    const onListFilesButton = ({callbackID}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"process_browser:list\");\n    }\n    const onNextButton = ({task_id}) => {\n        getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: props.tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onPreviousButton = ({task_id}) => {\n        getPreviousProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: props.tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onDiffButton = ({task_id}) => {\n        \n    }\n    const onTaskRowAction = ({path, host, filename, uifeature}) => {\n        getCallbackData({variables: {callback_id: currentCallbackIDSetInTable.current}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(uifeature);\n    }\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: searchCallback.id, command: cmd, params: parameters, files}});\n    }\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <div style={{maxHeight: \"99%\", overflow: \"auto\", height: \"99%\", width: `calc(31vw)`, display: \"inline-block\"}}>\n                <CallbacksTabsProcessBrowserTree treeRoot={fileBrowserRootsState} theme={theme} />\n            </div>\n            <div style={{maxHeight: \"99%\", overflow: \"auto\", height: \"99%\", width: `calc(65vw)`, display: \"inline-block\"}}>\n                <ProcessBrowserTableTop\n                    onListFilesButton={onListFilesButton} \n                    onNextButton={onNextButton} \n                    onPreviousButton={onPreviousButton}\n                    onDiffButton={onDiffButton}  \n                    initialCallbackID={props.tabInfo.callbackID}\n                    onChangeCallbackID={onChangeCallbackID}\n                    taskInfo={taskInfo}/>\n                <CallbacksTabsProcessBrowserTable selectedFolder={selectedFolder} onTaskRowAction={onTaskRowAction} os={currentOS}/>\n            </div>\n            {openSelectCommandDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                    onClose={()=>{setOpenSelectCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                        action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={searchCallback.id} payloadtype_id={searchCallback.payload.payloadtype.id}\n                    operation_id={searchCallback.operation_id} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            \n        </MythicTabPanel>\n    )\n}\nconst ProcessBrowserTableTop = ({onListFilesButton, onNextButton, onPreviousButton, initialCallbackID, onDiffButton, onChangeCallbackID, taskInfo}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState(\"\");\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const [taskID, setTaskID] = React.useState(0);\n    const onChangeID = (name, value, error) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    }\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if(taskInfo.callback !== undefined){\n            setCallbackID(taskInfo.callback.id);\n        }else{\n            setCallbackID(0);\n        }\n        \n    }\n    useEffect( () => {\n        if(taskInfo.callback !== undefined){\n            setHostname(taskInfo.callback.host);    \n            setTaskID(taskInfo.id);\n        }\n        if(!manuallySetCallbackID){\n            if(taskInfo.callback !== undefined){\n                setCallbackID(taskInfo.callback.id);\n            }else{\n                setCallbackID(0);\n            }\n            \n        }\n    }, [taskInfo, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if(callbackID > 0){\n            onListFilesButton({callbackID})\n        }else{\n            snackActions.warning(\"Must set a callback number to task first\");\n        }\n    }\n    const onLocalNextButton = () => {\n        snackActions.info(\"Fetching next process data...\");\n        onNextButton({task_id: taskInfo.id});\n    }\n    const onLocalPreviousButton = () => {\n        snackActions.info(\"Fetching previous process data...\");\n        onPreviousButton({task_id: taskInfo.id});\n    }\n    const onLocalDiffButton = () => {\n        if(callbackID > 0){\n            onNextButton({callbackID});\n        }else{\n            snackActions.warning(\"Must select a callback number first\");\n        }\n    }\n    useEffect( () => {\n        onChangeCallbackID(callbackID);\n    }, [callbackID, onChangeCallbackID])\n    return (\n        <Grid container spacing={0} style={{paddingTop: \"10px\"}}>\n            <Grid item xs={10}>\n                <MythicTextField placeholder=\"Host Name\" value={hostname} disabled\n                    onChange={() => {}} name=\"Host Name\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Fetch Previous Saved Process Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalPreviousButton}><SkipPreviousIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Task Callback to List Processes\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalListFilesButton}><RefreshIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Fetch Next Saved Process Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalNextButton}><SkipNextIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Compare Previous Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalDiffButton}><CompareArrowsIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        </React.Fragment>\n                    }} />\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" placeholder=\"Callback\" name=\"Callback\"\n                    onChange={onChangeID} value={callbackID} InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <Tooltip title=\"Change Callback Based on Data Origin\">\n                                <IconButton style={{padding: \"3px\"}} onClick={revertCallbackID}>\n                                    <LockIcon style={{color: theme.palette.info.main}}/>\n                                </IconButton>\n                        </Tooltip>\n                        ) : (<Tooltip title=\"Manually Update Callback Number to Prevent Data Origin Tracking\">\n                                <IconButton  style={{padding: \"3px\"}}>\n                                    <RotateLeftIcon disabled style={{color: theme.palette.warning.main}}/> \n                                </IconButton>\n                            </Tooltip>),\n                        style: {padding: 0, margin: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" name=\"Task Data\"\n                    disabled value={taskID} onChange={() => {}}/>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, {useEffect} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport {useSubscription, gql } from '@apollo/client';\nimport {CallbacksTabsTaskingLabel, CallbacksTabsTaskingPanel} from './CallbacksTabsTasking';\nimport {CallbacksTabsFileBrowserLabel, CallbacksTabsFileBrowserPanel} from './CallbacksTabsFileBrowser';\nimport {CallbacksTabsProcessBrowserLabel, CallbacksTabsProcessBrowserPanel} from './CallbacksTabsProcessBrowser';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbacktoken(where: {deleted: {_eq: false}, callback: {operation_id: {_eq: $operation_id}, active: {_eq: true}}}) {\n    token {\n      TokenId\n      id\n      User\n      description\n    }\n    callback {\n      id\n    }\n    id\n  }\n}\n `;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\nexport function CallbacksTabs({onCloseTab, openTabs, clickedTabId, clearSelectedTab, onEditTabDescription}) {\n    const classes = useStyles();\n    const me = useReactiveVar(meState);\n    const [callbackTokens, setCallbackTokens] = React.useState([])\n    useSubscription(SUB_Callbacks, {\n      variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n      shouldResubscribe: true,\n      onSubscriptionData: ({subscriptionData}) => {\n        setCallbackTokens(subscriptionData.data.callbacktoken);\n      }\n    });\n    const [value, setValue] = React.useState(0);\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n    const onCloseTabLocal = ({tabID, index}) =>{\n        if(index > 0){\n            setValue(index-1);\n        }else{\n            setValue(0);\n        }\n        onCloseTab({tabID, index});\n    }\n    useEffect( () => {\n        for(let i = 0; i < openTabs.length; i++){\n            if( openTabs[i].tabID === clickedTabId ){\n                setValue(i);\n            }\n        }\n        clearSelectedTab();\n    }, [clickedTabId, openTabs, clearSelectedTab]);\n  return (\n    <React.Fragment>\n            <AppBar position=\"static\" color=\"default\">\n              <Tabs \n                value={value}\n                onChange={handleChange}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                variant=\"scrollable\"\n                scrollButtons=\"auto\"\n                style={{maxWidth: \"100%\", width: \"100%\"}}\n                aria-label=\"scrollable auto tabs example\"\n              >\n              {\n                  openTabs.map( (tab, index) => {\n                    switch (tab.tabType){\n                      case \"interact\":\n                        return <CallbacksTabsTaskingLabel onEditTabDescription={onEditTabDescription} onCloseTab={onCloseTabLocal} key={\"tablabel\" + tab.tabID + tab.tabType} tabInfo={tab} index={index} />;\n                      case \"fileBrowser\":\n                        return <CallbacksTabsFileBrowserLabel onEditTabDescription={onEditTabDescription} onCloseTab={onCloseTabLocal} key={\"tablabel\" + tab.tabID + tab.tabType} tabInfo={tab} index={index} />;\n                      case \"processBrowser\":\n                        return <CallbacksTabsProcessBrowserLabel onEditTabDescription={onEditTabDescription} onCloseTab={onCloseTabLocal} key={\"tablabel\" + tab.tabID + tab.tabType} tabInfo={tab} index={index} />;\n                      default:\n                        return (null);\n                    }\n                  })\n              }\n              </Tabs>\n            </AppBar>\n        <div className={classes.root} style={{maxHeight: \"100%\", height: \"100%\", background: \"transparent\"}}>\n          {\n          openTabs.map( (tab, index) => {\n            switch(tab.tabType){\n                case \"interact\":\n                  return <CallbacksTabsTaskingPanel style={{position: \"relative\", height:\"100%\", maxHeight:\"100%\"}} key={\"tabpanel\" + tab.tabID + tab.tabType} tabInfo={tab} value={value} index={index} callbacktokens={callbackTokens}/>\n                case \"fileBrowser\":\n                  return <CallbacksTabsFileBrowserPanel style={{height:\"100%\", maxHeight:\"100%\", position: \"relative\", overflow: \"auto\"}} key={\"tabpanel\" + tab.tabID + tab.tabType} tabInfo={tab} value={value} index={index} />\n                case \"processBrowser\":\n                  return <CallbacksTabsProcessBrowserPanel style={{height:\"100%\", maxHeight:\"100%\", position: \"relative\", overflow: \"auto\"}} key={\"tabpanel\" + tab.tabID + tab.tabType} tabInfo={tab} value={value} index={index} />\n                default:\n                  return (null);\n            }\n          })\n          }\n        </div>\n    </React.Fragment>\n  )\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function HeightsDialog(props) {\n  const [heights, setHeights] = React.useState({\"top\": \"0%\", \"bottom\": \"0%\"});\n  useEffect( () => {\n    setHeights(props.heights);\n  }, [props.heights]);\n  const onSubmit = () => {\n    props.onSubmit(heights);\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    const newHeights = {...heights};\n    newHeights[name] = value;\n    setHeights(newHeights);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Adjust sizes of Top/Bottom sections</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <MythicTextField autoFocus value={heights.top} onChange={onChange} name=\"top\"/>\n                <MythicTextField value={heights.bottom} onChange={onChange} name=\"bottom\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nexport function getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nexport function stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\n\n\n\nexport function EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, onRequestSort } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\">\n          <Checkbox\n            indeterminate={numSelected > 0 && numSelected < props.rowCount}\n            checked={props.rowCount > 0 && numSelected === props.rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{ 'aria-label': 'select all desserts' }}\n          />\n        </TableCell>\n        {props.headCells.map((headCell) => (\n          props.shownColumns === undefined || props.shownColumns.includes(headCell.id) || headCell.id === \"id\" ? (\n            <TableCell\n              key={headCell.id}\n              align={'left'}\n              padding={headCell.disablePadding ? 'none' : 'default'}\n              sortDirection={orderBy === headCell.id ? order : false}\n            >\n              <TableSortLabel\n                active={orderBy === headCell.id}\n                direction={orderBy === headCell.id ? order : 'asc'}\n                onClick={createSortHandler(headCell.id)}\n              >\n                {headCell.label}\n                {orderBy === headCell.id ? (\n                  <span className={classes.visuallyHidden}>\n                    {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                  </span>\n                ) : null}\n              </TableSortLabel>\n            </TableCell>\n          ) : (null)\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nexport function EnhancedTableRow(props){\n    \n  const labelId = `enhanced-table-checkbox-${props.index}`;\n\n  return (\n    <TableRow\n      hover\n      onClick={(event) => props.handleClick(event, props.id)}\n      role=\"checkbox\"\n      aria-checked={props.isItemSelected}\n      tabIndex={-1}\n      key={props.id}\n      selected={props.isItemSelected}\n      style={props.style === undefined ? {} : props.style}\n    >\n      <TableCell padding=\"checkbox\">\n        <Checkbox\n          checked={props.isItemSelected}\n          inputProps={{ 'aria-labelledby': labelId }}\n        />\n      </TableCell>\n      {props.children}\n    </TableRow>\n  );\n\n}\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\n\n  \nexport function MythicTransferListDialog(props) {\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    \n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(50vh)\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    const setFinalTags = () => {\n      props.onSubmit({left, right});\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.dialogTitle}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(leftTitle, left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                \n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                \n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n        </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport MythicTextField from './MythicTextField';\n\nexport function MythicDisplayTextDialog(props) {\n  return (\n    <MythicDialog fullWidth={props.fullWidth === null ? false : props.fullWidth} maxWidth={props.maxWidth === null ? \"sm\" : props.maxWidth} open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n            <DialogContent dividers={true}>\n                <MythicTextField multiline={true} value={props.value} onChange={()=>{}} />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                Close\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import {gql } from '@apollo/client';\n\nexport const hideCallbackMutation = gql`\nmutation hideCallback ($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, active: false}) {\n    status\n    error\n  }\n}\n`;\nexport const toggleHideCallbackMutations = gql`\nmutation hideCallback ($callback_id: Int!, $active: Boolean!){\n  updateCallback(input: {callback_id: $callback_id, active: $active}) {\n    status\n    error\n  }\n}\n`;\n\nexport const removeEdgeMutation = gql`\nmutation removeEdgeMutation ($edge_id: Int!, $end_timestamp: timestamp!){\n    update_callbackgraphedge_by_pk(pk_columns: {id: $edge_id}, _set: {end_timestamp: $end_timestamp}) {\n        end_timestamp\n        id\n      }\n}\n`;\n\nexport const addEdgeMutation = gql`\nmutation addEdgeMutation ($source_id: Int!, $destination_id: Int!, $profile_id: Int!){\n  insert_callbackgraphedge_one(object: {c2_profile_id: $profile_id, destination_id: $destination_id, direction: 1, source_id: $source_id}) {\n    id\n  }\n}\n`;\nexport const unlockCallbackMutation = gql`\nmutation unlockCallback($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: false}) {\n    status\n    error\n  }\n}\n`;\nexport const lockCallbackMutation = gql`\nmutation lockCallack($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: true}) {\n    status\n    error\n  }\n}\n`;\nexport const updateDescriptionCallbackMutation = gql`\nmutation updateDescriptionCallack($callback_id: Int!, $description: String!){\n  updateCallback(input: {callback_id: $callback_id, description: $description}) {\n    status\n    error\n  }\n}\n`;\n\nexport const updateSleepInfoCallbackMutation = gql`\nmutation updateSleepInfoCallback($callback_id: Int!, $sleep_info: String!){\n  update_callback_by_pk(pk_columns: {id: $callback_id}, _set: {sleep_info: $sleep_info}){\n    id\n    sleep_info\n  }\n}\n`;\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport {ExpandedCallbackSideDetailsTable} from '../ExpandedCallback/ExpandedCallbackSideDetails';\n\nconst GET_Payload_Details = gql`\nquery GetCallbackDetails($callback_id: Int!) {\n  callback_by_pk(id: $callback_id){\n    payload {\n      uuid\n      payloadtype{\n          ptype\n          id\n          commands(where: {script_only: {_eq: true}, deleted: {_eq: false}}){\n            id\n            cmd\n            version\n          }\n      }\n      filemetum {\n        filename_text\n        agent_file_id\n        id\n        md5\n        sha1\n      }\n      buildparameterinstances {\n        parameter\n        id\n        buildparameter {\n          description\n        }\n      }\n      os\n    }\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n    loadedcommands{\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    last_checkin\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n  }\n  \n}\n`;\nexport function DetailedCallbackTable(props){\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {callback_id: props.callback_id},\n        onCompleted: data => {\n            const commandState = data.callback_by_pk.loadedcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            });\n            const commandsWithScriptOnly = data.callback_by_pk.payload.payloadtype.commands.reduce( (prev, cur) => {\n              return [...prev, {cmd: cur.cmd, mythic: cur.version, payload: cur.version}]\n            }, [...commandState]).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0))\n            setCommands(commandsWithScriptOnly);\n            const buildParametersState = data.callback_by_pk.payload.buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.callback_by_pk.c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Callback Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Callback Information\n              </Typography>\n            </Paper>\n            <ExpandedCallbackSideDetailsTable {...data.callback_by_pk} />\n                \n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.uuid}</TableCell>\n                    </TableRow>\n                    { data.callback_by_pk.payload.filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.callback_by_pk.payload.filemetum.filename_text}</TableCell>\n                        </TableRow>\n                    ) : null }\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.callback_by_pk.payload.filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + data.callback_by_pk.payload.id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" || cmd.parameter_type === \"Array\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Loaded Commands\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Command Name</TableCell>\n                <TableCell>Mythic Version</TableCell>\n                <TableCell>Loaded Version</TableCell>\n                <TableCell>Documentation</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {\n                commands.map( (cmd) => (\n                    <TableRow key={cmd.cmd + data.callback_by_pk.payload.id} hover>\n                        <TableCell>{cmd.cmd}</TableCell>\n                        <TableCell>{cmd.mythic}</TableCell>\n                        <TableCell>{cmd.payload}</TableCell>\n                        <TableCell>\n                          <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                             href={\"/docs/agents/\" + data.callback_by_pk.payload.payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button> \n                        </TableCell>\n                    </TableRow>\n                ))\n                \n              }\n            </TableBody>\n          </Table>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\n","import React, {useCallback, useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicDisplayTextDialog} from '../../MythicComponents/MythicDisplayTextDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {EnhancedTableRow} from '../../MythicComponents/MythicTable';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport LockIcon from '@material-ui/icons/Lock';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport {C2PathDialog} from './C2PathDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport {hideCallbackMutation} from './CallbackMutations';\nimport {useMutation } from '@apollo/client';\nimport SnoozeIcon from '@material-ui/icons/Snooze';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {faQuestion} from '@fortawesome/free-solid-svg-icons';\nimport {faLinux, faApple, faWindows, faChrome} from '@fortawesome/free-brands-svg-icons';\nimport {useSubscription, gql } from '@apollo/client';\nimport {DetailedCallbackTable} from './DetailedCallbackTable';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    id\n    last_checkin\n  }\n}\n `;\nexport function CallbacksTableRowPreMemo(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [openMetaDialog, setOpenMetaDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [openSleepDialog, setOpenSleepDialog] = React.useState(false);\n    const [openOSDialog, setOpenOSDialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [shownColumns, setShownColumns] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const handleDropdownToggle = (evt) => {\n            evt.stopPropagation();\n            setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    useEffect( () => {\n        if(props.shownColumns === undefined){\n            setShownColumns([]);\n        }else{\n            setShownColumns(props.shownColumns);\n        }\n    }, [props.shownColumns]);\n    \n    const onOpenTab = (tabType) => {\n        if(!activeEgressBool){\n            snackActions.warning(\"Agent has no egress route! Re-link before tasking\");\n        }\n        if(tabType === \"interact\"){\n            props.onOpenTab({tabType, tabID: props.id + tabType, callbackID: props.id});\n        }else if(tabType === \"processBrowser\"){\n            props.onOpenTab({tabType, tabID: props.host, callbackID: props.id});\n        }else{\n            props.onOpenTab({tabType, tabID: props.id + tabType, callbackID: props.id});\n        }\n    }\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = props.callbackgraphedges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in props.callbackgraphedges that are _not_ in myEdges so far\n                const newEdges = props.callbackgraphedges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        if(callbackgraphedges.length !== myActiveEdges.length){\n            setCallbackgraphedges(myActiveEdges);\n        }\n        if(callbackgraphedgesAll.length !== myEdges.length){\n            setCallbackgraphedgesAll(myEdges);\n        }\n    }, [props.callbackgraphedges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n    const handleMenuItemClick = (event, index) => {\n        options[index].click(event);\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n\n        setDropdownOpen(false);\n      };\n      const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            console.log(data);\n        }\n    });\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const editSleepSubmit = (sleep) => {\n        props.updateSleepInfo({sleep_info: sleep, id: props.id});\n    }\n    const displayOSInfo = React.useCallback( () => {\n        setOpenOSDialog(true);\n    }, []);\n    const getOSIcon = useCallback( () => {\n        switch(props.payload.os.toLowerCase()){\n            case \"windows\":\n                return <FontAwesomeIcon icon={faWindows} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"linux\":\n                return <FontAwesomeIcon icon={faLinux} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"macos\":\n                return <FontAwesomeIcon icon={faApple} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo}/>\n            case \"chrome\":\n                return <FontAwesomeIcon icon={faChrome} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            default:\n                return <FontAwesomeIcon icon={faQuestion} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n        }\n    }, [])\n    const options =  [{name: 'Hide Callback', icon: <VisibilityOffIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        hideCallback({variables: {callback_id: props.id}});\n                     }},\n                     {name: 'File Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onOpenTab(\"fileBrowser\");\n                     }},\n                     {name: 'Process Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onOpenTab(\"processBrowser\");\n                     }},\n                     {name: props.locked ? 'Unlock (Locked by ' + props.locked_operator.username + ')' : 'Lock Callback', icon: props.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                     {name: \"Expand Callback\", icon: <OpenInNewIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        window.open(\"/new/callbacks/\" + props.id, \"_blank\").focus();\n                     }},\n                     {name: \"View Metadata\", icon: <InfoIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                         evt.stopPropagation();\n                         setOpenMetaDialog(true);\n                     }}\n                 ];\n    return (\n    <React.Fragment>\n        <EnhancedTableRow id={props.id} handleClick={props.handleClick} isItemSelected={props.isItemSelected(props.id)}> \n            <TableCell>\n                <ButtonGroup variant=\"contained\" color={props.integrity_level > 2 ? \"secondary\" : \"primary\"} ref={dropdownAnchorRef} aria-label=\"split button\">\n                <Button size=\"small\" onClick={(evt) => {evt.stopPropagation();onOpenTab(\"interact\")}}>\n                 { props.locked ? (<LockIcon />):(<KeyboardIcon />) } {props.id}\n                 </Button>\n                 <Button\n                    style={{padding:0}} \n                    size=\"small\"\n                    aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}\n                  >\n                    <ArrowDropDownIcon />\n                  </Button>\n                </ButtonGroup>\n                <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\">\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.icon}{option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n            </TableCell>\n            {shownColumns.includes(\"ip\") ? (\n                <TableCell>{props.ip}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"host\") ? (\n                <TableCell>{props.host}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"user\") ? (\n                <TableCell>{props.user}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"domain\") ? (\n                <TableCell>{props.domain}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"os\") ? (\n                <TableCell>\n                    {getOSIcon()}\n                    <MythicDisplayTextDialog onClose={()=>{setOpenOSDialog(false);}} title={\"Operating System Information\"} maxWidth={\"md\"} fullWidth={true} value={props.os} open={openOSDialog}/>\n                </TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"arch\") ? (\n                <TableCell>{props.architecture}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"pid\") ? (\n                <TableCell>{props.pid}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"last_checkin\") ? (\n            <TableCell>\n                <TimeUpdater callback_id={props.id} />\n            </TableCell>\n            ) : (null)} \n            {shownColumns.includes(\"description\") ? (\n            <TableCell>{props.description}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"sleep\") ? (\n            <TableCell><SnoozeIcon onClick={(evt)=>{evt.stopPropagation();setOpenSleepDialog(true);}} style={{color: props.sleep_info === \"\" ? theme.palette.warning.main : theme.palette.info.main, cursor: \"pointer\"}}/></TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"type\") ? (\n            <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"c2\") ? (\n            <TableCell>{hasEgressRoute ? \n                <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                }\n            </TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"process_name\") ? (\n            <TableCell>{props.process_name}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"external_ip\") ? (\n            <TableCell>{props.external_ip}</TableCell>\n            ) : (null)}\n        </EnhancedTableRow>\n        <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                    onClose={()=>{setOpenC2Dialog(false);}} \n                    innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                />\n            {openMetaDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openMetaDialog}\n                    onClose={()=>{setOpenMetaDialog(false);}} \n                    innerDialog={<DetailedCallbackTable onClose={()=>{setOpenMetaDialog(false);}} callback_id={props.id} />}\n                />\n            }\n        <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n            innerDialog={\n                <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n            }\n            />\n        <MythicDialog fullWidth={true} open={openSleepDialog}  onClose={() => {setOpenSleepDialog(false);}}\n            innerDialog={\n                <MythicModifyStringDialog title={\"Sleep Information\"} onClose={() => {setOpenSleepDialog(false);}} value={props.sleep_info} onSubmit={editSleepSubmit} />\n            }\n            />\n    </React.Fragment>\n    )\n}\nexport const CallbacksTableRow = React.memo(CallbacksTableRowPreMemo);\n\nfunction TimeUpdaterPreMemo({callback_id}){\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [lastCheckin, setLastCheckin] = React.useState(\"\");\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setLastCheckin(subscriptionData.data.callback_by_pk.last_checkin);\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(lastCheckin);\n    });\n    return (\n        displayTime\n    )\n}\nconst TimeUpdater = React.memo(TimeUpdaterPreMemo)","import React, { useEffect, useMemo } from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {EnhancedTableHead, stableSort, getComparator} from '../../MythicComponents/MythicTable';\nimport {MythicTransferListDialog} from '../../MythicComponents/MythicTransferList';\nimport {MythicDialog} from '../../MythicComponents/MythicDialog';\nimport { CallbacksTableRow } from './CallbacksTableRow';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport {useTheme} from '@material-ui/core/styles';\nimport {hideCallbackMutation, unlockCallbackMutation, lockCallbackMutation, updateDescriptionCallbackMutation, updateSleepInfoCallbackMutation} from './CallbackMutations';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation } from '@apollo/client';\nimport {Button} from '@material-ui/core';\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    minHeight: \"unset\",\n    marginTop: \"10px\"\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  title: {\n    flex: '1 1 100%',\n  },\n}));\n\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const theme = useTheme();\n  const { numSelected } = props;\n  return (\n    <React.Fragment>\n        {numSelected > 1 ? (\n          <Toolbar className={clsx(classes.root, {[classes.highlight]: numSelected > 1, })} >\n            <React.Fragment>\n              <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\n                {numSelected} selected\n              </Typography>\n              <Tooltip title=\"Hide Selected\">\n                <IconButton aria-label=\"hide\" onClick={props.onHideSelected}>\n                  <VisibilityOffOutlinedIcon />\n                </IconButton>\n              </Tooltip>\n            </React.Fragment>\n          </Toolbar>\n      ) : (\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\", width: \"100%\"}} variant={\"elevation\"}>\n          <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n              Active Callbacks\n          </Typography>\n          <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"20px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.openDialog(); }}>Show/Hide Columns</Button>\n        </Paper>\n      )\n      }\n    </React.Fragment>\n  );\n};\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n}));\nexport function CallbacksTable(props){\n      const classes = useStyles();\n      const [order, setOrder] = React.useState('asc');\n      const [orderBy, setOrderBy] = React.useState('interact');\n      const [selected, setSelected] = React.useState([]);\n      const [openAdjustColumnsDialog, setOpenAdjustColumnsDialog] = React.useState(false);\n      const [allColumns, setAllColumns] = React.useState([]);\n      const [shownColumns, setShownColumns] = React.useState([\"user\", \"host\", \"domain\", \"description\", \"last_checkin\", \"type\", \"c2\", \"ip\", \"os\"]);\n      const handleSelectAllClick = (event) => {\n        if (event.target.checked) {\n          const newSelecteds = props.callbacks.map((n) => n.id);\n          setSelected(newSelecteds);\n          return;\n        }\n        setSelected([]);\n      };\n      const handleClick = (event, name) => {\n        const selectedIndex = selected.indexOf(name);\n        let newSelected = [];\n\n        if (selectedIndex === -1) {\n          newSelected = newSelected.concat(selected, name);\n        } else if (selectedIndex === 0) {\n          newSelected = newSelected.concat(selected.slice(1));\n        } else if (selectedIndex === selected.length - 1) {\n          newSelected = newSelected.concat(selected.slice(0, -1));\n        } else if (selectedIndex > 0) {\n          newSelected = newSelected.concat(\n            selected.slice(0, selectedIndex),\n            selected.slice(selectedIndex + 1),\n          );\n        }\n\n        setSelected(newSelected);\n      };\n      const isSelected = (name) => selected.indexOf(name) !== -1;\n      const handleRequestSort = (event, property) => {\n        const isAsc = orderBy === property && order === 'asc';\n        setOrder(isAsc ? 'desc' : 'asc');\n        setOrderBy(property);\n      };\n      const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            snackActions.warning(data);\n            console.log(data);\n        }\n    });\n    const [lockCallback] = useMutation(lockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Locked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [unlockCallback] = useMutation(unlockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Unlocked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [updateDescription] = useMutation(updateDescriptionCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Updated Callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const [updateSleep] = useMutation(updateSleepInfoCallbackMutation, {\n      update: (cache, {data}) => {\n        snackActions.success(\"Updated Callback\");\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const hideSelected = () => {\n      let updated_selected = [...selected];\n      for(let i = 0; i < props.callbacks.length; i++){\n        if(updated_selected.includes(props.callbacks[i][\"id\"])){\n          hideCallback({variables: {callback_id: props.callbacks[i][\"id\"]}});\n          updated_selected = updated_selected.filter(e => e !== props.callbacks[i][\"id\"]);\n        }\n      }\n      setSelected(updated_selected);\n      //\n    }\n    const onSubmitAdjustColumns = ({left, right}) => {\n      setShownColumns(right);\n      localStorage.setItem(\"callbacks_table_columns\", JSON.stringify(right));\n    }\n    \n    const tableHeadCells = useMemo( () => [\n        {id: \"id\", numeric: true, disablePadding: false, label: \"Interact\"},\n        {id: \"ip\", numeric: false, disablePadding: false, label: \"IP\"},\n        {id: \"host\", numeric: false, disablePadding: false, label: \"Host\"},\n        {id: \"user\", numeric: false, disablePadding: false, label: \"User\"},\n        {id: \"domain\", numeric: false, disablePadding: false, label: \"Domain\"},\n        {id: \"os\", numeric: false, disablePadding: false, label: \"OS\"},\n        {id: \"arch\", numberic: false, disablePadding: false, label: \"Arch\"},\n        {id: \"pid\", numeric: true, disablePadding: false, label: \"PID\"},\n        {id: \"last_checkin\", numeric: true, disablePadding: false, label: \"Last Checkin\"},\n        {id: \"description\", numeric: false, disablePadding: false, label: \"Description\"},\n        {id: \"sleep\", numeric: false, disablePadding: true, label: \"Sleep\"},\n        {id: \"type\", numeric: false, disablePadding: false, label: \"Type\"},\n        {id: \"c2\", numeric: false, disablePadding: true, label: \"C2\"},\n        {id: \"process_name\", numeric: false, disablePadding: true, label: \"Process Name\"},\n        {id: \"external_ip\", numberic: false, disablePadding: true, label: \"External IP\"}\n    ], []);\n    useEffect( () => {\n      const ids = tableHeadCells.map( (cell) => cell.id);\n      const allColumnNames = ids.filter( i => i !== \"id\");\n      setAllColumns(allColumnNames);\n      let localSettings = localStorage.getItem(\"callbacks_table_columns\");\n      if(localSettings !== null){\n        setShownColumns(JSON.parse(localSettings));\n      }\n    }, [tableHeadCells]);\n    const toggleLock = React.useCallback( ({id, locked}) => {\n      if(locked){\n        unlockCallback({variables: {callback_id: id}})\n      }else{\n        lockCallback({variables: {callback_id: id}})\n      }\n    }, []);\n    const updateDescriptionSubmit = React.useCallback( ({id, description}) => {\n      updateDescription({variables: {callback_id: id, description}})\n    }, []);\n    const updateSleepInfo = React.useCallback( ({id, sleep_info}) => {\n      updateSleep({variables: {callback_id: id, sleep_info}})\n    }, [])\n    return (\n        <div style={{height: \"100%\", maxHeight: \"100%\", overflow: \"auto\"}}>  \n          <EnhancedTableToolbar numSelected={selected.length} onHideSelected={hideSelected} openDialog={() => setOpenAdjustColumnsDialog(true)}/>\n            <TableContainer component={Paper} className=\"mythicElement\" style={{\"maxWidth\": \"100%\", \"overflow\": \"auto\", marginRight: \"5px\"}}>\n                <Table size=\"small\" >\n                    <EnhancedTableHead shownColumns={shownColumns} numSelected={selected.length} \n                      rowCount={props.callbacks.length} classes={classes} headCells={tableHeadCells} \n                      onSelectAllClick={handleSelectAllClick} onRequestSort={handleRequestSort} orderBy={orderBy} \n                      order={order} />\n                    <TableBody >\n                    {\n                        stableSort(props.callbacks, getComparator(order, orderBy)).map( (cal, index) => (\n                            <CallbacksTableRow shownColumns={shownColumns} handleClick={handleClick} isItemSelected={isSelected} \n                              onOpenTab={props.onOpenTab} key={\"callback\" + cal.id} {...cal} \n                              callbackgraphedges={props.callbackgraphedges}\n                              toggleLock={toggleLock} updateDescription={updateDescriptionSubmit} updateSleepInfo={updateSleepInfo}\n                              />\n                        ))\n                    }\n                    </TableBody>\n                </Table>\n            </TableContainer>\n            {openAdjustColumnsDialog &&\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openAdjustColumnsDialog} \n              onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n              innerDialog={\n                <MythicTransferListDialog onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                  onSubmit={onSubmitAdjustColumns} right={shownColumns} rightTitle=\"Show these columns\"\n                  leftTitle={\"Hidden Columns\"} left={allColumns} dialogTitle={\"Edit which columns are shown\"}/>}\n            />\n            }\n            \n        </div>\n    )\n}\n\n","import React, {useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {useQuery, useReactiveVar, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst getP2PProfilesAndCallbacks = gql`\nquery getP2PProfilesAndCallbacks($operation_id: Int!){\n  c2profile(where: {is_p2p: {_eq: true}}) {\n    callbackc2profiles(where: {callback: {operation_id: {_eq: $operation_id}}}) {\n      id\n      callback {\n        id\n        description\n      }\n    }\n    name\n    id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    width: \"97%\"\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport function ManuallyAddEdgeDialog(props) {\n    const classes = useStyles();\n    const [callbackOptions, setCallbackOptions] = React.useState([]);\n    const [profileOptions, setProfileOptions] = React.useState([]);\n    const [selectedDestination, setSelectedDestination] = React.useState('');\n    const [selectedProfile, setSelectedProfile] = React.useState('');\n    const inputRefDestination = useRef(null); \n      const handleChangeProfile = (event) => {\n        setSelectedProfile(event.target.value);\n      };\n      const handleChangeDestination = (event) => {\n        setSelectedDestination(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(props.source.id, selectedProfile, selectedDestination.callback);\n        props.onClose();\n    }\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getP2PProfilesAndCallbacks, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const filteredProfileOptions = data.c2profile.filter( (profile) => {\n                let found = false;\n                props.source.callbackc2profiles.forEach( (source_profile) => {\n                    if(source_profile.c2profile.name === profile.name){found = true};\n                });\n                return found;\n            } );\n            setProfileOptions(filteredProfileOptions);\n            if(filteredProfileOptions.length > 0){\n                setSelectedProfile(filteredProfileOptions[0]);\n                const cbopts = filteredProfileOptions[0][\"callbackc2profiles\"].filter( (cb) => cb.callback.id !== props.source.id );\n                setCallbackOptions(cbopts);\n                if(cbopts.length > 0){\n                    setSelectedDestination(cbopts[0]);\n                }\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >Manually Add Edge From Callback {props.source.id}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                Manually add an edge from Callback {props.source.id} to another callback via a P2P C2 Profile they both share.<br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"demo-dialog-select-label-profile\">Profile</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-profile\"\n                    id=\"demo-dialog-select\"\n                    \n                    value={selectedProfile}\n                    onChange={handleChangeProfile}\n                    style={{minWidth: \"30%\"}}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {profileOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"profile:\" + opt.id}>{opt.name}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl><br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel ref={inputRefDestination}>Destination</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-destination\"\n                    id=\"demo-dialog-select-destination\"\n                    value={selectedDestination}\n                    \n                    onChange={handleChangeDestination}\n                    input={<Input />}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {callbackOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"callback:\" + opt.callback.id}>{opt.callback.id} ({opt.callback.description})</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: muiTheme.palette.success.main}}>\n            Add\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect, useState, useMemo} from 'react';\nimport {drawC2PathElements, getNodeEdges} from './C2PathDialog';\nimport {Button} from '@material-ui/core';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport {useMutation } from '@apollo/client';\nimport {saveSvgAsPng} from 'save-svg-as-png';\nimport {hideCallbackMutation, removeEdgeMutation, addEdgeMutation} from './CallbackMutations';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {ManuallyAddEdgeDialog} from './ManuallyAddEdgeDialog';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const loadedLinkCommandsQuery = gql`\nquery loadedLinkCommandsQuery ($callback_id: Int!){\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_ilike: \"graph_view:link\"}, deleted: {_eq: false}}}) {\n    command {\n        id\n        cmd\n        help_cmd\n        description\n        needs_admin\n    }\n  }\n}\n`;\n\nexport function CallbacksGraph({onOpenTab, callbackgraphedges}){\n    const theme = useTheme();\n    const dagreRef = useRef(null);    \n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [reZoom, setReZoom] = useState(true);\n    //used for creating a task to do a link command\n    const [linkCommands, setLinkCommands] = React.useState([]);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openSelectLinkCommandDialog, setOpenSelectLinkCommandDialog] = React.useState(false);\n    const [selectedLinkCommand, setSelectedLinkCommand] = useState();\n    const [selectedCallback, setSelectedCallback] = useState();\n    const [manuallyRemoveEdgeDialogOpen, setManuallyRemoveEdgeDialogOpen] = useState(false);\n    const [manuallyAddEdgeDialogOpen, setManuallyAddEdgeDialogOpen] = useState(false);\n    const [edgeOptions, setEdgeOptions] = useState([]); // used for manuallyRemoveEdgeDialog\n    const [addEdgeSource, setAddEdgeSource] = useState(null); // used for manuallyAddEdgeDialog\n    const [getLinkCommands] = useLazyQuery(loadedLinkCommandsQuery, {fetchPolicy: \"network-only\",\n        onCompleted: data => {            \n            if(data.loadedcommands.length === 1){\n                //no need for a popup, there's only one possible command\n                setSelectedLinkCommand(data.loadedcommands[0].command);\n                setOpenParametersDialog(true);\n            }else if(data.loadedcommands.length === 0){\n                //no possible command can be used, do a notification\n                snackActions.warning(\"No commands loaded that are 'link' commands\");\n            }else{\n                const cmds = data.loadedcommands.map( (cmd) => { return {...cmd, display: cmd.command.cmd} } );\n                setLinkCommands(cmds);\n                setSelectedLinkCommand(cmds[0].command);\n                setOpenSelectLinkCommandDialog(true);\n            }\n        }});\n    const onSubmitSelectedLinkCommand = (cmd) => {\n        setSelectedLinkCommand(cmd.command);\n        //console.log(cmd);\n        setOpenParametersDialog(true);\n    }\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"task created\");\n            }\n            \n        }\n    });\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: selectedCallback.id, command: cmd, params: parameters, files}});\n    }\n    const [viewConfig, setViewConfig] = React.useState({\n        rankDir: \"LR\",\n        label_components: [\"id\", \"user\"],\n        packet_flow_view: true,\n        include_disconnected: true,\n        show_all_nodes: false\n    });\n    const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyRemoveEdge] = useMutation(removeEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyAddEdge] = useMutation(addEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const onSubmitManuallyRemoveEdge = (edge) => {\n        if(edge === \"\"){\n            snackActions.warning(\"No edge selected\");\n            return;\n        }\n        manuallyRemoveEdge({variables: {edge_id: edge.edge_id, end_timestamp: (new Date()).toISOString()}});\n    }\n    const onSubmitManuallyAddEdge = (source_id, profile, destination) => {\n        if(profile === \"\" || destination === \"\"){\n            snackActions.warning(\"Profile or Destination Callback not provided\");\n            return;\n        }\n        manuallyAddEdge({variables: {source_id: source_id, profile_id: profile.id, destination_id: destination.id}});\n        //console.log(\"want to submit: \", source_id, profile, destination);\n    }\n    const node_events = useMemo(() => {return {\n        \"mouseover\": (parent, node, d) => {return},\n        \"mouseout\": (parent, node, d) => {return},\n        \"click\": (parent, node, d) => {return},\n        \"contextmenu\":  [\n\t        {\n\t\t        title: 'Hide Callback',\n\t\t        action: function(g, elm) {\n\t\t            hideCallback({variables: {callback_id: elm.node.id}});\n\t\t        }\n\t        },\n\t        {\n\t\t        title: 'Interact',\n\t\t        action: function(g, elm){\n\t\t            onOpenTab({tabType: \"interact\", tabID: elm.node.id + \"interact\", callbackID: elm.node.id});\n\t            }\n            },\n            {\n\t            title: \"Manually Remove Edge\",\n\t            action: function(g, elm){\n\t                const edges = getNodeEdges(g, elm.node.id);\n\t                const opts = edges.reduce( (prev, e) => {\n\t                    const fulledg = g.edge(e.v, e.w, e.name);\n\t                    if(fulledg.end_timestamp === null){\n\t                        if(fulledg.direction === 1){\n\t                            if(viewConfig[\"packet_flow_view\"]){\n\t                                return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                            }else{\n\t                                return [...prev, {...fulledg, \"display\": e.v + \" --> \" + e.name + \" --> \" + e.w}];\n\t                            }\n\t                        }else{\n\t                            return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                        }\n\t                        \n\t                    }else{\n\t                        return [...prev];\n\t                    }\n\t                }, []);\n\t                setEdgeOptions(opts);\n\t                setManuallyRemoveEdgeDialogOpen(true);\n                }\n            },\n            {\n                title: \"Manually Add Edge\",\n                action: function(g, elm){\n                    setAddEdgeSource(elm.node);\n                    setManuallyAddEdgeDialogOpen(true);\n                }\n\t        },\n\t        {\n\t            title: \"Task Callback for Edge\",\n\t            action: function(g, elm){\n\t                setLinkCommands([]);\n                    setSelectedLinkCommand(null);\n                    setSelectedCallback(null);\n\t                getLinkCommands({variables: {callback_id: elm.node.id} });\n\t                setSelectedCallback(elm.node);\n\t                \n                }\n            },\n        ]       \n    }}, [getLinkCommands, hideCallback, viewConfig, onOpenTab]);\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setDropdownOpen(false);\n    };\n    const options = [{name: viewConfig[\"include_disconnected\"] ? 'Show Only Active Edges' : \"Show All Edges\", click: () => {\n                        const view = {...viewConfig, include_disconnected: !viewConfig[\"include_disconnected\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }}, \n                     {name: viewConfig[\"show_all_nodes\"] ? 'Hide inactive callbacks' : 'Show All Callbacks', click: () => {\n                        const view = {...viewConfig, show_all_nodes: !viewConfig[\"show_all_nodes\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: 'Autosize', click: () => {\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, viewConfig, node_events, theme);\n                     }}, \n                     {name: viewConfig[\"rankDir\"] === \"LR\" ? 'Change Layout to Top-Bottom' : \"Change Layout to Left-Right\", click: () => {\n                        if(viewConfig[\"rankDir\"] === \"LR\"){\n                            const view = {...viewConfig, rankDir: \"BT\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }else{\n                            const view = {...viewConfig, rankDir: \"LR\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }\n                     }},\n                     {name: viewConfig[\"packet_flow_view\"] ? \"View Connection Directions\" : \"View Egress Routes\" , click: () => {\n                        const view = {...viewConfig, packet_flow_view: !viewConfig[\"packet_flow_view\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: \"Download Graph\", click: () => {\n                        saveSvgAsPng(document.getElementById(\"callbacksgraph\"), \"diagram.png\");\n                     }}];\n    const getConfigString = () => {\n        let config = \"\";\n        config += viewConfig[\"include_disconnected\"] ? \"Showing All Edges, \" : \"Showing Only Active Edges, \";\n        config += viewConfig[\"show_all_nodes\"] ? \"Showing All Callbacks, \" : \"Showing Active Callbacks, \";\n        config += \"Layout: \" + viewConfig[\"rankDir\"] + \", \";\n        config += viewConfig[\"packet_flow_view\"] ? \"Showing Egress Routes\" : \"Showing Connections Paths\";\n        return config;\n    }\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n      };\n    useEffect( () => {\n        const allEdges = [...callbackgraphedges];\n        drawC2PathElements(allEdges, dagreRef, reZoom, viewConfig, node_events, theme);\n        setReZoom(false);\n    }, [callbackgraphedges, reZoom, viewConfig, theme])\n    return (\n        <React.Fragment>\n            <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginTop: \"10px\"}} color=\"primary\">\n                <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}>\n                        Actions <ArrowDropDownIcon />\n                </Button>\n            </ButtonGroup>\n            {getConfigString()}\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                      <MenuList id=\"split-button-menu\">\n                        {options.map((option, index) => (\n                          <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(event, index)}\n                          >\n                            {option.name}\n                          </MenuItem>\n                        ))}\n                      </MenuList>\n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyRemoveEdgeDialogOpen}\n                    onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} identifier=\"edge_id\" display=\"display\"\n                                        onSubmit={onSubmitManuallyRemoveEdge} options={edgeOptions} title={\"Manually Remove Edge\"} action={\"remove\"} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyAddEdgeDialogOpen}\n                    onClose={()=>{setManuallyAddEdgeDialogOpen(false);}} \n                    innerDialog={<ManuallyAddEdgeDialog onClose={()=>{setManuallyAddEdgeDialogOpen(false);}}\n                                        onSubmit={onSubmitManuallyAddEdge} source={addEdgeSource} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedLinkCommand} callback={selectedCallback} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectLinkCommandDialog}\n                    onClose={()=>{setOpenSelectLinkCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectLinkCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedLinkCommand} options={linkCommands} title={\"Select Link Command\"} \n                                        action={\"select\"} display={\"display\"} identifier={\"display\"}/>}\n                />\n            <div style={{maxWidth: \"100%\", \"overflow\": \"auto\", height: \"100%\"}}>\n                <svg id=\"callbacksgraph\" ref={dagreRef} width=\"100%\" height=\"98%\"></svg> \n            </div>\n        </React.Fragment>\n    );\n}\n\n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {CallbacksTable} from './CallbacksTable';\nimport {CallbacksGraph} from './CallbacksGraph';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n  }\n}\n `;\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\nexport function CallbacksTop({onOpenTab, topDisplay, heights}){\n    const me = useReactiveVar(meState);\n    const [callbacks, setCallbacks] = React.useState([]);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Callbacks, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbacks(subscriptionData.data.callback);\n        }\n    });\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const onOpenTabLocal = ({tabType, tabID, callbackID}) => {\n      for(let i = 0; i < callbacks.length; i++){\n        if(callbacks[i][\"id\"] === callbackID){\n          const tabData = {tabID, tabType, callbackID, \n              payloadtype: callbacks[i][\"payload\"][\"payloadtype\"][\"ptype\"],\n              payloadtype_id: callbacks[i][\"payload\"][\"payloadtype\"][\"id\"],\n              operation_id: callbacks[i][\"operation_id\"],\n              payloadDescription: callbacks[i][\"payload\"][\"tag\"],\n              callbackDescription: callbacks[i][\"description\"],\n              host: callbacks[i][\"host\"],\n              os: callbacks[i][\"payload\"][\"os\"]};\n          onOpenTab(tabData);\n        }\n      }\n    }\n    return (\n        topDisplay === \"graph\" ? (\n          <CallbacksGraph maxHeight={\"100%\"} topHeight={heights.top} key={\"callbacksgraph\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        ) : (\n          <CallbacksTable key={\"callbackstable\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        )\n    );\n}","import React, { useEffect }  from 'react';\nimport {CallbacksTabs} from './CallbacksTabs';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AspectRatioIcon from '@material-ui/icons/AspectRatio';\nimport TocIcon from '@material-ui/icons/Toc';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport {HeightsDialog} from './HeightsDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CallbacksTop} from './CallbacksTop';\n\n const useStyles = makeStyles((theme) => ({\n  root: {\n    transform: 'translateZ(0px)',\n    flexGrow: 1,\n  },\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n    '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n      top: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n  },\n}));\nexport function Callbacks(){\n    const [topDisplay, setTopDisplay] = React.useState(\"table\");\n    const [openTabs, setOpenTabs] = React.useState([]);\n    const [clickedTabId, setClickedTabId] = React.useState(\"\");\n    const [heights, setHeights] = React.useState({top: \"29%\", bottom: \"65%\"});\n    useEffect( () => {\n      const oldTabs = localStorage.getItem(\"openTabs\");\n      if(oldTabs !== undefined && oldTabs !== null){\n        try{\n          const tabs = JSON.parse(oldTabs);\n          setOpenTabs(tabs);\n\n        }catch(error){\n          console.log(\"failed to parse oldTabs\", error);\n        }\n      }\n      const oldHeights = localStorage.getItem(\"heights\");\n      if(oldHeights !== undefined && oldHeights !== null){\n        try{\n          const newHeights = JSON.parse(oldHeights);\n          setHeights(newHeights);\n        }catch(error){\n          console.log(\"failed to parse oldHeights\", error);\n        }\n      }\n    }, []);\n    const onOpenTab = (tabData) => {\n        let found = false;\n        openTabs.forEach( (tab) => {\n            if(tab.tabID === tabData.tabID) found = true;\n        });\n        //console.log(\"found is\", found, tabData.tabID, tabData.tabType, tabData.callbackID, openTabs);\n        if(!found){\n          const tabs = [...openTabs, {...tabData}];\n          localStorage.setItem(\"openTabs\", JSON.stringify(tabs));\n          setOpenTabs(tabs);\n        }\n        setClickedTabId(tabData.tabID);\n    };\n    const onEditTabDescription = (tabInfo, description) => {\n      const tabs = openTabs.map( (t) => {\n        if(t.tabID === tabInfo.tabID){\n          return {...t, customDescription: description};\n        }else{\n          return {...t};\n        }\n      });\n      setOpenTabs(tabs);\n      localStorage.setItem(\"openTabs\", JSON.stringify(tabs));\n    }\n    const onCloseTab = ({tabID, index}) => {\n        const tabSet = openTabs.filter( (tab) => {\n            return tab.tabID !== tabID;\n        });\n        localStorage.setItem(\"openTabs\", JSON.stringify(tabSet));\n        setOpenTabs(tabSet);\n    };\n    const clearSelectedTab =  React.useCallback(() => {\n        setClickedTabId(\"\");\n    }, []);\n    \n    const onSubmitHeights = React.useCallback( (newHeights) => {\n        setHeights(newHeights);\n        localStorage.setItem(\"heights\", JSON.stringify(newHeights));\n    }, []);\n    return (\n        <div style={{maxWidth: \"100%\", height: \"calc(95vh)\", maxHeight: \"calc(95vh)\"}}>\n              <React.Fragment>\n                <div style={{maxHeight: heights.top, height: heights.top}}>\n                  <CallbacksTop topDisplay={topDisplay} onOpenTab={onOpenTab} heights={heights}/>\n                </div>\n                <div style={{maxHeight: heights.bottom, height: heights.bottom}}>\n                  <CallbacksTabs onCloseTab={onCloseTab} onEditTabDescription={onEditTabDescription} clearSelectedTab={clearSelectedTab} tabHeight={heights.bottom} maxHeight={heights.bottom} key={\"callbackstabs\"} clickedTabId={clickedTabId} openTabs={openTabs} />\n                </div>\n              </React.Fragment>\n            <SpeedDialWrapper setTopDisplay={setTopDisplay} heights={heights} onSubmitHeights={onSubmitHeights}/>\n        </div>\n    );\n}\n\nfunction SpeedDialWrapperPreMemo({setTopDisplay, onSubmitHeights, heights}) {\n  const [open, setOpen] = React.useState(false);\n  const classes = useStyles();\n  const [openHeightsDialog, setOpenHeightsDialog] = React.useState(false);\n  const submitHeights = (newHeights) => {\n    setOpen(false);\n    onSubmitHeights(newHeights);\n  }\n  const actions = React.useMemo( () => [\n    { icon: <TocIcon />, name: 'Table layout', onClick: () => {setTopDisplay(\"table\")}},\n    { icon: <AssessmentIcon />, name: 'Graph layout', onClick: () => {setTopDisplay(\"graph\")}},\n    { icon: <AspectRatioIcon />, name: 'Adjust Top/Bottom Size' , onClick: () => {setOpenHeightsDialog(true);setOpen(false);}},\n  ], []);\n  return (\n    <React.Fragment>\n      {openHeightsDialog && \n        <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openHeightsDialog} \n                onClose={()=>{setOpenHeightsDialog(false);setOpen(false);}} \n                innerDialog={<HeightsDialog onClose={()=>{setOpenHeightsDialog(false);setOpen(false);}} heights={heights} onSubmit={submitHeights} />}\n            />\n      }\n      <SpeedDial\n          ariaLabel=\"SpeedDial example\"\n          className={classes.speedDial}\n          icon={<SpeedDialIcon />}\n          onClose={()=>{setOpen(false);}}\n          onOpen={()=>{setOpen(true);}}\n          FabProps={{ color: \"secondary\" }}\n          open={open}\n          direction=\"down\"\n        >\n          {actions.map((action) => (\n            <SpeedDialAction\n              key={action.name}\n              icon={action.icon}\n              tooltipTitle={action.name}\n              onClick={action.onClick}\n            />\n          ))}\n        </SpeedDial>\n      </React.Fragment>\n  )\n}\nconst SpeedDialWrapper = React.memo(SpeedDialWrapperPreMemo);","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport {taskingDataFragment} from '../Callbacks/CallbacksTabsTasking'\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\n\nconst fetchLimit = 20;\nconst responseSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {parent_task_id: {_is_null: true}, responses: {response_text: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {parent_task_id: {_is_null: true}, responses: {response_text: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst parameterSearch = gql`\n${taskingDataFragment}\nquery parametersQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst commentSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\n\nexport function SearchTabTasksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tasks\"} iconComponent={<AssignmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTasksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const searchFieldOptions = [\"Output\", \"Parameters\", \"Comment\"];\n\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (querySearch, querySearchField) => {\n            let adjustedSearchField = querySearchField ? querySearchField : searchField;\n            let adjustedSearch = querySearch ? querySearch : search;\n            switch(adjustedSearchField){\n            case \"Output\":\n                props.onOutputSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Parameters\":\n                props.onParameterSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Output\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Output\");\n                props.onChangeSearchField(\"Output\");\n                props.changeSearchParam(\"searchField\", \"Output\");\n            }\n            submitSearch(adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={4}>\n                <FormLabel component=\"legend\">Search Task's</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"task_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTasksPanel = (props) =>{\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n    }\n    const [getOutputSearch] = useLazyQuery(responseSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            console.log(data);\n            snackActions.dismiss();\n            snackActions.success(\"Found Matches\");\n            if(data.task_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }\n            setTotalCount(data.task_aggregate.aggregate.count);\n            setTaskingData({task: data.task});\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getParameterSearch] = useLazyQuery(parameterSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            console.log(data);\n            snackActions.dismiss();\n            snackActions.success(\"Found Matches\");\n            if(data.task_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }\n            setTotalCount(data.task_aggregate.aggregate.count);\n            setTaskingData({task: data.task});\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            snackActions.success(\"Found Matches\");\n            if(data.task_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }\n            setTotalCount(data.task_aggregate.aggregate.count);\n            setTaskingData({task: data.task});\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onOutputSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        getOutputSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\"\n        }})\n    }\n    const onParameterSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        getParameterSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\"\n        }})\n    }\n    const onCommentSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        console.log(\"search\", search);\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        setSearch(search);\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\"\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: 0});\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: 0});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTasksSearchPanel onChangeSearchField={onChangeSearchField} onOutputSearch={onOutputSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onParameterSearch={onParameterSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                \n                {\n                    taskingData.task.length > 0 ? (\n                        taskingData.task.map( (task) => (\n                            <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} />\n                        ))\n                    ) : (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>)\n                }\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport {useTheme} from '@material-ui/core/styles';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\n\nconst useStyles =  makeStyles(theme => ({\n  root: {\n      [theme.breakpoints.up('sm')]: {\n          minWidth: '344px !important',\n      },\n  },\n  typography: {\n      fontWeight: 'bold',\n  },\n  actionRoot: {\n      padding: '8px 8px 8px 16px',\n  },\n  icons: {\n      marginLeft: 'auto',\n      float: \"right\"\n  },\n  expand: {\n      padding: '8px 8px',\n      transform: 'rotate(0deg)',\n      transition: theme.transitions.create('transform', {\n          duration: theme.transitions.duration.shortest,\n      }),\n  },\n  expandOpen: {\n      transform: 'rotate(180deg)',\n  },\n  collapse: {\n      padding: 16,\n  },\n  checkIcon: {\n      fontSize: 20,\n      color: '#b3b3b3',\n      paddingRight: 4,\n  },\n  button: {\n      padding: 0,\n      textTransform: 'none',\n  },\n}));\n\nexport const MythicSnackDownload = React.forwardRef((props, ref) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const { closeSnackbar } = useSnackbar();\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpandClick = () => {\n      setExpanded(!expanded);\n  };\n\n  const handleDismiss = () => {\n      closeSnackbar(props.id);\n  };\n\n  return (\n      <SnackbarContent ref={ref} className={classes.root}>\n          <Card style={{backgroundColor: theme.palette.success.main}} >\n              <CardActions classes={{ root: classes.actionRoot }}>\n                  <Typography variant=\"subtitle2\" className={classes.typography}>{props.title}</Typography>\n                  <div className={classes.icons}>\n                      <IconButton\n                          aria-label=\"Show more\"\n                          className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                          onClick={handleExpandClick}\n                      >\n                          <ExpandMoreIcon />\n                      </IconButton>\n                      <IconButton className={classes.expand} onClick={handleDismiss}>\n                          <CloseIcon />\n                      </IconButton>\n                  </div>\n              </CardActions>\n              <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                  <Paper className={classes.collapse}>\n                      <Typography gutterBottom>{props.innerText}</Typography>\n                      <Button size=\"small\" className={classes.button} download href={props.downloadLink}>\n                          <CheckCircleIcon className={classes.checkIcon} />\n                          Download now\n                      </Button>\n                  </Paper>\n              </Collapse>\n          </Card>\n      </SnackbarContent>\n  );\n});","import React, {useEffect} from 'react';\nimport {Button, Link, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\nimport {useTheme} from '@material-ui/core/styles';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Switch from '@material-ui/core/Switch';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport ArchiveIcon from '@material-ui/icons/Archive';\nimport { gql, useMutation } from '@apollo/client';\nimport { ResponseDisplayScreenshotModal } from '../Callbacks/ResponseDisplayScreenshotModal';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\nconst downloadBulkQuery = gql`\nmutation downloadBulkMutation($files: [String!]!){\n    download_bulk(files: $files){\n        status\n        error\n        file_id\n    }\n}\n`;\nconst updateFileDeleted = gql`\nmutation updateFileMutation($file_id: Int!){\n    update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {deleted: true}) {\n        id\n    }\n}\n`;\nexport function FileMetaDownloadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({id}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >File</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaDownloadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaDownloadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.update_filemeta_by_pk);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    <Tooltip title=\"Toggle to download multiple files at once\">\n                        <Switch\n                            checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                            onChange={onSelectChanged}\n                            color=\"primary\"\n                            inputProps={{ 'aria-label': 'primary checkbox' }}\n                            name=\"select_multiple\"\n                            />\n                    </Tooltip>\n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell style={{width: \"16rem\"}}>md5</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>sha1</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell>Chunk Size</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>{props.chunk_size}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (\n                                                        null\n                                                    ) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaUploadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({id}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Source</TableCell>\n                        <TableCell >Destination</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaUploadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaUploadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.update_filemeta_by_pk);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    <Tooltip title=\"Toggle to download multiple files at once\">\n                        <Switch\n                            checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                            onChange={onSelectChanged}\n                            color=\"primary\"\n                            inputProps={{ 'aria-label': 'primary checkbox' }}\n                            name=\"select_multiple\"\n                            />\n                    </Tooltip>\n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" download underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.filename_text}</Link>\n                </TableCell>\n                <TableCell  style={{wordBreak: \"break-all\"}}>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell>Chunk Size</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>{props.chunk_size}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaScreenshotTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>   \n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Thumbnail</TableCell>\n                        <TableCell >Filename</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaScreenshotTableRow\n                        key={\"file\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\nfunction FileMetaScreenshotTableRow(props){\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openScreenshot, setOpenScreenshot] = React.useState(false);\n\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell>\n                    <img onClick={() => setOpenScreenshot(true)} src={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} style={{width: \"150px\", height: \"150px\", cursor: \"pointer\"}} />\n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n                        onClose={()=>{setOpenScreenshot(false);}} \n                        innerDialog={<ResponseDisplayScreenshotModal href={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} onClose={()=>{setOpenScreenshot(false);}} />} />\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.filename_text}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell>Chunk Size</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>{props.chunk_size}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}","import React, { useEffect } from 'react';\nimport {Button, IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog, MythicViewJSONAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport {DownloadHistoryDialog} from '../Callbacks/DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst updateFileComment = gql`\nmutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!){\n    update_filebrowserobj_by_pk(pk_columns: {id: $filebrowserobj_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileBrowserTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updates = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment}\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updates);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Host / Path</TableCell>\n                        <TableCell >Modify Time</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Permissions</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Downloads</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileBrowserTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileBrowserTableRow(props){\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filebrowserobj_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {filebrowserobj_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title=\"View Permissions Data\" leftColumn=\"Permission\" rightColumn=\"Value\" value={props.permissions} onClose={()=>{setViewPermissionsDialogOpen(false);}} />}\n                    />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileHistoryDialogOpen} \n                    onClose={()=>{setFileHistoryDialogOpen(false);}} \n                    innerDialog={<DownloadHistoryDialog title=\"Download History\" value={props.filemeta} onClose={()=>{setFileHistoryDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit File Browser Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", textDecoration: props.deleted ? \"strike-through\" : \"\"}}>{props.full_path_text}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.modify_time}</Typography>\n                </TableCell>\n                <TableCell><IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton><Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography></TableCell>\n                <TableCell>\n                    <Button color=\"primary\" variant=\"outlined\" onClick={() => setViewPermissionsDialogOpen(true)}><PlaylistAddCheckIcon /></Button>\n                </TableCell>\n                <TableCell>\n                    {props.filemeta.length > 0 ? (\n                        <Tooltip title=\"View Download History and Download Files\">\n                            <Button color=\"primary\" variant=\"contained\" onClick={() => setFileHistoryDialogOpen(true)}><HistoryIcon /></Button>\n                        </Tooltip>\n                    ): (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {FileMetaDownloadTable, FileMetaUploadTable, FileMetaScreenshotTable} from './FileMetaTable';\nimport {FileBrowserTable} from './FileBrowserTable';\n\nconst fileMetaFragment = gql`\nfragment filemetaData on filemeta{\n    agent_file_id\n    chunk_size\n    chunks_received\n    complete\n    deleted\n    filename_text\n    full_remote_path_text\n    host\n    id\n    is_download_from_agent\n    is_payload\n    is_screenshot\n    md5\n    operator {\n        id\n        username\n    }\n    sha1\n    timestamp\n    total_chunks\n    task {\n        id\n        comment\n        command {\n            cmd\n            id\n        }\n    }\n}\n`;\nconst fileBrowserFragment = gql`\nfragment filebrowserData on filebrowserobj{\n    comment\n    deleted\n    full_path_text\n    host\n    id\n    is_file\n    modify_time\n    permissions\n    size\n    filemeta {\n        id\n        agent_file_id\n        chunks_received\n        complete\n        total_chunks\n        timestamp\n        task {\n            id\n            comment\n        }\n    }\n}\n`;\nconst fetchLimit = 20;\nconst filenameFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaUploadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaDownloadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {full_path_text: {_ilike: $filename}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, full_path_text: {_ilike: $filename}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst hashFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaUploadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaUploadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {comment: {_ilike: $comment}}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {comment: {_ilike: $comment}}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {comment: {_ilike: $comment}}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {comment: {_ilike: $comment}}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst filenameFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaScreenshotQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaScreenshotQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaScreenshotQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {comment: {_ilike: $comment}}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {comment: {_ilike: $comment}}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nexport function SearchTabFilesLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Files\"} iconComponent={<AttachmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabFilesSearchPanel = (props) => {\n    const theme = useTheme();\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const searchFieldOptions = [\"Filename\", \"Hash\", \"Comment\"];\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const searchLocationOptions = [\"Uploads\", \"Downloads\", \"FileBrowser\", \"Screenshots\"];\n\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchLocationChange = (event) => {\n        setSearchLocation(event.target.value);\n        props.onChangeSearchLocation(event.target.value);\n        props.changeSearchParam(\"location\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const handleSearchHostValueChange = (name, value, error) => {\n        setSearchHost(value);\n        props.changeSearchParam(\"host\", value);\n    }\n    const submitSearch = (querySearch, querySearchHost, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        let adjustedSearchHost = querySearchHost ? querySearchHost : searchHost;\n        switch(adjustedSearchField){\n            case \"Filename\":\n                props.onFilenameSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0})\n                break;\n            case \"Hash\":\n                props.onHashSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchHost = \"\";\n            let adjustedSearchField = \"User\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Filename\");\n                props.onChangeSearchField(\"Filename\");\n                props.changeSearchParam(\"searchField\", \"Filename\");\n            }\n            if(props.queryParams.has(\"location\") && searchLocationOptions.includes(props.queryParams.get(\"location\"))){\n                setSearchLocation(props.queryParams.get(\"location\"));\n                props.onChangeSearchLocation(props.queryParams.get(\"location\"));\n            }\n            if(props.queryParams.has(\"host\")){\n                setSearchHost(props.queryParams.get(\"host\"));\n                adjustedSearchHost = props.queryParams.get(\"host\")\n            }\n            submitSearch(adjustedSearch, adjustedSearchHost, adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={1} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Host Name Search...\" value={searchHost}\n                    onChange={handleSearchHostValueChange} onEnter={submitSearch} name=\"Host Name Search...\" />\n            </Grid>\n            <Grid item xs={3}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={3}>\n                <FormLabel component=\"legend\">Search File's</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n            <Grid item xs={4}>\n            <FormLabel component=\"legend\">Search Location</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchLocation\" value={searchLocation} onChange={handleSearchLocationChange}>\n                        {searchLocationOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchlocopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabFilesPanel = (props) =>{\n    const [fileMetaData, setFileMetaData] = React.useState([]);\n    const [fileBrowserData, setFileBrowserData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n    }\n    const onChangeSearchLocation = (field) => {\n        setSearchLocation(field);\n        setFileMetaData([]);\n        setFileBrowserData([]);\n    }\n    const handleFileMetaSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.filemeta_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.filemeta_aggregate.aggregate.count);\n        setFileBrowserData([]);\n        setFileMetaData(data.filemeta);\n    }\n    const handleFileBrowserSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.filebrowserobj_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.filebrowserobj_aggregate.aggregate.count);\n        //console.log(data);\n        setFileBrowserData(data.filebrowserobj);\n        setFileMetaData([]);\n    }\n    const [getfilenameFileMetaUploadSearch] = useLazyQuery(filenameFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getfilenameFileMetaDownloadSearch] = useLazyQuery(filenameFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getfilenameFileBrowserSearch] = useLazyQuery(filenameFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getfilenameFileMetaScreenshotSearch] = useLazyQuery(filenameFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [gethashFileMetaUploadSearch] = useLazyQuery(hashFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [gethashFileMetaDownloadSearch] = useLazyQuery(hashFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [gethashFileMetaScreenshotSearch] = useLazyQuery(hashFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getcommentFileMetaUploadSearch] = useLazyQuery(commentFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getcommentFileMetaDownloadSearch] = useLazyQuery(commentFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getcommentFileBrowserSearch] = useLazyQuery(commentFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getcommentFileMetaScreenshotSearch] = useLazyQuery(commentFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onFilenameSearch = ({search, searchHost, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(searchLocation === \"FileBrowser\"){\n            getfilenameFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(searchLocation === \"Uploads\"){\n            getfilenameFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(searchLocation === \"Downloads\"){\n            getfilenameFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getfilenameFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onHashSearch = ({search, searchHost, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(searchLocation === \"FileBrowser\"){\n            snackActions.dismiss();\n            snackActions.warning(\"FileBrowser doesn't currently track file hashes\");\n        }else if(searchLocation === \"Uploads\"){\n            gethashFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(searchLocation === \"Downloads\"){\n            gethashFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            gethashFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onCommentSearch = ({search, searchHost, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        setSearch(new_search);\n        setSearchHost(searchHost);\n        if(searchLocation === \"FileBrowser\"){\n            getcommentFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(searchLocation === \"Uploads\"){\n            getcommentFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(searchLocation === \"Downloads\"){\n            getcommentFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getcommentFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    \n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabFilesSearchPanel onChangeSearchField={onChangeSearchField} onFilenameSearch={onFilenameSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onHashSearch={onHashSearch} onCommentSearch={onCommentSearch} onChangeSearchLocation={onChangeSearchLocation} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {fileMetaData.length > 0 ? (\n                    searchLocation === \"Uploads\" ? (<FileMetaUploadTable files={fileMetaData} />) : (searchLocation === \"Downloads\" ? (<FileMetaDownloadTable files={fileMetaData} />) : (<FileMetaScreenshotTable files={fileMetaData} />))\n                ) : (fileBrowserData.length > 0 ? (<FileBrowserTable files={fileBrowserData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                ))}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst updateCredentialComment = gql`\nmutation updateCommentMutation($credential_id: Int!, $comment: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {comment: $comment}) {\n        comment\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialAccount = gql`\nmutation updateAccountMutation($credential_id: Int!, $account: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {account: $account}) {\n        account\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialRealm = gql`\nmutation updateAccountMutation($credential_id: Int!, $realm: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {realm: $realm}) {\n        realm\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialCredential = gql`\nmutation updateAccountMutation($credential_id: Int!, $credential: bytea!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {credential_raw: $credential}) {\n        credential_text\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialDeleted = gql`\nmutation updateAccountMutation($credential_id: Int!, $deleted: Boolean!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\n\nexport function CredentialTable(props){\n    const [credentials, setCredentials] = React.useState([]);\n    useEffect( () => {\n        setCredentials([...props.credentials]);\n    }, [props.credentials]);\n    const onEditComment = ({id, comment, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, comment, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditAccount = ({id, account, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, account, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditRealm = ({id, realm, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, realm, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditCredential = ({id, credential_text, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, credential_text, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditDeleted = ({id, deleted, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Account</TableCell>\n                        <TableCell >Realm</TableCell>\n                        <TableCell >Credential</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell >Timestamp</TableCell>\n                        <TableCell >Task / Operator</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Type</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {credentials.map( (op) => (\n                    <CredentialTableRow\n                        key={\"cred\" + op.id}\n                        onEditComment={onEditComment}\n                        onEditAccount={onEditAccount}\n                        onEditRealm={onEditRealm}\n                        onEditCredential={onEditCredential}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CredentialTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [editAccountDialogOpen, setEditAccountDialogOpen] = React.useState(false);\n    const [editRealmDialogOpen, setEditRealmDialogOpen] = React.useState(false);\n    const [editCredentialDialogOpen, setEditCredentialDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateCredentialComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_credential_by_pk);\n        }\n    });\n    const [updateAccount] = useMutation(updateCredentialAccount, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated account\");\n            props.onEditAccount(data.update_credential_by_pk);\n        }\n    });\n    const [updateRealm] = useMutation(updateCredentialRealm, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated realm\");\n            props.onEditRealm(data.update_credential_by_pk);\n        }\n    });\n    const [updateCredential] = useMutation(updateCredentialCredential, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated credential\");\n            props.onEditCredential(data.update_credential_by_pk);\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated deleted status\");\n            props.onEditDeleted(data.update_credential_by_pk);\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {credential_id: props.id, comment: comment}})\n    }\n    const onSubmitUpdatedAccount = (account) => {\n        updateAccount({variables: {credential_id: props.id, account: account}})\n    }\n    const onSubmitUpdatedRealm = (realm) => {\n        updateRealm({variables: {credential_id: props.id, realm: realm}})\n    }\n    const onSubmitUpdatedCredential = (credential) => {\n        updateCredential({variables: {credential_id: props.id, credential: credential}})\n    }\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {credential_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editAccountDialogOpen} \n                    onClose={()=>{setEditAccountDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Account\" onSubmit={onSubmitUpdatedAccount} value={props.account} onClose={()=>{setEditAccountDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editRealmDialogOpen} \n                    onClose={()=>{setEditRealmDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Realm\" onSubmit={onSubmitUpdatedRealm} value={props.realm} onClose={()=>{setEditRealmDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCredentialDialogOpen} \n                    onClose={()=>{setEditCredentialDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Credential\" onSubmit={onSubmitUpdatedCredential} value={props.credential_text} onClose={()=>{setEditCredentialDialogOpen(false);}} />}\n                />\n                \n                <TableCell>{props.deleted ? (\n                    <Tooltip title=\"Restore Credential for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Delete Credential so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <IconButton onClick={() => setEditAccountDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.account}</Typography>\n                </TableCell>\n                <TableCell >\n                    <IconButton onClick={() => setEditRealmDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.realm}</Typography>\n                </TableCell>\n                <TableCell >\n                    <IconButton onClick={() => setEditCredentialDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.credential_text}</Typography>\n                </TableCell>\n                <TableCell>\n                    <IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography>\n                    </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.task_id !== null ? (\n                        props.task_id\n                    ): (props.operator.username)}\n                </TableCell>\n                <TableCell>{props.type}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nexport function CredentialTableNewCredentialDialog(props) {\n  const [credentialType, setCredentialType] = React.useState(\"plaintext\");\n  const credentialOptions = [\n    \"plaintext\", \"ticket\", \"hash\", \"certificate\", \"key\", \"hex\"\n  ];\n  const [account, setAccount] = React.useState(\"\");\n  const [realm, setRealm] = React.useState(\"\");\n  const [credential, setCredential] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const classes = useStyles();\n\n  const onSubmit = () => {\n    props.onSubmit({\n      realm,\n      account,\n      comment,\n      credential,\n      \"type\": credentialType\n    });\n    props.onClose();\n  }\n  const onAccountChange = (name, value, error) => {\n    setAccount(value);\n  }\n  const onCommentChange = (name, value, error) => {\n    setComment(value);\n  }\n  const onRealmChange = (name, value, error) => {\n    setRealm(value);\n  }\n  const onCredentialChange = (name, value, error) => {\n    setCredential(value);\n  }\n  const handleCredentialTypeChange = (event) => {\n    setCredentialType(event.target.value);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Register New Credential</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Which Type of Credential</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  id=\"operator-chip\"\n                  value={credentialType}\n                  onChange={handleCredentialTypeChange}\n                  input={<Input />}\n                  MenuProps={MenuProps}\n                >\n                  {credentialOptions.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <MythicTextField value={account} onChange={onAccountChange} name=\"Account Name\"/>\n              <MythicTextField value={realm} onChange={onRealmChange} name=\"Realm or Domain\"/>\n              <MythicTextField value={comment} onChange={onCommentChange} name=\"Comment\"/>\n              <MythicTextField multiline value={credential} onChange={onCredentialChange} name=\"Credential\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Create\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {CredentialTable} from './CredentialTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CredentialTableNewCredentialDialog} from './CredentialTableNewCredentialDialog';\n\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst fetchLimit = 20;\nconst accountSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $account: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst realmSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $realm: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst credentialSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $credential: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst commentSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $comment: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      id\n    }\n  }\n`;\n\nexport function SearchTabCredentialsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Credentials\"} iconComponent={<VpnKeyIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCredentialsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const searchFieldOptions = [\"Account\", \"Realm\", \"Comment\", \"Credential\"];\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Account\":\n                props.onAccountSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Realm\":\n                props.onRealmSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Credential\":\n                props.onCredentialSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.OnTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Account\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Account\");\n                props.onChangeSearchField(\"Account\");\n                props.changeSearchParam(\"searchField\", \"Account\");\n            }\n            submitSearch(adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={5}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={5}>\n                <FormLabel component=\"legend\">Search Credential's</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                    onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                    innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                />\n                <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCredentialsPanel = (props) =>{\n    const [credentialaData, setCredentialData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setCredentialData([]);\n    }\n    const handleCredentialSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.credential_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.credential_aggregate.aggregate.count);\n        setCredentialData(data.credential);\n    }\n    const [getAccountSearch] = useLazyQuery(accountSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getRealmSearch] = useLazyQuery(realmSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getCredentialSearch] = useLazyQuery(credentialSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onAccountSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getAccountSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            account: \"%\" + search + \"%\",\n        }})\n    }\n    const onRealmSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getRealmSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            realm: \"%\" + search + \"%\",\n        }})\n    }\n    const onCredentialSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCredentialSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            credential: \"%\" + search + \"%\",\n        }})\n    }\n    const onCommentSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            comment: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: 0});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: 0});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: 0});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabCredentialsSearchPanel onChangeSearchField={onChangeSearchField} onAccountSearch={onAccountSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onRealmSearch={onRealmSearch} onCredentialSearch={onCredentialSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {credentialaData.length > 0 ? (\n                    <CredentialTable credentials={credentialaData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {Link, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nexport function KeylogsTable(props){\n    const [keylogs, setKeylogs] = React.useState([]);\n    useEffect( () => {\n        setKeylogs([...props.keylogs]);\n    }, [props.keylogs]);\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >User</TableCell>\n                        <TableCell >Program</TableCell>\n                        <TableCell>Timestamp</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell>Task</TableCell>\n                        <TableCell >Keylog</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {keylogs.map( (op) => (\n                    <KeylogTableRow\n                        key={\"cred\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction KeylogTableRow(props){\n    const me = useReactiveVar(meState);\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.window}</Typography>\n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.task.callback.host}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.keystrokes_text}</Typography>\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {KeylogsTable} from './KeylogsTable';\n\nconst keylogFragment = gql`\nfragment keylogData on keylog{\n    keystrokes_text\n    task {\n        id\n        callback {\n            host\n            id\n        }\n    }\n    user\n    window\n    timestamp\n    id\n}\n`;\nconst fetchLimit = 20;\nconst keylogSearch = gql`\n${keylogFragment}\nquery keylogQuery($operation_id: Int!, $keylog: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userUniqueSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: user, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: user, offset: $offset, order_by: {user: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programUniqueSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: window, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: window, offset: $offset, order_by: {window: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst hostSearch = gql`\n${keylogFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\n\nexport function SearchTabKeylogsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Keylogs\"} iconComponent={<KeyboardIcon />} {...props}/>\n    )\n}\n\nconst SearchTabKeylogsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const searchFieldOptions = [\"Keystroke\", \"User\", \"Program\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Keystroke\":\n                props.onKeylogSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Program\":\n                props.onProgramSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Keystroke\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Keystroke\");\n                props.onChangeSearchField(\"Keystroke\");\n                props.changeSearchParam(\"searchField\", \"Keystroke\");\n            }\n            submitSearch(adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Keylog's</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabKeylogsPanel = (props) =>{\n    const [keylogData, setKeylogData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setKeylogData([]);\n    }\n    const handleKeylogSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.keylog_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.keylog_aggregate.aggregate.count);\n        setKeylogData(data.keylog);\n    }\n    const [getKeylogSearch] = useLazyQuery(keylogSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getUserUniqueSearch] = useLazyQuery(userUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique User\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramSearch] = useLazyQuery(programSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramUniqueSearch] = useLazyQuery(programUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique Program\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onKeylogSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getKeylogSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            keylog: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getUserUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%_%\",\n            }})\n        }else{\n            getUserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onProgramSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getProgramUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%_%\",\n            }})\n        }else{\n            getProgramSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: 0});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabKeylogsSearchPanel onChangeSearchField={onChangeSearchField} onKeylogSearch={onKeylogSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onUserSearch={onUserSearch} onProgramSearch={onProgramSearch} onHostSearch={onHostSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {keylogData.length > 0 ? (\n                    <KeylogsTable keylogs={keylogData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($token_id: Int!, $description: String) {\n  update_token_by_pk(pk_columns: {id: $token_id}, _set: {description: $description}) {\n    description\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    description\n    id\n  }\n}\n`;\n\nexport function TokenDescriptionDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    useQuery(getCommentQuery, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            setComment(data.token_by_pk.description)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        onCompleted: (data) => {\n          console.log('udpated');\n          props.onClose();\n        },\n        onError: (data) => {\n          console.error(data);\n          props.onClose();\n        }\n        \n    });\n    const onCommitSubmit = () => {\n        updateComment({variables: {token_id: props.token_id, description: comment}});\n        \n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Token Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport EditIcon from '@material-ui/icons/Edit';\nimport {TaskTokenDialog} from '../Callbacks/TaskTokenDialog';\nimport {TokenDescriptionDialog} from './TokenDescriptionDialog';\nimport { getThemeProps } from '@material-ui/styles';\n\nconst updateCredentialDeleted = gql`\nmutation updateCredentialDeletedMutation($token_id: Int!, $deleted: Boolean!){\n    update_token_by_pk(pk_columns: {id: $token_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n    }\n}\n`;\nconst updateCallbacksOfDeletedToken = gql`\nmutation updateCallbacksOfDeletedTokenMutation($token_id: Int!, $deleted: Boolean!){\n    update_callbacktoken(where: {token_id: {_eq: $token_id}}, _set: {deleted: $deleted}) {\n        affected_rows\n    }\n}\n`;\n\nexport function TokenTable(props){\n    const [tokens, setTokens] = React.useState([]);\n    useEffect( () => {\n        setTokens([...props.tokens]);\n    }, [props.credentials]);\n\n    const onEditDeleted = ({id, deleted}) => {\n        const updates = tokens.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted}\n            }else{\n                return {...cred}\n            }\n        });\n        setTokens(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Groups</TableCell>\n                        <TableCell >TokenId</TableCell>\n                        <TableCell >Logon Session</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callbacks With Handles</TableCell>\n                        <TableCell >Host</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {tokens.map( (op) => (\n                    <TokenTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction TokenTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [viewTokenDialog, setViewTokenDialog] = React.useState(false);\n    const [editDescriptionDialog, setEditDescriptionDialog] = React.useState(false);\n    const [updateCallbackTokensDeleted] = useMutation(updateCallbacksOfDeletedToken, {\n        onCompleted: (data) => {\n            snackActions.success(\"Removed token from callback\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated deleted status\");\n            if(props.callbacktokens !== null && !props.deleted){\n                //token was deleted, make sure to delete associated callback tokens too\n                updateCallbackTokensDeleted({variables: {token_id: props.id, deleted: true}})\n            }\n            props.onEditDeleted(data.update_token_by_pk);\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {token_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                \n                <TableCell>{props.deleted ? (\n                    <Tooltip title=\"Restore Token for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Delete Token so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.User}</Typography>\n                    \n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.Groups}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.TokenId}</Typography>\n                    <Tooltip title=\"View Token Information\"><IconButton size=\"small\" color=\"primary\" onClick={()=>{setViewTokenDialog(true);}}><ConfirmationNumberIcon/></IconButton></Tooltip>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewTokenDialog} \n                        onClose={()=>{setViewTokenDialog(false);}} \n                        innerDialog={<TaskTokenDialog token_id={props.id} onClose={()=>{setViewTokenDialog(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    {props.logonsession === null ? (\n                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>No Logon Session Data</Typography>\n                    ) : (\n                        <React.Fragment>\n                            {props.logonsession.LogonId} {props.logonsession.LogonType !== null ? (\" (\" + props.logonsession.LogonType + \")\") : (null)}\n                        </React.Fragment>\n                    )}\n                    </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                    <IconButton onClick={() => setEditDescriptionDialog(true)} size=\"small\"><EditIcon /></IconButton>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={editDescriptionDialog} \n                            onClose={()=>{setEditDescriptionDialog(false);}} \n                            innerDialog={<TokenDescriptionDialog token_id={props.id} onClose={()=>{setEditDescriptionDialog(false);}}/>}\n                        />\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>{props.callbacktokens === null ? (null) : (\n                    props.callbacktokens.map( (cbt) => (\n                        cbt.callback_id\n                    )))\n                }</TableCell>\n                <TableCell>{props.host}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {TokenTable} from './TokenTable';\n\nconst tokenFragment = gql`\nfragment tokenData on token{\n    id\n    User\n    Groups\n    TokenId\n    logonsession {\n        LogonType\n        UserName\n        LogonDomain\n        id\n        LogonId\n        authenticationpackages(where: {deleted: {_eq: false}}) {\n            Name\n            id\n        }\n    }\n    task {\n        id\n    }\n    host\n    deleted\n    description\n    callbacktokens(where: {deleted: {_eq: false}}) {\n        callback_id\n        id\n    }\n}\n`;\nconst fetchLimit = 20;\nconst userGroupSearch = gql`\n${tokenFragment}\nquery usergroupQuery($operation_id: Int!, $name: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst SIDSearch = gql`\n${tokenFragment}\nquery sidQuery($operation_id: Int!, $sid: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst logonTypeSearch = gql`\n${tokenFragment}\nquery logontypeQuery($operation_id: Int!, $logontype: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n  }\n`;\nconst hostSearch = gql`\n${tokenFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n}\n`;\nexport function SearchTabTokensLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tokens\"} iconComponent={<ConfirmationNumberIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTokensSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const searchFieldOptions = [\"User/Group\", \"SID\", \"LogonType\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"User/Group\":\n                props.onUserGroupSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"SID\":\n                props.onSIDSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"LogonType\":\n                props.onLogonTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User/Group\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User/Group\");\n                props.onChangeSearchField(\"User/Group\");\n                props.changeSearchParam(\"searchField\", \"User/Group\");\n            }\n            submitSearch(adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Tokens by</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTokensPanel = (props) =>{\n    const [tokenData, setTokenData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setTokenData([]);\n    }\n    const handleTokenSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.token_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.token_aggregate.aggregate.count);\n        setTokenData(data.token);\n    }\n    const [getUserGroupSearch] = useLazyQuery(userGroupSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: handleTokenSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getSIDSearch] = useLazyQuery(SIDSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getLogonTypeSearch] = useLazyQuery(logonTypeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onUserGroupSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserGroupSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            name: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onLogonTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getLogonTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            logontype: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onSIDSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getSIDSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            sid: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: 0});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: 0});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTokensSearchPanel onChangeSearchField={onChangeSearchField} onUserGroupSearch={onUserGroupSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onLogonTypeSearch={onLogonTypeSearch} onHostSearch={onHostSearch} onSIDSearch={onSIDSearch} changeSearchParam={props.changeSearchParam} />\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {tokenData.length > 0 ? (\n                    <TokenTable tokens={tokenData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport {  useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {toggleHideCallbackMutations} from '../Callbacks/CallbackMutations';\n\nexport function CallbackSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, active}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Hide</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >IP</TableCell>\n                        <TableCell >Process Name</TableCell>\n                        <TableCell >ID</TableCell>\n                        <TableCell>Checkin Times</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(toggleHideCallbackMutations, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated active status\");\n            props.onEditDeleted({id: props.id, active: !props.active});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id, active: !props.active}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.active ? \"Hide\" : \"Restore\" }/>\n                \n                <TableCell>{!props.active ? (\n                    <Tooltip title=\"Restore Callback for Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Hide Callback so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.ip}\n                </TableCell>\n                <TableCell>\n                    {props.process_name}\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Initial: {toLocalTime(props.init_callback, me.user.view_utc_time)}\n                    </Typography>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Latest: {toLocalTime(props.last_checkin, me.user.view_utc_time)}\n                    </Typography>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {CallbackSearchTable} from './CallbackSearchTable';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n}\n`;\nconst fetchLimit = 20;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      ...callbackData\n    }\n}\n`;\nconst hostSearch = gql`\n${callbackFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst domainSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $domain: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst descriptionSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $description: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst ipSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $ip: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabCallbacksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Callbacks\"} iconComponent={<PhoneCallbackIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCallbacksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const searchFieldOptions = [\"User\", \"Domain\", \"Host\", \"Description\", \"IP\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Domain\":\n                props.onDomainSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Description\":\n                props.onDescriptionSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"IP\":\n                props.onIPSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User\");\n                props.onChangeSearchField(\"User\");\n                props.changeSearchParam(\"searchField\", \"User\");\n            }\n            submitSearch(adjustedSearch,  adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Callbacks by</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCallbacksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setCallbackData([]);\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.callback_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.callback_aggregate.aggregate.count);\n        setCallbackData(data.callback);\n    }\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getDomainSearch] = useLazyQuery(domainSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getDescriptionSearch] = useLazyQuery(descriptionSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getIPSearch] = useLazyQuery(ipSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            user: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDomainSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDomainSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            domain: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDescriptionSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDescriptionSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            description: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onIPSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getIPSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            ip: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: 0});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabCallbacksSearchPanel onChangeSearchField={onChangeSearchField} onUserSearch={onUserSearch} onIPSearch={onIPSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onDomainSearch={onDomainSearch} onHostSearch={onHostSearch} onDescriptionSearch={onDescriptionSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {callbackData.length > 0 ? (\n                    <CallbackSearchTable callbacks={callbackData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function ArtifactTable(props){\n    const [artifacts, setArtifacts] = React.useState([]);\n    useEffect( () => {\n        setArtifacts([...props.artifacts]);\n    }, [props.artifacts]);\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Type</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callback</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {artifacts.map( (op) => (\n                    <ArtifactTableRow\n                        key={\"cred\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction ArtifactTableRow(props){\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.artifact.name}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.task.callback_id}>\n                            {props.task.callback_id}\n                    </Link>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.host}</Typography>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.artifact_instance_text}</Typography>\n                </TableCell>\n              \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {ArtifactTable} from './ArtifactTable';\n\nconst artifactFragment = gql`\nfragment artifactData on taskartifact{\n    id\n    artifact_instance_text\n    host\n    id\n    timestamp\n    artifact {\n        name\n        description\n    }\n    task {\n        id\n        callback_id\n        command {\n            cmd\n        }\n    }\n}\n`;\nconst fetchLimit = 20;\nconst artifactSearch = gql`\n${artifactFragment}\nquery artifactQuery($operation_id: Int!, $artifact: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      ...artifactData\n    }\n}\n`;\nconst hostSearch = gql`\n${artifactFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst commandSearch = gql`\n${artifactFragment}\nquery commandQuery($operation_id: Int!, $command: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst typeSearch = gql`\n${artifactFragment}\nquery typeQuery($operation_id: Int!, $type: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst taskSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $task_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst callbackSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $callback_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\n\nexport function SearchTabArtifactsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Artifacts\"} iconComponent={<FingerprintIcon />} {...props}/>\n    )\n}\n\nconst SearchTabArtifactsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const searchFieldOptions = [\"Artifact\", \"Command\", \"Host\", \"Type\", \"Task\", \"Callback\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Artifact\":\n                props.onArtifactSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Command\":\n                props.onCommandSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.onTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Task\":\n                props.onTaskSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Callback\":\n                props.onCallbackSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Artifact\";\n            if(props.queryParams.has(\"search\")){\n                setSearch(props.queryParams.get(\"search\"));\n                adjustedSearch = props.queryParams.get(\"search\");\n            }\n            if(props.queryParams.has(\"searchField\") && searchFieldOptions.includes(props.queryParams.get(\"searchField\"))){\n                setSearchField(props.queryParams.get(\"searchField\"));\n                props.onChangeSearchField(props.queryParams.get(\"searchField\"));\n                adjustedSearchField = props.queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Artifact\");\n                props.onChangeSearchField(\"Artifact\");\n                props.changeSearchParam(\"searchField\", \"Artifact\");\n            }\n            submitSearch(adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index, props.queryParams])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Artifacts by</FormLabel>\n                <FormControl component=\"fieldset\">\n                    <RadioGroup row aria-label=\"file_component\" name=\"searchField\" value={searchField} onChange={handleSearchFieldChange}>\n                        {searchFieldOptions.map( (opt) => (\n                            <FormControlLabel value={opt} key={\"searchopt\" + opt} control={<Radio />} label={opt} />\n                        ))}\n                    </RadioGroup>\n                </FormControl>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabArtifactsPanel = (props) =>{\n    const [artifactData, setArtifactData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setArtifactData([]);\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        if(data.taskartifact_aggregate.aggregate.count === 0){\n            snackActions.info(\"No Results\");\n        }else{\n            snackActions.success(\"Found Matches\");\n        }\n        setTotalCount(data.taskartifact_aggregate.aggregate.count);\n        setArtifactData(data.taskartifact);\n    }\n    const [getArtifactSearch] = useLazyQuery(artifactSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getCommandSearch] = useLazyQuery(commandSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getTypeSearch] = useLazyQuery(typeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getTaskSearch] = useLazyQuery(taskSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getCallbackSearch] = useLazyQuery(callbackSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onArtifactSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getArtifactSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            artifact: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onCommandSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommandSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            command: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            type: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTaskSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a task number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getTaskSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            task_id: parseInt(search),\n        }})\n    }\n    const onCallbackSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a callback number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCallbackSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            callback_id: search,\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: 0});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: 0});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: 0});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabArtifactsSearchPanel onChangeSearchField={onChangeSearchField} onArtifactSearch={onArtifactSearch} onTaskSearch={onTaskSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onCommandSearch={onCommandSearch} onHostSearch={onHostSearch} onTypeSearch={onTypeSearch} onCallbackSearch={onCallbackSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {artifactData.length > 0 ? (\n                    <ArtifactTable artifacts={artifactData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst stopSocks = gql`\nmutation StopSocksMutation($callback_id: Int!){\n    stop_socks(callback_id: $callback_id){\n        status\n        error\n    }\n}\n`;\n\nexport function SocksSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, port: null}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Stop</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >ID</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(stopSocks, {\n        onCompleted: (data) => {\n            snackActions.success(\"Stopped Socks on that Port\");\n            props.onEditDeleted({id: props.id});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={\"Stop Socks\"}/>\n                \n                <TableCell>{props.port ? (\n                    <Tooltip title=\"Stop Socks Port on Mythic Server\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                ) : ( null )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, { useEffect } from 'react';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {SocksSearchTable} from './SocksSearchTable';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n    port\n}\n`;\nconst fetchLimit = 20;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabSocksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"SOCKS\"} iconComponent={<FontAwesomeIcon icon={faSocks} size=\"lg\" />} {...props}/>\n    )\n}\n\nexport const SearchTabSocksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const me = useReactiveVar(meState);\n    const [onSocksSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.callback_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Socks Running\");\n            }\n            setTotalCount(data.callback_aggregate.aggregate.count);\n            setCallbackData(data.callback);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for socks\");\n            console.log(data);\n        }\n    });\n    useEffect(() => {\n        if(props.value === props.index){\n            onSocksSearch({variables: {offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }\n    }, [props.value, props.index])\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            onSocksSearch({variables: { offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }else{\n            onSocksSearch({variables: { offset: (value - 1) * fetchLimit, operation_id: me.user.current_operation_id, fetchLimit}});        \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <div style={{overflow: \"auto\", height: `calc(78vh)`, background: \"transparent\"}}>\n                {callbackData.length > 0 ? (\n                    <SocksSearchTable callbacks={callbackData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {SearchTabTasksLabel, SearchTabTasksPanel} from './SearchTabTasks';\nimport {SearchTabFilesLabel, SearchTabFilesPanel} from './SearchTabFiles';\nimport {SearchTabCredentialsLabel, SearchTabCredentialsPanel} from './SearchTabCredentials';\nimport {SearchTabKeylogsLabel, SearchTabKeylogsPanel} from './SearchTabKeylog';\nimport {SearchTabTokensLabel, SearchTabTokensPanel} from './SearchTabTokens';\nimport {SearchTabCallbacksLabel, SearchTabCallbacksPanel} from './SearchTabCallbacks';\nimport {SearchTabArtifactsLabel, SearchTabArtifactsPanel} from './SearchTabArtifacts';\nimport {SearchTabSocksLabel, SearchTabSocksPanel} from './SearchTabSocks';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nexport function Search(props){\n  const classes = useStyles();\n  const [value, setValue] = React.useState(0);\n  const handleChange = (event, newValue) => {\n      setValue(newValue);\n  };\n  const tabTypes = [\"callbacks\", \"tasks\", \"files\", \"credentials\", \"keylogs\", \"tokens\", \"artifacts\", \"socks\"];\n  const [queryParams, setQueryParams] = React.useState(new URLSearchParams(\"\"));\n  React.useEffect( () => {\n    let params = new URLSearchParams(window.location.search);\n    // should be \"?tab=files&search1=search1&search2=search2&location=location\"\n    if(params.has(\"tab\")){\n        let tabIndex = tabTypes.findIndex( t => t === params.get(\"tab\"));\n        if(tabIndex >= 0){\n          setQueryParams(params);\n        }else{\n          console.log(\"bad tab value\")\n        }\n    }else{\n        \n    }     \n}, [window.location.search]);\nReact.useEffect( () => {\n  let params = new URLSearchParams(window.location.search);\n  // should be \"?tab=files&search1=search1&search2=search2&location=location\"\n  if(params.has(\"tab\")){\n      let tabIndex = tabTypes.findIndex( t => t === params.get(\"tab\"));\n      if(tabIndex >= 0){\n        setQueryParams(params);\n        setValue(tabIndex);\n      }else{\n        console.log(\"bad tab value\")\n      }\n  }else{\n      \n  }     \n}, []);\nReact.useEffect( () => {\n  let currentParams = new URLSearchParams(window.location.search);\n  currentParams.set(\"tab\", tabTypes[value]);\n  if (window.history.replaceState) {\n    //prevents browser from storing history with each change:\n    window.history.replaceState(null, \"\", \"/new/search?\" + currentParams);\n }\n  //window.location.search = currentParams;\n}, [value])\nconst changeSearchParam = (name, value) => {\n  let currentParams = new URLSearchParams(window.location.search);\n  currentParams.set(name, value);\n  if (window.history.replaceState) {\n    //prevents browser from storing history with each change:\n    window.history.replaceState(null, \"\", \"/new/search?\" + currentParams);\n }\n}\nreturn (\n  <div className={classes.root} style={{height: \"100%\"}}>\n      <AppBar position=\"static\" color=\"default\">\n        <Tabs \n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n        >\n        {\n            tabTypes.map( (tab, index) => {\n              switch (tab){\n                case \"tasks\":\n                  return <SearchTabTasksLabel key={\"taskstab\"} />;\n                case \"files\":\n                  return <SearchTabFilesLabel key={\"filestab\"} />;\n                case \"credentials\":\n                  return <SearchTabCredentialsLabel key={\"credentialstab\"} />;\n                case \"keylogs\":\n                  return <SearchTabKeylogsLabel key={\"keylogstab\"} />;\n                case \"tokens\":\n                  return <SearchTabTokensLabel key={\"tokenstab\"} />;\n                case \"callbacks\":\n                  return <SearchTabCallbacksLabel key={\"callbackstab\"} />;\n                case \"artifacts\":\n                  return <SearchTabArtifactsLabel key={\"artifactstab\"} />;\n                case \"socks\":\n                  return <SearchTabSocksLabel kye={\"sockstab\"} />;\n                default:\n                  return (null);\n              }\n            })\n        }\n        </Tabs>\n      </AppBar>\n      {\n        tabTypes.map( (tab, index) => {\n          switch(tab){\n              case \"tasks\":\n                return <SearchTabTasksPanel key={\"taskspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"callbacks\":\n                return <SearchTabCallbacksPanel key={\"callbackspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"files\":\n                return <SearchTabFilesPanel key={\"filespanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"credentials\":\n                return <SearchTabCredentialsPanel key={\"credentialspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"keylogs\":\n                return <SearchTabKeylogsPanel key={\"keylogspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"tokens\":\n                return <SearchTabTokensPanel key={\"tokenspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"artifacts\":\n                return <SearchTabArtifactsPanel key={\"artifactspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              case \"socks\":\n                return <SearchTabSocksPanel key={\"sockspanel\"} value={value} index={index} queryParams={queryParams} changeSearchParam={changeSearchParam}/>\n              default:\n                return (null);\n          }\n        })\n      }\n  </div>\n)\n} \n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { Link } from 'react-router-dom';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {snackActions} from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\n\nconst SUB_Event_Logs = gql`\nsubscription MySubscription($operation_id: Int!) {\n  operationeventlog_aggregate(where: {deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}, operation_id: {_eq: $operation_id}}) {\n    aggregate{\n        count\n    }\n  }\n}\n `;\n \n \nexport function TopAppBarNotifications(props) {\n    const me = useReactiveVar(meState);\n  const { loading, error, data } = useSubscription(SUB_Event_Logs, {\n      variables: {operation_id: me.user.current_operation_id},\n    onError: data => {\n        snackActions.error(\"Mythic encountered an error getting event log messages: \" + data.toString());\n        console.error(data);\n    }\n  });\n\n    return (    \n        <IconButton color=\"inherit\" component={Link} to='/new/EventFeed' style={{float: \"right\"}}>\n            <Tooltip title=\"Event Feed\">\n            { \n                loading ? (\n                    <Badge color=\"secondary\" badgeContent={0}>\n                        <CircularProgress size={20} thickness={4} />\n                    </Badge>\n                ) : \n                \n                (\n                    error ? (\n                        <Badge color=\"secondary\" badgeContent={0}>\n                            <ErrorIcon />\n                        </Badge>\n                    ) : (\n                        <Badge badgeContent={data.operationeventlog_aggregate.aggregate.count} color=\"error\">\n                            <MailIcon />\n                        </Badge>\n                    )\n                )\n                \n            }\n            </Tooltip>\n        </IconButton>\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {snackActions} from './utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription EventFeedNotificationSubscription($fromNow: timestamp!, $operation_id: Int!) {\n  operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    operator {\n        username\n    }\n    message\n    level\n    resolved\n    source\n  }\n}\n `;\n\nexport function EventFeedNotifications(props) {\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n\n    const { loading, error, data } = useSubscription(subscribe_payloads, {\n        variables: {fromNow: fromNow.current, operation_id: me.user.current_operation_id}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get event notifications\");\n        }\n    });\n\n    useEffect( () => {\n        //console.log(data, loading, error, fromNow.current);\n        if(!loading && !error && data && data.operationeventlog.length > 0){\n            if(data.operationeventlog[0].source === \"debug\"){\n                return;\n            }\n            if(data.operationeventlog[0].operator ){\n                const message = data.operationeventlog[0].operator.username + \":\" + data.operationeventlog[0].message;\n                snackActions.toast(message, data.operationeventlog[0].level, { autoHideDuration: 3000});\n            }else if(!data.operationeventlog[0].operator){\n                snackActions.toast(data.operationeventlog[0].message, data.operationeventlog[0].level, {autoHideDuration: 3000});\n            }\n        }else if(error){\n            console.error(error);\n            snackActions.warning(\"Mythic encountered an error getting operational event stream\", {autoHideDuration: 2000});\n        }\n    }, [loading, data, error, me.user]);\n    return (    \n       null\n    );\n}\n\n","var _image;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMythicRedSmall(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"80px\",\n    height: \"66px\",\n    viewBox: \"0 0 80 66\",\n    enableBackground: \"new 0 0 80 66\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _image || (_image = /*#__PURE__*/React.createElement(\"image\", {\n    id: \"image0\",\n    width: 80,\n    height: 66,\n    x: 0,\n    y: 0,\n    href: \"data:image/png;base64,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\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMythicRedSmall);\nexport default __webpack_public_path__ + \"static/media/mythic_red_small.793b41cc.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Menu from '@material-ui/core/Menu';\nimport { Link } from 'react-router-dom';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState, menuOpen } from '../cache';\nimport Switch from '@material-ui/core/Switch';\nimport { TopAppBarNotifications } from './TopAppBarNotifications';\nimport { EventFeedNotifications } from './EventFeedNotifications';\nimport {Redirect} from 'react-router-dom';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport HelpIcon from '@material-ui/icons/Help';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport {ReactComponent as ReactLogo} from './mythic_red_small.svg';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport PostAddIcon from '@material-ui/icons/PostAdd';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport EditIcon from '@material-ui/icons/Edit';\nimport BlockIcon from '@material-ui/icons/Block';\nimport { Typography, Tooltip } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport HeadsetIcon from '@material-ui/icons/Headset';\nimport CodeIcon from '@material-ui/icons/Code';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBiohazard} from '@fortawesome/free-solid-svg-icons';\n\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    position: \"sticky\",\n    top: \"0\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    maxWidth: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  mythicElement: {}\n}));\n\nexport function TopAppBar(props) {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const settingsRef = React.useRef(null);\n  const documentationRef = React.useRef(null);\n  const [anchorEl, setAnchorEl] = React.useState(false);\n  const [documentationAnchorEl, setDocumentationAnchorEl] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const isOpen = useReactiveVar(menuOpen);\n  const [openGlobal, setOpenGlobal] = React.useState(false);\n  const [openCreate, setOpenCreate] = React.useState(false);\n  const [openOperations, setOpenOperations] = React.useState(false);\n  const [openData, setOpenData] = React.useState(false);\n  const handleDrawerOpen = () => {\n    menuOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    menuOpen(false);\n  };\n\n  const handleMenu = (event) => {\n    setAnchorEl(true);\n  };\n\n  const handleClose = (evt) => {\n    setAnchorEl(false);\n  };\n  const handleDocumentationMenu = (event) => {\n    setDocumentationAnchorEl(true);\n  };\n  const handleDocumentationClose = (evt) => {\n    setDocumentationAnchorEl(false);\n  };\n\n  const handleToggleGlobal = () => {\n    setOpenGlobal(!openGlobal);\n  }\n  const handleToggleCreate = () => {\n    setOpenCreate(!openCreate);\n  }\n  const handleToggleOperations = () => {\n    setOpenOperations(!openOperations);\n  }\n  const handleToggleData = () => {\n    setOpenData(!openData);\n  }\n\n  return (\n    <div className={classes.root} >\n\n      <EventFeedNotifications />\n      <AppBar position=\"sticky\" className={clsx(classes.appBar, {[classes.appBarShift]: isOpen,})}>\n        \n        { me.loggedIn ? (\n        <Toolbar variant=\"dense\" position=\"sticky static\">\n            <IconButton edge=\"start\" className={clsx(classes.menuButton, isOpen && classes.hide)} color=\"inherit\" aria-label=\"menu\" onClick={handleDrawerOpen}>\n                <MenuIcon />\n            </IconButton>\n            <div style={{width: \"100%\"}}>\n                \n                <IconButton component={Link} to='/new/payloadtypes' color=\"inherit\">\n                  <Tooltip title=\"C2 Profiles and Payload Types\">\n                    <HeadsetIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <IconButton component={Link} to='/new/payloads' color=\"inherit\">\n                  \n                    <FontAwesomeIcon icon={faBiohazard} title=\"Payloads\" />\n                  \n                </IconButton>\n                <IconButton component={Link} to='/new/search' color=\"inherit\">\n                  <Tooltip title=\"Search Operation\">\n                    <SearchIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <IconButton component={Link} to='/new/callbacks' color=\"inherit\">\n                  <Tooltip title=\"Active Callbacks\">\n                    <PhoneCallbackIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={settingsRef}\n                    anchorEl={()=>settingsRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={anchorEl}\n                    onClose={handleClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} to=\"/new/settings\" onClick={handleClose} name=\"settings\">Settings</MenuItem>\n                    <MenuItem component={Link} to=\"/new/logout\" onClick={handleClose}>Logout</MenuItem>\n                </Menu>\n                <div style={{display: \"inline-flex\", justifyContent: \"flex-end\", float: \"right\"}}>\n                <IconButton\n                    aria-label=\"account of current user\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleMenu}\n                    ref={settingsRef}\n                    color=\"inherit\"\n                    style={{float: \"right\"}}\n                >\n                  <Tooltip title=\"Settings or Logout\">\n                    <AccountCircle />\n                  </Tooltip>\n                </IconButton>\n                <IconButton\n                    aria-label=\"documentation links\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleDocumentationMenu}\n                    ref={documentationRef}\n                    color=\"inherit\"\n                    style={{float:\"right\"}}\n                >\n                  <Tooltip title=\"Help Documentation\">\n                    <HelpIcon />  \n                  </Tooltip>\n                </IconButton>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={documentationRef}\n                    anchorEl={()=>documentationRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={documentationAnchorEl}\n                    onClose={handleDocumentationClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/agents\" onClick={handleDocumentationClose}>Agent Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/wrappers\" onClick={handleDocumentationClose}>Wrapper Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/c2-profiles\" onClick={handleDocumentationClose}>C2 Profile Documentation</MenuItem>\n                    <MenuItem component={Link} href=\"https://docs.mythic-c2.net\" target=\"_blank\" onClick={handleDocumentationClose}>Mythic Documentation</MenuItem>\n                </Menu>\n                <TopAppBarNotifications />\n                { me.user === null ? <Redirect to='/new/logout'/> : (\n                  <Typography style={{display: \"flex\", alignItems: \"center\", paddingRight: \"80px\"}} >\n                    {me.user.username}\n                  </Typography>\n                )}\n                </div>\n            </div>\n        </Toolbar>\n          ) : null\n        } \n      </AppBar>\n      <Drawer\n            className={classes.drawer}\n            anchor=\"left\"\n            open={isOpen}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            onEscapeKeyDown={handleDrawerClose}\n          >\n        <div className={classes.drawerHeader} role=\"presentation\">\n          <ReactLogo style={{width: \"90%\"}}/>\n          v2.3.1\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon className=\"mythicElement\"/> : <ChevronRightIcon className=\"mythicElement\"/>}\n          </IconButton>\n        </div>\n        <Divider />\n        <List\n        subheader={\n          <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n            Home\n          </ListSubheader>\n        }>\n            <ListItem button component={Link} to='/new' key={\"home\"} onClick={handleDrawerClose}>\n              <ListItemIcon ><HomeIcon className=\"mythicElement\" /></ListItemIcon>\n              <ListItemText primary={\"Home\"} />\n            </ListItem>\n        </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Global Configurations\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleGlobal}>\n                <ListItemIcon><LayersIcon /></ListItemIcon>\n                <ListItemText>Services</ListItemText>\n                {openGlobal ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openGlobal} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                  <ListItem button className={classes.nested} component={Link} to='/new/payloadtypes' key={\"payloadtypes\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><InboxIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"Payload Types\"} />\n                  </ListItem>\n                  <ListItem button className={classes.nested} component={Link} to='/new/c2profiles' key={\"c2profiles\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><WifiIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"C2 Profiles\"} />\n                  </ListItem>\n                </List>\n              </Collapse>\n              <ListItem button onClick={handleToggleCreate}>\n                <ListItemIcon><PostAddIcon /></ListItemIcon>\n                <ListItemText>Create</ListItemText>\n                {openCreate ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openCreate} unmountOnExit>\n                  <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createpayload' key={\"createpayload\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Payload\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createwrapper' key={\"createwrapper\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Wrapped Payload\"} />\n                    </ListItem>\n                  </List>\n                </Collapse>\n              <ListItem button onClick={handleToggleOperations}>\n                <ListItemIcon><SupervisorAccountIcon /></ListItemIcon>\n                <ListItemText>Operations</ListItemText>\n                {openOperations ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openOperations} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/operations' key={\"modifyoperations\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><EditIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Modify Operations\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/commandblocklists' key={\"modifyblocklists\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><BlockIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Command Block Lists\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/browserscripts' key={\"browserscripts\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><CodeIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"BrowserScripts\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n            </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Operational Views\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleData}>\n                <ListItemIcon><BarChartIcon /></ListItemIcon>\n                <ListItemText>Operational Data</ListItemText>\n                {openData ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openData} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/payloads' key={\"payloads\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><FontAwesomeIcon icon={faBiohazard} size=\"lg\"/></ListItemIcon>\n                      <ListItemText primary={\"Payloads\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/search' key={\"search\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><SearchIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Search\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n                <ListItem button component={Link} to='/new/callbacks' key={\"callbacks\"} onClick={handleDrawerClose}>\n                  <ListItemIcon><PhoneCallbackIcon className=\"mythicElement\"/></ListItemIcon>\n                  <ListItemText primary={\"Active Callbacks\"} />\n                </ListItem>\n            </List>\n        <ListItem>\n        <Switch\n            checked={props.theme === 'dark'}\n            onChange={props.toggleTheme}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'primary checkbox' }}\n            name=\"darkMode\"\n          />\n        <div style={{display: \"inline-block\"}}> Enable Dark Mode </div>\n        </ListItem>\n      </Drawer>\n    </div>\n  );\n}\n\n","import { useEffect, useState } from 'react';\nexport const useDarkMode = () => {\n    const [theme, setTheme] = useState('light');\n    const [mountedComponent, setMountedComponent] = useState(false)\n    const setMode = mode => {\n        window.localStorage.setItem('theme', mode)\n        setTheme(mode)\n    };\n\n    const themeToggler = () => {\n        theme === 'light' ? setMode('dark') : setMode('light')\n    };\n\n    useEffect(() => {\n        const localTheme = window.localStorage.getItem('theme');\n        localTheme ? setTheme(localTheme) : setMode('light')\n        setMountedComponent(true)\n    }, []);\n\n    return [theme, themeToggler, mountedComponent]\n};\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskArtifactsTable(props){\n   const [artifacts, setArtifacts] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.taskartifacts];\n    }, []);\n    condensed.sort((a,b) => (a.task_id > b.task_id) ? 1 : ((b.task_id > a.task_id) ? -1 : 0));\n    setArtifacts(condensed);\n   }, [props.tasks]);\n   if(artifacts.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Artifact Tasks\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task ID</TableCell>\n                        <TableCell>Artifact Type</TableCell>\n                        <TableCell>Host</TableCell>\n                        <TableCell>Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {artifacts.map( (artifact) => (\n                    <TableRow key={\"artifact\" + artifact.id}>\n                      <TableCell>{artifact.task_id}</TableCell>\n                      <TableCell>{artifact.artifact.name}</TableCell>\n                      <TableCell>{artifact.host}</TableCell>\n                      <TableCell>{artifact.artifact_instance_text}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskMITREATTACKTable(props){\n   const [attacks, setAttacks] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      \n      const newAdds = tsk.attacktasks.reduce( (old, attck) => {\n        if(prev.find(element => element.attack.t_num === attck.attack.t_num)){\n          return [...old];\n        }else{\n          return [...old, attck];\n        }\n      }, []);\n      return [...prev, ...newAdds];\n    }, []);\n    condensed.sort((a,b) => (a.attack.t_num > b.attack.t_num) ? 1 : ((b.attack.t_num > a.attack.t_num) ? -1 : 0));\n    setAttacks(condensed);\n    \n   }, [props.tasks]);\n   if(attacks.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                MITRE ATT&amp;CK Mappings\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Technique ID</TableCell>\n                        <TableCell>Technique</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {attacks.map( (attack) => (\n                    <TableRow key={'attack' + attack.attack.id}>\n                      <TableCell>{attack.attack.t_num}</TableCell>\n                      <TableCell>{attack.attack.name}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Link from '@material-ui/core/Link';\n\n\nexport function TaskFilesTable(props){\n   const [files, setFiles] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.filemeta];\n    }, []);\n    setFiles(condensed);\n    condensed.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n   }, [props.tasks]);\n   if(files.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Files / Screenshots\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Filename</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Remote Path</TableCell>\n                        <TableCell>Comment</TableCell>\n                        <TableCell>Hashes</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {files.map( (file) => (\n                    <TableRow key={\"file\" + file.id}>\n                      <TableCell>\n                        {!file.deleted && file.complete ? (\n                          <Link href={window.origin + \"/api/v1.4/files/download/\" + file.agent_file_id} style={{textDecoration: \"underline\", color: \"inherit\"}}>{file.filename_text}</Link>\n                        ) : ( \n                          !file.complete ? (\n                            file.filename_text +  \" (\" + file.chunks_received + \"/\" + file.total_chunks + \")\"\n                          ) : (file.filename_text)\n                         )}\n                        </TableCell>\n                      <TableCell>\n                        {file.is_screenshot ? (\"Screenshot\") : (\n                          file.is_payload ? (\"Payload\") : (\n                            file.is_download_from_agent ? (\"Download\") : (\n                              \"Upload\"\n                            )\n                          )\n                        )}\n                      </TableCell>\n                      <TableCell>{file.full_remote_path_text === \"\" ? (\"\") : (file.host + \":\" + file.full_remote_path_text) }</TableCell>\n                      <TableCell>{file.task.comment}</TableCell>\n                      <TableCell>MD5:<br/>{file.md5}<br/>SHA1:<br/>{file.sha1}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskCredentialsTable(props){\n   const [credentials, setCredentials] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.credentials];\n    }, []);\n    setCredentials(condensed);\n   }, [props.tasks]);\n   if(credentials.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Credentials\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Realm</TableCell>\n                        <TableCell>Account</TableCell>\n                        <TableCell>Credentials</TableCell>\n                        <TableCell>Comment</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {credentials.map( (cred) => (\n                    <TableRow key={\"cred\" + cred.id}>\n                      <TableCell>{cred.task_id}</TableCell>\n                      <TableCell>{cred.type}</TableCell>\n                      <TableCell>{cred.realm}</TableCell>\n                      <TableCell>{cred.account}</TableCell>\n                      <TableCell>{cred.credential_text}</TableCell>\n                      <TableCell>{cred.comment}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport {TaskArtifactsTable} from './TaskArtifactsTable';\nimport {TaskMITREATTACKTable} from './TaskMITREATTACKTable';\nimport {TaskFilesTable} from './TaskFilesTable';\nimport {TaskCredentialsTable} from './TaskCredentialsTable';\n\nconst MetadataQuery = gql`\nquery taskMetadataQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}) {\n      credentials {\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n        task_id\n      }\n      filemeta {\n        agent_file_id\n        complete\n        deleted\n        filename_text\n        full_remote_path_text\n        host\n        id\n        total_chunks\n        chunks_received\n        is_download_from_agent\n        is_payload\n        is_screenshot\n        md5\n        sha1\n        task {\n            comment\n            id\n        }\n      }\n      taskartifacts {\n        artifact_instance_text\n        host\n        task_id\n        artifact{\n            id\n            name\n        }\n        id\n      }\n      tokens {\n        TokenId\n        id\n        host\n      }\n      attacktasks(distinct_on: attack_id) {\n        attack {\n          name\n          os\n          id\n          t_num\n          tactic\n        }\n        id\n      }\n      id\n    }\n  }`;\nexport function TaskMetadataTable(props){\n   const [tasks, setTasks] = React.useState([]);\n\n   const [getMetadata] = useLazyQuery(MetadataQuery, {\n        onCompleted: data => {\n            setTasks(data.task);\n        },\n        onError: data => {\n            console.log(\"error!\", data)\n        }\n    });\n    useEffect( () => {\n        getMetadata({variables: {task_range: props.taskIDs } });\n    }, [props.taskIDs, getMetadata]);\n  return (\n    <div style={{marginTop: \"10px\", marginRight: \"5px\"}}>\n        <TaskArtifactsTable tasks={tasks}/>\n        <TaskMITREATTACKTable tasks={tasks}/>\n        <TaskFilesTable tasks={tasks}/>\n        <TaskCredentialsTable tasks={tasks}/>\n    </div>\n  );\n}\n","import React, {useState, useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function IncludeMoreTasksDialog(props) {\n    const [taskSelected, setTaskSelected] = useState(0);\n    const [taskOptions, setTaskOptions] = useState([]);\n    const [beforeCount, setBeforeCount] = useState(10);\n    const [afterCount, setAfterCount] = useState(10);\n    const [searchTerm, setSearchTerm] = useState(\"all\");\n    const [operator, setOperator] = useState(\"\");\n    const searchOptions = [\n        {\"type\": \"all\", \"text\": \"All Callbacks\"},\n        {\"type\": \"callback\", \"text\": \"This Callack\"},\n        {\"type\": \"operator\", \"text\": \"All callbacks but limited by operator\"}\n    ];\n    const inputRef = useRef(null); \n    const onRequestSubmit = () => {\n        props.submitFetchTasks({\n            taskSelected,\n            beforeCount: parseInt(beforeCount),\n            afterCount: parseInt(afterCount),\n            search: searchTerm === \"operator\" ? operator : searchTerm\n        });\n        props.onClose();\n    }\n    const handleChange = (event) => {\n        setSearchTerm(event.target.value);\n      };\n    const handleTaskChange = (event) => {\n        setTaskSelected(event.target.value);\n    };\n    useEffect( () => {\n        setTaskOptions(props.taskOptions);\n        if(props.taskOptions.length > 0){\n            setTaskSelected(props.taskOptions[0]);\n        }\n    }, [props.tasks, props.taskOptions])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Add More Tasks to View</DialogTitle>\n        <DialogContent dividers={true}>\n        <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>View More Tasks Around Task:</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={taskSelected}\n                    onChange={handleTaskChange}\n                    input={<Input />}\n                  >\n                    {taskOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"selectiontask:\" + opt}>{opt}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            <MythicTextField type=\"number\" value={beforeCount} onChange={(name, value, error)=>setBeforeCount(value)} name={\"Number of tasks before\"} />\n            <MythicTextField type=\"number\" value={afterCount} onChange={(name, value, error)=>setAfterCount(value)} name={\"Number of tasks after\"} />\n            <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>Search Type</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={searchTerm}\n                    onChange={handleChange}\n                    input={<Input />}\n                  >\n                    {searchOptions.map( (opt) => (\n                        <MenuItem value={opt.type} key={\"selectiontype:\" + opt.type}>{opt.text}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            {searchTerm === 'operator' ? (\n                <MythicTextField multiline={false} onChange={(name, value, error)=>{setOperator(value)}} value={operator} name={\"Operator Username\"}/>\n            ) : (null)}\n            \n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Fetch Tasks</Button>          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport  {useParams} from \"react-router-dom\";\nimport {TaskMetadataTable} from './MetadataTable';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {Button, Grid} from '@material-ui/core';\nimport {IncludeMoreTasksDialog} from './IncludeMoreTasksDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {copyStringToClipboard} from '../../utilities/Clipboard';\nimport Switch from '@material-ui/core/Switch';\nimport {useTheme} from '@material-ui/core/styles';\nconst taskInfoFragment = gql`\nfragment TaskData on task {\n    comment\n    callback_id\n    commentOperator{\n        username\n    }\n    completed\n    id\n    operator{\n        username\n    }\n    display_params\n    original_params\n    status\n    timestamp\n    command {\n        cmd\n        id\n    }\n    callback {\n        id\n        host\n        user\n        integrity_level\n        domain\n    }\n    responses_aggregate{\n        aggregate{\n            count\n        }\n    }\n    parent_task_id\n    opsec_pre_blocked\n    opsec_pre_bypassed\n    opsec_post_blocked\n    opsec_post_bypassed\n    tasks {\n        id\n    }\n    token {\n        id\n    }\n}\n`;\nconst tasksQuery = gql`\n${taskInfoFragment}\nquery tasksQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacks($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, order_by: {id: desc}, limit: $beforeCount) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossACallbackQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossACallbacks($callback_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskDAta\n    }\n}`;\nconst getTasksAcrossAllCallbacksByOperatorQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacksByOperator($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!, $operator: String!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nexport function SingleTaskView(props){\n    const me = useReactiveVar(meState);\n    const {taskId} = useParams();\n    const [taskIDs, setTaskIDs] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [tasks, setTasks] = React.useState([]);\n    const [removing, setRemoving] = React.useState(false);\n    const [openIncludeMoreTasksDialog, setOpenIncludeMoreTasksDialog] = React.useState(false);\n    const theme = useTheme();\n    const mergeData = (taskData) => {\n        let allNewParents = taskData.filter( (task) => task.parent_task_id === null);\n        let allData = [];\n        let recent_callback = -1;\n        if(allNewParents.length === 0){\n            allNewParents = [...taskData];\n        }\n        const allParents = tasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\" && cur.parent_task_id === null){\n                if(prev.find( (element) => element.id === cur.id)){\n                    return [...prev];\n                }\n                return [...prev, {...cur, checked: false}];\n            }\n            return [...prev];\n        }, [...allNewParents]);\n        \n        allParents.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n        allParents.forEach( (tsk) => {\n            if(tsk.callback.id !== recent_callback){\n                allData.push({\"type\": \"callback\", ...tsk.callback, checked: false});\n            }\n            recent_callback = tsk.callback.id;\n            allData.push({\"type\": \"task\", ...tsk, checked: false});\n        });\n        setTasks(allData);\n        const allTaskIds = taskData.reduce( (prev, cur) => {\n            const subIds = cur.tasks.filter( (cur) => !prev.includes(cur.id)).map( (cur) => cur.id);\n            if(prev.includes(cur.id)){\n                return [...prev, ...subIds];\n            }else{\n                return [...prev, cur.id, ...subIds];\n            }\n        }, [...taskIDs]);\n        setTaskIDs(allTaskIds);\n    }\n    const [getTasksAcrossAllCallbacks] = useLazyQuery(getTasksAcrossAllCallbacksQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossACallback,] = useLazyQuery(getTasksAcrossACallbackQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossAllCallbacksByOperator] = useLazyQuery(getTasksAcrossAllCallbacksByOperatorQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasks] = useLazyQuery(tasksQuery, {\n     onCompleted: completedData => {\n        mergeData(completedData.task);\n     }\n    });\n    const setTaskSearchInfo = (callback_id) => {\n        const opts = tasks.reduce( (prev, cur) => {\n            if(cur.type === 'task' && cur.callback.id === callback_id){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskOptions(opts);\n        \n        setOpenIncludeMoreTasksDialog(true);\n    }\n    const toggleTaskToRemove = (event) => {\n        const updated = tasks.map( (task) => {\n            if(task.type === \"task\" && (\"task\" + task.id) === event.target.name){\n                return {...task, checked: event.target.checked};\n            }\n            return {...task};\n        });\n        setTasks(updated);\n    }\n    const removeTasksButton = () => {\n        removing ? setRemoving(false) : setRemoving(true);\n        const remainingTasks = tasks.filter( (task) => !task.checked);\n        setTasks(remainingTasks);\n        const remainingTaskIDs = remainingTasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\"){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskIDs(remainingTaskIDs);\n    }\n    const collapse_range = (all_nums) =>{\n        // takes in an array of the expanded numbers and collapses it down\n        all_nums.sort( (a,b) => (a-b));\n        // pulled from https://stackoverflow.com/a/2270987\n        let ranges = [], rstart, rend;\n        for (let i = 0; i < all_nums.length; i++) {\n          rstart = all_nums[i];\n          rend = rstart;\n          while (all_nums[i + 1] - all_nums[i] === 1) {\n            rend = all_nums[i + 1]; // increment the index if the numbers sequential\n            i++;\n          }\n          ranges.push(rstart === rend ? rstart+'' : rstart + '-' + rend);\n        }\n        return ranges.join(\",\");\n    }\n    const expand_range = (range) =>{\n        let numbers = [], ranges = range.split(\",\");\n        for(let i = 0; i < ranges.length; i++){\n            if(ranges[i].includes(\"-\")){\n                let split = ranges[i].split(\"-\");\n                split = split.map( (r) => parseInt(r) );\n                numbers.push( ...[...Array(split[1]-split[0]+1).keys()].map(x => x+split[0]))\n            }else{\n                numbers.push(parseInt(ranges[i]));\n            }\n        }\n        numbers.sort( (a,b) => a - b);\n        return numbers;\n    }\n    const getShareableLink = () => {\n        let ids = [...taskIDs];\n        const range = collapse_range(ids);\n        copyStringToClipboard(window.origin + \"/new/tasks/by_range?tasks=\" + range);\n        snackActions.success(\"Copied link to clipboard!\");\n    }\n    const submitIncludeMoreTasks = ({taskSelected, beforeCount, afterCount, search}) => {\n        snackActions.info(\"Searching for tasks...\");\n        switch(search){\n            case \"all\":\n                getTasksAcrossAllCallbacks({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount}});\n                break;\n            case \"callback\":\n                getTasksAcrossACallback({variables: {}});\n                break;\n            default:\n                getTasksAcrossAllCallbacksByOperator({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount, operator: search}});\n                break;\n        }\n    }\n    useEffect( () => {\n        if(window.location.pathname.includes(\"/new/tasks/by_range\")){\n            let params = new URLSearchParams(window.location.search);\n            if(params.has(\"tasks\")){\n                console.log(params.get(\"tasks\"));\n                let ids = expand_range(params.get(\"tasks\"));\n                getTasks({variables: {task_range: ids}});\n            }else{\n                snackActions.warning(\"URL Query missing '?tasks=' with a range of tasks\")\n            }\n        }else{\n            getTasks({variables: {task_range: [parseInt(taskId)]}});\n        }      \n    }, [getTasks, taskId]);\n  return (\n    <div style={{marginTop: \"10px\", maxHeight: \"calc(94vh)\", width:\"100%\", marginBottom: \"10px\" }}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Task View\n            </Typography>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.success.main}} \n                onClick={getShareableLink}>Get Shareable link</Button>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.warning.main}} \n                onClick={removeTasksButton}>Remove Tasks From View</Button>\n            <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                onClick={(evt) => {evt.stopPropagation(); snackActions.warning(\"Not implemented yet\");}}>Add Tags To All</Button>\n            \n        </Paper>\n        {tasks.map( (task) => (\n            task.type === \"task\" ? (\n                    <Grid container alignItems=\"stretch\" key={\"taskdisplay:\" + task.id} style={{marginRight: \"5px\"}}>\n                        <Grid item style={{display: \"inline-flex\", width: removing ? \"96%\" : \"100%\"}}>\n                            <TaskDisplay  task={task} command_id={task.command === null ? 0 : task.command.id} />\n                        </Grid>\n                        <Grid item  style={{display: \"inline-flex\"}}>\n                        {removing ? (\n                            <Switch\n                                checked={task.checked}\n                                onChange={toggleTaskToRemove}\n                                name={\"task\" + task.id}\n                                inputProps={{ 'aria-label': 'checkbox', 'color': theme.palette.error.main }}\n                        />\n                        ) : (null)}\n                        </Grid>\n                    </Grid>\n                    \n            ) : (\n                <Paper key={\"taskdisplayforcallback:\" + task.id} elevation={5} style={{ marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        {task.domain === \"\" ? (null) : (task.domain + \"\\\\\")}{task.user}{task.integrity_level > 2 ? (\"*\") : (null)}@{task.host} ({task.id})\n                    </Typography>\n                    <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.info.main}} \n                        onClick={() => {setTaskSearchInfo(task.id)}}>Include More Tasks</Button>                  \n                </Paper>\n            ))\n            \n            )\n        }\n        <MythicDialog fullWidth={true} maxWidth=\"md\" open={openIncludeMoreTasksDialog} \n            onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} \n            innerDialog={<IncludeMoreTasksDialog submitFetchTasks={submitIncludeMoreTasks} taskOptions={taskOptions} onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} />}\n        />\n        <TaskMetadataTable taskIDs={taskIDs} />\n    </div>\n  );\n}\n//\n","import { createGlobalStyle} from \"styled-components\"\nexport const GlobalStyles = createGlobalStyle`\nbody {\n    margin: 0\n}\n.MuiAccordionDetails-root{\n\n    padding-bottom: 0;\n    padding-top: 0;\n}\n.MuiAccordionSummary-content.Mui-expanded{\n    margin: 0px 0px 0px 0px !important;\n    min-height: unset;\n}\n.MuiAccordionSummary-root.Mui-expanded{\n    min-height: unset;\n}\n// placeholder/helper text for input boxes\n.MuiFormLabel-root {\n    background: transparent;\n}\n.MuiTableCell-head {\n\n    font-weight: bold;\n}\n.MuiSelect-select.MuiSelect-select{\n    padding-left: 10px\n}\n[class^=\"BaseTable\"] {\n    background-color: transparent;\n    border-top: 0;\n    border-bottom: 1px solid ${(props) => props.theme.tableBorder};\n}\n[class^=\"BaseTable__header\"] {\n    border-bottom: 0 !important;\n    background-color: transparent !important;\n}\n.BaseTable__sort-indicator {\n    border-bottom: 0 !important;\n}\n.BaseTable__column-resizer {\n    background-color: ${(props) => props.theme.tableHover} !important;\n}\n.BaseTable__row {\n    &:hover,\n    &--hovered {\n        background-color: ${(props) => props.theme.tableHover} !important;\n        \n    }\n}\n.menuEntry {\n  cursor: pointer;\n}\n\ntspan {\n  font-size: 15px;\n  stroke: none;\n}\n.DragHandle {\n    z-index: 2;\n    cursor: col-resize;\n}\n.DragHandle:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n}\n.ReactVirtualized__Table__headerTruncatedText {\n\n  }\n.ReactVirtualized__Table__headerColumn {\n\n    padding: 0;\n  }\n.DragHandleActive,\n    .DragHandleActive:hover {\n        color: #0b6fcc;\n        z-index: 3;\n    }\n\n.DragHandleIcon {\n\n    float:right;\n}\n.MuiTab-root {\n    max-width: unset;\n}\n`\n","import clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LoginForm } from './pages/Login/LoginForm';\nimport { Settings } from './pages/Settings/Settings';\nimport { Logout } from './pages/Logout/Logout';\nimport { PayloadTypesC2Profiles } from './pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles';\nimport { CreatePayload } from './pages/CreatePayload/CreatePayload';\nimport { CreatePayloadWrapper } from './pages/CreateWrapper/CreatePayload';\nimport { EventFeed } from './pages/EventFeed/EventFeed';\nimport {Operations} from './pages/Operations/Operations';\nimport { BrowserScripts } from './pages/BrowserScripts/BrowserScripts';\nimport { Payloads } from './pages/Payloads/Payloads';\nimport {ExpandedCallback} from './pages/ExpandedCallback/ExpandedCallback';\nimport { Home } from './pages/Home/Home';\nimport { LoggedInRoute } from './utilities/LoggedInRoute';\nimport { Callbacks } from './pages/Callbacks/Callbacks';\nimport {Search} from './pages/Search/Search';\nimport React from 'react';\nimport { TopAppBar } from './TopAppBar';\nimport { useReactiveVar } from '@apollo/client';\nimport { menuOpen } from '../cache';\nimport  {useDarkMode} from \"./utilities/useDarkMode\";\nimport { SnackbarProvider } from 'notistack';\nimport {SingleTaskView} from './pages/SingleTaskView/SingleTaskView';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { GlobalStyles } from \"../themes/GlobalStyles\";\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {SnackbarUtilsConfigurator, } from './utilities/Snackbar';\nimport { meState } from '../cache';\n\n//background-color: #282c34;\nimport {\n    Route,\n    Switch,\n} from 'react-router-dom'\n\n\nconst useStyles = makeStyles((theme) => ({\n    content: {\n        maxWidth: \"calc(99vw)\",\n        maxHeight: \"calc(98vh)\",\n        overflow: \"auto\",\n        padding: \"0px 0 0px 16px\",\n      },\n  }));\n\n\nexport function App(props) {\n    const classes = useStyles();\n    const me = useReactiveVar(meState);\n    const [themeMode, themeToggler] = useDarkMode();\n    const isOpen = useReactiveVar(menuOpen);\n    const theme = React.useMemo( () => createMuiTheme({\n        palette: {\n          primary: {\n                  main: \"#7f93c0\"\n              },\n          secondary: {\n                  main: \"#a791c3\"\n              },\n          error: {\n                  main: \"#f44336\"\n              },\n          warning: {\n                  main: \"#ff9800\"\n              },\n          info: {\n                  main: \"#2196f3\"\n              },\n          disabled: {\n                  main: \"rgba(0, 0, 0, 0.38)\"\n              },\n          type: themeMode,\n          background: {\n              main: '#303030'\n          },\n          text: {\n            primary: themeMode === 'dark' ? '#fff' : '#000',\n            secondary: themeMode === 'dark' ? 'rgba(255, 255, 255, 0.7)': 'rgba(0, 0, 0, 0.54)'\n          },\n          textBackgroundColor: themeMode === 'dark' ? '#74828b' : '#d9dbdc',\n          textBackgroundColorMythic: themeMode === 'dark' ? '#436b9f': '#aadcf5',\n          textBackgroundColorSuccess: themeMode === 'dark' ? '#09a21a' : '#70e373',\n          textBackgroundColorError: themeMode === 'dark' ? '#9f1616' : '#f19da3',\n          graphGroup: themeMode === 'dark' ? '#394c5d' : \"#d3d7e8\"\n        },\n        folderColor: '#f1d592',\n        tableHeader: '#484848',\n        tableBorder: themeMode === 'dark' ? 'rgba(81,81,81,1)' : 'rgba(224,224,224,1)',\n        tableHover: themeMode === 'dark' ? 'rgba(255, 255, 255, 0.08)': 'rgba(0, 0, 0, 0.04)',\n        pageHeader: {\n            main: \"#827E80\"\n        },\n        pageHeaderText: {\n            main: \"white\"\n        },\n        }\n    ), [themeMode]\n    );\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyles theme={theme}/>\n            <CssBaseline />                \n            <SnackbarProvider maxSnack={5} anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}>\n                <SnackbarUtilsConfigurator />\n                <div className=\"App\">\n                    {me.loggedIn && me.user !== undefined && me.user !== null ? (<TopAppBar theme={themeMode} toggleTheme={themeToggler}/>) : (null)} \n                    <div className={clsx(classes.content, {[classes.contentShift]: isOpen,})}>\n                        <Switch>\n                            <LoggedInRoute exact path='/new' component={Home} />\n                            <Route exact path='/new/login' component={LoginForm} /> \n                            <LoggedInRoute exact path='/new/settings' component={Settings} />\n                            <LoggedInRoute exact path='/new/payloadtypes' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/eventfeed' component={EventFeed} />\n                            <LoggedInRoute exact path='/new/createpayload' component={CreatePayload} />\n                            <LoggedInRoute exact path='/new/createwrapper' component={CreatePayloadWrapper} />\n                            <LoggedInRoute exact path='/new/payloads' component={Payloads} />\n                            <LoggedInRoute exact path='/new/c2profiles' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/services/' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/callbacks' component={Callbacks} />\n                            <LoggedInRoute exact path='/new/search' component={Search} />\n                            <LoggedInRoute exact path='/new/browserscripts' component={BrowserScripts} />\n                            <LoggedInRoute exact path='/new/task/:taskId' component={SingleTaskView} />\n                            <LoggedInRoute exact path='/new/tasks/by_range' component={SingleTaskView} />\n                            <LoggedInRoute exact path='/new/operations' component={Operations} />\n                            <LoggedInRoute exact path='/new/callbacks/:callbackId' component={ExpandedCallback} />\n                            <Route exact path='/new/logout' component={Logout} />\n                        </Switch>\n                    </div>\n                </div>\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n\n}\n\n","//import './wdyr';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport { ApolloProvider, ApolloClient, InMemoryCache, from, split, HttpLink, Observable } from '@apollo/client';\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport { successfulRefresh, FailedRefresh } from './cache';\nimport { onError } from \"@apollo/client/link/error\";\nimport { RetryLink } from \"@apollo/client/link/retry\";\nimport { SubscriptionClient } from 'subscriptions-transport-ws'\nimport { getMainDefinition } from '@apollo/client/utilities'\nimport { setContext } from '@apollo/client/link/context';\nimport {snackActions} from './components/utilities/Snackbar';\nimport MessageTypes from 'subscriptions-transport-ws/dist/message-types'\n\nconst cache = new InMemoryCache({\n    typePolicies: {\n        Query: {\n            fields: {\n                operationeventlog: {\n                    \n                },\n                callback: {\n                  \n                }\n            }\n        }\n    }\n});\n\nconst retryLink = new RetryLink({\n  delay: {\n    initial: 20,\n    max: 300,\n    jitter: true\n  },\n  attempts: {\n    max: 2,\n    retryIf: (error, _operation) => !!error\n  }\n});\nconst httpLink = new HttpLink({\n    uri: window.location.origin + \"/graphql/\",\n    options: {\n        reconnect: true,   \n        connectionParams: {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       }     \n    }\n});\nconst authLink = setContext((_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n    }\n  }\n});\nconst promiseToObservable = (promise) =>\n    new Observable((subscriber) => {\n      promise.then(\n        value => {\n          console.log(subscriber);\n          if (subscriber.closed) return;\n          subscriber.next(value);\n          subscriber.complete();\n        },\n        err => subscriber.error(err)\n      );\n    });\nconst errorLink = onError(({ graphQLErrors, networkError, operation, forward }) => {\n  console.log(\"errors?\");\n  try{\n    if (graphQLErrors) {\n      console.log(\"[graphQLError]\", graphQLErrors);\n      for (let err of graphQLErrors) {\n        switch (err.extensions.code) {\n          case 'forbidden':\n              snackActions.error(err.message);\n              break;\n          case 'access-denied':\n            //fallsthrough\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in graphql\");\n            // modify the operation context with a new token\n            \n            return promiseToObservable(\n              GetNewToken())\n              .flatMap(() => {\n              // retry the request, returning the new observable\n              operation.setContext({\n                headers: {\n                 Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n                },\n              });\n              // retry the request, returning the new observable\n              console.log(\"forwarding operation in promise thingy\", localStorage.getItem(\"access_token\"))\n              return forward(operation);\n              });\n          case 'validation-failed':\n            console.log(err);\n            return;\n          default:\n              console.log(err);\n              snackActions.error(err.message);\n        }\n      }\n    }\n    if (networkError) {\n      console.log(\"[Network error]\", networkError);\n      if(networkError.extensions === undefined){\n        snackActions.error(\"Failed to connect to Mythic, please refresh\");\n        restartWebsockets();\n        window.location = \"/new/login\";\n        return;\n      }\n      switch (networkError.extensions.code) {\n          case 'access-denied':\n            snackActions.warning(\"Access Denied\");\n            break;\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in network\");\n              restartWebsockets();\n              window.location = \"/new/login\";\n              break;\n          default:\n              console.log(networkError);\n        }\n    }\n  }catch(error){\n    snackActions.error(\"Failed to connect to Mythic, please refresh\");\n    console.log(error);\n    restartWebsockets();\n    window.location = \"/new/login\";\n    return;\n  }\n});\n\nconst GetNewToken = async () =>{\n  const requestOptions = {\n            method: \"POST\",\n            headers: {\n            'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\"refresh_token\": localStorage.getItem(\"refresh_token\"),\n            \"access_token\": localStorage.getItem(\"access_Token\")})\n        };\n        return fetch('/refresh', requestOptions).then((response) => {\n            response.json().then(data => {\n                console.log(data)\n                if(\"access_token\" in data){\n                    successfulRefresh(data);\n                    console.log(\"successfully got new access_token\");\n                    return true;\n                }else{\n                    FailedRefresh();\n                    return false;\n                }\n            }).catch(error => {\n                console.log(\"Error trying to get json response in GetNewToken\", error.toString());\n                console.log(response);\n                FailedRefresh();\n                return false;\n            });\n        }).catch(error => {\n            console.log(\"There was an error in GetNewToken!\", error.toString());\n            FailedRefresh();\n            return false;\n        });\n}\nconst websocketAddress =() =>{\n    return window.location.protocol === \"https:\" ? \"wss://\" + window.location.host + \"/graphql/\" : \"ws://\" + window.location.host + \"/graphql/\";\n}\nconst websocketClient = new SubscriptionClient(websocketAddress(), {\n  reconnect: true,\n  connectionParams: () => {\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`\n      }\n    }\n  }\n})\nconst wsLink = new WebSocketLink(websocketClient);\n/*\nconst websocketLink = new WebSocketLink({\n     uri: websocketAddress(),\n     options: {\n       reconnect: true,\n       lazy: true,\n       connectionParams: async () => ({\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       })\n     }\n    });\n  */\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query)\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    )\n  },\n  wsLink,\n  httpLink\n)\nexport const apolloClient = new ApolloClient({\n   link: from([authLink, errorLink, retryLink, authLink.concat(splitLink)]),\n    cache\n  });\nexport function restartWebsockets () {\n    // Copy current operations\n    const operations = Object.assign({}, websocketClient.operations)\n  \n    // Close connection\n    websocketClient.close(true)\n  \n    // Open a new one\n    websocketClient.connect()\n  \n    // Push all current operations to the new connection\n    Object.keys(operations).forEach(id => {\n      websocketClient.sendMessage(\n        id,\n        MessageTypes.GQL_START,\n        operations[id].options\n      )\n    })\n  }\nReactDOM.render(\n  <React.StrictMode>\n        <ApolloProvider client={apolloClient}>\n            <Router>\n                <App key=\"App\"/>\n            </Router>\n        </ApolloProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}