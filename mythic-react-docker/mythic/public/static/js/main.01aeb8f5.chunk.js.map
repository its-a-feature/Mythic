{"version":3,"sources":["../node_modules/yargs-parser sync","components/MythicComponents/MythicTextField.js","assets/mythic.svg","cache.js","components/utilities/Snackbar.js","components/pages/Login/LoginForm.js","components/pages/Settings/SettingsOperatorAPIToken.js","components/pages/Settings/SettingsOperatorDialog.js","components/pages/Settings/SettingsOperatorDeleteDialog.js","components/MythicComponents/MythicDialog.js","components/utilities/Time.js","components/pages/Settings/SettingsOperator.js","components/pages/Settings/SettingsOperatorTable.js","components/pages/Settings/Settings.js","components/pages/PayloadTypesC2Profiles/PayloadTypeBuildDialog.js","components/pages/PayloadTypesC2Profiles/PayloadTypeCard.js","components/pages/PayloadTypesC2Profiles/PayloadTypeContainerDisplay.js","components/pages/PayloadTypesC2Profiles/C2ProfileBuildDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileOutputDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileConfigDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileStartStopOutputDialog.js","components/pages/CreatePayload/CreatePayloadParameter.js","components/pages/CreatePayload/CreatePayloadC2ProfileParametersTable.js","components/pages/PayloadTypesC2Profiles/C2ProfileSavedInstancesDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfilesCard.js","components/pages/PayloadTypesC2Profiles/C2ProfileContainerDisplay.js","components/pages/PayloadTypesC2Profiles/TranslationContainerCard.js","components/pages/PayloadTypesC2Profiles/TranslationContainerDisplay.js","components/pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles.js","components/pages/CreatePayload/CreatePayloadNavigationButtons.js","components/pages/CreatePayload/Step1SelectOS.js","components/pages/CreatePayload/CreatePayloadBuildParametersTable.js","components/pages/CreatePayload/Step2SelectPayloadType.js","components/MythicComponents/MythicConfirmDialog.js","components/pages/CreatePayload/Step3SelectCommands.js","components/pages/CreatePayload/Step4C2Profiles.js","components/pages/CreatePayload/PayloadSubscriptionNotification.js","components/pages/CreatePayload/Step5Build.js","components/pages/CreatePayload/CreatePayload.js","components/pages/CreateWrapper/CreatePayloadNavigationButtons.js","components/pages/CreateWrapper/Step1SelectOS.js","components/pages/CreateWrapper/CreatePayloadParameter.js","components/pages/CreateWrapper/CreatePayloadBuildParametersTable.js","components/pages/CreateWrapper/Step2SelectPayloadType.js","components/pages/Payloads/DetailedPayloadTable.js","components/pages/CreateWrapper/Step3SelectPayload.js","components/pages/CreateWrapper/PayloadSubscriptionNotification.js","components/pages/CreateWrapper/Step5Build.js","components/pages/CreateWrapper/CreatePayload.js","components/pages/EventFeed/EventFeedTableEventsActions.js","components/pages/EventFeed/EventFeedTableEvents.js","components/pages/EventFeed/EventFeedTableInput.js","components/pages/EventFeed/EventFeedTable.js","components/pages/EventFeed/EventFeed.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialogRow.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialog.js","components/pages/Operations/OperationTableRowNotificationsDialog.js","components/pages/Operations/OperationTableRow.js","components/pages/Operations/OperationTable.js","components/pages/Operations/EditBlockListDialog.js","components/pages/Operations/CommandBlockListTable.js","components/pages/Operations/Operations.js","components/pages/BrowserScripts/EditScriptDialog.js","components/pages/BrowserScripts/BrowserScriptsTableRow.js","components/pages/BrowserScripts/BrowserScriptsTable.js","themes/Themes.js","components/pages/BrowserScripts/BrowserScriptsOperationsTableRow.js","components/pages/BrowserScripts/BrowserScriptsOperationsTable.js","components/pages/BrowserScripts/BrowserScripts.js","components/pages/Payloads/PayloadDescriptionDialog.js","components/pages/Payloads/PayloadFilenameDialog.js","components/pages/Payloads/PayloadBuildMessageDialog.js","components/pages/Payloads/PayloadsTableRowC2Status.js","components/pages/Payloads/PayloadsTableRowBuildStatus.js","components/pages/Payloads/PayloadConfigCheckDialog.js","components/pages/Payloads/PayloadRedirectRulesDialog.js","components/pages/Payloads/PayloadsTableRow.js","components/pages/Payloads/ImportPayloadConfigDialog.js","components/pages/Payloads/PayloadsTable.js","components/pages/Payloads/Payloads.js","components/pages/Callbacks/D3ContextMenu.js","components/pages/Callbacks/C2PathDialog.js","components/pages/ExpandedCallback/ExpandedCallbackSideDetails.js","components/MythicComponents/MythicTabPanel.js","components/utilities/Clipboard.js","components/pages/Callbacks/ResponseDisplayScreenshotModal.js","components/pages/Callbacks/ResponseDisplayScreenshot.js","components/pages/Callbacks/ResponseDisplayPlaintext.js","components/MythicComponents/MythicSelectFromListDialog.js","components/pages/Search/CredentialTableNewCredentialDialog.js","components/pages/Callbacks/TaskParametersDialogRow.js","components/pages/Callbacks/TaskParametersDialog.js","components/pages/Callbacks/TaskFromUIButton.js","components/pages/Callbacks/ResponseDisplayTable.js","components/pages/Callbacks/ResponseDisplayDownload.js","components/pages/Callbacks/ResponseDisplaySearch.js","components/pages/Callbacks/ResponseDisplay.js","components/pages/Callbacks/TaskCommentDialog.js","components/pages/Callbacks/TaskTagDialog.js","components/pages/Callbacks/TaskOpsecDialog.js","components/pages/Callbacks/TaskViewParametersDialog.js","components/pages/Callbacks/TaskViewStdoutStderrDialog.js","components/pages/Callbacks/TaskTokenDialog.js","components/pages/Callbacks/TaskDisplayContainer.js","components/pages/Callbacks/TaskDisplay.js","components/pages/Callbacks/CallbacksTabsTaskingFilterDialog.js","components/pages/Callbacks/CallbacksTabsTaskingInputTokenSelect.js","components/pages/Callbacks/CallbacksTabsTaskingInput.js","components/pages/Callbacks/CallbacksTabsTasking.js","components/pages/ExpandedCallback/ExpandedCallback.js","components/pages/Home/QuickStartCard.js","components/pages/Home/AgentC2Overview.js","components/pages/Home/Home.js","components/utilities/LoggedInRoute.js","components/pages/Callbacks/CallbacksTabsFileBrowserTree.js","components/pages/Callbacks/DownloadHistoryDialog.js","components/pages/Callbacks/CallbacksTabsFileBrowserTable.js","components/pages/Callbacks/CallbacksTabsFileBrowser.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTree.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTable.js","components/pages/Callbacks/CallbacksTabsProcessBrowser.js","components/pages/Callbacks/CallbacksTabs.js","components/pages/Callbacks/HeightsDialog.js","components/MythicComponents/MythicTable.js","components/MythicComponents/MythicTransferList.js","components/MythicComponents/MythicDisplayTextDialog.js","components/pages/Callbacks/CallbackMutations.js","components/pages/Callbacks/DetailedCallbackTable.js","components/pages/Callbacks/CallbacksTableRow.js","components/pages/Callbacks/CallbacksTable.js","components/pages/Callbacks/ManuallyAddEdgeDialog.js","components/pages/Callbacks/CallbacksGraph.js","components/pages/Callbacks/CallbacksTop.js","components/pages/Callbacks/Callbacks.js","components/pages/Search/SearchTabTasks.js","components/MythicComponents/MythicSnackDownload.js","components/pages/Search/FileMetaTable.js","components/pages/Search/FileBrowserTable.js","components/pages/Search/SearchTabFiles.js","components/pages/Search/CredentialTable.js","components/pages/Search/SearchTabCredentials.js","components/pages/Search/KeylogsTable.js","components/pages/Search/SearchTabKeylog.js","components/pages/Search/TokenDescriptionDialog.js","components/pages/Search/TokenTable.js","components/pages/Search/SearchTabTokens.js","components/pages/Search/CallbackSearchTable.js","components/pages/Search/SearchTabCallbacks.js","components/pages/Search/ArtifactTable.js","components/pages/Search/SearchTabArtifacts.js","components/pages/Search/SocksSearchTable.js","components/pages/Search/SearchTabSocks.js","components/pages/Search/Search.js","components/TopAppBarNotifications.js","components/EventFeedNotifications.js","components/mythic_red_small.svg","components/TopAppBar.js","components/utilities/useDarkMode.js","components/pages/SingleTaskView/TaskArtifactsTable.js","components/pages/SingleTaskView/TaskMITREATTACKTable.js","components/pages/SingleTaskView/TaskFilesTable.js","components/pages/SingleTaskView/TaskCredentialsTable.js","components/pages/SingleTaskView/MetadataTable.js","components/pages/SingleTaskView/IncludeMoreTasksDialog.js","components/pages/SingleTaskView/SingleTaskView.js","themes/GlobalStyles.js","components/pages/Reporting/ReportingTable.js","components/pages/Reporting/Reporting.js","components/App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","ValidationTextField","withStyles","root","borderColor","borderWidth","borderLeftWidth","padding","TextField","MythicTextField","onChange","evt","name","props","value","target","error","validate","checkError","onKeyPress","event","key","undefined","onEnter","style","width","this","fullWidth","placeholder","label","autoFocus","variant","disabled","required","requiredValue","InputLabelProps","inputLabelProps","multiline","type","InputProps","helperText","errorText","marginBottom","React","Component","meState","makeVar","loggedIn","user","access_token","refresh_token","menuOpen","successfulRefresh","data","localStorage","setItem","getItem","FailedRefresh","console","log","removeItem","useSnackbarRef","SnackbarUtilsConfigurator","useSnackbar","snackActions","success","msg","options","toast","warning","info","dismiss","closeSnackbar","enqueueSnackbar","LoginForm","me","useReactiveVar","useState","username","setUsername","password","setPassword","useEffect","isJWTValid","submit","preventDefault","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","successfulLogin","restartWebsockets","catch","toString","justifyContent","display","to","locationState","location","state","from","pathname","redirectPath","src","logo","height","alt","onSubmit","Button","color","onClick","marginRight","APITokenRow","TableRow","TableCell","size","onDeleteAPIToken","startIcon","token_value","SettingsOperatorDialog","passwordOld","setPasswordOld","passwordNew","setPasswordNew","Fragment","DialogTitle","title","DialogContent","dividers","DialogContentText","margin","DialogActions","handleClose","onAccept","SettingsOperatorDeleteDialog","onClose","MythicDialog","descriptionElementRef","useRef","open","descriptionElement","current","focus","Dialog","scroll","maxWidth","innerDialog","MythicModifyStringDialog","comment","setComment","onCommitSubmit","MythicViewJSONAsTableDialog","tableType","setTableType","setHeaders","permissions","permissionDict","constructor","Object","parse","Array","isArray","push","leftColumn","rightColumn","length","Paper","elevation","position","TableContainer","component","className","Table","TableHead","map","header","index","TableBody","element","hover","wordBreak","whiteSpace","row","MythicViewObjectPropertiesAsTableDialog","reduce","prev","toLocalTime","date","view_utc_time","init_date","Date","toDateString","toTimeString","substring","getTimeDifference","checkin_time","now","getTime","getTimezoneOffset","millisec","Math","abs","seconds","trunc","minutes","hours","days","output","useInterval","callback","delay","savedCallback","setInterval","clearInterval","SettingsOperator","setOpen","openUpdate","setOpenUpdateDialog","openDelete","setOpenDeleteDialog","onDeleteOperator","onUsernameChanged","onPasswordChanged","user_id","old_password","new_password","Switch","checked","onViewUTCChanged","inputProps","active","onActiveChanged","last_login","creation_time","admin","onAdminChanged","IconButton","paddingBottom","paddingTop","colSpan","Collapse","in","timeout","unmountOnExit","Box","Typography","gutterBottom","onCreateAPIToken","float","apitokens","token","SettingsOperatorTable","theme","useTheme","openNew","setOpenNewDialog","backgroundColor","pageHeader","main","pageHeaderText","marginTop","textAlign","marginLeft","onNewOperator","operators","op","GET_Operator","gql","operatorsUpdateViewUTCTime","operatorsUpdateAdmin","operatorsUpdateActive","operatorsDelete","operatorsUpdateUsername","newOperatorMutation","operatorsUpdatePassword","createAPITokenMutation","deleteAPITokenMutation","Settings","setOperators","useQuery","fetchPolicy","onCompleted","operator","useMutation","result","update_operator_by_pk","updatedOperators","o","onError","err","updateUTC","filter","deleteOperator","updateAdmin","updateActive","createAPIToken","status","operator_id","delete_apitokens_by_pk","api","deleteAPIToken","createOperator","newOperator","updateUsername","updatePassword","variables","GET_Payload_Details","PayloadTypeBuildDialog","buildParams","setBuildParams","payload_name","payloadtype","buildparameters","loading","LinearProgress","param","description","parameter_type","parameter","verifier_regex","useStyles","makeStyles","expand","transform","transition","transitions","create","duration","shortest","expandOpen","running","notrunning","StyledAvatar","badge","boxShadow","top","left","borderRadius","animation","border","content","opacity","Badge","PayloadTypeCard","classes","wrappedPayloads","setWrappedPayloads","openBuildingDialog","setOpenBuildingDialog","supportedOS","setSupportedOS","last_heartbeat","wrap_these_payload_types","wrapped","cur","ptype","join","supported_os","split","Card","overlap","invisible","anchorOrigin","vertical","horizontal","CardMedia","media","objectFit","CardContent","author","note","paddingRight","alignItems","flexDirection","alignContent","href","wrapper","SUB_Payload_Types","PayloadTypeContainerDisplay","useSubscription","payloadTypes","setPayloadTypes","pt","GET_C2_Details","C2ProfileBuildDialog","c2profile","c2profileparameters","default_value","randomize","format_string","getProfileOutputQuery","C2ProfileOutputDialog","profile_id","getProfileOutput","getProfileConfigQuery","C2ProfileConfigDialog","config","setConfig","filename","downloadContainerFile","atob","mode","fontSize","showGutter","highlightActiveLine","setOptions","showLineNumbers","tabSize","onConfigSubmit","btoa","C2ProfileStartStopOutputDialog","CreatePayloadParameter","passedValue","returnAllDictValues","setValue","dictValue","setDictValue","dictOptions","setDictOptions","dictSelectOptions","setDictSelectOptions","dictSelectOptionsChoice","setDictSelectOptionsChoice","chooseOptions","setChooseOptions","dateValue","setDateValue","submitDictChange","list","condensed","opt","custom","tmpDate","setDate","getDate","parseInt","onChangeDate","includes","toISOString","slice","initial","default_show","dictSelectOptionsInitial","count","preCount","max","toLowerCase","onChangeValue","onChangeText","testParameterValues","curVal","RegExp","test","addDictValEntry","choice","newDictValue","toggleSwitchValue","newVal","anchorPopoverEl","setAnchorPopoverEl","openDescription","Boolean","handlePopoverClose","onMouseEnter","currentTarget","onMouseLeave","Popover","anchorEl","transformOrigin","disableRestoreFocus","pointerEvents","PaperProps","palette","primary","dark","light","utils","DateFnsUtils","Grid","container","justify","disableToolbar","format","KeyboardButtonProps","FormControl","Select","native","i","newValues","removeDictEntry","Input","startAdornment","updated","onChangeDictKey","onChangeDictVal","selectOpt","MenuItem","getParameterObject","CreatePayloadC2ProfileParametersTable","paramName","getProfileInstaceQuery","deleteInstanceMutation","createInstanceMutation","C2ProfileSavedInstancesDialog","instanceName","setInstanceName","selectedInstance","setSelectedInstance","createdInstances","setCreatedInstances","baseParameters","setBaseParameters","currentParameters","setCurrentParameters","operation_id","current_operation_id","parameters","c2profile_by_pk","random","RandExp","gen","sort","a","b","localeCompare","c2profileparametersinstances","useLazyQuery","updates","c2profileparametersinstance","inst","c2profileparameter","getInstanceValues","updatedInstances","instance_name","deleteInstance","create_c2_instance","createInstance","spacing","item","xs","InputLabel","c2Name","parameterName","c2params","c2profile_id","c2_instance","successButton","errorButton","startStopProfileMutation","setProfileConfigMutation","C2ProfilesCard","dropdownOpen","setDropdownOpen","dropdownAnchorRef","handleDropdownToggle","prevOpen","handleDropdownClose","contains","update","cache","setOutput","startStopProfile","setOpenProfileStartStopDialog","onStartStopProfile","action","openProfileDialog","setOpenProfileDialog","openProfileConfigDialog","setOpenProfileConfigDialog","openProfileStartStopDialog","openProfileSavedInstancesDialog","setOpenProfileSavedInstancesDialog","uploadContainerFile","configSubmit","is_p2p","icon","faLink","payloadtypec2profiles","container_running","ButtonGroup","ref","file_path","Popper","role","disablePortal","zIndex","TransitionProps","placement","Grow","ClickAwayListener","onClickAway","MenuList","SUB_C2_Profiles","C2ProfileContainerDisplay","setC2profile","paddingLeft","TranslationContainerCard","faLanguage","payloadtypes","SUB_Translation_Containers","TranslationContainerDisplay","translationContainers","setTranslationContainers","translationContainersWithPayloads","setTranslationContainersWithPayloads","unassigned","translationcontainer","tr","assigned","PayloadTypesC2Profiles","CreatePayloadNavigationButtons","first","canceled","finished","last","GET_Payload_Types","Step1SelectOS","os","setOS","osOptions","setOSOptions","sortedOptions","currentOptions","adds","prevData","CircularProgress","align","FormHelperText","CreatePayloadBuildParametersTable","buildParameters","Step2SelectPayloadType","selectedPayloadType","setSelectedPayloadType","fileExtension","setFileExtension","supportsDynamicLoading","setSupportsDynamicLoading","payloadTypeParameters","setSelectedPayloadTypeParameters","buildOptions","payload_type","file_extension","supports_dynamic_loading","payloadtypedata","payload","params","p","newParams","finishedParams","MythicConfirmDialog","dialogText","maxHeight","cancelText","acceptText","paper","overflow","button","divider","Step3SelectCommands","commands","setCommands","commandOptions","setCommandOptions","openConfirmDialog","setOpenConfirmDialog","payloadType","allCommands","command","attributes","selected","reason","include_command","build_option_that_sets_include_to_false","entries","selectedCommands","c","cmd","CommandTransferSelect","foundExit","cmdNames","setChecked","setLeft","right","setRight","leftChecked","intersection","rightChecked","hoveredCommand","setHoveredCommnad","not","find","handleToggle","currentIndex","itemKey","findIndex","indexOf","newChecked","splice","initialLeft","initialRight","setHoveredData","innerText","customList","items","CardHeader","cardHeader","Divider","List","dense","valueObj","labelId","ListItem","ListItemIcon","Checkbox","tabIndex","disableRipple","ListItemText","direction","concat","Step4C2Profiles","c2Profiles","setC2Profiles","profiles","c2","original","fixedArray","originalPiece","final","updateC2Parameter","updatedc2","curC2","curc2","FormControlLabel","control","toggleC2Selection","labelPlacement","onChangeCreatedInstanceName","allValid","includedC2","adjustedC2","values","v","forEach","subscribe_payloads","breakpoints","up","minWidth","typography","fontWeight","actionRoot","icons","collapse","checkIcon","textTransform","SnackMessage","forwardRef","expanded","setExpanded","CardActions","clsx","download","window","origin","file_id","SnackMessageError","PayloadSubscriptionNotification","fromNow","build_phase","build_message","persist","filemetum","agent_file_id","build_stderr","create_payload","Step5Build","setFilename","setDescription","createPayload","createPayloadMutation","final_values","finishedPayload","CreatePayload","setPayload","activeStep","setActiveStep","handleStepData","stepData","handleNext","cancelStep","handleBack","steps","prevActiveStep","Stepper","alternativeLabel","Step","StepLabel","step","getStepContent","disableNext","selectedPayloadTypeID","setSelectedPayloadTypeID","payload_type_id","DetailedPayloadTable","DetailedPayloadInnerTable","setBuildParameters","payload_id","commandState","payloadcommands","mythic","version","buildParametersState","buildparameterinstances","buildparameter","enc_key","enc_key_base64","dec_key","dec_key_base64","c2ProfilesState","c2_profile","pageHeaderColor","uuid","filename_text","sha1","md5","j","wrapped_payload_id","Step3SelectPayload","payloadOptions","setPayloadOptions","payloadtype_by_pk","payloads","PayloadSelect","selectedPayload","stickyHeader","PayloadsTableRow","onSelected","openDetailedView","setOpenDetailedView","tag","autoHideDuration","build_error","CreatePayloadWrapper","EventFeedTableEventsActions","setAnchorEl","onUpdateResolution","resolved","handleClick","useCallback","ListItemSecondaryAction","Menu","level","onUpdateLevel","getSurroundingEvents","onUpdateDeleted","inline","EventFeedTableEvents","ListItemAvatar","Avatar","disableTypography","timestamp","secondary","overflowX","textBackgroundColorSuccess","textBackgroundColor","textBackgroundColorMythic","textBackgroundColorError","message","EventFeedTableInput","setMessage","onSubmitMessage","bottom","endAdornment","Row","EventList","operationeventlog","listRef","createRef","getItemSize","match","eventlogWithFunctions","oplog","resetAfterIndex","itemData","itemCount","itemSize","overscanCount","EventFeedTable","messagesEndRef","scrollToBottom","scrollIntoView","behavior","stopPropagation","loadMore","loadNextError","resolveViewableErrors","resolveAllErrors","GET_Event_Feed","SUB_Event_Feed","GET_Surrounding_Events","Create_Operational_Event_Log","GET_Event_Feed_Next_Error","Update_Deleted","Update_Resolution","Update_Level","Update_ResolveViewableErrors","Update_ResolveAllErrors","EventFeed","setOperationEventLog","offset","setOffset","eventQuerySize","shouldResubscribe","onSubscriptionData","subscriptionData","newEvents","indx","updatingPrev","getMoreTasking","foundNew","getSurroundingEventQuery","getNextError","newOperationEventLog","removedMessage","update_operationeventlog","returning","newMessages","updateDeleted","updatedMessage","update_operationeventlog_by_pk","updatedMessages","updateResolution","updateLevel","updated_ids","updateResolveViewable","updateResolveAllErrors","lower_id","upper_id","resolveIds","ids","OperationTableRowUpdateOperatorsDialogRow","viewMode","setViewMode","blockListName","setBlockListName","inputRef","view_mode","disabledcommandsprofile","updateOperator","input","blockListItemIndex","commandBlockLists","cbl","GET_Operations","Update_Lead","Update_OperatorViewMode","Remove_OperatorFromOperation","Add_OperatorsToOperation","OperationTableRowUpdateOperatorsDialog","setAdmin","originalOperators","setOriginalOperators","setCommandBlockLists","allOperators","operation_by_pk","operatoroperations","updateAssignments","operatoroperation_id","blockListNames","updateOperationLead","addOperators","removeOperatorsMutation","updateOperatorViewMode","newAdmin","admin_id","newOperators","removeOperators","oldMatch","oop","operatoroperation_ids","GET_OperationData","OperationTableRowNotificationsDialog","setName","channel","setChannel","displayName","setDisplayName","iconEmoji","setIconEmoji","iconURL","setIconURL","webhook","setWebhook","webhookMessage","setWebhookMessage","complete","setComplete","webhook_message","display_name","icon_emoji","icon_url","onTextChange","maxLines","useWorker","onUpdateOperation","updateCurrentOpertionMutation","OperationTableRow","openUpdateNotifications","setOpenUpdateNotifications","openUpdateOperators","setOpenUpdateOperators","openChangeCurrentOperation","setOpenChangeCurrentOperation","updateCurrentOperation","current_operation_name","operation_name","Update_Operation","newOperationMutation","OperationTable","openNewOperator","setOpenNewOperatorDialog","update_operation_by_pk","updateOperation","createOperation","onNewOperation","operation","newOperation","operations","PayloadTypeBlockListPreMemo","leftTitle","setLeftTitle","rightTitle","setRightTitle","PayloadTypeBlockList","memo","getPayloadTypesAndCommandsQuery","EditBlockListDialog","dialogTitle","propBlockListName","currentSelected","editable","setSelectedCommands","updatedPayloadTypes","trim","toAdd","toRemove","command_id","newBlockListEntry","deleteBlockListMutation","deleteBlockListEntriesMutation","CommandBlockListTable","blockLists","setBlockLists","newBlockList","insert_disabledcommandsprofile","currentBlockLists","found","newBlockLists","newEntries","newBlockListEntries","deleteBlockList","filteredBlockLists","deleteBlockListEntry","filteredValues","deleted_ids","deleteBlockListEntries","onSubmitEdits","removeEntryIDs","onAcceptDelete","CommandBlockListTableRow","blockedCommandDisplay","setBlockedCommandDisplay","updatedEntries","setUpdatedEntries","newDisplay","commandNames","GET_BlockLists","Operations","setOperations","arrayForm","updatedOperations","getCommandsAndPayloadTypesQuery","EditScriptDialog","script","setScript","selectedCommand","setSelectedCommand","payloadTypeCmdOptions","setPayloadTypeCmdOptions","setAuthor","inputPTRef","inputCMDRef","onSubmitEdit","cmds","new","onRevert","BrowserScriptsTableRow","openEdit","setOpenEdit","isApplied","setIsApplied","openDeleteDialog","browserscriptoperations","onDelete","browserscript_id","onToggleActive","user_modified","onSubmitRemoveFromOperation","onSubmitApplyToOperation","container_version","BrowserScriptsTable","openNewScriptDialog","setOpenNewScriptDialog","onSubmitNew","browserscript","onToggleOperation","muiTheme","createMuiTheme","BrowserScriptsOperationsTableRow","openViewScript","setOpenViewScript","readOnly","BrowserScriptsOperationsTable","browserscriptoperation","SUB_BrowserScripts","SUB_OperationBrowserScripts","updateBrowserScriptActive","updateBrowserScriptScript","updateBrowserScriptRevert","addBrowserScript","deleteBrowserScriptMutation","BrowserScripts","browserScripts","setBrowserScripts","operationBrowserScripts","setOperationBrowserScripts","toggleActive","updateScript","revertScript","createBrowserScript","deleteBrowserScript","updateDescriptionMutation","getDescriptionQuery","PayloadDescriptionDialog","payload_by_pk","updateDescription","getFilenameQuery","PayloadFilenameDialog","fileId","setFileId","PayloadBuildMessageDialog","payloadData","setPayloadData","viewError","setViewError","build_stdout","PayloadsTableRowC2Status","payloadc2profiles","Tooltip","PayloadsTableRowBuildStatus","thickness","checkPayloadConfigurationQuery","PayloadConfigCheckDialog","config_check","generateRedirectRulesMutation","PayloadRedirectRulesDialog","redirect_rules","rebuildPayloadMutation","exportPayloadConfigQuery","setOpenDescriptionDialog","openFilename","setOpenFilenameDialog","openBuildMessage","setOpenBuildMessageDialog","openConfigCheckDialog","setOpenConfigCheckDialog","openRedirectRulesDialog","setOpenRedirectRulesDialog","triggerRebuild","export_payload_config","dataBlob","Blob","ele","document","getElementById","URL","createObjectURL","click","createElement","appendChild","exportConfig","callback_alert","onAlertChanged","onDeletePayload","option","handleMenuItemClick","ImportPayloadConfigDialog","fileValue","setFileValue","reader","FileReader","onload","contents","files","readAsBinaryString","hidden","PayloadsTable","onUpdateCallbackAlert","openPayloadImport","setOpenPayloadImport","payloadFragment","SUB_Payloads","Get_Payloads","payloadsDelete","payloadsCallbackAlert","Payloads","setPayloads","deleteFile","payload_ids","deletePayload","update_payload_by_pk","callbackAlert","createContextMenu","g","d","menuItems","svgId","x","y","d3","remove","append","attr","selectAll","enter","on","text","menuFactory","pageX","pageY","C2PathDialog","dagreRef","reZoom","setReZoom","drawC2PathElements","callbackgraphedges","rankDir","label_components","packet_flow_view","include_disconnected","show_all_nodes","parent","node","edges","view_config","node_events","svgGroup","disconnected","disconnectedArrow","connected","connectedArrow","nodeColor","nodeLabelStyle","edgeLabelStyle","add_edge_to_mythic","edge","source","add_node","setEdge","edge_id","end_timestamp","labelStyle","arrowheadStyle","setNode","getLabel","shape","isParent","host","clusterLabelPos","graphGroup","setParent","add_edge_p2p","destination","createEdge","adjusted_direction","dagreD3","graphlib","Graph","compound","multigraph","directed","setGraph","rankdir","setDefaultEdgeLabel","svg","select","_groups","zoom","call","hasEdge","render","getBoundingClientRect","shapes","circle","bbox","shapeSvg","insert","intersect","point","square","candidates","children","longest","outEdges","graphWidth","graph","graphHeight","zoomScale","min","translateX","translateY","translate","scale","SUB_Edges","ExpandedCallbackSideDetails","ExpandedCallbackSideDetailsTable","displayTime","setDisplayTime","openEditDescriptionDialog","setOpenEditDescriptionDialog","activeEgress","setActiveEgress","activeEgressBool","setActiveEgressBool","openC2Dialog","setOpenC2Dialog","setCallbackgraphedges","callbackgraphedgesAll","setCallbackgraphedgesAll","hasEgressRoute","setHasEgressRoute","callbackEdges","setCallbackEdges","callbackgraphedge","curTime","last_checkin","routes","getEdges","activeOnly","myEdges","foundMore","newEdges","myActiveEdges","locked","locked_operator","integrity_level","ip","external_ip","domain","architecture","pid","sleep_info","cursor","process_name","extra_info","MythicTabPanel","other","tabInfo","getCallbackData","queryParams","changeSearchParam","overflowY","flexGrow","a11yProps","MythicTabLabel","onContextMenu","onCloseTab","selectionFollowsFocus","textColor","indicator","onEditTabDescription","Tab","tabID","MythicSearchTabLabel","iconComponent","copyStringToClipboard","str","el","setAttribute","execCommand","removeChild","ResponseDisplayScreenshotModal","setZoom","tooltip","background","contrast","shadows","arrow","ResponseDisplayScreenshot","openScreenshot","setOpenScreenshot","toUTCString","plaintext","hoverText","ResponseDisplayPlaintext","plaintextView","setPlaintextView","newPlaintext","minLines","MythicSelectFromListDialog","setSelected","opts","identifier","dontCloseOnSubmit","MenuProps","ITEM_HEIGHT","getContentAnchorEl","formControl","chips","flexWrap","chip","noLabel","CredentialTableNewCredentialDialog","credentialType","setCredentialType","account","setAccount","realm","setRealm","credential","setCredential","getDynamicQueryParams","credentialFragment","createCredentialMutation","TaskParametersDialogRow","ChoiceOptions","setChoiceOptions","boolValue","setBoolValue","arrayValue","setArrayValue","choiceMultipleValue","setChoiceMultipleValue","agentConnectNewHost","setAgentConnectNewHost","agentConnectHostOptions","setAgentConnectHostOptions","agentConnectNewPayload","setAgentConnectNewPayload","agentConnectHost","setAgentConnectHost","agentConnectPayloadOptions","setAgentConnectPayloadOptions","agentConnectPayload","setAgentConnectPayload","agentConnectC2ProfileOptions","setAgentConnectC2ProfileOptions","agentConnectC2Profile","setAgentConnectC2Profile","openAdditionalPayloadOnHostMenu","setOpenAdditionalPayloadOnHostmenu","createCredentialDialogOpen","setCreateCredentialDialogOpen","dynamic_query_function","choices","getDynamicParams","insert_credential_one","createCredential","callback_id","parameter_name","commandInfo","hostNum","payloadNum","onChangeAgentConnect","host_index","payload_index","c2_index","agentConnectValue","agent_uuid","onChangeCredentialJSONValue","onChangeChoiceMultiple","l","onChangeNumber","onSwitchChange","onFileChange","onChangeAgentConnectHost","onChangeAgentConnectPayload","onChangeAgentConnectC2Profile","onChangeAgentConnectNewHost","onChangeAgentConnectNewPayload","onAgentConnectAddNewPayloadOnHost","toUpperCase","payload_choices","onAgentConnectRemovePayloadOnHost","payloadOnHostID","addNewArrayValue","newArray","onCreateCredential","multiple","tableLayout","removed","removeArrayValue","n","onChangeArrayText","c2_profile_id","crypto_type","callback_uuid","agent_callback_id","onChangeLinkInfo","credential_text","textOverflow","GetLoadedCommandsQuery","getAllCommandsQuery","getAllEdgesQuery","getAllPayloadsQuery","getAllPayloadsOnHostsQuery","addPayloadOnHostMutation","removePayloadOnHostMutation","getCommandQuery","getCredentialsQuery","TaskParametersDialog","setCommandInfo","parameterGroups","setParameterGroups","selectedParameterGroup","setSelectedParameterGroup","setParameters","rawParameters","setRawParameters","all","loaded","credentials","requiredPieces","setRequiredPieces","getAllCommands","allCommandsLoading","getLoadedCommands","loadedCommandsLoading","getAllEdges","loadedAllEdgesLoading","getAllPayloads","loadedAllPayloadsLoading","getAllPayloadsOnHosts","loadedAllPayloadsOnHostsLoading","getAllCredentials","loadedCredentialsLoading","addPayloadOnHost","RemovePayloadOnHost","requiredPiecesInitial","groupNames","command_by_pk","commandparameters","parameter_group_name","choices_are_all_commands","choices_are_loaded_commands","groupName","payloadtype_id","setB","Set","has","getLinkInfoFromAgentConnect","getLinkInfoValue","sorted","parsedParameters","defaultV","choice_filter_by_command_attributes","prevn","cmd_attributes","loadedcommands","agentConnectNewPayloads","profile","callbacksOrganized","entry","c2info","val","c2array","payloadInfo","registered_payload","organized","payloadonhost","duplicated_payload","allOrganized","hostIndex","supported_agents","build_requirements","supported_agent_build_parameters","matched","build_param","edge_choices","ui_position","collapsedParameters","collapsedFiles","help_cmd","needs_admin","getLoadedCommandsQuery","TaskFromUIButton","ui_feature","onTasked","fileBrowserCommands","setFileBrowserCommands","openSelectCommandDialog","setOpenSelectCommandDialog","openParametersDialog","setOpenParametersDialog","callbackTokenOptions","setCallbackTokenOptions","selectedCallbackToken","setSelectedCallbackToken","openCallbackTokenSelectDialog","setOpenCallbackTokenSelectDialog","taskingVariables","setTaskingVariables","createTaskingMutation","createTask","callbackData","availableCommands","callback_by_pk","availableTokens","callbacktokens","User","TokenId","onSubmitTasking","token_id","tasking_location","getIconName","iconName","faFolderOpen","faFolder","faFileArchive","faBoxOpen","faCog","faFileWord","faFileExcel","faFilePowerpoint","faFilePdf","faDatabase","faKey","faFileCode","faDownload","faUpload","faFileImage","faList","faTrashAlt","faSyringe","faSkullCrossbones","faCamera","faFileAlt","ResponseDisplayTableStringCell","cellData","rowData","copyIcon","faCopy","startIconHoverText","startIconColor","plaintextHoverText","endIcon","endIconHoverText","endIconColor","getStringSize","bytes","floor","parseFloat","pow","toFixed","ResponseDisplayTableSizeCell","ResponseDisplayTableActionCell","openButton","setOpenButton","openTaskingButton","setOpenTaskingButton","openDropdownButton","setOpenDropdownButton","taskingData","setTaskingData","finishedTasking","finishedViewingData","leftColumnTitle","rightColumnTitle","getButtonObject","CellRenderer","columnData","dataKey","DisplayData","noRowsRender","ResponseDisplayTable","table","allHeaders","setAllHeaders","allData","sortBy","setSortBy","headerWidths","setHeaderWidths","widthRef","sortDirection","setSortDirection","rowStyle","sortTable","tmpData","sortType","h","reverse","rowGetter","resizeRow","deltaX","prevWidths","percentDelta","offsetWidth","nextHeader","updatedWidths","headerRenderer","disableSort","axis","defaultClassName","defaultClassNameDragging","onDrag","unSpecifiedWidths","remainingWidths","headerWidthData","rows","headerData","cellRenderer","headerHeight","noRowsRenderer","rowCount","rowHeight","col","ResponseDisplayDownload","dowload","ResponseDisplaySearch","search","Link","subResponsesQuery","getResponsesLazyQuery","getAllResponsesLazyQuery","taskScript","ResponseDisplay","viewBrowserScript","setViewBrowserScript","rawResponses","setRawResponses","browserScriptData","setBrowserScriptData","highestFetched","setHighestFetched","totalFetched","setTotalFetched","setSearch","selectAllOutput","setSelectAllOutput","task_id","task","fetchLimit","newerResponses","r","outputResponses","rawResponseArray","highestFetchedId","totalFetchedSoFar","fetchMoreResponses","filterOutput","scriptData","copied","tableUpdates","t","filteredRows","foundMatch","String","res","unb64script","fun","Function","fetchScripts","responses","maxID","responseArray","searchText","changeTotalCount","response_aggregate","aggregate","fetchAllResponses","currentPage","onSubmitSearch","searchOutput","screenshot","scr","dl","s","updateCommentMutation","getCommentQuery","TaskCommentDialog","task_by_pk","updateComment","addTaskTagMutation","removeTaskTagMutation","getTaskTagsQuery","TaskTagDialog","newTag","setNewTag","currentTags","tasktag","allTags","setOriginalTags","addTaskTag","removeTaskTag","originalTags","tasktag_id","updateOpsecRequestMutation","getOpsecQuery","TaskOpsecDialog","opsecMessage","setOpsecMessage","opsecData","setOpsecData","opsec_pre_bypass_user","opsec_pre_message","opsec_post_blocked","opsec_post_bypass_user","opsec_post_message","requestOpsecBypass","updateOpsecRequest","opsec_pre_blocked","opsec_pre_bypassed","opsec_post_bypassed","getParametersQuery","TaskViewParametersDialog","workingComment","original_params","display_params","TaskViewStdoutStderrDialog","stdout","stderr","allTokenDataFragment","getTokenInfo","TaskTokenDialog","tokenData","setTokenData","logonsessionData","setLogonSessionData","authenticationData","setAuthenticationData","tokenKeys","logonsessionKeys","authenticationpackageKeys","token_by_pk","reducedTokenData","logonsession","reducedLogonSessionData","authenticationpackages","reducedAuthenticationData","pkg","authpkg","ReissueTaskMutationGQL","ReissueTaskHandlerMutationGQL","speedDial","TaskDisplayContainer","totalCount","setTotalcount","openCommentDialog","setOpenCommentDialog","openTokenDialog","setOpenTokenDialog","openStdoutStderrDialog","setOpenStdoutStderrDialog","openOpsecDialog","setOpenOpsecDialog","openTaskTagDialog","setOpenTaskTagDialog","commandID","setCommandID","setSearchOutput","setCurrentPage","openSpeedDial","setOpenSpeedDial","downloadResponses","reissue_task","reissueTask","reissue_task_handler","reissueTaskHandler","responses_aggregate","newTotal","tooltipPlacement","Backdrop","SpeedDial","ariaLabel","SpeedDialIcon","FabProps","SpeedDialAction","TooltipClasses","tooltipTitle","faExpandArrowsAlt","faExternalLinkAlt","faBook","Pagination","ceil","page","boundaryCount","taskDisplayFragment","getSubTaskingQuery","heading","pxToRem","secondaryHeading","taskAndTimeDisplay","secondaryHeadingExpanded","verticalAlign","details","column","accordionUseStyles","expandIcon","MinusSquare","SvgIcon","PlusSquare","StyledTreeItem","iconContainer","group","borderLeft","fade","TreeItem","TaskDisplayPreMemo","filterOptions","nodesSelected","setNodesSelected","toggleTaskTree","newSelection","TreeView","toggleSelection","TaskDisplay","TaskStatusDisplay","completed","ColoredTaskDisplay","themeColor","setThemeColor","minHeight","TaskRow","isFetchingSubtasks","setIsFetchingSubtasks","shouldDisplay","setShouldDisplay","notifyOnNetworkStatusChange","stopPolling","startPolling","getSubTasking","getSubTasks","command_name","toggleTaskDropdown","tasks","nodeId","onIconClick","tsk","TaskLabel","displayComment","setDisplayComment","alertBadges","setAlertBadges","accordionClasses","prevResponseCount","useLayoutEffect","scrollContent","isAppearing","block","Accordion","onEntered","defaultExpanded","AccordionSummary","commentOperator","badgeContent","AccordionDetails","operatorQuery","CallbacksTabsTaskingFilterDialog","onlyOperators","setOnlyOperators","operatorUsernames","setOperatorUsernames","onlyHasComments","setOnlyHasComments","onlyCommands","setOnlyCommands","everythingBut","setEverythingBut","onlyParameters","setOnlyParameters","filterCommandOptions","commandOptionNames","renderValue","Chip","CallbacksTabsTaskingInputTokenSelect","changeSelectedToken","tokenId","arrgv","require","GetLoadedCommandsSubscription","subscriptionCallbackTokens","subscriptionTask","CallbacksTabsTaskingInputPreMemo","snackMessageStyles","preventDuplicate","maxSnack","snackReverseSearchMessageStyles","loadedOptions","setLoadedOptions","taskOptions","setTaskOptions","taskOptionsIndex","setTaskOptionsIndex","filteredTaskOptions","setFilteredTaskOptions","tabOptions","setTabOptions","tabOptionsIndex","setTabOptionsIndex","openFilterOptionsDialog","setOpenFilterOptionsDialog","tokenOptions","setTokenOptions","unmodifiedHistoryValue","setUnmodifiedHistoryValue","reverseSearching","setReverseSearching","reverseSearchString","setReverseSearchString","reverseSearchOptions","setReverseSearchOptions","reverseSearchIndex","setReverseSearchIndex","callbacktoken","filteredOptions","applyFilteringToTasks","cmdData","parseCommandLine","command_line","stringArgs","booleanArgs","arrayArgs","numberArgs","cli_name","argv","parser","string","boolean","number","array","configuration","determineCommandGroupName","parsed","cmdGroupOptions","paramGroups","onSubmitCommandLine","force_parsed_popup","splitMessage","cmdGroupName","parsedWithPositionalParameters","parsedCopy","shift","groupParameters","unSatisfiedArguments","fillOutPositionalArguments","onKeyDown","newIndex","lowerCaseTextSearch","filteredMatches","ctrlKey","newMessage","pieces","lastFlag","startsWith","cmdGroupNames","paramOptions","toLocaleLowerCase","newMsg","endsWith","callback_os","shiftKey","onSubmitFilter","CallbacksTabsTaskingInput","CallbacksTabsTaskingLabel","payloadDescription","callbackDescription","callbackID","customDescription","taskingDataFragment","getTaskingQuery","getNextBatchTaskingQuery","CallbacksTabsTaskingPanel","taskLimit","setTaskLimit","taskingDataRef","selectedToken","setSelectedToken","setFilterOptions","canScroll","setCanScroll","fetched","setFetched","fetchedAllTasks","setFetchedAllTasks","subscriptionDataCallback","oldLength","mergedData","oldArray","equalTaskTrees","limit","getInfiniteScrollTasking","loadingMore","onCreateTask","newFilter","previousTaskingLocation","newTaskingLocation","fileParamExists","missingRequiredPrams","SUB_Callbacks","ExpandedCallback","callbackId","useParams","setCallbacks","setTabInfo","tabType","avatar","red","QuickStartCard","subheader","styl","underline","GetC2ProfilesAndPayloadTypes","AgentC2Overview","payloadTypeRows","setPayloadTypeRows","wrappers","setWrappers","c2Headers","payloadRows","payloadc2","wrapperRows","w","wr","Home","LoggedInRoute","rest","visuallyHidden","clip","getNodeData","nestingLevel","fetchFolderData","setTableData","isLeaf","filebrowserobjs","isOpenByDefault","name_text","CallbacksTabsFileBrowserTree","treeWalker","treeRoot","is_file","async","FileBrowserNode","isOpen","filebrowserobj","FileBrowserRow","fetchItems","clickIcon","parent_id","filebrowserobjs_aggregate","folderColor","DownloadHistoryDialog","history","setHistory","hist","chunks_received","total_chunks","getPermissionsDataQuery","getFileDownloadHistory","updateFileComment","FileBrowserTableRowStringCell","onTaskRowAction","CallbacksTabsFileBrowserTable","setAllData","actions","modify_time","columnWidths","setColumnWidths","columns","setColumns","getNext","onRowDoubleClick","showDeletedFiles","selectedFolder","filteredData","f","deleted","FileBrowserTableRowNameCell","textDecoration","filemeta","FileBrowserTableRowSizeCell","FileBrowserTableRowActionCell","fileCommentDialogOpen","setFileCommentDialogOpen","viewPermissionsDialogOpen","setViewPermissionsDialogOpen","fileHistoryDialogOpen","setFileHistoryDialogOpen","permissionData","setPermissionData","downloadHistory","setDownloadHistory","filebrowserobj_by_pk","getPermissions","getHistory","whichOption","optionsA","optionsB","filebrowserobj_id","full_path_text","path","parent_path_text","uifeature","fileDataFragment","rootFileQuery","folderQuery","fileDataSubscription","getDeltaFilesQuery","getCallbackDataQuery","CallbacksTabsFileBrowserLabel","CallbacksTabsFileBrowserPanel","fileBrowserRoots","fileBrowserRootsState","setFileBrowserRootsState","setSelectedFolder","selectedFolderDataRef","selectedFolderData","setSelectedFolderData","searchCallback","setSearchCallback","taskInfo","setTaskInfo","uiFeature","setUIFeature","currentCallbackIDSetInTable","lastFetchedTime","savedStateForConfirmDialog","setSavedStateForConfirmDialog","setShowDeletedFiles","subscribeToMore","roots","updatingData","obj","foundHost","rootEntry","mergeData","getFileDeltas","newRoots","workingSet","getFolderData","all_objects","_","finalCommands","getCommandOptions","fullPath","onSetTableData","confirmed","subscribeToMoreCallback","lastTime","onListFilesButton","onUploadFileButton","onChangeCallbackID","toggleShowDeletedFiles","showStatus","initialCallbackID","subscribeToNewFileBrowserObjs","updateQuery","FileBrowserTableTop","hostname","setHostname","setFullPath","setCallbackID","setLocalShowDeletedFiles","manuallySetCallbackID","setManuallySetCallbackID","onLocalListFilesButton","CallbacksTabsProcessBrowserTree","process_id","getDetailedData","getProcessTokenData","CallbacksTabsProcessBrowserTable","parent_process_id","bin_path","process_by_pk","tokens","getTokens","dataFragment","taskFragment","getNextProcessQuery","getPrevProcessQuery","getLatestTaskForHost","CallbacksTabsProcessBrowserLabel","CallbacksTabsProcessBrowserPanel","currentOS","setCurrentOS","makeTree","process","dataTree","processes","getNextProcessDataByHostAndTask","getPreviousProcessDataByHostAndTask","process_aggregate","onNextButton","onPreviousButton","onDiffButton","ProcessBrowserTableTop","taskID","setTaskID","CallbacksTabs","openTabs","clickedTabId","clearSelectedTab","callbackTokens","setCallbackTokens","onCloseTabLocal","AppBar","Tabs","newValue","indicatorColor","scrollButtons","tab","HeightsDialog","heights","setHeights","newHeights","descendingComparator","orderBy","getComparator","order","stableSort","comparator","stabilizedThis","EnhancedTableHead","onSelectAllClick","numSelected","onRequestSort","indeterminate","headCells","headCell","shownColumns","disablePadding","TableSortLabel","property","EnhancedTableRow","isItemSelected","MythicTransferListDialog","MythicDisplayTextDialog","hideCallbackMutation","toggleHideCallbackMutations","removeEdgeMutation","addEdgeMutation","unlockCallbackMutation","lockCallbackMutation","updateDescriptionCallbackMutation","updateSleepInfoCallbackMutation","DetailedCallbackTable","commandsWithScriptOnly","CallbacksTableRowPreMemo","openMetaDialog","setOpenMetaDialog","openSleepDialog","setOpenSleepDialog","openOSDialog","setOpenOSDialog","setShownColumns","onOpenTab","updateCallback","hideCallback","displayOSInfo","getOSIcon","faWindows","faLinux","faApple","faChrome","faQuestion","toggleLock","TimeUpdater","sleep","updateSleepInfo","CallbacksTableRow","TimeUpdaterPreMemo","lastCheckin","setLastCheckin","useToolbarStyles","highlight","lighten","EnhancedTableToolbar","Toolbar","onHideSelected","onTaskSelected","faTasks","openDialog","CallbacksTable","setOrder","setOrderBy","openAdjustColumnsDialog","setOpenAdjustColumnsDialog","allColumns","setAllColumns","selectedIndex","newSelected","isSelected","lockCallback","unlockCallback","updateSleep","tableHeadCells","useMemo","numeric","numberic","allColumnNames","cell","localSettings","updateDescriptionSubmit","updated_selected","callbacks","newSelecteds","cal","getP2PProfilesAndCallbacks","selectEmpty","ManuallyAddEdgeDialog","callbackOptions","setCallbackOptions","profileOptions","setProfileOptions","selectedDestination","setSelectedDestination","selectedProfile","setSelectedProfile","inputRefDestination","filteredProfileOptions","callbackc2profiles","source_profile","cbopts","cb","loadedLinkCommandsQuery","CallbacksGraph","linkCommands","setLinkCommands","openSelectLinkCommandDialog","setOpenSelectLinkCommandDialog","selectedLinkCommand","setSelectedLinkCommand","selectedCallback","setSelectedCallback","manuallyRemoveEdgeDialogOpen","setManuallyRemoveEdgeDialogOpen","manuallyAddEdgeDialogOpen","setManuallyAddEdgeDialogOpen","edgeOptions","setEdgeOptions","addEdgeSource","setAddEdgeSource","getLinkCommands","viewConfig","setViewConfig","manuallyRemoveEdge","manuallyAddEdge","elm","nodeEdges","getNodeEdges","fulledg","view","saveSvgAsPng","allEdges","getConfigString","source_id","destination_id","CallbacksTop","topDisplay","onOpenTabLocal","tabData","topHeight","Callbacks","setTopDisplay","setOpenTabs","setClickedTabId","oldTabs","tabs","lastClickedTab","oldHeights","onSubmitHeights","SpeedDialWrapper","tabSet","tabHeight","SpeedDialWrapperPreMemo","openHeightsDialog","setOpenHeightsDialog","onOpen","responseSearch","parameterSearch","commentSearch","SearchTabTasksLabel","SearchTabTasksSearchPanel","searchField","setSearchField","searchFieldOptions","filterTaskStatus","setFilterTaskStatus","submitSearch","querySearch","querySearchField","queryTaskStatus","adjustedSearch","adjustedTaskStatus","onOutputSearch","taskStatus","onParameterSearch","onCommentSearch","URLSearchParams","adjustedSearchField","get","onChangeSearchField","onChangeTaskStatus","FormLabel","SearchTabTasksPanel","setTotalCount","setTaskStatus","handleCallbackSearchSuccess","task_aggregate","handleCallbackSearchFailure","getOutputSearch","getParameterSearch","getCommentSearch","new_search","newTaskStatus","field","siblingCount","showFirstButton","showLastButton","MythicSnackDownload","downloadLink","downloadBulkQuery","updateFileDeleted","FileMetaDownloadTable","setFiles","onToggleSelection","initialSelected","file","download_bulk","downloadBulk","file_ids","onEditComment","fileIds","FileMetaDownloadTableRow","setOpenDelete","openDetails","setOpenDetails","editCommentDialogOpen","setEditCommentDialogOpen","update_filemeta_by_pk","full_remote_path_text","FileMetaUploadTable","FileMetaUploadTableRow","FileMetaScreenshotTable","FileMetaScreenshotTableRow","FileBrowserTable","FileBrowserTableRow","update_filebrowserobj_by_pk","fileMetaFragment","fileBrowserFragment","filenameFileMetaUploadSearch","filenameFileMetaDownloadSearch","filenameFileBrowserSearch","hashFileMetaUploadSearch","hashFileMetaDownloadSearch","commentFileMetaUploadSearch","commentFileMetaDownloadSearch","commentFileBrowserSearch","filenameFileMetaScreenshotSearch","hashFileMetaScreenshotSearch","commentFileMetaScreenshotSearch","SearchTabFilesLabel","SearchTabFilesSearchPanel","searchHost","setSearchHost","searchLocation","setSearchLocation","searchLocationOptions","parsedSearch","setParsedSearch","querySearchHost","querySearchLocation","adjustedSearchHost","adjustedSearchLocation","onFilenameSearch","onHashSearch","onChangeSearchLocation","xhr","XMLHttpRequest","fd","FormData","setRequestHeader","onreadystatechange","readyState","responseText","statusText","send","uploadFile","SearchTabFilesPanel","fileMetaData","setFileMetaData","fileBrowserData","setFileBrowserData","handleFileMetaSearchResults","filemeta_aggregate","handleFileBrowserSearchResults","filebrowserobj_aggregate","getfilenameFileMetaUploadSearch","getfilenameFileMetaDownloadSearch","getfilenameFileBrowserSearch","getfilenameFileMetaScreenshotSearch","gethashFileMetaUploadSearch","gethashFileMetaDownloadSearch","gethashFileMetaScreenshotSearch","getcommentFileMetaUploadSearch","getcommentFileMetaDownloadSearch","getcommentFileBrowserSearch","getcommentFileMetaScreenshotSearch","hash","updateCredentialComment","updateCredentialAccount","updateCredentialRealm","updateCredentialCredential","updateCredentialDeleted","CredentialTable","setCredentials","cred","onEditAccount","onEditRealm","onEditCredential","onEditDeleted","CredentialTableRow","editAccountDialogOpen","setEditAccountDialogOpen","editRealmDialogOpen","setEditRealmDialogOpen","editCredentialDialogOpen","setEditCredentialDialogOpen","update_credential_by_pk","updateAccount","updateRealm","updateCredential","credential_id","accountSearch","realmSearch","credentialSearch","SearchTabCredentialsLabel","SearchTabCredentialsSearchPanel","onAccountSearch","onRealmSearch","onCredentialSearch","OnTypeSearch","SearchTabCredentialsPanel","credentialaData","setCredentialData","handleCredentialSearchResults","credential_aggregate","getAccountSearch","getRealmSearch","getCredentialSearch","KeylogsTable","keylogs","setKeylogs","newArrayData","newSecondLevel","key2","value2","newThirdLevel","key3","value3","k0","borderBottom","k1","k1i","k2","k2i","k3","k3i","keystrokes_text","keylogFragment","keylogSearch","userUniqueSearch","userSearch","programSearch","programUniqueSearch","hostSearch","SearchTabKeylogsLabel","SearchTabKeylogsSearchPanel","onKeylogSearch","onUserSearch","onProgramSearch","onHostSearch","SearchTabKeylogsPanel","keylogData","setKeylogData","handleKeylogSearchResults","keylog_aggregate","keylog","getKeylogSearch","getUserSearch","getUserUniqueSearch","getProgramSearch","getProgramUniqueSearch","getHostSearch","program","TokenDescriptionDialog","updateCallbacksOfDeletedToken","TokenTable","setTokens","TokenTableRow","viewTokenDialog","setViewTokenDialog","editDescriptionDialog","setEditDescriptionDialog","updateCallbackTokensDeleted","update_token_by_pk","Groups","LogonId","LogonType","cbt","tokenFragment","userGroupSearch","SIDSearch","logonTypeSearch","SearchTabTokensLabel","SearchTabTokensSearchPanel","onUserGroupSearch","onSIDSearch","onLogonTypeSearch","SearchTabTokensPanel","handleTokenSearchResults","token_aggregate","getUserGroupSearch","getSIDSearch","getLogonTypeSearch","logontype","sid","CallbackSearchTable","CallbackSearchTableRow","init_callback","callbackFragment","domainSearch","descriptionSearch","ipSearch","SearchTabCallbacksLabel","SearchTabCallbacksSearchPanel","onDomainSearch","onDescriptionSearch","onIPSearch","SearchTabCallbacksPanel","setCallbackData","handleCallbackSearchResults","callback_aggregate","getDomainSearch","getDescriptionSearch","getIPSearch","ArtifactTable","artifacts","setArtifacts","ArtifactTableRow","artifact","artifact_instance_text","artifactFragment","artifactSearch","commandSearch","typeSearch","taskSearch","callbackSearch","SearchTabArtifactsLabel","SearchTabArtifactsSearchPanel","onArtifactSearch","onCommandSearch","onTypeSearch","onTaskSearch","onCallbackSearch","SearchTabArtifactsPanel","artifactData","setArtifactData","taskartifact_aggregate","taskartifact","getArtifactSearch","getCommandSearch","getTypeSearch","getTaskSearch","getCallbackSearch","stopSocks","SocksSearchTable","port","SearchTabSocksLabel","faSocks","SearchTabSocksPanel","onSocksSearch","Search","tabTypes","valueString","valueIndex","set","newRelativePathQuery","SUB_Event_Logs","TopAppBarNotifications","operationeventlog_aggregate","EventFeedNotifications","errorData","_image","_extends","assign","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMythicRedSmall","_ref","svgRef","titleId","xmlns","xmlnsXlink","viewBox","enableBackground","xmlSpace","ForwardRef","drawerWidth","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","appBar","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","nested","mythicElement","TopAppBar","settingsRef","documentationRef","documentationAnchorEl","setDocumentationAnchorEl","openGlobal","setOpenGlobal","openCreate","setOpenCreate","openOperations","setOpenOperations","openData","setOpenData","handleDrawerClose","handleDocumentationClose","menuButton","faBiohazard","faFlagCheckered","current_operation","nodeRef","MenuListProps","Drawer","anchor","onEscapeKeyDown","mythicVersion","ListSubheader","toggleTheme","mythicUIVersion","TaskArtifactsTable","taskartifacts","TaskMITREATTACKTable","attacks","setAttacks","newAdds","attacktasks","old","attck","attack","t_num","TaskFilesTable","is_screenshot","is_payload","is_download_from_agent","TaskCredentialsTable","MetadataQuery","TaskMetadataTable","setTasks","getMetadata","task_range","taskIDs","IncludeMoreTasksDialog","taskSelected","setTaskSelected","beforeCount","setBeforeCount","afterCount","setAfterCount","searchTerm","setSearchTerm","setOperator","submitFetchTasks","taskInfoFragment","tasksQuery","getTasksAcrossAllCallbacksQuery","getTasksAcrossACallbackQuery","getTasksAcrossAllCallbacksByOperatorQuery","SingleTaskView","taskId","setTaskIDs","removing","setRemoving","openIncludeMoreTasksDialog","setOpenIncludeMoreTasksDialog","taskData","allNewParents","parent_task_id","recent_callback","allParents","allTaskIds","subIds","completedData","before","after","getTasksAcrossAllCallbacks","getTasksAcrossACallback","getTasksAcrossAllCallbacksByOperator","getTasks","toggleTaskToRemove","range","numbers","ranges","expand_range","all_nums","rstart","rend","collapse_range","remainingTasks","remainingTaskIDs","setTaskSearchInfo","baseTask","GlobalStyles","createGlobalStyle","tableHover","generateReportMutation","generatedReportSubscription","ReportingTable","selectedOutputFormat","setSelectedOutputFormat","includeMITREPerTask","setIncludeMITREPerTask","includeMITREOverview","setIncludeMITREOverview","includeOutput","setIncludeOutput","setIncludeGraphs","excludedCallbackHost","setExcludedCallbackHost","excludedCallbackUser","setExcludedCallbackUser","excludedCallbackID","setExcludedCallbackID","generateReport","dataUUID","pop","outputFormat","includeMITREOverall","excludedUsers","excludedHosts","excludedIDs","Reporting","App","setTheme","mountedComponent","setMountedComponent","setMode","localTheme","useDarkMode","themeMode","themeToggler","default","tableHeader","tableBorder","ThemeProvider","CssBaseline","exact","InMemoryCache","typePolicies","Query","fields","retryLink","RetryLink","jitter","attempts","retryIf","_operation","httpLink","HttpLink","uri","reconnect","connectionParams","Authorization","decoded_token","jwt_decode","exp","authLink","setContext","diff","GetNewToken","errorLink","graphQLErrors","networkError","extensions","websocketClient","SubscriptionClient","protocol","reconnectionAttempts","wsLink","WebSocketLink","splitLink","query","definition","getMainDefinition","kind","apolloClient","ApolloClient","link","close","connect","sendMessage","MessageTypes","GQL_START","ReactDOM","StrictMode","ApolloProvider","client"],"mappings":"mFAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,K,0aCJnBC,EAAsBC,YAAW,CACjCC,KAAM,CACJ,2BAA4B,CAC1BC,YAAa,OACbC,YAAa,GAEf,6BAA8B,CAC5BD,YAAa,MACbC,YAAa,GAEf,iCAAkC,CAChCC,gBAAiB,EACjBC,QAAS,oBAZSL,CAerBM,KA6DQC,E,4MA9CXC,SAAW,SAAAC,GACP,IAAMC,EAAO,EAAKC,MAAMD,KAClBE,EAAQH,EAAII,OAAOD,MACnBE,IAAQ,EAAKH,MAAMI,UAAW,EAAKJ,MAAMI,SAASH,GACxD,EAAKD,MAAMH,SAASE,EAAME,EAAOE,I,EAErCE,WAAa,WACT,QAAO,EAAKL,MAAMI,UAAW,EAAKJ,MAAMI,SAAS,EAAKJ,MAAMC,Q,EAEhEK,WAAa,SAACC,GACK,UAAdA,EAAMC,SACmBC,IAAvB,EAAKT,MAAMU,SACZ,EAAKV,MAAMU,UAGb,EAAKb,SAASU,I,4CAGlB,WACI,OACI,qBAAKI,MAAO,CAACC,MAAQC,KAAKb,MAAMY,MAAQC,KAAKb,MAAMY,MAAQ,MAAQ,QAAnE,SACI,cAACxB,EAAD,CACI0B,WAAW,EACXC,YAAaF,KAAKb,MAAMe,YACxBd,MAAOY,KAAKb,MAAMC,MAClBJ,SAAUgB,KAAKhB,SACfS,WAAYO,KAAKP,WACjBU,MAAOH,KAAKb,MAAMD,KAClBkB,YAAWJ,KAAKb,MAAMiB,UACtBC,QAAQ,WACRC,cAAkCV,IAAxBI,KAAKb,MAAMmB,UAAiCN,KAAKb,MAAMmB,SACjEC,WAAUP,KAAKb,MAAMqB,eAAgBR,KAAKb,MAAMqB,cAChDC,gBAAiBT,KAAKb,MAAMuB,gBAC5BC,YAAWX,KAAKb,MAAMwB,WAAYX,KAAKb,MAAMwB,UAC7CrB,MAAOU,KAAKR,aACZoB,UAA0BhB,IAApBI,KAAKb,MAAMyB,KAAqB,OAASZ,KAAKb,MAAMyB,KAC1DC,WAAYb,KAAKb,MAAM0B,WACvBC,WAAYd,KAAKR,aAAeQ,KAAKb,MAAM4B,UAAYf,KAAKb,MAAM2B,WAClEhB,MAAO,CACHjB,QAAQ,EACRmC,aAAchB,KAAKb,MAAM6B,aAAehB,KAAKb,MAAM6B,aAAe,gB,GArD5DC,IAAMC,WCrBrB,MAA0B,mC,wBCE5BC,EAAUC,YAAQ,CAACC,UAAS,EAAOC,KAAM,KAAMC,aAAc,KAAMC,cAAe,OAClFC,EAAWL,aAAQ,GAYnBM,EAAoB,SAACC,GAC9BC,aAAaC,QAAQ,eAAgBF,EAAKJ,cAC1CJ,EAAQ,aACJE,UAAU,EACVE,aAAcK,aAAaE,QAAQ,iBAChCX,OAGEY,EAAgB,WACzBC,QAAQC,IAAI,kBACZL,aAAaM,WAAW,gBACxBN,aAAaM,WAAW,iBACxBN,aAAaM,WAAW,QACxBf,EAAQ,CACJE,UAAU,EACVE,aAAc,KACdC,cAAe,KACfF,KAAM,Q,iBC9BVa,EAAiB,KAERC,EAA4B,WAGvC,OAFAD,EAAiBE,cAEV,MAGIC,EAAe,CAC1BC,QAD0B,SAClBC,EAAKC,GACXzC,KAAK0C,MAAMF,EAAK,UAAWC,IAE7BE,QAJ0B,SAIlBH,EAAKC,GACXzC,KAAK0C,MAAMF,EAAK,UAAWC,IAE7BG,KAP0B,SAOrBJ,EAAKC,GACRzC,KAAK0C,MAAMF,EAAK,OAAQC,IAE1BnD,MAV0B,SAUpBkD,EAAKC,GACTzC,KAAK0C,MAAMF,EAAK,QAASC,IAE3BI,QAb0B,WAcxBV,EAAeW,iBAEjBJ,MAhB0B,SAgBpBF,GAAoC,IAA/BnC,EAA8B,uDAApB,UAAWoC,EAAS,uCACvCN,EAAeY,gBAAgBP,EAA/B,aAAsCnC,WAAYoC,MCjB/C,SAASO,EAAU7D,GACtB,IAAM8D,EAAKC,YAAe/B,GAC1B,EAAgCF,IAAMkC,SAAS,IAA/C,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCpC,IAAMkC,SAAS,IAA/C,mBAAOG,EAAP,KAAiBC,EAAjB,KACAC,qBAAW,WACHC,OACAzB,QAAQC,IAAI,8DACZF,OAIL,IACH,IAAM2B,EAAS,SAAA3F,GAEX,GADAA,EAAE4F,iBACe,KAAbP,GAAgC,KAAbE,EAAvB,CAIA,IAAMM,EAAiB,CACnBC,OAAQ,OACRC,QAAS,CAAC,eAAgB,oBAC1BC,KAAMC,KAAKC,UAAU,CAACb,WAAUE,cAEpCY,MAAM,QAASN,GAAgBO,MAAK,SAACC,GACjCA,EAASC,OAAOF,MAAK,SAAAxC,GACjBK,QAAQC,IAAIN,GACT,iBAAkBA,IF9BN,SAACA,GAC5BC,aAAaC,QAAQ,eAAgBF,EAAKJ,cAC1CK,aAAaC,QAAQ,gBAAiBF,EAAKH,eAC3CI,aAAaC,QAAQ,OAAQmC,KAAKC,UAAUtC,EAAKL,OACjDH,EAAQ,aACJE,UAAU,GACPM,IEyBS2C,CAAgB3C,GAChB4C,OAEAjC,EAAaK,QAAQ,gCACrBX,QAAQC,IAAI,QAASN,OAE1B6C,OAAM,SAAAlF,GACLgD,EAAaK,QAAQ,kCACrBX,QAAQC,IAAI,oCAAqC3C,EAAMmF,kBAE5DD,OAAM,SAAAlF,GACLgD,EAAaK,QAAQ,2BACrBX,QAAQC,IAAI,sBAAuB3C,EAAMmF,oBAxBzCnC,EAAaK,QAAQ,mCAqC7B,OACI,qBAAK7C,MAAO,CAAC4E,eAAgB,SAAUC,QAAS,QAAhD,SAEI1B,EAAG5B,SAEK,cAAC,IAAD,CAAUuD,GATL,WACjB,IAAMC,EAAgB1F,EAAM2F,SAASC,MACrC,OAAOF,GAAiBA,EAAcG,KAAOH,EAAcG,KAAKC,SAAW,QAOjDC,KAGd,gCACA,qBAAKC,IAAKC,EAAMC,OAAO,QAAQC,IAAI,gBAC/B,uBAAMC,SAAU7B,EAAhB,UACI,cAAC,EAAD,CAAiBxE,KAAK,WAAWE,MAAOgE,EAAUpE,SArBjD,SAACE,EAAME,EAAOE,GACnC+D,EAAYjE,IAoBsFW,MAAO,KACrF,cAAC,EAAD,CAAiBb,KAAK,WAAW0B,KAAK,WAAWxB,MAAOkE,EAAUtE,SAnBjE,SAACE,EAAME,EAAOE,GACnCiE,EAAYnE,IAkBsGW,MAAO,KACrG,cAACyF,EAAA,EAAD,CAAQ5E,KAAK,SAAS6E,MAAM,UAAUC,QAAShC,EAAQrD,QAAQ,YAAYP,MAAO,CAAC6F,YAAa,QAAhG,2B,yMCrErB,SAASC,GAAYzG,GAExB,OACQ,eAAC0G,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAOvG,EAAM6G,iBAAiB7G,EAAMb,KAAM2H,UAAW,cAAC,KAAD,IAAeR,MAAM,YAAYpF,QAAQ,YAA5H,sBACX,cAACyF,EAAA,EAAD,UAAY3G,EAAM+G,gBAFP,cAAgB/G,EAAMb,I,4CCA1C,SAAS6H,GAAuBhH,GACnC,MAAgC8B,IAAMkC,SAAShE,EAAMiE,SAAWjE,EAAMiE,SAAW,IAAjF,mBAAOA,EAAP,KAAiBC,EAAjB,KACA,EAAsCpC,IAAMkC,SAAS,IAArD,mBAAOiD,EAAP,KAAoBC,EAApB,KACA,EAAsCpF,IAAMkC,SAAS,IAArD,mBAAOmD,EAAP,KAAoBC,EAApB,KAeF,OACE,eAAC,IAAMC,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,SAAqCa,EAAMuH,QAC3C,eAACC,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACC,GAAA,EAAD,4EAGA,cAAC,EAAD,CACEzG,WAAS,EACTF,YAAaf,EAAMiE,SACnBhE,MAAOgE,EACPpE,SAxBiB,SAACE,EAAME,EAAOE,GACnC+D,EAAYjE,IAwBR0H,OAAO,QACPxI,GAAG,WACHY,KAAK,aAEP,cAAC,EAAD,CACE4H,OAAO,QACPxI,GAAG,cACHU,SA7BoB,SAACE,EAAME,EAAOE,GACtC+G,EAAejH,IA6BXF,KAAK,eACL0B,KAAK,aAEP,cAAC,EAAD,CACEkG,OAAO,QACPxI,GAAG,cACHU,SAjCoB,SAACE,EAAME,EAAOE,GACtCiH,EAAenH,IAiCXF,KAAK,eACL0B,KAAK,gBAGT,eAACmG,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAM6H,YAAa3G,QAAQ,YAAYoF,MAAM,UAA9D,oBAGA,cAACD,EAAA,EAAD,CAAQE,QAvCG,WACbvG,EAAM8H,SAAS9H,EAAMb,GAAI8E,EAAUgD,EAAaE,IAsCnBjG,QAAQ,YAAYoF,MAAM,UAArD,0BCtDH,SAASyB,GAA6B/H,GAK3C,OACE,eAAC,IAAMqH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,6BACA,eAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACC,GAAA,EAAD,4JAGA,eAACA,GAAA,EAAD,wDAC6C1H,EAAMiE,SADnD,WAIF,eAAC2D,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,oBAGA,cAACD,EAAA,EAAD,CAAQE,QAnBG,WACbvG,EAAM8H,SAAS9H,EAAMb,KAkBQ+B,QAAQ,YAAYoF,MAAM,YAArD,0B,cCZH,SAAS2B,GAAajI,GAC3B,IAAMkI,EAAwBpG,IAAMqG,OAAO,MAU3C,OATArG,IAAMuC,WAAU,WACd,GAAIrE,EAAMoI,KAAM,CACd,IAAiBC,EAAuBH,EAAhCI,QACmB,OAAvBD,GACFA,EAAmBE,WAGtB,CAACvI,EAAMoI,OAGN,cAACI,GAAA,EAAD,CACEJ,KAAMpI,EAAMoI,KACZJ,QAAShI,EAAMgI,QACfS,OAAO,QACPC,SAAU1I,EAAM0I,SAChB5H,UAAWd,EAAMc,UACjB,kBAAgB,sBAChB,mBAAiB,4BAPnB,SASGd,EAAM2I,cAKR,SAASC,GAAyB5I,GACvC,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAO6E,EAAP,KAAgBC,EAAhB,KACQC,EAAiB,WACnB/I,EAAMoG,SAASyC,GACf7I,EAAMgI,WAQZ,OAHE3D,qBAAW,WACTyE,EAAW9I,EAAMC,SAChB,CAACD,EAAMC,QAEV,eAAC,IAAMoH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,SAAqCa,EAAMuH,QAC3C,cAACC,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACE,cAAC,EAAD,CAAiBxG,WAAS,EAACP,QAASqI,EAAgBlJ,SAVzC,SAACE,EAAME,EAAOE,GAC3B2I,EAAW7I,IAS+DA,MAAO4I,MAEjF,eAACjB,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQE,QAASwC,EAAgB7H,QAAQ,YAAYoF,MAAM,YAA3D,0BAQH,SAAS0C,GAA4BhJ,GAC1C,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAO6E,EAAP,KAAgBC,EAAhB,KACA,EAAkChH,IAAMkC,SAAS,cAAjD,mBAAOiF,EAAP,KAAkBC,EAAlB,KACA,EAA8BpH,IAAMkC,SAAS,IAA7C,mBAAOW,EAAP,KAAgBwE,EAAhB,KAmCA,OAlCE9E,qBAAW,WACT,IAAI+E,EAAc,GAClB,IACE,IAAIC,EAOJ,IALEA,EADCrJ,EAAMC,MAAMqJ,cAAgBC,OACZvJ,EAAMC,MAEN4E,KAAK2E,MAAMxJ,EAAMC,QAGlBqJ,cAAgBC,OAChC,IAAI,IAAI/I,KAAO6I,EACVA,EAAe7I,GAAK8I,cAAgBC,QAAUE,MAAMC,QAAQL,EAAe7I,IAC5E4I,EAAYO,KAAK,CAAC,KAAQnJ,EAAK,MAASqE,KAAKC,UAAUuE,EAAe7I,GAAM,KAAM,KAElF4I,EAAYO,KAAK,CAAC,KAAQnJ,EAAK,MAAS6I,EAAe7I,KAGzD2I,EAAW,CAACnJ,EAAM4J,WAAY5J,EAAM6J,mBAGtCX,EAAa,SACVG,EAAeS,OAAS,GACzBX,EAAWI,OAAOxK,KAAKsK,EAAe,KACtCD,EAAcC,GAEdF,EAAW,IAGhB,MAAMhJ,GACL0C,QAAQC,IAAI3C,GAEd2I,EAAWM,KACV,CAACpJ,EAAMC,MAAOD,EAAM4J,WAAY5J,EAAM6J,cAEzC,eAAC,IAAMxC,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,SAAqCa,EAAMuH,QAC3C,cAACC,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACA,cAACsC,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAACsJ,SAAU,YAAa/I,QAAS,YAA7D,SACE,cAACgJ,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SACE,eAACC,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA3F,UACM,cAAC2J,EAAA,EAAD,UACI,cAAC5D,EAAA,EAAD,UACK/B,EAAQ4F,KAAK,SAACC,EAAQC,GAAT,OACZ,cAAC9D,EAAA,EAAD,UAAmC6D,GAAnB,SAAWC,UAIrC,cAACC,EAAA,EAAD,UACiB,eAAdzB,EACCJ,EAAQ0B,KAAK,SAACI,EAASF,GAAV,OACX,eAAC/D,EAAA,EAAD,CAA8BkE,OAAK,EAAnC,UACE,cAACjE,EAAA,EAAD,UAAYgE,EAAQ5K,OACpB,cAAC4G,EAAA,EAAD,CAAWhG,MAAO,CAACkK,UAAW,YAAaC,WAAY,YAAvD,UAAuF,IAAlBH,EAAQ1K,MAAkB,QAA6B,IAAlB0K,EAAQ1K,MAAmB,QAAY0K,EAAQ1K,UAF5I,MAAQwK,MAMzB5B,EAAQ0B,KAAK,SAACQ,EAAKN,GAAN,OACX,cAAC/D,EAAA,EAAD,CAA8BkE,OAAK,EAAnC,SACKrB,OAAOxK,KAAKgM,GAAKR,KAAK,SAAC/J,GAAD,OACrB,cAACmG,EAAA,EAAD,UAA+CoE,EAAIvK,IAAnC,MAAQiK,EAAQ,OAASjK,OAFhC,MAAQiK,iBAavC,cAAC7C,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,wBAQH,SAAS0E,GAAwChL,GACtD,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAO6E,EAAP,KAAgBC,EAAhB,KAaA,OAZEzE,qBAAW,WACP,IAAM+E,EAAcpJ,EAAMjB,KAAKkM,QAAQ,SAACC,EAAM1K,GAC5C,YAAwBC,IAArBT,EAAMC,MAAMO,IAA2C,OAArBR,EAAMC,MAAMO,IAAsC,KAArBR,EAAMC,MAAMO,GACtE,GAAN,mBAAW0K,GAAX,CAAiB,CAAC,KAAQ1K,EAAK,MAASR,EAAMC,MAAMO,MAG7C,YAAI0K,KAEZ,IAELpC,EAAWM,KACV,CAACpJ,EAAMC,MAAOD,EAAMjB,OAEvB,eAAC,IAAMsI,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,SAAqCa,EAAMuH,QAC3C,cAACC,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACA,cAACsC,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAACsJ,SAAU,YAAa/I,QAAS,YAA7D,SACE,cAACgJ,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SACE,eAACC,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA3F,UACM,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAY3G,EAAM4J,aAClB,cAACjD,EAAA,EAAD,UAAY3G,EAAM6J,mBAG1B,cAACa,EAAA,EAAD,UACG7B,EAAQ0B,KAAK,SAACI,EAASF,GAAV,OACZ,eAAC/D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,UAAYgE,EAAQ5K,OACpB,cAAC4G,EAAA,EAAD,WAA8B,IAAlBgE,EAAQ1K,MAAkB,QAA6B,IAAlB0K,EAAQ1K,MAAmB,QAAY0K,EAAQ1K,UAFnF,MAAQwK,iBAUrC,cAAC7C,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,wBClMH,SAAS6E,GAAYC,EAAMC,GAC9B,IACI,GAAY,OAATD,EACC,MAAO,MAEX,IAAIE,EAAY,IAAIC,KAAKH,GACzB,OAAIC,EACOD,EAAO,OAEXE,EAAUE,eAAiB,IAAMF,EAAUG,eAAeC,UAAU,EAAG,GAChF,MAAOvL,GACL0C,QAAQC,IAAI,UAAW,uCAAyC3C,EAAMmF,aAKvE,SAASqG,GAAkBC,GAC9B,IAAIR,EAAO,IAAIG,KACXM,EAAMT,EAAKU,UAAuC,IAA3BV,EAAKW,oBAC5BC,EAAWC,KAAKC,IAAIL,EAAO,IAAIN,KAAKK,GAAcE,WAClDK,EAAUF,KAAKG,MAAQJ,EAAW,IAAS,IAC3CK,EAAUJ,KAAKG,MAAQJ,EAAQ,IAAmB,IAClDM,EAAQL,KAAKG,MAAQJ,EAAQ,KAAwB,IACrDO,EAAON,KAAKG,MAAQJ,EAAQ,MAA6B,KACzDQ,EAAS,GAKb,OAJY,IAATD,IAAaC,GAAUD,EAAO,KACpB,IAAVD,IAAcE,GAAUF,EAAQ,KACpB,IAAZD,IAAgBG,GAAUH,EAAU,KACvCG,GAAUL,EAAU,IAIjB,SAASM,GAAYC,EAAUC,GACpC,IAAMC,EAAgBzE,mBAEtB9D,qBAAU,WACRuI,EAActE,QAAUoE,KAG1BrI,qBAAU,WAKR,IAAIlF,EAAK0N,aAJT,WACED,EAActE,YAGWqE,GAC3B,OAAO,kBAAMG,cAAc3N,MAC1B,CAACwN,ICxBC,SAASI,GAAiB/M,GAC7B,MAAwB8B,IAAMkC,UAAS,GAAvC,mBAAOoE,EAAP,KAAa4E,EAAb,KACA,EAA0ClL,IAAMkC,UAAS,GAAzD,mBAAOiJ,EAAP,KAAmBC,EAAnB,KACA,EAA0CpL,IAAMkC,UAAS,GAAzD,mBAAOmJ,EAAP,KAAmBC,EAAnB,KACMtJ,EAAKC,YAAe/B,GA0B1B,OACI,eAAC,IAAMqF,SAAP,WACI,eAACX,EAAA,EAAD,WACI,eAACC,EAAA,EAAD,WAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAK6G,GAAoB,IAAStG,UAAW,cAAC,KAAD,IAAeR,MAAM,YAAYpF,QAAQ,YAApH,oBACP,cAAC+G,GAAD,CAAcG,KAAM+E,EAChBnF,QAAS,WAAKoF,GAAoB,IAClCzE,YAAa,cAACZ,GAAD,aAA8BC,QAAS,WAAKoF,GAAoB,IAAWtF,SAVrF,SAAC3I,GACpBa,EAAMqN,iBAAiBlO,GACvBiO,GAAoB,KAQkHpN,SAG9H,cAAC2G,EAAA,EAAD,UAAY3G,EAAMiE,WAClB,eAAC0C,EAAA,EAAD,WAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAK2G,GAAoB,IAAS5G,MAAM,UAAUpF,QAAQ,YAAxF,oBACP,cAAC+G,GAAD,CAAcG,KAAM6E,EAChBjF,QAAS,WAAKkF,GAAoB,IAClCvE,YAAa,cAAC3B,GAAD,aAAwBc,SA1BxC,SAAC3I,EAAI8E,EAAUgD,EAAaE,GACtClD,IAAajE,EAAMiE,UACpBjE,EAAMsN,kBAAkBnO,EAAI8E,GAE3BkD,EAAY2C,OAAS,GACtB9J,EAAMuN,kBAAkB,CAACC,QAASrO,EAAIsO,aAAcxG,EAAayG,aAAcvG,IAEjF+F,GAAoB,IAmBqDrF,YAAa,WAAKqF,GAAoB,IAAU3F,MAAM,mBAAuBvH,SAG9I,cAAC2G,EAAA,EAAD,UACI,cAACgH,EAAA,EAAD,CACIC,QAAS5N,EAAMqL,cACfxL,SA5CK,SAACC,GACtB,IAAOX,EAAMa,EAANb,GACPa,EAAM6N,iBAAiB1O,GAAKa,EAAMF,EAAII,OAAOH,QA2C7BuG,MAAM,UACNwH,WAAY,CAAE,aAAc,oBAC5B/N,KAAK,oBAGb,cAAC4G,EAAA,EAAD,UACI,cAACgH,EAAA,EAAD,CACIC,QAAS5N,EAAM+N,OACflO,SA7CI,SAACC,GACrB,IAAOX,EAAMa,EAANb,GACPa,EAAMgO,gBAAgB7O,GAAKa,EAAMF,EAAII,OAAOH,QA4C5B+N,WAAY,CAAE,aAAc,oBAC5B/N,KAAK,aAGb,cAAC4G,EAAA,EAAD,UAAYwE,GAAYnL,EAAMiO,WAAYnK,EAAG3B,KAAKkJ,iBAClD,cAAC1E,EAAA,EAAD,UAAYwE,GAAYnL,EAAMkO,cAAepK,EAAG3B,KAAKkJ,iBACrD,cAAC1E,EAAA,EAAD,UACI,cAACgH,EAAA,EAAD,CACIC,QAAS5N,EAAMmO,MACftO,SA3DG,SAACC,GACpB,IAAOX,EAAMa,EAANb,GACPa,EAAMoO,eAAejP,GAAKa,EAAMF,EAAII,OAAOH,QA0D3B+N,WAAY,CAAE,aAAc,oBAC5B/N,KAAK,YAGb,cAAC4G,EAAA,EAAD,UACG3G,EAAMb,KAAO2E,EAAG3B,KAAKhD,IACpB,cAACkP,EAAA,EAAD,CAAY,aAAW,aAAazH,KAAK,QAAQL,QAAS,kBAAMyG,GAAS5E,IAAzE,SACGA,EAAO,cAAC,IAAD,CAAqBgC,UAAU,kBAAoB,cAAC,IAAD,CAAuBA,UAAU,wBA5CvFpK,EAAMb,IAkDrB,cAACuH,EAAA,EAAD,UACG1G,EAAMb,KAAO2E,EAAG3B,KAAKhD,IACpB,cAACwH,EAAA,EAAD,CAAWhG,MAAO,CAAE2N,cAAe,EAAGC,WAAY,GAAKC,QAAS,EAAhE,SACE,cAACC,EAAA,EAAD,CAAUC,GAAItG,EAAMuG,QAAQ,OAAOC,eAAa,EAAhD,SACE,eAACC,EAAA,EAAD,CAAKlH,OAAQ,EAAb,UACE,cAACmH,EAAA,EAAD,CAAY5N,QAAQ,KAAK6N,cAAY,EAAC5E,UAAU,MAAMxJ,MAAO,CAAC6E,QAAS,gBAAvE,wBAGA,cAACa,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAASvG,EAAMgP,iBAAkBrO,MAAO,CAACsO,MAAO,SAAUnI,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAAnJ,iBACA,eAACmJ,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,SAASjG,MAAO,CAAC,YAAe,QAAS,aAAgB,cAAxF,UACE,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,oBACA,cAAC+F,EAAA,EAAD,yBAGJ,cAAC+D,EAAA,EAAD,UAEI1K,EAAMkP,UAAU3E,KAAI,SAAC4E,GAAD,OAAY,wBAAC1I,GAAD,2BAAiB0I,GAAjB,IAAwB3O,IAAK,QAAU2O,EAAMhQ,GAAI0H,iBAAkB7G,EAAM6G,wC,aC1G9H,SAASuI,GAAsBpP,GAClC,IAAMqP,EAAQC,eACd,EAAoCxN,IAAMkC,UAAS,GAAnD,mBAAOuL,EAAP,KAAgBC,EAAhB,KAaA,OACI,eAAC,IAAMnI,SAAP,WACA,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,SACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,wBAIJ,eAAC7F,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,UACA,cAAC/D,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAKiJ,GAAiB,IAAS7O,MAAO,CAACsO,MAAO,SAAUnI,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAA1J,0BACA,cAAC+G,GAAD,CAAcG,KAAMmH,EAChBvH,QAAS,WAAKwH,GAAiB,IAC/B7G,YAAa,cAAC3B,GAAD,aAAwBO,MAAM,eAAeO,SAvBtC,SAAC3I,EAAI8E,EAAUgD,EAAaE,GACjDF,IAAgBE,EACfhE,EAAahD,MAAM,yBACS,IAAvBgH,EAAY2C,OACjB3G,EAAahD,MAAM,8BACM,IAApB8D,EAAS6F,OACd3G,EAAahD,MAAM,+BAEnBH,EAAMgQ,cAAc/L,EAAUkD,GAC9BqI,GAAiB,KAcwE3H,YAAa,WAAK2H,GAAiB,KAAexP,MAE/I,eAACqK,EAAA,EAAD,CAAQzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA5F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,4BACA,cAAC+F,EAAA,EAAD,uBACA,cAACA,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,oBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,4BACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,4BACA,cAAC+F,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,oCACA,cAACA,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,0BACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,0BAGR,cAAC8J,EAAA,EAAD,UAEC1K,EAAMiQ,UAAU1F,KAAK,SAAC2F,GAAD,OAClB,cAACnD,GAAD,aACIc,iBAAkB7N,EAAM6N,iBACxBO,eAAgBpO,EAAMoO,eACtBJ,gBAAiBhO,EAAMgO,gBACvBX,iBAAkBrN,EAAMqN,iBACxBC,kBAAmBtN,EAAMsN,kBACzBC,kBAAmBvN,EAAMuN,kBACzB1G,iBAAkB7G,EAAM6G,iBACxBmI,iBAAkBhP,EAAMgP,kBAEpBkB,GADC,WAAaA,EAAG/Q,kB,gECjEnCgR,GAAeC,aAAH,0UAoBZC,GAA6BD,aAAH,4OAQ1BE,GAAuBF,aAAH,kNAQpBG,GAAwBH,aAAH,uNAQrBI,GAAkBJ,aAAH,8LAQfK,GAA0BL,aAAH,2NAQvBM,GAAsBN,aAAH,ySAenBO,GAA0BP,aAAH,uQAQvBQ,GAAyBR,aAAH,gLAWtBS,GAAyBT,aAAH,wIAQrB,SAASU,GAAS9Q,GACrB,IAAM8D,EAAKC,YAAe/B,GAC1B,EAAkCF,IAAMkC,SAAS,IAAjD,mBAAOiM,EAAP,KAAkBc,EAAlB,KACAC,aAASb,GAAc,CAACc,YAAa,WACnCC,YAAa,SAAC1O,GACZuO,EAAavO,EAAK2O,aAGtB,MAAoBC,aAAYf,GAA4B,CACxDa,YAAa,SAACG,GACZ,GAAoC,OAAjCA,EAAOC,sBAAV,CAIA,IAAMC,EAAmBtB,EAAU1F,KAAI,SAAAiH,GACrC,OAAGA,EAAErS,KAAOkS,EAAOC,sBAAsBnS,GAChC,2BAAIqS,GAAX,IAAcnG,cAAegG,EAAOC,sBAAsBjG,gBAEnD,eAAImG,MAGf,GAAGH,EAAOC,sBAAsBnS,KAAO2E,EAAG3B,KAAKhD,GAAG,CAC9C,IAAMyG,EAAQ5D,IACd4D,EAAMzD,KAAKkJ,cAAgBgG,EAAOC,sBAAsBjG,cACxDrJ,EAAQ4D,GAEZmL,EAAaQ,GACbpO,EAAaC,QAAQ,6BAhBnBD,EAAaK,QAAQ,gEAkBzBiO,QAAS,SAACC,GACR7O,QAAQC,IAAI4O,GACZvO,EAAahD,MAAM,qEAvBlBwR,EAAP,oBA0BA,EAAyBP,aAAYZ,GAAiB,CAClDU,YAAa,SAACG,GACZ,GAAoC,OAAjCA,EAAOC,sBAAV,CAIA,IAAMC,EAAmBtB,EAAU2B,QAAQ,SAAAJ,GAAC,OAAIA,EAAErS,KAAOkS,EAAOC,sBAAsBnS,MACtF4R,EAAaQ,GACbpO,EAAaC,QAAQ,6BALnBD,EAAaK,QAAQ,gEAOzBiO,QAAS,WACPtO,EAAaK,QAAQ,0DAXpBqO,EAAP,oBAcA,EAAsBT,aAAYd,GAAsB,CACtDY,YAAa,SAACG,GACZ,GAAoC,OAAjCA,EAAOC,sBAAV,CAIA,IAAMC,EAAmBtB,EAAU1F,KAAI,SAAAiH,GACrC,OAAGA,EAAErS,KAAOkS,EAAOC,sBAAsBnS,GAChC,2BAAIqS,GAAX,IAAcrD,MAAOkD,EAAOC,sBAAsBnD,QAE3C,eAAIqD,MAGfT,EAAaQ,GACbpO,EAAaC,QAAQ,6BAXnBD,EAAaK,QAAQ,gEAazBiO,QAAS,WACPtO,EAAaK,QAAQ,uEAjBlBsO,EAAP,oBAoBA,EAAuBV,aAAYb,GAAuB,CACxDW,YAAa,SAACG,GACZ,GAAoC,OAAjCA,EAAOC,sBAAV,CAIA,IAAMC,EAAmBtB,EAAU1F,KAAI,SAAAiH,GACrC,OAAGA,EAAErS,KAAOkS,EAAOC,sBAAsBnS,GAChC,2BAAIqS,GAAX,IAAczD,OAAQsD,EAAOC,sBAAsBvD,SAE5C,eAAIyD,MAGfT,EAAaQ,GACbpO,EAAaC,QAAQ,6BAXnBD,EAAaK,QAAQ,gEAazBiO,QAAS,WACPtO,EAAaK,QAAQ,wEAjBlBuO,EAAP,oBAoBA,EAAyBX,aAAYR,GAAwB,CAC3DM,YAAa,SAAC1O,GACZ,GAAkC,YAA/BA,EAAKwP,eAAeC,OAAqB,CAC1C9O,EAAaC,QAAQ,sCACrB,IAAMmO,EAAmBtB,EAAU1F,KAAK,SAAAiH,GACtC,OAAGA,EAAErS,KAAOqD,EAAKwP,eAAeE,YACvB,2BAAIV,GAAX,IAActC,UAAU,GAAD,mBAAMsC,EAAEtC,WAAR,gBAAuB1M,EAAKwP,oBAE5C,eAAIR,MAGfT,EAAaQ,QAEbpO,EAAahD,MAAMqC,EAAKwP,eAAe7R,QAG3CsR,QAAS,SAACJ,GACRxO,QAAQC,IAAIuO,MAjBTW,EAAP,oBAoBA,EAAyBZ,aAAYP,GAAwB,CAC3DK,YAAa,SAAC1O,GACZ,IAAM+O,EAAmBtB,EAAU1F,KAAK,SAAAiH,GACtC,OAAGA,EAAErS,KAAOqD,EAAK2P,uBAAuBD,YAC/B,2BAAIV,GAAX,IAActC,UAAWsC,EAAEtC,UAAU0C,QAAO,SAAAQ,GAAG,OAAIA,EAAIjT,KAAOqD,EAAK2P,uBAAuBhT,QAEnF,eAAIqS,MAGfT,EAAaQ,IAEfE,QAAS,SAACjP,OAXL6P,EAAP,oBAeA,EAAsBjB,aAAYV,GAAqB,CACnDQ,YAAa,SAAC1O,GACV,GAAkC,YAA/BA,EAAK8P,eAAeL,OAAqB,CACxC,IAAMM,EAAc/P,EAAK8P,eACzBvB,EAAa,GAAD,mBAAMd,GAAN,CAAiBsC,UAE7BpP,EAAahD,MAAMqC,EAAK8P,eAAenS,QAG/CsR,QAAS,SAACC,GACRvO,EAAaK,QAAQ,iCACrBX,QAAQC,IAAI4O,MAXXa,EAAP,oBAcA,EAAyBnB,aAAYX,GAAyB,CAC5DS,YAAa,SAACG,GACZ,GAAoC,OAAjCA,EAAOC,sBAAV,CAIA,IAAMC,EAAmBtB,EAAU1F,KAAK,SAAAiH,GACtC,OAAGA,EAAErS,KAAOkS,EAAOC,sBAAsBnS,GAChC,2BAAIqS,GAAX,IAAcvN,SAAUoN,EAAOC,sBAAsBrN,WAE9C,eAAIuN,MAGfT,EAAaQ,GACbpO,EAAaC,QAAQ,6BAXnBD,EAAaK,QAAQ,gEAazBiO,QAAS,WACPtO,EAAaK,QAAQ,qEAjBlBgP,EAAP,oBAoBA,EAAyBpB,aAAYT,GAAyB,CAC5DO,YAAa,SAACG,GACwB,YAAjCA,EAAOoB,eAAeR,OACvB9O,EAAaC,QAAQ,iCAErBD,EAAaK,QAAQ6N,EAAOoB,eAAetS,QAG/CsR,QAAS,WACPtO,EAAaK,QAAQ,qEATlBiP,EAAP,oBAuCA,OACA,qBAAK9R,MAAO,CAACuF,OAAQ,aAAc2J,UAAW,OAAQrJ,YAAa,OAAnE,SACI,cAAC4I,GAAD,CACIvB,iBA9BiB,SAAC1O,EAAIc,GAC1B0R,EAAU,CAACe,UAAW,CAACvT,KAAIkM,cAAepL,MA8BtCmO,eA5Be,SAACjP,EAAIc,GACxB6R,EAAY,CAACY,UAAW,CAACvT,KAAIgP,MAAOlO,MA4BhC+N,gBA1BgB,SAAC7O,EAAIc,GACzB8R,EAAa,CAACW,UAAW,CAACvT,KAAI4O,OAAQ9N,MA0BlC+P,cAxBc,SAAC/L,EAAUE,GAC7BoO,EAAY,CAACG,UAAW,CAACzO,WAAUE,eAwB/BkJ,iBAtBiB,SAAClO,GACtB0S,EAAe,CAACa,UAAW,CAACvT,SAsBxBmO,kBApBkB,SAACnO,EAAIc,GAC7BuS,EAAe,CAACE,UAAW,CAACvT,KAAI8E,SAAUhE,MAoBpCsN,kBAlBkB,SAAC,GAA2C,IAA1CC,EAAyC,EAAzCA,QAASC,EAAgC,EAAhCA,aAAcC,EAAkB,EAAlBA,aACjD+E,EAAe,CAACC,UAAW,CAAClF,UAASE,eAAcD,mBAkB7CuB,iBAhBiB,WACvBgD,EAAe,CAACU,UAAW,MAgBrB7L,iBAdiB,SAAC1H,GACxBkT,EAAe,CAACK,UAAW,CAACvT,SActB8Q,UAAWA,M,mEC/SjB0C,GAAsBvC,aAAH,sUAgBlB,SAASwC,GAAuB5S,GACnC,MAAsCgE,mBAAS,IAA/C,mBAAO6O,EAAP,KAAoBC,EAApB,KACA,EAA2B9B,aAAS2B,GAAqB,CACrDD,UAAW,CAACK,aAAc/S,EAAM+S,cAChC7B,YAAa,SAAA1O,GACTK,QAAQC,IAAIN,GACZsQ,EAAetQ,EAAKwQ,YAAY,GAAGC,oBAJnCC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAOjB,OAAI+S,EACI,cAACC,GAAA,EAAD,IAEJhT,GACH0C,QAAQ1C,MAAMA,GACP,0CAIR,eAAC,IAAMkH,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,UAAqCa,EAAM+S,aAA3C,yBACA,eAACvL,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACC,GAAA,EAAD,0EAGE,eAAC2C,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,UAAUjG,MAAO,CAAC,YAAe,QAAS,aAAgB,cAAzF,UACI,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,wBACA,cAACA,EAAA,EAAD,yBAGJ,cAAC+D,EAAA,EAAD,UAEImI,EAAYtI,KAAK,SAAC6I,GAAD,OACb,eAAC1M,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAYyM,EAAMC,cAClB,eAAC1M,EAAA,EAAD,sCACwB,uBAAMyM,EAAMrT,KAAK,uBADzC,kBAEe,uBAAMqT,EAAME,eAAe,uBAF1C,qBAGkB,uBAAMF,EAAMG,UAAU,uBAHxC,kBAIe,uBAAMH,EAAMhS,SAAW,MAAO,KAAK,uBAJlD,kBAKe,uBAAMgS,EAAMI,eAAe,4BAP/B,YAAcJ,EAAMjU,eAgBnD,cAACyI,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAM6H,YAAavB,MAAM,UAA9D,wBCtEV,IAAMmN,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJsB,MAAO,OACP4E,QAAS,OACT3D,aAAc,QAEhB8R,OAAQ,CACNC,UAAW,eACX7D,WAAY,OACZ8D,WAAYxE,EAAMyE,YAAYC,OAAO,YAAa,CAChDC,SAAU3E,EAAMyE,YAAYE,SAASC,YAGzCC,WAAY,CACVN,UAAW,kBAEbO,QAAS,CACP1E,gBAAiB,UACjBnJ,MAAO,WAET8N,WAAY,CACV3E,gBAAiB,MACjBnJ,MAAO,WAGL+N,GAAehV,aAAW,SAACgQ,GAAD,MAAY,CACxCiF,MAAO,CACHC,UAAW,kBACX,WAAY,CACVtK,SAAU,WACVuK,IAAK,EACLC,KAAM,EACN7T,MAAO,OACPsF,OAAQ,OACRwO,aAAc,MACdC,UAAW,oCACXC,OAAQ,yBACRC,QAAQ,OAGhB,oBAAqB,CACnB,KAAM,CACJjB,UAAW,YACXkB,QAAS,GAEX,OAAQ,CACNlB,UAAW,aACXkB,QAAS,OAtBMzV,CAyBjB0V,MAEG,SAASC,GAAgBhV,GAC9B,IAAMiV,EAAUxB,KAChB,EAA8C3R,IAAMkC,SAAS,IAA7D,mBAAOkR,EAAP,KAAwBC,EAAxB,KACA,EAAoDrT,IAAMkC,UAAS,GAAnE,mBAAOoR,EAAP,KAA2BC,EAA3B,KACA,EAAsCvT,IAAMkC,SAAS,IAArD,mBAAOsR,EAAP,KAAoBC,EAApB,KACInK,EAAO,IAAIG,KAIT4I,GAHI/I,EAAKU,UAAuC,IAA3BV,EAAKW,oBAChB,IAAIR,KAAKvL,EAAMwV,gBACG1J,WAAa,IAClB,GAAK,UAAY,aAa9C,OAZAzH,qBAAW,WACT,GAAIrE,EAAMyV,yBAAyB3L,OAAS,EAAE,CAC5C,IAAM4L,EAAU1V,EAAMyV,yBAAyBlL,KAAK,SAACoL,GACnD,OAAOA,EAAID,QAAQE,SAErBT,EAAmBO,EAAQG,KAAK,YAGhCV,EAAmB,IAErBI,EAAevV,EAAM8V,aAAaC,MAAM,KAAKF,KAAK,SACjD,CAAC7V,EAAMyV,yBAA0BzV,EAAM8V,eAExC,eAACE,GAAA,EAAD,CAAM5L,UAAW6K,EAAQ3V,KAAM0K,UAAW,EAA1C,UACI,cAACqK,GAAD,CAAc4B,QAAQ,SAAShB,QAAS,CAACX,MAAOW,EAAQd,IAAW+B,WAAW,EAAOC,aAAc,CAACC,SAAU,SAAUC,WAAY,SAApI,SACI,cAACC,GAAA,EAAD,CACAlM,UAAW6K,EAAQsB,MACnBpM,UAAU,MACVxJ,MAAO,CAACC,MAAO,QAASsF,OAAQ,MAAOxG,QAAS,OAAQ8W,UAAW,SACnExQ,IAAK,WAAahG,EAAM4V,MAAQ,WAGpC,sBAAKjV,MAAO,CAAC+H,SAAU,OAAvB,UACE,cAACoG,EAAA,EAAD,CAAY5N,QAAQ,KAAKiJ,UAAU,KAAKxJ,MAAO,CAACmP,UAAU,OAAQC,WAAY,QAA9E,SAAwF/P,EAAM4V,QAC9F,eAACa,GAAA,EAAD,CAAa9V,MAAO,CAACmP,UAAU,QAA/B,UACI,eAAChB,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,UACE,wCADF,IACkBnK,EAAM0W,UAExB,eAAC5H,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,UACE,6DADF,IACuCmL,KAGI,IAA1CtV,EAAMyV,yBAAyB3L,OAAgB,KAC9C,eAACgF,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,UACE,uDADF,IACiC+K,KAGnC,cAACpG,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,SACGnK,EAAM2W,aAIf,sBAAKhW,MAAO,CAAC6E,QAAS,cAAeoR,aAAc,OAAQ7G,WAAY,OAAQxK,eAAgB,eAAgBsR,WAAY,UAAWC,cAAe,SAAUC,aAAc,YAA7K,UACI,cAAC1Q,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYoF,MAAM,UAAU0Q,KAAMhX,EAAMiX,QAAU,kBAAoBjX,EAAM4V,MAAQ,gBAAkB5V,EAAM4V,MAAO1V,OAAO,SAAvJ,kBAGA,cAACmG,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAK8O,GAAsB,IAAS/O,MAAM,UAAUpF,QAAQ,YAA1F,2BACI,cAAC+G,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMgN,EAC/CpN,QAAS,WAAKqN,GAAsB,IACpC1M,YAAa,cAACiK,GAAD,2BAA4B5S,GAA5B,IAAmC+S,aAAc/S,EAAM4V,iB,oBCnHjFsB,GAAoB9G,aAAH,keA4BjB,SAAS+G,GAA4BnX,GACxC,IAAMqP,EAAQC,eACL9M,EAAS4U,aAAgBF,IAAzB1U,KACT,EAAwCV,IAAMkC,SAAS,IAAvD,mBAAOqT,EAAP,KAAqBC,EAArB,KAQA,OAPAjT,qBAAW,WAKTiT,OAJY7W,IAAT+B,EAIaA,EAAKwQ,YAHH,MAIjB,CAACxQ,IAEE,sBAAK7B,MAAO,CAACmW,cAAe,SAAUD,WAAY,WAAlD,UACI,cAAC9M,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,6BAKAsH,EAAa9M,KAAK,SAACgN,GAAD,OACd,cAACvC,GAAD,eAAiDuC,GAA3B,cAAgBA,EAAGpY,UCzC/D,IAAMqY,GAAiBpH,aAAH,2WAkBb,SAASqH,GAAqBzX,GACjC,MAAsCgE,mBAAS,IAA/C,mBAAO6O,EAAP,KAAoBC,EAApB,KACA,EAA2B9B,aAASwG,GAAgB,CAChD9E,UAAW,CAACK,aAAc/S,EAAM+S,cAChC7B,YAAa,SAAA1O,GACTsQ,EAAetQ,EAAKkV,UAAU,GAAGC,wBAHjCzE,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAMjB,OAAI+S,EACI,cAACC,GAAA,EAAD,IAEJhT,GACH0C,QAAQ1C,MAAMA,GACP,0CAIR,eAAC,IAAMkH,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,UAAqCa,EAAM+S,aAA3C,yBACA,eAACvL,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACC,GAAA,EAAD,0EAGE,eAAC2C,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,UAAUjG,MAAO,CAAC,YAAe,QAAS,aAAgB,cAAzF,UACI,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,wBACA,cAACA,EAAA,EAAD,yBAGJ,cAAC+D,EAAA,EAAD,UAEImI,EAAYtI,KAAK,SAAC6I,GAAD,OACb,eAAC1M,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAYyM,EAAMC,cAClB,eAAC1M,EAAA,EAAD,sCACwB,uBAAMyM,EAAMrT,KAAK,uBADzC,kBAEe,uBAAMqT,EAAME,eAAe,uBAF1C,qBAGkB,uBAAMF,EAAMwE,cAAc,uBAH5C,kBAIe,uBAAMxE,EAAMhS,SAAW,MAAO,KAAK,uBAJlD,kBAKe,uBAAMgS,EAAMI,eAAe,uBAL1C,qBAMkB,uBAAMJ,EAAMyE,UAAY,MAAQ,KAAM,uBANxD,yBAOsB,uBAAMzE,EAAM0E,cAAc,4BATrC,YAAc1E,EAAMjU,eAkBnD,cAACyI,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wB,6GC1EJyR,GAAwB3H,aAAH,6IAUpB,SAAS4H,GAAsBhY,GAClC,MAAiCgR,aAAS+G,GAAuB,CAC7DrF,UAAW,CAACvT,GAAIa,EAAMiY,YACtB/G,YAAa,SAAA1O,KAGbyO,YAAa,iBALTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAAOqC,EAAxB,EAAwBA,KAOxB,OAAI0Q,EACI,cAACC,GAAA,EAAD,IAEJhT,GACH0C,QAAQ1C,MAAMA,GACP,0CAIR,eAAC,IAAMkH,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,UAAqCa,EAAM+S,aAA3C,8BACA,eAACvL,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACC,GAAA,EAAD,4GAGE,cAAC,EAAD,CAAiBlG,WAAW,EAAM3B,SAAU,aAAcI,MAAOuC,EAAK0V,iBAAiB1L,YAE3F,cAAC5E,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wB,4BClCJ6R,I,qBAAwB/H,aAAH,8MAWpB,SAASgI,GAAsBpY,GAClC,MAA4BgE,mBAAS,IAArC,mBAAOqU,EAAP,KAAeC,EAAf,KACA,EAA2BtH,aAASmH,GAAuB,CACvDzF,UAAW,CAACvT,GAAIa,EAAMiY,WAAYM,SAAU,eAC5CrH,YAAa,SAAA1O,GACgC,UAAtCA,EAAKgW,sBAAsBvG,OAC1BqG,EAAU,+CAAiD9V,EAAKgW,sBAAsBrY,QAEtF0C,QAAQC,IAAIN,GACZ8V,EAAUG,KAAKjW,EAAKgW,sBAAsBhW,SAGlDyO,YAAa,iBAVTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAajB,GAAI+S,EACH,OAAO,cAACC,GAAA,EAAD,IAER,GAAIhT,EAEH,OADA0C,QAAQ1C,MAAMA,GACP,yCAUV,OACE,eAAC,IAAMkH,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,UAAqCa,EAAM+S,aAA3C,8BACA,cAACvL,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,KAAD,CACEiR,KAAK,OACLrJ,MAAO,UACPxP,SAXO,SAACI,EAAOM,GACrB+X,EAAUrY,IAWJ0Y,SAAU,GACVC,YAAY,EACZC,qBAAqB,EACrB5Y,MAAOoY,EACP9P,OAAO,EACP3H,MAAO,OACPkY,WAAY,CACVC,iBAAiB,EACjBC,QAAS,OAGjB,eAACpR,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QA/BX,WACnBvG,EAAMiZ,eAAeC,KAAKb,IAC1BrY,EAAMgI,WA6BiD1B,MAAM,YAA3D,0BCnEH,SAAS6S,GAA+BnZ,GAC7C,OACE,eAAC,IAAMqH,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,UAAqCa,EAAM+S,aAA3C,8BACA,eAACvL,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACC,GAAA,EAAD,4GAGE,cAAC,EAAD,CAAiBlG,WAAW,EAAMvB,MAAOD,EAAMwM,OAAQ3M,SAAU,kBAErE,cAAC+H,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wB,gJCAH,SAAS8S,GAAT,GAAqK,IAApIvZ,EAAmI,EAAnIA,SAAUyT,EAAyH,EAAzHA,eAAgBsE,EAAyG,EAAzGA,cAAe7X,EAA0F,EAA1FA,KAAMqB,EAAoF,EAApFA,SAAUoS,EAA0E,EAA1EA,eAAgBrU,EAA0D,EAA1DA,GAAIkU,EAAsD,EAAtDA,YAAoBgG,EAAkC,EAAzCpZ,MAC9H,GADuK,EAArBqZ,oBACxHxX,IAAMkC,SAAS,KAAzC,mBAAO/D,EAAP,KAAcsZ,EAAd,KACMlK,EAAQC,eACd,EAAkCxN,IAAMkC,SAAS,IAAjD,mBAAOwV,EAAP,KAAkBC,EAAlB,KACA,EAAsC3X,IAAMkC,SAAS,IAArD,mBAAO0V,EAAP,KAAoBC,EAApB,KACA,EAAkD7X,IAAMkC,SAAS,IAAjE,mBAAO4V,EAAP,KAA0BC,EAA1B,KACA,EAA8D/X,IAAMkC,SAAS,IAA7E,mBAAO8V,EAAP,KAAgCC,EAAhC,KACA,EAA0CjY,IAAMkC,SAAS,IAAzD,mBAAOgW,EAAP,KAAsBC,EAAtB,KACA,EAAkCnY,IAAMkC,SAAS,IAAIuH,MAArD,mBAAO2O,EAAP,KAAkBC,EAAlB,KACMC,EAAmB,SAACC,GACtB,IAAMC,EAAYD,EAAKpP,QAAQ,SAACC,EAAMqP,GAClC,MAAiB,KAAdA,EAAIta,MACG,GAAN,mBAAWiL,GAAX,CAAiB,CACbsP,OAAqB,MAAbD,EAAIxa,KACZS,IAAK+Z,EAAI/Z,IACTT,KAAMwa,EAAIxa,KACVE,MAAOsa,EAAIta,SAGR,YAAIiL,KAEhB,IACHrL,EAASE,EAAMua,GAAW,IAE9BjW,qBAAW,WACP,GAAsB,cAAnBiP,EAA+B,CAC9B,GAAGsE,EAAc,CACb,IAAMtU,EAAUsU,EAAc7B,MAAM,MACpCwD,EAASjW,EAAQ,IACjB2W,EAAiB3W,GAEF,KAAhB+V,QAAsC5Y,IAAhB4Y,IACrBE,EAASF,GACTxZ,EAASE,EAAMsZ,EAAa,UAE9B,GAAsB,SAAnB/F,EAA0B,CAC/B,GAAqB,KAAlBsE,EAAqB,CACpB,IAAI6C,EAAU,IAAIlP,KAClBkP,EAAQC,QAAQD,EAAQE,UAAYC,SAAShD,IAC7CiD,GAAaJ,GACblB,GAAU,GAEK,KAAhBF,QAAsC5Y,IAAhB4Y,GAA6BA,EAAYyB,SAAS,OACvEjY,QAAQC,IAAI,sBAAuBuW,GACnCc,EAAa,IAAI5O,KAAK8N,IACtBE,GAAU,GACV1Z,EAASE,EAAO,IAAIwL,KAAK8N,GAAc0B,cAAcC,MAAM,EAAE,IAAK,UAEpE,GAAsB,eAAnB1H,EACL,GAAmB,KAAhB+F,QAAsC5Y,IAAhB4Y,GAAoD,kBAAhBA,EAAyB,CAClFxW,QAAQC,IAAI,yBAA0BuW,GACtC,IAAI4B,EAAU5B,EAAYpO,QAAQ,SAACC,EAAMgF,GAErC,OAAGA,EAAGgL,aACI,GAAN,mBAAWhQ,GAAX,gBAAqBgF,KAEd,YAAIhF,KAEhB,IACHkP,EAAiBa,GACjBxB,EAAawB,GACbtB,EAAeN,GACf,IAAI8B,EAA2B9B,EAAYpO,QAAQ,SAACC,EAAMgF,GAGtD,IAAMkL,EAAQH,EAAQhQ,QAAQ,SAACoQ,EAAU1F,GACrC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GACH,OAAe,IAAZnL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,gBAAqBgF,KAEd,YAAIhF,KAEhB,IACH2O,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,QAEvD,CACD,IAAM7X,EAAUuB,KAAK2E,MAAMoO,GAC3B+B,EAAerW,GACf,IAAI2X,EAAU3X,EAAQ2H,QAAQ,SAACC,EAAMgF,GAEjC,OAAGA,EAAGgL,aACI,GAAN,mBAAWhQ,GAAX,4BAAqBgF,GAArB,IAAyBjQ,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,SAEzE,YAAImL,KAEhB,IACHkP,EAAiBa,GACjBxB,EAAawB,GACb,IAAIE,EAA2B7X,EAAQ2H,QAAQ,SAACC,EAAMgF,GAGlD,IAAMkL,EAAQH,EAAQhQ,QAAQ,SAACoQ,EAAU1F,GACrC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GACH,OAAe,IAAZnL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,4BAAqBgF,GAArB,IAAyBjQ,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,SAEzE,YAAImL,KAEhB,IACH2O,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,QAGpC,YAAnB7H,GAEDiG,OADiB9Y,IAAlBmX,GAC2C,SAAhCA,EAAc2D,eAIT,KAAhBlC,QAAsC5Y,IAAhB4Y,IACrBxW,QAAQC,IAAIuW,GAAa,GACzBE,EAASF,WAIQ5Y,IAAlBmX,GACC2B,EAAS3B,GAEM,KAAhByB,QAAsC5Y,IAAhB4Y,IACrBE,EAASF,GACTxZ,EAASE,EAAMsZ,EAAa,QAIrC,CAACzB,EAAetE,EAAgBvT,IAEnC,IAAMyb,EAAgB,SAAC1b,GACnByZ,EAASzZ,EAAII,OAAOD,OACpBJ,EAASE,EAAMD,EAAII,OAAOD,OAAO,IAE/Bwb,GAAe,SAAC1b,EAAME,EAAOE,GAC/BoZ,EAAStZ,GACTJ,EAASE,EAAME,EAAOE,IAEpBub,GAAsB,SAACC,GACzB,OAAIva,GAA+B,KAAnBoS,GAEY,KAAnBA,GAAoC,KAAXmI,KADtBC,OAAOpI,GAAgBqI,KAAKF,IA6BtCG,GAAkB,WAEpB,IAAIC,EAAM,eAAOjC,GACE,MAAhBiC,EAAOhc,OACNgc,EAAOvb,IAAM,GACbub,EAAO9b,MAAQ,IAEnB,IAAM+b,EAAY,sBAAOxC,GAAP,4BAAsBuC,GAAtB,IAA8Bb,cAAc,MAC9DzB,EAAauC,GAEb,IAAIb,EAA2BvB,EAAkB3O,QAAQ,SAACC,EAAMgF,GAG5D,IAAIkL,EAAQY,EAAa/Q,QAAQ,SAACoQ,EAAU1F,GACxC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GAEH,OADGU,EAAOhc,OAASmQ,EAAGnQ,OAAMqb,GAAS,IACtB,IAAZlL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,gBAAqBgF,KAEd,YAAIhF,KAEhB,IACHkP,EAAiB4B,GACjBnC,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,KA+BtDN,GAAe,SAACzP,GAClB+O,EAAa/O,GACbvL,EAASE,EAAMqL,EAAK2P,cAAcC,MAAM,EAAE,IAAK,KAE7CiB,GAAoB,SAACnc,GACvB,IAAIoc,GAAUjc,EACdsZ,EAAS2C,GACTrc,EAASE,EAAMmc,GAAQ,IAwF3B,GAA8Cpa,IAAMkC,SAAS,MAA7D,qBAAOmY,GAAP,MAAwBC,GAAxB,MACMC,GAAkBC,QAAQH,IAI1BI,GAAqB,WACvBH,GAAmB,OAGvB,OACQ,eAAC1V,EAAA,EAAD,WACI,eAACC,EAAA,EAAD,WACI,cAACmI,EAAA,EAAD,CAAY,gBAAc,OAAO0N,aAVvB,SAACjc,GACvB6b,GAAmB7b,EAAMkc,gBASqDC,aAAcH,GAC5E,YAAWF,GAAkB,YAAcld,EAAK,eAAYsB,EADhE,SAES4S,IAET,cAACsJ,GAAA,EAAD,CAASxd,GAAI,YAAcA,EAAK,UAAWiJ,KAAMiU,GAAiBO,SAAUT,GACxEhG,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBwG,gBAAiB,CACbzG,SAAU,MACVC,WAAY,SAEhBrO,QAASuU,GACTO,qBAAmB,EACnB9S,UAAW,EACXrJ,MAAO,CAACoc,cAAe,QACvBC,WAAY,CAACrc,MAAO,CAACjB,QAAS,OAAQiI,OAAQ,MAAO8H,gBAAwC,SAAvBJ,EAAM4N,QAAQxb,KAAkB4N,EAAM4N,QAAQC,QAAQC,KAAO9N,EAAM4N,QAAQC,QAAQE,MAAO9W,MAAO,SAAUpF,QAAS,YAb9L,SAeI,cAAC4N,EAAA,EAAD,UAAa/O,EAAK+J,OAAS,EAAI/J,EAAO,wBAG9C,cAAC4G,EAAA,EAAD,UAxHe,WACvB,OAAO2M,GACH,IAAK,OACD,OACI,cAAC,KAAD,CAAyB+J,MAAOC,KAAhC,SACI,cAACC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,aAAxB,SACI,cAAC,KAAD,CACAC,gBAAc,EACdxc,QAAQ,SACRyc,OAAO,aACPhW,OAAO,SACP1H,MAAOia,EACPra,SAAUgb,GACV+C,oBAAqB,CACjB,aAAc,qBAMlC,IAAK,YACD,OACI,cAACC,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOA,EACPJ,SAAU2b,EAHZ,SAMIxB,EAAczP,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAAkC/d,MAAOsa,EAAzC,SAA+CA,GAAlC,gBAAkByD,UAMnD,IAAK,aACD,OACI,eAAC,IAAM3W,SAAP,WACKmS,EAAUjP,KAAK,SAACgQ,EAAKyD,GAAN,OACZ,gCACI,eAAC3P,EAAA,EAAD,CAAY9H,QAAS,SAAC3H,IA9E1B,SAACof,GACrB,IAAMjC,EAASvC,EAAUwE,GACnBC,EAAYzE,EAAU5H,QAAQ,SAAC2I,EAAK9P,GACtC,OAAGuT,IAAMvT,KAGbgP,EAAawE,GAEb,IAAI9C,EAA2BzB,EAAYzO,QAAQ,SAACC,EAAMgF,GAGtD,IAAIkL,EAAQ6C,EAAUhT,QAAQ,SAACoQ,EAAU1F,GACrC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GAEH,OADGU,EAAOhc,OAASmQ,EAAGnQ,OAAMqb,GAAS,IACtB,IAAZlL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,gBAAqBgF,KAEd,YAAIhF,KAEhB,IACHkP,EAAiB6D,GACjBpE,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,IAqDH+C,CAAgBF,IAA7C,UAAkD,cAAC,KAAD,CAAYrd,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,QAAjG,OACc,MAAb4K,EAAIxa,KAEG,cAACoe,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAM,OAAQwd,eAAgB,cAAC/X,EAAA,EAAD,CAAQlF,UAAQ,EAAhB,iBAA+ByF,KAAK,QAAQ3G,MAAOsa,EAAI/Z,IAAKX,SAAU,SAACjB,GAAD,OA1H/H,SAACkB,EAAK2K,GAC1B,IAAM4T,EAAU7E,EAAUjP,KAAK,SAAC2F,EAAI8N,GAChC,OAAGA,IAAMvT,EACE,2BAAIyF,GAAX,IAAe1P,IAAKV,EAAII,OAAOD,QAExB,eAAIiQ,MAGnBkK,EAAiBiE,GACjB5E,EAAa4E,GAiH6IC,CAAgB1f,EAAGof,MAE7I,cAACG,GAAA,EAAD,CAAOjd,QAAQ,WAAW0F,KAAK,QAAQjG,MAAO,CAACC,MAAM,OAAQwd,eAAgB,cAAC/X,EAAA,EAAD,CAAQlF,UAAQ,EAAhB,iBAA+BlB,MAAOsa,EAAI/Z,MAG/H,cAAC2d,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAM,OAAQwd,eAAgB,cAAC/X,EAAA,EAAD,CAAQlF,UAAQ,EAAhB,mBAAiCyF,KAAK,QAAQ3G,MAAOsa,EAAIta,MAAOJ,SAAU,SAACjB,GAAD,OA1I3H,SAACkB,EAAKya,GAC1B,IAAM8D,EAAU7E,EAAUjP,KAAK,SAAC2F,EAAI8N,GAChC,OAAGA,IAAMzD,EACE,2BAAIrK,GAAX,IAAejQ,MAAOH,EAAII,OAAOD,QAE1B,eAAIiQ,MAGnBkK,EAAiBiE,GACjB5E,EAAa4E,GAiIyIE,CAAgB3f,EAAGof,QAT3I,UAAYA,MAazBpE,EAAkB9P,OAAS,EACxB,gCACI,eAACuE,EAAA,EAAD,CAAY9H,QAASuV,GAArB,cAAuC,cAAC,KAAD,CAAenb,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,QAA3F,OACA,cAACmO,GAAA,EAAD,CAAQlX,KAAK,QAAQ3G,MAAO6Z,EAAyBja,SAAU,SAACjB,GAAD,OAAOmb,EAA2Bnb,EAAEsB,OAAOD,QAA1G,SACK2Z,EAAkBrP,KAAK,SAACiU,EAAWR,GAAZ,OACpB,cAACS,GAAA,EAAD,CAAuCxe,MAAOue,EAA9C,SAA6E,MAAnBA,EAAUze,KAAe,aAAcye,EAAUze,MAA5F,YAAcA,EAAOie,WAK/C,QAIjB,IAAK,SACD,OACI,cAAC,EAAD,CAAiB5c,SAAUA,EAAUnB,MAAOA,EAAOuB,WAAW,EAC1D3B,SAAU4b,GAAcjW,QAAQ,eAAezF,KAAMA,EACrDK,SAAUsb,GAAqB9Z,UAAW,eAAiB4R,IAGvE,IAAK,UACD,OACM,cAAC7F,EAAA,EAAD,CACEC,QAAS3N,EACTJ,SAAUoc,GACVnO,WAAY,CAAE,aAAc,sBAGzC,QACC,OAAO,MAsCE4Q,OAzBM,aAAevf,GCxVnC,SAASwf,GAAsC3e,GAElD,IAAMH,EAAW,SAAC+e,EAAW3e,EAAOE,GAChCH,EAAMH,SAASG,EAAMD,KAAM6e,EAAW3e,EAAOE,IAEjD,OACA,cAAC+J,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SAEQ,eAACC,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,QAA3F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,uBACA,cAAC+F,EAAA,EAAD,yBAGR,cAAC+D,EAAA,EAAD,UACK1K,EAAM2X,oBAAoBpN,KAAK,SAAC2F,GAAD,OAC5B,cAACkJ,GAAD,aAAwDE,oBAAqBtZ,EAAMsZ,oBAAqBzZ,SAAUA,GAAcqQ,GAAnG,kBAAoBA,EAAG/Q,c,oCCRtEgZ,GAAwB/H,aAAH,okBAoBrByO,GAAyBzO,aAAH,2aAmBtB0O,GAAyB1O,aAAH,8OAOtB2O,GAAyB3O,aAAH,+QASrB,SAAS4O,GAA8Bhf,GAC1C,IAAMqP,EAAQC,eACRxL,EAAKC,YAAe/B,GAC1B,EAAwCgC,mBAAS,IAAjD,mBAAOib,EAAP,KAAqBC,EAArB,KACA,EAAgDlb,mBAAS,IAAzD,mBAAOmb,EAAP,KAAyBC,EAAzB,KACA,EAAgDpb,mBAAS,IAAzD,mBAAOqb,EAAP,KAAyBC,EAAzB,KACA,EAA4Ctb,mBAAS,IAArD,mBAAOub,EAAP,KAAuBC,EAAvB,KACA,EAAkDxb,mBAAS,IAA3D,mBAAOyb,EAAP,KAA0BC,EAA1B,KACQxM,EAAYlC,aAASmH,GAAuB,CAChDzF,UAAW,CAACvT,GAAIa,EAAMb,GAAIwgB,aAAc7b,EAAG3B,KAAKyd,sBAChD1O,YAAa,SAAA1O,GACT,IAAMqd,EAAard,EAAKsd,gBAAgBnI,oBAAoBpN,KAAK,SAAC6I,GAChE,GAA2B,KAAxBA,EAAM0E,cAAqB,CAC1B,IAAMiI,EAAS,IAAIC,GAAQ5M,EAAM0E,eAAemI,MAChD,OAAO,2BAAI7M,GAAX,IAAkBwE,cAAemI,EAAQ9f,MAAO8f,IAC9C,GAA2B,KAAxB3M,EAAMwE,cAAqB,CAChC,GAA4B,cAAzBxE,EAAME,eACL,OAAO,2BAAIF,GAAX,IAAkBnT,MAAOmT,EAAMwE,cAAc7B,MAAM,MAAM,KACvD,GAA4B,eAAzB3C,EAAME,eAAgC,CAC3C,IACI2H,EADMpW,KAAK2E,MAAM4J,EAAMwE,eACT3M,QAAQ,SAACC,EAAMgF,GAE7B,OAAGA,EAAGgL,aACI,GAAN,mBAAWhQ,GAAX,CAAiB,CAACjL,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,KAAMA,KAAMmQ,EAAGnQ,KAAMya,OAAoB,MAAZtK,EAAGnQ,QAElG,YAAImL,KAEhB,IACH,OAAO,2BAAIkI,GAAX,IAAkBnT,MAAOgb,IACvB,GAA4B,SAAzB7H,EAAME,eAA0B,CACvC,IAAImH,EAAU,IAAIlP,KAElB,OADAkP,EAAQC,QAAQD,EAAQE,UAAYC,SAASxH,EAAMwE,gBAC5C,2BAAIxE,GAAX,IAAkBnT,MAAOwa,EAAQM,cAAcC,MAAM,EAAE,MAErD,OAAO,2BAAI5H,GAAX,IAAkBnT,MAAOmT,EAAMwE,gBAGrC,OAAO,2BAAIxE,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,mBAG5DiI,EAAWK,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBACxDmM,EAAkB,YAAIK,IACtBH,EAAqB,YAAIG,IACzBP,EAAoB9c,EAAKsd,gBAAgBQ,+BAE3C7O,QAAS,SAAAjP,KAGTyO,YAAa,iBAxCTiC,QA0CR,EAA4BqN,aAAa1B,GAAwB,CAC/D3N,YAAa,SAAC1O,GACZ,IAAMge,EAAUhe,EAAKie,4BAA4BlW,KAAK,SAACoL,GACrD,IAAI+K,EAAI,2BAAO/K,GAAQA,EAAIgL,oBAI3B,MAH2B,eAAxBD,EAAKpN,gBAA2D,UAAxBoN,EAAKpN,iBAC9CoN,EAAI,MAAY7b,KAAK2E,MAAMkX,EAAI,QAE1BA,KAETF,EAAQN,MAAM,SAACC,EAAGC,GAAJ,OAAUD,EAAEpgB,KAAOqgB,EAAErgB,MAAQ,EAAI,KAC/C2f,EAAqBc,IAEvB/O,QAAS,SAACjP,GACRW,EAAahD,MAAM,kCAAoCqC,GACvDK,QAAQC,IAAIN,IAEdyO,YAAa,aAhBR2P,EAAP,oBAkBA,EAAyBxP,aAAY0N,GAAwB,CAC3D5N,YAAa,SAAC1O,GACZ4c,EAAoB,IACpBF,EAAgB,IAChBQ,EAAqB,YAAIH,IACzB,IAAMsB,EAAmBxB,EAAiBzN,QAAQ,SAAC+D,GAAD,OAASA,EAAImL,gBAAkB3B,KACjFG,EAAoBuB,GACpB1d,EAAaC,QAAQ,iCAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,8BAAgCqC,MAVhDue,EAAP,oBAaA,EAAyB3P,aAAY2N,GAAwB,CAC3D7N,YAAa,SAAC1O,GAC0B,YAAnCA,EAAKwe,mBAAmB/O,OACzB9O,EAAaC,QAAQ,iCAErBD,EAAahD,MAAM,8BAAgCqC,EAAKwe,mBAAmB7gB,OAE7EH,EAAMgI,WAGRyJ,QAAS,SAACjP,GACRW,EAAahD,MAAM,8BAAgCqC,MAXhDye,EAAP,oBAcA,GAAI/N,EACH,OAAO,cAACC,GAAA,EAAD,IAuCV,OACE,eAAC,IAAM9L,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,iCAAyDa,EAAMD,KAA/D,mBACA,eAACyH,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAACqH,EAAA,EAAD,CAAYnO,MAAO,CAAC2N,cAAe,QAAnC,+IAGG+Q,EAAiBvV,OAAS,EACzB,eAACyT,GAAA,EAAD,CAAMC,WAAS,EAAC0D,QAAS,EAAGvgB,MAAO,CAAC4N,WAAY,QAAhD,UACE,cAACgP,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SACE,eAACvD,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,UACA,cAACygB,GAAA,EAAD,0CACI,eAACvD,GAAA,EAAD,CACEnd,MAAO,CAACC,MAAO,OAAQiB,aAAc,QACrC5B,MAAOkf,EACPne,MAAM,8BACNnB,SA9BgB,SAACC,GACnCsf,EAAoBtf,EAAII,OAAOD,OAC/Bif,EAAgBpf,EAAII,OAAOD,OACH,KAArBH,EAAII,OAAOD,MACZyf,EAAqB,YAAIH,KAEzBG,EAAqB,IACrBkB,EAAkB,CAAClO,UAAW,CAAC3S,KAAMD,EAAII,OAAOD,MAAO0f,aAAc7b,EAAG3B,KAAKyd,0BAmB/D,UAME,cAACnB,GAAA,EAAD,CAAUxe,MAAM,GAAhB,0BAEEof,EAAiB9U,KAAI,SAACgQ,EAAKyD,GAAN,OACjB,cAACS,GAAA,EAAD,CAAoCxe,MAAOsa,EAAIuG,cAA/C,SAA+DvG,EAAIuG,eAApD,gBAAkB9C,cAM/C,cAACT,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SACGjC,EAAiBrV,OAAS,EACzB,cAACzD,EAAA,EAAD,CAAQ1F,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ9c,MAAMwP,KAAMrJ,MAAO,SAAUpF,QAAQ,YAAYqF,QAjCnF,WAC3BmZ,EAAqB,IACrBqB,EAAe,CAACrO,UAAW,CAAC3S,KAAMof,EAAkBQ,aAAc7b,EAAG3B,KAAKyd,yBA+B5D,8BACG,UAGN,KACL,cAAC,EAAD,CAAiB7f,KAAK,gBAAgBF,SA7D7B,SAACE,EAAME,EAAOE,GAC7B+e,EAAgBjf,IA4DgDA,MAAOgf,EAActe,MAAO,CAAC4N,WAAY,UACnG,cAACoQ,GAAD,2BAA2C3e,GAA3C,IAAkDsZ,qBAAqB,EAAM3B,oBAAqB8H,EAAmB5f,SA3DnG,SAACyhB,EAAQC,EAAethB,EAAOE,GACvD,IAAMqhB,EAAW/B,EAAkBlV,KAAK,SAAC6I,GACvC,OAAIA,EAAMrT,OAASwhB,EACR,2BAAInO,GAAX,IAAkBjT,QAAOF,UAEtBmT,KAETvQ,QAAQC,IAAI0e,GACZ9B,EAAqB8B,UAqDnB,eAAC5Z,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QA9EX,WACrB,GAA2B,IAAxB0Y,EAAanV,OAAhB,CAIE,IAAMuO,EAASoH,EAAkBxU,QAAQ,SAACC,EAAMyK,GAC9C,OAAO,2BAAIzK,GAAX,mBAAkByK,EAAI5V,KAAO4V,EAAI1V,UAChC,IACHghB,EAAe,CAACvO,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,qBAAsBkB,cAAe7B,EAAcwC,aAAczhB,EAAMb,GAAIuiB,YAAa7c,KAAKC,UAAUuT,WANzJlV,EAAaK,QAAQ,iCA4EkC8C,MAAM,YAA3D,SACG6Y,EAAiBrV,OAAS,EAAK,SAAa,iB,+BC/NnD2J,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJsB,MAAO,OACP4E,QAAS,OACT3D,aAAc,QAEhB8R,OAAQ,CACNC,UAAW,eACX7D,WAAY,OACZ8D,WAAYxE,EAAMyE,YAAYC,OAAO,YAAa,CAChDC,SAAU3E,EAAMyE,YAAYE,SAASC,YAGzCC,WAAY,CACVN,UAAW,kBAEbO,QAAS,CACP1E,gBAAiB,UACjBnJ,MAAO,WAET8N,WAAY,CACV3E,gBAAiB,MACjBnJ,MAAO,OAETqb,cAAe,CACblS,gBAAiBJ,EAAM4N,QAAQ7Z,QAAQuM,KACvCrJ,MAAO,QACP,UAAU,CACRmJ,gBAAiBJ,EAAM4N,QAAQ7Z,QAAQ+Z,OAG3CyE,YAAa,CACXnS,gBAAiBJ,EAAM4N,QAAQ9c,MAAMwP,KACrCrJ,MAAO,QACP,UAAU,CACRmJ,gBAAiBJ,EAAM4N,QAAQ9c,MAAMgd,WAIrC9I,GAAehV,aAAW,SAACgQ,GAAD,MAAY,CACxCiF,MAAO,CACHC,UAAW,kBACX,WAAY,CACVtK,SAAU,WACVuK,IAAK,EACLC,KAAM,EACN7T,MAAO,OACPsF,OAAQ,OACRwO,aAAc,MACdC,UAAW,oCACXC,OAAQ,yBACRC,QAAQ,OAGhB,oBAAqB,CACnB,KAAM,CACJjB,UAAW,YACXkB,QAAS,GAEX,OAAQ,CACNlB,UAAW,aACXkB,QAAS,OAtBMzV,CAyBjB0V,MACE8M,GAA2BzR,aAAH,kLASxB0R,GAA2B1R,aAAH,qOASvB,SAAS2R,GAAe/hB,GAC7B,IAAIoL,EAAO,IAAIG,KACT8D,EAAQC,eACR2F,EAAUxB,GAAUpE,GAIpB8E,GAHI/I,EAAKU,UAAuC,IAA3BV,EAAKW,oBAChB,IAAIR,KAAKvL,EAAMwV,gBACG1J,WAAa,IAClB,GAAK,UAAY,aAC9C,EAAoDhK,IAAMkC,UAAS,GAAnE,mBAAOoR,EAAP,KAA2BC,EAA3B,KACA,EAAwCvT,IAAMkC,UAAS,GAAvD,mBAAOge,EAAP,KAAqBC,EAArB,KACMC,EAAoBpgB,IAAMqG,OAAO,MACjCga,EAAuB,WAC3BF,GAAgB,SAACG,GAAD,OAAeA,MAE3BC,EAAsB,SAAC9hB,GACvB2hB,EAAkB5Z,SAAW4Z,EAAkB5Z,QAAQga,SAAS/hB,EAAML,SAI1E+hB,GAAgB,IAElB,EAA2B7Q,aAAYyQ,GAA0B,CAC3DU,OAAQ,SAACC,EAAD,GAAmB,EAAVhgB,MAGjBiP,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,IAElB0O,YAAa,SAAA1O,GACTigB,EAAUjgB,EAAKkgB,iBAAiBlW,QAChCmW,GAA8B,MATjCD,EAAP,oBAYQE,EAAqB,WACpB5iB,EAAMmU,QACLhR,EAAaM,KAAK,2BAElBN,EAAaM,KAAK,4BAEtBif,EAAiB,CAAChQ,UAAW,CAACvT,GAAIa,EAAMb,GAAI0jB,OAAQ7iB,EAAMmU,QAAU,OAAS,YAEjF,EAAkDrS,IAAMkC,UAAS,GAAjE,mBAAO8e,EAAP,KAA0BC,EAA1B,KACA,EAA8DjhB,IAAMkC,UAAS,GAA7E,mBAAOgf,EAAP,KAAgCC,EAAhC,KACA,EAA4BnhB,IAAMkC,SAAS,IAA3C,mBAAOwI,EAAP,KAAeiW,EAAf,KACA,EAAoE3gB,IAAMkC,UAAS,GAAnF,mBAAOkf,EAAP,KAAmCP,EAAnC,KACA,EAA8E7gB,IAAMkC,UAAS,GAA7F,mBAAOmf,EAAP,KAAwCC,EAAxC,KACA,EAAuBhS,aAAY0Q,GAA0B,CACzDS,OAAQ,SAACC,EAAD,GAAmB,EAAVhgB,MAGjBiP,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,IAElB0O,YAAa,SAAA1O,GAE8B,YAApCA,EAAK6gB,oBAAoBpR,OACxB9O,EAAaC,QAAQ,gBAErBD,EAAahD,MAAM,mBAAqBqC,EAAK6gB,oBAAoBljB,UAZtEmjB,EAAP,oBAmBF,OACE,eAACtN,GAAA,EAAD,CAAM5L,UAAW6K,EAAQ3V,KAAM0K,UAAW,EAAGrJ,MAAO,CAAC+H,SAAU,QAA/D,UACI,cAAC,GAAD,CAAcuN,QAAQ,SAAShB,QAAS,CAACX,MAAOW,EAAQd,IAAW+B,WAAW,EAAOC,aAAc,CAACC,SAAU,SAAUC,WAAY,SAApI,SACKrW,EAAMujB,OACN,cAAC,KAAD,CAAiBC,KAAMC,KAAQ7c,KAAK,KAAKjG,MAAO,CAACC,MAAO,QAASsF,OAAQ,WAEzE,cAAC,KAAD,CAAUvF,MAAO,CAACC,MAAO,QAASsF,OAAQ,aAG/C,sBAAKvF,MAAO,CAAC+H,SAAU,OAAvB,UACE,cAACoG,EAAA,EAAD,CAAY5N,QAAQ,KAAKiJ,UAAU,KAAKxJ,MAAO,CAACmP,UAAU,OAAQC,WAAY,OAAQvK,QAAS,gBAA/F,SAAiHxF,EAAMD,QACrHC,EAAMujB,QAAUvjB,EAAMmU,SACtB,cAACrF,EAAA,EAAD,CAAY5N,QAAQ,KAAKiJ,UAAU,KAAKxJ,MAAO,CAACmP,UAAU,OAAQC,WAAY,OAAQvK,QAAS,eAAgBc,MAAM+I,EAAM4N,QAAQ7Z,QAAQuM,MAA3I,+BAEA3P,EAAMujB,SAAWvjB,EAAMmU,SACvB,cAACrF,EAAA,EAAD,CAAY5N,QAAQ,KAAKiJ,UAAU,KAAKxJ,MAAO,CAACmP,UAAU,OAAQC,WAAY,OAAQvK,QAAS,eAAgBc,MAAM+I,EAAM4N,QAAQ9c,MAAMwP,MAAzI,kCAEF,eAAC8G,GAAA,EAAD,CAAa9V,MAAO,CAACmP,UAAU,QAA/B,UACI,eAAChB,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,UACE,wCADF,IACkBnK,EAAM0W,UAExB,eAAC5H,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,UACE,kDADF,IAC4BnK,EAAM0jB,sBAAsBnZ,KAAK,SAACgN,GAAD,OAASA,EAAGvE,YAAY4C,MAAQ,UAE7F,cAAC9G,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,SACGnK,EAAMqT,cAET,cAACvE,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,YAK5C,sBAAKxJ,MAAO,CAAC6E,QAAS,cAAeoR,aAAc,OAAQ7G,WAAY,OAAQxK,eAAgB,eAAgBsR,WAAY,UAAWC,cAAe,SAAUC,aAAc,YAA7K,UACI,cAAC1Q,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYoF,MAAM,UAAU0Q,KAAM,qBAAuBhX,EAAMD,KAAKwb,cAAerb,OAAO,SAAvH,kBAGA,cAACmG,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAK8O,GAAsB,IAAS/O,MAAM,UAAUpF,QAAQ,YAA1F,wBACA,cAAC+G,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMgN,EAC/CpN,QAAS,WAAKqN,GAAsB,IACpC1M,YAAa,cAAC8O,GAAD,2BAA0BzX,GAA1B,IAAiCgI,QAAS,WAAKqN,GAAsB,IAAUtC,aAAc/S,EAAMD,UAEpH,cAACkI,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM8a,EAC/Clb,QAAS,WAAK2a,GAA8B,IAC5Cha,YAAa,cAACwQ,GAAD,CAAgC3M,OAAQA,EAAQxE,QAAS,WAAK2a,GAA8B,IAAU5P,aAAc/S,EAAMD,SAE1IC,EAAM2jB,kBACA3jB,EAAMmU,QAEL,eAACyP,GAAA,EAAD,CAAa1iB,QAAQ,YAAY2iB,IAAK3B,EAAmB,aAAW,eAApE,UACG,cAAC7b,EAAA,EAAD,CAAQO,KAAK,QAAQwD,UAAWpK,EAAMmU,QAAUc,EAAQ0M,cAAgB1M,EAAQ2M,YAAarb,QAASqc,EAAoBjiB,MAAO,CAACC,MAAO,QAAzI,0BACA,cAACyF,EAAA,EAAD,CACGO,KAAK,QACL,gBAAeob,EAAe,yBAAsBvhB,EACpD,gBAAeuhB,EAAe,YAASvhB,EACvC,aAAW,wBACX,gBAAc,OACd2J,UAAWpK,EAAMmU,QAAUc,EAAQ0M,cAAgB1M,EAAQ2M,YAC3Drb,QAAS4b,EAPZ,SASG,cAAC,KAAD,SAMLniB,EAAMujB,OACL,KAEA,eAACK,GAAA,EAAD,CAAa1iB,QAAQ,YAAY2iB,IAAK3B,EAAmB,aAAW,eAApE,UACE,cAAC7b,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAASqc,EAAoBxY,UAAWpK,EAAMmU,QAAUc,EAAQ0M,cAAgB1M,EAAQ2M,YAAajhB,MAAO,CAACC,MAAO,QAAzI,2BACA,cAACyF,EAAA,EAAD,CACEO,KAAK,QACL,gBAAeob,EAAe,yBAAsBvhB,EACpD,gBAAeuhB,EAAe,YAASvhB,EACvC,aAAW,wBACX,gBAAc,OACd2J,UAAWpK,EAAMmU,QAAUc,EAAQ0M,cAAgB1M,EAAQ2M,YAC3Drb,QAAS4b,EAPX,SASE,cAAC,KAAD,SAOZ,cAAC9b,EAAA,EAAD,CAAQlF,UAAQ,EAACmF,MAAM,YAAvB,+BAED,eAACD,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYoF,MAAM,UAAUC,QAAS,WAAO6c,GAAmC,IAA5G,UAAqH,cAAC,KAAD,IAArH,sBACD,cAACnb,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM0a,EAC/C9a,QAAS,WAAK+a,GAAqB,IACnCpa,YAAa,cAACqP,GAAD,2BAA2BhY,GAA3B,IAAkC+S,aAAc/S,EAAMD,KAAMiI,QAAS,WAAK+a,GAAqB,IAAU9K,WAAYjY,EAAMb,QAE5I,cAAC8I,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM4a,EAC/Chb,QAAS,WAAKib,GAA2B,IACzCta,YAAa,cAACyP,GAAD,2BAA2BpY,GAA3B,IAAkCiZ,eAlGpC,SAACpE,GACpByO,EAAa,CAAC5Q,UAAW,CAACvT,GAAIa,EAAMb,GAAI2kB,UAAW,cAAethB,KAAMqS,MAiGe9B,aAAc/S,EAAMD,KAAMiI,QAAS,WAAKib,GAA2B,IAAUhL,WAAYjY,EAAMb,QAElL,cAAC8I,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM+a,EAC/Cnb,QAAS,WAAKob,GAAmC,IACjDza,YAAa,cAACqW,GAAD,2BAAmChf,GAAnC,IAA0CgI,QAAS,WAAKob,GAAmC,SAE5G,cAACW,GAAA,EAAD,CAAQ3b,KAAM4Z,EAAcpF,SAAUsF,EAAkB5Z,QAAS0b,UAAMvjB,EAAWoT,YAAU,EAACoQ,eAAa,EAACtjB,MAAO,CAACujB,OAAQ,GAA3H,SACG,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,UAApB,OACC,cAACC,GAAA,EAAD,2BACMF,GADN,IAEExjB,MAAO,CACLkc,gBAA+B,WAAduH,EAAyB,aAAe,iBAH7D,SAME,cAACra,EAAA,EAAD,CAAOpJ,MAAO,CAAC8O,gBAAwC,SAAvBJ,EAAM4N,QAAQxb,KAAkB4N,EAAM4N,QAAQC,QAAQC,KAAO9N,EAAM4N,QAAQC,QAAQE,MAAO9W,MAAO,SAAjI,SACE,cAACge,GAAA,EAAD,CAAmBC,YAAalC,EAAhC,SACE,eAACmC,GAAA,EAAD,CAAUrlB,GAAG,oBAAb,UACE,cAACsf,GAAA,EAAD,CAAuDlY,QAAS,WAAK0c,GAA2B,IAAhG,6BAAe,kBAAoBjjB,EAAMb,GAAK,SAE9Ca,EAAMmU,QACL,cAACsK,GAAA,EAAD,CAAuDlY,QAAS,WAAKwc,GAAqB,IAA1F,+BAAe,kBAAoB/iB,EAAMb,GAAK,SAAuF,wBC7R9J,IAAMslB,GAAkBrU,aAAH,sXAoBd,SAASsU,GAA0B1kB,GACxC,IAAQwC,EAAS4U,aAAgBqN,GAAiB,CAACxT,YAAa,iBAAxDzO,KACR,EAAkCV,IAAMkC,SAAS,IAAjD,mBAAO0T,EAAP,KAAkBiN,EAAlB,KACMtV,EAAQC,eAQd,OAPAjL,qBAAW,WAKTsgB,OAJYlkB,IAAT+B,EAIUA,EAAKkV,UAHH,MAId,CAAClV,IAEE,sBAAK7B,MAAO,CAAEmW,cAAe,SAAUD,WAAY,UAAW+N,YAAa,QAA3E,UACI,cAAC7a,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,2BAKE2H,EAAUnN,KAAK,SAACgN,GAAD,OACX,cAACwK,GAAD,eAA2CxK,GAAtB,SAAWA,EAAGpY,UCvCvD,I,GAAMsU,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJsB,MAAO,OACP4E,QAAS,OACT3D,aAAc,QAEhB8R,OAAQ,CACNC,UAAW,eACX7D,WAAY,OACZ8D,WAAYxE,EAAMyE,YAAYC,OAAO,YAAa,CAChDC,SAAU3E,EAAMyE,YAAYE,SAASC,YAGzCC,WAAY,CACVN,UAAW,kBAEbO,QAAS,CACP1E,gBAAiB,UACjBnJ,MAAO,WAET8N,WAAY,CACV3E,gBAAiB,MACjBnJ,MAAO,WAGL+N,GAAehV,aAAW,SAACgQ,GAAD,MAAY,CACxCiF,MAAO,CACHC,UAAW,kBACX,WAAY,CACVtK,SAAU,WACVuK,IAAK,EACLC,KAAM,EACN7T,MAAO,OACPsF,OAAQ,OACRwO,aAAc,MACdC,UAAW,oCACXC,OAAQ,yBACRC,QAAQ,OAGhB,oBAAqB,CACnB,KAAM,CACJjB,UAAW,YACXkB,QAAS,GAEX,OAAQ,CACNlB,UAAW,aACXkB,QAAS,OAtBMzV,CAyBjB0V,MAEG,SAAS8P,GAAyB7kB,GACvC,IAAMiV,EAAUxB,KACZrI,EAAO,IAAIG,KAIT4I,GAHI/I,EAAKU,UAAuC,IAA3BV,EAAKW,oBAChB,IAAIR,KAAKvL,EAAMwV,gBACG1J,WAAa,IAClB,GAAK,UAAY,aAE9C,OACE,eAACkK,GAAA,EAAD,CAAM5L,UAAW6K,EAAQ3V,KAAM0K,UAAW,EAA1C,UACI,cAAC,GAAD,CAAciM,QAAQ,SAAShB,QAAS,CAACX,MAAOW,EAAQd,IAAW+B,WAAW,EAAOC,aAAc,CAACC,SAAU,SAAUC,WAAY,SAApI,SACI,cAAC,KAAD,CAAiBmN,KAAMsB,KAAYle,KAAK,KAAKjG,MAAO,CAACC,MAAO,QAASsF,OAAQ,aAEjF,gCACE,cAAC4I,EAAA,EAAD,CAAY5N,QAAQ,KAAKiJ,UAAU,KAAKxJ,MAAO,CAACmP,UAAU,OAAQC,WAAY,QAA9E,SAAwF/P,EAAMD,OAC7FC,EAAM+kB,aAAajb,OAAS,EACzB,eAACgF,EAAA,EAAD,CAAY5N,QAAQ,QAAQiJ,UAAU,IAAtC,UACE,0DADF,IACoCnK,EAAM+kB,aAAaxa,KAAK,SAACgN,GAAD,OAAQA,EAAG3B,SAAOC,KAAK,SAEnF,WCzEd,IAAMmP,GAA6B5U,aAAH,6SAczB,SAAS6U,GAA4BjlB,GAC1C,MAA0D8B,IAAMkC,SAAS,IAAzE,mBAAOkhB,EAAP,KAA8BC,EAA9B,KACA,EAAkFrjB,IAAMkC,SAAS,IAAjG,mBAAOohB,EAAP,KAA0CC,EAA1C,KACS7iB,EAAS4U,aAAgB4N,IAAzBxiB,KACH6M,EAAQC,eAWd,OAVAjL,qBAAW,WACT,QAAY5D,IAAT+B,EAAH,CAIA,IAAM8iB,EAAa9iB,EAAK+iB,qBAAqB3T,QAAQ,SAAC4T,GAAD,OAAmC,IAA3BA,EAAGT,aAAajb,UACvE2b,EAAWjjB,EAAK+iB,qBAAqB3T,QAAQ,SAAC4T,GAAD,OAAQA,EAAGT,aAAajb,OAAS,KACpFqb,EAAyBG,GACzBD,EAAqCI,QANnCN,EAAyB,MAO1B,CAAC3iB,IAEF,sBAAK7B,MAAO,CAACC,MAAO,OAAQ4E,QAAS,cAAesR,cAAe,SAAUD,WAAY,WAAzF,UAEIqO,EAAsBpb,OAAS,EAC7B,eAAC,IAAMzC,SAAP,WACE,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,oEAIDmV,EAAsB3a,KAAK,SAACib,GAAD,OAC1B,cAACX,GAAD,eAAoEW,GAArC,wBAA0BA,EAAGrmB,UAG7D,KAGLimB,EAAkCtb,OAAS,EACzC,eAAC,IAAMzC,SAAP,WACE,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,sCAIDqV,EAAkC7a,KAAK,SAACib,GAAD,OACtC,cAACX,GAAD,eAAoEW,GAArC,wBAA0BA,EAAGrmB,UAG7D,QCzDN,SAASumB,GAAuB1lB,GAEnC,OACE,cAAC,IAAMqH,SAAP,UACE,eAACkW,GAAA,EAAD,CAAMC,WAAS,EAAC0D,QAAS,EAAzB,UACE,cAAC3D,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SACA,cAACjK,GAAD,MAEA,cAACoG,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SACA,cAACsD,GAAD,MAEA,cAACnH,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,GAAf,SACA,cAAC6D,GAAD,W,yDCVH,SAASU,GAA+B3lB,GAE3C,OACI,gCACI,cAACqG,EAAA,EAAD,CACIlF,SAAUnB,EAAM4lB,MAChBtf,MAAM,UACNC,QAASvG,EAAM6lB,SAHnB,kBAOE,cAACxf,EAAA,EAAD,CACEnF,QAAQ,YACRoF,MAAM,UACNC,QAASvG,EAAM8lB,SAHjB,SAKG9lB,EAAM+lB,KAAO,iBAAmB,YCdjD,I,GAAMC,GAAoB5V,aAAH,uKAShB,SAAS6V,GAAcjmB,GAC1B,MAAoB8B,IAAMkC,SAAS,IAAnC,mBAAOkiB,EAAP,KAAWC,EAAX,KACA,EAAkCrkB,IAAMkC,SAAS,IAAjD,mBAAOoiB,EAAP,KAAkBC,EAAlB,KA2BA,GA1BoBrV,aAASgV,GAAmB,CAAC/U,YAAa,eAC9DC,YAAa,SAAC1O,GACV,IASM8jB,EATgB9jB,EAAKwQ,YAAY/H,QAAO,SAACsb,EAAgBvT,GAC3D,IAAMwT,EAAOxT,EAAY8C,aAAaC,MAAM,KAAK9K,QAAQ,SAACC,EAAMgb,GACxD,OAAIK,EAAezL,SAASoL,GAGrBhb,EAFG,GAAN,mBAAWA,GAAX,CAAiBgb,MAGtB,IACP,MAAM,GAAN,mBAAWK,GAAX,YAA8BC,MAC/B,IACkCtG,OACrCrd,QAAQC,IAAI9C,EAAMymB,eACIhmB,IAAnBT,EAAMymB,SACLN,EAAMnmB,EAAMymB,UAED,KAAPP,GACJC,EAAMG,EAAc,IAExBD,EAAaC,IAEjB7U,QAAS,SAACjP,GACNK,QAAQ1C,MAAMqC,MAtBV0Q,QA2BP,OAAO,8BAAK,cAACwT,GAAA,EAAD,MAQb,OACI,gCACA,cAAC5X,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,eAAegL,UAAU,MAC9DxJ,MAAO,CAAE,WAAc,QAD3B,4CADA,IAIc,uBAEd,eAACkd,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOimB,EACPrmB,SAAU,SAAAC,GAAG,OAAIqmB,EAAMrmB,EAAII,OAAOD,QAHpC,SAMImmB,EAAU7b,KAAI,SAACgQ,GAAD,OACV,wBAA4Bta,MAAOsa,EAAnC,SAAyCA,GAA5B,QAAUA,QAI/B,cAACqM,GAAA,EAAD,yCACU,uBAAK,uBACnB,cAACjB,GAAD,CAAgCC,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SAxBzD,WACb7lB,EAAM6lB,YAuBoFC,SA3B7E,WACb9lB,EAAM8lB,SAASI,SCxChB,SAASW,GAAkC7mB,GAE9C,OACI,eAACkK,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,UACI,cAAC0E,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,gBAAgBgL,UAAU,MACnExJ,MAAO,CAAC,QAAW,eAAgB,MAAS,OAAQ,WAAc,QADlE,8BAIA,eAAC0J,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA3F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,8BACA,cAACA,EAAA,EAAD,yBAGR,cAAC+D,EAAA,EAAD,UACC1K,EAAM8mB,gBAAgBvc,KAAK,SAAC2F,GAAD,OACxB,cAACkJ,GAAD,aAA2DvZ,SAAUG,EAAMH,UAAcqQ,GAA5D,qBAAuBA,EAAG/Q,eCrB3E,IAAM6mB,GAAoB5V,aAAH,wcAmBhB,SAAS2W,GAAuB/mB,GACnC,MAAsD8B,IAAMkC,SAAS,IAArE,mBAAOgjB,EAAP,KAA4BC,EAA5B,KACA,EAA0CnlB,IAAMkC,SAAS,IAAzD,mBAAOkjB,EAAP,KAAsBC,EAAtB,KACA,EAA4DrlB,IAAMkC,UAAS,GAA3E,mBAAOojB,EAAP,KAA+BC,EAA/B,KACA,EAAkEvlB,IAAMkC,SAAS,IAAjF,mBAAOsjB,EAAP,KAA8BC,EAA9B,KACA,EAAiCvW,aAASgV,GAAmB,CAACtT,UAAU,CAACwT,GAAI,IAAMlmB,EAAMwnB,aAAe,KACpGtW,YAAa,SAAA1O,GACT,GAAGA,EAAKwQ,YAAYlJ,OAAS,EACzB,QAAsBrJ,IAAnBT,EAAMymB,UAA0BzmB,EAAMymB,SAASP,KAAOlmB,EAAMwnB,aAAa,CACxE3kB,QAAQC,IAAI9C,EAAMymB,UAClBQ,EAAuBjnB,EAAMymB,SAASgB,cACtCN,EAAiBnnB,EAAMymB,SAASiB,gBAChCL,EAA0BrnB,EAAMymB,SAASkB,0BACzC,IAAMC,EAAkBplB,EAAKwQ,YAAY/H,QAAQ,SAACC,EAAM2c,GACpD,GAAGA,EAAQjS,QAAU5V,EAAMymB,SAASgB,aAAa,CAC7C,IAAMK,EAASD,EAAQ5U,gBAAgB1I,KAAK,SAAC6I,GACzC,IAAI,IAAI2U,EAAI,EAAGA,EAAI/nB,EAAMymB,SAAS5G,WAAW/V,OAAQie,IACjD,GAAG/nB,EAAMymB,SAAS5G,WAAWkI,GAA1B,OAAyC3U,EAAMrT,KAC9C,OAAO,2BAAIqT,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOD,EAAMymB,SAAS5G,WAAWkI,GAA1B,WAI5D,MAAM,GAAN,mBAAW7c,GAAX,YAAoB4c,IAExB,OAAO,YAAI5c,KACZ,IACH0c,EAAgB1H,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBAC7DkU,EAAiCK,OAChC,CACDX,EAAuBzkB,EAAKwQ,YAAY,GAAG4C,OAC3CuR,EAAiB3kB,EAAKwQ,YAAY,GAAG0U,gBACrCL,EAA0B7kB,EAAKwQ,YAAY,GAAG2U,0BAC9C,IAAMC,EAAkBplB,EAAKwQ,YAAY/H,QAAQ,SAACC,EAAM2c,GACpD,GAAGA,EAAQjS,QAAUpT,EAAKwQ,YAAY,GAAG4C,MAAM,CAC3C,IAAMkS,EAASD,EAAQ5U,gBAAgB1I,KAAK,SAAC6I,GACzC,MAA4B,cAAzBA,EAAME,eACE,2BAAIF,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,cAAc7B,MAAM,MAAM,KAClD,YAAzB3C,EAAME,eACJ,2BAAIF,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAA6C,SAAtCmT,EAAMwE,cAAc2D,gBAE7D,2BAAInI,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,mBAG9D,MAAM,GAAN,mBAAW1M,GAAX,YAAoB4c,IAExB,OAAO,YAAI5c,KACZ,IACH0c,EAAgB1H,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBAC7DkU,EAAiCK,GACjC/kB,QAAQC,IAAI8kB,OA5CpB1U,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAAOqC,EAAxB,EAAwBA,KAmGxB,OAAI0Q,EACO,8BAAK,cAACwT,GAAA,EAAD,MAEZvmB,GACA0C,QAAQ1C,MAAMA,GACP,0CAGP,gCACI,cAAC2O,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,eAAegL,UAAU,MAC9DxJ,MAAO,CAAC,WAAc,QAD1B,wCAIA,cAACmd,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAO+mB,EACPnnB,SAjDgB,SAACC,GACvBmnB,EAAuBnnB,EAAII,OAAOD,OAClC,IAAM2nB,EAAkBplB,EAAKwQ,YAAY/H,QAAQ,SAACC,EAAM2c,GACpD,GAAGA,EAAQjS,QAAU9V,EAAII,OAAOD,MAAM,CAClCknB,EAAiBU,EAAQH,gBACzBL,EAA0BQ,EAAQF,0BAClC,IAAMG,EAASD,EAAQ5U,gBAAgB1I,KAAK,SAAC6I,GAEzC,OADAvQ,QAAQC,IAAIsQ,GACgB,cAAzBA,EAAME,eACE,2BAAIF,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,cAAc7B,MAAM,MAAM,KAClD,YAAzB3C,EAAME,eACJ,2BAAIF,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAA6C,SAAtCmT,EAAMwE,cAAc2D,gBAE7D,2BAAInI,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,mBAI9D,MAAM,GAAN,mBAAW1M,GAAX,YAAoB4c,IAExB,OAAO,YAAI5c,KACZ,IACH0c,EAAgB1H,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBAC7DkU,EAAiCK,IAwB7B,SAMIplB,EAAKwQ,YAAYzI,KAAI,SAACgQ,GAAD,OACjB,wBAAkCta,MAAOsa,EAAI3E,MAA7C,SAAqD2E,EAAI3E,OAA5C,QAAU2E,EAAI3E,YAG1B,uBACT,cAACiR,GAAD,CAAmChnB,SAjC1B,SAACE,EAAME,EAAOE,GAC3B,IAAM6nB,EAAYV,EAAsB/c,KAAK,SAAC6I,GAC1C,OAAGA,EAAMrT,OAASA,EACP,2BAAIqT,GAAX,IAAkBnT,QAAOE,UAEtB,eAAIiT,MAEfmU,EAAiCS,IA0B0BlB,gBAAiBQ,IACxE,cAAC3B,GAAD,CAAgCC,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SA7D7D,WACb7lB,EAAM6lB,YA4DwFC,SAvEjF,WACb,IAAMmC,EAAiBX,EAAsB/c,KAAK,SAAC6I,GAC/C,MAAO,CAAC,KAAQA,EAAMrT,KAAM,MAASqT,EAAMnT,UAE/CD,EAAM8lB,SAAS,CAAC,aAAgBkB,EAChB,WAAciB,EACd,eAAkBf,EAClB,yBAA4BE,EAC5B,GAAMpnB,EAAMwnB,qBCpF7B,SAASU,GAAoBloB,GAChC,IAAMqP,EAAQC,eAMhB,OACE,cAACrH,GAAD,CAAcnH,WAAW,EAAO4H,SAAS,KAAKN,KAAMpI,EAAMoI,KAAMJ,QAAS,WAAKhI,EAAMgI,WAAYW,YAC5F,eAAC,IAAMtB,SAAP,WACI,cAACC,GAAA,EAAD,UAAetH,EAAMuH,MAASvH,EAAMuH,MAAU,uBACxB9G,IAArBT,EAAMmoB,WAA4B,KACjC,cAAC3gB,GAAA,EAAD,CAAeC,UAAU,EAAM9G,MAAO,CAACynB,UAAW,cAAlD,SACE,cAAC1gB,GAAA,EAAD,UACG1H,EAAMmoB,eAIb,eAACvgB,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,SACGtG,EAAMqoB,WAAcroB,EAAMqoB,WAAe,UAE5C,cAAChiB,EAAA,EAAD,CAAQE,QApBG,WACjBvG,EAAMoG,WACNpG,EAAMgI,WAkB+B/G,WAAS,EAACC,QAAQ,YAAYP,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQzZ,QAAQmM,MAA5G,SACG3P,EAAMsoB,WAActoB,EAAMsoB,WAAe,mB,6ECfpD7U,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJqI,OAAQ,OACR/G,MAAO,QAET2nB,MAAO,CACL3nB,MAAO,IACPsF,OAAQ,IACRsiB,SAAU,QAGZC,OAAQ,CACN9gB,OAAQ0H,EAAM6R,QAAQ,GAAK,IAE7BwH,QAAS,CACPjZ,gBAAiB,qBACjBmF,OAAQ,qCAINoR,GAAoB5V,aAAH,6SAchB,SAASuY,GAAoB3oB,GAChC,MAAgC8B,IAAMkC,SAAS,IAA/C,mBAAO4kB,EAAP,KAAiBC,EAAjB,KACA,EAA4C/mB,IAAMkC,SAAS,IAA3D,mBAAO8kB,EAAP,KAAuBC,EAAvB,KACA,EAAkDjnB,IAAMkC,UAAS,GAAjE,mBAAOglB,EAAP,KAA0BC,EAA1B,KACQzmB,EAASwO,aAASgV,GAAmB,CAAC/U,YAAa,eAAgByB,UAAW,CAACwW,YAAalpB,EAAMwnB,aAAN,cAChGtW,YAAa,WAEX,GAAIlR,EAAMwnB,aAAN,yBAMC,CACH,IAAM2B,EAAc3mB,EAAK4mB,QAAQne,QAAQ,SAACC,EAAMyK,GAC9C,IACE,IAAM0T,EAAaxkB,KAAK2E,MAAMmM,EAAI0T,YAClC,GAAyC,IAAtCA,EAAU,aAAiBvf,QAAgBuf,EAAU,aAAiBvO,SAAS9a,EAAMwnB,aAAN,IAA0B,CAC1G,QAA6B/mB,IAA1B4oB,EAAU,SAA6BA,EAAU,QAClD,MAAM,GAAN,mBAAWne,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAMmoB,UAAU,EAAMC,OAAQ,mDAElE,IACE,QAA+B9oB,IAA5B4oB,EAAU,WAA+BA,EAAU,UACpD,MAAM,GAAN,mBAAWne,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAMmoB,UAAU,EAAOC,OAAQ,wEAErE,IAAIC,GAAkB,EAClBC,EAA0C,GAC9C,QAA+ChpB,IAA5C4oB,EAAU,0BAEX,IAAI,IAAJ,MAA0B9f,OAAOmgB,QAAQL,EAAU,2BAAnD,eACI,IADC,0BAAM7oB,EAAN,KAAWP,EAAX,KACO+d,EAAI,EAAGA,EAAIhe,EAAMwnB,aAAa3H,WAAW/V,OAAQkU,IACpDhe,EAAMwnB,aAAa3H,WAAW7B,GAA9B,OAA6Cxd,GAC3CR,EAAMwnB,aAAa3H,WAAW7B,GAA9B,QAA8C/d,IAC/CupB,GAAkB,EAClBC,EAAuC,KAAWjpB,EAClDipB,EAAuC,MAAYxpB,GAM/D,OAAGupB,OACsC/oB,IAApC4oB,EAAU,mBAAuCA,EAAU,kBACtD,GAAN,mBAAWne,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAOmoB,UAAU,EAAMC,OAAQ,+CAE7D,GAAN,mBAAWre,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAOmoB,UAAU,EAAOC,OAAQ,OAGhE,GAAN,mBAAWre,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAMmoB,UAAU,EAAOC,OAAQ,oCAAuCE,EAAuC,KAAW,aAAiBA,EAAuC,MAAY,QAEnO,MAAMtpB,GACL0C,QAAQ1C,MAAMA,IAIpB,MAAM,GAAN,mBAAW+K,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAMmoB,UAAU,EAAOC,OAAQ,sDACpE,MAAMppB,GACL,MAAM,GAAN,mBAAW+K,GAAX,4BAAqByK,GAArB,IAA0BxU,UAAU,EAAOmoB,UAAU,EAAOC,OAAQ,4CAErE,IAEH,GADAR,EAAkBI,QACI1oB,IAAnBT,EAAMymB,SAAuB,CAC9B,IAAMkD,EAAmBR,EAAY5e,KAAK,SAACqf,GACzC,OAAG5pB,EAAMymB,SAAS3L,SAAS8O,EAAEC,KACpB,2BAAID,GAAX,IAAcN,UAAU,IAEjB,2BAAIM,GAAX,IAAcN,UAAU,OAG5BP,EAAkBY,QA9D6B,CAE/C,IAAMR,EAAc3mB,EAAK4mB,QAAQ7e,KAAK,SAAAqf,GACpC,OAAO,2BAAIA,GAAX,IAAcN,UAAU,EAAMnoB,UAAU,EAAMooB,OAAQ,6CAExDR,EAAkBI,OARpB3mB,KA6FR,OACI,gCACA,cAACsM,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,iBAAiBgL,UAAU,MAChExJ,MAAO,CAAE,WAAc,QAD3B,uCADA,IAIc,uBACd,cAACmpB,GAAD,CAAuBlB,SAAUE,EAAgBrB,aAAcznB,EAAMwnB,aAAN,aAAoC5B,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KACjIF,SAVW,WACb7lB,EAAM6lB,YASgBC,SA9BT,SAAC6D,GAEd,IADA,IAAII,GAAY,EACR/L,EAAI,EAAGA,EAAI2L,EAAiB7f,OAAQkU,IACxC,GAAG2L,EAAiB3L,GAAjB,sBAA6ClD,SAAS,uBAAuB,CAC9EiP,GAAY,EACZ,MAGN,GAAGA,EAAU,CACX,IAAMC,EAAWL,EAAiBpf,KAAK,SAAAqf,GAAC,OAAIA,EAAEC,OAC9C7pB,EAAM8lB,SAASkE,QAEff,GAAqB,GACrBJ,EAAYc,MAkBd,cAACzB,GAAD,CAAqB9f,KAAM4gB,EACvBzhB,MAAO,sCACPS,QAAS,kBAAMihB,GAAqB,IACpCX,WAAW,SACXliB,SAnBc,WACpB,IAAM4jB,EAAWpB,EAASre,KAAK,SAAAqf,GAAC,OAAIA,EAAEC,OACtC7pB,EAAM8lB,SAASkE,SAuBrB,SAASF,GAAsB9pB,GAC7B,IAAMiV,EAAUxB,KAChB,EAA8B3R,IAAMkC,SAAS,IAA7C,mBAAO4J,EAAP,KAAgBqc,EAAhB,KACA,EAAwBnoB,IAAMkC,SAAS,IAAvC,mBAAOyQ,EAAP,KAAayV,EAAb,KACA,EAA0BpoB,IAAMkC,SAAS,IAAzC,mBAAOmmB,EAAP,KAAcC,EAAd,KACMC,EAAcC,EAAa1c,EAAS6G,GACpC8V,EAAeD,EAAa1c,EAASuc,GAC3C,EAA4CroB,IAAMkC,SAAS,IAA3D,mBAAOwmB,EAAP,KAAuBC,EAAvB,KACA,SAASC,EAAIvK,EAAGC,GACZ,OAAOD,EAAEvO,QAAQ,SAAC3R,GAAD,YAA8FQ,IAAnF2f,EAAEuK,MAAM,SAAChgB,GAAD,OAAaA,EAAO,MAAY1K,EAAK,MAAY0K,EAAO,eAGhG,SAAS2f,EAAanK,EAAGC,GACrB,OAAOD,EAAEvO,QAAQ,SAAC3R,GAAD,YAA8FQ,IAAnF2f,EAAEuK,MAAM,SAAChgB,GAAD,OAAaA,EAAO,MAAY1K,EAAK,MAAY0K,EAAO,eAEhG,IAAMigB,EAAe,SAAC3qB,GAAD,OAAW,WAC9B,IAAI4qB,GAAgB,EAElBA,EADC7qB,EAAM8qB,QACQld,EAAQmd,WAAW,SAACpgB,GAAD,OAAaA,EAAQ3K,EAAM8qB,WAAa7qB,EAAMD,EAAM8qB,YAEvEld,EAAQod,QAAQ/qB,GAGjC,IAAMgrB,EAAU,YAAOrd,IAED,IAAlBid,EACFI,EAAWthB,KAAK1J,GAEhBgrB,EAAWC,OAAOL,EAAc,GAGlCZ,EAAWgB,KAoDb5mB,qBAAW,WACT,IAAM8mB,EAAcnrB,EAAM4oB,SAAS3d,QAAQ,SAACC,EAAMyK,GAC9C,OAAIA,EAAI2T,SAGC,YAAIpe,GAFL,GAAN,mBAAWA,GAAX,gBAAqByK,OAIxB,IACGyV,EAAeprB,EAAM4oB,SAAS3d,QAAQ,SAACC,EAAMyK,GACjD,OAAGA,EAAI2T,SACC,GAAN,mBAAWpe,GAAX,gBAAqByK,KAEd,YAAIzK,KAEZ,IACHgf,EAAQiB,GACRf,EAASgB,KACR,CAACprB,EAAM4oB,WACV,IAAMyC,EAAiB,SAAC9qB,GACtB,IAAMspB,EAAM7pB,EAAM4oB,SAAShX,QAAQ,SAAAgY,GAAC,OAAIA,EAAEC,MAAQtpB,EAAML,OAAOorB,aAC5DzB,EAAI/f,OAAS,GACd2gB,EAAkBZ,EAAI,KAGpB0B,EAAa,SAAChkB,EAAOikB,GAAR,OACjB,eAACzhB,EAAA,EAAD,CAAOK,UAAW6K,EAAQsT,MAAO5nB,MAAO,CAACC,MAAM,OAAQsF,OAAQ,aAAcsiB,SAAU,QAASxe,UAAW,EAA3G,UAEM,cAACyhB,GAAA,EAAD,CACErhB,UAAW6K,EAAQyW,WACnBnkB,MAAOA,IAET,cAACokB,GAAA,EAAD,CAAS1W,QAAS,CAAC3V,KAAM2V,EAAQyT,WACjC,eAACkD,GAAA,EAAD,CAAMC,OAAK,EAAC1hB,UAAU,MAAM6Z,KAAK,OAAOrjB,MAAO,CAACjB,QAAQ,GAAxD,UACG8rB,EAAMjhB,KAAI,SAACuhB,GACV,IAAM7rB,EAAQ6rB,EAAQ,IAChBC,EAAO,6BAAyB9rB,EAAzB,UACb,OACE,qBAAKuc,aAAc6O,EAAnB,SACE,eAACW,GAAA,EAAD,CAAUrrB,MAAO,CAACjB,QAAQ,GAAIyB,SAAU2qB,EAAQ,SAClC9H,KAAK,WAAWyE,QAAM,EAACliB,QAASqkB,EAAakB,GAD3D,UAGE,cAACG,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CACE/qB,SAAU2qB,EAAQ,SAClBle,SAAwE,IAA/DA,EAAQmd,WAAW,SAACpgB,GAAD,OAAaA,EAAO,MAAY1K,KAC5DksB,UAAW,EACXC,eAAa,EACbte,WAAY,CAAE,kBAAmBie,OAGrC,cAACM,GAAA,EAAD,CAAcltB,GAAI4sB,EAAS7O,QAASjd,MAX/BA,IAF+B,kBAAoBA,MAkBhE,cAAC+rB,GAAA,EAAD,WAQZ,OACE,eAAC,IAAM3kB,SAAP,WACI,eAACkW,GAAA,EAAD,CAAMC,WAAS,EAAC0D,QAAS,EAAGzD,QAAQ,SAAS5G,WAAW,SAASzM,UAAW6K,EAAQ3V,KAApF,UACE,cAACie,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SAAmBmK,EAAW,qBAAsB9W,KACpD,cAAC8I,GAAA,EAAD,CAAM4D,MAAI,EAAV,SACE,eAAC5D,GAAA,EAAD,CAAMC,WAAS,EAAC8O,UAAU,SAASzV,WAAW,SAA9C,UACE,cAACxQ,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QA1HW,WACrB,IAAM4kB,EAAcnrB,EAAM4oB,SAAS3d,QAAQ,SAACC,EAAMyK,GAChD,OAAGA,EAAIxU,WAAawU,EAAI2T,SAChB,GAAN,mBAAWpe,GAAX,gBAAqByK,KAEd,YAAIzK,KAEZ,IACGkgB,EAAeprB,EAAM4oB,SAAS3d,QAAQ,SAACC,EAAMyK,GACjD,OAAKA,EAAIxU,UAAawU,EAAI2T,SAClB,GAAN,mBAAWpe,GAAX,gBAAqByK,KAEd,YAAIzK,KAEZ,IACHgf,EAAQiB,GACRf,EAASgB,IA2GCjqB,SAA0B,IAAhBsT,EAAK3K,OACf,aAAW,iBANb,oBAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QAjHe,WACzB6jB,EAASD,EAAMoC,OAAOlC,IACtBH,EAAQQ,EAAIjW,EAAM4V,IAClBJ,EAAWS,EAAI9c,EAASyc,KA+GdlpB,SAAiC,IAAvBkpB,EAAYvgB,OACtB,aAAW,sBANb,eAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QArHc,WACxB2jB,EAAQzV,EAAK8X,OAAOhC,IACpBH,EAASM,EAAIP,EAAOI,IACpBN,EAAWS,EAAI9c,EAAS2c,KAmHdppB,SAAkC,IAAxBopB,EAAazgB,OACvB,aAAW,qBANb,eAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QAzHU,WACpB,IAAM4kB,EAAcnrB,EAAM4oB,SAAS3d,QAAQ,SAACC,EAAMyK,GAChD,OAAKA,EAAIxU,UAAYwU,EAAI2T,SAGhB,YAAIpe,GAFL,GAAN,mBAAWA,GAAX,gBAAqByK,OAItB,IACGyV,EAAeprB,EAAM4oB,SAAS3d,QAAQ,SAACC,EAAMyK,GACjD,OAAIA,EAAIxU,UAAYwU,EAAI2T,SAChB,GAAN,mBAAWpe,GAAX,gBAAqByK,KAEd,YAAIzK,KAEZ,IACHgf,EAAQiB,GACRf,EAASgB,IA0GCjqB,SAA2B,IAAjBgpB,EAAMrgB,OAChB,aAAW,gBANb,yBAYJ,cAACyT,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SAAmBmK,EAAW,oBAAqBpB,QAErD,cAAC5M,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAAS5G,WAAW,aAAazM,UAAW6K,EAAQ3V,KAA5E,SACE,cAACie,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,GAAIzgB,MAAO,CAACuF,OAAQ,OAAQrE,aAAc,QAAzD,cAC6BpB,IAA1B+pB,EAAc,KACb,eAACzgB,EAAA,EAAD,CAAOK,UAAW6K,EAAQsT,MAAO5nB,MAAO,CAACC,MAAO,QAASoJ,UAAW,EAApE,UAEI,cAACyhB,GAAA,EAAD,CAAYrhB,UAAW6K,EAAQyW,WAC7BnkB,MACE,eAAC,IAAMF,SAAP,WACGmjB,EAAc,IACf,cAACnkB,EAAA,EAAD,CAAQnF,QAAQ,YAAYoF,MAAM,UAAU0Q,KAAM,gBAAkBhX,EAAMynB,aAAe,aAAe+C,EAAc,IACpH7pB,MAAO,CAACoP,WAAY,OAAQd,MAAO,SAAW/O,OAAO,SADvD,gCAMN,cAACyrB,GAAA,EAAD,CAAS1W,QAAS,CAAC3V,KAAM2V,EAAQyT,WACH,KAA7B8B,EAAc,OACb,eAAC1b,EAAA,EAAD,CAAY5N,QAAQ,QAAQylB,MAAM,OAAOxc,UAAU,MAC/CxJ,MAAO,CAAE,WAAc,QAD3B,UACoC,8BAAI6pB,EAAc,SAAgB,oBAAwB,gBAA1D,OAAiFA,EAAc,UAEhI,KACL,uBACA,eAAC1b,EAAA,EAAD,CAAa6X,MAAM,OAAOxc,UAAU,MAC9BxJ,MAAO,CAAE,WAAc,QAD7B,UACsC,mDAA0B6pB,EAAc,YAE5E,eAAC1b,EAAA,EAAD,CAAa6X,MAAM,OAAOxc,UAAU,MAChCxJ,MAAO,CAAE,WAAc,QAD3B,UACoC,0DAAiC6pB,EAAc,YAAkB,OAAQ,WAE7G,eAAC1b,EAAA,EAAD,CAAa6X,MAAM,OAAOxc,UAAU,MAChCxJ,MAAO,CAAE,WAAc,QAD3B,UACoC,8CAAqB6pB,EAAc,sBAOnF,cAAC7E,GAAD,CAAgCC,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SAAU7lB,EAAM6lB,SAAUC,SAzFnF,WACf9lB,EAAM8lB,SAASqE,S,oBCpSbnE,GAAoB5V,aAAH,2sBAwBhByO,GAAyBzO,aAAH,udAuBtB,SAASoc,GAAgBxsB,GAC5B,IAAM8D,EAAKC,YAAe/B,GAC1B,EAAoCF,IAAMkC,SAAS,IAAnD,mBAAOyoB,EAAP,KAAmBC,EAAnB,KACA,EAAgD5qB,IAAMkC,SAAS,IAA/D,mBAAOmb,EAAP,KAAyBC,EAAzB,KACA,EAA2BpO,aAASgV,GAAmB,CAACtT,UAAU,CAACwW,YAAalpB,EAAMwnB,aAAN,aAAoC7H,aAAc7b,EAAG3B,KAAKyd,sBACtI1O,YAAa,SAAA1O,GACT,IAAMmqB,EAAWnqB,EAAKkV,UAAUnN,KAAK,SAACqiB,GAClC,QAAsBnsB,IAAnBT,EAAMymB,SAAuB,CAC5B5jB,QAAQC,IAAI9C,EAAMymB,UAClB,IAAI,IAAIsB,EAAI,EAAGA,EAAI/nB,EAAMymB,SAAS3c,OAAQie,IACtC,GAAG/nB,EAAMymB,SAASsB,GAAf,OAA8B6E,EAAG7sB,KAAK,CAErC,IAAM8f,EAAa7f,EAAMymB,SAASsB,GAAf,oBAAyCxd,KAAK,SAACqf,GAC9D,GAAwB,eAArBA,EAAEtW,eAAgC,CACjC,IAAMuZ,EAAWhoB,KAAK2E,MAAMogB,EAAEhS,eACxBkV,EAAalD,EAAE3pB,MAAMsK,KAAK,SAACwd,GAG7B,IAAMgF,EAAgBF,EAASlC,MAAM,SAAAnZ,GAAC,OAAIA,EAAC,OAAauW,EAAC,QACzD,YAAqBtnB,IAAlBssB,EACQ,uCAAIA,GAAkBhF,GAA7B,IAAgC,aAA4B,KAAZA,EAAE9nB,QAE/C,2BAAI8nB,GAAX,IAAc,cAAgB,OAG5BiF,EAAQH,EAAS5hB,QAAQ,SAACC,EAAMyK,GAElC,OAAGzK,EAAK6f,WAAW,SAAAvZ,GAAC,OAAIA,EAAC,OAAamE,EAAG,SAAa,EAC3C,YAAIzK,GAET,GAAN,mBAAWA,GAAX,4BAAqByK,GAArB,IAA0BuF,cAAc,EAAO,IAAoB,MAAbvF,EAAI5V,KAAe,GAAI4V,EAAI5V,KAAME,MAAO0V,EAAIiC,oBALxF,YAMPkV,IACP,OAAO,2BAAIlD,GAAX,IAAc3pB,MAAO+sB,IAGzB,OAAOpD,KAIX,OADA/J,EAAWK,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBACjD,2BAAIuZ,GAAX,IAAe,SAAY5sB,EAAMymB,SAASsB,GAAf,SAA+BpQ,oBAAqBkI,KAK3F,IAAMA,EAAa+M,EAAGjV,oBAAoBpN,KAAK,SAAC6I,GAC5C,GAA2B,KAAxBA,EAAM0E,cAAqB,CAC1B,IAAMiI,EAAS,IAAIC,GAAQ5M,EAAM0E,eAAemI,MAChD,OAAO,2BAAI7M,GAAX,IAAkBwE,cAAemI,EAAQ9f,MAAO8f,IAC9C,GAA2B,KAAxB3M,EAAMwE,cAAqB,CAChC,GAA4B,cAAzBxE,EAAME,eACL,OAAO,2BAAIF,GAAX,IAAkBnT,MAAOmT,EAAMwE,cAAc7B,MAAM,MAAM,KACvD,GAA4B,eAAzB3C,EAAME,eAAgC,CAC3C,IACI2H,EADMpW,KAAK2E,MAAM4J,EAAMwE,eACT3M,QAAQ,SAACC,EAAMgF,GAC7B,MAAM,GAAN,mBAAWhF,GAAX,4BAAqBgF,GAArB,IAAyBjQ,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,KAAMmb,aAAchL,EAAGgL,mBACxG,IACH,OAAO,2BAAI9H,GAAX,IAAkBnT,MAAOgb,IACvB,GAA4B,SAAzB7H,EAAME,eAA0B,CACrC,IAAImH,EAAU,IAAIlP,KAIlB,MAH2B,KAAxB6H,EAAMwE,eACL6C,EAAQC,QAAQD,EAAQE,UAAYC,SAASxH,EAAMwE,gBAEhD,2BAAIxE,GAAX,IAAkBnT,MAAOwa,EAAQM,cAAcC,MAAM,EAAE,MAEvD,OAAO,2BAAI5H,GAAX,IAAkBnT,MAAOmT,EAAMwE,gBAGnC,OAAO,2BAAIxE,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,mBAK9D,OADAiI,EAAWK,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBACjD,2BAAIuZ,GAAX,IAAe,UAAY,EAAOjV,oBAAqBkI,OAE3D8M,EAASzM,MAAK,SAACC,EAAGC,GAAJ,OAAWA,EAAErgB,KAAKsgB,cAAcF,EAAEpgB,SAEhD2sB,EAAcC,IAElB1b,YAAa,aA1ETiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MA8HX8sB,EAAoB,SAAC3L,EAAQC,EAAethB,EAAOE,GACrD,IAAM+sB,EAAYT,EAAWliB,KAAK,SAAC4iB,GAC/B,GAAGA,EAAMptB,OAASuhB,EAAO,CACrB,IAAME,EAAW2L,EAAMxV,oBAAoBpN,KAAK,SAAC6I,GAC7C,OAAIA,EAAMrT,OAASwhB,EACR,2BAAInO,GAAX,IAAkBjT,QAAOF,UAEtBmT,KAEX,OAAO,2BAAI+Z,GAAX,IAAkBxV,oBAAqB6J,IAE3C,OAAO2L,KAEXT,EAAcQ,IAElB,EAA4B3M,aAAa1B,GAAwB,CAC7D3N,YAAa,SAAC1O,GACZ,IAAMge,EAAUhe,EAAKie,4BAA4BlW,KAAK,SAACoL,GACrD,IAAI+K,EAAI,2BAAO/K,GAAQA,EAAIgL,oBAI3B,MAH2B,eAAxBD,EAAKpN,gBAA2D,UAAxBoN,EAAKpN,iBAC5CoN,EAAI,MAAY7b,KAAK2E,MAAMkX,EAAI,QAE5BA,KAETF,EAAQN,MAAM,SAACC,EAAGC,GAAJ,OAAUD,EAAEpgB,KAAOqgB,EAAErgB,MAAQ,EAAI,KAC/C,IAAMmtB,EAAYT,EAAWliB,KAAK,SAAC6iB,GACjC,OAAG5M,EAAQ,GAAG9I,UAAU3X,OAASqtB,EAAMrtB,KAC5B,2BAAIqtB,GAAX,IAAkBzV,oBAAqB6I,IAEpC4M,KAEXV,EAAcQ,IAEdzb,QAAS,SAACjP,GACRW,EAAahD,MAAM,kCAAoCqC,GACvDK,QAAQC,IAAIN,IAEdyO,YAAa,aAtBV2P,EAAP,oBAqCE,OAAI1N,EACK,8BAAK,cAACwT,GAAA,EAAD,MAETvmB,GACH0C,QAAQ1C,MAAMA,GACP,0CAGP,gCACI,cAAC2O,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,mBAAmBgL,UAAU,MAClExJ,MAAO,CAAC,WAAc,QAD1B,gCAKI8rB,EAAWliB,KAAK,SAACqiB,GAAD,OAChB,eAAC,IAAMvlB,SAAP,WACI,cAACgmB,GAAA,EAAD,CACEptB,MAAM,MACNqtB,QACA,cAAC3f,EAAA,EAAD,CACEC,QAASgf,EAAGtD,SACZzpB,SAAU,SAAAC,GAAG,OAlFP,SAACA,EAAK8sB,GAC5B,IAAMM,EAAYT,EAAWliB,KAAK,SAAC6iB,GAC/B,OAAGR,EAAG7sB,OAASqtB,EAAMrtB,KACV,2BAAIqtB,GAAX,IAAkB9D,UAAW8D,EAAM9D,WAEhC8D,KAEXV,EAAcQ,GA2EmBK,CAAkBztB,EAAK8sB,IACxC9e,WAAY,CAAE,aAAc,oBAC5B/N,KAAK,WAEPiB,MAAO4rB,EAAG7sB,KACVytB,eAAe,MACf7sB,MAAO,CAAC6E,QAAS,YAElBonB,EAAGtM,6BAA6BxW,OAAS,GAAK8iB,EAAGtD,SAC9C,eAACzL,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,UACA,cAACygB,GAAA,EAAD,0CACI,eAACvD,GAAA,EAAD,CACEnd,MAAO,CAACC,MAAO,OAAQiB,aAAc,QACrC5B,MAAOkf,EACPne,MAAM,8BACNnB,SAAU,SAAAC,GAAG,OAjDH,SAACA,EAAK8sB,GAEtC,GADAxN,EAAoBtf,EAAII,OAAOD,OACP,KAArBH,EAAII,OAAOD,MAAa,CACvB,IAAMitB,EAAYT,EAAWliB,KAAK,SAAC6iB,GAI/B,OAHGR,EAAG7sB,OAASqtB,EAAMrtB,OACjBqtB,EAAMzV,oBAAsB,IAEzByV,KAEXV,EAAcQ,GACdtM,EAAkB,CAAClO,UAAW,CAAC3S,KAAMD,EAAII,OAAOD,MAAO0f,aAAc7b,EAAG3B,KAAKyd,yBAuC1C6N,CAA4B3tB,EAAK8sB,IAJpD,UAME,cAACnO,GAAA,EAAD,CAAUxe,MAAM,GAAhB,0BAEE2sB,EAAGtM,6BAA6B/V,KAAI,SAACgQ,EAAKyD,GAAN,OAChC,cAACS,GAAA,EAAD,CAAoCxe,MAAOsa,EAAIuG,cAA/C,SAA+DvG,EAAIuG,eAApD,gBAAkB9C,YAK5C,KACL,cAAClP,EAAA,EAAD,CAAY5N,QAAQ,QAAQylB,MAAM,OAAOxnB,GAAG,mBAAmBgL,UAAU,MACrExJ,MAAO,CAAC,WAAc,QAD1B,SAEOisB,EAAGvZ,aAF0E,YAAcuZ,EAAGztB,IAInGytB,EAAGtD,SACD,cAAC3K,GAAD,yBAAkErF,qBAAqB,GAAWsT,GAAlG,IAAsG/sB,SAAUotB,IAApE,aAAeL,EAAGztB,IAC3D,OAtCU,gBAAkBytB,EAAGztB,OA2C1D,uBACY,cAACwmB,GAAD,CAAgCC,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SA3H7D,WACb7lB,EAAM6lB,YA0HwFC,SAjKjF,WACb,IAAI4H,GAAW,EACXC,GAAa,EACXC,EAAanB,EAAWxhB,QAAQ,SAACC,EAAM0hB,GACzC,GAAGA,EAAGtD,SAAS,CACX,IAAMxB,EAAS8E,EAAGjV,oBAAoBpN,KAAK,SAACwd,GACxC,GAAwB,eAArBA,EAAEzU,eAAgC,CACjC,IAAMua,EAAS9F,EAAE9nB,MAAM2R,QAAO,SAAAkc,GAAC,MAAgB,KAAZA,EAAE7tB,SACrC,OAAO,2BAAI8nB,GAAX,IAAc9nB,MAAO4tB,IAErB,OAAO,eAAI9F,MAGnB,MAAM,GAAN,mBAAW7c,GAAX,4BAAqB0hB,GAArB,IAAyBjV,oBAAqBmQ,MAE9C,MAAM,GAAN,mBAAW5c,GAAX,gBAAqB0hB,OAE1B,IAYH,GAXAH,EAAWsB,SAAS,SAACnB,GACdA,EAAGtD,WACFqE,GAAa,EACbf,EAAGjV,oBAAoBoW,SAAS,SAAC3a,GAC1BA,EAAMjT,QACLgD,EAAaK,QAAQopB,EAAG7sB,KAAO,gBAAkBqT,EAAMrT,KAAO,eAC9D2tB,GAAW,UAKxBA,EAAS,CAER,IAAIC,EAEA,YADAxqB,EAAaK,QAAQ,0CAGzBxD,EAAM8lB,SAAS8H,OA+Hf,uBAAK,0B,yFC/RXI,GAAqB5d,aAAH,+WAgBlBqD,GAAaC,cAAW,SAAArE,GAAK,MAAK,CACpC/P,KAAK,gBACA+P,EAAM4e,YAAYC,GAAG,MAAQ,CAC1BC,SAAU,qBAGlBC,WAAY,CACRC,WAAY,QAEhBC,WAAY,CACR5uB,QAAS,oBAEb6uB,MAAO,CACHxe,WAAY,OACZd,MAAO,SAEX0E,OAAQ,CACJjU,QAAS,UACTkU,UAAW,eACXC,WAAYxE,EAAMyE,YAAYC,OAAO,YAAa,CAC9CC,SAAU3E,EAAMyE,YAAYE,SAASC,YAG7CC,WAAY,CACRN,UAAW,kBAEf4a,SAAU,CACN9uB,QAAS,IAEb+uB,UAAW,CACP9V,SAAU,GACVrS,MAAO,UACPsQ,aAAc,GAElB6R,OAAQ,CACJ/oB,QAAS,EACTgvB,cAAe,YAIjBC,GAAe7sB,IAAM8sB,YAAW,SAAC5uB,EAAO6jB,GAE1C,IAAMxU,EAAQC,eACR2F,EAAUxB,GAAUpE,GAElB1L,EAAkBT,cAAlBS,cACR,EAAgCK,oBAAS,GAAzC,mBAAO6qB,EAAP,KAAiBC,EAAjB,KAUA,OACI,cAAC,IAAD,CAAiBjL,IAAKA,EAAKzZ,UAAW6K,EAAQ3V,KAA9C,SACI,eAAC0W,GAAA,EAAD,CAAMrV,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ7Z,QAAQuM,MAArD,UACI,eAACof,GAAA,EAAD,CAAa9Z,QAAS,CAAE3V,KAAM2V,EAAQqZ,YAAtC,UACI,cAACxf,EAAA,EAAD,CAAY5N,QAAQ,YAAYkJ,UAAW6K,EAAQmZ,WAAnD,wCACA,sBAAKhkB,UAAW6K,EAAQsZ,MAAxB,UACI,cAAClgB,EAAA,EAAD,CACI,aAAW,YACXjE,UAAW4kB,mBAAK/Z,EAAQtB,OAAT,gBAAoBsB,EAAQf,WAAa2a,IACxDtoB,QAjBE,WACtBuoB,GAAaD,IAaG,SAKI,cAAC,KAAD,MAEJ,cAACxgB,EAAA,EAAD,CAAYjE,UAAW6K,EAAQtB,OAAQpN,QAjBrC,WAClB5C,EAAc3D,EAAMb,KAgBJ,SACI,cAAC,KAAD,YAIZ,eAACsP,EAAA,EAAD,CAAUC,GAAImgB,EAAUlgB,QAAQ,OAAOC,eAAa,EAApD,UACI,eAAC7E,EAAA,EAAD,CAAOK,UAAW6K,EAAQuZ,SAA1B,UACI,cAAC1f,EAAA,EAAD,CAAYC,cAAY,EAAxB,sCACA,eAAC1I,EAAA,EAAD,CAAQ+D,UAAW6K,EAAQwT,OAAQwG,UAAQ,EAACjY,KAAMkY,OAAOvpB,SAASwpB,OAAS,oBAAsBnvB,EAAMovB,QAAvG,UACI,cAAC,KAAD,CAAiBhlB,UAAW6K,EAAQwZ,YADxC,qBAKJ,cAAC1kB,EAAA,EAAD,CAAOK,UAAW6K,EAAQuZ,SAA1B,SACI,cAACnoB,EAAA,EAAD,CAAQnF,QAAQ,WAAWoF,MAAM,UAAU0Q,KAAK,gBAAhD,gDAOlBqY,GAAoBvtB,IAAM8sB,YAAW,SAAC5uB,EAAO6jB,GAE/C,IAAMxU,EAAQC,eACR2F,EAAUxB,GAAUpE,GAClB1L,EAAkBT,cAAlBS,cACR,EAAgCK,oBAAS,GAAzC,mBAAO6qB,EAAP,KAAiBC,EAAjB,KAUA,OACI,cAAC,IAAD,CAAiBjL,IAAKA,EAAKzZ,UAAW6K,EAAQ3V,KAA9C,SACI,eAAC0W,GAAA,EAAD,CAAMrV,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ9c,MAAMwP,MAAnD,UACI,eAACof,GAAA,EAAD,CAAa9Z,QAAS,CAAE3V,KAAM2V,EAAQqZ,YAAtC,UACI,cAACxf,EAAA,EAAD,CAAY5N,QAAQ,YAAYkJ,UAAW6K,EAAQmZ,WAAYztB,MAAO,CAAC2F,MAAO,SAA9E,sCACA,sBAAK8D,UAAW6K,EAAQsZ,MAAxB,UACI,cAAClgB,EAAA,EAAD,CACI,aAAW,YACXjE,UAAW4kB,mBAAK/Z,EAAQtB,OAAT,gBAAoBsB,EAAQf,WAAa2a,IACxDtoB,QAjBE,WACtBuoB,GAAaD,IAaG,SAKI,cAAC,KAAD,MAEJ,cAACxgB,EAAA,EAAD,CAAYjE,UAAW6K,EAAQtB,OAAQpN,QAjBrC,WAClB5C,EAAc3D,EAAMb,KAgBJ,SACI,cAAC,KAAD,YAIZ,cAACsP,EAAA,EAAD,CAAUC,GAAImgB,EAAUlgB,QAAQ,OAAOC,eAAa,EAApD,SACI,cAAC7E,EAAA,EAAD,CAAOK,UAAW6K,EAAQuZ,SAA1B,SACKxuB,EAAMwF,oBAOxB,SAAS8pB,GAAgCtvB,GAC5C,MAA8B8B,IAAMkC,UAAW,IAAIuH,MAAOwP,eAA1D,mBAAOwU,EAAP,KACA,GADA,KACiCnY,aAAgB4W,GAAoB,CAACtb,UAAW,CAAC6c,cAA1Erc,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAAOqC,EAAxB,EAAwBA,KAsBxB,OApBA6B,qBAAW,WACPxB,QAAQC,IAAIN,IACR0Q,IAAY/S,GAASqC,GAAQA,EAAKqlB,QAAQ/d,OAAS,EAChB,YAAhCtH,EAAKqlB,QAAQ,GAAG2H,aACfrsB,EAAaO,UACbP,EAAaC,QAAQZ,EAAKqlB,QAAQ,GAAG4H,cAAe,CAACC,SAAS,EAAM7a,QAAS,SAAArU,GAAG,OAAI,cAACmuB,GAAD,CAAcxvB,GAAIqB,EAAK4uB,QAAS5sB,EAAKqlB,QAAQ,GAAG8H,UAAUC,oBACzG,aAAhCptB,EAAKqlB,QAAQ,GAAG2H,cAGe,KAAjChtB,EAAKqlB,QAAQ,GAAGgI,aACf1sB,EAAahD,MAAMqC,EAAKqlB,QAAQ,GAAGgI,aAAc,CAACH,SAAS,EAAM7a,QAAS,SAAArU,GAAG,OAAI,cAAC6uB,GAAD,CAAmBlwB,GAAIqB,EAAKgF,QAAShD,EAAKqlB,QAAQ,GAAGgI,kBAEtI1sB,EAAahD,MAAMqC,EAAKqlB,QAAQ,GAAG4H,cAAe,CAACC,SAAS,EAAM7a,QAAS,SAAArU,GAAG,OAAI,cAAC6uB,GAAD,CAAmBlwB,GAAIqB,EAAKgF,QAAShD,EAAKqlB,QAAQ,GAAG4H,oBAG1ItvB,IACL0C,QAAQC,IAAI3C,GACZgD,EAAahD,MAAM,gCAAkCA,EAAMmF,eAEhE,CAAC4N,EAAS1Q,EAAMrC,IAEhB,KCzLN,I,GAAM2vB,GAAiB1f,aAAH,8KAWd,SAAS2f,GAAW/vB,GACvB,MAAgC8B,IAAMkC,SAAS,IAA/C,mBAAOuU,EAAP,KAAiByX,EAAjB,KACA,EAAsCluB,IAAMkC,SAAS,IAArD,mBAAOqP,EAAP,KAAoB4c,EAApB,KACA,EAAgC7e,aAAY0e,GAAgB,CACxDvN,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KACoB,YAA9BA,EAAK0tB,cAAcje,OAClB9O,EAAaM,KAAK,uCAElBN,EAAahD,MAAMqC,EAAK0tB,cAAc/vB,UAL3CgwB,EAAP,oBASA9rB,qBAAW,WACwC,KAA5CrE,EAAMwnB,aAAa,GAAnB,eACCwI,EAAYhwB,EAAMwnB,aAAa,GAAnB,aAAwC,IAAMxnB,EAAMwnB,aAAa,GAAnB,gBAE1DwI,EAAYhwB,EAAMwnB,aAAa,GAAnB,gBAGjB,CAACxnB,EAAMwnB,eAyCV,OACI,gCACI,cAAC1Y,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,mBAAmBgL,UAAU,MAClExJ,MAAO,CAAC,WAAc,QAD1B,4BAIA,uBACA,cAAC,EAAD,CAAiBS,UAAU,EAAOL,YAAa,WAAYd,MAAOsY,EAAU/W,WAAW,EAAO3B,SA/C7E,SAACE,EAAME,EAAOE,GACnC6vB,EAAY/vB,IA8CkHuF,QAAQ,iBAClI,cAAC,EAAD,CAAiBpE,UAAU,EAAOL,YAAa,cAAed,MAAOoT,EAAa7R,WAAW,EAAO3B,SA7ChF,SAACE,EAAME,EAAOE,GACtC8vB,EAAehwB,IA4CwHuF,QAAQ,iBAC3I,cAACmgB,GAAD,CAAgCC,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SAb7D,WACb7lB,EAAM6lB,YAYwFC,SA3CjF,WACb,IAAMgB,EAAkB9mB,EAAMwnB,aAAa,GAAnB,WAAoCjd,KAAK,SAAC6I,GAC9D,OAAOA,KAELqZ,EAAazsB,EAAMwnB,aAAa,GAAGvc,QAAQ,SAACC,EAAM0hB,GACpD,GAAGA,EAAGtD,SAAS,CACX,IAAMzJ,EAAa+M,EAAGjV,oBAAoB1M,QAAQ,SAACC,EAAMkI,GACrD,GAA4B,eAAzBA,EAAME,eAAgC,CACrC,IAAM8c,EAAehd,EAAMnT,MAAMsK,KAAK,SAACwd,GACnC,MAAO,CAAChoB,KAAMgoB,EAAEhoB,KAAMS,IAAKunB,EAAEvnB,IAAKP,MAAO8nB,EAAE9nB,MAAOua,OAAQuN,EAAEvN,WAEhE,OAAO,2BAAItP,GAAX,mBAAkBkI,EAAMrT,KAAOqwB,IAEnC,OAAO,2BAAIllB,GAAX,mBAAkBkI,EAAMrT,KAAOqT,EAAMnT,UACtC,IACH,MAAM,GAAN,mBAAWiL,GAAX,CAAiB,CAAC,WAAc0hB,EAAG7sB,KAAM,sBAAyB8f,KAEtE,OAAO3U,IACR,IACGmlB,EAAkB,CACpB,YAAerwB,EAAMwnB,aAAa,GAClC,aAAgBxnB,EAAMwnB,aAAa,GAAnB,aAChB,SAAYjP,EACZ,IAAOlF,EACP,SAAYrT,EAAMwnB,aAAa,GAC/B,iBAAoBV,EACpB,YAAe2F,GAEnB0D,EAAsB,CAACzd,UAAW,CAACmV,QAAShjB,KAAKC,UAAUurB,MAAoBhrB,OAAO,SAACzG,GAAOiE,QAAQC,IAAIlE,SAgBtG,uBAAK,uBACL,cAAC0wB,GAAD,OC5EL,SAASgB,GAActwB,GAC1B,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAO6jB,EAAP,KAAgB0I,EAAhB,KACA,EAAoCzuB,IAAMkC,SAAS,GAAnD,mBAAOwsB,EAAP,KAAmBC,EAAnB,KAiBQC,EAAiB,SAACC,GACtBJ,EAAW,2BAAI1I,GAAL,mBAAe2I,EAAaG,KACtCC,KAEIC,EAAa,WACjBC,KAGIC,EA9BD,CAAC,mBAAoB,eAAgB,kBAAmB,qBAAsB,SAgC7EH,EAAa,WACjBH,GAAc,SAACO,GAAD,OAAoBA,EAAiB,MAG/CF,EAAa,WACjBL,GAAc,SAACO,GAAD,OAAoBA,EAAiB,MAGvD,OACI,sBAAKrwB,MAAO,CAACuF,OAAQ,cAArB,UACI,cAAC+qB,GAAA,EAAD,CAAST,WAAYA,EAAYU,kBAAgB,EAAjD,SACKH,EAAMxmB,KAAI,SAACvJ,EAAOyJ,GAAR,OACT,cAAC0mB,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UAAYpwB,KADHA,QAtCF,SAACqwB,GAClB,OAAQA,GACN,KAAK,EACH,OAAO,cAACpL,GAAD,CAAeuB,aAAcK,EAASpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAMG,MAAM,IACxI,KAAK,EACH,OAAO,cAACgB,GAAD,CAAwBS,aAAcK,EAAQ,GAAIpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IACrJ,KAAK,EACH,OAAO,cAAC4C,GAAD,CAAqBnB,aAAcK,EAAQ,GAAIpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IAClJ,KAAK,EACH,OAAO,cAACyG,GAAD,CAAiBhF,aAAcK,EAAQ,GAAIpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IAC9I,KAAK,EACH,OAAO,cAACgK,GAAD,CAAYvI,aAAcK,EAAShC,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IACtF,QACE,MAAO,gBA8BRuL,CAAed,MCpDrB,SAAS7K,GAA+B3lB,GAE3C,OACI,gCACI,cAACqG,EAAA,EAAD,CACIlF,SAAUnB,EAAM4lB,MAChBtf,MAAM,UACNC,QAASvG,EAAM6lB,SAHnB,kBAOE,cAACxf,EAAA,EAAD,CACEnF,QAAQ,YACRoF,MAAM,UACNC,QAASvG,EAAM8lB,SACf3kB,SAAUnB,EAAMuxB,YAJlB,SAMGvxB,EAAM+lB,KAAO,iBAAmB,YCdjD,I,GAAMC,GAAoB5V,aAAH,sKAShB,SAAS6V,GAAcjmB,GAC1B,MAAoB8B,IAAMkC,SAAS,IAAnC,mBAAOkiB,EAAP,KAAWC,EAAX,KACA,EAAkCrkB,IAAMkC,SAAS,IAAjD,mBAAOoiB,EAAP,KAAkBC,EAAlB,KA8BA,GA7BoBrV,aAASgV,GAAmB,CAAC/U,YAAa,eAC9DC,YAAa,SAAC1O,GACV,IASM8jB,EATgB9jB,EAAKwQ,YAAY/H,QAAO,SAACsb,EAAgBvT,GAC3D,IAAMwT,EAAOxT,EAAY8C,aAAaC,MAAM,KAAK9K,QAAQ,SAACC,EAAMgb,GACxD,OAAIK,EAAezL,SAASoL,GAGrBhb,EAFG,GAAN,mBAAWA,GAAX,CAAiBgb,MAGtB,IACP,MAAM,GAAN,mBAAWK,GAAX,YAA8BC,MAC/B,IACkCtG,OACrCrd,QAAQC,IAAI9C,EAAMymB,eACIhmB,IAAnBT,EAAMymB,SACLN,EAAMnmB,EAAMymB,UAED,KAAPP,GACJC,EAAMG,EAAc,IAExBD,EAAaC,GACe,IAAzBA,EAAcxc,QACb3G,EAAaK,QAAQ,uFAG7BiO,QAAS,SAACjP,GACNK,QAAQ1C,MAAMqC,MAzBV0Q,QA8BP,OAAO,8BAAK,cAACwT,GAAA,EAAD,MAYb,OACI,gCACA,cAAC5X,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,eAAegL,UAAU,MAC9DxJ,MAAO,CAAE,WAAc,QAD3B,4CADA,IAIc,uBAEd,eAACkd,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOimB,EACPrmB,SAAU,SAAAC,GAAG,OAAIqmB,EAAMrmB,EAAII,OAAOD,QAHpC,SAMImmB,EAAU7b,KAAI,SAACgQ,GAAD,OACV,wBAA4Bta,MAAOsa,EAAnC,SAAyCA,GAA5B,QAAUA,QAI/B,cAACqM,GAAA,EAAD,yCACU,uBAAK,uBACnB,cAAC,GAAD,CAAgChB,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SAxBzD,WACb7lB,EAAM6lB,YAuBoFC,SA/B7E,WACW,IAArBM,EAAUtc,OAIb9J,EAAM8lB,SAASI,GAHX/iB,EAAaK,QAAQ,4FCtC1B,SAAS4V,GAAT,GAAqK,IAApIvZ,EAAmI,EAAnIA,SAAUyT,EAAyH,EAAzHA,eAAgBsE,EAAyG,EAAzGA,cAAe7X,EAA0F,EAA1FA,KAAMqB,EAAoF,EAApFA,SAAUoS,EAA0E,EAA1EA,eAAgBrU,EAA0D,EAA1DA,GAAIkU,EAAsD,EAAtDA,YAAoBgG,EAAkC,EAAzCpZ,MAAoBqZ,EAAqB,EAArBA,oBAClJ,EAA0BxX,IAAMkC,SAAS,IAAzC,mBAAO/D,EAAP,KAAcsZ,EAAd,KACMlK,EAAQC,eACd,EAAkCxN,IAAMkC,SAAS,IAAjD,mBAAOwV,EAAP,KAAkBC,EAAlB,KACA,EAAsC3X,IAAMkC,SAAS,IAArD,mBAAO0V,EAAP,KAAoBC,EAApB,KACA,EAAkD7X,IAAMkC,SAAS,IAAjE,mBAAO4V,EAAP,KAA0BC,EAA1B,KACA,EAA8D/X,IAAMkC,SAAS,IAA7E,mBAAO8V,EAAP,KAAgCC,EAAhC,KACA,EAA0CjY,IAAMkC,SAAS,IAAzD,mBAAOgW,EAAP,KAAsBC,EAAtB,KACA,EAAkCnY,IAAMkC,SAAS,IAAIuH,MAArD,mBAAO2O,EAAP,KAAkBC,EAAlB,KACMC,EAAmB,SAACC,GACtB,IAAMC,EAAYD,EAAK9P,KAAK,SAACgQ,GACzB,OAAGjB,EACO,CACFkB,OAAqB,MAAbD,EAAIxa,KACZS,IAAK+Z,EAAI/Z,IACTT,KAAMwa,EAAIxa,KACVE,MAAOsa,EAAIta,OAGZ,gBAAEsa,EAAI/Z,IAAM+Z,EAAIta,UAE3BJ,EAASE,EAAMua,GAAW,IAE9BjW,qBAAW,WACP,GAAsB,cAAnBiP,EAA+B,CAC9B,GAAGsE,EAAc,CACb,IAAMtU,EAAUsU,EAAc7B,MAAM,MACpCwD,EAASjW,EAAQ,IACjB2W,EAAiB3W,GAEF,KAAhB+V,QAAsC5Y,IAAhB4Y,IACrBE,EAASF,GACTxZ,EAASE,EAAMsZ,EAAa,UAE9B,GAAsB,SAAnB/F,EAA0B,CAC/B,GAAqB,KAAlBsE,EAAqB,CACpB,IAAI6C,EAAU,IAAIlP,KAClBkP,EAAQC,QAAQD,EAAQE,UAAYC,SAAShD,IAC7CiD,GAAaJ,GACblB,GAAU,GAEK,KAAhBF,QAAsC5Y,IAAhB4Y,GAA6BA,EAAYyB,SAAS,OACvEjY,QAAQC,IAAI,sBAAuBuW,GACnCc,EAAa,IAAI5O,KAAK8N,IACtBE,GAAU,GACV1Z,EAASE,EAAO,IAAIwL,KAAK8N,GAAc0B,cAAcC,MAAM,EAAE,IAAK,UAEpE,GAAsB,eAAnB1H,EAAiC,CACtC,IAAMhQ,EAAUuB,KAAK2E,MAAMoO,GAC3B+B,EAAerW,GACf,IAAI2X,EAAU3X,EAAQ2H,QAAQ,SAACC,EAAMgF,GAEjC,OAAGA,EAAGgL,aACI,GAAN,mBAAWhQ,GAAX,4BAAqBgF,GAArB,IAAyBjQ,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,SAEzE,YAAImL,KAEhB,IACHkP,EAAiBa,GACjBxB,EAAawB,GACb,IAAIE,EAA2B7X,EAAQ2H,QAAQ,SAACC,EAAMgF,GAGlD,IAAMkL,EAAQH,EAAQhQ,QAAQ,SAACoQ,EAAU1F,GACrC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GACH,OAAe,IAAZnL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,4BAAqBgF,GAArB,IAAyBjQ,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,SAEzE,YAAImL,KAEhB,IACH2O,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,IAErC,KAAhB9B,QAAsC5Y,IAAhB4Y,GAAoD,kBAAhBA,IACzDI,EAAaJ,GACbe,EAAiBf,cAIA5Y,IAAlBmX,GACC2B,EAAS3B,GAEM,KAAhByB,QAAsC5Y,IAAhB4Y,IACrBE,EAASF,GACTxZ,EAASE,EAAMsZ,EAAa,OAIrC,CAACzB,EAAetE,EAAgBvT,IAEnC,IAAMyb,EAAgB,SAAC1b,GACnByZ,EAASzZ,EAAII,OAAOD,OACpBJ,EAASE,EAAMD,EAAII,OAAOD,OAAO,IAE/Bwb,GAAe,SAAC1b,EAAME,EAAOE,GAC/BoZ,EAAStZ,GACTJ,EAASE,EAAME,EAAOE,IAEpBub,GAAsB,SAACC,GACzB,OAAIva,GAA+B,KAAnBoS,GAEY,KAAnBA,GAAoC,KAAXmI,KADtBC,OAAOpI,GAAgBqI,KAAKF,IA6BtCG,GAAkB,WAEpB,IAAMC,EAASjC,EACfL,EAAa,GAAD,mBAAKD,GAAL,CAAgBuC,KAE5B,IAAIZ,EAA2BvB,EAAkB3O,QAAQ,SAACC,EAAMgF,GAG5D,IAAIkL,EAAQ5B,EAAUvO,QAAQ,SAACoQ,EAAU1F,GACrC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GAEH,OADGU,EAAOhc,OAASmQ,EAAGnQ,OAAMqb,GAAS,IACtB,IAAZlL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,gBAAqBgF,KAEd,YAAIhF,KAEhB,IACHkP,EAAiBe,GACjBtB,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,KA+BtDN,GAAe,SAACzP,GAClB+O,EAAa/O,GACbvL,EAASE,EAAMqL,EAAK2P,cAAcC,MAAM,EAAE,IAAK,KAgFnD,GAA8ClZ,IAAMkC,SAAS,MAA7D,qBAAOmY,GAAP,MAAwBC,GAAxB,MACMC,GAAkBC,QAAQH,IAI1BI,GAAqB,WACvBH,GAAmB,OAGvB,OACQ,eAAC1V,EAAA,EAAD,WACI,eAACC,EAAA,EAAD,WACI,cAACmI,EAAA,EAAD,CAAY,gBAAc,OAAO0N,aAVvB,SAACjc,GACvB6b,GAAmB7b,EAAMkc,gBASqDC,aAAcH,GAC5E,YAAWF,GAAkB,YAAcld,EAAK,eAAYsB,EADhE,SAES4S,IAET,cAACsJ,GAAA,EAAD,CAASxd,GAAI,YAAcA,EAAK,UAAWiJ,KAAMiU,GAAiBO,SAAUT,GACxEhG,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBwG,gBAAiB,CACbzG,SAAU,MACVC,WAAY,SAEhBrO,QAASuU,GACTO,qBAAmB,EACnB9S,UAAW,EACXrJ,MAAO,CAACoc,cAAe,QACvBC,WAAY,CAACrc,MAAO,CAACjB,QAAS,OAAQiI,OAAQ,MAAO8H,gBAAwC,SAAvBJ,EAAM4N,QAAQxb,KAAkB4N,EAAM4N,QAAQC,QAAQC,KAAO9N,EAAM4N,QAAQC,QAAQE,MAAO9W,MAAO,SAAUpF,QAAS,YAb9L,SAeI,cAAC4N,EAAA,EAAD,UAAa/O,EAAK+J,OAAS,EAAI/J,EAAO,wBAG9C,cAAC4G,EAAA,EAAD,UAhHe,WACvB,OAAO2M,GACH,IAAK,OACD,OACI,cAAC,KAAD,CAAyB+J,MAAOC,KAAhC,SACI,cAACC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,aAAxB,SACI,cAAC,KAAD,CACAC,gBAAc,EACdxc,QAAQ,SACRyc,OAAO,aACPhW,OAAO,SACP1H,MAAOia,EACPra,SAAUgb,GACV+C,oBAAqB,CACjB,aAAc,qBAMlC,IAAK,YACD,OACI,cAACC,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOA,EACPJ,SAAU2b,EAHZ,SAMIxB,EAAczP,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAAkC/d,MAAOsa,EAAzC,SAA+CA,GAAlC,gBAAkByD,UAMnD,IAAK,aACD,OACI,eAAC,IAAM3W,SAAP,WACKmS,EAAUjP,KAAK,SAACgQ,EAAKyD,GAAN,OACZ,gCACI,eAAC3P,EAAA,EAAD,CAAY9H,QAAS,SAAC3H,IAzE1B,SAACof,GACrB,IAAMjC,EAASvC,EAAUwE,GACnBC,EAAYzE,EAAU5H,QAAQ,SAAC2I,EAAK9P,GACtC,OAAGuT,IAAMvT,KAGbgP,EAAawE,GAEb,IAAI9C,EAA2BzB,EAAYzO,QAAQ,SAACC,EAAMgF,GAGtD,IAAIkL,EAAQ6C,EAAUhT,QAAQ,SAACoQ,EAAU1F,GACrC,OAAGA,EAAI5V,OAASmQ,EAAGnQ,KAAasb,EAAW,EACpCA,IACR,GAEH,OADGU,EAAOhc,OAASmQ,EAAGnQ,OAAMqb,GAAS,IACtB,IAAZlL,EAAGoL,KAAcpL,EAAGoL,IAAMF,EACnB,GAAN,mBAAWlQ,GAAX,4BAAqBgF,GAArB,IAAyBjQ,MAAOiQ,EAAG0H,cAAepX,IAAiB,MAAZ0P,EAAGnQ,KAAe,GAAImQ,EAAGnQ,SAEzE,YAAImL,KAEhB,IACHkP,EAAiBe,GACjBtB,EAAqBsB,GACjBA,EAAyBrR,OAAS,GAClCiQ,EAA2BoB,EAAyB,IAgDH+C,CAAgBF,IAA7C,UAAkD,cAAC,KAAD,CAAYrd,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,QAAjG,OACc,MAAb4K,EAAIxa,KAEG,cAACoe,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAM,OAAQwd,eAAgB,cAAC/X,EAAA,EAAD,CAAQlF,UAAQ,EAAhB,iBAA+ByF,KAAK,QAAQ3G,MAAOsa,EAAI/Z,IAAKX,SAAU,SAACjB,GAAD,OAhH/H,SAACkB,EAAK2K,GAC1B,IAAM4T,EAAU7E,EAAUjP,KAAK,SAAC2F,EAAI8N,GAChC,OAAGA,IAAMvT,EACE,2BAAIyF,GAAX,IAAe1P,IAAKV,EAAII,OAAOD,QAExB,eAAIiQ,MAGnBkK,EAAiBiE,GACjB5E,EAAa4E,GAuG6IC,CAAgB1f,EAAGof,MAE7I,cAACG,GAAA,EAAD,CAAOjd,QAAQ,WAAW0F,KAAK,QAAQjG,MAAO,CAACC,MAAM,OAAQwd,eAAgB,cAAC/X,EAAA,EAAD,CAAQlF,UAAQ,EAAhB,iBAA+BlB,MAAOsa,EAAI/Z,MAG/H,cAAC2d,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAM,OAAQwd,eAAgB,cAAC/X,EAAA,EAAD,CAAQlF,UAAQ,EAAhB,mBAAiCyF,KAAK,QAAQ3G,MAAOsa,EAAIta,MAAOJ,SAAU,SAACjB,GAAD,OAhI3H,SAACkB,EAAKya,GAC1B,IAAM8D,EAAU7E,EAAUjP,KAAK,SAAC2F,EAAI8N,GAChC,OAAGA,IAAMzD,EACE,2BAAIrK,GAAX,IAAejQ,MAAOH,EAAII,OAAOD,QAE1B,eAAIiQ,MAGnBkK,EAAiBiE,GACjB5E,EAAa4E,GAuHyIE,CAAgB3f,EAAGof,QAT3I,UAAYA,MAazBpE,EAAkB9P,OAAS,EACxB,gCACI,eAACuE,EAAA,EAAD,CAAY9H,QAASuV,GAArB,cAAuC,cAAC,KAAD,CAAenb,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,QAA3F,OACA,cAACmO,GAAA,EAAD,CAAQlX,KAAK,QAAQ3G,MAAO6Z,EAAyBja,SAAU,SAACjB,GAAD,OAAOmb,EAA2Bnb,EAAEsB,OAAOD,QAA1G,SACK2Z,EAAkBrP,KAAK,SAACiU,EAAWR,GAAZ,OACpB,cAACS,GAAA,EAAD,CAAyCxe,MAAOue,EAAhD,SAA+E,MAAnBA,EAAUze,KAAe,aAAcye,EAAUze,MAA9F,YAAcA,EAAO,aAK/C,QAIjB,IAAK,SACD,OACI,cAAC,EAAD,CAAiBqB,SAAUA,EAAUnB,MAAOA,EAAOuB,WAAW,EAC1D3B,SAAU4b,GAAcjW,QAAQ,eAAezF,KAAMA,EACrDK,SAAUsb,GAAqB9Z,UAAW,eAAiB4R,IAGxE,QACC,OAAO,MAsCEkL,OAzBM,aAAevf,GC7RnC,SAAS0nB,GAAkC7mB,GAE9C,OACI,eAACkK,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,UACI,cAAC0E,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,gBAAgBgL,UAAU,MACnExJ,MAAO,CAAC,QAAW,eAAgB,MAAS,OAAQ,WAAc,QADlE,8BAIA,eAAC0J,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA3F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,8BACA,cAACA,EAAA,EAAD,yBAGR,cAAC+D,EAAA,EAAD,UACC1K,EAAM8mB,gBAAgBvc,KAAK,SAAC2F,GAAD,OACxB,cAAC,GAAD,aAA2DrQ,SAAUG,EAAMH,UAAcqQ,GAA5D,qBAAuBA,EAAG/Q,eCpB3E,I,GAAM6mB,GAAoB5V,aAAH,+cAoBhB,SAAS2W,GAAuB/mB,GACnC,MAAsD8B,IAAMkC,SAAS,IAArE,mBAAOgjB,EAAP,KAA4BC,EAA5B,KACA,EAA0DnlB,IAAMkC,SAAS,GAAzE,mBAAOwtB,EAAP,KAA8BC,EAA9B,KACA,EAA0C3vB,IAAMkC,SAAS,IAAzD,mBAAOkjB,EAAP,KAAsBC,EAAtB,KACA,EAAkErlB,IAAMkC,SAAS,IAAjF,mBAAOsjB,EAAP,KAA8BC,EAA9B,KACA,EAAiCvW,aAASgV,GAAmB,CAACtT,UAAU,CAACwT,GAAI,IAAMlmB,EAAMwnB,aAAe,KACpGtW,YAAa,SAAA1O,GACT,GAAGA,EAAKwQ,YAAYlJ,OAAS,EACzB,QAAsBrJ,IAAnBT,EAAMymB,UAA0BzmB,EAAMymB,SAASP,KAAOlmB,EAAMwnB,aAAa,CAExEP,EAAuBjnB,EAAMymB,SAASgB,cACtCgK,EAAyBzxB,EAAMymB,SAASiL,iBACxCvK,EAAiBnnB,EAAMymB,SAASiB,gBAChC,IAAME,EAAkBplB,EAAKwQ,YAAY/H,QAAQ,SAACC,EAAM2c,GACpD,GAAGA,EAAQjS,QAAU5V,EAAMymB,SAASgB,aAAa,CAC7C,IAAMK,EAASD,EAAQ5U,gBAAgB1I,KAAK,SAAC6I,GACzC,IAAI,IAAI2U,EAAI,EAAGA,EAAI/nB,EAAMymB,SAAS5G,WAAW/V,OAAQie,IACjD,GAAG/nB,EAAMymB,SAAS5G,WAAWkI,GAA1B,OAAyC3U,EAAMrT,KAC9C,OAAO,2BAAIqT,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOD,EAAMymB,SAAS5G,WAAWkI,GAA1B,WAI5D,MAAM,GAAN,mBAAW7c,GAAX,YAAoB4c,IAExB,OAAO,YAAI5c,KACZ,IACH0c,EAAgB1H,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBAC7DkU,EAAiCK,GACH,IAA3BA,EAAgB9d,QACf3G,EAAaK,QAAQ,4DAExB,CACDyjB,EAAuBzkB,EAAKwQ,YAAY,GAAG4C,OAC3C6b,EAAyBjvB,EAAKwQ,YAAY,GAAG7T,IAC7CgoB,EAAiB3kB,EAAKwQ,YAAY,GAAG0U,gBACrC,IAAME,EAAkBplB,EAAKwQ,YAAY/H,QAAQ,SAACC,EAAM2c,GACpD,GAAGA,EAAQjS,QAAUpT,EAAKwQ,YAAY,GAAG4C,MAAM,CAC3C,IAAMkS,EAASD,EAAQ5U,gBAAgB1I,KAAK,SAAC6I,GACzC,MAA4B,cAAzBA,EAAME,eACE,2BAAIF,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,cAAc7B,MAAM,MAAM,KAE7E,2BAAI3C,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,mBAE1D,MAAM,GAAN,mBAAW1M,GAAX,YAAoB4c,IAExB,OAAO,YAAI5c,KACZ,IACH0c,EAAgB1H,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBAC7DkU,EAAiCK,OA3CzC1U,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAAOqC,EAAxB,EAAwBA,KAmGxB,OAAI0Q,EACO,8BAAK,cAACwT,GAAA,EAAD,MAEZvmB,GACA0C,QAAQ1C,MAAMA,GACP,0CAGP,gCACI,cAAC2O,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,eAAegL,UAAU,MAC9DxJ,MAAO,CAAC,WAAc,QAD1B,wCAIA,cAACmd,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAO+mB,EACPnnB,SA9CgB,SAACC,GACvBmnB,EAAuBnnB,EAAII,OAAOD,OAClC,IAAM2nB,EAAkBplB,EAAKwQ,YAAY/H,QAAQ,SAACC,EAAM2c,GACpD,GAAGA,EAAQjS,QAAU9V,EAAII,OAAOD,MAAM,CAClCknB,EAAiBU,EAAQH,gBACzB+J,EAAyB5J,EAAQ1oB,IACjC,IAAM2oB,EAASD,EAAQ5U,gBAAgB1I,KAAK,SAAC6I,GACzC,MAA4B,cAAzBA,EAAME,eACE,2BAAIF,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,cAAc7B,MAAM,MAAM,KAEzE,2BAAI3C,GAAX,IAAkBjT,MAAOiT,EAAMhS,SAAUnB,MAAOmT,EAAMwE,mBAI9D,MAAM,GAAN,mBAAW1M,GAAX,YAAoB4c,IAExB,OAAO,YAAI5c,KACZ,IACH0c,EAAgB1H,MAAK,SAACC,EAAEC,GAAH,OAAUA,EAAE/M,YAAYgN,cAAcF,EAAE9M,gBAC7DkU,EAAiCK,IAwB7B,SAMIplB,EAAKwQ,YAAYzI,KAAI,SAACgQ,GAAD,OACjB,wBAAkCta,MAAOsa,EAAI3E,MAA7C,SAAqD2E,EAAI3E,OAA5C,QAAU2E,EAAI3E,YAG1B,uBACT,cAAC,GAAD,CAAmC/V,SAjC1B,SAACE,EAAME,EAAOE,GAC3B,IAAM6nB,EAAYV,EAAsB/c,KAAK,SAAC6I,GAC1C,OAAGA,EAAMrT,OAASA,EACP,2BAAIqT,GAAX,IAAkBnT,QAAOE,UAEtB,eAAIiT,MAEfmU,EAAiCS,IA0B0BlB,gBAAiBQ,IACxE,cAAC,GAAD,CAAgC1B,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SA1D7D,WACb7lB,EAAM6lB,YAyDwFC,SAxEjF,WACb,IAAMmC,EAAiBX,EAAsB/c,KAAK,SAAC6I,GAC/C,MAAO,CAAC,KAAQA,EAAMrT,KAAM,MAASqT,EAAMnT,UAEpB,KAAxB+mB,EAIHhnB,EAAM8lB,SAAS,CAAC,aAAgBkB,EAChB,WAAciB,EACd,gBAAmBuJ,EACnB,eAAkBtK,EAClB,GAAMlnB,EAAMwnB,eAPxBrkB,EAAaK,QAAQ,kCCzEjC,IAAMmP,GAAsBvC,aAAH,s2BA+ClB,SAASuhB,GAAqB3xB,GACjC,OACI,eAAC,IAAMqH,SAAP,WACE,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,mCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACC,cAACmqB,GAAD,eAA+B5xB,MAEhC,cAAC4H,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,wBAQZ,SAASsrB,GAA0B5xB,GACjC,IAAM8D,EAAKC,YAAe/B,GAClBqN,EAAQC,eACd,EAAgCxN,IAAMkC,SAAS,IAA/C,mBAAO4kB,EAAP,KAAiBC,EAAjB,KACA,EAA8C/mB,IAAMkC,SAAS,IAA7D,mBAAO8iB,EAAP,KAAwB+K,EAAxB,KACA,EAAoC/vB,IAAMkC,SAAS,IAAnD,mBAAOyoB,EAAP,KAAmBC,EAAnB,KACA,EAAiC1b,aAAS2B,GAAqB,CAC3DD,UAAW,CAACof,WAAY9xB,EAAM8xB,WAAYnS,aAAc7b,EAAG3B,KAAKyd,sBAChE1O,YAAa,SAAA1O,GACT,IAAMuvB,EAAevvB,EAAKqlB,QAAQ,GAAGmK,gBAAgBznB,KAAK,SAACqf,GAEvD,MAAO,CAACC,IAAKD,EAAER,QAAQS,IAAKoI,OAAQrI,EAAER,QAAQ8I,QAASrK,QAAS+B,EAAEsI,YACnEhS,MAAK,SAACC,EAAEC,GAAH,OAAUD,EAAE0J,IAAMzJ,EAAEyJ,IAAO,EAAKzJ,EAAEyJ,IAAM1J,EAAE0J,KAAQ,EAAI,KAC9DhB,EAAYkJ,GACZ,IAAMI,EAAuB3vB,EAAKqlB,QAAQ,GAAGuK,wBAAwB7nB,KAAK,SAAC6V,GAEvE,MAAO,CAAC/M,YAAa+M,EAAEiS,eAAehf,YAAapT,MAAOmgB,EAAE7M,cAC7D2M,MAAK,SAACC,EAAEC,GAAH,OAAUD,EAAE9M,YAAc+M,EAAE/M,YAAe,EAAK+M,EAAE/M,YAAc8M,EAAE9M,aAAgB,EAAI,KAC9Fwe,EAAmBM,GACnB,IAAM1F,EAAajqB,EAAKqlB,QAAQ,GAAGvH,6BAA6BrV,QAAQ,SAACC,EAAMyK,GAC3E,OAAMA,EAAI+B,UAAU3X,QAAQmL,EAQrB,2BAAIA,GAAX,mBAAkByK,EAAI+B,UAAU3X,KAAhC,sBAA2CmL,EAAKyK,EAAI+B,UAAU3X,OAA9D,CAAqE,CAACsT,YAAasC,EAAIgL,mBAAmBtN,YACxGpT,MAAO0V,EAAI1V,MACXqyB,QAAS3c,EAAI4c,eACbC,QAAS7c,EAAI8c,eACbnf,eAAgBqC,EAAIgL,mBAAmBrN,oBAX9B,2BAAIpI,GAAX,mBAAkByK,EAAI+B,UAAU3X,KAAO,CAAC,CAACsT,YAAasC,EAAIgL,mBAAmBtN,YAC3EpT,MAAO0V,EAAI1V,MACXqyB,QAAS3c,EAAI4c,eACbC,QAAS7c,EAAI8c,eACbnf,eAAgBqC,EAAIgL,mBAAmBrN,qBAS9C,IACGof,EAAkBnpB,OAAOxK,KAAK0tB,GAAYxhB,QAAQ,SAACC,EAAMyK,GAC3D,MAAM,GAAN,mBAAWzK,GAAX,CAAiB,CACbynB,WAAYhd,EACZkK,WAAY4M,EAAW9W,GAAKuK,MAAK,SAACC,EAAEC,GAAH,OAAUD,EAAE9M,YAAc+M,EAAE/M,YAAe,EAAK+M,EAAE/M,YAAc8M,EAAE9M,aAAgB,EAAI,UAE5H,IACHqZ,EAAcgG,MAnCdxf,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAAOqC,EAAxB,EAAwBA,KAsCxB,OAAI0Q,EACI,cAACC,GAAA,EAAD,CAAgBxS,MAAO,CAACkP,UAAW,UAEvC1P,GACH0C,QAAQ1C,MAAMA,GACP,0CAGN,eAAC,IAAMkH,SAAP,WACM,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,OAAQzJ,MAAO+I,EAAMujB,iBAA9G,mCAIF,eAACvoB,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,UAAUjG,MAAO,CAAE,aAAgB,cAAlE,UACI,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACE,cAACjE,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,yBAGJ,eAAC+D,EAAA,EAAD,WACI,eAAChE,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,UAAYnE,EAAKqlB,QAAQ,GAAG7U,YAAY4C,WAE5C,eAAClP,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,0BACA,cAACA,EAAA,EAAD,UAAYnE,EAAKqlB,QAAQ,GAAG3B,QAEhC,eAACxf,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,mBACA,cAACA,EAAA,EAAD,UAAYnE,EAAKqlB,QAAQ,GAAGgL,UAE9BrwB,EAAKqlB,QAAQ,GAAG8H,UACd,eAACjpB,EAAA,EAAD,CAAgCkE,OAAK,EAArC,UACI,cAACjE,EAAA,EAAD,uBACA,cAACA,EAAA,EAAD,UAAYnE,EAAKqlB,QAAQ,GAAG8H,UAAUmD,kBAF3B,iBAKf,KAEJ,eAACpsB,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,UAAYuoB,OAAOvpB,SAASwpB,OAAS,oBAAsB3sB,EAAKqlB,QAAQ,GAAG8H,UAAUC,mBAEzF,eAAClpB,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,mBACA,cAACA,EAAA,EAAD,UAAYnE,EAAKqlB,QAAQ,GAAG8H,UAAUoD,UAE1C,eAACrsB,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,kBACA,cAACA,EAAA,EAAD,UAAYnE,EAAKqlB,QAAQ,GAAG8H,UAAUqD,eAIhD,cAACjpB,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,OAAQzJ,MAAO+I,EAAMujB,iBAA9G,gCAIJ,eAACvoB,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,UAAUjG,MAAO,CAAE,aAAgB,cAAlE,UACI,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,uBACA,cAAC+F,EAAA,EAAD,yBAGJ,cAAC+D,EAAA,EAAD,UAEIoc,EAAgBvc,KAAK,SAACsf,EAAK7L,GAAN,OACjB,eAACtX,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAYkjB,EAAIxW,cAChB,cAAC1M,EAAA,EAAD,UAAYkjB,EAAI5pB,UAFL,YAAc+d,EAAI,MAAQhe,EAAM8xB,oBASrDrF,EAAWliB,KAAK,SAACqiB,GAAD,OACd,eAAC,IAAMvlB,SAAP,WACM,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,OAAQzJ,MAAO+I,EAAMujB,iBAA9G,SACKhG,EAAG+F,eAGZ,eAACtoB,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,UAAUjG,MAAO,CAAC,aAAgB,cAAjE,UACI,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,uBACA,cAAC+F,EAAA,EAAD,yBAGJ,cAAC+D,EAAA,EAAD,CAAW/J,MAAO,CAACmK,WAAY,OAA/B,SAEI8hB,EAAG/M,WAAWtV,KAAK,SAACsf,EAAKoJ,GAAN,OACf,eAACvsB,EAAA,EAAD,CAAgEkE,OAAK,EAArE,UACI,cAACjE,EAAA,EAAD,UAAYkjB,EAAIxW,cAChB,eAAC1M,EAAA,EAAD,WAC0B,eAAvBkjB,EAAIvW,eACHzO,KAAKC,UAAUD,KAAK2E,MAAMqgB,EAAI5pB,OAAQ,KAAM,GACvC4pB,EAAI5pB,MACM,OAAhB4pB,EAAIyI,QAAoB,KAAS,eAAC,IAAMjrB,SAAP,WAChC,uBAAK,iDAD2B,IACFwiB,EAAIyI,WAErB,OAAhBzI,EAAI2I,QAAoB,KAAS,eAAC,IAAMnrB,SAAP,WAC9B,uBAAK,iDADyB,IACAwiB,EAAI2I,gBAV3B,SAAWxyB,EAAM8xB,WAAalF,EAAG+F,WAAaM,aAhBxD,SAAWjzB,EAAM8xB,WAAalF,EAAG+F,eAqCzD/J,EAAS9e,OAAS,GACnB,eAAC,IAAMzC,SAAP,WACI,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACE,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,OAAQzJ,MAAO+I,EAAMujB,iBAA9G,+BAIF,eAACvoB,EAAA,EAAD,CAAOzD,KAAK,QAAQ,aAAW,UAAUjG,MAAO,CAAC,aAAgB,cAAjE,UACA,cAAC2J,EAAA,EAAD,UACE,eAAC5D,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,6BACA,cAACA,EAAA,EAAD,6BACA,cAACA,EAAA,EAAD,iCAGJ,cAAC+D,EAAA,EAAD,UAEIke,EAASre,KAAK,SAACsf,GAAD,OACV,eAACnjB,EAAA,EAAD,CAA2CkE,OAAK,EAAhD,UACI,cAACjE,EAAA,EAAD,UAAYkjB,EAAIA,MAChB,cAACljB,EAAA,EAAD,UAAYkjB,EAAIoI,SAChB,cAACtrB,EAAA,EAAD,UAAYkjB,EAAIhC,UAChB,cAAClhB,EAAA,EAAD,UACA,cAACN,EAAA,EAAD,CAAQnF,QAAQ,YAAYoF,MAAM,UAAUpG,OAAO,SAC/C8W,KAAM,gBAAkBxU,EAAKqlB,QAAQ,GAAG7U,YAAY4C,MAAQ,aAAeiU,EAAIA,IADnF,sBALWA,EAAIA,IAAM7pB,EAAM8xB,uBAgBL,OAAvCtvB,EAAKqlB,QAAQ,GAAGqL,oBACf,eAAC,IAAM7rB,SAAP,WACE,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,SACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,OAAQzJ,MAAO+I,EAAMujB,iBAA9G,2CAIJ,cAAChB,GAAD,CAA2BE,WAAYtvB,EAAKqlB,QAAQ,GAAGqL,2B,+BCvQnEzf,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJqI,OAAQ,OACR/G,MAAO,QAET2nB,MAAO,CACL3nB,MAAO,IACPsF,OAAQ,IACRsiB,SAAU,QAGZC,OAAQ,CACN9gB,OAAQ0H,EAAM6R,QAAQ,GAAK,QAIzB8E,GAAoB5V,aAAH,8fAuBhB,SAAS+iB,GAAmBnzB,GAC/B,MAA4C8B,IAAMkC,SAAS,IAA3D,mBAAOovB,EAAP,KAAuBC,EAAvB,KACQ7wB,EAASwO,aAASgV,GAAmB,CAAC/U,YAAa,eAAgByB,UAAW,CAACwW,YAAalpB,EAAMwnB,aAAN,iBAChGtW,YAAa,WACX,GAAG1O,EAAK8wB,kBAAkB7d,yBAAyB3L,OAAS,EAAE,CAE5D,IADA,IAAIxG,EAAU,GACN0a,EAAI,EAAGA,EAAIxb,EAAK8wB,kBAAkB7d,yBAAyB3L,OAAQkU,IACzE,IAAI,IAAIiV,EAAI,EAAGA,EAAIzwB,EAAK8wB,kBAAkB7d,yBAAyBuI,GAAGtI,QAAQ6d,SAASzpB,OAAQmpB,IAC7F3vB,EAAQqG,KAAR,aAAciM,MAAOpT,EAAK8wB,kBAAkB7d,yBAAyBuI,GAAGtI,QAAQE,OAAUpT,EAAK8wB,kBAAkB7d,yBAAyBuI,GAAGtI,QAAQ6d,SAASN,KAGlKI,EAAkB/vB,QAElBH,EAAaK,QAAQ,4CAXrBhB,KA0BR,OACI,gCACA,cAACsM,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,iBAAiBgL,UAAU,MAChExJ,MAAO,CAAE,WAAc,QAD3B,yCADA,IAIc,uBACd,cAAC6yB,GAAD,CAAeJ,eAAgBA,EAAgBxN,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAC7EF,SAVW,WACb7lB,EAAM6lB,YASgBC,SAjBT,SAAC2N,QACYhzB,IAAzBgzB,EAAgBZ,KAInB7yB,EAAM8lB,SAAS2N,EAAgBZ,MAH7B1vB,EAAahD,MAAM,oDAoB3B,SAASqzB,GAAcxzB,GACLyT,KAAhB,IAEMqS,EAAW,SAAC+B,GAChB7nB,EAAM8lB,SAAS+B,IAEnB,OACE,eAAC,IAAMxgB,SAAP,WACI,cAAC6C,EAAA,EAAD,CAAgBC,UAAWJ,IAA3B,SACM,eAACM,EAAA,EAAD,CAAOqpB,cAAY,EAAC9sB,KAAK,QAAQjG,MAAO,CAAE,SAAY,OAAQ,SAAY,UAA1E,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,qBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,uBACA,cAAC+F,EAAA,EAAD,mBACA,cAACA,EAAA,EAAD,0BACA,cAACA,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,0BAGR,cAAC8J,EAAA,EAAD,UAEC1K,EAAMozB,eAAe7oB,KAAK,SAAC2F,GAAD,OACvB,cAACyjB,GAAD,CACIC,WAAY9N,EAEZ+B,QAAS3X,GADJ,UAAYA,EAAG/Q,cAOpC,qBAAKwB,MAAO,CAAC4N,WAAY,QAAzB,SACG,cAAC,GAAD,CAAgCgjB,aAAW,EAAC3L,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SAAU7lB,EAAM6lB,SAAUC,SAAUA,SAO1H,SAAS6N,GAAiB3zB,GAC/B,MAAgD8B,IAAMkC,UAAS,GAA/D,mBAAO6vB,EAAP,KAAyBC,EAAzB,KACMhwB,EAAKC,YAAe/B,GAI1B,OACI,eAAC,IAAMqF,SAAP,WACI,eAACX,EAAA,EAAD,CAA+CkE,OAAK,EAApD,UACI,cAACjE,EAAA,EAAD,UACA,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAPd,WACfvG,EAAM4zB,WAAW5zB,EAAM6nB,UAM2BvhB,MAAM,UAAUpF,QAAQ,YAAlE,sBAEA,cAACyF,EAAA,EAAD,UAAYwE,GAAYnL,EAAM6nB,QAAQ3Z,cAAepK,EAAG3B,KAAKkJ,iBAC7D,cAAC1E,EAAA,EAAD,UAAY3G,EAAM6nB,QAAQ8H,UAAUmD,gBACpC,cAACnsB,EAAA,EAAD,UAAY3G,EAAM6nB,QAAQkM,MAC1B,cAACptB,EAAA,EAAD,UACI,cAAC0H,EAAA,EAAD,CAAYzH,KAAK,QAAQN,MAAM,UAAUC,QAAS,kBAAMutB,GAAoB,IAA5E,SACI,cAAC,KAAD,UATG,UAAY9zB,EAAM6nB,QAAQgL,MAazC,cAACnsB,EAAA,EAAD,UACCmtB,EACC,cAAC5rB,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyrB,EAC/C7rB,QAAS,WAAK8rB,GAAoB,IAClCnrB,YAAa,cAACgpB,GAAD,2BAA0B3xB,GAA1B,IAAiC8xB,WAAY9xB,EAAM6nB,QAAQ1oB,GAAI6I,QAAS,WAAK8rB,GAAoB,SAE/G,UCnJf,I,GAAM9F,GAAqB5d,aAAH,+WAgBlBqD,GAAaC,cAAW,SAAArE,GAAK,MAAK,CACpC/P,KAAK,gBACA+P,EAAM4e,YAAYC,GAAG,MAAQ,CAC1BC,SAAU,qBAGlBC,WAAY,CACRC,WAAY,QAEhBC,WAAY,CACR5uB,QAAS,oBAEb6uB,MAAO,CACHxe,WAAY,OACZd,MAAO,SAEX0E,OAAQ,CACJjU,QAAS,UACTkU,UAAW,eACXC,WAAYxE,EAAMyE,YAAYC,OAAO,YAAa,CAC9CC,SAAU3E,EAAMyE,YAAYE,SAASC,YAG7CC,WAAY,CACRN,UAAW,kBAEf4a,SAAU,CACN9uB,QAAS,IAEb+uB,UAAW,CACP9V,SAAU,GACVrS,MAAO,UACPsQ,aAAc,GAElB6R,OAAQ,CACJ/oB,QAAS,EACTgvB,cAAe,YAIjBC,GAAe7sB,IAAM8sB,YAAW,SAAC5uB,EAAO6jB,GAE1C,IAAMxU,EAAQC,eACR2F,EAAUxB,GAAUpE,GAElB1L,EAAkBT,cAAlBS,cACR,EAAgCK,oBAAS,GAAzC,mBAAO6qB,EAAP,KAAiBC,EAAjB,KAUA,OACI,cAAC,IAAD,CAAiBjL,IAAKA,EAAKzZ,UAAW6K,EAAQ3V,KAA9C,SACI,eAAC0W,GAAA,EAAD,CAAMrV,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ7Z,QAAQuM,MAArD,UACI,eAACof,GAAA,EAAD,CAAa9Z,QAAS,CAAE3V,KAAM2V,EAAQqZ,YAAtC,UACI,cAACxf,EAAA,EAAD,CAAY5N,QAAQ,YAAYkJ,UAAW6K,EAAQmZ,WAAnD,wCACA,sBAAKhkB,UAAW6K,EAAQsZ,MAAxB,UACI,cAAClgB,EAAA,EAAD,CACI,aAAW,YACXjE,UAAW4kB,mBAAK/Z,EAAQtB,OAAT,gBAAoBsB,EAAQf,WAAa2a,IACxDtoB,QAjBE,WACtBuoB,GAAaD,IAaG,SAKI,cAAC,KAAD,MAEJ,cAACxgB,EAAA,EAAD,CAAYjE,UAAW6K,EAAQtB,OAAQpN,QAjBrC,WAClB5C,EAAc3D,EAAMb,KAgBJ,SACI,cAAC,KAAD,YAIZ,eAACsP,EAAA,EAAD,CAAUC,GAAImgB,EAAUlgB,QAAQ,OAAOC,eAAa,EAApD,UACI,eAAC7E,EAAA,EAAD,CAAOK,UAAW6K,EAAQuZ,SAA1B,UACI,cAAC1f,EAAA,EAAD,CAAYC,cAAY,EAAxB,sCACA,eAAC1I,EAAA,EAAD,CAAQ+D,UAAW6K,EAAQwT,OAAQwG,UAAQ,EAACjY,KAAMkY,OAAOvpB,SAASwpB,OAAS,oBAAsBnvB,EAAMovB,QAAvG,UACI,cAAC,KAAD,CAAiBhlB,UAAW6K,EAAQwZ,YADxC,qBAKJ,cAAC1kB,EAAA,EAAD,CAAOK,UAAW6K,EAAQuZ,SAA1B,SACI,cAACnoB,EAAA,EAAD,CAAQnF,QAAQ,WAAWoF,MAAM,UAAU0Q,KAAK,gBAAhD,gDAOlBqY,GAAoBvtB,IAAM8sB,YAAW,SAAC5uB,EAAO6jB,GAE/C,IAAMxU,EAAQC,eACR2F,EAAUxB,GAAUpE,GAClB1L,EAAkBT,cAAlBS,cACR,EAAgCK,oBAAS,GAAzC,mBAAO6qB,EAAP,KAAiBC,EAAjB,KAUA,OACI,cAAC,IAAD,CAAiBjL,IAAKA,EAAKzZ,UAAW6K,EAAQ3V,KAA9C,SACI,eAAC0W,GAAA,EAAD,CAAMrV,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ9c,MAAMwP,MAAnD,UACI,eAACof,GAAA,EAAD,CAAa9Z,QAAS,CAAE3V,KAAM2V,EAAQqZ,YAAtC,UACI,cAACxf,EAAA,EAAD,CAAY5N,QAAQ,YAAYkJ,UAAW6K,EAAQmZ,WAAYztB,MAAO,CAAC2F,MAAO,SAA9E,sCACA,sBAAK8D,UAAW6K,EAAQsZ,MAAxB,UACI,cAAClgB,EAAA,EAAD,CACI,aAAW,YACXjE,UAAW4kB,mBAAK/Z,EAAQtB,OAAT,gBAAoBsB,EAAQf,WAAa2a,IACxDtoB,QAjBE,WACtBuoB,GAAaD,IAaG,SAKI,cAAC,KAAD,MAEJ,cAACxgB,EAAA,EAAD,CAAYjE,UAAW6K,EAAQtB,OAAQpN,QAjBrC,WAClB5C,EAAc3D,EAAMb,KAgBJ,SACI,cAAC,KAAD,YAIZ,cAACsP,EAAA,EAAD,CAAUC,GAAImgB,EAAUlgB,QAAQ,OAAOC,eAAa,EAApD,SACI,cAAC7E,EAAA,EAAD,CAAOK,UAAW6K,EAAQuZ,SAA1B,SACKxuB,EAAMwF,oBAOxB,SAAS8pB,GAAgCtvB,GAC5C,MAA8B8B,IAAMkC,UAAW,IAAIuH,MAAOwP,eAA1D,mBAAOwU,EAAP,KACA,GADA,KACiCnY,aAAgB4W,GAAoB,CAACtb,UAAW,CAAC6c,cAA1Erc,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAAOqC,EAAxB,EAAwBA,KAqBxB,OAnBA6B,qBAAW,YACH6O,IAAY/S,GAASqC,GAAQA,EAAKqlB,QAAQ/d,OAAS,EAChB,YAAhCtH,EAAKqlB,QAAQ,GAAG2H,aACfrsB,EAAaO,UACbP,EAAaC,QAAQZ,EAAKqlB,QAAQ,GAAG4H,cAAe,CAACC,SAAS,EAAM7a,QAAS,SAAArU,GAAG,OAAI,cAAC,GAAD,CAAcrB,GAAIqB,EAAK4uB,QAAS5sB,EAAKqlB,QAAQ,GAAG8H,UAAUC,oBACzG,aAAhCptB,EAAKqlB,QAAQ,GAAG2H,YACrBrsB,EAAaM,KAAb,2BAAsCjB,EAAKqlB,QAAQ,GAAGgL,KAAtD,OAAiE,CAACmB,iBAAkB,MAEjD,KAAhCxxB,EAAKqlB,QAAQ,GAAGoM,YACf9wB,EAAahD,MAAMqC,EAAKqlB,QAAQ,GAAGgI,aAAc,CAACH,SAAS,EAAM7a,QAAS,SAAArU,GAAG,OAAI,cAAC,GAAD,CAAmBrB,GAAIqB,EAAKgF,QAAShD,EAAKqlB,QAAQ,GAAGgI,kBAEtI1sB,EAAahD,MAAMqC,EAAKqlB,QAAQ,GAAG4H,cAAe,CAACC,SAAS,EAAM7a,QAAS,SAAArU,GAAG,OAAI,cAAC,GAAD,CAAmBrB,GAAIqB,EAAKgF,QAAShD,EAAKqlB,QAAQ,GAAG4H,mBAG1ItvB,IACL0C,QAAQC,IAAI3C,GACZgD,EAAahD,MAAM,gCAAkCA,EAAMmF,eAEhE,CAAC4N,EAAS1Q,EAAMrC,IAEhB,KCxLN,IAAM2vB,GAAiB1f,aAAH,8KAWd,SAAS2f,GAAW/vB,GACvB,MAAgC8B,IAAMkC,SAAS,IAA/C,mBAAOuU,EAAP,KAAiByX,EAAjB,KACA,EAAsCluB,IAAMkC,SAAS,IAArD,mBAAOqP,EAAP,KAAoB4c,EAApB,KACA,EAAgC7e,aAAY0e,GAAgB,CACxDvN,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KACoB,YAA9BA,EAAK0tB,cAAcje,OAClB9O,EAAaM,KAAK,uCAElBN,EAAahD,MAAMqC,EAAK0tB,cAAc/vB,UAL3CgwB,EAAP,oBASA9rB,qBAAW,WACwC,KAA5CrE,EAAMwnB,aAAa,GAAnB,eACCwI,EAAYhwB,EAAMwnB,aAAa,GAAnB,aAAwC,IAAMxnB,EAAMwnB,aAAa,GAAnB,gBAE1DwI,EAAYhwB,EAAMwnB,aAAa,GAAnB,gBAGjB,CAACxnB,EAAMwnB,eA4BV,OACI,gCACI,cAAC1Y,EAAA,EAAD,CAAY5N,QAAQ,KAAKylB,MAAM,OAAOxnB,GAAG,mBAAmBgL,UAAU,MAClExJ,MAAO,CAAC,WAAc,QAD1B,4BAIA,uBACA,cAAC,EAAD,CAAiBS,UAAU,EAAOL,YAAa,WAAYd,MAAOsY,EAAU/W,WAAW,EAAO3B,SAlC7E,SAACE,EAAME,EAAOE,GACnC6vB,EAAY/vB,IAiCkHuF,QAAQ,iBAClI,cAAC,EAAD,CAAiBpE,UAAU,EAAOL,YAAa,cAAed,MAAOoT,EAAa7R,WAAW,EAAO3B,SAhChF,SAACE,EAAME,EAAOE,GACtC8vB,EAAehwB,IA+BwHuF,QAAQ,iBAC3I,cAAC,GAAD,CAAgCogB,MAAO5lB,EAAM4lB,MAAOG,KAAM/lB,EAAM+lB,KAAMF,SAb7D,WACb7lB,EAAM6lB,YAYwFC,SA9BjF,WACb,IAAMgB,EAAkB9mB,EAAMwnB,aAAa,GAAnB,WAAoCjd,KAAK,SAAC6I,GAC9D,OAAOA,KAELid,EAAkB,CACpB,YAAerwB,EAAMwnB,aAAa,GAClC,aAAgBxnB,EAAMwnB,aAAa,GAAnB,aAChB,SAAYjP,EACZ,IAAOlF,EACP,SAAY,GACZ,iBAAoByT,EACpB,YAAe,GACf,SAAW,EACX,gBAAmB9mB,EAAMwnB,aAAa,IAE1C2I,EAAsB,CAACzd,UAAW,CAACmV,QAAShjB,KAAKC,UAAUurB,MAAoBhrB,OAAO,SAACzG,GAAOiE,QAAQC,IAAIlE,SAgBtG,uBAAK,uBACL,cAAC,GAAD,OChEL,SAASs1B,GAAqBl0B,GACjC,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAO6jB,EAAP,KAAgB0I,EAAhB,KACA,EAAoCzuB,IAAMkC,SAAS,GAAnD,mBAAOwsB,EAAP,KAAmBC,EAAnB,KAeQC,EAAiB,SAACC,GACtBJ,EAAW,2BAAI1I,GAAL,mBAAe2I,EAAaG,KACtCC,KAEIC,EAAa,WACjBC,KAGIC,EA5BD,CAAC,mBAAoB,eAAgB,iBAAkB,SA8BtDH,EAAa,WACjBH,GAAc,SAACO,GAAD,OAAoBA,EAAiB,MAG/CF,EAAa,WACjBL,GAAc,SAACO,GAAD,OAAoBA,EAAiB,MAGvD,OACI,sBAAKrwB,MAAO,CAACuF,OAAQ,cAArB,UACI,cAAC+qB,GAAA,EAAD,CAAST,WAAYA,EAAYU,kBAAgB,EAAjD,SACKH,EAAMxmB,KAAI,SAACvJ,EAAOyJ,GAAR,OACT,cAAC0mB,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UAAYpwB,KADHA,QApCF,SAACqwB,GAClB,OAAQA,GACN,KAAK,EACH,OAAO,cAAC,GAAD,CAAe7J,aAAcK,EAASpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAMG,MAAM,IACxI,KAAK,EACH,OAAO,cAAC,GAAD,CAAwByB,aAAcK,EAAQ,GAAIpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IACrJ,KAAK,EACH,OAAO,cAACoN,GAAD,CAAoB3L,aAAcK,EAAQ,GAAIpB,SAAUoB,EAAQ,GAAI/B,SAAU4K,EAAgB7K,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IACjJ,KAAK,EACH,OAAO,cAAC,GAAD,CAAYyB,aAAcK,EAAShC,SAAUgL,EAAYjL,OAAO,EAAOG,MAAM,IACtF,QACE,MAAO,gBA8BRuL,CAAed,M,iECjDrB,SAAS2D,GAA4Bn0B,GACxC,MAAgC8B,IAAMkC,SAAS,MAA/C,mBAAO4Y,EAAP,KAAiBwX,EAAjB,KAEMC,EAAqB,WACvBxsB,IACA7H,EAAMq0B,mBAAmB,CAACl1B,GAAIa,EAAMb,GAAIm1B,UAAWt0B,EAAMs0B,YAMvDzsB,EAAc,WAChBusB,EAAY,OAUVG,EAAczyB,IAAM0yB,aAAY,SAAC51B,GACnCw1B,EAAYx1B,EAAE6d,iBACf,IACH,OACI,eAACgY,GAAA,EAAD,WACI,cAACpmB,EAAA,EAAD,CAAY,gBAAe,YAAcrO,EAAMb,GAAI,gBAAc,OAAOoH,QAASguB,EAAjF,SAA8F,cAAC,KAAD,MAC1F,eAACG,GAAA,EAAD,CAAM1qB,UAAW,EAAG7K,GAAI,YAAca,EAAMb,GAAIyd,SAAUA,EAAUxU,KAAMkU,QAAQM,GAAW5U,QAASH,EAAtG,UAEwB,YAAhB7H,EAAM20B,OAAuB30B,EAAMs0B,SAC/B,cAAC7V,GAAA,EAAD,CAAUlY,QAAS8tB,EAAnB,uBACkB,YAAhBr0B,EAAM20B,OAAwB30B,EAAMs0B,SAGtC,cAAC7V,GAAA,EAAD,CAAUlY,QA5BZ,WAClBsB,IACA7H,EAAM40B,cAAc,CAACz1B,GAAGa,EAAMb,MA0BV,0BAFA,cAACsf,GAAA,EAAD,CAAUlY,QAAS8tB,EAAnB,qBAMR,cAAC5V,GAAA,EAAD,CAAUlY,QArBG,WACzBsB,IACA7H,EAAM60B,qBAAqB,CAAC11B,GAAGa,EAAMb,MAmBzB,oCACA,eAACsf,GAAA,EAAD,CAAUlY,QA1BF,WACpBsB,IACA7H,EAAM80B,gBAAgB,CAAC31B,GAAGa,EAAMb,MAwBpB,UAAoC,cAAC,KAAD,IAApC,kBCnCpB,IAAMsU,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJsB,MAAO,OACP8H,SAAU,QAEZqsB,OAAQ,CACNvvB,QAAS,cAIN,SAASwvB,GAAqBh1B,GACjC,IAAMiV,EAAUxB,KACVpE,EAAQC,eACRxL,EAAKC,YAAe/B,GAE1B,OACQ,eAACgqB,GAAA,EAAD,CAAUnV,WAAW,aAAalW,MAAK,eAAMX,EAAMW,OAAnD,UACI,cAACs0B,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,UACKl1B,EAAMmR,SAAWnR,EAAMmR,SAASlN,SAAS,GAAK,QAGvD,cAACooB,GAAA,EAAD,CAAc8I,mBAAiB,EAC3BjY,QACI,eAAC,IAAM7V,SAAP,WACE,eAACyH,EAAA,EAAD,CACE3E,UAAU,OACVjJ,QAAQ,QACRkJ,UAAW6K,EAAQ8f,OACnBp0B,MAAO,CAAC0tB,WAAY,OAAQ1mB,OAAQ,EAAGjI,QAAS,GAJlD,UAMGM,EAAMmR,SAAWnR,EAAMmR,SAASlN,SAAW,SAC3CjE,EAAMob,MAAQ,EAAI,MAAQpb,EAAMob,MAAQ,KAAO,MAElD,cAACtM,EAAA,EAAD,CACE3E,UAAU,OACVjJ,QAAQ,UACRkJ,UAAW6K,EAAQ8f,OACnBp0B,MAAO,CAACgH,OAAQ,cAJlB,SAMGwD,GAAYnL,EAAMo1B,UAAWtxB,EAAG3B,KAAKkJ,oBAI9CgqB,UACM,qBAAK10B,MAAO,CAAC20B,UAAW,OAAQ10B,MAAO,cAAe8H,SAAU,MAAOf,OAAQ,UAAW+M,aAAc,MAAOhV,QAAS,MAAO+P,gBAAiC,YAAhBzP,EAAM20B,OAAuB30B,EAAMs0B,SAAWjlB,EAAM4N,QAAQsY,2BAA8C,YAAhBv1B,EAAM20B,OAAwB30B,EAAMs0B,SAAqDt0B,EAAMmR,SAAW9B,EAAM4N,QAAQuY,oBAAsBnmB,EAAM4N,QAAQwY,0BAA7GpmB,EAAM4N,QAAQyY,0BAAvS,SAAqa11B,EAAM21B,UAEjbh1B,MAAO,KAEX,cAACwzB,GAAD,CAA6Bh1B,GAAIa,EAAMb,GAAIw1B,MAAO30B,EAAM20B,MACtDG,gBAAiB90B,EAAM80B,gBACvBT,mBAAoBr0B,EAAMq0B,mBAC1BO,cAAe50B,EAAM40B,cACrBC,qBAAsB70B,EAAM60B,qBAC5BP,SAAUt0B,EAAMs0B,c,yBC9D3B,SAASsB,GAAoB51B,GAChC,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAO2xB,EAAP,KAAgBE,EAAhB,KAKMC,EAAkB,SAACl3B,GACrBA,EAAE4F,iBACCmxB,GAAWA,EAAQ7rB,OAAS,IAC3B9J,EAAM81B,gBAAgBH,GACtBE,EAAW,MAInB,OACI,qBAAKl1B,MAAO,CAACjB,QAAS,IAAKiI,OAAQ,IAAKsC,SAAU,WAAY8rB,OAAQ,EAAGn1B,MAAO,QAAhF,SACI,sBAAMwF,SAAU0vB,EAAhB,SACI,cAACn2B,EAAA,EAAD,CAAW+B,WAAY,CAACs0B,aACpB,cAAC3nB,EAAA,EAAD,CAAY/H,MAAM,UAAUpF,QAAQ,YAAYqF,QAASuvB,EAAzD,SACI,cAAC,KAAD,OAGJh1B,WAAS,EACT8F,KAAK,QACLjG,MAAO,CAACjB,QAAQ,EAAEiI,OAAO,GACzBzG,QAAQ,WACRjB,MAAO01B,EAAS91B,SAxBR,SAACC,GACrBA,EAAI0E,iBACJqxB,EAAW/1B,EAAII,OAAOD,QAuBVe,MAAM,wB,sDCtBpBi1B,GAAM,SAAC,GAA0B,IAAzBzzB,EAAwB,EAAxBA,KAAMiI,EAAkB,EAAlBA,MAAO9J,EAAW,EAAXA,MACjBuP,EAAK1N,EAAKA,EAAKsH,OAASW,EAAQ,GACtC,OACI,qBAAK9J,MAAOA,EAAZ,SACI,cAACq0B,GAAD,eACQ9kB,OAMdgmB,GAAY,SAAC,GAAmG,IAAlGpB,EAAiG,EAAjGA,gBAAiBF,EAAgF,EAAhFA,cAAeP,EAAiE,EAAjEA,mBAAoBQ,EAA6C,EAA7CA,qBAAsBsB,EAAuB,EAAvBA,kBACpFC,EAAUt0B,IAAMu0B,YAChBC,EAAc,SAAC7rB,GAEjB,OAAO,GAAM,IADF0rB,EAAkBA,EAAkBrsB,OAASW,EAAQ,GAC3C,QAAY8rB,MAAM,QAAU,IAAIzsB,QAEnD0sB,EAAwBL,EAAkB5rB,KAAK,SAACksB,GAClD,OAAO,aAAC3B,kBAAiBF,gBAAeP,qBAAoBQ,wBAAyB4B,MAOzF,OALApyB,qBAAW,WACJ+xB,EAAQ9tB,SACP8tB,EAAQ9tB,QAAQouB,gBAAgB,KAErC,CAACP,IAEA,cAAC,KAAD,UACK,gBAAEjwB,EAAF,EAAEA,OAAQtF,EAAV,EAAUA,MAAV,OACG,cAAC,KAAD,CACIijB,IAAKuS,EACLlwB,OAAQA,EAAO,GACfywB,SAAUH,EACVI,UAAWT,EAAkBrsB,OAC7BlJ,MAAOA,EACPi2B,SAAUP,EACVQ,cAAe,GAPnB,SASSb,SAOlB,SAASc,GAAe/2B,GAC3B,IAAMg3B,EAAiB7uB,iBAAO,MACxBkH,EAAQC,eAQR2nB,EAAiB,WACnBD,EAAe1uB,QAAQ4uB,eAAe,CAAEC,SAAU,YAEtD,OACI,eAAC,IAAM9vB,SAAP,WACI,eAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAOrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAzJ,UACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,wCAGA,cAAC1J,EAAA,EAAD,CAAQnF,QAAQ,YAAYoF,MAAO,UAAWM,KAAK,QAAQjG,MAAO,CAAC6E,QAAS,eAAgByJ,MAAO,QAASY,UAAU,MAAOrJ,YAAY,QACrID,QAAS,SAACzG,GAASA,EAAIs3B,kBAAmBp3B,EAAMq3B,YADpD,8BAEA,cAAChxB,EAAA,EAAD,CAAQnF,QAAQ,YAAYoF,MAAO,UAAWM,KAAK,QAAQjG,MAAO,CAAC6E,QAAS,eAAgByJ,MAAO,QAASY,UAAU,MAAOrJ,YAAY,QACrID,QAAS,SAACzG,GAASA,EAAIs3B,kBAAmBp3B,EAAMs3B,iBADpD,6BAEA,cAACjxB,EAAA,EAAD,CAAQnF,QAAQ,YAAYoF,MAAO,UAAWM,KAAK,QAAQjG,MAAO,CAAC6E,QAAS,eAAgByJ,MAAO,QAASY,UAAU,MAAOrJ,YAAY,QACrID,QAAS,SAACzG,GAASA,EAAIs3B,kBAAmBp3B,EAAMu3B,yBADpD,qCAEA,cAAClxB,EAAA,EAAD,CAAQnF,QAAQ,YAAYoF,MAAO,YAAaM,KAAK,QAAQjG,MAAO,CAAC6E,QAAS,eAAgByJ,MAAO,QAASY,UAAU,MAAOrJ,YAAY,QACvID,QAAS,SAACzG,GAASA,EAAIs3B,kBAAmBp3B,EAAMw3B,oBADpD,mCAIJ,eAACztB,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAACsJ,SAAU,WAAY/D,OAAQ,aAAcuJ,gBAAiBJ,EAAMzK,MAAO1D,QAAS,YAAhH,UACI,cAAC,GAAD,CACImzB,mBAAoBr0B,EAAMq0B,mBAC1BO,cAAe50B,EAAM40B,cACrBE,gBAAiB90B,EAAM80B,gBACvBD,qBAAsB70B,EAAM60B,qBAC5BsB,kBAAmBn2B,EAAMm2B,oBAC7B,qBAAKtS,IAAKmT,IACV,cAACpB,GAAD,CAAqBE,gBAjCT,SAACH,GAClBA,GAAWA,EAAQ7rB,OAAS,IAC3B9J,EAAM81B,gBAAgB,CAACnB,MAAM,OAAQgB,YACrCsB,cCtDZ,IAEMQ,GAAiBrnB,aAAH,oZAgBbsnB,GAAiBtnB,aAAH,2ZAgBfunB,GAAyBvnB,aAAH,wZAgBrBwnB,GAA+BxnB,aAAH,oMAO5BynB,GAA4BznB,aAAH,yYAgBxB0nB,GAAiB1nB,aAAH,8NAUf2nB,GAAoB3nB,aAAH,kOAQjB4nB,GAAe5nB,aAAH,mMAQZ6nB,GAA+B7nB,aAAH,2PAU3B8nB,GAA0B9nB,aAAH,kTAUxB,SAAS+nB,GAAUn4B,GACxB,IAAM8D,EAAKC,YAAe/B,GAC1B,EAAkDF,IAAMkC,SAAS,IAAjE,mBAAOmyB,EAAP,KAA0BiC,EAA1B,KACA,EAA4Bt2B,IAAMkC,SAAS,GAA3C,mBAAOq0B,EAAP,KAAeC,EAAf,KACAlhB,aAAgBsgB,GAAgB,CAC9BhlB,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,qBAAsByY,OAAQ,EAAGE,eA3H9C,KA2HiFtnB,YAAa,eACnHunB,mBAAmB,EACnBC,mBAAoB,YAAyB,IAAvBC,EAAsB,EAAtBA,iBACN,IAAXL,GACDC,EAAUI,EAAiBl2B,KAAK2zB,kBAAkBrsB,QAEpD,IAAM6uB,EAAYD,EAAiBl2B,KAAK2zB,kBAAkBlrB,QAAQ,SAACC,EAAMyK,GACvE,GAAGzK,EAAKyf,MAAK,qBAAGxrB,KAAgBwW,EAAIxW,MAAI,CACtC,IAAIy5B,EAAO1tB,EAAK6f,WAAW,qBAAE5rB,KAAewW,EAAIxW,MAC5C05B,EAAY,YAAO3tB,GAEvB,OADA2tB,EAAaD,GAAQjjB,EACd,YAAIkjB,GAEb,MAAM,GAAN,mBAAW3tB,GAAX,CAAiByK,MAPD,YAQXwgB,IACPwC,EAAUzY,MAAK,SAACC,EAAEC,GAAH,OAAUD,EAAEhhB,GAAKihB,EAAEjhB,IAAO,EAAMihB,EAAEjhB,GAAKghB,EAAEhhB,GAAM,EAAI,KAClEi5B,EAAqBO,MAGzB,MAAyBpY,aAAakX,GAAgB,CAClDhmB,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,IAElByO,YAAa,eACbC,YAAa,SAAC1O,GAEV,GADFW,EAAaO,UAC0B,IAAlClB,EAAK2zB,kBAAkBrsB,OAA1B,CAIA,IAAM6uB,EAAYn2B,EAAK2zB,kBAAkBlrB,QAAQ,SAACC,EAAMyK,GACtD,OAAGzK,EAAKyf,MAAK,qBAAGxrB,KAAgBwW,EAAIxW,MAC3B,YAAI+L,GAEP,GAAN,mBAAWA,GAAX,CAAiByK,MAJD,YAKXwgB,IACPmC,EAAUD,EA/JK,KAgKfD,EAAqBO,GACvBx1B,EAAaC,QAAQ,yCAXjBD,EAAaM,KAAK,qBARrBq1B,EAAP,oBAsBA,EAAmCvY,aAAaoX,GAAwB,CACtElmB,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,IAElByO,YAAa,eACbC,YAAa,SAAC1O,GACVW,EAAaO,UACb,IAAIq1B,GAAW,EACTJ,EAAYn2B,EAAK2zB,kBAAkBlrB,QAAQ,SAACC,EAAMyK,GACtD,OAAGzK,EAAKyf,MAAK,qBAAGxrB,KAAgBwW,EAAIxW,MAC3B,YAAI+L,IAEb6tB,GAAW,EACL,GAAN,mBAAW7tB,GAAX,CAAiByK,OALD,YAMXwgB,IACPiC,EAAqBO,GAClBI,EACD51B,EAAaC,QAAQ,2CAErBD,EAAaM,KAAK,uCAnBnBu1B,EAAP,oBAwBA,EAAuBzY,aAAasX,GAA2B,CAC7DpmB,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,IAElByO,YAAa,eACbC,YAAa,SAAC1O,GAEV,GADFW,EAAaO,UAC0B,IAAlClB,EAAK2zB,kBAAkBrsB,OAA1B,CAIA,IAAM6uB,EAAYn2B,EAAK2zB,kBAAkBlrB,QAAQ,SAACC,EAAMyK,GACtD,OAAGzK,EAAKyf,MAAK,qBAAGxrB,KAAgBwW,EAAIxW,MAC3B,YAAI+L,GAEP,GAAN,mBAAWA,GAAX,CAAiByK,MAJD,YAKXwgB,IACPiC,EAAqBO,GACrBx1B,EAAaC,QAAQ,yCAVnBD,EAAaM,KAAK,qBARnBw1B,EAAP,oBAqBA,EAA+B7nB,aAAYwmB,IAApCsB,EAAP,oBACA,EAAwB9nB,aAAY0mB,GAAgB,CAClDvV,OAAQ,SAACC,EAAD,GAAoB,IAClB2W,EADiB,EAAV32B,KACe42B,yBAAyBC,UAAU,GACzDC,EAAcnD,EAAkBvkB,QAAO,SAAA1B,GAAE,OAAKA,EAAG/Q,KAAOg6B,EAAeh6B,MAC7Ei5B,EAAqBkB,GACrBn2B,EAAaC,QAAQ,qCALpBm2B,EAAP,oBAQA,EAA2BnoB,aAAY2mB,GAAmB,CACxDxV,OAAQ,SAACC,EAAD,GAAoB,IACpBgX,EADmB,EAAVh3B,KACai3B,+BACtBC,EAAkBvD,EAAkB5rB,KAAK,SAACzH,GAC9C,OAAGA,EAAI3D,KAAOq6B,EAAer6B,GACpB,2BAAI2D,GAAX,IAAgBwxB,SAAUkF,EAAelF,WAEpCxxB,KAETs1B,EAAqBsB,MATlBC,EAAP,oBAYA,EAAsBvoB,aAAY4mB,GAAc,CAC9CzV,OAAQ,SAACC,EAAD,GAAoB,IACpBgX,EADmB,EAAVh3B,KACai3B,+BACtBC,EAAkBvD,EAAkB5rB,KAAK,SAACzH,GAC9C,OAAGA,EAAI3D,KAAOq6B,EAAer6B,GACpB,2BAAI2D,GAAX,IAAgB6xB,MAAO6E,EAAe7E,QAEjC7xB,KAETs1B,EAAqBsB,MATlBE,EAAP,oBAYA,EAAgCxoB,aAAY6mB,GAA8B,CACxE1V,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KAEf,GADAW,EAAaO,UACVlB,EAAK42B,yBAAyBC,UAAUvvB,OAAS,EAAE,CACpD3G,EAAaC,QAAQ,uBACrB,IAAMy2B,EAAcr3B,EAAK42B,yBAAyBC,UAAU9uB,KAAK,SAACzK,GAAD,OAASA,EAAIX,MACxEu6B,EAAkBvD,EAAkB5rB,KAAK,SAACzH,GAC9C,OAAG+2B,EAAY/e,SAAShY,EAAI3D,IACnB,2BAAI2D,GAAX,IAAgBwxB,UAAU,IAEnB,eAAIxxB,MAGfs1B,EAAqBsB,QAErBv2B,EAAaM,KAAK,oCAfjBq2B,EAAP,oBAoBA,EAAiC1oB,aAAY8mB,GAAyB,CACpE3V,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KAEf,GADAW,EAAaO,UACVlB,EAAK42B,yBAAyBC,UAAUvvB,OAAS,EAAE,CACpD3G,EAAaC,QAAQ,uBACrB,IAAMy2B,EAAcr3B,EAAK42B,yBAAyBC,UAAU9uB,KAAK,SAACzK,GAAD,OAASA,EAAIX,MACxEu6B,EAAkBvD,EAAkB5rB,KAAK,SAACzH,GAC9C,OAAG+2B,EAAY/e,SAAShY,EAAI3D,IACnB,2BAAI2D,GAAX,IAAgBwxB,UAAU,IAEnB,eAAIxxB,MAGfs1B,EAAqBsB,QAErBv2B,EAAaM,KAAK,2BAfjBs2B,EAAP,oBA4DA,OACI,cAAChD,GAAD,CAAgBjB,gBArCI,SAAC,GAAsB,IAArBnB,EAAoB,EAApBA,MAAOgB,EAAa,EAAbA,QAC7BuD,EAAqB,CAACxmB,UAAW,CAACiiB,QAAOgB,cAoCSQ,kBAAmBA,EAAmBkB,SA5B3E,WACfl0B,EAAaM,KAAK,0BAClBq1B,EAAe,CAACpmB,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,qBAAsByY,OAAQA,EAAQE,eAzSnE,QAmUyFjB,cAxB1F,WACpBn0B,EAAaM,KAAK,0BAClBw1B,EAAa,CAACvmB,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,yBAuB9BkV,gBA1CI,SAAC,GAAU,IAAT31B,EAAQ,EAARA,GACtBgE,EAAaM,KAAK,yBAClB81B,EAAc,CAAC7mB,UAAW,CAACvT,SAwCuBk1B,mBAnC3B,SAAC,GAAoB,IAAnBl1B,EAAkB,EAAlBA,GAAIm1B,EAAc,EAAdA,SAC/BqF,EAAiB,CAACjnB,UAAW,CAACvT,KAAIm1B,eAkC0DM,cAhCxE,SAAC,GAAU,IAATz1B,EAAQ,EAARA,GACtBy6B,EAAY,CAAClnB,UAAW,CAACvT,SA+BiG01B,qBArB/F,SAAC,GAAU,IAAT11B,EAAQ,EAARA,GAC7BgE,EAAaM,KAAK,iCAClBu1B,EAAyB,CAACtmB,UAAW,CAACsnB,SAAU76B,EAlTzB,EAkTkD86B,SAAU96B,EAlT5D,EAkTqFwgB,aAAc7b,EAAG3B,KAAKyd,yBAoBhH2X,sBAlBU,WAC5Bp0B,EAAaM,KAAK,uBAClB,IAAMy2B,EAAa/D,EAAkBlrB,QAAQ,SAACC,EAAMyK,GAClD,MAAiB,YAAdA,EAAIgf,OAAwBhf,EAAI2e,SAG1B,YAAIppB,GAFL,GAAN,mBAAWA,GAAX,CAAiByK,EAAIxW,OAItB,IACH26B,EAAsB,CAACpnB,UAAW,CAACynB,IAAKD,MASwB1C,iBAPzC,WACvBr0B,EAAaM,KAAK,uBAClBs2B,EAAuB,CAACrnB,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,2B,uCC7TvD,SAASwa,GAA0Cp6B,GACtD,MAA8B8B,IAAMkC,UAAS,GAA7C,mBAAO4J,EAAP,KAAgBqc,EAAhB,KACA,EAAgCnoB,IAAMkC,SAAS,YAA/C,mBAAOq2B,EAAP,KAAiBC,EAAjB,KACA,EAA0Cx4B,IAAMkC,SAAS,IAAzD,mBAAOu2B,EAAP,KAAsBC,EAAtB,KAEMC,EAAWtyB,iBAAO,MACxB9D,qBAAW,WACT4lB,EAAWjqB,EAAMmR,SAASvD,SAC1B0sB,EAAYt6B,EAAMmR,SAASupB,WAC3B73B,QAAQC,IAAI9C,EAAMmR,UACdnR,EAAMmR,SAASwpB,wBAGjBH,EAAiBx6B,EAAMmR,SAASwpB,wBAAwB56B,MAFxDy6B,EAAiB,MAMlB,CAACx6B,EAAMmR,WAmBV,OACI,cAAC,IAAM9J,SAAP,UACI,eAACX,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAW,cAACgH,EAAA,EAAD,CAAQC,QAASA,EAAS/N,SArB5B,SAACU,GACpB0pB,EAAW1pB,EAAML,OAAO0N,SACxB5N,EAAM46B,eAAN,2BAAyB56B,EAAMmR,UAA/B,IAAyCvD,QAASrN,EAAML,OAAO0N,QAAS8sB,UAAWL,MAmBZ/zB,MAAM,gBACnE,cAACK,EAAA,EAAD,UAAY3G,EAAMmR,SAASlN,WAC3B,cAAC0C,EAAA,EAAD,UACGiH,EACC,eAACiQ,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,UACE,cAACygB,GAAA,EAAD,CAAYwC,IAAK4W,EAAjB,qBACA,cAAC3c,GAAA,EAAD,CACEiO,QAAQ,2BACR5sB,GAAG,qBACHc,MAAOo6B,EACPx6B,SA3BC,SAACU,GACpB+5B,EAAY/5B,EAAML,OAAOD,OACzBD,EAAM46B,eAAN,2BAAyB56B,EAAMmR,UAA/B,IAAyCvD,UAAS8sB,UAAWn6B,EAAML,OAAOD,UA0BxD46B,MAAO,cAAC1c,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAO,UAL/B,SAzCF,CAAC,WAAY,YAAa,QAgDb2J,KAAK,SAACgQ,GAAD,OACV,cAACkE,GAAA,EAAD,CAAUxe,MAAOsa,EAAjB,SAAiCA,GAANA,WAIhC,OAEP,cAAC5T,EAAA,EAAD,UACGiH,EACC,eAACiQ,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,UACE,cAACygB,GAAA,EAAD,CAAYwC,IAAK4W,EAAjB,gCACA,eAAC3c,GAAA,EAAD,CACEiO,QAAQ,2BACR5sB,GAAG,qBACHc,MAAOs6B,EACP16B,SAzCU,SAACU,GAC7Bi6B,EAAiBj6B,EAAML,OAAOD,OAC9B,IAAM66B,EAAqB96B,EAAM+6B,kBAAkBhQ,WAAW,SAAAiQ,GAAG,OAAIA,EAAIj7B,OAASQ,EAAML,OAAOD,SAC5F66B,GAAsB,EACvB96B,EAAM46B,eAAN,2BAAyB56B,EAAMmR,UAA/B,IAAyCvD,UAAS+sB,wBAAyB36B,EAAM+6B,kBAAkBD,MAEnG96B,EAAM46B,eAAN,2BAAyB56B,EAAMmR,UAA/B,IAAyCvD,UAAS+sB,wBAAyB,SAoC3DE,MAAO,cAAC1c,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAO,UAL/B,UAOE,cAAC6d,GAAA,EAAD,CAAUxe,OAAQ,EAAlB,iBAA0B,QACzBD,EAAM+6B,kBAAkBxwB,KAAK,SAACgQ,GAAD,OAC1B,cAACkE,GAAA,EAAD,CAAUxe,MAAOsa,EAAIxa,KAArB,SAAqEwa,EAAIxa,MAAzCC,EAAMmR,SAASlN,SAAWsW,EAAIxa,eAInE,YCvEvB,IAAMk7B,GAAiB7qB,aAAH,ilBA+Bd8qB,GAAc9qB,aAAH,2PAWX+qB,GAA0B/qB,aAAH,gVAOvBgrB,GAA+BhrB,aAAH,0NAQ5BirB,GAA2BjrB,aAAH,qMAQvB,SAASkrB,GAAuCt7B,GACnD,MAAkC8B,IAAMkC,SAAS,IAAjD,mBAAOiM,EAAP,KAAkBc,EAAlB,KACA,EAA0BjP,IAAMkC,SAAS,IAAzC,mBAAOmK,EAAP,KAAcotB,EAAd,KACA,EAAkDz5B,IAAMkC,SAAS,IAAjE,mBAAOw3B,EAAP,KAA0BC,EAA1B,KACA,EAAkD35B,IAAMkC,SAAS,IAAjE,mBAAO+2B,EAAP,KAA0BW,EAA1B,KACA1qB,aAASiqB,GAAgB,CAACvoB,UAAW,CAACiN,aAAc3f,EAAMb,IAAK8R,YAAa,eAC1EC,YAAa,SAAC1O,GACZ,IAAMm5B,EAAen5B,EAAK2O,SAAS5G,KAAK,SAAC4G,GACvC,OAAO,2BAAIA,GAAX,IAAqBvD,SAAS,OAEhC6tB,EAAqBj5B,EAAKo5B,gBAAgBC,oBAC1CN,EAAS/4B,EAAKo5B,gBAAgBztB,OAC9B,IAAM2tB,EAAoBH,EAAapxB,KAAK,SAAC4G,GAC3C,IAAMsU,EAAWjjB,EAAKo5B,gBAAgBC,mBAAmBlR,MAAM,SAACza,GAAD,OAAQA,EAAGiB,SAAShS,KAAOgS,EAAShS,MACnG,OAAIsmB,EACCA,EAAStU,SAAShS,KAAOqD,EAAKo5B,gBAAgBztB,MAAMhP,GAC9C,2BAAIgS,GAAX,IAAqBvD,SAAS,EAAM8sB,UAAW,OAAQqB,qBAAsBtW,EAAStmB,GAAIw7B,wBAAyBlV,EAASkV,0BAEvH,2BAAIxpB,GAAX,IAAqBvD,SAAS,EAAM8sB,UAAWjV,EAASiV,UAAWqB,qBAAsBtW,EAAStmB,GAAIw7B,wBAAyBlV,EAASkV,0BAEnI,2BAAIxpB,GAAX,IAAqBupB,UAAW,gBAElCoB,EAAkB5b,MAAM,SAACC,EAAEC,GAAH,OAASD,EAAElc,SAAWmc,EAAEnc,SAAW,GAAK,KAChE8M,EAAa+qB,GACb,IAAME,EAAc,YAAOx5B,EAAKm4B,yBAChCe,EAAqBM,IAEvBvqB,QAAS,SAACjP,GACRW,EAAahD,MAAM,kCACnB0C,QAAQ1C,MAAMqC,MAGlB,MAA8B4O,aAAY8pB,GAAa,CACrDhqB,YAAa,SAAC1O,GACZW,EAAaC,QAAQ,8BAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,8BACnB0C,QAAQC,IAAI,2BAA4BN,MANrCy5B,EAAP,oBASA,EAAuB7qB,aAAYiqB,GAA0B,CAC3DnqB,YAAa,SAAC1O,GACZW,EAAaC,QAAQ,gCAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,2BACnB0C,QAAQ1C,MAAM,sCAAuCqC,MANlD05B,EAAP,oBASA,EAAkC9qB,aAAYgqB,GAA8B,CAC1ElqB,YAAa,SAAC1O,GACZW,EAAaC,QAAQ,kCAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,8BACnB0C,QAAQ1C,MAAM,0CAA2CqC,MANtD25B,EAAP,oBASA,EAAiC/qB,aAAY+pB,GAAyB,CACpEjqB,YAAa,SAAC1O,GACZW,EAAaC,QAAQ,4CAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,uCACnB0C,QAAQ1C,MAAM,+BAAgCqC,MAN3C45B,EAAP,oBAyDMxB,EAAiB,SAAC1qB,GACtB,IAAIsQ,EAAO,YAAOvQ,GACE,SAAjBC,EAAGwqB,YAEJla,EAAUA,EAAQjW,KAAK,SAAC4G,GACtB,MAA0B,SAAvBA,EAASupB,UACH,2BAAIvpB,GAAX,IAAqBupB,UAAW,aAE3B,eAAIvpB,OAGfqP,EAAUA,EAAQjW,KAAK,SAAC4G,GACtB,OAAGA,EAAShS,KAAO+Q,EAAG/Q,GACb,eAAI+Q,GAEN,eAAIiB,MAEbJ,EAAayP,IAEjB,OACE,eAAC,IAAMnZ,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,yCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACE,cAACyC,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAAgBzJ,MAAO,CAACynB,UAAW,cAA/E,SACI,eAAC/d,EAAA,EAAD,CAAQzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA5F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,iCACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,sBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,kBACA,cAAC+F,EAAA,EAAD,8BAGR,cAAC+D,EAAA,EAAD,UAECuF,EAAU1F,KAAK,SAAC2F,GAAD,OACZ,cAACkqB,GAAD,CAC6BjpB,SAAUjB,EAAI0qB,eAAgBA,EAAgBG,kBAAmBA,GAArF,WAAa7qB,EAAG/Q,gBAOvC,eAACyI,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,oBAGA,cAACD,EAAA,EAAD,CAAQE,QAhGG,WAGf,IAAM81B,EAAWpsB,EAAU0a,MAAM,SAACza,GAAD,MAAyB,SAAjBA,EAAGwqB,aAC5C,GAAI2B,EAAJ,CAIGA,EAASl9B,KAAOgP,EAAMhP,IACvB88B,EAAoB,CAACvpB,UAAW,CAC9BiN,aAAc3f,EAAMb,GACpBm9B,SAAUD,EAASl9B,MAIvB,IAAIo9B,EAAe,GACfC,EAAkB,GACtBvsB,EAAU8d,SAAS,SAAC7d,GAClB,IAAIusB,EAAWjB,EAAkB7Q,MAAM,SAAC+R,GAAD,OAASA,EAAIvrB,SAAShS,KAAO+Q,EAAG/Q,MACpEs9B,EAEEvsB,EAAGtC,QAEDsC,EAAGwqB,YAAc+B,EAAS/B,WAAaxqB,EAAGyqB,0BAA4B8B,EAAS9B,yBAChFyB,EAAuB,CAAC1pB,UAAW,CAACqpB,qBAAsBU,EAASt9B,GAAIu7B,UAAWxqB,EAAGwqB,UAAWC,wBAAyBzqB,EAAGyqB,wBAAwBzqB,EAAGyqB,wBAAwBx7B,GAAG,QAKpLq9B,EAAgB7yB,KAAK8yB,EAASt9B,IAK7B+Q,EAAGtC,SACJ2uB,EAAa5yB,KAAK,CAACgW,aAAc3f,EAAMb,GAAI+S,YAAahC,EAAG/Q,GAAIu7B,UAAWxqB,EAAGwqB,eAKhF6B,EAAazyB,OAAS,GACvBoyB,EAAa,CAACxpB,UAAW,CAACzC,UAAWssB,KAEpCC,EAAgB1yB,OAAS,GAC1BqyB,EAAwB,CAACzpB,UAAW,CAACiqB,sBAAuBH,KAE9Dx8B,EAAMgI,eAzCJ7E,EAAahD,MAAM,qCA2FUe,QAAQ,YAAYoF,MAAM,YAArD,0B,yECtOJs2B,GAAoBxsB,aAAH,yPAgBhB,SAASysB,GAAqC78B,GACjD,MAAwB8B,IAAMkC,SAAS,IAAvC,mBAAOjE,EAAP,KAAa+8B,EAAb,KACA,EAA8Bh7B,IAAMkC,SAAS,IAA7C,mBAAO+4B,EAAP,KAAgBC,EAAhB,KACA,EAAsCl7B,IAAMkC,SAAS,IAArD,mBAAOi5B,EAAP,KAAoBC,EAApB,KACA,EAAkCp7B,IAAMkC,SAAS,IAAjD,mBAAOm5B,EAAP,KAAkBC,EAAlB,KACA,EAA8Bt7B,IAAMkC,SAAS,IAA7C,mBAAOq5B,EAAP,KAAgBC,EAAhB,KACA,EAA8Bx7B,IAAMkC,SAAS,IAA7C,mBAAOu5B,EAAP,KAAgBC,EAAhB,KACA,EAA4C17B,IAAMkC,SAAS,IAA3D,mBAAOy5B,EAAP,KAAuBC,EAAvB,KACA,EAAgC57B,IAAMkC,UAAS,GAA/C,mBAAO25B,EAAP,KAAiBC,EAAjB,KAEA5sB,aAAS4rB,GAAmB,CAC1B3rB,YAAa,WACbyB,UAAW,CAACiN,aAAc3f,EAAMb,IAChC+R,YAAa,SAAC1O,GACZ,IAAIi7B,EAAiBj7B,EAAKo5B,gBAAgBiC,gBAC1C,IACEJ,EAAiB54B,KAAKC,UAAUD,KAAK2E,MAAMi0B,GAAiB,KAAM,GACnE,MAAMt9B,IAGL28B,EAAQt6B,EAAKo5B,gBAAgB77B,MAC7Bi9B,EAAWx6B,EAAKo5B,gBAAgBmB,SAChCG,EAAe16B,EAAKo5B,gBAAgBkC,cACpCV,EAAa56B,EAAKo5B,gBAAgBmC,YAClCT,EAAW96B,EAAKo5B,gBAAgBoC,UAChCR,EAAWh7B,EAAKo5B,gBAAgB2B,SAChCG,EAAkBD,GAClBG,EAAYp7B,EAAKo5B,gBAAgB+B,WAErClsB,QAAS,WACPtO,EAAahD,MAAM,2BAGvB,IAAM89B,EAAe,SAACl+B,EAAME,EAAOE,GACjC,OAAOJ,GACL,IAAK,OACH+8B,EAAQ78B,GACR,MACF,IAAK,kBACH+8B,EAAW/8B,GACX,MACF,IAAK,uBACHi9B,EAAej9B,GACf,MACF,IAAK,qBACHm9B,EAAan9B,GACb,MACF,IAAK,mBACHq9B,EAAWr9B,GACX,MACF,IAAK,cACHu9B,EAAWv9B,GACX,MACF,IAAK,uBACHy9B,EAAkBz9B,KA2B1B,OACE,eAAC,IAAMoH,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,oBAA4CY,KAC5C,eAACyH,GAAA,EAAD,CAAeC,UAAU,EAAM9G,MAAO,CAACynB,UAAW,cAAlD,UACE,cAAC1gB,GAAA,EAAD,6EAGA,cAAC,EAAD,CACEzG,WAAS,EACThB,MAAOF,EACPF,SAAUo+B,EACVt2B,OAAO,QACP5H,KAAK,SATT,uBAWsB,cAAC4N,EAAA,EAAD,CAAQC,QAAS+vB,EAAU99B,SAhChC,SAACU,GACpBq9B,EAAYr9B,EAAML,OAAO0N,UA+BkDtH,MAAM,cAC7E,cAAC,EAAD,CACEqB,OAAO,QACP1H,MAAO88B,EACPl9B,SAAUo+B,EACVl+B,KAAK,oBAEP,cAAC,EAAD,CACE4H,OAAO,QACP1H,MAAOg9B,EACPp9B,SAAUo+B,EACVl+B,KAAK,yBAEP,cAAC,EAAD,CACE4H,OAAO,QACP1H,MAAOk9B,EACPt9B,SAAUo+B,EACVl+B,KAAK,uBAEP,cAAC,EAAD,CACE4H,OAAO,QACP1H,MAAOo9B,EACPx9B,SAAUo+B,EACVl+B,KAAK,qBAEP,cAAC,EAAD,CACE4H,OAAO,QACP1H,MAAOs9B,EACP19B,SAAUo+B,EACVl+B,KAAK,gBAEP,cAAC,KAAD,CACI2Y,KAAK,OACLrJ,MAAO,UACPxP,SArEa,SAACI,EAAOM,GAC7Bm9B,EAAkBz9B,IAqEV0Y,SAAU,GACVC,YAAY,EACZslB,SAAU,GACVrlB,qBAAqB,EACrB5Y,MAAOw9B,EACP78B,MAAO,OACPkY,WAAY,CACVC,iBAAiB,EACjBC,QAAS,EACTmlB,WAAW,QAGnB,eAACv2B,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,oBAGA,cAACD,EAAA,EAAD,CAAQE,QAhFG,WACfvG,EAAMo+B,kBAAkB,CACtBze,aAAc3f,EAAMb,GACpBY,KAAMA,EACNg9B,QAASA,EACTe,aAAcb,EACdc,WAAYZ,EACZa,SAAUX,EACVE,QAASA,EACTM,gBAAiBJ,EACjBE,SAAUA,IAEZ39B,EAAMgI,WAoEyB9G,QAAQ,YAAYoF,MAAM,YAArD,0BCjKV,I,SAAM+3B,GAAgCjuB,aAAH,kPAS5B,SAASkuB,GAAkBt+B,GAC9B,MAA8D8B,IAAMkC,UAAS,GAA7E,mBAAOu6B,EAAP,KAAgCC,EAAhC,KACA,EAAsD18B,IAAMkC,UAAS,GAArE,mBAAOy6B,EAAP,KAA4BC,EAA5B,KACA,EAAoE58B,IAAMkC,UAAS,GAAnF,mBAAO26B,EAAP,KAAmCC,EAAnC,KACM96B,EAAKC,YAAe/B,GAC1B,EAAiCoP,aAAYitB,GAA+B,CAC1EntB,YAAa,SAAC1O,GAC8B,YAAvCA,EAAKq8B,uBAAuB5sB,QAC7BjQ,EAAQ,2BAAIA,GAAL,IAAcG,KAAK,2BAAKH,EAAO,MAAb,IAAuB4d,qBAAsBpd,EAAKq8B,uBAAuBlf,aAAcmf,uBAAwBt8B,EAAKq8B,uBAAuBE,oBACpK57B,EAAaC,QAAQ,8BAErBD,EAAahD,MAAMqC,EAAKq8B,uBAAuB1+B,QAGnDsR,QAAS,SAACjP,GACRW,EAAahD,MAAM,sCACnB0C,QAAQ1C,MAAMqC,MAXXq8B,EAAP,oBAiBA,OACI,cAAC,IAAMx3B,SAAP,UACI,eAACX,EAAA,EAAD,CAAyBkE,OAAK,EAA9B,UACI,eAACjE,EAAA,EAAD,WAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAKi4B,GAA2B,IAAS13B,UAAW,cAAC,KAAD,IAAaR,MAAOtG,EAAM29B,SAAW,YAAc,UAAWz8B,QAAQ,YAAxJ,kBACVq9B,GACG,cAACt2B,GAAD,CAAcG,KAAMm2B,EAAyBz9B,WAAS,EAAC4H,SAAU,KAC7DV,QAAS,WAAKw2B,GAA2B,IACzC71B,YAAa,cAACk0B,GAAD,CAAsC70B,QAAS,WAAKw2B,GAA2B,IAAUr/B,GAAIa,EAAMb,GAAIi/B,kBAAmBp+B,EAAMo+B,yBAIrJ,eAACz3B,EAAA,EAAD,WAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAKm4B,GAAuB,IAAS53B,UAAW,cAAC,KAAD,IAAsBR,MAAOtG,EAAM29B,SAAW,YAAc,UAAWz8B,QAAQ,YAA7J,kBACVu9B,GACG,cAACx2B,GAAD,CAAcG,KAAMq2B,EAAqBrW,UAAW,aAActnB,WAAS,EAAC4H,SAAU,KAClFV,QAAS,WAAK02B,GAAuB,IACrC/1B,YAAa,cAAC2yB,GAAD,CAAwCn8B,GAAIa,EAAMb,GAAI6I,QAAS,WAAK02B,GAAuB,WAIhH,eAAC/3B,EAAA,EAAD,WAAY3G,EAAMD,KAAlB,IAAyBC,EAAM29B,SAAW,gBAAkB,MAC5D,cAACh3B,EAAA,EAAD,UAAY3G,EAAMmO,MAAMlK,WACxB,cAAC0C,EAAA,EAAD,UACA,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQE,UAAW,cAAC,KAAD,IAAmBP,QAAS,WAAOpD,EAAaK,QAAQ,oBAAqB8C,MAAM,UAAUpF,QAAQ,YAArI,wBAEA,cAACyF,EAAA,EAAD,UAAY3G,EAAMb,KAAO2E,EAAG3B,KAAKyd,qBAAwB,oBACvD,eAAC,IAAMvY,SAAP,WACE,cAAChB,EAAA,EAAD,CAAQO,KAAK,QAAOE,UAAW,cAAC,KAAD,IAAkBP,QAAS,WAAKq4B,GAA8B,IAASt4B,MAAM,UAAUpF,QAAQ,YAA9H,0BACCy9B,GACC,cAACzW,GAAD,CAAqBlgB,QAAS,WAAO42B,GAA8B,IAAUx4B,SA/BlE,WAC3By4B,EAAuB,CAACnsB,UAAW,CAACR,YAAapO,EAAG3B,KAAKqL,QAASmS,aAAc3f,EAAMb,OA+BpEiJ,KAAMu2B,EAA4Bp3B,MAAO,4BAA6B+gB,WAAY,SAClFH,WAAY,8DA5BTnoB,EAAMb,MC/BjC,I,GAAMuR,GAAsBN,aAAH,4MASnB4uB,GAAmB5uB,aAAH,qhBAShB6uB,GAAuB7uB,aAAH,0RAkBnB,SAAS8uB,GAAel/B,GAC3B,IAAMqP,EAAQC,eACd,EAAoDxN,IAAMkC,UAAS,GAAnE,mBAAOm7B,EAAP,KAAwBC,EAAxB,KACA,EAAsBhuB,aAAYV,GAAqB,CACnD6R,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KACqB,YAA/BA,EAAK8P,eAAeL,OACnB9O,EAAaC,QAAQ,oBAErBD,EAAahD,MAAMqC,EAAK8P,eAAenS,QAG/CsR,QAAS,SAACC,GACRvO,EAAaK,QAAQ,iCACrBX,QAAQC,IAAI4O,MAVXa,EAAP,oBAaA,EAA0BnB,aAAY4tB,GAAkB,CACpD9tB,YAAa,SAAC1O,GACZxC,EAAMo+B,kBAAkB57B,EAAK68B,wBAC7Bl8B,EAAaC,QAAQ,mCAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,8BACnB0C,QAAQC,IAAI,2BAA4BN,MAPvC88B,EAAP,oBAUA,EAAuBluB,aAAY6tB,GAAsB,CACrD/tB,YAAa,SAAC1O,GACVK,QAAQC,IAAIN,GACuB,YAAhCA,EAAK+8B,gBAAgBttB,QACpB9O,EAAaC,QAAQ,mCACrBpD,EAAMw/B,eAAeh9B,EAAK+8B,gBAAgBE,YAE1Ct8B,EAAahD,MAAMqC,EAAK+8B,gBAAgBp/B,QAGhDsR,QAAS,SAACjP,GACNK,QAAQC,IAAIN,MAXbk9B,EAAP,oBAcMtB,EAAoB,SAAC,GAA2G,IAA1Gze,EAAyG,EAAzGA,aAAc5f,EAA2F,EAA3FA,KAAMg9B,EAAqF,EAArFA,QAASe,EAA4E,EAA5EA,aAAcC,EAA8D,EAA9DA,WAAYC,EAAkD,EAAlDA,SAAUT,EAAwC,EAAxCA,QAASM,EAA+B,EAA/BA,gBAAiBF,EAAc,EAAdA,SACnH2B,EAAgB,CAAC5sB,UAAU,CACvBiN,eACA5f,OACAg9B,UACAe,eACAC,aACAC,WACAT,UACAM,kBACAF,eAkBR,OACI,eAAC,IAAMt2B,SAAP,WACA,eAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,UACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,wBAGA,cAAC1J,EAAA,EAAD,CAAQO,KAAK,QAAQL,QATA,WACzBm5B,KAQwD/+B,MAAO,CAAC6F,YAAa,OAAQyI,MAAO,QAASY,UAAW,QAAS/I,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAAzL,2BAEA,cAACmF,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAK64B,GAAyB,IAASz+B,MAAO,CAAC6F,YAAa,OAAQyI,MAAO,QAASY,UAAW,QAAS/I,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAA1M,0BACCi+B,GACG,cAACl3B,GAAD,CAAcG,KAAM+2B,EAChBn3B,QAAS,WAAKo3B,GAAyB,IACvCz2B,YAAa,cAAC3B,GAAD,aAAwBO,MAAM,eAAeO,SA3B9C,SAAC3I,EAAI8E,EAAUgD,EAAaE,GACjDF,IAAgBE,EACfhE,EAAahD,MAAM,yBACS,IAAvBgH,EAAY2C,OACjB3G,EAAahD,MAAM,8BACM,IAApB8D,EAAS6F,OACd3G,EAAahD,MAAM,+BAEnBoS,EAAY,CAACG,UAAU,CAACzO,SAASA,EAAUE,SAASgD,KACpDi4B,GAAyB,KAkBwEv3B,YAAa,WAAKu3B,GAAyB,KAAep/B,SAK/J,cAACkK,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SAEI,eAACC,EAAA,EAAD,CAAQzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA5F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,uBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,uBACA,cAAC+F,EAAA,EAAD,6BACA,cAACA,EAAA,EAAD,8BACA,cAACA,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,sBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,mCAGR,cAAC8J,EAAA,EAAD,UAEC1K,EAAM2/B,WAAWp1B,KAAK,SAAC2F,GAAD,OACnB,cAACouB,GAAD,yBAC8BF,kBAAmBA,GACzCluB,GAFR,IAEYiB,SAAUnR,EAAMmR,WADnB,YAAcjB,EAAG/Q,iBCrI9C,IAAMsU,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJqI,OAAQ,QAEV4gB,MAAO,CACLC,SAAU,OACV/Y,gBAAiB,4BAEnBgZ,OAAQ,CACN9gB,OAAQ0H,EAAM6R,QAAQ,GAAK,IAE7BwH,QAAS,CACPjZ,gBAAiB,qBACjBmF,OAAQ,qCAIZ,SAASgrB,GAA4B5/B,GACjC,IAAMiV,EAAUxB,KACVpE,EAAQC,eACd,EAA8BxN,IAAMkC,SAAS,IAA7C,mBAAO4J,EAAP,KAAgBqc,EAAhB,KACA,EAAwBnoB,IAAMkC,SAAS,IAAvC,mBAAOyQ,EAAP,KAAayV,EAAb,KACA,EAA0BpoB,IAAMkC,SAAS,IAAzC,mBAAOmmB,EAAP,KAAcC,EAAd,KACA,EAAkCtoB,IAAMkC,SAAS,IAAjD,mBAAO67B,EAAP,KAAkBC,EAAlB,KACA,EAAoCh+B,IAAMkC,SAAS,IAAnD,mBAAO+7B,EAAP,KAAmBC,EAAnB,KACM3V,EAAcC,EAAa1c,EAAS6G,GACpC8V,EAAeD,EAAa1c,EAASuc,GAC3C,SAASO,EAAIvK,EAAGC,GACd,OAAGpgB,EAAM8qB,QACA3K,EAAEvO,QAAQ,SAAC3R,GAAD,YAAsFQ,IAA3E2f,EAAEuK,MAAM,SAAChgB,GAAD,OAAaA,EAAQ3K,EAAM8qB,WAAa7qB,EAAMD,EAAM8qB,eAEnF3K,EAAEvO,QAAO,SAAC3R,GAAD,OAAiC,IAAtBmgB,EAAE4K,QAAQ/qB,MAEvC,SAASqqB,EAAanK,EAAGC,GACvB,OAAGpgB,EAAM8qB,QACA3K,EAAEvO,QAAQ,SAAC3R,GAAD,YAAsFQ,IAA3E2f,EAAEuK,MAAM,SAAChgB,GAAD,OAAaA,EAAQ3K,EAAM8qB,WAAa7qB,EAAMD,EAAM8qB,eAEnF3K,EAAEvO,QAAO,SAAC3R,GAAD,OAAiC,IAAtBmgB,EAAE4K,QAAQ/qB,MAEvC,IAAM2qB,EAAe,SAAC3qB,GAAD,OAAW,WAC9B,IAAI4qB,GAAgB,EAElBA,EADC7qB,EAAM8qB,QACQld,EAAQmd,WAAW,SAACpgB,GAAD,OAAaA,EAAQ3K,EAAM8qB,WAAa7qB,EAAMD,EAAM8qB,YAEvEld,EAAQod,QAAQ/qB,GAGjC,IAAMgrB,EAAU,YAAOrd,IAED,IAAlBid,EACFI,EAAWthB,KAAK1J,GAEhBgrB,EAAWC,OAAOL,EAAc,GAGlCZ,EAAWgB,KAoBb5mB,qBAAW,WACT,IAAMoQ,EAAOzU,EAAMyU,KAAKxJ,QAAQ,SAACC,EAAMyK,GACrC,YAAqBlV,IAAlBT,EAAM8qB,QACJ9qB,EAAMmqB,MAAMrP,SAASnF,GACf,YAAIzK,GAEP,GAAN,mBAAWA,GAAX,CAAiByK,IAEd3V,EAAMmqB,MAAMQ,MAAM,SAAAhgB,GAAO,OAAIA,EAAQ3K,EAAM8qB,WAAanV,EAAI3V,EAAM8qB,YAC5D,YAAI5f,GAEP,GAAN,mBAAWA,GAAX,CAAiByK,MAGlB,IACHuU,EAAQzV,GACR2V,EAASpqB,EAAMmqB,OACf2V,EAAa9/B,EAAM6/B,WACnBG,EAAchgC,EAAM+/B,cACnB,CAAC//B,EAAMyU,KAAMzU,EAAMmqB,MAAOnqB,EAAM6/B,UAAW7/B,EAAM+/B,WAAY//B,EAAM8qB,UACtEzmB,qBAAW,WACTrE,EAAMH,SAAS,CAACypB,SAAUa,EAAOvU,MAAO5V,EAAM4V,UAC7C,CAACuU,IACJ,IAAMoB,EAAa,SAAChkB,EAAOikB,GAAR,OACjB,cAACzhB,EAAA,EAAD,CAAOpJ,MAAO,CAACC,MAAM,QAArB,SACE,eAACoV,GAAA,EAAD,WACE,cAACyV,GAAA,EAAD,CACErhB,UAAW6K,EAAQsT,MACnBhhB,MAAOA,IAET,cAACokB,GAAA,EAAD,CAAS1W,QAAS,CAAC3V,KAAM2V,EAAQyT,WACjC,cAACjS,GAAA,EAAD,CAAa9V,MAAO,CAACuF,OAAQ,aAAcsiB,SAAU,QAASpe,UAAW6K,EAAQsT,MAAjF,SACE,cAACqD,GAAA,EAAD,CAAMC,OAAK,EAAC1hB,UAAU,MAAM6Z,KAAK,OAAOrjB,MAAO,CAACjB,QAAQ,GAAI0K,UAAW6K,EAAQsT,MAA/E,SACGiD,EAAMjhB,KAAI,SAACuhB,GACV,IAAM7rB,OAA0BQ,IAAlBT,EAAM8qB,QAAwBgB,EAAWA,EAAS9rB,EAAM8qB,SAChEiB,EAAO,6BAAyB9rB,EAAzB,UACb,OACE,eAAC+rB,GAAA,EAAD,CAAUrrB,MAAO,CAACjB,QAAQ,GAAgBskB,KAAK,WAAWyE,QAAM,EAACliB,QAASqkB,EAAakB,GAAvF,UACE,cAACG,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CACEte,aAA2BnN,IAAlBT,EAAM8qB,SAAoD,IAA5Bld,EAAQod,QAAQ/qB,IAAuF,IAAvE2N,EAAQmd,WAAW,SAACpgB,GAAD,OAAaA,EAAQ3K,EAAM8qB,WAAa7qB,KAClIksB,UAAW,EACXC,eAAa,EACbte,WAAY,CAAE,kBAAmBie,OAGrC,cAACM,GAAA,EAAD,CAAcltB,GAAI4sB,EAAS7O,QAASjd,MATHA,gBAmBnD,OACE,eAACsd,GAAA,EAAD,CAAMC,WAAS,EAAC0D,QAAS,EAAGzD,QAAQ,SAAS5G,WAAW,SAASzM,UAAW6K,EAAQ3V,KAApF,UACE,cAACie,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,GAAf,SACE,cAACrX,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,SACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,SACK/P,EAAM4V,YAIjB,cAAC2H,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SAAmBmK,EAAWsU,EAAWprB,KACzC,cAAC8I,GAAA,EAAD,CAAM4D,MAAI,EAAV,SACE,eAAC5D,GAAA,EAAD,CAAMC,WAAS,EAAC8O,UAAU,SAASzV,WAAW,SAA9C,UACE,cAACxQ,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QA1Fe,WACrB6jB,EAASD,EAAMoC,OAAO9X,IACtByV,EAAQ,KAyFF/oB,SAA0B,IAAhBsT,EAAK3K,OACf,aAAW,iBANb,oBAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QAhGmB,WACzB6jB,EAASD,EAAMoC,OAAOlC,IACtBH,EAAQQ,EAAIjW,EAAM4V,IAClBJ,EAAWS,EAAI9c,EAASyc,KA8FlBlpB,SAAiC,IAAvBkpB,EAAYvgB,OACtB,aAAW,sBANb,eAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QArGkB,WACxB2jB,EAAQzV,EAAK8X,OAAOhC,IACpBH,EAASM,EAAIP,EAAOI,IACpBN,EAAWS,EAAI9c,EAAS2c,KAmGlBppB,SAAkC,IAAxBopB,EAAazgB,OACvB,aAAW,qBANb,eAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QA1Gc,WACpB2jB,EAAQzV,EAAK8X,OAAOpC,IACpBC,EAAS,KAyGHjpB,SAA2B,IAAjBgpB,EAAMrgB,OAChB,aAAW,gBANb,yBAYJ,cAACyT,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SAAmBmK,EAAWwU,EAAY5V,QAIhD,IAAM8V,GAAuBn+B,IAAMo+B,KAAKN,IAClCO,GAAkC/vB,aAAH,2PAY9B,SAASgwB,GAAT,GAA6H,IAA/FC,EAA8F,EAA9FA,YAAaj6B,EAAiF,EAAjFA,SAAyBk6B,EAAwD,EAAvE/F,cAAkCvyB,EAAqC,EAArCA,QAASu4B,EAA4B,EAA5BA,gBAAiBC,EAAW,EAAXA,SACtH,EAAwC1+B,IAAMkC,SAAS,IAAvD,mBAAO+gB,EAAP,KAAqBzN,EAArB,KACA,EAAgDxV,IAAMkC,SAAS,IAA/D,mBAAO2lB,EAAP,KAAyB8W,EAAzB,KACA,EAA0C3+B,IAAMkC,SAAS,IAAzD,mBAAOu2B,EAAP,KAAsBC,EAAtB,KACAxpB,aAASmvB,GAAiC,CAAClvB,YAAa,eACtDC,YAAa,SAAC1O,GACT89B,GACD9F,EAAiB8F,GAGnB,IAAMI,EAAsBl+B,EAAKwQ,YAAYzI,KAAK,SAAAwd,GAChD,IAAI4B,EAAmB,GAIvB,YAHgClpB,IAA7B8/B,EAAgBxY,EAAEnS,SACnB+T,EAAgB,YAAO4W,EAAgBxY,EAAEnS,SAEpC,2BAAImS,GAAX,IAAcuB,SAAUK,OAE1BrS,EAAgBopB,GAChBD,EAAoB,eAAIF,KAG1B9uB,QAAS,SAACjP,OAIZ,IAAM3C,EAAWiC,IAAM0yB,aAAa,YAAwB,IAAtBlL,EAAqB,EAArBA,SAAU1T,EAAW,EAAXA,MAC9C6qB,EAAoB,2BAAI9W,GAAL,mBAAwB/T,EAAQ0T,OAClD,CAACK,IAiCJ,OACE,eAAC,IAAMtiB,SAAP,WACE,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,SAAqCkhC,IACrC,eAAC74B,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACE,cAAC,EAAD,CAAiBtG,UAAWq/B,EAAU3gC,SApCd,SAACE,EAAME,EAAOE,GAC1Cq6B,EAAiBv6B,IAmC0DA,MAAOs6B,EAAex6B,KAAK,kBAAkBkB,WAAS,EAACI,eAAa,IAC1I0jB,EAAaxa,KAAI,SAAAwd,GAAC,OACjB,cAACkY,GAAD,CAAoCJ,UAAW,cAAehgC,SAAUA,EAAUkgC,WAAY,mBAAoBjV,QAAS,MAAOX,MAAOpC,EAAEuB,SAAU7U,KAAMsT,EAAEa,SAAUhT,MAAOmS,EAAEnS,OAArJmS,EAAEnS,aAGjC,eAAChO,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASyB,EAAS9G,QAAQ,YAAYoF,MAAM,UAApD,mBAGA,cAACD,EAAA,EAAD,CAAQE,QA1CC,WACb,GAA4B,KAAzBg0B,EAAcoG,OAAjB,CAOA,IAFA,IAAIC,EAAQ,GACRC,EAAW,GACf,MAAmBt3B,OAAOskB,OAAOlE,GAAjC,eAEE,IAFE,IAAM1pB,EAAK,KAEL+d,EAAI,EAAGA,EAAI/d,EAAM6J,OAAQkU,IAC/B4iB,EAAMj3B,KAAK,CAACm3B,WAAY7gC,EAAM+d,GAAG7e,GAAIY,KAAKw6B,EAAcoG,SAG5D,IAdmB,iBAejB,IADE,IAAM1gC,EAAK,KAdI,WAeT+d,GAGN,IAAIvT,EAAQm2B,EAAM7V,WAAU,SAAAnB,GAAC,OAAIA,EAAEkX,aAAe7gC,EAAM+d,GAAG7e,MACxDsL,GAAS,EACVm2B,EAAM1V,OAAOzgB,EAAO,GAEpBo2B,EAASl3B,KAAK,CAACm3B,WAAY7gC,EAAM+d,GAAG7e,GAAIY,KAAMw6B,EAAcoG,UAPxD3iB,EAAI,EAAGA,EAAI/d,EAAM6J,OAAQkU,IAAK,EAA9BA,IADV,MAAmBzU,OAAOskB,OAAO0S,GAAjC,eAAmD,IAYnDn6B,EAAS,CAACw6B,QAAOC,aACjB74B,SAzBE7E,EAAaK,QAAQ,kCAwCMtC,QAAQ,YAAYoF,MAAM,YAAnD,0B,wCCrRFy6B,GAAoB3wB,aAAH,sYAiBjB4wB,GAA0B5wB,aAAH,yKASvB6wB,GAAiC7wB,aAAH,0OAW7B,SAAS8wB,GAAsBlhC,GAClC,IAAMqP,EAAQC,eACd,EAAoCxN,IAAMkC,UAAS,GAAnD,mBAAOuL,EAAP,KAAgBC,EAAhB,KACA,EAAoC1N,IAAMkC,SAAS,IAAnD,mBAAOm9B,EAAP,KAAmBC,EAAnB,KACA,EAA8BhwB,aAAY2vB,GAAmB,CACzD7vB,YAAa,SAAC1O,GACV,IAAM6+B,EAAe7+B,EAAK8+B,+BAA+BjI,UAAUpuB,QAAQ,SAACC,EAAMyK,GAK9E,YAJ2ClV,IAAxCyK,EAAKyK,EAAIyT,QAAQpW,YAAY4C,SAC5B1K,EAAKyK,EAAIyT,QAAQpW,YAAY4C,OAAS,IAE1C1K,EAAKyK,EAAIyT,QAAQpW,YAAY4C,OAAOjM,KAAKgM,GAClC,eAAIzK,KACZ,IAGCq2B,EAAiB,YAAOJ,GACxBK,GAAQ,EACNC,EAAgBF,EAAkBh3B,KAAK,SAAAywB,GACzC,GAAGA,EAAG,OAAax4B,EAAK8+B,+BAA+BjI,UAAU,GAAGt5B,KAAK,CACrEyhC,GAAQ,EAGR,IADA,IAAIE,EAAa,GACjB,MAA0Bn4B,OAAOmgB,QAAQ2X,GAAzC,eAAuD,CAAnD,0BAAO7gC,EAAP,KAAYP,EAAZ,UACuBQ,IAApBihC,EAAWlhC,GACVkhC,EAAWlhC,GAAX,YAAsBP,GAEtByhC,EAAWlhC,GAAX,sBAAsBkhC,EAAWlhC,IAAjC,YAA0CP,IAGlD,IAAI,IAAJ,MAA0BsJ,OAAOmgB,QAAQsR,EAAG,SAA5C,eAAyD,CAArD,0BAAOx6B,EAAP,KAAYP,EAAZ,UACuBQ,IAApBihC,EAAWlhC,GACVkhC,EAAWlhC,GAAX,YAAsBP,GAEtByhC,EAAWlhC,GAAX,sBAAsBkhC,EAAWlhC,IAAjC,YAA0CP,IAGlD,OAAO,2BAAI+6B,GAAX,IAAgBtR,QAASgY,IAEzB,OAAO,eAAI1G,MAMfoG,EAHAI,EAGc,YAAIC,GAFJ,GAAD,mBAAKA,GAAL,CAAoB,CAAC,KAAQj/B,EAAK8+B,+BAA+BjI,UAAU,GAAGt5B,KAAM,QAAWshC,OAKpH5vB,QAAS,SAACC,GACRvO,EAAaK,QAAQ,oCACrBX,QAAQC,IAAI4O,MA7CXiwB,EAAP,oBAgDA,EAA0BvwB,aAAY4vB,GAAyB,CAC3D9vB,YAAa,SAAC1O,GACV,GAAmC,YAAhCA,EAAKo/B,gBAAgB3vB,OAAqB,CACzC,IAAM4vB,EAAqBV,EAAWvvB,QAAQ,SAAAwO,GAAC,OAAIA,EAAErgB,OAASyC,EAAKo/B,gBAAgB7hC,QACnFqhC,EAAcS,GACd1+B,EAAaC,QAAQ,wCAErBD,EAAahD,MAAMqC,EAAKo/B,gBAAgBzhC,QAGhDsR,QAAS,SAACC,GACNvO,EAAaK,QAAQ,+BACrBX,QAAQC,IAAI4O,MAZbkwB,EAAP,oBAeA,EAAiCxwB,aAAY6vB,GAAgC,CACzE/vB,YAAa,SAAC1O,GACV,GAAwC,YAArCA,EAAKs/B,qBAAqB7vB,OAAqB,CAC9C9O,EAAaC,QAAQ,mCACrB,IACMq+B,EADe,YAAON,GACY52B,KAAK,SAAAywB,GACzC,GAAGA,EAAG,OAAax4B,EAAKs/B,qBAAqB/hC,KAAK,CAG9C,IADA,IAAI2hC,EAAa,GACjB,MAA0Bn4B,OAAOmgB,QAAQsR,EAAG,SAA5C,eAAyD,CAArD,0BAAOx6B,EAAP,KACMuhC,EADN,KAC6BnwB,QAAQ,SAAAhT,GAAC,OAAK4D,EAAKs/B,qBAAqBE,YAAYlnB,SAASlc,EAAEO,OAC5FuiC,EAAWlhC,GAAOuhC,EAEtB,OAAO,2BAAI/G,GAAX,IAAgBtR,QAASgY,IAEzB,OAAO,eAAI1G,MAGnBoG,EAAc,YAAIK,SAElBt+B,EAAahD,MAAMqC,EAAKs/B,qBAAqB3hC,QAGrDsR,QAAS,SAACC,GACNvO,EAAaK,QAAQ,+BACrBX,QAAQC,IAAI4O,MAzBbuwB,EAAP,oBA4BAngC,IAAMuC,WAAW,WACb+8B,EAAcphC,EAAMmhC,cACrB,CAACnhC,EAAMmhC,aACV,IAGMe,EAAgB,SAAC,GAAuB,IAAtBtB,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,SACxBD,EAAM92B,OAAS,GACd63B,EAAoB,CAACjvB,UAAW,CAACgX,QAASkX,KAE9C,IAAMuB,EAAiBtB,EAASt2B,KAAI,SAAAqf,GAAC,OAAIA,EAAEkX,cACxCqB,EAAer4B,OAAS,GACvBm4B,EAAuB,CAACvvB,UAAW,CAACgX,QAASyY,EAAgBpiC,KAAM8gC,EAAS,GAAT,SAIrEuB,EAAiB,SAAC,GAAY,IAAXriC,EAAU,EAAVA,KACrB6hC,EAAgB,CAAClvB,UAAU,CAAC3S,WAEhC,OACI,eAAC,IAAMsH,SAAP,WACA,eAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,UACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,iCAGA,cAAC1J,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAKiJ,GAAiB,IAAS7O,MAAO,CAAC6F,YAAa,OAAQyI,MAAO,QAASY,UAAW,QAAS/I,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAAlM,4BACCqO,GACG,cAACtH,GAAD,CAAcG,KAAMmH,EAASzO,WAAW,EAAM4H,SAAS,KACnDV,QAAS,WAAKwH,GAAiB,IAC/B7G,YAAa,cAACy3B,GAAD,CAAqBI,UAAU,EAAMD,gBAAiB,GAAIn6B,SA1B1D,SAAC,GAAa,IAAZw6B,EAAW,EAAXA,MAC3Be,EAAoB,CAACjvB,UAAW,CAACgX,QAASkX,MAyByEP,YAAY,wBAAwBr4B,QAAS,kBAAMwH,GAAiB,WAKvL,cAACtF,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SAEI,eAACC,EAAA,EAAD,CAAQzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,cAAe,SAAY,UAA5F,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,oBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,oBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,kBACA,cAAC+F,EAAA,EAAD,oCAGR,cAAC+D,EAAA,EAAD,UAEQy2B,EAAW52B,KAAK,SAAA6V,GAAC,OACb,cAACiiB,GAAD,2BAA2CjiB,GAA3C,IAA8CgiB,eAAgBA,EAAgBF,cAAeA,IAA9D9hB,EAAErgB,mBAU7D,SAASsiC,GAAyBriC,GAC9B,IAAMqP,EAAQC,eACd,EAA0CxN,IAAMkC,UAAS,GAAzD,mBAAOmJ,EAAP,KAAmBC,EAAnB,KACA,EAA0DtL,IAAMkC,SAAS,IAAzE,mBAAOs+B,EAAP,KAA8BC,EAA9B,KACA,EAA0CzgC,IAAMkC,UAAS,GAAzD,mBAAOiJ,EAAP,KAAmBC,EAAnB,KACA,EAA4CpL,IAAMkC,SAAS,IAA3D,mBAAOw+B,EAAP,KAAuBC,EAAvB,KACA3gC,IAAMuC,WAAU,WAGZ,IAFA,IAAIq+B,EAAa,GACbhZ,EAAU,GACd,MAA0BngB,OAAOmgB,QAAQ1pB,EAAM0pB,SAA/C,eAAwD,CAApD,0BAAOlpB,EAAP,KAAYP,EAAZ,KACM0iC,EAAe1iC,EAAMsK,KAAI,SAAAqf,GAAC,OAAIA,EAAER,QAAQS,OAAK3J,OAAOrK,KAAK,MAC/D6sB,EAAW/4B,KACP,CAACiM,MAAOpV,EAAKooB,SAAU+Z,IAE3BjZ,EAAQlpB,GAAOP,EAAMsK,KAAI,SAAAqf,GAAC,OAAIA,EAAER,WAEpCqZ,EAAkB/Y,GAClB6Y,EAAyBG,KAC1B,CAAC1iC,EAAM0pB,UAQV,OACI,eAAChjB,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,eAACjE,EAAA,EAAD,WACI,cAAC0H,EAAA,EAAD,CAAYzH,KAAK,QAAQL,QAAS,WAAK6G,GAAoB,IAASzM,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,MAAOzO,QAAQ,YAAtH,SAAkI,cAAC,KAAD,MAClI,cAACgnB,GAAD,CAAqBlgB,QAAS,WAAOoF,GAAoB,IAAUhH,SAXxD,WACnBgH,GAAoB,GACpBpN,EAAMoiC,eAAe,CAACriC,KAAMC,EAAMD,QASmEqI,KAAM+E,OAEvG,eAACxG,EAAA,EAAD,WACI,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,WAAK2G,GAAoB,IAASpG,UAAW,cAAC,KAAD,IAAaR,MAAM,YAAYpF,QAAQ,YAAlH,kBACC+L,GACG,cAAChF,GAAD,CAAcG,KAAM6E,EAAYnM,WAAS,EAAC4H,SAAU,KAChDV,QAAS,WAAKkF,GAAoB,IAClCvE,YAAa,cAACy3B,GAAD,CAAqBI,UAAU,EAAOjG,cAAev6B,EAAMD,KAAMwgC,gBAAiBiC,EAAgBp8B,SAd7G,SAAC,GAAuB,IAAtBw6B,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,SAC3B7gC,EAAMkiC,cAAc,CAACtB,QAAOC,cAa4HR,YAAY,kBAAkBr4B,QAAS,kBAAMkF,GAAoB,WAMrN,cAACvG,EAAA,EAAD,UAAY3G,EAAMD,OAClB,cAAC4G,EAAA,EAAD,UACK27B,EAAsB/3B,KAAK,SAAA6V,GAAC,OACzB,gCAAiCA,EAAExK,MAAnC,MAA6CwK,EAAEwI,WAArC5oB,EAAMD,KAAOqgB,EAAExK,eC5P7C,IAAMqlB,GAAiB7qB,aAAH,oYAyBdwyB,GAAiBxyB,aAAH,yNAeb,SAASyyB,GAAW7iC,GACzB,MAAoC8B,IAAMkC,SAAS,IAAnD,mBAAOm9B,EAAP,KAAmBC,EAAnB,KACA,EAAoCt/B,IAAMkC,SAAS,IAAnD,mBAAO27B,EAAP,KAAmBmD,EAAnB,KACE9xB,aAASiqB,GAAgB,CAAChqB,YAAa,eACrCC,YAAa,SAAC1O,GACZsgC,EAActgC,EAAKi9B,YAErBhuB,QAAS,SAACjP,OAIZwO,aAAS4xB,GAAgB,CAAC3xB,YAAa,eACrCC,YAAa,SAAC1O,GAaZ,IAZA,IAAM8X,EAAY9X,EAAKm4B,wBAAwB1vB,QAAQ,SAACC,EAAMyK,GAQ5D,YAPsBlV,IAAnByK,EAAKyK,EAAI5V,QACVmL,EAAKyK,EAAI5V,MAAQ,SAEkCU,IAAlDyK,EAAKyK,EAAI5V,MAAM4V,EAAIyT,QAAQpW,YAAY4C,SACxC1K,EAAKyK,EAAI5V,MAAM4V,EAAIyT,QAAQpW,YAAY4C,OAAS,IAElD1K,EAAKyK,EAAI5V,MAAM4V,EAAIyT,QAAQpW,YAAY4C,OAAOjM,KAAKgM,GAC5C,eAAIzK,KACV,IAEC63B,EAAY,GAChB,MAA0Bx5B,OAAOmgB,QAAQpP,GAAzC,eAAoD,CAAhD,0BAAO9Z,EAAP,KAAYP,EAAZ,KACF8iC,EAAUp5B,KAAK,CAAC,KAAQnJ,EAAKkpB,QAASzpB,IAExCmhC,EAAc2B,IAEhBtxB,QAAS,SAACjP,OAgBZ,OACE,sBAAK7B,MAAO,CAAGuF,OAAQ,OAAQV,QAAS,OAAQsR,cAAe,UAA/D,UACE,cAACooB,GAAD,CAAgBS,WAAYA,EAAYvB,kBAdlB,SAAC,GAA0B,IAAzBj/B,EAAwB,EAAxBA,GAAIY,EAAoB,EAApBA,KAAM49B,EAAc,EAAdA,SAC9BqF,EAAoBrD,EAAWp1B,KAAK,SAAAiH,GACxC,OAAGA,EAAErS,KAAOA,EACH,2BAAIqS,GAAX,IAAczR,OAAM49B,aAEf,eAAInsB,MAEbsxB,EAAcE,IAOkExD,eAL3D,SAAC,GAAuB,IAAtBrgC,EAAqB,EAArBA,GAAIY,EAAiB,EAAjBA,KAAMoO,EAAW,EAAXA,MACjC20B,EAAc,GAAD,mBAAKnD,GAAL,CAAiB,CAACxgC,KAAIY,OAAMoO,eAKvC,cAAC+yB,GAAD,CAAuBC,WAAYA,O,qBC3ErC8B,GAAkC7yB,aAAH,qMAa9B,SAAS8yB,GAAiBljC,GAC7B,IAAMqP,EAAQC,eACd,EAA4BxN,IAAMkC,SAAS,IAA3C,mBAAOm/B,EAAP,KAAeC,EAAf,KACA,EAAsDthC,IAAMkC,SAAS,IAArE,mBAAOgjB,EAAP,KAA4BC,EAA5B,KACA,EAA8CnlB,IAAMkC,SAAS,IAA7D,mBAAOq/B,EAAP,KAAwBC,EAAxB,KACA,EAA0DxhC,IAAMkC,SAAS,IAAzE,mBAAOu/B,EAAP,KAA8BC,EAA9B,KACA,EAA4C1hC,IAAMkC,SAAS,IAA3D,mBAAO8kB,EAAP,KAAuBC,EAAvB,KACA,EAA4BjnB,IAAMkC,SAAS,IAA3C,mBAAO0S,EAAP,KAAe+sB,EAAf,KACMC,EAAav7B,iBAAO,MACpBw7B,EAAcx7B,iBAAO,MAC3B6I,aAASiyB,GAAiC,CACxC/xB,YAAa,SAAA1O,GASX,GARAghC,EAAyBhhC,EAAKwQ,kBACDvS,IAA1BT,EAAM0xB,gBACPzK,EAAuBjnB,EAAM0xB,iBAE1BlvB,EAAKwQ,YAAYlJ,OAAS,GAC3Bmd,EAAuBzkB,EAAKwQ,YAAY,GAAG7T,SAGvBsB,IAArBT,EAAM8gC,WAAyB,CAChCwC,EAAmBtjC,EAAM8gC,YACzB,IAAI,IAAI9iB,EAAI,EAAGA,EAAIxb,EAAKwQ,YAAYlJ,OAAQkU,IACvChe,EAAM0xB,kBAAoBlvB,EAAKwQ,YAAYgL,GAAG7e,IAC/C4pB,EAAkBvmB,EAAKwQ,YAAYgL,GAAG4K,eAIvCpmB,EAAKwQ,YAAYlJ,OAAS,GACxBtH,EAAKwQ,YAAY,GAAG4V,SAAS9e,OAAS,IACvCif,EAAkBvmB,EAAKwQ,YAAY,GAAG4V,UACtC0a,EAAmB9gC,EAAKwQ,YAAY,GAAG4V,SAAS,GAAGzpB,UAIrCsB,IAAjBT,EAAM0W,QACP+sB,EAAUzjC,EAAM0W,SAGpBjF,QAAS,SAAAjP,OAIX6B,qBAAW,gBACa5D,IAAjBT,EAAMmjC,QACPC,EAAU3qB,KAAKzY,EAAMmjC,WAExB,CAACnjC,EAAMmjC,SACV,IAGM/8B,EAAW,WACbpG,EAAM4jC,aAAa,CAACT,OAAQjqB,KAAKiqB,GAASrC,WAAYuC,EAAiB3R,gBAAiB1K,EAAqBtQ,WAC7G1W,EAAMgI,WAkBZ,OACE,eAAC,IAAMX,SAAP,WACI,cAACC,GAAA,EAAD,UACGtH,EAAMuH,MAAQvH,EAAMuH,MAAQ,4BAE/B,eAACC,GAAA,EAAD,CAAeC,UAAU,EAAM9G,MAAO,CAACuF,OAAQ,cAA/C,UACA,eAAC2X,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,OAA5B,UACI,cAACygB,GAAA,EAAD,CAAYwC,IAAK6f,EAAjB,0BACA,cAAC5lB,GAAA,EAAD,CACEiO,QAAQ,2BACR5sB,GAAG,qBACHc,MAAO+mB,EACPnnB,SAxB0B,SAACU,GACnC0mB,EAAuB1mB,EAAML,OAAOD,OACpC,IAAM4jC,EAAON,EAAsB3xB,QAAQ,SAACmW,GAAD,OAAOA,EAAE5oB,KAAOoB,EAAML,OAAOD,SACxE8oB,EAAkB8a,EAAK,GAAGjb,UAC1B0a,EAAmBO,EAAK,GAAGjb,SAAS,GAAGzpB,KAqB/B07B,MAAO,cAAC1c,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAO,UAL/B,SAOG2iC,EAAsBh5B,KAAK,SAACgQ,GAAD,OACxB,cAACkE,GAAA,EAAD,CAAUxe,MAAOsa,EAAIpb,GAArB,SAAuDob,EAAI3E,OAA7B,cAAgB2E,EAAIpb,YAI1D,eAAC0e,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,MAAO0N,cAAe,QAAlD,UACE,cAAC+S,GAAA,EAAD,CAAYwC,IAAK8f,EAAjB,qBACA,cAAC7lB,GAAA,EAAD,CACEiO,QAAQ,2BACR5sB,GAAG,qBACHc,MAAOojC,EACPxjC,SAhCsB,SAACU,GAC/B+iC,EAAmB/iC,EAAML,OAAOD,QAgCxB46B,MAAO,cAAC1c,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAO,UAL/B,SAOGkoB,EAAeve,KAAK,SAACgQ,GAAD,OACjB,cAACkE,GAAA,EAAD,CAAUxe,MAAOsa,EAAIpb,GAArB,SAAmDob,EAAIsP,KAAzB,UAAYtP,EAAIpb,YAItD,cAAC,EAAD,CAAiBc,MAAOyW,EAAQ7W,SArCf,SAACE,EAAME,EAAOE,GACnCsjC,EAAUxjC,IAoCoDF,KAAK,SAASe,WAAS,IAChF,cAAC,KAAD,CACK4X,KAAK,aACLrJ,MAA8B,SAAvBA,EAAM4N,QAAQxb,KAAkB,UAAY,SACnDb,MAAM,OACNsF,OAAO,OACPjG,MAAOkjC,EACP56B,OAAO,EACP1I,SAjEK,SAACI,GACdmjC,EAAUnjC,IAiEF6Y,WAAY,QAKpB,eAAClR,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYP,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQC,QAAQvN,MAAnG,mBAGC3P,EAAM8jC,IACL,cAACz9B,EAAA,EAAD,CAAQE,QAASH,EAAUlF,QAAQ,YAAYP,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQzZ,QAAQmM,MAA9F,oBAIA,eAAC,IAAMtI,SAAP,WACE,cAAChB,EAAA,EAAD,CAAQE,QA1ED,WACbvG,EAAM+jC,WACN/jC,EAAMgI,WAwE2B9G,QAAQ,YAAYP,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ7Z,QAAQuM,MAA9F,oBAIA,cAACtJ,EAAA,EAAD,CAAQE,QAASH,EAAUlF,QAAQ,YAAYP,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQzZ,QAAQmM,MAA9F,2BC1JP,SAASq0B,GAAuBhkC,GACnC,IAAMqP,EAAQC,eACd,EAAgCxN,IAAMkC,UAAS,GAA/C,mBAAOigC,EAAP,KAAiBC,EAAjB,KACA,EAAkCpiC,IAAMkC,UAAS,GAAjD,mBAAOmgC,EAAP,KAAkBC,EAAlB,KACA,EAAgDtiC,IAAMkC,UAAS,GAA/D,mBAAOqgC,EAAP,KAAyBj3B,EAAzB,KAaA/I,qBAAW,WACP,IAAIm9B,GAAQ,EACZxhC,EAAMskC,wBAAwBvW,SAAS,SAAC7d,GACjCA,EAAGyP,eAAiB3f,EAAM2f,eACzB6hB,GAAQ,MAGhB4C,EAAa5C,KACd,CAACxhC,EAAMskC,wBAAyBtkC,EAAM2f,eAOzC,OACI,cAAC,IAAMtY,SAAP,UACI,eAACX,EAAA,EAAD,WACI,eAACC,EAAA,EAAD,WACI,cAAC0H,EAAA,EAAD,CAAYzH,KAAK,QAAQL,QAAS,WAAK6G,GAAoB,IAASzM,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,MAAOzO,QAAQ,YAAtH,SAAkI,cAAC,KAAD,MAClI,cAACgnB,GAAD,CAAqBlgB,QAAS,WAAOoF,GAAoB,IAAUhH,SAR3D,WACpBpG,EAAMukC,SAAS,CAACC,iBAAkBxkC,EAAMb,MAOkEiJ,KAAMi8B,OAExG,cAAC19B,EAAA,EAAD,UACI,cAACgH,EAAA,EAAD,CACIC,QAAS5N,EAAM+N,OACflO,SAhBG,WACnBG,EAAMykC,eAAe,CAACD,iBAAkBxkC,EAAMb,GAAI4O,QAAS/N,EAAM+N,UAgBjDzH,MAAM,UACNwH,WAAY,CAAE,aAAc,WAAY,MAAS,SACjD/N,KAAK,aAGb,cAAC4G,EAAA,EAAD,UAAY3G,EAAMgT,YAAY4C,QAC9B,cAACjP,EAAA,EAAD,UAAY3G,EAAMopB,QAAQS,MAC1B,cAACljB,EAAA,EAAD,UAAY3G,EAAM0W,SAClB,eAAC/P,EAAA,EAAD,WAAY3G,EAAM0kC,cAAgB,gBAAkB,GAApD,OACA,cAAC/9B,EAAA,EAAD,UAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYqF,QAAU,WAAO29B,GAAY,IAAU59B,MAAM,UAAtF,sBACX,cAACK,EAAA,EAAD,UACKw9B,EACI,cAAC99B,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYqF,QAzC1B,WAChCvG,EAAM2kC,4BAA4B,CAACH,iBAAkBxkC,EAAMb,MAwCqCmH,MAAM,YAArF,oBAEA,cAACD,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYqF,QA9C7B,WAC7BvG,EAAM4kC,yBAAyB,CAACJ,iBAAkBxkC,EAAMb,MA6CqCmH,MAAM,UAAlF,qBAGR29B,EACG,cAACh8B,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM67B,EAC/Cj8B,QAAS,WAAKk8B,GAAY,IAC1Bv7B,YACI,cAACu6B,GAAD,CAAkBl7B,QAAS,WAAKk8B,GAAY,IAAUxS,gBAAiB1xB,EAAMgT,YAAY7T,GAAI2hC,WAAY9gC,EAAMopB,QAAQjqB,GACnHgkC,OAAQnjC,EAAMmjC,OAAQS,aA5D7B,SAAC,GAAmD,IAAlDT,EAAiD,EAAjDA,OAAQrC,EAAyC,EAAzCA,WAAYpP,EAA6B,EAA7BA,gBAAiBhb,EAAY,EAAZA,OACxD1W,EAAM4jC,aAAa,CAACY,iBAAkBxkC,EAAMb,GAAIgkC,SAAQrC,aAAYpP,kBAAiBhb,YA2DXqtB,SAzD7D,WACb/jC,EAAM+jC,SAAS,CAACS,iBAAkBxkC,EAAMb,GAAIgkC,OAAQnjC,EAAM6kC,qBAwDoCnuB,OAAQ1W,EAAM0W,WAE3F,OAjCE,UAAY1W,EAAMb,MC5BtC,SAAS2lC,GAAoB9kC,GAChC,IAAMqP,EAAQC,eACd,EAAsDxN,IAAMkC,UAAS,GAArE,mBAAO+gC,EAAP,KAA4BC,EAA5B,KACA,OACI,eAAC,IAAM39B,SAAP,WACI,eAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,UACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,6BAGA,cAAC1J,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,kBAAMy+B,GAAuB,IAAOrkC,MAAO,CAACsO,MAAO,QAASY,UAAW,OAAQrJ,YAAa,QAASM,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAAvM,wBACC6jC,EACG,cAAC98B,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM28B,EAC/C/8B,QAAS,WAAKg9B,GAAuB,IACrCr8B,YACI,cAACu6B,GAAD,CAAkBl7B,QAAS,WAAKg9B,GAAuB,IAAUz9B,MAAM,4BAA4Bu8B,KAAK,EAAMF,aAAc5jC,EAAMilC,gBAErI,QAGb,cAAC/6B,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAAgBzJ,MAAO,CAACynB,UAAW,cAA/E,SACA,eAAC/d,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,OAAQ,SAAY,UAApF,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,oBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,oBACA,cAAC+F,EAAA,EAAD,sBACA,cAACA,EAAA,EAAD,sBACA,cAACA,EAAA,EAAD,sBACA,cAACA,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,4BACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,mBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,qCAGR,cAAC8J,EAAA,EAAD,UACC1K,EAAMklC,cAAc36B,KAAK,SAAC2F,GAAD,OACtB,cAAC8zB,GAAD,aAAwBY,yBAA0B5kC,EAAM4kC,yBACxDD,4BAA6B3kC,EAAM2kC,4BACnChlB,aAAc3f,EAAM2f,aAAc8kB,eAAgBzkC,EAAMykC,eACxDb,aAAc5jC,EAAM4jC,aAAcG,SAAU/jC,EAAM+jC,SAClDoB,kBAAmBnlC,EAAMmlC,kBACzBZ,SAAUvkC,EAAMukC,UAERr0B,GADC,SAAWA,EAAG/Q,iB,mCCP9BimC,GAAWC,aAAe,CACrCpoB,QAAS,CACPC,QAAS,CACDvN,KAAM,WAEd0lB,UAAW,CACH1lB,KAAM,WAEdxP,MAAO,CACCwP,KAAM,WAEdnM,QAAS,CACDmM,KAAM,WAEdlM,KAAM,CACEkM,KAAM,WAEdxO,SAAU,CACFwO,KAAM,0BC3DX,SAAS21B,GAAiCtlC,GAC7C,MAA4C8B,IAAMkC,UAAS,GAA3D,mBAAOuhC,EAAP,KAAuBC,EAAvB,KACA,EAAsC1jC,IAAMkC,SAAS,IAArD,mBAAOi5B,EAAP,KAAoBC,EAApB,KAKA,OAHA74B,qBAAW,WACP64B,EAA+C,OAAhCl9B,EAAMklC,cAAc9b,QAAmB,mBAAqBppB,EAAMklC,cAAcnlC,KAAOC,EAAMklC,cAAc9b,QAAQS,OACnI,CAAC7pB,EAAMklC,gBAEN,cAAC,IAAM79B,SAAP,UACI,eAACX,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAY3G,EAAMklC,cAAclyB,YAAY4C,QAC5C,cAACjP,EAAA,EAAD,UAAYs2B,IACZ,eAACt2B,EAAA,EAAD,WAAY3G,EAAMklC,cAAcR,cAAgB,gBAAkB,GAAlE,OACA,cAAC/9B,EAAA,EAAD,UAAY3G,EAAMy/B,UAAUtxB,MAAMlK,WAClC,cAAC0C,EAAA,EAAD,UAAW,cAACN,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYP,MAAO,CAAC2F,MAAO8+B,GAASnoB,QAAQxZ,KAAKkM,MAAOpJ,QAAS,WAAOi/B,GAAkB,IAAvH,sBACX,cAACv9B,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMm9B,EAC/Cv9B,QAAS,WAAKw9B,GAAkB,IAChC78B,YACI,cAAC,KAAD,CACI+P,KAAK,aACLrJ,MAAM,SACNzO,MAAM,OACNX,MAAOwY,KAAKzY,EAAMklC,cAAc/B,QAChC56B,OAAO,EACPk9B,UAAU,EACV5lC,SAAU,aACViZ,WAAY,SAjBb,WAAa9Y,EAAMklC,cAAc/lC,MCNrD,SAASumC,GAA8B1lC,GAC1C,IAAMqP,EAAQC,eACd,OACItP,EAAM2lC,uBAAuB77B,OAAS,GAClC,eAAC,IAAMzC,SAAP,WACI,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,SACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,yCAIJ,cAAC7F,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAAgBzJ,MAAO,CAACynB,UAAW,cAA/E,SACI,eAAC/d,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,OAAQ,SAAY,UAApF,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,qBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,GAAlB,qBACA,cAACgG,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,4BACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,GAAlB,sBACA,cAACgG,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,8BAGR,cAAC8J,EAAA,EAAD,UACC1K,EAAM2lC,uBAAuBp7B,KAAK,SAAC2F,GAAD,OAC/B,cAACo1B,GAAD,eAEQp1B,GADC,cAAgBA,EAAGg1B,cAAc/lC,iBC5BtE,I,MAAMymC,GAAqBx1B,aAAH,2eA2BlBy1B,GAA8Bz1B,aAAH,umBA8B3B01B,GAA4B11B,aAAH,8NAOzB21B,GAA4B31B,aAAH,4XAOzB41B,GAA4B51B,aAAH,mPAOzB61B,GAAmB71B,aAAH,oSAOhB81B,GAA8B91B,aAAH,oKAS1B,SAAS+1B,GAAenmC,GAC3B,IAAM8D,EAAKC,YAAe/B,GAC1B,EAA4CF,IAAMkC,SAAS,CAAC,cAAiB,KAA7E,mBAAOoiC,EAAP,KAAuBC,EAAvB,KACA,EAA8DvkC,IAAMkC,SAAS,CAAC,uBAA0B,KAAxG,mBAAOsiC,EAAP,KAAgCC,EAAhC,KACAnvB,aAAgBwuB,GAAoB,CAClClzB,UAAW,CAACR,YAAapO,EAAG3B,KAAKhD,IAAK8R,YAAa,WACnDunB,mBAAmB,EACnBC,mBAAoB,YAAyB,IAAvBC,EAAsB,EAAtBA,iBACpB71B,QAAQC,IAAI41B,GACZ2N,EAAkB3N,EAAiBl2B,SAGrC4U,aAAgByuB,GAA6B,CAC3CnzB,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,sBAAuB3O,YAAa,WACtEunB,mBAAmB,EACnBC,mBAAoB,YAAyB,IAAvBC,EAAsB,EAAtBA,iBACpB6N,EAA2B7N,EAAiBl2B,SAGlD,MAAuB4O,aAAY00B,GAA2B,CAC1D50B,YAAa,SAAA1O,GACTW,EAAaC,QAAQ,wBAAyB,CAAC4wB,iBAAkB,OAErEviB,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,MALfgkC,EAAP,oBAQA,EAAuBp1B,aAAY20B,GAA2B,CAC1D70B,YAAa,SAAA1O,GACTW,EAAaC,QAAQ,wBAAyB,CAAC4wB,iBAAkB,OAErEviB,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,MALfikC,EAAP,oBAQA,EAAuBr1B,aAAY40B,GAA2B,CAC1D90B,YAAa,SAAA1O,GACTW,EAAaC,QAAQ,wBAAyB,CAAC4wB,iBAAkB,OAErEviB,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,MALfkkC,EAAP,oBAQA,EAA8Bt1B,aAAY60B,GAAkB,CAC1D/0B,YAAa,SAAA1O,GACXW,EAAaC,QAAQ,6CAEvBqO,QAAS,SAAAjP,GACPW,EAAahD,MAAM,gCAAkCqC,MALlDmkC,EAAP,oBAQA,EAA8Bv1B,aAAY80B,GAA6B,CACrEh1B,YAAa,SAAA1O,GACXW,EAAaC,QAAQ,wCAEvBqO,QAAS,SAAAjP,GACPW,EAAahD,MAAM,oCAAsCqC,MALtDokC,EAAP,oBA6BA,OACA,eAAC,IAAMv/B,SAAP,WACI,cAACy9B,GAAD,2BAAyBsB,GAAzB,IAAyCzmB,aAAc7b,EAAG3B,KAAKyd,qBAAsB6kB,eAvBlE,SAAC,GAAgC,IAA/BD,EAA8B,EAA9BA,iBAAkBz2B,EAAY,EAAZA,OACvCy4B,EAAa,CAAC9zB,UAAW,CAAC8xB,mBAAkBz2B,aAuB1C61B,aArBe,SAAC,GAAqE,IAApEY,EAAmE,EAAnEA,iBAAkBrB,EAAiD,EAAjDA,OAAQrC,EAAyC,EAAzCA,WAAYpP,EAA6B,EAA7BA,gBAAiBhb,EAAY,EAAZA,OAC1E+vB,EAAa,CAAC/zB,UAAW,CAAC8xB,mBAAkBrB,SAAQrC,aAAYpP,kBAAiBhb,aAoBnDqtB,SAlBjB,SAAC,GAAgC,IAA/BS,EAA8B,EAA9BA,iBAAkBrB,EAAY,EAAZA,OACjCuD,EAAa,CAACh0B,UAAU,CAAC8xB,mBAAkBrB,aAiBO8B,YATf,SAAC,GAAmD,IAAlD9B,EAAiD,EAAjDA,OAAQzsB,EAAyC,EAAzCA,OAAQgb,EAAiC,EAAjCA,gBAAiBoP,EAAgB,EAAhBA,WACxE6F,EAAoB,CAACj0B,UAAW,CAACgE,SAAQysB,SAAQzR,kBAAiBoP,iBAQ+ByD,SANlF,SAAC,GAAwB,IAAvBC,EAAsB,EAAtBA,iBACjBoC,EAAoB,CAACl0B,UAAW,CAAC8xB,uBAM7BI,yBAhB2B,SAAC,GAAuB,EAAtBJ,iBAC/BrhC,EAAaK,QAAQ,uBAAwB,CAACwwB,iBAAkB,OAgB9D2Q,4BAd8B,SAAC,GAAuB,EAAtBH,iBAClCrhC,EAAaK,QAAQ,uBAAwB,CAACwwB,iBAAkB,UAehE,cAAC0R,GAAD,eAAmCY,OCpL3C,I,MAAMO,GAA4Bz2B,aAAH,mNAQzB02B,GAAsB12B,aAAH,4IASlB,SAAS22B,GAAyB/mC,GACrC,MAAsCgE,mBAAS,IAA/C,mBAAOqP,EAAP,KAAoB4c,EAApB,KACA,EAA2Bjf,aAAS81B,GAAqB,CACrDp0B,UAAW,CAACof,WAAY9xB,EAAM8xB,YAC9B5gB,YAAa,SAAA1O,GACTytB,EAAeztB,EAAKwkC,cAAcjT,MAEtC9iB,YAAa,iBALTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAOjB,EAA4BiR,aAAYy1B,GAA2B,CAC/D31B,YAAa,SAAC1O,GACVW,EAAaC,QAAQ,0BAFtB6jC,EAAP,oBAKA,GAAI/zB,EACH,OAAO,cAACC,GAAA,EAAD,CAAgBxS,MAAO,CAACkP,UAAW,UAE3C,GAAI1P,EAEH,OADA0C,QAAQ1C,MAAMA,GACP,yCAER,IAAM4I,EAAiB,WACnBk+B,EAAkB,CAACv0B,UAAW,CAACof,WAAY9xB,EAAM8xB,WAAYze,YAAaA,KAC1ErT,EAAMgI,WAMZ,OACE,eAAC,IAAMX,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,sCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBxG,WAAS,EAACpB,SARlB,SAACE,EAAME,EAAOE,GAC3B8vB,EAAehwB,IAOoCA,MAAOoT,EAAa3S,QAASqI,MAEhF,eAACnB,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASwC,EAAgBzC,MAAM,YAA3D,0BCxDV,I,GAAMugC,GAA4Bz2B,aAAH,uNAQzB82B,GAAmB92B,aAAH,uLAYf,SAAS+2B,GAAsBnnC,GAClC,MAAsCgE,mBAAS,IAA/C,mBAAOqP,EAAP,KAAoB4c,EAApB,KACA,EAA4BjsB,qBAA5B,mBAAOojC,EAAP,KAAeC,EAAf,KACA,EAA2Br2B,aAASk2B,GAAkB,CAClDx0B,UAAW,CAACof,WAAY9xB,EAAM8xB,YAC9B5gB,YAAa,SAAA1O,GACTytB,EAAeztB,EAAKwkC,cAAcrX,UAAUmD,eAC5CuU,EAAU7kC,EAAKwkC,cAAcrX,UAAUxwB,KAE3C8R,YAAa,iBANTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAQjB,EAA4BiR,aAAYy1B,GAA2B,CAC/D31B,YAAa,SAAC1O,GACZW,EAAaC,QAAQ,uBAFpB6jC,EAAP,oBAKA,GAAI/zB,EACH,OAAO,cAACC,GAAA,EAAD,CAAgBxS,MAAO,CAACkP,UAAW,UAE3C,GAAI1P,EAEH,OADA0C,QAAQ1C,MAAMA,GACP,yCAER,IAAM4I,EAAiB,WACnBk+B,EAAkB,CAACv0B,UAAW,CAAC0c,QAASgY,EAAQ7uB,SAAUlF,KAC1DrT,EAAMgI,WAMZ,OACE,eAAC,IAAMX,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,mCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBxG,WAAS,EAACpB,SARlB,SAACE,EAAME,EAAOE,GAC3B8vB,EAAehwB,IAOoCA,MAAOoT,EAAa3S,QAASqI,MAEhF,eAACnB,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASwC,EAAgBzC,MAAM,YAA3D,0BC9DV,IAAMwgC,GAAsB12B,aAAH,0LAWlB,SAASk3B,GAA0BtnC,GACtC,MAAsCgE,mBAAS,IAA/C,mBAAOujC,EAAP,KAAoBC,EAApB,KACA,EAAkCxjC,oBAAS,GAA3C,mBAAOyjC,EAAP,KAAkBC,EAAlB,KACA,EAA2B12B,aAAS81B,GAAqB,CACrDp0B,UAAW,CAACof,WAAY9xB,EAAM8xB,YAC9B5gB,YAAa,SAAA1O,GACTklC,EAAa1nC,EAAMynC,WACnB,IAAIj7B,EAAS,aAAehK,EAAKwkC,cAAcvX,cAC/CjjB,GAAU,cAAgBhK,EAAKwkC,cAAcW,aAC7CH,EAAe,CAAC,QAAWh7B,EACX,MAAS,YAAchK,EAAKwkC,cAAcnX,gBAG9D5e,YAAa,iBAVTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAejB,OAHAkE,qBAAW,WACPqjC,EAAa1nC,EAAMynC,aACpB,CAACznC,EAAMynC,YACNv0B,EACI,cAACC,GAAA,EAAD,CAAgBxS,MAAO,CAACkP,UAAW,UAEvC1P,GACH0C,QAAQ1C,MAAMA,GACP,0CAIR,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,oCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBjG,WAAW,EAAM3B,SAAU,aAAQI,MAAOwnC,EAAYF,EAAW,MAAYA,EAAW,YAE7G,cAAC3/B,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wB,wDC7CH,SAASshC,GAAyB5nC,GACrC,IAAMqP,EAAQC,eACd,OACI,cAAC,IAAMjI,SAAP,UAEQrH,EAAM6nC,kBAAkBt9B,KAAK,SAACqiB,GAAD,OACzB,eAAC9d,EAAA,EAAD,WACK8d,EAAGlV,UAAU6L,OACRqJ,EAAGlV,UAAUiM,kBACX,cAACmkB,GAAA,EAAD,CAASvgC,MAAM,sBAAf,SACI,cAAC,KAAD,CAAiB5G,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,UAE1D,cAACm4B,GAAA,EAAD,CAASvgC,MAAM,uBAAf,SACI,cAAC,KAAD,CAAY5G,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,UAGzDid,EAAGlV,UAAUvD,QACX,cAAC2zB,GAAA,EAAD,CAASvgC,MAAM,6BAAf,SACI,cAAC,KAAD,CAAiB5G,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,UAEzDid,EAAGlV,UAAUiM,kBACV,cAACmkB,GAAA,EAAD,CAASvgC,MAAM,uDAAf,SACI,cAAC,KAAD,CAAkB5G,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQzZ,QAAQmM,UAG3D,cAACm4B,GAAA,EAAD,CAASvgC,MAAM,uBAAf,SACI,cAAC,KAAD,CAAY5G,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,UApB/D,MAwBSid,EAAGlV,UAAU3X,OAxBL6sB,EAAGlV,UAAU3X,KAAOC,EAAM6yB,W,gDCLxD,SAASkV,GAA4B/nC,GACxC,IAAMqP,EAAQC,eACd,OACI,cAAC,IAAMjI,SAAP,UAC2B,YAAtBrH,EAAMwvB,YACD,cAACsY,GAAA,EAAD,CAASvgC,MAAM,mBAAf,SACE,cAAC8G,EAAA,EAAD,CAAYnN,QAAQ,YAAYhB,OAAO,SAASoG,MAAM,UAAU0Q,KAAMkY,OAAOvpB,SAASwpB,OAAS,oBAAsBnvB,EAAM2vB,UAAUC,cAAeX,UAAQ,EAA5J,SACI,cAAC,KAAD,CAAYtuB,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,YAMlC,aAAtB3P,EAAMwvB,YACN,cAACsY,GAAA,EAAD,CAASvgC,MAAM,yBAAf,SACG,cAAC8G,EAAA,EAAD,CAAYnN,QAAQ,YAApB,SAAgC,cAACwlB,GAAA,EAAD,CAAkB9f,KAAM,GAAIohC,UAAW,EAAGrnC,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQxZ,KAAKkM,YAE/G,cAACm4B,GAAA,EAAD,CAASvgC,MAAM,0BAAf,SACG,cAAC8G,EAAA,EAAD,CAAYnN,QAAQ,YAAYqF,QAAS,kBAAMpD,EAAaK,QAAQ,6CAApE,SACI,cAAC,KAAD,CAAmB7C,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,cClB9E,I,GAAMs4B,GAAiC73B,aAAH,sKAU7B,SAAS83B,GAAyBloC,GACrC,MAA8BgE,mBAAS,IAAvC,mBAAO2xB,EAAP,KAAgBE,EAAhB,KACA,EAA2B7kB,aAASi3B,GAAgC,CAChEv1B,UAAW,CAACmgB,KAAM7yB,EAAM6yB,MACxB3hB,YAAa,SAAA1O,GACqB,YAA7BA,EAAK2lC,aAAal2B,OACnB4jB,EAAWrzB,EAAK2lC,aAAa37B,SAE7BrJ,EAAaK,QAAQhB,EAAK2lC,aAAahoC,OACvC01B,EAAW,WAAarzB,EAAK2lC,aAAahoC,SAI9C8Q,YAAa,iBAXTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAajB,OAAI+S,EACI,cAACC,GAAA,EAAD,CAAgBxS,MAAO,CAACkP,UAAW,UAEvC1P,GACH0C,QAAQ1C,MAAMA,GACP,0CAIR,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,kCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBjG,WAAW,EAAM3B,SAAU,aAAQI,MAAO01B,MAE/D,cAAC/tB,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wBCxCV,I,MAAM8hC,GAAgCh4B,aAAH,uKAU5B,SAASi4B,GAA2BroC,GACvC,MAA8BgE,mBAAS,IAAvC,mBAAO2xB,EAAP,KAAgBE,EAAhB,KACA,EAA2B7kB,aAASo3B,GAA+B,CAC/D11B,UAAW,CAACmgB,KAAM7yB,EAAM6yB,MACxB3hB,YAAa,SAAA1O,GACuB,YAA/BA,EAAK8lC,eAAer2B,OACrB4jB,EAAWrzB,EAAK8lC,eAAe97B,SAE/BrJ,EAAaK,QAAQhB,EAAK8lC,eAAenoC,OACzC01B,EAAW,WAAarzB,EAAK8lC,eAAenoC,SAIhD8Q,YAAa,iBAXTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAajB,OAAI+S,EACI,cAACC,GAAA,EAAD,CAAgBxS,MAAO,CAACkP,UAAW,UAEvC1P,GACH0C,QAAQ1C,MAAMA,GACP,0CAIR,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,0CACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBjG,WAAW,EAAM3B,SAAU,aAAQI,MAAO01B,MAE/D,cAAC/tB,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wBCpBV,I,GAAMiiC,GAAyBn4B,aAAH,kKAStBo4B,GAA2Bp4B,aAAH,2KAUvB,SAASujB,GAAiB3zB,GAC7B,MAAkC8B,IAAMkC,UAAS,GAAjD,mBAAOyjC,EAAP,KAAkBC,EAAlB,KACA,EAA0C5lC,IAAMkC,UAAS,GAAzD,mBAAOiJ,EAAP,KAAmBC,EAAnB,KACA,EAA0CpL,IAAMkC,UAAS,GAAzD,mBAAOmJ,EAAP,KAAmBC,EAAnB,KACA,EAAoDtL,IAAMkC,UAAS,GAAnE,mBAAOqY,EAAP,KAAwBosB,EAAxB,KACA,EAA8C3mC,IAAMkC,UAAS,GAA7D,mBAAO0kC,EAAP,KAAqBC,EAArB,KACA,EAAsD7mC,IAAMkC,UAAS,GAArE,mBAAO4kC,EAAP,KAAyBC,EAAzB,KACA,EAAgD/mC,IAAMkC,UAAS,GAA/D,mBAAO6vB,EAAP,KAAyBC,EAAzB,KACA,EAA0DhyB,IAAMkC,UAAS,GAAzE,mBAAO8kC,EAAP,KAA8BC,EAA9B,KACA,EAA8DjnC,IAAMkC,UAAS,GAA7E,mBAAOglC,EAAP,KAAgCC,EAAhC,KACM/mB,EAAoB/Z,iBAAO,MAC3BrE,EAAKC,YAAe/B,GACpBqN,EAAQC,eACd,EAAyB8B,aAAYm3B,GAAwB,CAC3Dr3B,YAAa,SAAC1O,GACZK,QAAQC,IAAIN,GACZW,EAAaC,QAAQ,mCAEvBqO,QAAS,SAACjP,GACRW,EAAahD,MAAM,8BAAgCqC,MANhD0mC,GAAP,oBASA,GAAuB3oB,aAAaioB,GAA0B,CAC5Dv3B,YAAa,WACbC,YAAa,SAAC1O,GACZ,GAAyC,YAAtCA,EAAK2mC,sBAAsBl3B,OAAqB,CACjD,IAAMm3B,EAAW,IAAIC,KAAK,CAAC7mC,EAAK2mC,sBAAsB9wB,QAAS,CAAC5W,KAAM,eAChE6nC,EAAMC,SAASC,eAAe,mBACpC,GAAW,OAARF,EACDA,EAAItyB,KAAOyyB,IAAIC,gBAAgBN,GAC/BE,EAAIra,SAAWjvB,EAAM2vB,UAAUmD,cAAgB,QAC/CwW,EAAIK,YACD,CACH,IAAMh/B,EAAU4+B,SAASK,cAAc,KACvCj/B,EAAQxL,GAAK,kBACbwL,EAAQqM,KAAOyyB,IAAIC,gBAAgBN,GACnCz+B,EAAQskB,SAAWjvB,EAAM2vB,UAAUmD,cAAgB,QACnDyW,SAAS3kC,KAAKilC,YAAYl/B,GAC1BA,EAAQg/B,cAGVxmC,EAAahD,MAAM,mCAAqCqC,EAAK2mC,sBAAsBhpC,QAGvFsR,QAAS,SAACjP,GACRW,EAAahD,MAAM,mCAAqCqC,MAvBrDsnC,GAAP,qBAsCMxmC,GAAU,CAAC,CAACvD,KAAM,cAAe4pC,MAAO,WAC1BhB,GAAsB,KAEzB,CAAC5oC,KAAM,mBAAoB4pC,MAAO,WAC/BlB,GAAyB,KAE5B,CAAC1oC,KAAMC,EAAM+pC,eAAiB,iCAAmC,kCAAmCJ,MAAO,YAlBrG,WACnB,IAAOxqC,EAAsBa,EAAtBb,GAAI4qC,EAAkB/pC,EAAlB+pC,eACX/pC,EAAMgqC,eAAe7qC,GAAK4qC,GAiBVC,KAEH,CAACjqC,KAAM,4BAA6B4pC,MAAO,WACxCjC,GAAa,GACbmB,GAA0B,KAE7B,CAAC9oC,KAAM,oBAAqB4pC,MAAO,WAChCjC,GAAa,GACbmB,GAA0B,KAE7B,CAAC9oC,KAAM,oBAAqB4pC,MAAO,WAClCT,GAAe,CAACx2B,UAAW,CAACmgB,KAAM7yB,EAAM6yB,UAE1C,CAAC9yB,KAAM,wBAAyB4pC,MAAO,WACrCG,GAAa,CAACp3B,UAAW,CAACmgB,KAAM7yB,EAAM6yB,UAExC,CAAC9yB,KAAM,0BAA2B4pC,MAAO,WACvCV,GAA2B,KAE7B,CAAClpC,KAAM,+BAAgC4pC,MAAO,WAC5CZ,GAAyB,MAIrClhC,GAAc,SAACtH,GACb2hB,EAAkB5Z,SAAW4Z,EAAkB5Z,QAAQga,SAAS/hB,EAAML,SAG1EgN,GAAoB,IAExB,OACI,eAAC,IAAM7F,SAAP,WACI,eAACX,EAAA,EAAD,CAAuCkE,OAAK,EAA5C,UACI,eAACjE,EAAA,EAAD,WACA,cAAC0H,EAAA,EAAD,CAAYzH,KAAK,QAAQL,QAAS,WAAK6G,GAAoB,IAASzM,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,MAAOzO,QAAQ,YAAtH,SAAkI,cAAC,KAAD,MAClI,cAACgnB,GAAD,CAAqBlgB,QAAS,WAAOoF,GAAoB,IAAUhH,SAlDxD,WACnBpG,EAAMiqC,gBAAgBjqC,EAAM2vB,UAAUxwB,IACtCiO,GAAoB,IAgDiFhF,KAAM+E,OAEnG,cAACxG,EAAA,EAAD,UAAYwE,GAAYnL,EAAMkO,cAAepK,EAAG3B,KAAKkJ,iBACrD,eAAC1E,EAAA,EAAD,WAAW,cAACN,EAAA,EAAD,CAAQwd,IAAK3B,EAAmBtb,KAAK,QAAQL,QAAS,WAAK2G,GAAoB,IAAS5G,MAAM,UAAUpF,QAAQ,YAAhH,qBACX,cAAC6iB,GAAA,EAAD,CAAQ3b,KAAM6E,EAAY2P,SAAUsF,EAAkB5Z,QAAS0b,UAAMvjB,EAAWoT,YAAU,EAACoQ,eAAa,EAACtjB,MAAO,CAACujB,OAAQ,GAAzH,SACG,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,UAApB,OACC,cAACC,GAAA,EAAD,2BACMF,GADN,IAEExjB,MAAO,CACLkc,gBAA+B,WAAduH,EAAyB,aAAe,iBAH7D,SAME,cAACra,EAAA,EAAD,CAAO7I,QAAQ,WAAWP,MAAO,CAAC8O,gBAAwC,SAAvBJ,EAAM4N,QAAQxb,KAAkB4N,EAAM4N,QAAQC,QAAQC,KAAO9N,EAAM4N,QAAQC,QAAQE,MAAO9W,MAAO,SAApJ,SACE,cAACge,GAAA,EAAD,CAAmBC,YAAa1c,GAAhC,SACE,cAAC2c,GAAA,EAAD,CAAUrlB,GAAG,oBAAb,SACGmE,GAAQiH,KAAI,SAAC2/B,EAAQz/B,GAAT,OACX,cAACgU,GAAA,EAAD,CAEElY,QAAS,SAAChG,GAAD,OAhET,SAACA,EAAOkK,GAChCnH,GAAQmH,GAAOk/B,QACfz8B,GAAoB,GA8DwBi9B,CAAoB5pC,EAAOkK,IAFjD,SAIGy/B,EAAOnqC,MAHHmqC,EAAOnqC,KAAOC,EAAM6yB,qBAYxCxW,EACG,cAACpU,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMiU,EAC/CrU,QAAS,WAAKygC,GAAyB,IACvC9/B,YAAa,cAACo+B,GAAD,CAA0BjV,WAAY9xB,EAAMb,GAAI6I,QAAS,WAAKygC,GAAyB,QAExG,KACHC,EACG,cAACzgC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMsgC,EAC/C1gC,QAAS,WAAK2gC,GAAsB,IACpChgC,YAAa,cAACw+B,GAAD,CAAuBrV,WAAY9xB,EAAMb,GAAI6I,QAAS,WAAK2gC,GAAsB,QAElG,KACHC,EACG,cAAC3gC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMwgC,EAC/C5gC,QAAS,WAAK6gC,GAA0B,IACxClgC,YAAa,cAAC2+B,GAAD,CAA2BxV,WAAY9xB,EAAMb,GAAIsoC,UAAWA,EAAWz/B,QAAS,WAAK6gC,GAA0B,QAEhI,KACHC,EACG,cAAC7gC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM0gC,EAC/C9gC,QAAS,WAAK+gC,GAAyB,IACvCpgC,YAAa,cAACu/B,GAAD,CAA0BrV,KAAM7yB,EAAM6yB,KAAM7qB,QAAS,WAAK+gC,GAAyB,QAEpG,KACHC,EACG,cAAC/gC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM4gC,EAC/ChhC,QAAS,WAAKihC,GAA2B,IACzCtgC,YAAa,cAAC0/B,GAAD,CAA4BxV,KAAM7yB,EAAM6yB,KAAM7qB,QAAS,WAAKihC,GAA2B,QAExG,QAEJ,cAACtiC,EAAA,EAAD,UACI,cAACohC,GAAD,eAAiC/nC,MAErC,cAAC2G,EAAA,EAAD,UAAY3G,EAAM2vB,UAAUmD,gBAC5B,cAACnsB,EAAA,EAAD,UAAY3G,EAAM+zB,MAClB,cAACptB,EAAA,EAAD,UACI,cAACihC,GAAD,CAA0BC,kBAAmB7nC,EAAM6nC,kBAAmBhV,KAAM7yB,EAAM6yB,SAEtF,cAAClsB,EAAA,EAAD,UACI,cAAC0H,EAAA,EAAD,CAAYzH,KAAK,QAAQN,MAAM,UAAUC,QAAS,kBAAMutB,GAAoB,IAA5E,SACI,cAAC,KAAD,UAzEG,UAAY9zB,EAAM6yB,MA6EjC,cAACnsB,EAAA,EAAD,UACCmtB,EACC,cAAC5rB,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyrB,EAC/C7rB,QAAS,WAAK8rB,GAAoB,IAClCnrB,YAAa,cAACgpB,GAAD,2BAA0B3xB,GAA1B,IAAiC8xB,WAAY9xB,EAAMb,GAAI6I,QAAS,WAAK8rB,GAAoB,SAEvG,UC/NjB,I,eAAMhE,GAAiB1f,aAAH,8KAUb,SAASg6B,GAA0BpqC,GACxC,MAAkC8B,IAAMkC,SAAS,CAACjE,KAAM,KAAxD,mBAAOsqC,EAAP,KAAkBC,EAAlB,KACA,EAAgCl5B,aAAY0e,GAAgB,CACtDvN,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KACoB,YAA9BA,EAAK0tB,cAAcje,OAClB9O,EAAaM,KAAK,uCAElBN,EAAahD,MAAMqC,EAAK0tB,cAAc/vB,UAL7CgwB,EAAP,oBAqBA,OACE,eAAC,IAAM9oB,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,2DACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACE,eAACpB,EAAA,EAAD,CAAQnF,QAAQ,YAAYiJ,UAAU,QAAtC,UACyB,KAAnBkgC,EAAUtqC,KAAc,cAAgBsqC,EAAUtqC,KACpD,uBAAOF,SAdI,SAACC,GACpB,IAAMyqC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAC7rC,GACb,IAAM8rC,EAAW9rC,EAAEsB,OAAOmR,OAC1Bi5B,EAAa,CAACvqC,KAAMD,EAAII,OAAOyqC,MAAM,GAAG5qC,KAAM2qC,SAAUA,KAE5DH,EAAOK,mBAAmB9qC,EAAII,OAAOyqC,MAAM,KAQJlpC,KAAK,OAAOopC,QAAM,SAGvD,eAACjjC,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAzBX,WACrB4pB,EAAsB,CAACzd,UAAW,CAACmV,QAASwiB,EAAUK,YAAYrlC,OAAO,SAACzG,GAAOiE,QAAQC,IAAIlE,MAC3FoB,EAAMgI,WAuBiD1B,MAAM,YAA3D,0BCrCH,SAASwkC,GAAT,GAA0E,IAAlDjjB,EAAiD,EAAjDA,QAASoiB,EAAwC,EAAxCA,gBAAiBc,EAAuB,EAAvBA,sBAC/C17B,EAAQC,eACd,EAAkDxN,IAAMkC,UAAS,GAAjE,mBAAOgnC,EAAP,KAA0BC,EAA1B,KACA,OACI,eAAC,IAAM5jC,SAAP,WACI,eAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAK9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAxJ,UACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,sBAGA,cAAC1J,EAAA,EAAD,CAAQO,KAAK,QAAQoQ,KAAK,qBAAqBrW,MAAO,CAACsO,MAAO,QAASY,UAAW,OAAQrJ,YAAa,QAASM,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAApL,yBACA,cAACmF,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,kBAAM0kC,GAAqB,IAAOtqC,MAAO,CAACsO,MAAO,QAASY,UAAW,OAAQrJ,YAAa,QAASM,UAAW,cAAC,KAAD,IAAiCR,MAAM,UAAUpF,QAAQ,YAArM,mCACC8pC,EACG,cAAC/iC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM4iC,EAC/ChjC,QAAS,WAAKijC,GAAqB,IACnCtiC,YAAa,cAACyhC,GAAD,CAA2BpiC,QAAS,WAAKijC,GAAqB,QAE/E,QAEZ,cAAC/gC,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SACI,eAACC,EAAA,EAAD,CAAOqpB,cAAY,EAAC9sB,KAAK,QAAQjG,MAAO,CAAE,SAAY,OAAQ,SAAY,UAA1E,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,qBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,SAA1B,uBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,oBACA,cAAC+F,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,sBACA,cAAC+F,EAAA,EAAD,mBACA,cAACA,EAAA,EAAD,0BACA,cAACA,EAAA,EAAD,wBACA,cAACA,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,QAA1B,0BAGR,cAAC8J,EAAA,EAAD,UAECmd,EAAQtd,KAAK,SAAC2F,GAAD,OACV,cAAC,GAAD,aACI+5B,gBAAiBA,EACjBD,eAAgBe,GAEZ76B,GADC,UAAYA,EAAG/Q,iBCjD5C,IAAM+rC,GAAkB96B,aAAH,sbAiCf+6B,GAAe/6B,aAAH,yPAChB86B,IAOIE,GAAeh7B,aAAH,6PAChB86B,IAOIG,GAAiBj7B,aAAH,uLAUdk7B,GAAwBl7B,aAAH,4OASpB,SAASm7B,GAASvrC,GACrB,IAAM8D,EAAKC,YAAe/B,GAC1B,EAAgCF,IAAMkC,SAAS,IAA/C,mBAAOuvB,EAAP,KAAiBiY,EAAjB,KACAx6B,aAASo6B,GAAc,CACrB14B,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,sBAClC3O,YAAa,WACbC,YAAa,SAAC1O,GACZ,IAAM6b,EAAU7b,EAAKqlB,QAAQ5c,QAAQ,SAACC,EAAMyK,GAC1C,IAAMlL,EAAQS,EAAK6f,WAAW,SAAChD,GAAD,OAAOA,EAAE5oB,KAAOwW,EAAIxW,MAClD,OAAGsL,GAAS,GACVS,EAAKT,GAAL,eAAkBkL,GACX,YAAIzK,IAEL,CAAEyK,GAAR,mBAAgBzK,MANJ,YAQTqoB,IACPlV,EAAQ6B,MAAM,SAACC,EAAEC,GAAH,OAASD,EAAEhhB,GAAKihB,EAAEjhB,IAAM,EAAI,KAC1CqsC,EAAYntB,MAGhBjH,aAAgB+zB,GAAc,CAC5Bz4B,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,sBAClC3O,YAAa,WACbwnB,mBAAoB,YAAyB,IACrCpa,EADoC,EAAtBqa,iBACal2B,KAAKqlB,QAAQ5c,QAAQ,SAACC,EAAMyK,GAC3D,IAAMlL,EAAQS,EAAK6f,WAAW,SAAChD,GAAD,OAAOA,EAAE5oB,KAAOwW,EAAIxW,MAClD,OAAGsL,GAAS,GACVS,EAAKT,GAAL,eAAkBkL,GACX,YAAIzK,IAEL,CAAEyK,GAAR,mBAAgBzK,MANJ,YAQTqoB,IACPlV,EAAQ6B,MAAM,SAACC,EAAEC,GAAH,OAASD,EAAEhhB,GAAKihB,EAAEjhB,IAAM,EAAI,KAC1CqsC,EAAYntB,IAEd5M,QAAS,SAACjP,GACRW,EAAaK,QAAQ,0BACrBX,QAAQC,IAAIN,MAGhB,MAAwB4O,aAAYi6B,GAAgB,CAChDn6B,YAAa,SAAC1O,GACZ,GAA8B,YAA3BA,EAAKipC,WAAWx5B,OAAqB,CACtC,IAAMoM,EAAUkV,EAAS3hB,QAAQ,SAACiW,GAAD,OAAcrlB,EAAKipC,WAAWC,YAAY5wB,SAAS+M,EAAQ1oB,OAC5FqsC,EAAYntB,GACZlb,EAAaC,QAAQ,6BAErBD,EAAahD,MAAMqC,EAAKipC,WAAWtrC,QAIvCsR,QAAS,SAACjP,GACRW,EAAaK,QAAQ,4BACrBX,QAAQC,IAAIN,MAbXmpC,EAAP,oBAgBA,EAAwBv6B,aAAYk6B,GAAuB,CACzDp6B,YAAa,SAAC1O,GACZ,IAAM6b,EAAUkV,EAAShpB,KAAK,SAACsd,GAC7B,OAAGA,EAAQ1oB,KAAOqD,EAAKopC,qBAAqBzsC,GACnC,2BAAI0oB,GAAYrlB,EAAKopC,sBAErB,eAAI/jB,MAGZrlB,EAAKopC,qBAAqB7B,eAC3B5mC,EAAaC,QAAQ,iCAErBD,EAAaC,QAAQ,uCAGvBooC,EAAYntB,IAEd5M,QAAS,SAACjP,GACRW,EAAaK,QAAQ,6CACrBX,QAAQC,IAAIN,MAnBTqpC,EAAP,oBA+BA,OACE,qBAAKlrC,MAAO,CAACuF,OAAQ,aAAckiB,UAAW,aAAcvY,UAAU,QAAtE,SACE,cAACi7B,GAAD,CAAeb,gBAXK,SAAC9qC,GACrBwsC,EAAc,CAACj5B,UAAW,CAACvT,SAUsB4rC,sBARvB,SAAC5rC,EAAI4qC,GAC/B8B,EAAc,CACVn5B,UAAW,CAACvT,KAAI4qC,qBAM2EliB,QAAS0L,M,2EC3HnGuY,GAAoB,SAACC,EAAGC,EAAGC,EAAWrrC,EAAOsF,EAAQgmC,IAvCvC,SAACH,EAAGI,EAAGC,EAAGH,EAAWzpC,EAAM0pC,GAClDG,UAAA,gBAA0BC,SAEvBL,EAAUniC,OAAS,IAClBuiC,UAAUH,GAAOK,OAAO,KAAKC,KAAK,QAAS,eACtCC,UAAU,OACVjqC,KAAKypC,GAAWS,QAChBH,OAAO,KAAKC,KAAK,QAAS,aAC1B7rC,MAAM,CAAC,OAAU,YAGtB0rC,aAAA,cACKE,OAAO,QACPC,KAAK,IAAKL,GACVK,KAAK,KAAK,SAACR,EAAGhuB,GAAQ,OAAOouB,EAAS,GAAJpuB,KAClCwuB,KAAK,KAAM,GACXA,KAAK,OAAQ,WACbA,KAAK,QAAS,KACdA,KAAK,SAAU,IACfG,GAAG,SAAS,SAACX,GAAQA,EAAEnpB,OAAOkpB,EAAGvpC,MAEtC6pC,aAAA,cACKE,OAAO,QACPK,MAAK,SAACZ,GAAQ,OAAOA,EAAEzkC,SACvBilC,KAAK,IAAKL,GACVK,KAAK,KAAK,SAACR,EAAGhuB,GAAQ,OAAOouB,EAAS,GAAJpuB,KAClCwuB,KAAK,KAAM,IACXA,KAAK,KAAM,IACXG,GAAG,SAAS,SAACX,GAAQA,EAAEnpB,OAAOkpB,EAAGvpC,MAGtC6pC,UAAU,QACLM,GAAG,SAAS,WACTN,UAAA,gBAA0BC,SAC1BD,UAAA,cAAwBC,aAMpCO,CAAYd,EAAGM,SAASS,MAAQT,SAASU,MAAQ,GAAKd,EAAWD,EAAGE,GACpEG,SAAS7nC,kB,qBCjCN,SAASwoC,GAAahtC,GACzB,IAAMitC,EAAW9kC,iBAAO,MACxB,EAA4BnE,oBAAS,GAArC,mBAAOkpC,EAAP,KAAeC,EAAf,KACM99B,EAAQC,eAkBhB,OAjBEjL,qBAAW,WAcP+oC,GAAmBptC,EAAMqtC,mBAAoBJ,EAAUC,EAbnC,CAChBI,QAAS,KACTC,iBAAkB,CAAC,KAAM,QACzBC,kBAAkB,EAClBC,sBAAsB,EACtBC,gBAAgB,GAEA,CAChB,UAAa,SAACC,EAAQC,EAAM5B,KAC5B,SAAY,SAAC2B,EAAQC,EAAM5B,KAC3B,MAAS,SAAC2B,EAAQC,EAAM5B,KACxB,YAAe,IAEsE38B,GACzF89B,GAAU,KACX,CAACntC,EAAMqtC,mBAAoBH,EAAQ79B,IAEtC,eAAC,IAAMhI,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,sBAA8Ca,EAAMb,GAApD,oBACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,IAAMJ,SAAP,UACI,qBAAKwc,IAAKopB,EAAU9tC,GAAG,WAAWwB,MAAO,CAACC,MAAO,OAAQsF,OAAQ,aAAc2J,UAAW,cAGlG,cAACjI,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,wBASH,I,GAAM8mC,GAAqB,SAACS,EAAOZ,EAAUC,EAAQY,EAAaC,EAAa1+B,GAClF,IAmEI2+B,EAnEEC,EAAY,kBAAc5+B,EAAM4N,QAAQzZ,QAAQmM,KAApC,0DACZu+B,EAAiB,gBAAY7+B,EAAM4N,QAAQzZ,QAAQmM,MACnDw+B,EAAS,kBAAc9+B,EAAM4N,QAAQxZ,KAAKkM,KAAjC,sCACTy+B,EAAc,kBAAc/+B,EAAM4N,QAAQxZ,KAAKkM,KAAjC,mBAAgDN,EAAM4N,QAAQxZ,KAAKkM,KAAnE,0BACd0+B,EAAS,gBAAYh/B,EAAM4N,QAAQ7Z,QAAQuM,KAAlC,KACT2+B,EAAc,8CAA0Cj/B,EAAM4N,QAAQ2vB,KAAK1vB,SAC3EqxB,EAAc,8CAA0Cl/B,EAAM4N,QAAQ2vB,KAAK1vB,SAC3EsxB,EAAqB,SAACzC,EAAG0C,EAAMX,IAC7BW,EAAKC,OAAO3gC,QAAW+/B,EAAW,kBACtCa,EAAS5C,EAAG0C,EAAKC,OAAQZ,GACzB/B,EAAE6C,QAAQH,EAAKC,OAAOvvC,GAAI,SAAW,CAAC6B,MAAOytC,EAAK/2B,UAAU3X,KAAM8uC,QAASJ,EAAKtvC,GAAI2vC,cAAeL,EAAKK,cAAcxiB,UAAWmiB,EAAKniB,UAClI3rB,MAA8B,OAAvB8tC,EAAKK,cAAyBX,EAAWF,EAAcc,WAAYR,EAC1ES,eAAuC,OAAvBP,EAAKK,cAAyBV,EAAiBF,GAAoBO,EAAK/2B,UAAU3X,QAEpG4uC,EAAW,SAAC5C,EAAG6B,EAAME,GACvB/B,EAAEkD,QAAQrB,EAAKzuC,GAAI,CAAC6B,MAAOkuC,EAAStB,EAAME,EAAW,kBAAwBF,KAAMA,EAAMjtC,MAAO0tC,EAAWU,WAAYT,EAAgBa,MAAO,SAAUC,UAAS,IACjKrD,EAAEkD,QAAQrB,EAAKyB,KAAM,CAACruC,MAAQ4sC,EAAKyB,KAAMC,gBAAiB,MAAO3uC,MAAM,QAAD,OAAU0O,EAAM4N,QAAQsyB,YAAc3B,KAAM,KAAMmB,WAAYT,EAAgBc,UAAU,IAC9JrD,EAAEyD,UAAU5B,EAAKzuC,GAAIyuC,EAAKyB,MAC1BtD,EAAEkD,QAAQrB,EAAKyB,KAAO,kBAAmB,CAACruC,MAAM,GAAImuC,MAAO,SAAUvB,KAAMA,EAAMwB,UAAU,IAC3FrD,EAAEyD,UAAU5B,EAAKyB,KAAO,kBAAmBzB,EAAKyB,OAE9CH,EAAW,SAACT,EAAMlB,GACpB,OAAOA,EAAiBhjC,KAAK,SAACxK,GAC1B,OAAO0uC,EAAK1uC,MACb8V,KAAK,OAEN45B,EAAe,SAAC1D,EAAG0C,EAAMX,GAC3B,GAAIW,EAAKC,OAAO3gC,QAAW0gC,EAAKiB,YAAY3hC,QAAW+/B,EAAW,eAAlE,CAEM,GAAIA,EAAW,eASjBa,EAAS5C,EAAG0C,EAAKC,OAAQZ,GACzBa,EAAS5C,EAAG0C,EAAKiB,YAAa5B,QAL9B,GAHGW,EAAKC,OAAO3gC,QAAQ4gC,EAAS5C,EAAG0C,EAAKC,OAAQZ,GAC7CW,EAAKiB,YAAY3hC,QAAQ4gC,EAAS5C,EAAG0C,EAAKiB,YAAa5B,IAEtDW,EAAKC,OAAO3gC,SAAW0gC,EAAKiB,YAAY3hC,OACxC,OAMc,IAAnB0gC,EAAKniB,UACDwhB,EAAW,iBACV6B,EAAW5D,EAAG0C,EAAM,GAEpBkB,EAAW5D,EAAG0C,EAAM,IAEA,IAAnBA,EAAKniB,WAGVqjB,EAAW5D,EAAG0C,EAAM,GAFpBkB,EAAW5D,EAAG0C,EAAM,MAMtBkB,EAAa,SAAC5D,EAAG0C,EAAMmB,GACC,IAAvBA,EACC7D,EAAE6C,QAAQH,EAAKC,OAAOvvC,GAAIsvC,EAAKiB,YAAYvwC,GAAK,CAAC6B,MAAOytC,EAAK/2B,UAAU3X,KAAM8uC,QAASJ,EAAKtvC,GAAG2vC,cAAeL,EAAKK,cAAexiB,UAAWmiB,EAAKniB,UACrI3rB,MAA8B,OAAvB8tC,EAAKK,cAAyBX,EAAWF,EAAcc,WAAYR,EAC1ES,eAAuC,OAAvBP,EAAKK,cAAyBV,EAAiBF,GAAoBO,EAAK/2B,UAAU3X,MAClF,IAAvB6vC,GACL7D,EAAE6C,QAAQH,EAAKiB,YAAYvwC,GAAIsvC,EAAKC,OAAOvvC,GAAK,CAAC6B,MAAOytC,EAAK/2B,UAAU3X,KAAM8uC,QAASJ,EAAKtvC,GAAI2vC,cAAeL,EAAKK,cAAexiB,UAAWmiB,EAAKniB,UACtI3rB,MAA8B,OAAvB8tC,EAAKK,cAAyBX,EAAWF,EAAcc,WAAYR,EAC1ES,eAAuC,OAAvBP,EAAKK,cAAyBV,EAAiBF,GAAoBO,EAAK/2B,UAAU3X,OAGlHgsC,EAAI,IAAI8D,KAAQC,SAASC,MAAM,CAAEC,UAAU,EAAMC,YAAY,EAAMC,UAAU,IAAOC,SAAS,CAACC,QAAStC,EAAW,UAAcuC,qBAAoB,WAAY,MAAO,MACvKC,EAAMjE,UAAUY,EAAS3kC,SAEzBuT,EAAOy0B,EAAIC,OAAO,KAAKC,QAAQ,GAAG,GAElCxC,EADDnyB,EACYy0B,EAAIC,OAAO,KAEXD,EAAI/D,OAAO,KAE1B,IAAIkE,EAAOpE,UAAUM,GAAG,QAAQ,WAC1BqB,EAASxB,KAAK,YAAaH,SAASz4B,cAEvCs5B,IACCoD,EAAIC,OAAO,YAAYjE,SACvBgE,EAAII,KAAKD,IAEb1E,EAAEkD,QAAQ,SAAU,CAACjuC,MAAO,GAAIL,MAAO0tC,EAAWc,MAAO,SAAUvB,KAAM,KAAMmB,WAAYT,IAC3FT,EAAM9f,SAAS,SAAC0gB,IACRX,EAAW,sBAAmD,OAAvBW,EAAKK,iBAC7CL,EAAKiB,YAAYvwC,KAAOsvC,EAAKC,OAAOvvC,GAChC4sC,EAAE4E,QAAQlC,EAAKC,OAAOvvC,GAAI,SAAUsvC,EAAK/2B,UAAU3X,MAE/C0uC,EAAKtvC,GAAK4sC,EAAE0C,KAAKA,EAAKC,OAAOvvC,GAAI,SAAUsvC,EAAK/2B,UAAU3X,MAAM8uC,SAC/DL,EAAmBzC,EAAG0C,EAAMX,GAIhCU,EAAmBzC,EAAG0C,EAAMX,GAGV,IAAnBW,EAAKniB,UACAwhB,EAAW,iBAaR/B,EAAE4E,QAAQlC,EAAKiB,YAAYvwC,GAAIsvC,EAAKC,OAAOvvC,GAAIsvC,EAAK/2B,UAAU3X,MAE1D0uC,EAAKtvC,GAAK4sC,EAAE0C,KAAKA,EAAKiB,YAAYvwC,GAAIsvC,EAAKC,OAAOvvC,GAAIsvC,EAAK/2B,UAAU3X,MAAM8uC,SAC1EY,EAAa1D,EAAG0C,EAAMX,GAI1B2B,EAAa1D,EAAG0C,EAAMX,GAnBvB/B,EAAE4E,QAAQlC,EAAKC,OAAOvvC,GAAIsvC,EAAKiB,YAAYvwC,GAAIsvC,EAAK/2B,UAAU3X,MAE1D0uC,EAAKtvC,GAAK4sC,EAAE0C,KAAKA,EAAKC,OAAOvvC,GAAIsvC,EAAKiB,YAAYvwC,GAAIsvC,EAAK/2B,UAAU3X,MAAM8uC,QAC1EY,EAAa1D,EAAG0C,EAAMX,GAEtBjrC,QAAQC,IAAI,gCAIhB2sC,EAAa1D,EAAG0C,EAAMX,GAcN,IAAnBW,EAAKniB,YACPyf,EAAE4E,QAAQlC,EAAKiB,YAAYvwC,GAAIsvC,EAAKC,OAAOvvC,GAAIsvC,EAAK/2B,UAAU3X,MAG1D0uC,EAAKtvC,GAAK4sC,EAAE0C,KAAKA,EAAKiB,YAAYvwC,GAAIsvC,EAAKC,OAAOvvC,GAAIsvC,EAAK/2B,UAAU3X,MAAM8uC,SAC1EY,EAAa1D,EAAG0C,EAAMX,GAI1B2B,EAAa1D,EAAG0C,EAAMX,QAKtC,IAAI8C,EAAS,IAAIf,KAAQe,OACrBhwC,EAAQ0vC,EAAI1C,OAAOiD,wBAAwBjwC,MAC3CsF,EAASoqC,EAAI1C,OAAOiD,wBAAwB3qC,OA8DhD,GA7DA0qC,EAAOE,SAASC,OAAS,SAAgBpD,EAAQqD,EAAMpD,GAClD,IAAIqD,EAAWtD,EAAOuD,OAAO,SACxB1E,KAAK,QAAS,aACdA,KAAK,cAAc,SAASR,GACzB,OAAI4B,EAAKA,KACC,WAAaA,EAAKA,KAAK/lB,QAAQ7U,YAAY4C,MAAQ,OAEnD,wBAEX42B,KAAK,IAAK,SACZA,KAAK,IAAK,SACVA,KAAK,QAAS,QACdA,KAAK,SAAU,QACfG,GAAG,aAAa,SAASX,GAAK+B,EAAW,UAAcJ,EAAQC,EAAM5B,MACrEW,GAAG,YAAY,SAASX,GAAK+B,EAAW,SAAaJ,EAAQC,EAAM5B,MACnEW,GAAG,SAAS,SAASX,GAAKK,SAAS7nC,iBAAkBupC,EAAW,MAAUJ,EAAQC,EAAM5B,MACxFW,GAAG,eAAe,SAACX,GAAOF,GAAkBC,EAAG6B,EAAMG,EAAW,YAAiBntC,EAAOsF,EAAQ,sBAIrG,OAHA0nC,EAAKuD,UAAY,SAASC,GACtB,OAAOvB,KAAQsB,UAAUJ,OAAOnD,EAAM,GAAIwD,IAEvCH,GAEXL,EAAOE,SAASO,OAAS,SAAgB1D,EAAQqD,EAAMpD,GAkCpD,OAjCgBD,EAAOuD,OAAO,QACzB1E,KAAK,SAAS,SAASR,GACpB,IAAIsF,EAAavF,EAAEwF,SAAS3D,EAAKA,KAAKyB,MAClCmC,EAAU5D,EAAKA,KAAKyB,KAAKvlC,OAQ7B,QAPkBrJ,IAAf6wC,GACCA,EAAWvjB,SAAS,SAACoe,GACdJ,EAAE6B,KAAKzB,GAAGnrC,MAAM8I,OAAS0nC,IACxBA,EAAUzF,EAAE6B,KAAKzB,GAAGnrC,MAAM8I,WAIR,OAA3BgkC,EAAW,QAEV,OAAiB,EAAV0D,EAAc,KAIrB,QAAkB/wC,IAAf6wC,EAAyB,CACxB,IAAIl2B,EAAQ,EAOZ,OANAk2B,EAAWvjB,SAAS,SAACoe,GACdJ,EAAE0F,SAAStF,EAAG,UAAUriC,OAAS,IAChCsR,GAAS,OAGjBo2B,EAAqB,EAAVA,EAAwB,IAARp2B,GACd,EAAW,EACjBo2B,EAAU,KAEjB3uC,QAAQC,IAAI,gCAIvB0pC,KAAK,SAAU,IAKxBoE,EAAO5C,EAAUjC,GACdmB,EAAO,CACN,IAAIwE,EAAa3F,EAAE4F,QAAQ/wC,MAAQ,GAC/BgxC,EAAc7F,EAAE4F,QAAQzrC,OAAS,GACjC2rC,EAAY5lC,KAAK6lC,IAAIlxC,EAAQ8wC,EAAYxrC,EAAS0rC,GAClDG,EAAcnxC,EAAQ,EAAO8wC,EAAaG,EAAa,EACvDG,EAAc9rC,EAAS,EAAO0rC,EAAcC,EAAa,EAC/CvB,EAAIz8B,aAAaG,SAAS,KAChC08B,KAAKD,EAAK78B,UAAWy4B,gBAAgB4F,UAAUF,EAAYC,GAAYE,MAAML,IAEzF7D,EAASvB,UAAU,mBACdD,KAAK,YAAa,oBC5OrB2F,GAAY/hC,aAAH,yzBAmDR,SAASgiC,GAA4BpyC,GACxC,IACMqP,EAAQC,eACd,OACI,sBAAK3O,MAAO,CAAC+H,SAHA,MAGU9H,MAHV,MAG2B4E,QAAS,cAAeU,OAAQ,aAAc4Q,cAAe,UAArG,UACI,cAAC/M,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,QAAS3O,QAAS,YAAzJ,SACI,eAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,sBACc/P,EAAM0M,SAASvN,QAGjC,cAAC+K,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SACA,cAACioC,GAAD,eAAsCryC,EAAM0M,gBAOjD,SAAS2lC,GAAiCryC,GACnB8B,IAAMqG,OAAO,MAAvC,IACMkH,EAAQC,eACRxL,EAAKC,YAAe/B,GAC1B,EAAsCF,IAAMkC,SAAS,IAArD,mBAAOsuC,EAAP,KAAoBC,EAApB,KACA,EAAkEzwC,IAAMkC,UAAS,GAAjF,mBAAOwuC,EAAP,KAAkCC,EAAlC,KACA,EAAwC3wC,IAAMkC,SAASqL,EAAM4N,QAAQ7Z,QAAQuM,MAA7E,mBAAO+iC,EAAP,KAAqBC,EAArB,KACA,EAAgD7wC,IAAMkC,UAAS,GAA/D,mBAAO4uC,EAAP,KAAyBC,EAAzB,KACA,EAAwC/wC,IAAMkC,UAAS,GAAvD,mBAAO8uC,EAAP,KAAqBC,EAArB,KACA,EAAoDjxC,IAAMkC,SAAS,IAAnE,mBAAOqpC,EAAP,KAA2B2F,EAA3B,KACA,EAA0DlxC,IAAMkC,SAAS,IAAzE,mBAAOivC,EAAP,KAA8BC,EAA9B,KACA,EAA4CpxC,IAAMkC,UAAS,GAA3D,mBAAOmvC,EAAP,KAAuBC,EAAvB,KACA,EAA0CtxC,IAAMkC,SAAS,IAAzD,mBAAOqvC,EAAP,KAAsBC,EAAtB,KACAl8B,aAAgB+6B,GAAW,CACvBz/B,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,sBAAuB3O,YAAa,eACtEunB,mBAAmB,EACnBC,mBAAoB,YAAyB,IAAvBC,EAAsB,EAAtBA,iBACpB4a,EAAiB5a,EAAiBl2B,KAAK+wC,sBAM7C9mC,IAAa,WAHM,IAAC+mC,IAILxzC,EAAMyzC,aAHjBlB,EAAe5mC,GAAkB6nC,OAKrCnvC,qBAAW,WACP,IAAMqvC,EAAST,EAAsBrhC,QAAQ,SAAC68B,GAC1C,OAAIA,EAAK/2B,UAAU6L,QAAUkrB,EAAKC,OAAOvvC,KAAOa,EAAMb,IAAMsvC,EAAKiB,YAAYvwC,KAAOa,EAAMb,MAI3F2K,OACA4pC,EAAS,IAAMP,EACdC,GAAkB,GACF,IAAXM,GAAgBP,GACrBC,GAAkB,KAEvB,CAACH,IACJ5uC,qBAAW,WACP,IAAMsvC,EAAW,SAACC,GAed,IAbA,IAAIC,EAAUR,EAAczhC,QAAQ,SAAC68B,GACjC,OAAGA,EAAKC,OAAOvvC,KAAOa,EAAMb,IAAMsvC,EAAKiB,YAAYvwC,KAAOa,EAAMb,OACzDy0C,GAC2B,OAAvBnF,EAAKK,kBAShBgF,GAAY,EACVA,GAAU,CAEZ,IAAMC,EAAWV,EAAcpoC,QAAQ,SAACC,EAAMujC,GAE1C,OAAGvjC,EAAK4P,SAAS2zB,GAAc,YAAIvjC,GAElBA,EAAK0G,QAAQ,SAAChT,GAC3B,OAAGA,EAAE8vC,OAAOvvC,KAAOsvC,EAAKC,OAAOvvC,IAAMP,EAAE8vC,OAAOvvC,KAAOsvC,EAAKiB,YAAYvwC,IAAMP,EAAE8wC,YAAYvwC,KAAOsvC,EAAKC,OAAOvvC,OACtGy0C,GAC2B,OAAvBnF,EAAKK,kBAORhlC,OAAS,EACX,GAAN,mBAAWoB,GAAX,CAAiBujC,IAEV,YAAIvjC,KAjBF,YAmBV2oC,IACPC,EAAYC,EAASjqC,OAAS+pC,EAC9BA,EAAO,YAAOE,GAElB,OAAOF,GAELG,EAAgBL,GAAS,GACzBE,EAAUF,GAAS,GACzBX,EAAsBgB,GACtBd,EAAyBW,KAC1B,CAACR,EAAerzC,EAAMb,KAEzBkF,qBAAW,WAQoB,IANNgpC,EAAmBz7B,QAAQ,SAAC68B,GAC7C,OAAIA,EAAK/2B,UAAU6L,QAAkC,OAAvBkrB,EAAKK,iBAKvBhlC,QACZ6oC,EAAgBtjC,EAAM4N,QAAQ9c,MAAMwP,MACpCkjC,GAAoB,KAEpBF,EAAgBtjC,EAAM4N,QAAQ7Z,QAAQuM,MACtCkjC,GAAoB,MAEzB,CAACxF,EAAoBh+B,EAAM4N,QAAQ7Z,QAAQuM,KAAMN,EAAM4N,QAAQ9c,MAAMwP,OAQhD3P,EAAMi0C,QAAgCj0C,EAAMk0C,gBAAgBjwC,SAAwCjE,EAAMi0C,OAAW,KAAkD,KAI5I,KAKnD,OACI,cAAC5pC,EAAA,EAAD,CAAQzD,KAAK,QAAQjG,MAAO,CAAC,SAAY,UAAzC,SACQ,eAAC+J,EAAA,EAAD,WACI,eAAChE,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,8BACA,eAACA,EAAA,EAAD,WAAY3G,EAAMm0C,gBACbn0C,EAAMm0C,gBAAkB,EAAK,uBAA0B,GAC7B,IAA1Bn0C,EAAMm0C,gBAAyB,yBAA4B,GAC3Dn0C,EAAMm0C,gBAAkB,EAAK,qBAAwB,SAG9D,eAACztC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,mCACA,cAACA,EAAA,EAAD,UACK3G,EAAMi0C,OACH,eAAC,IAAM5sC,SAAP,WACI,cAAC,KAAD,CAAc1G,MAAO,CAACiW,aAAc,MAAOpR,QAAS,eAAgB+I,WAAY,SAChF,cAACO,EAAA,EAAD,CAAYnO,MAAO,CAAC6E,QAAS,gBAA7B,SACK,qBAAuBxF,EAAMk0C,gBAAgBjwC,SAAW,SAIjE,eAAC,IAAMoD,SAAP,WACI,cAAC,KAAD,CAAU1G,MAAO,CAACiW,aAAc,MAAOpR,QAAS,eAAgB+I,WAAY,SAC5E,cAACO,EAAA,EAAD,CAAYnO,MAAO,CAAC6E,QAAS,gBAA7B,SACK,0BAMrB,eAACkB,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,UAAY3G,EAAMo0C,QAEtB,eAAC1tC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,0BACA,cAACA,EAAA,EAAD,UAAY3G,EAAMq0C,iBAEtB,eAAC3tC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,mBACA,cAACA,EAAA,EAAD,UAAY3G,EAAMqvC,UAEtB,eAAC3oC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,mBACA,cAACA,EAAA,EAAD,UAAY3G,EAAMmC,UAEtB,eAACuE,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,qBACA,cAACA,EAAA,EAAD,UAAY3G,EAAMs0C,YAEtB,eAAC5tC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,gCACA,eAACA,EAAA,EAAD,WAAY3G,EAAMkmB,GAAlB,IAAuBlmB,EAAMu0C,aAA7B,UAEJ,eAAC7tC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,UAAY3G,EAAMw0C,SAEtB,eAAC9tC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,UAAY2rC,OAEhB,eAAC5rC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,0BACA,cAACA,EAAA,EAAD,UAAY3G,EAAMqT,iBAEtB,eAAC3M,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,UAAY3G,EAAMy0C,gBAEtB,eAAC/tC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,UAAY3G,EAAM6nB,QAAQ7U,YAAY4C,WAE1C,eAAClP,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,UACCwsC,EACG,cAAC,KAAD,CAAU5sC,QAAS,SAACzG,GAAOA,EAAIs3B,kBAAkB2b,GAAgB,IAASpyC,MAAO,CAAC2F,MAAOosC,EAAcgC,OAAQ,aAC/G,cAAC,KAAD,CAAuBnuC,QAAS,SAACzG,GAAOA,EAAIs3B,kBAAkB2b,GAAgB,IAASpyC,MAAO,CAAC2F,MAAOosC,EAAcgC,OAAQ,kBAIpI,eAAChuC,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,2BACA,cAACA,EAAA,EAAD,UAAY3G,EAAM20C,kBAEtB,cAAC1sC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM0qC,EAC/C9qC,QAAS,WAAK+qC,GAAgB,IAC9BpqC,YAAa,cAACqkC,GAAD,yBAAchlC,QAAS,WAAK+qC,GAAgB,KAAc/yC,GAA1D,IAAiEqtC,mBAAoBuF,EAAmBvF,EAAqB4F,OAE9I,cAAChrC,GAAD,CAAcnH,WAAW,EAAMsH,KAAMoqC,EAA4BxqC,QAAS,WAAOyqC,GAA6B,IAC1G9pC,YACI,cAACC,GAAD,CAA0BrB,MAAO,8BAA+BS,QAAS,WAAOyqC,GAA6B,IAAUxyC,MAAOD,EAAMqT,YAAajN,SA1G3I,SAACiN,GAC3BrT,EAAMinC,kBAAkB,CAAC5zB,cAAalU,GAAIa,EAAMb,UA4GpC,eAACuH,EAAA,EAAD,CAAUkE,OAAK,EAAf,UACI,cAACjE,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,UAAY3G,EAAM40C,qB,4ZCjTnC,SAASC,GAAe70C,GAC7B,IAAQuxC,EAA0GvxC,EAA1GuxC,SAAUtxC,EAAgGD,EAAhGC,MAAOwK,EAAyFzK,EAAzFyK,MAA+EqqC,GAAU90C,EAAlFooB,UAAkFpoB,EAAvE+0C,QAAuE/0C,EAA9Dg1C,gBAA8Dh1C,EAA7Ci1C,YAA6Cj1C,EAAhCk1C,kBAAlF,aAAkHl1C,EAAlH,KACMW,OAAwBF,IAAhBT,EAAMW,MAAsB,CAAC6E,QAASvF,IAAUwK,EAAQ,OAAQ,OAAQqM,cAAe,SAAWq+B,UAAW,OAAQC,SAAU,EAAGx0C,MAAO,OAAQ8H,SAAU,QAAU1I,EAAMW,MACzL,OACE,6CACEqjB,KAAK,WACL6mB,OAAQ5qC,IAAUwK,EAClBtL,GAAE,mCAA8BsL,GAChC,gDAAwCA,GACxC9J,MAAOA,GACHm0C,GANN,aAQG,cAAC,IAAMztC,SAAP,UAAiBkqC,OAIxB,SAAS8D,GAAU5qC,GACjB,MAAO,CACLtL,GAAG,uBAAD,OAAyBsL,GAC3B,gBAAgB,4BAAhB,OAA6CA,IAG1C,SAAS6qC,GAAet1C,GAC3B,IAAOgB,EAAwKhB,EAAxKgB,MAAOyJ,EAAiKzK,EAAjKyK,MAA6B8qC,GAAoIv1C,EAA1Jc,UAA0Jd,EAA/IooB,UAA+IpoB,EAApIu1C,eAAeC,EAAqHx1C,EAArHw1C,WAAyDT,GAA4D/0C,EAAzGy1C,sBAAyGz1C,EAAlF01C,UAAkF11C,EAAvE21C,UAAuE31C,EAA5D+0C,SAAmDD,GAAS90C,EAAnD41C,qBAAmD51C,EAA7Bg1C,gBAAlJ,aAA+Kh1C,EAA/K,KAIA,OACI,cAAC61C,GAAA,EAAD,yBAAK70C,MACD,uBAAMu0C,cAAeA,EAAe50C,MAAO,CAAC6E,QAAS,eAAgB0e,OAAQ,GAA7E,UACKljB,EAAM,cAACqN,EAAA,EAAD,yBAAYlE,UAAU,MAAMvD,KAAK,QAAQL,QAN5C,SAAC3H,GACfA,EAAEw4B,kBAAkBoe,EAAW,CAACM,MAAOf,EAAQe,MAAOrrC,MAAOA,MAKmBqqC,GAA/D,aAAsE,cAAC,KAAD,WAE/EO,GAAU5qC,IAAYqqC,IAG7B,SAASiB,GAAqB/1C,GACnC,IAAOgB,EAA4GhB,EAA5GgB,MAAOyJ,EAAqGzK,EAArGyK,MAA0EurC,GAA2Bh2C,EAA9Fc,UAA8Fd,EAAnFooB,UAAmFpoB,EAAxEy1C,sBAAwEz1C,EAAjD01C,UAAiD11C,EAAtC21C,UAAsC31C,EAA3Bg2C,eAAkBlB,EAA1G,aAAmH90C,EAAnH,IACA,OACI,cAAC61C,GAAA,EAAD,yBAAK70C,MACD,iCAAOA,EAAM,uBAAMg1C,MAEjBX,GAAU5qC,IAAYqqC,I,8FC9C3B,SAASmB,GAAsBC,GAClC,IAEI,IAAIC,EAAK5M,SAASK,cAAc,YAgBhC,OAdAuM,EAAGl2C,MAAQi2C,EACK,KAAbC,EAAGl2C,QACFk2C,EAAGl2C,MAAQ,KAGfk2C,EAAGC,aAAa,WAAY,IAC5BD,EAAGx1C,MAAQ,CAACsJ,SAAU,WAAYwK,KAAM,WACxC80B,SAAS3kC,KAAKilC,YAAYsM,GAE1BA,EAAG5F,SAEHhH,SAAS8M,YAAY,QAErB9M,SAAS3kC,KAAK0xC,YAAYH,IACnB,EACT,MAAOh2C,GAEL,OADA0C,QAAQC,IAAI,UAAW,gCAAkC3C,EAAMmF,aACxD,G,yBCjBR,SAASixC,GAA+Bv2C,GAC3C,MAAwB8B,IAAMkC,UAAS,GAAvC,mBAAOysC,EAAP,KAAa+F,EAAb,KAIF,OACE,eAAC,IAAMnvC,SAAP,WACI,cAACG,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,qBAAKlB,QANM,WACjBiwC,GAAS/F,IAKuBzqC,IAAKhG,EAAMgX,KAAMrW,MAAO,CAACC,MAAO6vC,EAAO,GAAK,OAAQvqC,OAAQuqC,EAAO,GAAK,OAAQiE,OAAQjE,EAAO,WAAa,eAE1I,cAAC7oC,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQnF,QAAQ,YAAYqF,QAASvG,EAAMgI,QAAS1B,MAAM,UAA1D,wBCTV,IAAMmN,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvConC,QAAS,CACPhnC,gBAAiBJ,EAAM4N,QAAQy5B,WAAWC,SAC1CrwC,MAAO+I,EAAM4N,QAAQ2vB,KAAK+J,SAC1BpiC,UAAWlF,EAAMunC,QAAQ,GACzBj+B,SAAU,IAEZk+B,MAAO,CACLvwC,MAAO+I,EAAM4N,QAAQy5B,WAAWC,cAIvBG,GAA4B,SAAC92C,GACxC,MAA4C8B,IAAMkC,UAAS,GAA3D,mBAAO+yC,EAAP,KAAuBC,EAAvB,KACM/hC,EAAUxB,KACV5H,GAAO,IAAIN,MAAQ0rC,cAKzB,OACE,eAAC,IAAM5vC,SAAP,WACG0vC,GACD,cAAC9uC,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM2uC,EAC/C/uC,QAAS,WAAKgvC,GAAkB,IAChCruC,YAAa,cAAC4tC,GAAD,CAAgCv/B,KAAM,kCAAoChX,EAAM4vB,cAAgB,SAAW/jB,EAAK7D,QAAS,WAAKgvC,GAAkB,QAGjK,qBAAKr2C,MAAO,CAAC6E,QAAS,gBAAtB,UACQ,OAALxF,QAAK,IAALA,OAAA,EAAAA,EAAOk3C,YAAa,KAEvB,cAACpP,GAAA,EAAD,CAASvgC,OAAY,OAALvH,QAAK,IAALA,OAAA,EAAAA,EAAOm3C,YAAa,kBAAoBN,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAAjH,SACE,cAACxwC,EAAA,EAAD,CAAQC,MAAM,UAAUpF,QAASlB,EAAMkB,QAAUlB,EAAMkB,QAAU,YAAaqF,QAhBxD,WAC1BywC,GAAkB,IAe8Fr2C,MAAO,CAACkB,aAAc,QAAlI,SAA4I7B,EAAMD,aChC7Iq3C,GAA2B,SAACp3C,GACvC,IAAMqP,EAAQC,eACd,EAA0CxN,IAAMkC,SAAShE,EAAMk3C,WAA/D,mBAAOG,EAAP,KAAsBC,EAAtB,KAUA,OATAjzC,qBAAW,WACT,IACE,IAAMkzC,EAAe1yC,KAAKC,UAAUD,KAAK2E,MAAMxJ,EAAMk3C,WAAY,KAAM,GACvEI,EAAiBC,GAClB,MAAMp3C,GAELm3C,EAAiBt3C,EAAMk3C,cAExB,CAACl3C,EAAMk3C,YAER,cAAC,KAAD,CACIx+B,KAAK,OACLrJ,MAA8B,SAAvBA,EAAM4N,QAAQxb,KAAkB,UAAY,QACnDkX,SAAU,GACVC,YAAY,EACZ1S,OAAQ,QACR2S,qBAAqB,EACrB5Y,MAAOo3C,EACP9uC,OAAO,EACP3H,MAAO,OACP42C,SAAU,EACVtZ,SAAU,GACVuH,UAAQ,EACR3sB,WAAY,CACVC,iBAAiB,EACjBC,QAAS,EACTmlB,WAAW,M,kFCxBd,SAASsZ,GAA2Bz3C,GACvC,MAA8B8B,IAAMkC,SAAS,IAA7C,mBAAOV,EAAP,KAAgBwV,EAAhB,KACA,EAAgChX,IAAMkC,SAAS,IAA/C,mBAAOslB,EAAP,KAAiBouB,EAAjB,KACMjd,EAAWtyB,iBAAO,MAClBkH,EAAQC,eAqBhB,OAVEjL,qBAAW,WAEP,IAAMszC,EAAI,YAAO33C,EAAMsD,SACvBwV,EAAW6+B,GACRA,EAAK7tC,OAAS,EACb4tC,EAAYC,EAAK,IAEjBD,EAAY,MAEjB,CAAC13C,EAAMsD,UAEV,eAAC,IAAM+D,SAAP,WACI,cAACC,GAAA,EAAD,UAAetH,EAAMuH,QACrB,cAACC,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,IAAMJ,SAAP,UACI,eAACwW,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,UACE,cAACygB,GAAA,EAAD,CAAYwC,IAAK4W,EAAjB,qBACA,eAAC3c,GAAA,EAAD,CACEiO,QAAQ,2BACR5sB,GAAG,qBACHc,MAAOqpB,EACPzpB,SA/BK,SAACU,GAClBm3C,EAAYn3C,EAAML,OAAOD,QA+Bb46B,MAAO,cAAC1c,GAAA,EAAD,CAAOxd,MAAO,CAACC,MAAO,UAL/B,UAOE,cAAC6d,GAAA,EAAD,CAAUxe,MAAM,GAAhB,SACE,wCAEDqD,EAAQiH,KAAK,SAACgQ,GAAD,OACV,cAACkE,GAAA,EAAD,CAAUxe,MAAOsa,EAAjB,SAAmDA,EAAIva,EAAMwF,UAAlC+U,EAAIva,EAAM43C,0BAMrD,eAAChwC,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQE,QA7CO,WACjBvG,EAAMoG,SAASkjB,GACZtpB,EAAM63C,mBAGT73C,EAAMgI,WAwC2B9G,QAAQ,YAAYP,MAAO,CAAC8O,gBAAiBJ,EAAM4N,QAAQ7Z,QAAQuM,MAAlG,SACG3P,EAAM6iB,eCpDnB,I,SAEMi1B,GAAY,CAChB96B,WAAY,CACVrc,MAAO,CACLynB,UAAW2vB,IACXn3C,MAAO,MAGXM,QAAS,OACT82C,mBAAoB,kBAAM,OAEtBvkC,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC4oC,YAAa,CACXtwC,OAAQ0H,EAAM6R,QAAQ,GACtBtgB,MAAO,QAETs3C,MAAO,CACL1yC,QAAS,OACT2yC,SAAU,QAEZC,KAAM,CACJzwC,OAAQ,GAEV0wC,QAAS,CACPxoC,UAAWR,EAAM6R,QAAQ,QAItB,SAASo3B,GAAmCt4C,GACjD,MAA4C8B,IAAMkC,SAAS,aAA3D,mBAAOu0C,EAAP,KAAuBC,EAAvB,KAIA,EAA8B12C,IAAMkC,SAAS,IAA7C,mBAAOy0C,EAAP,KAAgBC,EAAhB,KACA,EAA0B52C,IAAMkC,SAAS,IAAzC,mBAAO20C,EAAP,KAAcC,EAAd,KACA,EAAoC92C,IAAMkC,SAAS,IAAnD,mBAAO60C,EAAP,KAAmBC,EAAnB,KACA,EAA8Bh3C,IAAMkC,SAAS,IAA7C,mBAAO6E,EAAP,KAAgBC,EAAhB,KACMmM,EAAUxB,KA2BhB,OACE,eAAC,IAAMpM,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,qCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,eAAC,IAAMJ,SAAP,WACI,eAACwW,GAAA,EAAD,CAAazT,UAAW6K,EAAQgjC,YAAhC,UACA,cAAC52B,GAAA,EAAD,CAAYliB,GAAG,sBAAf,sCACA,cAAC2e,GAAA,EAAD,CACEiO,QAAQ,sBACR5sB,GAAG,gBACHc,MAAOs4C,EACP14C,SAdmB,SAACU,GAClCi4C,EAAkBj4C,EAAML,OAAOD,QAcjB46B,MAAO,cAAC1c,GAAA,EAAD,IACP25B,UAAWA,GANb,SAzCY,CACxB,YAAa,SAAU,OAAQ,cAAe,MAAO,OAgDpBvtC,KAAI,SAACxK,GAAD,OACrB,cAAC0e,GAAA,EAAD,CAAqBxe,MAAOF,EAA5B,SACE,cAACssB,GAAA,EAAD,CAAcnP,QAASnd,KADVA,WAMrB,cAAC,EAAD,CAAiBE,MAAOw4C,EAAS54C,SArCrB,SAACE,EAAME,EAAOE,GACpCu4C,EAAWz4C,IAoC2DF,KAAK,iBACjE,cAAC,EAAD,CAAiBE,MAAO04C,EAAO94C,SAhCrB,SAACE,EAAME,EAAOE,GAClCy4C,EAAS34C,IA+ByDF,KAAK,oBAC7D,cAAC,EAAD,CAAiBE,MAAO4I,EAAShJ,SApCrB,SAACE,EAAME,EAAOE,GACpC2I,EAAW7I,IAmC2DF,KAAK,YACjE,cAAC,EAAD,CAAiByB,WAAS,EAACvB,MAAO44C,EAAYh5C,SA/B/B,SAACE,EAAME,EAAOE,GACvC24C,EAAc74C,IA8BwEF,KAAK,oBAGvF,eAAC6H,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAxC,mBAGA,cAACmF,EAAA,EAAD,CAAQE,QAzDC,WACfvG,EAAMoG,SAAS,CACbuyC,QACAF,UACA5vC,UACAgwC,aACA,KAAQN,IAEVv4C,EAAMgI,WAiD2B1B,MAAM,UAAUpF,QAAQ,YAAnD,0BCtFV,I,2BAAM63C,GAAwB3oC,aAAH,qVASrB4oC,GAAqB5oC,aAAH,uOAgBlB6oC,GAA2B7oC,aAAH,sUAC5B4oC,IAQK,SAASE,GAAwBl5C,GACpC,MAA0B8B,IAAMkC,SAAS,IAAzC,mBAAO/D,EAAP,KAAcsZ,EAAd,KACMlK,EAAQC,eACd,EAA0CxN,IAAMkC,SAAS,IAAzD,mBAAOm1C,EAAP,KAAsBC,EAAtB,KACA,EAAkCt3C,IAAMkC,UAAS,GAAjD,mBAAOq1C,EAAP,KAAkBC,EAAlB,KACA,EAAoCx3C,IAAMkC,SAAS,IAAnD,mBAAOu1C,EAAP,KAAmBC,EAAnB,KACA,EAAsD13C,IAAMkC,SAAS,IAArE,mBAAOy1C,EAAP,KAA4BC,EAA5B,KACA,EAAsD53C,IAAMkC,SAAS,IAArE,mBAAO21C,EAAP,KAA4BC,EAA5B,KACA,EAA8D93C,IAAMkC,SAAS,IAA7E,mBAAO61C,EAAP,KAAgCC,EAAhC,KACA,EAA4Dh4C,IAAMkC,SAAS,GAA3E,mBAAO+1C,EAAP,KAA+BC,EAA/B,KACA,EAAgDl4C,IAAMkC,SAAS,GAA/D,mBAAOi2C,GAAP,KAAyBC,GAAzB,KACA,GAAoEp4C,IAAMkC,SAAS,IAAnF,qBAAOm2C,GAAP,MAAmCC,GAAnC,MACA,GAAsDt4C,IAAMkC,SAAS,GAArE,qBAAOq2C,GAAP,MAA4BC,GAA5B,MACA,GAAwEx4C,IAAMkC,SAAS,IAAvF,qBAAOu2C,GAAP,MAAqCC,GAArC,MACA,GAA0D14C,IAAMkC,SAAS,GAAzE,qBAAOy2C,GAAP,MAA8BC,GAA9B,MACA,GAA8E54C,IAAMkC,UAAS,GAA7F,qBAAO22C,GAAP,MAAwCC,GAAxC,MACA,GAAoE94C,IAAMkC,UAAS,GAAnF,qBAAO62C,GAAP,MAAmCC,GAAnC,MACA,GAAkCh5C,IAAMkC,SAAS,CAACjE,KAAM,KAAxD,qBAAOsqC,GAAP,MAAkBC,GAAlB,MACA,GAA2Bl5B,aAAY2nC,GAAuB,CAC1D7nC,YAAa,SAAC1O,GAEgC,YAAvCA,EAAKu4C,uBAAuB9oC,QAC3BmnC,EAAiB,YAAI52C,EAAKu4C,uBAAuBC,UAC/B,WAAfh7C,EAAMyB,MACFe,EAAKu4C,uBAAuBC,QAAQlxC,OAAS,IAC5CyP,EAAS/W,EAAKu4C,uBAAuBC,QAAQ,IAC7Ch7C,EAAMH,SAASG,EAAMD,KAAMyC,EAAKu4C,uBAAuBC,QAAQ,IAAI,KAI3E73C,EAAaK,QAAQ,4CAA8ChB,EAAKu4C,uBAAuB56C,QAGvGsR,QAAS,SAACjP,GACNW,EAAaK,QAAQ,6CACrBX,QAAQC,IAAIN,MAjBby4C,GAAP,qBAoBA,GAA2B7pC,aAAY6nC,GAA0B,CAC7DhoC,YAAa,WACbC,YAAa,SAAC1O,GACVW,EAAaC,QAAQ,uCACrBg2C,EAAiB,GAAD,mBAAKD,GAAL,gBAAwB32C,EAAK04C,2BAEjDzpC,QAAS,SAACjP,GACNW,EAAahD,MAAM,+BACnB0C,QAAQC,IAAIN,MARb24C,GAAP,qBAWA92C,qBAAW,WAWR,GAVqC,OAAjCrE,EAAM+6C,wBACuB,IAAzB5B,EAAcrvC,QACbmxC,GAAiB,CAACvoC,UAAU,CACxBhG,SAAU1M,EAAMo7C,YAChBC,eAAgBr7C,EAAMD,KACtBqpB,QAASppB,EAAMs7C,YAAYzxB,IAC3BpC,aAAcznB,EAAMs7C,YAAYtoC,YAAY4C,SAIvC,YAAf5V,EAAMyB,KACS,KAAVxB,IACCq5C,EAAat5C,EAAMC,OACnBsZ,EAASvZ,EAAMC,aAElB,GAAkB,UAAfD,EAAMyB,KACe,IAAtB83C,EAAWzvC,QAAgB9J,EAAMC,MAAM6J,OAAS,GAC/C0vC,EAAcx5C,EAAMC,YAEvB,GAAkB,mBAAfD,EAAMyB,MAA8D,OAAjCzB,EAAM+6C,uBACjC,KAAV96C,IAEEy5C,EAAuB15C,EAAMC,OAC7BsZ,EAASvZ,EAAMC,OACfm5C,EAAiBp5C,EAAMg7C,eAG3B,GAAkB,iBAAfh7C,EAAMyB,KACT,GAAGzB,EAAMg7C,QAAQlxC,OAAS,EAAE,CAExB,IAAIyxC,EAAU,EACXtB,GAAmBj6C,EAAMg7C,QAAQlxC,OAChCyxC,EAAUtB,GAEVC,GAAoB,GAExBJ,EAA2B95C,EAAMg7C,SACjC,IAAIQ,EAAa,EACdnB,GAAsBr6C,EAAMg7C,QAAQO,GAAd,SAAmCzxC,OACxD0xC,EAAanB,GAEbC,GAAuB,GAE3BF,GAA8Bp6C,EAAMg7C,QAAQO,GAAd,UAC3Bv7C,EAAMg7C,QAAQO,GAAd,SAAmCzxC,OAAS,EAExC9J,EAAMg7C,QAAQO,GAAd,SAAmCC,GAAnC,OAAyD1xC,OAAS,GACjE0wC,GAAgCx6C,EAAMg7C,QAAQO,GAAd,SAAmCC,GAAnC,QAIpCr4C,EAAaK,QAAQ,oEAGzBs2C,EAA2B,IAC3BU,GAAgC,IAChCr3C,EAAaK,QAAQ,mEAGb,KAAVvD,IACmB,WAAfD,EAAMyB,KACc,KAAhBzB,EAAMC,MACLsZ,EAAS,GAERA,EAASqB,SAAS5a,EAAMC,QAG5BsZ,EAASvZ,EAAMC,QAGY,OAAjCD,EAAM+6C,wBAA2C,KAAR96C,IACvCm5C,EAAiB,YAAIp5C,EAAMg7C,UAC3BzhC,EAASvZ,EAAMC,UAKxB,CAACD,EAAMg7C,QAASh7C,EAAM4X,cAAe5X,EAAMyB,KAAMzB,EAAMC,MAAOq5C,EAAcr5C,IAC/E,IAAMw7C,GAAuB,SAACC,EAAYC,EAAeC,GACrD,IAAMjkC,EAAsB3X,EAAMg7C,QAAQU,GAAd,SAAsCC,GAAtC,OAA+DC,GAAU/7B,WAAW5U,QAAQ,SAACC,EAAMqP,GAC3H,OAAO,2BAAIrP,GAAX,mBAAkBqP,EAAIxa,KAAOwa,EAAIta,UAClC,IACC47C,EAAoB,CAACxM,KAAMrvC,EAAMg7C,QAAQU,GAAd,KAAmCI,WAAY97C,EAAMg7C,QAAQU,GAAd,SAAsCC,GAAe9oB,KACnIF,WAAY,CAAC5yB,KAAMC,EAAMg7C,QAAQU,GAAd,SAAsCC,GAAtC,OAA+DC,GAAU77C,KAAM8f,WAAYlI,IAC7C,aAA9D3X,EAAMg7C,QAAQU,GAAd,SAAsCC,GAAel6C,KACpDo6C,EAAiB,cAAoB77C,EAAMg7C,QAAQU,GAAd,SAAsCC,GAAtC,kBAErCE,EAAiB,cAAoB,GAEzC77C,EAAMH,SAASG,EAAMD,KAAM87C,GAAmB,IAoB5CrgC,GAAgB,SAAC1b,GACnByZ,EAASzZ,EAAII,OAAOD,OACpBD,EAAMH,SAASG,EAAMD,KAAMD,EAAII,OAAOD,OAAO,IAE3C87C,GAA8B,SAACj8C,GACjCyZ,EAASzZ,EAAII,OAAOD,OACpBD,EAAMH,SAASG,EAAMD,KAAMo5C,EAAcr5C,EAAII,OAAOD,QAAQ,IAE1D+7C,GAAyB,SAACz7C,GAG5B,IAFA,IAAQ+C,EAAY/C,EAAML,OAAlBoD,QACFrD,EAAQ,GACL+d,EAAI,EAAGi+B,EAAI34C,EAAQwG,OAAQkU,EAAIi+B,EAAGj+B,GAAK,EAC1C1a,EAAQ0a,GAAGsL,UACbrpB,EAAM0J,KAAKrG,EAAQ0a,GAAG/d,OAG1By5C,EAAuBz5C,GACvBsZ,EAAStZ,GACTD,EAAMH,SAASG,EAAMD,KAAME,GAAO,IAEhCwb,GAAe,SAAC1b,EAAME,EAAOE,GAC/BoZ,EAAStZ,GACTD,EAAMH,SAASG,EAAMD,KAAME,EAAOE,IAEhC+7C,GAAiB,SAACn8C,EAAME,EAAOE,GACjCoZ,EAASqB,SAAS3a,IAClBD,EAAMH,SAASG,EAAMD,KAAM6a,SAAS3a,GAAQE,IAE1Cg8C,GAAiB,SAACp8C,EAAME,GAC1Bq5C,EAAar5C,GACbsZ,EAAStZ,GACTD,EAAMH,SAASE,EAAME,IAEnBm8C,GAAe,SAACt8C,GAElB,IAAMyqC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAC7rC,GACb,IAAM8rC,EAAWxxB,KAAKta,EAAEsB,OAAOmR,QAC/Bi5B,GAAa,CAACvqC,KAAMD,EAAII,OAAOyqC,MAAM,GAAG5qC,KAAM2qC,SAAUA,IACxD1qC,EAAMH,SAASG,EAAMD,KAAM,CAACA,KAAMD,EAAII,OAAOyqC,MAAM,GAAG5qC,KAAM2qC,SAAUA,KAE1EH,EAAOK,mBAAmB9qC,EAAII,OAAOyqC,MAAM,KAGzC0R,GAA2B,SAAC97C,GAC9B25C,GAAoB35C,EAAML,OAAOD,OACjCm6C,GAA8Bp6C,EAAMg7C,QAAQz6C,EAAML,OAAOD,OAA3B,UAC3BD,EAAMg7C,QAAQz6C,EAAML,OAAOD,OAA3B,SAA8C6J,OAAS,GACtDwwC,GAAuB,GACpBt6C,EAAMg7C,QAAQz6C,EAAML,OAAOD,OAA3B,SAA8C,GAA9C,OAA2D6J,OAAS,GACnE0wC,GAAgCx6C,EAAMg7C,QAAQ,GAAd,SAA6B,GAA7B,QAChCN,GAAyB,GACzBe,GAAqBl7C,EAAML,OAAOD,MAAO,EAAG,KAE5Cu6C,GAAgC,IAChCE,GAAyB,SAG7BN,GAA8B,IAC9BE,GAAuB,MACvBE,GAAgC,IAChCE,GAAyB,QAG3B4B,GAA8B,SAAC/7C,GACjC+5C,GAAuB/5C,EAAML,OAAOD,OACpCu6C,GAAgCx6C,EAAMg7C,QAAQf,IAAd,SAA4C15C,EAAML,OAAOD,OAAzD,QAC7BD,EAAMg7C,QAAQf,IAAd,SAA4C15C,EAAML,OAAOD,OAAzD,OAA0E6J,OAAS,GAClF4wC,GAAyB,GACzBe,GAAqBxB,GAAkB15C,EAAML,OAAOD,MAAO,IAE3Dy6C,GAAyB,OAG3B6B,GAAgC,SAACh8C,GACnCm6C,GAAyBn6C,EAAML,OAAOD,OACtCw7C,GAAqBxB,GAAkBI,GAAqB95C,EAAML,OAAOD,QAEvEu8C,GAA8B,SAACz8C,EAAME,EAAOE,GAC9Cy5C,EAAuB35C,IAErBw8C,GAAiC,SAACl8C,GACpCy5C,EAA0Bz5C,EAAML,OAAOD,QAErCy8C,GAAoC,WACX,KAAxB/C,GAIH35C,EAAM08C,kCAAkC/C,EAAoBgD,cAAe38C,EAAM48C,gBAAgB7C,GAAwB56C,IACzHy7C,IAAmC,IAJ/Bz3C,EAAahD,MAAM,wBAMrB08C,GAAoC,WACnC78C,EAAMg7C,QAAQf,IAAd,SAA4CI,IAAqByC,gBAChE98C,EAAM68C,kCAAkC78C,EAAMg7C,QAAQf,IAAd,SAA4CI,IAAqByC,iBAEzG35C,EAAaK,QAAQ,4BAIvBkY,GAAsB,SAACC,GACzB,OAAI3b,EAAMoB,UAAqC,KAAzBpB,EAAMwT,gBAEM,KAAzBxT,EAAMwT,gBAAoC,KAAXmI,KAD5BC,OAAO5b,EAAMwT,gBAAgBqI,KAAKF,IAO5CohC,GAAmB,WACrB,IAAMC,EAAQ,sBAAOzD,GAAP,CAAmB,KACjCC,EAAcwD,GACdh9C,EAAMH,SAASG,EAAMD,KAAMi9C,GAAU,IAcnCC,GAAqB,SAAC,GAAiD,IAAhDx7C,EAA+C,EAA/CA,KAAMg3C,EAAyC,EAAzCA,QAASE,EAAgC,EAAhCA,MAAO9vC,EAAyB,EAAzBA,QAASgwC,EAAgB,EAAhBA,WACxDsC,GAAiB,CAACzoC,UAAW,CAACjR,OAAMg3C,UAASE,QAAO9vC,UAASgwC,iBAsYjE,GAA8C/2C,IAAMkC,SAAS,MAA7D,qBAAOmY,GAAP,MAAwBC,GAAxB,MACMC,GAAkBC,QAAQH,IAI1BI,GAAqB,WACvBH,GAAmB,OAEvB,OACQ,eAAC1V,EAAA,EAAD,WACI,eAACC,EAAA,EAAD,WACI,cAACmI,EAAA,EAAD,CAAY,gBAAc,OAAO0N,aATvB,SAACjc,GACvB6b,GAAmB7b,EAAMkc,gBAQqDC,aAAcH,GAC5E,YAAWF,GAAkB,YAAcrc,EAAMb,GAAK,eAAYsB,EADtE,SAEST,EAAM89B,eAEd99B,EAAMoB,SACH,cAAC0N,EAAA,EAAD,CAAY3E,UAAU,MAAMxJ,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQzZ,QAAQmM,MAAjE,sBACC,KACL,cAACgN,GAAA,EAAD,CAASxd,GAAI,YAAca,EAAMb,GAAK,UAAWiJ,KAAMiU,GAAiBO,SAAUT,GAC9EhG,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBwG,gBAAiB,CACbzG,SAAU,MACVC,WAAY,SAEhBrO,QAASuU,GACTO,qBAAmB,EACnB9S,UAAW,EACXrJ,MAAO,CAACoc,cAAe,QACvBC,WAAY,CAACrc,MAAO,CAACjB,QAAS,OAAQiI,OAAQ,MAAO8H,gBAAwC,SAAvBJ,EAAM4N,QAAQxb,KAAkB4N,EAAM4N,QAAQC,QAAQC,KAAO9N,EAAM4N,QAAQC,QAAQE,MAAO9W,MAAO,SAAUpF,QAAS,YAb9L,SAeI,cAAC4N,EAAA,EAAD,UAAa9O,EAAMqT,YAAYvJ,OAAS,EAAI9J,EAAMqT,YAAc,wBAGxE,cAAC1M,EAAA,EAAD,UAxae,WACvB,OAAO3G,EAAMyB,MACT,IAAK,SACL,IAAK,iBACD,OACI,cAACoc,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACkd,GAAA,EAAD,CACEC,QAAM,EACN9c,UAAWjB,EAAMiB,UACjBi8C,SAAyB,mBAAfl9C,EAAMyB,KAChBxB,MAAsB,mBAAfD,EAAMyB,KAA4Bg4C,EAAsBx5C,EAC/DJ,SAAyB,mBAAfG,EAAMyB,KAA4Bu6C,GAAyBxgC,GACrEqf,MAAO,cAAC1c,GAAA,EAAD,IANT,SASIg7B,EAAc5uC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAOsa,EAApC,SAA0CA,GAA7Bva,EAAMD,KAAOie,UAM9C,IAAK,QACD,OACI,cAAC9T,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SACI,eAACC,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAACw8C,YAAa,QAASz0C,SAAU,OAAQ,SAAY,QAAhF,UACI,eAAChC,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,UAC1B,cAAC+F,EAAA,EAAD,OAEJ,eAAC+D,EAAA,EAAD,WACK6uC,EAAWhvC,KAAK,SAAC4V,EAAGnC,GAAJ,OACb,eAACtX,EAAA,EAAD,CAAyCkE,OAAK,EAA9C,UACI,cAACjE,EAAA,EAAD,UACI,cAACN,EAAA,EAAD,CAAQE,QAAS,kBAjDhC,SAACkE,GACtB,IAAI2yC,EAAO,YAAO7D,GAClB6D,EAAQlyB,OAAOzgB,EAAO,GACtB+uC,EAAc4D,GACdp9C,EAAMH,SAASG,EAAMD,KAAMq9C,GAAS,GA6CuBC,CAAiBr/B,IAAI1X,MAAM,YAAYpF,QAAQ,WAAW0F,KAAK,QAAtF,iBAEJ,cAACD,EAAA,EAAD,UACA,cAAC,EAAD,CAAiBvF,SAAUpB,EAAMoB,SAAUL,YAAa,GAAId,MAAOkgB,EAAG3e,WAAW,EAAOP,UAAWjB,EAAMiB,WAAmB,IAAN+c,EAC9Gne,SAAU,SAACy9C,EAAExvB,EAAElvB,GAAL,OA/C5B,SAACqB,EAAOE,EAAOsK,GACrC,IAAIojB,EAAM,YAAO0rB,GACjB1rB,EAAOpjB,GAASxK,EAChBu5C,EAAc3rB,GACd7tB,EAAMH,SAASG,EAAMD,KAAM8tB,GAAQ,GA2C0B0vB,CAAkBzvB,EAAGlvB,EAAGof,IAAIxY,QAAQ,eAAe9E,QAASq8C,GACjF38C,SAAUsb,GAAqB9Z,UAAW,eAAiB5B,EAAMwT,qBAP9D,QAAUxT,EAAMD,KAAOie,MAY1C,cAACtX,EAAA,EAAD,CAAUkE,OAAK,EAAf,SACI,cAACjE,EAAA,EAAD,UACI,cAACN,EAAA,EAAD,CAAQE,QAASw2C,GAAkBn2C,KAAK,QAAQ1F,QAAQ,WAAWoF,MAAM,UAAzE,2BAO5B,IAAK,SACD,OACI,cAAC,EAAD,CAAiBlF,SAAUpB,EAAMoB,SAAUL,YAAaf,EAAM4X,cAAe3X,MAAOA,EAAOuB,WAAW,EAClG3B,SAAU4b,GAAcjW,QAAQ,eAAe9E,QAASV,EAAMoG,SAAUnF,UAAWjB,EAAMiB,UACzFb,SAAUsb,GAAqB9Z,UAAW,eAAiB5B,EAAMwT,iBAG7E,IAAK,SACD,OACI,cAAC,EAAD,CAAiBpS,SAAUpB,EAAMoB,SAAUL,YAAaf,EAAM4X,cAAe3X,MAAOA,EAAOuB,WAAW,EAAOC,KAAK,SAC9G5B,SAAUq8C,GAAgB12C,QAAQ,eAAe9E,QAASV,EAAMoG,SAAUnF,UAAWjB,EAAMiB,UAC3Fb,SAAUsb,GAAqB9Z,UAAW,eAAiB5B,EAAMwT,iBAG7E,IAAK,UACD,OACI,cAAC7F,EAAA,EAAD,CAAQC,QAASyrC,EAAWx5C,SAAUs8C,KAE9C,IAAK,OACD,OACI,eAAC91C,EAAA,EAAD,CAAQnF,QAAQ,YAAYiJ,UAAU,QAAtC,UACyB,KAAnBkgC,GAAUtqC,KAAc,cAAgBsqC,GAAUtqC,KACxD,uBAAOF,SAAUu8C,GAAc36C,KAAK,OAAOopC,QAAM,IAFjD,OAIR,IAAK,WACD,OACI,cAAChtB,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAU,SAACC,IAvOR,SAAC2K,GACtB,IAAIsR,EAMEpE,GAJFoE,EADD/b,EAAMg7C,QAAQvwC,GAAd,YAAyCzK,EAAMo7C,YACrCp7C,EAAMg7C,QAAQvwC,GAAd,YAEAzK,EAAMg7C,QAAQvwC,GAAd,QAEqB,6BAAiCQ,QAAQ,SAACC,EAAMqP,GAC9E,OAAGA,EAAIijC,gBAAkBx9C,EAAMg7C,QAAQvwC,GAAd,aACd,2BAAIS,GAAX,mBAAkBqP,EAAIoG,mBAAmB5gB,KAAQwa,EAAIoG,mBAAmB88B,YAA0B,CAACA,YAAaljC,EAAIoG,mBAAmB88B,YAAanrB,QAAS/X,EAAI+X,QAASE,QAASjY,EAAIiY,SAAjGjY,EAAIta,QAEnF,eAAIiL,KAEhB,IACC2wC,EAAoB,CAACxM,KAAMtzB,EAAOszB,KAAMyM,WAAY//B,EAAO8L,QAAQgL,KAAM6qB,cAAe3hC,EAAO4hC,kBAAmBhrB,WAAY,CAAC5yB,KAAMC,EAAMg7C,QAAQvwC,GAAd,eAA2CoV,WAAYlI,IAChM3X,EAAMH,SAASG,EAAMD,KAAM87C,GAAmB,GAC9CtiC,EAAS9O,GAuN6BmzC,CAAiB99C,EAAII,OAAOD,QAChD46B,MAAO,cAAC1c,GAAA,EAAD,IALT,SAQIne,EAAMg7C,QAAQzwC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAO+d,EAApC,SAAwCzD,EAAI/U,SAA/BxF,EAAMD,KAAOie,UAM9C,IAAK,cACD,OACI,cAACH,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAU2b,GACVqf,MAAO,cAAC1c,GAAA,EAAD,IALT,SAQIne,EAAMg7C,QAAQzwC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAOsa,EAAIsY,KAAxC,SAA+CtY,EAAI/U,SAAtCxF,EAAMD,KAAOie,UAM9C,IAAK,eACD,OACI,eAAC9T,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,UACI,cAACC,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,OAAQ,SAAY,QAApF,SACI,eAAC+J,EAAA,EAAD,WACKiwC,GACD,eAAC,IAAMtzC,SAAP,WACI,eAACX,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,sBACA,cAAC+F,EAAA,EAAD,UACI,cAAC,EAAD,CAAiBvF,UAAU,EAAML,YAAa,WAAYd,MAAO05C,EAAqBn4C,WAAW,EAAOP,UAAWjB,EAAMiB,UACrHpB,SAAU28C,GAA6Bh3C,QAAQ,sBAG3D,eAACkB,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,mCACA,cAACA,EAAA,EAAD,UACI,cAACkX,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAO85C,EACPl6C,SAAU48C,GACV5hB,MAAO,cAAC1c,GAAA,EAAD,IAJT,SAMCne,EAAM48C,gBACH58C,EAAM48C,gBAAgBryC,KAAI,SAACgQ,EAAKyD,GAAN,OACtB,wBAA4C/d,MAAO+d,EAAnD,SAAuDzD,EAAI/U,SAA9CxF,EAAMD,KAAO,aAAeie,MAE3C,wBAAgD/d,MAAM,KAAtD,wBAAaD,EAAMD,KAAO,+BAK5C,eAAC2G,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UACI,eAACN,EAAA,EAAD,CAAQ8D,UAAU,OAAQxJ,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,KAAMjQ,QAAS,GAAI6G,QAASm2C,GAA3F,UAA8H,cAAC,KAAD,IAA9H,WAEJ,cAAC/1C,EAAA,EAAD,UACI,eAACN,EAAA,EAAD,CAAQ8D,UAAU,OAAOxJ,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQzZ,QAAQmM,KAAMjQ,QAAS,GAAI6G,QAAS,WAAMq0C,IAAmC,IAAnI,UAA4I,cAAC,KAAD,IAA5I,oBAIP,KACL,eAACl0C,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,kBAGA,cAAC+F,EAAA,EAAD,UACI,cAACkX,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOg6C,GACPp6C,SAAUw8C,GACVxhB,MAAO,cAAC1c,GAAA,EAAD,IAJT,SAOI07B,EAAwBtvC,KAAI,SAACgQ,EAAKyD,GAAN,OACxB,wBAA6C/d,MAAO+d,EAApD,SAAwDzD,EAAI80B,MAA/CrvC,EAAMD,KAAO,cAAgBie,eAO9D,eAACtX,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,sBACA,cAACA,EAAA,EAAD,UACI,cAACkX,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOo6C,GACPx6C,SAAUy8C,GACVzhB,MAAO,cAAC1c,GAAA,EAAD,IAJT,SAOIg8B,GAA2B5vC,KAAI,SAACgQ,EAAKyD,GAAN,OAC3B,wBAA8C/d,MAAO+d,EAArD,SAAyDzD,EAAI/U,SAAhDxF,EAAMD,KAAO,eAAiBie,gBAQ7D28B,IACU,eAACj0C,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UACA,eAACN,EAAA,EAAD,CAAQ8D,UAAU,OAAOxJ,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ7Z,QAAQuM,KAAMjQ,QAAS,GAAI6G,QAAS,WAAMq0C,IAAmC,IAAnI,UAA2I,cAAC,KAAD,IAA3I,WAEA,cAACj0C,EAAA,EAAD,UACA,eAACN,EAAA,EAAD,CAAQ8D,UAAU,OAAOxJ,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQ9c,MAAMwP,KAAMjQ,QAAS,GAAI6G,QAASs2C,GAAxF,UAA2H,cAAC,KAAD,IAA3H,iBAIhB,eAACn2C,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,yBACA,cAACA,EAAA,EAAD,UACI,cAACkX,GAAA,EAAD,UACQ,cAACC,GAAA,EAAD,CACEC,QAAM,EACN9d,MAAOw6C,GACP56C,SAAU08C,GACV1hB,MAAO,cAAC1c,GAAA,EAAD,IAJT,SAOIo8B,GAA6BhwC,KAAI,SAACgQ,EAAKyD,GAAN,OAC7B,wBAAgD/d,MAAO+d,EAAvD,SAA2DzD,EAAIxa,MAAlDC,EAAMD,KAAO,iBAAmBie,oBAS5Eu8B,GAA6BzwC,OAAS,EACnC,eAACO,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,OAAQ,SAAY,UAApF,UACI,cAAC2J,EAAA,EAAD,UACQ,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,uBACA,cAAC+F,EAAA,EAAD,yBAGZ,cAAC+D,EAAA,EAAD,UAEK6vC,GAA6BE,IAA7B,WAAkElwC,KAAK,SAACgQ,EAAKyD,GAAN,OACpE,eAACtX,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UAAY4T,EAAIxa,OAChB,cAAC4G,EAAA,EAAD,UAAW,8BAAM9B,KAAKC,UAAUyV,EAAIta,MAAO,KAAM,SAFtC,yBAA2BD,EAAMD,KAAOie,WAOnE,QAGhB,IAAK,kBACD,OACI,eAAC,IAAM3W,SAAP,WACI,cAACY,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyyC,GAC/C7yC,QAAS,WAAK8yC,IAA8B,IAC5CnyC,YAAa,cAAC2vC,GAAD,CAAoClyC,SAAU62C,GAAoBj1C,QAAS,WAAK8yC,IAA8B,QAE/H,cAACj9B,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACkd,GAAA,EAAD,CACIC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAUk8C,GACVlhB,MAAO,cAAC1c,GAAA,EAAD,IALX,SAQIg7B,EAAc5uC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAO+d,EAApC,SACKzD,EAAIk+B,QAAU,IAAMl+B,EAAIo+B,MAAQ,MAAQp+B,EAAIsjC,gBAAgBnyC,UAAU,EAAG,IAAM,MAAQ6O,EAAI1R,SADnF7I,EAAMD,KAAOie,UAOtC,cAAC3X,EAAA,EAAD,CAAQO,KAAK,QAAQN,MAAM,UAAUC,QAAU,WAAOu0C,IAA8B,IAAS55C,QAAQ,YAArG,+BAIZ,IAAK,qBACD,OACI,eAAC,IAAMmG,SAAP,WACI,cAACY,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyyC,GAC/C7yC,QAAS,WAAK8yC,IAA8B,IAC5CnyC,YAAa,cAAC2vC,GAAD,CAAoClyC,SAAU62C,GAAoBj1C,QAAS,WAAK8yC,IAA8B,QAE/H,cAACj9B,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACkd,GAAA,EAAD,CACIC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAU2b,GACVqf,MAAO,cAAC1c,GAAA,EAAD,IALX,SAQIg7B,EAAc5uC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAOsa,EAAIk+B,QAAxC,SACKl+B,EAAI1R,QAAQiB,OAAS,EAAIyQ,EAAI1R,QAAU,MAAQ0R,EAAIk+B,QAAU,KAAOl+B,EAAIk+B,SADhEz4C,EAAMD,KAAOie,UAOtC,cAAC3X,EAAA,EAAD,CAAQO,KAAK,QAAQN,MAAM,UAAUC,QAAU,WAAOu0C,IAA8B,IAAS55C,QAAQ,YAArG,+BAGZ,IAAK,mBACD,OACI,eAAC,IAAMmG,SAAP,WACI,cAACY,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyyC,GAC/C7yC,QAAS,WAAK8yC,IAA8B,IAC5CnyC,YAAa,cAAC2vC,GAAD,CAAoClyC,SAAU62C,GAAoBj1C,QAAS,WAAK8yC,IAA8B,QAE/H,cAACj9B,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACkd,GAAA,EAAD,CACIC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAU2b,GACVqf,MAAO,cAAC1c,GAAA,EAAD,IALX,SAQIg7B,EAAc5uC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAOsa,EAAIo+B,MAAxC,SACKp+B,EAAI1R,QAAQiB,OAAS,EAAIyQ,EAAI1R,QAAU,MAAQ0R,EAAIo+B,MAAQ,KAAOp+B,EAAIo+B,OAD9D34C,EAAMD,KAAOie,UAOtC,cAAC3X,EAAA,EAAD,CAAQO,KAAK,QAAQN,MAAM,UAAUC,QAAU,WAAOu0C,IAA8B,IAAS55C,QAAQ,YAArG,+BAGZ,IAAK,kBACD,OACI,eAAC,IAAMmG,SAAP,WACI,cAACY,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyyC,GAC/C7yC,QAAS,WAAK8yC,IAA8B,IAC5CnyC,YAAa,cAAC2vC,GAAD,CAAoClyC,SAAU62C,GAAoBj1C,QAAS,WAAK8yC,IAA8B,QAE/H,cAACj9B,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACkd,GAAA,EAAD,CACIC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAU2b,GACVqf,MAAO,cAAC1c,GAAA,EAAD,IALX,SAQIg7B,EAAc5uC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAOsa,EAAI9Y,KAAxC,SAA+C8Y,EAAI9Y,MAAtCzB,EAAMD,KAAOie,UAMtC,cAAC3X,EAAA,EAAD,CAAQO,KAAK,QAAQN,MAAM,UAAUC,QAAU,WAAOu0C,IAA8B,IAAS55C,QAAQ,YAArG,+BAGZ,IAAK,wBACD,OACI,eAAC,IAAMmG,SAAP,WACI,cAACY,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMyyC,GAC/C7yC,QAAS,WAAK8yC,IAA8B,IAC5CnyC,YAAa,cAAC2vC,GAAD,CAAoClyC,SAAU62C,GAAoBj1C,QAAS,WAAK8yC,IAA8B,QAE/H,cAACj9B,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACkd,GAAA,EAAD,CACIC,QAAM,EACN9d,MAAOA,EACPgB,UAAWjB,EAAMiB,UACjBpB,SAAU2b,GACVqf,MAAO,cAAC1c,GAAA,EAAD,IALX,SAQIg7B,EAAc5uC,KAAI,SAACgQ,EAAKyD,GAAN,OACd,wBAA6B/d,MAAOsa,EAAIsjC,gBAAiBl9C,MAAO,CAACm9C,aAAc,YAA/E,SACKvjC,EAAI1R,QAAQiB,OAAS,EAAIyQ,EAAI1R,QAAU,MAAQ0R,EAAIsjC,gBAAkB,KAAOtjC,EAAIsjC,iBADxE79C,EAAMD,KAAOie,UAOtC,cAAC3X,EAAA,EAAD,CAAQO,KAAK,QAAQN,MAAM,UAAUC,QAAU,WAAOu0C,IAA8B,IAAS55C,QAAQ,YAArG,+BAGb,QACC,OAAO,MAwCEwd,OA5BM,aAAe1e,EAAMb,ICntBhD,I,GAAM4+C,GAAyB3tC,aAAH,8NAatB4tC,GAAsB5tC,aAAH,kOAUnB6tC,GAAmB7tC,aAAH,qwCAwDhB8tC,GAAsB9tC,aAAH,+iBAiCnB+tC,GAA6B/tC,aAAH,2uDAkE1BguC,GAA2BhuC,aAAH,yOAQxBiuC,GAA8BjuC,aAAH,iMAQ3BkuC,GAAkBluC,aAAH,0wBA2CfmuC,GAAsBnuC,aAAH,kRAYlB,SAASouC,GAAqBx+C,GACjC,MAAsCgE,mBAAS,IAA/C,mBAAOs3C,EAAP,KAAoBmD,EAApB,KACA,EAA8Cz6C,mBAAS,IAAvD,mBAAO06C,EAAP,KAAwBC,EAAxB,KACA,EAA4D36C,mBAAS,WAArE,mBAAO46C,EAAP,KAA+BC,EAA/B,KACA,EAAoC76C,mBAAS,IAA7C,mBAAO6b,EAAP,KAAmBi/B,EAAnB,KACA,EAA0C96C,oBAAS,GAAnD,mBAAO+6C,EAAP,KAAsBC,EAAtB,KACA,EAA4Ch7C,mBAAS,CAACi7C,KAAK,EAAOC,QAAQ,EAAOrR,OAAO,EAAOsR,aAAa,IAA5G,mBAAOC,EAAP,KAAuBC,EAAvB,KAEA,EAAsD9+B,aAAay9B,GAAqB,CACpF/sC,YAAa,aADjB,mBAAOquC,EAAP,KAA+BC,EAA/B,KAAyB/8C,KAGzB,EAA4D+d,aAAaw9B,GAAwB,CAC7F9sC,YAAa,aADjB,mBAAOuuC,EAAP,KAAkCC,EAAlC,KAA4Bj9C,KAG5B,EAAsD+d,aAAa09B,GAAkB,CACjFhtC,YAAa,aADjB,mBAAOyuC,EAAP,KAA4BC,EAA5B,KAAsBn9C,KAGtB,EAA4D+d,aAAa29B,GAAqB,CAC1FjtC,YAAa,aADjB,oBAAO2uC,GAAP,MAA+BC,GAA/B,MAAyBr9C,KAGzB,GAA0E+d,aAAa49B,GAA4B,CAC/GltC,YAAa,aADjB,qBAAO6uC,GAAP,MAAsCC,GAAtC,MAAgCv9C,KAGhC,GAA+D+d,aAAag+B,GAAqB,CAC7FttC,YAAa,aADjB,qBAAO+uC,GAAP,MAAkCC,GAAlC,MAA4Bz9C,KAG5B,GAA2B4O,aAAYgtC,GAA0B,CAC7DltC,YAAa,SAAA1O,GACTs9C,GAAsB,CAACptC,UAAW,CAACiN,aAAc3f,EAAM2f,mBAFxDugC,GAAP,qBAKA,GAA8B9uC,aAAYitC,GAA6B,CACnEntC,YAAa,SAAA1O,GACTs9C,GAAsB,CAACptC,UAAW,CAACiN,aAAc3f,EAAM2f,mBAFxDwgC,GAAP,qBAKAnvC,aAASstC,GAAiB,CACtB5rC,UAAW,CAACvT,GAAIa,EAAMopB,QAAQjqB,IAC9B+R,YAAa,SAAA1O,GAET,IAAI49C,EAAwB,CAACnB,KAAK,EAAOC,QAAQ,EAAOrR,OAAO,EAAOsR,aAAa,GAC/EkB,EAAa,GACjB79C,EAAK89C,cAAcC,kBAAkBxyB,SAAS,SAAClE,GACvCw2B,EAAWvlC,SAAS+O,EAAI22B,uBACxBH,EAAW12C,KAAKkgB,EAAI22B,sBAER,aAAb32B,EAAIpoB,KACH2+C,EAAqB,OAAY,EAC5Bv2B,EAAI42B,yBACTL,EAAqB,KAAU,EAC1Bv2B,EAAI62B,4BACTN,EAAqB,QAAa,EAChB,iBAAbv2B,EAAIpoB,MACT2+C,EAAqB,SAAc,EAEnCA,EAAqB,UAAe,GAClB,gBAAbv2B,EAAIpoB,KACT2+C,EAAqB,UAAe,EAC/Bv2B,EAAIpoB,KAAKqZ,SAAS,gBACvBslC,EAAqB,aAAkB,MAG/CC,EAAWngC,OACXy+B,EAAmB0B,GAChBrgD,EAAMopB,QAAQu3B,WAAaN,EAAWvlC,SAAS9a,EAAMopB,QAAQu3B,WAC5D9B,EAA0B7+C,EAAMopB,QAAQu3B,WACjCN,EAAWvlC,SAAS,YAC3B+jC,EAA0BwB,EAAW,IAEzC5B,EAAe,eAAIj8C,EAAK89C,gBACrBF,EAAqB,OAAWV,EAAY,CAAChtC,UAAW,CAAC0oC,YAAap7C,EAAMo7C,eAC5EgF,EAAqB,KAASd,EAAe,CAAC5sC,UAAW,CAACgf,gBAAiB1xB,EAAM4gD,kBACjFR,EAAqB,QAAYZ,EAAkB,CAAC9sC,UAAW,CAAC0oC,YAAap7C,EAAMo7C,eACnFgF,EAAqB,UAAcR,GAAe,CAACltC,UAAW,CAACiN,aAAc3f,EAAM2f,gBACnFygC,EAAqB,SAAaN,GAAsB,CAACptC,UAAW,CAACiN,aAAc3f,EAAM2f,gBACzFygC,EAAqB,aAAiBJ,GAAkB,CAACttC,UAAW,CAACiN,aAAc3f,EAAM2f,gBAC5F0/B,EAAkBe,GAClBpB,EAAiB,eAAIx8C,OAG7B,IAAM2uC,GAAY,SAAChxB,EAAGC,GACpB,IAAIygC,EAAO,IAAIC,IAAI1gC,GACnB,OAAO,YAAI,IAAI0gC,IAAI3gC,IAAIvO,QAAO,SAAAu6B,GAAC,OAAI0U,EAAKE,IAAI5U,OAG9C9nC,qBAAW,WACP,IAAM28C,EAA8B,SAAChG,GACjC,GAAGA,EAAQlxC,OAAS,EAAE,CAClB,IAAM6N,EAAsBqjC,EAAQ,GAAR,SAAuB,GAAvB,OAAoC,GAAGn7B,WAAW5U,QAAQ,SAACC,EAAMqP,GACzF,OAAO,2BAAIrP,GAAX,mBAAkBqP,EAAIxa,KAAOwa,EAAIta,UAClC,IACC47C,EAAoB,CAACxM,KAAM2L,EAAQ,GAAR,KAAoBc,WAAYd,EAAQ,GAAR,SAAuB,GAAGnoB,KACzFF,WAAY,CAAC5yB,KAAMi7C,EAAQ,GAAR,SAAuB,GAAvB,OAAoC,GAAGj7C,KAAM8f,WAAYlI,IAI5E,MAHsC,aAAnCqjC,EAAQ,GAAR,SAAuB,GAAGv5C,OACzBo6C,EAAiB,cAAoB77C,EAAMg7C,QAAQ,GAAd,SAA6B,GAA7B,mBAElCa,EAEP,MAAO,IAGToF,EAAmB,SAACjG,GACtB,IAAIj/B,EACJ,GAAGi/B,EAAQlxC,OAAS,EAAE,CAMlB,IAAM6N,GAJFoE,EADDi/B,EAAQ,GAAR,YAA+Bh7C,EAAMo7C,YAC3BJ,EAAQ,GAAR,YAEAA,EAAQ,GAAR,QAEqB,6BAAiC/vC,QAAQ,SAACC,EAAMqP,GAC9E,OAAGA,EAAIijC,gBAAkBxC,EAAQ,GAAR,aACd,2BAAI9vC,GAAX,mBAAkBqP,EAAIoG,mBAAmB5gB,KAAQwa,EAAIoG,mBAAmB88B,YAA0B,CAACA,YAAaljC,EAAIoG,mBAAmB88B,YAAanrB,QAAS/X,EAAIgY,eAAgBC,QAASjY,EAAIkY,gBAAxGlY,EAAIta,QAEnF,eAAIiL,KAEhB,IAEH,MADwB,CAACmkC,KAAMtzB,EAAOszB,KAAMyM,WAAY//B,EAAO8L,QAAQgL,KAAM6qB,cAAe3hC,EAAO4hC,kBAAmBhrB,WAAY,CAAC5yB,KAAMi7C,EAAQ,GAAR,eAAiCn7B,WAAYlI,IAGtL,MAAO,IAGf,GAAGonC,KAAmBK,EAAc,QAAcK,MACjCL,EAAc,KAAWG,MACzBH,EAAc,OAAaO,MAC3BP,EAAc,UAAgBS,OAC9BT,EAAc,SAAeW,OAC7BX,EAAc,aAAmBa,IAA2B,CAEzE,IA6TMiB,EA7TSnC,EAAcuB,cAAcC,kBAAkBt1C,QAAQ,SAACC,EAAM2e,GACxE,GAAGA,EAAI22B,uBAAyB5B,EAC5B,OAAO,YAAI1zC,GAEf,OAAO2e,EAAIpoB,MACP,IAAK,UACD,OAAGooB,EAAI9pB,QAAQC,EAAMopB,QAAQ+3B,iBACnB,GAAN,mBAAWj2C,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOD,EAAMopB,QAAQ+3B,iBAAiBt3B,EAAI9pB,UAEhE8pB,EAAIjS,cACF,GAAN,mBAAW1M,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAA2C,SAApC4pB,EAAIjS,cAAc2D,kBAE7C,GAAN,mBAAWrQ,GAAX,4BAAqB2e,GAArB,IAA0B5pB,OAAO,MAEzC,IAAK,SACD,OAAG4pB,EAAI9pB,QAAQC,EAAMopB,QAAQ+3B,iBACnB,GAAN,mBAAWj2C,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOD,EAAMopB,QAAQ+3B,iBAAiBt3B,EAAI9pB,UAE9D,GAAN,mBAAWmL,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO4pB,EAAIjS,kBAE7C,IAAK,SACD,OAAGiS,EAAI9pB,QAAQC,EAAMopB,QAAQ+3B,iBACnB,GAAN,mBAAWj2C,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOD,EAAMopB,QAAQ+3B,iBAAiBt3B,EAAI9pB,UAE9D,GAAN,mBAAWmL,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAA6B,KAAtB4pB,EAAIjS,cAAuB,EAAIgD,SAASiP,EAAIjS,mBAErF,IAAK,QACD,OAAGiS,EAAI9pB,QAAQC,EAAMopB,QAAQ+3B,iBACnB,GAAN,mBAAWj2C,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOD,EAAMopB,QAAQ+3B,iBAAiBt3B,EAAI9pB,UAC/D8pB,EAAIjS,cAAc9N,OAAS,EAC1B,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO4E,KAAK2E,MAAMqgB,EAAIjS,mBAE1C,GAAN,mBAAW1M,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,OAEzC,IAAK,SACL,IAAK,iBACD,IAAI+6C,EAAUnxB,EAAImxB,QAAQjlC,MAAM,MAC5BqrC,EAAWv3B,EAAIjS,cACH,mBAAbiS,EAAIpoB,KAEC2/C,EADqB,KAAtBv3B,EAAIjS,cACQ/S,KAAK2E,MAAMqgB,EAAIjS,eAEf,GAGZojC,EAAQlxC,OAAS,IAChBs3C,EAAiC,KAAtBv3B,EAAIjS,cAAuBojC,EAAQ,GAAKnxB,EAAIjS,eAG/D,IAAIhG,EAAS/M,KAAK2E,MAAMqgB,EAAIw3B,qCAyD5B,OAxDGx3B,EAAI42B,2BAGHzF,GADAA,EAAO,YAAOuE,EAAmBn2B,UACfne,QAAQ,SAACq2C,EAAO13B,GAG9B,IAFA,IAAI2M,GAAQ,EACRgrB,EAAiB18C,KAAK2E,MAAMogB,EAAEP,YAClC,MAA0B9f,OAAOmgB,QAAQ9X,GAAzC,eAAiD,CAA7C,0BAAOpR,EAAP,KAAYP,EAAZ,KACW,yBAARO,EACIP,IAAUshD,EAAe/gD,KACxB+1B,GAAQ,GAEC,iBAAR/1B,GAA0BP,EAAM6J,OAAS,GACM,IAAjDqnC,GAAUlxC,EAAOshD,EAAe/gD,IAAMsJ,SACrCysB,GAAQ,GAIpB,OAAGA,EACO,GAAN,mBAAW+qB,GAAX,CAAkB13B,EAAEC,MAEb,YAAIy3B,KAEhB,KACKphC,OACL86B,EAAQlxC,OAAS,IACkBs3C,EAAlB,mBAAbv3B,EAAIpoB,KAAsC,GAC7Bu5C,EAAQ,KAEvBnxB,EAAI62B,8BAGT1F,GADAA,EAAO,YAAOyE,EAAsB+B,iBAClBv2C,QAAQ,SAACq2C,EAAO13B,GAG9B,IAFA,IAAI2M,GAAQ,EACRgrB,EAAiB18C,KAAK2E,MAAMogB,EAAER,QAAQC,YAC1C,MAA0B9f,OAAOmgB,QAAQ9X,GAAzC,eAAiD,CAA7C,0BAAOpR,EAAP,KAAYP,EAAZ,KACW,yBAARO,EACIP,IAAUshD,EAAe/gD,KACxB+1B,GAAQ,GAEC,iBAAR/1B,GAA0BP,EAAM6J,OAAS,GACM,IAAjDqnC,GAAUlxC,EAAOshD,EAAe/gD,IAAMsJ,SACrCysB,GAAQ,GAIpB,OAAGA,EACO,GAAN,mBAAW+qB,GAAX,CAAkB13B,EAAER,QAAQS,MAErB,YAAIy3B,KAEhB,KACQx3C,OAAS,IACkBs3C,EAAlB,mBAAbv3B,EAAIpoB,KAAsC,GAC7Bu5C,EAAQ,IAG7BnxB,EAAI9pB,QAAQC,EAAMopB,QAAQ+3B,iBACnB,GAAN,mBAAWj2C,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAASA,EAAS/6C,MAAOD,EAAMopB,QAAQ+3B,iBAAiBt3B,EAAI9pB,UAEhF,GAAN,mBAAWmL,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAASA,EAASpjC,cAAewpC,EAAUnhD,MAAOmhD,MAEpF,IAAK,OACD,MAAM,GAAN,mBAAWl2C,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,OACrC,IAAK,kBACD,OAAIggD,GAAyBpH,WAAW/uC,OAAS,EACvC,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOggD,GAAyBpH,WAAW,GAAImC,QAASiF,GAAyBpH,eAErG,GAAN,mBAAW3tC,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,GAAI+6C,QAAS,OAEtD,IAAK,qBACD,OAAIiF,GAAyBpH,WAAW/uC,OAAS,EACvC,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOggD,GAAyBpH,WAAW,GAApC,QAAmDmC,QAASiF,GAAyBpH,eAEhH,GAAN,mBAAW3tC,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,GAAI+6C,QAAS,OAEtD,IAAK,mBACD,OAAIiF,GAAyBpH,WAAW/uC,OAAS,EACvC,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOggD,GAAyBpH,WAAW,GAApC,MAAiDmC,QAASiF,GAAyBpH,eAE9G,GAAN,mBAAW3tC,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,GAAI+6C,QAAS,OAEtD,IAAK,kBACD,OAAIiF,GAAyBpH,WAAW/uC,OAAS,EACvC,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOggD,GAAyBpH,WAAW,GAApC,KAAgDmC,QAASiF,GAAyBpH,eAE7G,GAAN,mBAAW3tC,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,GAAI+6C,QAAS,OAEtD,IAAK,wBACD,OAAIiF,GAAyBpH,WAAW/uC,OAAS,EACvC,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAOggD,GAAyBpH,WAAW,GAApC,gBAA2DmC,QAASiF,GAAyBpH,eAExH,GAAN,mBAAW3tC,GAAX,4BAAqB2e,GAArB,IAA0B5pB,MAAO,GAAI+6C,QAAS,OAEtD,IAAK,eACD,IAAMyG,EAA0B5B,GAAyBh4B,QAAQ5c,QAAQ,SAACq2C,EAAOz5B,GAC7E,IAAM8E,EAAW9E,EAAQggB,kBAAkB58B,QAAQ,SAACq2C,EAAOI,GACvD,MAAM,GAAN,mBAAWJ,GAAX,CAAkBI,EAAQhqC,UAAU3X,SACrC,IAAI8V,KAAK,KACZ,MAAM,GAAN,mBAAWyrC,GAAX,4BAAsBz5B,GAAtB,IAA+BriB,QAASqiB,EAAQ8H,UAAUmD,cAAgB,MAAQnG,EAAW,MAAQ9E,EAAQkM,UAC9G,IACG4tB,EAAqB5B,GAAgCrzC,SAASzB,QAAQ,SAACq2C,EAAOM,GAChF,IAAIpgB,GAAQ,EACNhhB,EAAU8gC,EAAM/2C,KAAK,SAAC8kC,GACxB,GAAGA,EAAKA,OAASuS,EAAMvS,KAAK,CACxB7N,GAAQ,EAYR,IAXA,IAAMqgB,EAASD,EAAMthC,6BAA6BrV,QAAQ,SAACq2C,EAAO3rC,GAClE,IAAMmsC,EAAOnsC,EAAIgL,mBAAmB88B,YAA0B,CAACA,YAAa9nC,EAAI1V,MAAOqyB,QAAS3c,EAAI4c,eAAgBC,QAAS7c,EAAI8c,gBAA/E9c,EAAI1V,MAClD,OAAG0V,EAAI+B,UAAU3X,QAAQuhD,EAGd,2BAAIA,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAjC,sBAA4CuhD,EAAM3rC,EAAI+B,UAAU3X,OAAhE,CAAuE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAQ6hD,OAEjH,2BAAIR,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAO,CAAE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAO6hD,QAEvF,IACCC,EAAU,GACd,MAA2Bx4C,OAAOmgB,QAAQm4B,GAA1C,eAAkD,CAA7C,0BAAOrhD,EAAP,KAAYP,EAAZ,KACD8hD,EAAQp4C,KAAK,CAAC5J,KAAMS,EAAKqf,WAAY5f,IAEzC,IAAM+hD,EAAW,uCAAOJ,EAAMK,oBAAb,IAAiCJ,OAAQE,EAASv8C,QAAS,YAAco8C,EAAMziD,GAAK,MAAQyiD,EAAMvuC,aAAgBuuC,GAAlH,IAAyHngD,KAAM,WAAYq7C,gBAAgB,OAC5K,OAAO,2BAAIzN,GAAX,IAAiB9b,SAAS,GAAD,mBAAM8b,EAAK9b,UAAX,CAAqByuB,MAE9C,OAAO3S,KAGf,GAAI7N,EAkBA,OAAOhhB,EANP,IAXA,IAAMqhC,EAASD,EAAMthC,6BAA6BrV,QAAQ,SAACq2C,EAAO3rC,GAClE,IAAMmsC,EAAOnsC,EAAIgL,mBAAmB88B,YAA0B,CAACA,YAAa9nC,EAAI1V,MAAOqyB,QAAS3c,EAAI4c,eAAgBC,QAAS7c,EAAI8c,gBAA/E9c,EAAI1V,MAClD,OAAG0V,EAAI+B,UAAU3X,QAAQuhD,EAGd,2BAAIA,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAjC,sBAA4CuhD,EAAM3rC,EAAI+B,UAAU3X,OAAhE,CAAuE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAQ6hD,OAE7G,2BAAIR,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAO,CAAE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAO6hD,QAE3F,IACCC,EAAU,GACd,MAA2Bx4C,OAAOmgB,QAAQm4B,GAA1C,eAAkD,CAA7C,0BAAOrhD,EAAP,KAAYP,EAAZ,KACD8hD,EAAQp4C,KAAK,CAAC5J,KAAMS,EAAKqf,WAAY5f,IAEzC,IAAM+hD,EAAW,uCAAOJ,EAAMK,oBAAb,IAAiCJ,OAAQE,EAASv8C,QAAS,YAAco8C,EAAMziD,GAAK,MAAQyiD,EAAMvuC,aAAgBuuC,GAAlH,IAAyHngD,KAAM,WAAYq7C,gBAAgB,OAC5K,MAAM,GAAN,mBAAWwE,GAAX,CAAkB,CAACjS,KAAMuS,EAAMvS,KAAM9b,SAAU,CAACyuB,QAIrD,IACGE,EAAYnC,GAAgCoC,cAAcl3C,QAAQ,SAACq2C,EAAOM,GAC5E,IAAIpgB,GAAQ,EACNhhB,EAAU8gC,EAAM/2C,KAAK,SAAC8kC,GACxB,GAAGA,EAAKA,OAASuS,EAAMvS,KAAK,CACxB7N,GAAQ,EAER,IAAI4gB,GAAqB,EAIzB,GAHA/S,EAAK9b,SAASxF,SAAS,SAAChG,GACjBA,EAAE5oB,KAAOyiD,EAAM/5B,QAAQ1oB,KAAIijD,GAAqB,MAEpDA,EAAoB,OAAO/S,EAY9B,IAXA,IAAMwS,EAASD,EAAM/5B,QAAQvH,6BAA6BrV,QAAQ,SAACq2C,EAAO3rC,GAC1E,IAAMmsC,EAAOnsC,EAAIgL,mBAAmB88B,YAA0B,CAACA,YAAa9nC,EAAI1V,MAAOqyB,QAAS3c,EAAI4c,eAAgBC,QAAS7c,EAAI8c,gBAA/E9c,EAAI1V,MAClD,OAAG0V,EAAI+B,UAAU3X,QAAQuhD,EAGd,2BAAIA,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAjC,sBAA4CuhD,EAAM3rC,EAAI+B,UAAU3X,OAAhE,CAAuE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAQ6hD,OAEjH,2BAAIR,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAO,CAAE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAO6hD,QAEvF,IACCC,EAAU,GACd,MAA2Bx4C,OAAOmgB,QAAQm4B,GAA1C,eAAkD,CAA7C,0BAAOrhD,EAAP,KAAYP,EAAZ,KACD8hD,EAAQp4C,KAAK,CAAC5J,KAAMS,EAAKqf,WAAY5f,IAEzC,IAAM+hD,EAAW,2BAAOJ,EAAM/5B,SAAb,IAAsBg6B,OAAQE,EAASv8C,QAASo8C,EAAM/5B,QAAQ8H,UAAUmD,cAAgB,MAAQ8uB,EAAM/5B,QAAQkM,IAAKtyB,KAAM,UAAWq7C,gBAAgB8E,EAAMziD,KAC3K,OAAO,2BAAIkwC,GAAX,IAAiB9b,SAAS,GAAD,mBAAM8b,EAAK9b,UAAX,CAAqByuB,MAG9C,OAAO3S,KAGf,GAAI7N,EAkBA,OAAOhhB,EANP,IAXA,IAAMqhC,EAASD,EAAM/5B,QAAQvH,6BAA6BrV,QAAQ,SAACq2C,EAAO3rC,GACtE,IAAMmsC,EAAOnsC,EAAIgL,mBAAmB88B,YAA0B,CAACA,YAAa9nC,EAAI1V,MAAOqyB,QAAS3c,EAAI4c,eAAgBC,QAAS7c,EAAI8c,gBAA/E9c,EAAI1V,MACtD,OAAG0V,EAAI+B,UAAU3X,QAAQuhD,EAGd,2BAAIA,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAjC,sBAA4CuhD,EAAM3rC,EAAI+B,UAAU3X,OAAhE,CAAuE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAQ6hD,OAE7G,2BAAIR,GAAX,mBAAmB3rC,EAAI+B,UAAU3X,KAAO,CAAE,CAAEA,KAAM4V,EAAIgL,mBAAmB5gB,KAAME,MAAO6hD,QAE3F,IACCC,EAAU,GACd,MAA2Bx4C,OAAOmgB,QAAQm4B,GAA1C,eAAkD,CAA7C,0BAAOrhD,EAAP,KAAYP,EAAZ,KACD8hD,EAAQp4C,KAAK,CAAC5J,KAAMS,EAAKqf,WAAY5f,IAEzC,IAAM+hD,EAAW,2BAAOJ,EAAM/5B,SAAb,IAAsBg6B,OAAQE,EAASv8C,QAASo8C,EAAM/5B,QAAQ8H,UAAUmD,cAAgB,MAAQ8uB,EAAM/5B,QAAQkM,IAAKtyB,KAAM,UAAWq7C,gBAAgB8E,EAAMziD,KAC3K,MAAM,GAAN,mBAAWmiD,GAAX,CAAkB,CAACjS,KAAMuS,EAAMvS,KAAM9b,SAAU,CAACyuB,QAIrD,IAIGK,EAAeV,EAAmB12C,QAAQ,SAACq2C,EAAO3rC,GACpD,IAAI2sC,EAAYhB,EAAMv2B,WAAU,SAAAvZ,GAAC,OAAIA,EAAE69B,OAAS15B,EAAI05B,QACpD,OAAGiT,GAAa,GAEZhB,EAAMgB,GAAW/uB,SAAjB,sBAAgC+tB,EAAMgB,GAAW/uB,UAAjD,YAA8D5d,EAAI4d,WAC3D,YAAI+tB,IAEL,GAAN,mBAAWA,GAAX,gBAAsB3rC,OAPT,YASdusC,IAEP,OADAr/C,QAAQC,IAAI,uCAAwCu/C,EAAcZ,GAC5D,GAAN,mBAAWv2C,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAASqH,EAAczF,gBAAiB6E,EAAyBxhD,MAAO+gD,EAA4BkB,OAClI,IAAK,cACD,IAAIK,EAAmB14B,EAAI04B,iBAAiBxsC,MAAM,MACb,IAAlCwsC,EAAiBv3B,QAAQ,KAAYu3B,EAAiBr3B,OAAOq3B,EAAiBv3B,QAAQ,KACzF,IAAMw3B,EAAqB39C,KAAK2E,MAAMqgB,EAAI44B,kCACpClvB,EAAWssB,GAAyBh4B,QAAQ5c,QAAQ,SAACq2C,EAAOz5B,GAC9D,IAAM8E,EAAW9E,EAAQggB,kBAAkB58B,QAAQ,SAACq2C,EAAOI,GACvD,MAAM,GAAN,mBAAWJ,GAAX,CAAkBI,EAAQhqC,UAAU3X,SACrC,IAAI8V,KAAK,KACZ,GAAG0sC,EAAiBz4C,OAAS,IAAMy4C,EAAiBznC,SAAS+M,EAAQ7U,YAAY4C,OAAQ,OAAO0rC,EAChG,IAAIoB,GAAU,EACd,GAAG76B,EAAQ7U,YAAY4C,SAAS4sC,EAE5B,IAFgD,IAAD,aAE3C,0BAAOhiD,EAAP,KAAYP,EAAZ,KACA4nB,EAAQuK,wBAAwBrE,SAAS,SAAC40B,GACnCA,EAAYtwB,eAAetyB,OAASS,GAChCmiD,EAAYpvC,YAActT,IAAOyiD,GAAU,OAH1D,MAA0Bn5C,OAAOmgB,QAAQ84B,EAAmB36B,EAAQ7U,YAAY4C,QAAhF,eAAyF,IAQ7F,OAAG8sC,EACO,GAAN,mBAAWpB,GAAX,4BAAsBz5B,GAAtB,IAA+BriB,QAASqiB,EAAQ8H,UAAUmD,cAAgB,MAAQnG,EAAW,MAAQ9E,EAAQkM,QAEtGutB,IAGZ,IAEH,OAAG/tB,EAASzpB,OAAS,EACX,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAASznB,EAAU3b,cAAe2b,EAAS,GAAGV,KAAM5yB,MAAOszB,EAAS,GAAGV,SAE3F,GAAN,mBAAW3nB,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAASznB,EAAUtzB,MAAO,SAE5D,IAAK,WACD,IAAM2iD,EAAejD,EAAsBpM,kBAAkBtoC,QAAQ,SAACq2C,EAAO7S,GACzE,OAAGA,EAAKC,OAAOvvC,KAAOsvC,EAAKiB,YAAYvwC,GAAYmiD,EAC7B,IAAnB7S,EAAKniB,UACE,GAAN,mBAAWg1B,GAAX,4BAAsB7S,GAAtB,IAA4BjpC,QAAS,YAAcipC,EAAKC,OAAOvvC,GAAK,MAAQsvC,EAAK/2B,UAAU3X,KAAO,mBAAkB0uC,EAAKiB,YAAYvwC,IAA6B,OAAvBsvC,EAAKK,cAAwB,WAAa,YAAcL,EAAKK,cAAgB,SAChM,IAAnBL,EAAKniB,UACJ,GAAN,mBAAWg1B,GAAX,4BAAsB7S,GAAtB,IAA4BjpC,QAAS,YAAcipC,EAAKiB,YAAYvwC,GAAK,MAAQsvC,EAAK/2B,UAAU3X,KAAO,mBAAkB0uC,EAAKC,OAAOvvC,IAA6B,OAAvBsvC,EAAKK,cAAwB,WAAa,YAAcL,EAAKK,cAAgB,SAEjNwS,IAEZ,IACH,OAAGsB,EAAa94C,OAAS,EACf,GAAN,mBAAWoB,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAAS4H,EAAc3iD,MAAOghD,EAAiB2B,OAEnE,GAAN,mBAAW13C,GAAX,4BAAqB2e,GAArB,IAA0BmxB,QAAS4H,EAAc3iD,MAAO,OAEhE,QACI,MAAM,GAAN,mBAAWiL,GAAX,gBAAqB2e,QAE9B,IACmB3J,MAAK,SAACC,EAAGC,GAAJ,OAAWD,EAAE0iC,YAAcziC,EAAEyiC,YAAe,GAAK,KACzE3B,EAAOp3C,OAAS,IACfo3C,EAAO,GAAP,WAAyB,GAE7BpC,EAAcoC,MAEnB,CAACtC,EAAwBG,EAAeU,EAAuBF,EAAoBI,EAAuBP,EAAgBS,GAA0BI,GAA0BF,GAAiC//C,EAAMo7C,YAAap7C,EAAMg7C,UAC3O,IAAM50C,GAAW,WACb,IAAM08C,EAAsBjjC,EAAW5U,QAAQ,SAACC,EAAMkI,GAClD,OAAOA,EAAM3R,MACT,IAAK,SACL,IAAK,UACL,IAAK,SACL,IAAK,SACL,IAAK,iBACL,IAAK,qBACL,IAAK,mBACL,IAAK,kBACL,IAAK,wBACL,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,WACD,OAAO,2BAAIyJ,GAAX,mBAAkBkI,EAAMrT,KAAOqT,EAAMnT,QACzC,IAAK,OACD,OAAO,2BAAIiL,GAAX,mBAAkBkI,EAAMrT,KAAOqT,EAAMnT,MAAMF,OAC/C,IAAK,kBACD,OAAO,2BAAImL,GAAX,mBAAkBkI,EAAMrT,KAAO,CAC3B04C,QAASrlC,EAAMnT,MAAN,QACT4I,QAASuK,EAAMnT,MAAN,QACT44C,WAAYzlC,EAAMnT,MAAN,gBACZ04C,MAAOvlC,EAAMnT,MAAN,MACPwB,KAAM2R,EAAMnT,MAAN,QAEd,QACI,OAAO,eAAIiL,MAEpB,IACG63C,EAAiBljC,EAAW5U,QAAQ,SAACC,EAAMkI,GAC7C,MAAkB,SAAfA,EAAM3R,KACE,2BAAIyJ,GAAX,mBAAkBkI,EAAMrT,KAAOqT,EAAMnT,MAAMyqC,WAEpC,eAAIx/B,KAEhB,IACHlL,EAAMoG,SAASpG,EAAMopB,QAAQS,IAAKhlB,KAAKC,UAAUg+C,GAAsBj+C,KAAKC,UAAUi+C,GAAiBnE,IAErGlC,GAAoC,SAACrN,EAAMxnB,GAC7Cq4B,GAAiB,CAACxtC,UAAW,CAAC28B,KAAMA,EAAMvd,WAAYjK,MAEpDg1B,GAAoC,SAACC,GACvCqD,GAAoB,CAACztC,UAAW,CAACoqC,gBAAiBA,MAEhDj9C,GAAW,SAACE,EAAME,EAAOE,GAC3B,IAAM2nB,EAASjI,EAAWtV,KAAK,SAAC6I,GAC5B,OAAGA,EAAMrT,OAASA,EACP,2BAAIqT,GAAX,IAAkBnT,MAAOA,IAElB,eAAImT,MAGnB0rC,EAAch3B,IAMpB,OACE,eAAC,IAAMzgB,SAAP,WACI,eAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,UAAqCa,EAAMopB,QAAQS,IAAnD,mBACA,eAACriB,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACI,eAACqH,EAAA,EAAD,CAAY3E,UAAU,MAAtB,UACI,qCADJ,IACgB,qBAAKxJ,MAAO,CAACgH,OAAO,GAApB,SAAyB3H,EAAMopB,QAAQ45B,WACnD,4CAFJ,IAEuB,qBAAKriD,MAAO,CAACgH,OAAO,EAAGkD,UAAW,YAAa2d,SAAU,YAAa1d,WAAY,YAAlF,SAAgG9K,EAAMopB,QAAQ/V,cACjI,gDAHJ,IAG4BrT,EAAMopB,QAAQ65B,YAAc,OAAQ,QAC3DvE,EAAgB50C,OAAS,GACtB,cAAC+T,GAAA,EAAD,CAAald,MAAO,CAACC,MAAO,QAA5B,SACI,cAACjB,EAAA,EAAD,CACI4wC,QAAM,EACNvvC,MAAM,kBACNf,MAAO2+C,EACP/+C,SAlBO,SAACU,GAC5Bs+C,EAA0Bt+C,EAAML,OAAOD,QAmBnB46B,MAAO,cAAC1c,GAAA,EAAD,IANX,SASIugC,EAAgBn0C,KAAI,SAACgQ,EAAKyD,GAAN,OAChB,cAACS,GAAA,EAAD,CAAiCxe,MAAOsa,EAAxC,SAA+CA,GAAhC,aAAeyD,aAOlD,cAAC9T,EAAA,EAAD,CAAgBC,UAAWJ,IAAOK,UAAU,gBAA5C,SACI,eAACC,EAAA,EAAD,CAAOzD,KAAK,QAAQjG,MAAO,CAAC,YAAe,QAAS,SAAY,OAAQ,SAAY,UAApF,UACI,cAAC2J,EAAA,EAAD,UACI,eAAC5D,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAWhG,MAAO,CAACC,MAAO,OAA1B,uBACA,cAAC+F,EAAA,EAAD,yBAGR,cAAC+D,EAAA,EAAD,UACKmV,EAAWtV,KAAK,SAAC2F,GAAD,OACb,cAACgpC,GAAD,yBAAyB9yC,SAAUA,GAA2CvG,SAAUA,GAAUy7C,YAAaA,GAAiBprC,GAAhI,IACIkrC,YAAap7C,EAAMo7C,YAAasB,kCAAmCA,GACnEG,kCAAmCA,KAFW,mBAAqB3sC,EAAG/Q,iBAS9F,eAACyI,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQE,QAASH,GAAUlF,QAAQ,YAAYoF,MAAM,YAArD,0BCzzBV,I,kBAAM48C,GAAyB9yC,aAAH,60BAkCf+yC,GAAmB,SAAC,GAAoD,IAAnD/H,EAAkD,EAAlDA,YAAagI,EAAqC,EAArCA,WAAYvjC,EAAyB,EAAzBA,WAAYwjC,EAAa,EAAbA,SACnE,EAAsDvhD,IAAMkC,SAAS,IAArE,mBAAOs/C,EAAP,KAA4BC,EAA5B,KACA,EAA8DzhD,IAAMkC,UAAS,GAA7E,mBAAOw/C,EAAP,KAAgCC,EAAhC,KACA,EAAwD3hD,IAAMkC,UAAS,GAAvE,mBAAO0/C,EAAP,KAA6BC,EAA7B,KACA,EAA8C7hD,IAAMkC,SAAS,IAA7D,mBAAOq/B,EAAP,KAAwBC,EAAxB,KACA,EAAwDxhC,IAAMkC,SAAS,IAAvE,mBAAO4/C,EAAP,KAA6BC,EAA7B,KACA,EAA0D/hD,IAAMkC,SAAS,IAAzE,mBAAO8/C,EAAP,KAA8BC,EAA9B,KACA,EAA0EjiD,IAAMkC,UAAS,GAAzF,mBAAOggD,EAAP,KAAsCC,EAAtC,KACA,EAAgDniD,IAAMkC,SAAS,IAA/D,mBAAOkgD,EAAP,KAAyBC,EAAzB,KACA,EAAqB/yC,aAAYgzC,GAAuB,CACpD7hC,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KACiB,UAA3BA,EAAK6hD,WAAWpyC,OACf9O,EAAahD,MAAMqC,EAAK6hD,WAAWlkD,OAEnCgD,EAAaC,QAAQ,WAAcigC,EAAe,IAAU,iBAAoB+X,GAEpFiI,KAEJ5xC,QAAS,SAAAjP,GACLK,QAAQ1C,MAAMqC,GACd6gD,OAXDgB,EAAP,oBAcaC,EAAgBtzC,aAASkyC,GAAwB,CAC1DxwC,UAAW,CAAC0oC,YAAaA,EAAagI,WAAY,IAAMA,EAAa,KACrElyC,YAAa,SAAC1O,GACV,IAAM+hD,EAAoB/hD,EAAKgiD,eAAehD,eAAev2C,QAAQ,SAACC,EAAMyK,GACxE,MAAM,GAAN,mBAAWzK,GAAX,CAAiByK,EAAIyT,YACtB,IACGq7B,EAAkBjiD,EAAKgiD,eAAeE,eAAez5C,QAAQ,SAACC,EAAMyK,GACtE,MAAM,GAAN,mBAAWzK,GAAX,4BAAqByK,EAAIxG,OAAzB,IAAgC,QAA8B,OAAnBwG,EAAIxG,MAAMw1C,KAAgBhvC,EAAIxG,MAAMy1C,QAAU,MAAQjvC,EAAIxG,MAAMkE,YAAcsC,EAAIxG,MAAMw1C,KAAO,MAAQhvC,EAAIxG,MAAMkE,kBAC7J,IACHwwC,EAAwBY,GACxBlB,EAAuBgB,GACS,IAA7BA,EAAkBz6C,OACjB3G,EAAaK,QAAQ,iDAAmD4/C,EAAa,YACnD,IAA7BmB,EAAkBz6C,OACvBw5B,EAAmB,eAAIihB,EAAkB,MAEzCjhB,EAAmB,IACnBmgB,GAA2B,KAGnCxyC,YAAa,aApBVzO,KAyBDqiD,EAAkB,SAAC,GAAiB,IAAhBnyC,EAAe,EAAfA,UACnBkxC,EAAqB95C,OAAS,GAC7Bm6C,GAAiC,GACjCE,EAAoBzxC,IAEpB2xC,EAAW,CAAC3xC,eAkDpB,OAxCArO,qBAAW,WACsB,KAA1By/C,GAECO,EAAW,CAAC3xC,UAAWwxC,IAExBJ,EAAsBc,SACrBP,EAAW,CAAC3xC,UAAU,2BAAKwxC,GAAN,IAAwBY,SAAUhB,EAAsBc,cAKlF,CAACd,IACJz/C,qBAAW,gBACkC5D,IAAtC4iC,EAAgBkd,oBAGhBld,EAAgBkd,kBAAkBz2C,OAAS,OACxBrJ,IAAfof,GAA2C,OAAfA,EAC3B8jC,GAAwB,GAGpBkB,EADsB,kBAAhBhlC,EACU,CAACnN,UAAW,CAAC0oC,YAAaA,EAAahyB,QAASia,EAAgBxZ,IAAK/B,OAAQjI,IAE7E,CAACnN,UAAW,CAAC0oC,YAAaA,EAAahyB,QAASia,EAAgBxZ,IAAK/B,OAAQjjB,KAAKC,UAAU+a,GAAaklC,iBAAkB,mBAM/IF,OADcpkD,IAAfof,GAA2C,OAAfA,EACX,CAACnN,UAAW,CAAC0oC,YAAaA,EAAahyB,QAASia,EAAgBxZ,IAAK/B,OAAQ,KAEnE,kBAAhBjI,EACU,CAACnN,UAAW,CAAC0oC,YAAaA,EAAahyB,QAASia,EAAgBxZ,IAAK/B,OAAQjI,IAE7E,CAACnN,UAAW,CAAC0oC,YAAaA,EAAahyB,QAASia,EAAgBxZ,IAAK/B,OAAQjjB,KAAKC,UAAU+a,GAAaklC,iBAAkB,sBAKxJ,CAAC1hB,IAEA,gCACKmgB,GACG,cAACv7C,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMo7C,EAC3Cx7C,QAAS,WAAKy7C,GAA2B,GAAOJ,KAChD16C,YAAa,cAAC8uC,GAAD,CAA4BzvC,QAAS,WAAKy7C,GAA2B,IAC9Dr9C,SAhER,SAACyjB,GAC7ByZ,EAAmBzZ,IA+DoDvmB,QAASggD,EAAqB/7C,MAAO,iBACxEsb,OAAQ,SAAU+0B,WAAY,KAAMpyC,QAAS,UAG5Ek+C,GACG,cAACz7C,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMs7C,EAC/C17C,QAAS,WAAK27C,GAAwB,GAAON,KAC7C16C,YAAa,cAAC61C,GAAD,CAAsBp1B,QAASia,EAAiB+X,YAAaA,EAAawF,eAAgB0D,EAAaE,eAAe38B,QAAQ7U,YAAY7T,GACnJwgB,aAAc2kC,EAAaE,eAAe7kC,aAC1CvZ,SA9DW,SAACyjB,EAAKhK,EAAY8qB,GAC7CgZ,GAAwB,GACxBkB,EAAgB,CAACnyC,UAAW,CAAC0oC,YAAaA,EAAahyB,QAASS,EAAK/B,OAAQjI,EAAY8qB,QAAOoa,iBAAkB,YA4DhE/8C,QAAS,WAAK27C,GAAwB,QAGnFK,GACG,cAAC/7C,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAM47C,EAC/Ch8C,QAAS,WAAKi8C,GAAiC,GAAOZ,KACtD16C,YAAa,cAAC8uC,GAAD,CAA4BzvC,QAAS,WAAKi8C,GAAiC,GAAOZ,KAC3Ej9C,SAjEN,SAAC+I,GAC3B40C,EAAyB50C,IAgEwC0oC,mBAAmB,EAAMv0C,QAASsgD,EAAsBr8C,MAAO,eAChGsb,OAAQ,SAAU+0B,WAAY,KAAMpyC,QAAS,kBC/I/EiO,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvConC,QAAS,CACPhnC,gBAAiBJ,EAAM4N,QAAQy5B,WAAWC,SAC1CrwC,MAAO+I,EAAM4N,QAAQ2vB,KAAK+J,SAC1BpiC,UAAWlF,EAAMunC,QAAQ,GACzBj+B,SAAU,IAEZk+B,MAAO,CACLvwC,MAAO+I,EAAM4N,QAAQy5B,WAAWC,cAW9BqO,GAAc,SAACC,GACnB,OAAOA,EAAS1pC,eACd,IAAK,aACL,IAAK,SACH,OAAO2pC,KACT,IAAK,eACH,OAAOC,KACT,IAAK,UACL,IAAK,MACH,OAAOC,KACT,IAAK,YACH,OAAOC,KACT,IAAK,aACH,OAAOC,KACT,IAAK,OACH,OAAOC,KACT,IAAK,QACH,OAAOC,KACT,IAAK,aACH,OAAOC,KACT,IAAK,MACL,IAAK,QACH,OAAOC,KACT,IAAK,WACH,OAAOC,KACT,IAAK,MACH,OAAOC,KACT,IAAK,OACL,IAAK,SACH,OAAOC,KACT,IAAK,WACH,OAAOC,KACT,IAAK,SACH,OAAOC,KACT,IAAK,MACL,IAAK,MACL,IAAK,QACH,OAAOC,KACT,IAAK,OACH,OAAOC,KACT,IAAK,SACH,OAAOC,KACT,IAAK,SACH,OAAOC,KACT,IAAK,OACH,OAAOC,KACT,IAAK,SACH,OAAOC,KACT,QACE,OAAOC,OAGPC,GAAiC,SAAC,GAAyB,IAAxBC,EAAuB,EAAvBA,SACjCvxC,GADwD,EAAbwxC,QACjChzC,MAChB,OACE,sBAAK9S,MAAK,eAAM6lD,EAAQ,WAAxB,WACW,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAUE,UACT,cAAC5e,GAAA,EAAD,CAASvgC,MAAO,oBAAqBsvC,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAA9F,SACI,cAACxoC,EAAA,EAAD,CAAY9H,QAAS,WAjElB0vC,GAiE0CuQ,EAAQ,WA/D7DrjD,EAAaC,QAAQ,gBAErBD,EAAahD,MAAM,wBA6D0DyG,KAAK,QAA1E,SACI,cAAC,KAAD,CAAiB4c,KAAMmjC,WAElB,MACN,OAARH,QAAQ,IAARA,OAAA,EAAAA,EAAU1/C,WACT,cAACghC,GAAA,EAAD,CAASvgC,OAAe,OAARi/C,QAAQ,IAARA,OAAA,EAAAA,EAAUI,qBAAsB,GAAI/P,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAA7G,SAAqH,+BACjH,cAAC,KAAD,CAAiBrzB,KAAMwhC,GAAW,OAACwB,QAAD,IAACA,OAAD,EAACA,EAAU1/C,WAAYnG,MAAO,CAAC6F,YAAa,MAAOF,OAAe,OAARkgD,QAAQ,IAARA,OAAA,EAAAA,EAAUK,iBAAmB,UAE1H,KAEJL,EAASM,mBACR,cAAChf,GAAA,EAAD,CAASvgC,MAAOi/C,EAASM,mBAAoBjQ,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAAtG,SACE,qBAAKl2C,MAAO,CAAC6E,QAAS,gBAAtB,UACW,OAARghD,QAAQ,IAARA,OAAA,EAAAA,EAAUtP,YAAa,QAK5B,qBAAKv2C,MAAO,CAAC6E,QAAS,gBAAtB,UACa,OAARghD,QAAQ,IAARA,OAAA,EAAAA,EAAUtP,YAAa,OAGrB,OAARsP,QAAQ,IAARA,OAAA,EAAAA,EAAUO,SACV,cAACjf,GAAA,EAAD,CAASvgC,OAAe,OAARi/C,QAAQ,IAARA,OAAA,EAAAA,EAAUQ,mBAAoB,GAAInQ,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAA3G,SAAmH,iCAChH,cAAC,KAAD,CAAiBrzB,KAAMwhC,GAAW,OAACwB,QAAD,IAACA,OAAD,EAACA,EAAUO,SAAUpmD,MAAO,CAAC2F,OAAe,OAARkgD,QAAQ,IAARA,OAAA,EAAAA,EAAUS,eAAiB,MADe,SAEtG,SAMdC,GAAgB,SAAC,GAAgB,IAAfV,EAAc,EAAdA,SACtB,IAEI,IAAIW,EAAQvsC,SAAS4rC,EAAQ,WAC7B,GAA8B,KAA1BA,EAAQ,UACV,MAAO,GAET,GAAc,IAAVW,EACF,MAAO,UAET,IAKMnpC,EAAI/R,KAAKm7C,MAAMn7C,KAAKnJ,IAAIqkD,GAASl7C,KAAKnJ,IAJlC,OAMV,OADaukD,YAAYF,EAAQl7C,KAAKq7C,IAL5B,KAKmCtpC,IAAIupC,QANhC,IAM+C,IAHlD,CAAC,QAAS,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAGUvpC,GAE/E,MAAM7d,GACL,OAAe,OAARqmD,QAAQ,IAARA,OAAA,EAAAA,EAAUtP,YAAa,KAI5BsQ,GAA+B,SAAC,GAAgB,IAAfhB,EAAc,EAAdA,SAC/BvxC,EAAUxB,KAChB,OACE,qBAAK9S,MAAK,eAAM6lD,EAAQ,WAAxB,SACKA,EAASM,mBACV,cAAChf,GAAA,EAAD,CAASvgC,MAAOi/C,EAASM,mBAAoBjQ,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAAtG,SACE,qBAAKl2C,MAAO,CAAC6E,QAAS,gBAAtB,SACG0hD,GAAc,CAACV,iBAKpB,qBAAK7lD,MAAO,CAAC6E,QAAS,gBAAtB,SACK0hD,GAAc,CAACV,kBAOtBiB,GAAiC,SAAC,GAAsC,IAArCjB,EAAoC,EAApCA,SAAUpL,EAA0B,EAA1BA,YAC3C/rC,GADqE,EAAbo3C,QAChDn3C,gBACd,EAAoCxN,IAAMkC,UAAS,GAAnD,mBAAO0jD,EAAP,KAAmBC,EAAnB,KACA,EAAkD7lD,IAAMkC,UAAS,GAAjE,mBAAO4jD,EAAP,KAA0BC,EAA1B,KACM3lC,EAAoB/Z,iBAAO,MACjC,EAAoDrG,IAAMkC,UAAS,GAAnE,mBAAO8jD,EAAP,KAA2BC,EAA3B,KACA,EAAsCjmD,IAAMkC,SAAS,IAArD,mBAAOgkD,EAAP,KAAoBC,EAApB,KACMhzC,EAAUxB,KACV5L,EAAc,SAACtH,GACf2hB,EAAkB5Z,SAAW4Z,EAAkB5Z,QAAQga,SAAS/hB,EAAML,SAG1E6nD,GAAsB,IAelBG,EAAkB,WACtBL,GAAqB,GACrBI,EAAe,KAEXE,EAAsB,WAC1BR,GAAc,GACdM,EAAe,KAqFjB,OACE,sBAAKtnD,MAAK,eAAM6lD,EAAQ,WAAxB,UACGA,EAAStP,UAAYsP,EAAStP,UAAY,KAC1CsP,EAAS/9B,OAtFU,WAAO,IAAD,oCAC5B,OAAO+9B,EAAS/9B,OAAOhnB,KAAK8Z,eAC1B,IAAK,aACH,OACE,eAAC,IAAMlU,SAAP,WACE,cAACygC,GAAA,EAAD,CAASvgC,OAAe,OAARi/C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB0uB,YAAa,eAAgBN,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAAxH,SACE,cAACxwC,EAAA,EAAD,CAAQO,KAAK,QAAQ1F,QAAQ,YAAYoF,MAAM,UAC7CC,QAAS,kBAAMohD,GAAc,IAAOxmD,UAAkB,OAARqlD,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkBtnB,YAAY,EAC5E2F,WAAmB,OAAR0/C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB3hB,WAAY,cAAC,KAAD,CAAiB0c,KAAMwhC,GAAW,OAACwB,QAAD,IAACA,GAAD,UAACA,EAAU/9B,cAAX,aAAC,EAAkB3hB,WAAYnG,MAAO,CAAC2F,OAAe,OAARkgD,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkBo+B,iBAAmB,MAAS,KAFzK,UAGY,OAARL,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB1oB,OAAQ,QAE/B2nD,GACG,cAACz/C,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMs/C,EAC/C1/C,QAAS,WAAK2/C,GAAc,IAC5Bh/C,YAAa,cAACK,GAAD,CAA6BzB,OAAe,OAARi/C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkBlhB,QAAS,aAAcqC,YAAoB,OAAR48C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB2/B,kBAAmB,cAC3Iv+C,aAAqB,OAAR28C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB4/B,mBAAoB,eAAgBpoD,OAAe,OAARumD,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkBxoB,QAAS,GAAI+H,QAAS,WAAK2/C,GAAc,WAKnJ,IAAK,OACH,OACE,eAAC,IAAMtgD,SAAP,WACE,cAACygC,GAAA,EAAD,CAASvgC,OAAe,OAARi/C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB0uB,YAAa,uBAAwBN,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAAhI,SACE,cAACxwC,EAAA,EAAD,CAAQO,KAAK,QAAQL,QAAS,kBAAMshD,GAAqB,IAAO1mD,UAAkB,OAARqlD,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkBtnB,YAAY,EAAOD,QAAQ,YAAYoF,MAAM,YACvIQ,WAAmB,OAAR0/C,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB3hB,WAAY,cAAC,KAAD,CAAiB0c,KAAMwhC,GAAW,OAACwB,QAAD,IAACA,GAAD,UAACA,EAAU/9B,cAAX,aAAC,EAAkB3hB,WAAYnG,MAAO,CAAC2F,OAAe,OAARkgD,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkBo+B,iBAAmB,MAAS,KADzK,UAEU,OAARL,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB1oB,OAAQ,QAE7B6nD,GACC,cAAC,GAAD,CAAkBxE,YAAoB,OAARoD,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB26B,aAAc,IAC5DhI,YAAaA,EACbv7B,YAAoB,OAAR2mC,QAAQ,IAARA,GAAA,UAAAA,EAAU/9B,cAAV,eAAkB5I,aAAc,GAC5CwjC,SAAU,kBAAMwE,GAAqB,SAI/C,IAAK,OACH,OACE,eAAC,IAAMxgD,SAAP,WACGugD,GACC,cAAC,GAAD,CAAkBxE,WAAY4E,EAAY5E,WACxChI,YAAaA,EACbv7B,WAAYmoC,EAAYnoC,WACxBwjC,SAAU6E,IAEbR,GACC,cAACz/C,GAAD,CAAcnH,WAAW,EAAM4H,SAAS,KAAKN,KAAMs/C,EACjD1/C,QAASmgD,EACTx/C,YAAa,cAACK,GAAD,CAA6BzB,MAAOygD,EAAYzgD,MAAOqC,WAAYo+C,EAAYI,gBAC5Fv+C,YAAam+C,EAAYK,iBAAkBpoD,MAAO+nD,EAAY/nD,MAAO+H,QAASmgD,MAGlF,cAAC9hD,EAAA,EAAD,CAAQwd,IAAK3B,EAAmBtb,KAAK,QAAQL,QAAS,WAAKwhD,GAAsB,IAASzhD,MAAM,UAAUpF,QAAQ,YAAlH,SAA+HslD,EAAS/9B,OAAO1oB,OAC3I,cAACgkB,GAAA,EAAD,CAAQ3b,KAAM0/C,EAAoBlrC,SAAUsF,EAAkB5Z,QAAS0b,UAAMvjB,EAAWoT,YAAU,EAAClT,MAAO,CAACujB,OAAQ,GAAnH,SACG,gBAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,UAApB,OACC,cAACC,GAAA,EAAD,2BACMF,GADN,IAEExjB,MAAO,CACLkc,gBAA+B,WAAduH,EAAyB,aAAe,iBAH7D,SAME,cAACra,EAAA,EAAD,CAAO7I,QAAQ,WAAWP,MAAO,CAAC8O,gBAAwC,SAAvBJ,EAAM4N,QAAQxb,KAAkB4N,EAAM4N,QAAQC,QAAQC,KAAO9N,EAAM4N,QAAQC,QAAQE,MAAO9W,MAAO,SAApJ,SACE,cAACge,GAAA,EAAD,CAAmBC,YAAa1c,EAAhC,SACE,cAAC2c,GAAA,EAAD,CAAUrlB,GAAG,oBAAb,SACGqnD,EAAS/9B,OAAOxoB,MAAMsK,KAAI,SAAC2/B,EAAQz/B,GAAT,OACzB,cAACgU,GAAA,EAAD,CAEEtd,SAAU+oC,EAAO/oC,SACjBoF,QAAS,SAAChG,GAAD,OAzFX,SAACA,EAAOkK,GAClC,OAAO+7C,EAAS/9B,OAAOxoB,MAAMwK,GAAOhJ,KAAK8Z,eACvC,IAAK,OACH0sC,EAAezB,EAAS/9B,OAAOxoB,MAAMwK,IACrCo9C,GAAqB,GACrB,MACF,IAAK,aACHI,EAAezB,EAAS/9B,OAAOxoB,MAAMwK,IACrCk9C,GAAc,GAGlBI,GAAsB,GA8E0B5d,CAAoB5pC,EAAOkK,IAHjD,SAKGy/B,EAAOnqC,MAJHmqC,EAAOnqC,KAAO0K,sBAoBzB69C,GAAsB,SAI1CC,GAAe,SAAC,GAAoC,IAAnCC,EAAkC,EAAlCA,WAAYC,EAAsB,EAAtBA,QAAShC,EAAa,EAAbA,QAa1C,OAZoB,WAClB,OAAO+B,EAAW7qC,QAChB,IAAK,SACH,OAAO,cAAC,GAAD,CAAgC6oC,SAAUC,EAAQgC,GAAUhC,QAASA,IAC9E,IAAK,OACH,OAAO,cAAC,GAAD,CAA8BD,SAAUC,EAAQgC,GAAUhC,QAASA,IAC5E,IAAK,SACH,OAAO,cAAC,GAAD,CAAgCrL,YAAaoN,EAAWpN,YAAaoL,SAAUC,EAAQgC,GAAUhC,QAASA,IACnH,QACE,OAAO,cAAC,GAAD,CAAgCD,SAAUC,EAAQgC,GAAUhC,QAASA,KAIhFiC,IAGEC,GAAe,WACnB,OACE,2CAISC,GAAuB,SAAC,GAAyB,IAAxBC,EAAuB,EAAvBA,MAAOzN,EAAgB,EAAhBA,YACrC/rC,EAAQC,eACd,EAAoCxN,IAAMkC,SAAS,IAAnD,mBAAO8kD,EAAP,KAAmBC,EAAnB,KACMC,EAAUlnD,IAAMqG,OAAO,IAC7B,EAA4BrG,IAAMkC,SAAS,IAA3C,mBAAOilD,EAAP,KAAeC,EAAf,KACA,EAAwCpnD,IAAMkC,SAAS,IAAvD,mBAAOmlD,EAAP,KAAqBC,EAArB,KACMC,EAAWvnD,IAAMqG,OAAO,MAC9B,EAA0CrG,IAAMkC,SAAS,OAAzD,mBAAOslD,EAAP,KAAsBC,EAAtB,KACMC,EAAY,SAAC,GAAa,IAAZ/+C,EAAW,EAAXA,MAClB,OAAGA,EAAQ,EACF,CAACgF,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,MAEvEq5C,EAAQ1gD,QAAQmC,GAAhB,UAAsC,IAEzCg/C,EAAY,SAAC,GAA6B,IAA5BR,EAA2B,EAA3BA,OAAQK,EAAmB,EAAnBA,cACpBI,EAAO,YAAOV,EAAQ1gD,SACtBqhD,EAAWd,EAAMlkD,QAAQiN,QAAQ,SAAAg4C,GAAC,OAAIA,EAAC,YAAkBX,KAAQ,GAAtD,KACD,WAAbU,GAAsC,SAAbA,EAC1BD,EAAQxpC,MAAK,SAACC,EAAGC,GAAJ,OAAWxF,SAASuF,EAAE8oC,GAAF,WAA0BruC,SAASwF,EAAE6oC,GAAF,WAA0B,GAAK,KAC/E,SAAbU,EACPD,EAAQxpC,MAAK,SAACC,EAAEC,GAAH,OAAY,IAAI7U,KAAK4U,EAAE8oC,GAAF,WAA4B,IAAI19C,KAAK6U,EAAE6oC,GAAF,WAA2B,GAAI,KAEtGS,EAAQxpC,MAAM,SAACC,EAAGC,GAChB,YAA8B3f,IAA3B0f,EAAE8oC,GAAF,WACO,OAC0BxoD,IAA3B2f,EAAE6oC,GAAF,WAGF9oC,EAAE8oC,GAAF,UAAuB1tC,cAAgB6E,EAAE6oC,GAAF,UAAuB1tC,cAF5D,GAEiF,KAGzE,SAAlB+tC,GACDI,EAAQG,UAEVb,EAAQ1gD,QAAR,YAAsBohD,GACtBR,EAAUD,GACVM,EAAiBD,IAGbQ,EAAY,SAAC,GAAa,IAAZr/C,EAAW,EAAXA,MAClB,OAAOu+C,EAAQ1gD,QAAQmC,IAEnBs/C,EAAYjoD,IAAM0yB,aAAa,YAA+B,IAAD,EAA5Bj0B,EAA4B,EAA5BA,MAAOkoD,EAAqB,EAArBA,QAASuB,EAAY,EAAZA,OACrDzpD,EAAMiE,iBACNjE,EAAM62B,kBAIN,IAHA,IAAM6yB,EAAU,eAAOd,GACjBe,EAAeF,EAASX,EAAS/gD,QAAQ6hD,YAC3CC,EAAa,GACTpsC,EAAI,EAAGA,EAAI6qC,EAAMlkD,QAAQmF,OAAQkU,IAEpC6qC,EAAMlkD,QAAQqZ,GAAd,YAAkCyqC,GAChCzqC,EAAE,EAAI6qC,EAAMlkD,QAAQmF,SACrBsgD,EAAavB,EAAMlkD,QAAQqZ,EAAE,GAAhB,WAInB,GAAkB,KAAfosC,EAAH,CAIA,IAAMC,EAAa,2BAAOJ,GAAP,wBAChBxB,EAAUwB,EAAWxB,GAAWyB,GADhB,eAEhBE,EAAaH,EAAWG,GAAcF,GAFtB,IAInBd,EAAgBiB,QAPdxnD,QAAQC,IAAI,2BAQb,CAACqmD,IACEmB,EAAiBxoD,IAAM0yB,aAAa,YAAsE,EAApEg0B,WAAqE,IAAzDC,EAAwD,EAAxDA,QAAsBznD,GAAkC,EAA/CupD,YAA+C,EAAlCvpD,OAAOioD,EAA2B,EAA3BA,OAAQK,EAAmB,EAAnBA,cAC3F,OACE,eAAC,IAAMjiD,SAAP,WACE,uBAAM1G,MAAO,CAAC6E,QAAS,cAAesR,cAAe,MAAOC,aAAc,UAAWxR,eAAgB,cAArG,UACGvE,EACAioD,IAAWjoD,EACQ,QAAlBsoD,EACE,cAAC,KAAD,IAEA,cAAC,KAAD,IAEA,QAEN,cAAC,KAAD,CACEkB,KAAK,IACLC,iBAAiB,aACjBC,yBAAyB,mBACzBC,OAAQ,SAACpqD,EAAD,OAASypD,EAAT,EAASA,OAAT,OAAqBD,EAAU,CAACxpD,QAAOkoD,UAASuB,YACxD//C,SAAU,CAACkiC,EAAE,GACbjoB,OAAQ,IANV,SAQI,sBAAM3d,QAAS,SAACzG,GAASA,EAAI0E,iBAAiB1E,EAAIs3B,mBAAqBhtB,UAAU,iBAAiBzJ,MAAO,CAACC,MAAO,OAAQkP,UAAW,UAApI,wBAnBe,SAAW24C,KAuBjC,CAACsB,IA4CJ,OA1CA1lD,qBAAW,WACT,IAAMumD,EAAoB/B,EAAMlkD,QAAQsG,QAAQ,SAACC,EAAMyK,GACrD,OAAGA,EAAI/U,MACEsK,EAEAA,EAAO,IAEf,GAQG2/C,EAAkB,IAPIhC,EAAMlkD,QAAQsG,QAAQ,SAACC,EAAMyK,GACvD,OAAGA,EAAI/U,MACEsK,EAAOyK,EAAI/U,MAEXsK,IAER,GAGG4/C,EAAkBjC,EAAMlkD,QAAQsG,QAAQ,SAACC,EAAMyK,GACnD,OAAO,2BAAIzK,GAAX,mBAAkByK,EAAG,UAAkBA,EAAI/U,MAAS+U,EAAI/U,MAAM,IAAQiqD,EAAkBD,EAAoB,QAC3G,IACHxB,EAAgB,eAAI0B,MACnB,CAACjC,EAAMlkD,UACVN,qBAAW,WACT2kD,EAAQ1gD,QAAR,YAAsBugD,EAAMkC,QAC3B,CAAClC,EAAMkC,OACV1mD,qBAAW,WACP,IAAM2mD,EAAanC,EAAMlkD,QAAQ4F,KAAK,SAACC,GACrC,MAAO,CACLi+C,QAASj+C,EAAM,UACfxJ,MAAOwJ,EAAM,UACb5J,MAAOuoD,EAAa3+C,EAAM,WAAiB6+C,EAAS/gD,QAAQ6hD,YAC5D3B,WAAY,CAAC7qC,YAA2Bld,IAAnB+J,EAAM,KAAyB,SAAWA,EAAM,KAAU4wC,YAAaA,GAC5F6P,aAAc1C,GACd+B,eAAgBA,MAGpBvB,EAAciC,GACXA,EAAWlhD,OAAS,GACrBo/C,EAAU8B,EAAW,GAAX,WAEb,CAACnC,EAAMlkD,QAASwkD,EAAcE,EAAS/gD,UAGtC,eAAC,IAAMjB,SAAP,WACI,cAAC0C,EAAA,EAAD,CAAOC,UAAW,EAAGrJ,MAAO,CAAC8O,gBAAiBJ,EAAMK,WAAWC,KAAMrJ,MAAO+I,EAAMO,eAAeD,KAAM9N,aAAc,MAAOgO,UAAW,OAAQrJ,YAAa,OAAQtF,QAAS,YAA7K,SACI,cAAC4N,EAAA,EAAD,CAAY5N,QAAQ,KAAKP,MAAO,CAACmP,UAAW,OAAQtK,QAAS,eAAgBuK,WAAY,QAAzF,SACK84C,EAAMthD,UAGf,qBAAK5G,MAAO,CAACuF,OAAQ,aAActF,MAAO,QAASijB,IAAKwlC,EAAxD,SACE,cAAC,KAAD,UACG,gBAAEnjD,EAAF,EAAEA,OAAQtF,EAAV,EAAUA,MAAV,OACC,cAAC,KAAD,CACEsF,OAAQA,EACRtF,MAAOA,EACPsqD,aAAc,GACdC,eAAgBxC,GAChByC,SAAUpC,EAAQ1gD,QAAQwB,OAC1BggD,UAAYA,EACZuB,UAAW,GACX7B,SAAUA,EACVtpC,KAAMupC,EACNR,OAAQA,EACRK,cAAeA,EAXjB,SAaKR,EAAWv+C,KAAK,SAAC+gD,GAAD,OACf,cAAC,KAAD,eAAsCA,GAAzB,MAAQA,EAAI7C,uBC7dzCh1C,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvConC,QAAS,CACPhnC,gBAAiBJ,EAAM4N,QAAQy5B,WAAWC,SAC1CrwC,MAAO+I,EAAM4N,QAAQ2vB,KAAK+J,SAC1BpiC,UAAWlF,EAAMunC,QAAQ,GACzBj+B,SAAU,IAEZk+B,MAAO,CACLvwC,MAAO+I,EAAM4N,QAAQy5B,WAAWC,cAIvB4U,GAA0B,SAACvrD,GAAU,IAAD,QACzCiV,EAAUxB,KAChB,OACE,eAAC,IAAMpM,SAAP,WACE,qBAAK1G,MAAO,CAAC6E,QAAS,gBAAtB,UACG,UAAAxF,EAAMivB,gBAAN,eAAgBioB,YAAa,KAGhC,cAACpP,GAAA,EAAD,CAASvgC,OAAY,OAALvH,QAAK,IAALA,GAAA,UAAAA,EAAOwrD,eAAP,eAAgBrU,YAAa,mBAAqBN,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAA3H,SACE,cAACxwC,EAAA,EAAD,CAAQnF,SAAS,UAAAlB,EAAMivB,gBAAN,eAAgB/tB,UAAW,YAAaiJ,UAAU,IAAIjK,OAAO,SAASoG,MAAM,UAAU0Q,KAAM,4BAA8BhX,EAAMivB,SAASW,cAAeX,UAAQ,EAC/KnoB,UAAW,cAAC,KAAD,IADb,UAEK,UAAA9G,EAAMivB,gBAAN,eAAgBlvB,OAAQ,OAErB,2B,UC1BV0T,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvConC,QAAS,CACPhnC,gBAAiBJ,EAAM4N,QAAQy5B,WAAWC,SAC1CrwC,MAAO+I,EAAM4N,QAAQ2vB,KAAK+J,SAC1BpiC,UAAWlF,EAAMunC,QAAQ,GACzBj+B,SAAU,IAEZk+B,MAAO,CACLvwC,MAAO+I,EAAM4N,QAAQy5B,WAAWC,cAIvB8U,GAAwB,SAACzrD,GAAU,IAAD,MACvCiV,EAAUxB,KAChB,OACE,eAAC,IAAMpM,SAAP,WACE,qBAAK1G,MAAO,CAAC6E,QAAS,eAAgBsF,WAAY,YAAlD,UACG,UAAA9K,EAAM0rD,cAAN,eAAcxU,YAAa,KAG9B,cAACpP,GAAA,EAAD,CAASvgC,OAAO,UAAAvH,EAAM0rD,cAAN,eAAcvU,YAAa,sBAAwBN,OAAK,EAAC5hC,QAAS,CAACwhC,QAASxhC,EAAQwhC,QAASI,MAAO5hC,EAAQ4hC,OAA5H,SACE,cAAC8U,GAAA,EAAD,CAAMxhD,UAAU,IAAIjK,OAAO,SAAS8W,KAAMkY,OAAOvpB,SAASwpB,OAAS,gBAAkBnvB,EAAM0rD,OAAOA,OAAlG,UACK,UAAA1rD,EAAM0rD,cAAN,eAAc3rD,OAAQ,OAEnB,2B,oBCZV6rD,GAAoBx7C,aAAH,yOAOjBy7C,GAAwBz7C,aAAH,0bAYrB07C,GAA2B17C,aAAH,mXAYxB27C,GAAa37C,aAAH,ogBAgBH47C,GAAkB,SAAChsD,GAAU,IAAD,QAC/BqP,EAAQC,eACd,EAAkDxN,IAAMkC,UAAS,GAAjE,mBAAOioD,EAAP,KAA0BC,EAA1B,KACA,EAA4BpqD,IAAMkC,SAAS,IAA3C,mBAAOwI,EAAP,KAAeiW,EAAf,KACA,EAAwC3gB,IAAMkC,SAAS,IAAvD,mBAAOmoD,EAAP,KAAqBC,EAArB,KACA,EAAkDtqD,IAAMkC,SAAS,IAAjE,mBAAOqoD,EAAP,KAA0BC,EAA1B,KACMnpB,EAASrhC,IAAMqG,SACfrE,EAAKC,YAAe/B,GAC1B,EAA4CF,IAAMkC,SAAS,GAA3D,mBAAOuoD,EAAP,KAAuBC,EAAvB,KACA,EAAwC1qD,IAAMkC,SAAS,GAAvD,mBAAOyoD,EAAP,KAAqBC,EAArB,KACA,EAA4B5qD,IAAMkC,SAAS,IAA3C,mBAAO0nD,EAAP,KAAeiB,EAAf,KACA,EAA8C7qD,IAAMkC,UAAS,GAA7D,mBAAO4oD,EAAP,KAAwBC,EAAxB,KACAz1C,aAAgBw0C,GAAmB,CAACl5C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAAI6tD,WAAYhtD,EAAMgtD,YAAa/7C,YAAa,eACpHwnB,mBAAoB,YAAyB,IAAvBC,EAAsB,EAAtBA,iBACpB,GAAoB,IAAjB+zB,GAAsB/zB,EAAiBl2B,KAAKyC,SAAS6E,SAAW9J,EAAMgtD,YAGnE,GAAGP,GAAgBzsD,EAAMgtD,WAE7BnqD,QAAQC,IAAI,2CAId,GAAG41B,EAAiBl2B,KAAKyC,SAAS6E,OAAS,EAAE,CAC3C,IAAMmjD,EAAiBv0B,EAAiBl2B,KAAKyC,SAAS2M,QAAQ,SAAAs7C,GAAC,OAAIA,EAAE/tD,GAAKotD,KAC1EU,EAAe/sC,MAAM,SAACC,EAAEC,GAAH,OAASD,EAAEhhB,GAAKihB,EAAEjhB,GAAK,GAAK,KAKjD,IAJA,IAAIguD,EAAkB3gD,EAClB4gD,EAAgB,YAAOjB,GACvBkB,EAAmBd,EACnBe,EAAoBb,EAChBzuC,EAAI,EAAGA,EAAIivC,EAAenjD,QAC7BwjD,EAAoBttD,EAAMgtD,WADWhvC,IAEtCmvC,GAAmBF,EAAejvC,GAAf,SACnBovC,EAAiBzjD,KAAKsjD,EAAejvC,GAAf,UACtBqvC,EAAmBJ,EAAejvC,GAAf,GACnBsvC,GAAqB,EAKzB7qC,EAAU0qC,GACVf,EAAgBgB,GAChBZ,EAAkBa,GAClBX,EAAgBY,SA5BhBC,GAAmB,CAAC76C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAAI6tD,WAAYhtD,EAAMgtD,WAAY30B,OAAQ,EAAGqzB,OAAQ,YAgC7G,IAAM8B,EAAe,SAACC,GACpB,IAAIC,EAAM,eAAOD,GACjB,GAAc,KAAX/B,EACD,OAAO+B,EAOT,QAL+BhtD,IAA5BgtD,EAAU,YACPA,EAAU,UAAc3yC,SAAS4wC,KACnCgC,EAAM,UAAgB,UAGCjtD,IAAxBgtD,EAAU,OACRA,EAAU,MAAU3jD,OAAS,EAAE,CAChC,IAAM6jD,EAAeF,EAAW5E,MAAMt+C,KAAK,SAAAqjD,GACzC,IAAMC,EAAeD,EAAE7C,KAAKn5C,QAAQ,SAAAs7C,GAElC,IADA,IAAIY,GAAa,EACjB,MAAoBvkD,OAAOskB,OAAOq/B,GAAlC,eAAsC,CAAjC,IAAMtL,EAAK,UACYnhD,IAAvBmhD,EAAK,WACHmM,OAAOnM,EAAK,WAAe9mC,SAAS4wC,KAASoC,GAAa,QAExCrtD,IAApBmhD,EAAK,aAAyDnhD,IAA7BmhD,EAAK,OAAL,OAC/B/8C,KAAKC,UAAU88C,EAAK,OAAL,OAA0B9mC,SAAS4wC,KAASoC,GAAa,GAG/E,OAAOA,KAET,OAAO,2BAAIF,GAAX,IAAc7C,KAAM8C,OAEtBH,EAAM,MAAYC,EAGtB,OAAOD,GAETrpD,qBAAW,WACT,QAAsB5D,IAAnB0iC,EAAO76B,QACR4jD,GAAqB,QAGrB,GADAA,EAAqBlsD,EAAMisD,mBACxBjsD,EAAMisD,wBAAwCxrD,IAAnB0iC,EAAO76B,QACnC,IACE,IAAI0lD,EAAM7qB,EAAO76B,QAAQtI,EAAM+sD,KAAMZ,GACrCG,EAAqBkB,EAAaQ,IACnC,MAAM7tD,GACL+rD,GAAqB,MAK1B,CAAClsD,EAAMisD,oBACV,MAAuB1rC,aAAawrC,GAAY,CAC9C96C,YAAa,eACbC,YAAa,SAAC1O,GACZ,GAAGA,EAAKmjC,uBAAuB77B,OAAS,EACtC,IACoB2O,KAAKjW,EAAKmjC,uBAAuB,GAA5B,QAEvBumB,GAAqB,GACtB,MAAM/rD,GACLgD,EAAahD,MAAMA,EAAMmF,YACzB4mD,GAAqB,QAGnB,GAAG1pD,EAAK0iC,cAAcp7B,OAAS,EAEnC,IACE,IAAImkD,EAAcx1C,KAAKjW,EAAK0iC,cAAc,GAAnB,QACnBgpB,EAAMC,SAAS,uBAAyBF,EAAc,IAAhDE,GACVhrB,EAAO76B,QAAU4lD,EACjBhC,GAAqB,GACrB,IAAI8B,EAAM7qB,EAAO76B,QAAQtI,EAAM+sD,KAAMZ,GACrCG,EAAqBkB,EAAaQ,IACnC,MAAM7tD,GACLgD,EAAahD,MAAMA,EAAMmF,YACzB4mD,GAAqB,QAGvBA,GAAqB,IAGzBz6C,QAAS,SAACjP,GACRK,QAAQC,IAAIN,MA/BT4rD,EAAP,oBAkCA,GAA6B7tC,aAAasrC,GAAuB,CAC/D56C,YAAa,eACbC,YAAa,SAAC1O,GACZ,IAAM6rD,EAAY7rD,EAAKyC,SAASgG,QAAQ,SAACC,EAAMyK,GAC7C,OAAOzK,EAAOyK,EAAI1Q,WACjB,IACGqpD,EAAQ9rD,EAAKyC,SAASgG,QAAQ,SAACC,EAAMyK,GACzC,OAAGA,EAAIxW,GAAK+L,EACHyK,EAAIxW,GAEN+L,IACNqhD,GACHC,EAAkB8B,GAClB7rC,EAAU4rC,GACV,IAAME,EAAgB/rD,EAAKyC,SAASsF,KAAK,SAAA2iD,GAAC,OAAIA,EAAEjoD,YAEhD,GADAmnD,EAAgBmC,GACbtC,QAAwCxrD,IAAnB0iC,EAAO76B,QAC7B,IACE,IAAI0lD,EAAM7qB,EAAO76B,QAAQtI,EAAM+sD,KAAMwB,GACrCjC,EAAqBkB,EAAaQ,IACnC,MAAM7tD,GACL0C,QAAQC,IAAI3C,GACZ+rD,GAAqB,GAIzBQ,EAAgBlqD,EAAKyC,SAAS6E,SACN,KAArB9J,EAAMwuD,YAAqB5B,KAC5BC,GAAmB,GACnB7sD,EAAMyuD,iBAAiBjsD,EAAKksD,mBAAmBC,UAAUvzC,SAG7D3J,QAAS,SAACjP,GACRW,EAAahD,MAAM,mCAAqCqC,MAjCrD+qD,GAAP,qBAoCA,GAA4BhtC,aAAaurC,GAA0B,CACjE76C,YAAa,eACbC,YAAa,SAAC1O,GACZ,IAAM6rD,EAAY7rD,EAAKyC,SAASgG,QAAQ,SAACC,EAAMyK,GAC7C,OAAOzK,EAAOyK,EAAI1Q,WACjB,IACGqpD,EAAQ9rD,EAAKyC,SAASgG,QAAQ,SAACC,EAAMyK,GACzC,OAAGA,EAAIxW,GAAK+L,EACHyK,EAAIxW,GAEN+L,IACNqhD,GACHC,EAAkB8B,GAClB7rC,EAAU4rC,GACV,IAAME,EAAgB/rD,EAAKyC,SAASsF,KAAK,SAAA2iD,GAAC,OAAIA,EAAEjoD,YAEhD,GADAmnD,EAAgBmC,GACbtC,QAAwCxrD,IAAnB0iC,EAAO76B,QAC7B,IACE,IAAI0lD,EAAM7qB,EAAO76B,QAAQtI,EAAM+sD,KAAMwB,GACrCjC,EAAqBkB,EAAaQ,IAEpC,MAAM7tD,GACJ+rD,GAAqB,GACrBrpD,QAAQC,IAAI3C,GAGhBusD,EAAgBlqD,EAAKyC,SAAS6E,QAC9B9J,EAAMyuD,iBAAiB,IAEzBh9C,QAAS,SAACjP,OA7BLosD,GAAP,qBAiCAvqD,qBAAW,gBACe5D,IAArBT,EAAM8gC,YACPstB,EAAa,CAAC17C,UAAW,CAACouB,WAAY9gC,EAAM8gC,WAAY5uB,YAAapO,EAAG3B,KAAKqL,QAASmS,aAAc7b,EAAG3B,KAAKyd,0BAE7G,CAAC5f,EAAM8gC,aACVz8B,qBAAW,WACT,QAAsB5D,IAAnB0iC,EAAO76B,QACR,IACE,IAAI0lD,EAAM7qB,EAAO76B,QAAQtI,EAAM+sD,KAAMZ,GACrCG,EAAqBkB,EAAaQ,IACnC,MAAM7tD,GACL+rD,GAAqB,GACrBrpD,QAAQC,IAAI3C,MAIf,CAACgsD,IACJ9nD,qBAAW,gBACe5D,IAArBT,EAAMwuD,YAAiD,KAArBxuD,EAAMwuD,WACzCjB,GAAmB,CAAC76C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAClD6tD,WAAYhtD,EAAMgtD,WAClB30B,OAAQr4B,EAAMgtD,YAAchtD,EAAM6uD,YAAc,GAChDnD,OAAQ,SAGV6B,GAAmB,CAAC76C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAClD6tD,WAAYhtD,EAAMgtD,WAClB30B,OAAQr4B,EAAMgtD,YAAchtD,EAAM6uD,YAAc,GAChDnD,OAAQ,IAAO1rD,EAAMwuD,WAAa,SAIrC,CAACxuD,EAAM6uD,cACVxqD,qBAAW,gBACe5D,IAArBT,EAAMwuD,YAAiD,KAArBxuD,EAAMwuD,WACzCjB,GAAmB,CAAC76C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAClD6tD,WAAYhtD,EAAMgtD,WAClB30B,OAAQ,EACRqzB,OAAQ,SAGV6B,GAAmB,CAAC76C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAClD6tD,WAAYhtD,EAAMgtD,WAClB30B,OAAQ,EACRqzB,OAAQ,IAAM1rD,EAAMwuD,WAAa,SAGpC,CAACxuD,EAAMwuD,aACVnqD,qBAAW,WACNrE,EAAM4sD,iBACPC,GAAmB,GACnB+B,GAAkB,CAACl8C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAAIusD,OAAQ,IAAM1rD,EAAMwuD,WAAa,SAExFhC,EAAkB,GAClBE,EAAgB,GAChBa,GAAmB,CAAC76C,UAAW,CAACo6C,QAAS9sD,EAAM+sD,KAAK5tD,GAAI6tD,WAAYhtD,EAAMgtD,WAAY30B,OAAQ,EAAGqzB,OAAQ,IAAM1rD,EAAMwuD,WAAa,UAEnI,CAACxuD,EAAM4sD,kBACV,IAAMkC,GAAiBhtD,IAAM0yB,aAAa,WACxCx0B,EAAM8uD,eAAepD,KACpB,CAACA,IAEN,OACE,eAAC,IAAMrkD,SAAP,WACGrH,EAAM+uD,cACL,cAAC,EAAD,CAAiB9uD,MAAOyrD,EAAQzqD,WAAS,EAACP,QAASouD,GAAgBjvD,SAAU,SAACy9C,EAAExvB,EAAElvB,GAAL,OAAW+tD,EAAU7+B,IAAI/sB,YAAY,6BAA6BhB,KAAK,YAClJ2B,WAAY,CACVs0B,aACA,cAAC,IAAM3uB,SAAP,UACI,cAACygC,GAAA,EAAD,CAASvgC,MAAM,SAAf,SACI,cAAC8G,EAAA,EAAD,CAAY9H,QAASuoD,GAArB,SAAqC,cAAC,KAAD,CAAYnuD,MAAO,CAAC2F,MAAO+I,EAAM4N,QAAQxZ,KAAKkM,cAG3FhP,MAAO,CAACjB,QAAS,MAIvB,qBAAKiB,MAAO,CAAC6nB,SAAU,OAAQ9f,SAAU,OAAQ9H,MAAO,QAAxD,SACGqrD,GAAqBI,EACpB,eAAC,IAAMhlD,SAAP,YACsB,OAAjBglD,QAAiB,IAAjBA,GAAA,UAAAA,EAAmB2C,kBAAnB,eAA+BzkD,KAAK,SAAC0kD,EAAKxkD,GAAN,OACjC,cAAC,GAAD,eAAsFwkD,GAAtD,aAAexkD,EAAQ,UAAYzK,EAAM+sD,KAAK5tD,SAC1E,MAEU,OAAjBktD,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBnV,YAClB,cAAC,GAAD,CAA0BA,UAAWmV,EAAiB,aAEtC,OAAjBA,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBxD,aAAnB,eAA0Bt+C,KAAK,SAACs+C,EAAOp+C,GAAR,OAC5B,cAAC,GAAD,CAAsB2wC,YAAap7C,EAAM+sD,KAAK3R,YAAayN,MAAOA,GAAY,eAAiB7oD,EAAM+sD,KAAK5tD,GAAK,QAAUsL,QACrH,MAEU,OAAjB4hD,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBp9B,gBAAnB,eAA6B1kB,KAAK,SAAC2kD,EAAIzkD,GAAL,OAC/B,cAAC,GAAD,CAAyBwkB,SAAUigC,GAAS,WAAazkD,EAAQ,UAAYzK,EAAM+sD,KAAK5tD,SACpF,MAEU,OAAjBktD,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBX,cAAnB,eAA2BnhD,KAAK,SAAC4kD,EAAG1kD,GAAJ,OAC7B,cAAC,GAAD,CAAuBihD,OAAQyD,GAAQ,aAAe1kD,EAAQ,UAAYzK,EAAM+sD,KAAK5tD,SACnF,QAIV,cAAC,GAAD,CAA0B+3C,UAAW1qC,U,qBClWzC4iD,GAAwBh/C,aAAH,oPAWrBi/C,GAAkBj/C,aAAH,iLAYd,SAASk/C,GAAkBtvD,GAC9B,MAA8BgE,mBAAS,IAAvC,mBAAO6E,EAAP,KAAgBC,EAAhB,KACA,EAA2BkI,aAASq+C,GAAiB,CACjD38C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,SAC3B57C,YAAa,SAAA1O,GACTsG,EAAWtG,EAAK+sD,WAAW1mD,UAE/BoI,YAAa,iBALTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAOjB,EAAwBiR,aAAYg+C,GAAuB,CACvD7sC,OAAQ,SAACC,EAAD,GAAmB,EAAVhgB,QADdgtD,EAAP,oBAKA,GAAIt8C,EACH,OAAO,cAACC,GAAA,EAAD,IAER,GAAIhT,EAEH,OADA0C,QAAQ1C,MAAMA,GACP,yCAER,IAAM4I,EAAiB,WACnBymD,EAAc,CAAC98C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,QAASjkD,QAASA,KAC5D7I,EAAMgI,WAMZ,OACE,eAAC,IAAMX,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,+BACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBxG,WAAS,EAACP,QAASqI,EAAgBlJ,SAR3C,SAACE,EAAME,EAAOE,GAC3B2I,EAAW7I,IAOiEA,MAAO4I,MAEnF,eAACjB,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQE,QAASwC,EAAgB7H,QAAQ,YAAYoF,MAAM,YAA3D,0B,wCC9CJmpD,GAAqBr/C,aAAH,oKAOlBs/C,GAAwBt/C,aAAH,oIAOrBu/C,GAAmBv/C,aAAH,yKAShBqD,GAAYC,cAAW,SAACrE,GAAD,MAAY,CACvC/P,KAAM,CACJqI,OAAQ,QAEV4gB,MAAO,CACL3nB,MAAO,IACPsF,OAAQ,IACRsiB,SAAU,QAEZC,OAAQ,CACN9gB,OAAQ0H,EAAM6R,QAAQ,GAAK,QAI/B,SAASwJ,GAAIvK,EAAGC,GACd,OAAOD,EAAEvO,QAAO,SAAC3R,GAAD,OAAiC,IAAtBmgB,EAAE4K,QAAQ/qB,MAGvC,SAASqqB,GAAanK,EAAGC,GACvB,OAAOD,EAAEvO,QAAO,SAAC3R,GAAD,OAAiC,IAAtBmgB,EAAE4K,QAAQ/qB,MAGhC,SAAS2vD,GAAc5vD,GAC1B,MAA4BgE,mBAAS,IAArC,mBAAO6rD,EAAP,KAAeC,EAAf,KACMhsD,EAAKC,YAAe/B,GAC1B,EAA2BgP,aAAS2+C,GAAkB,CAClDj9C,UAAW,CAACiN,aAAc7b,EAAG3B,KAAKyd,sBAClC1O,YAAa,SAAA1O,GACX,IAAMutD,EAAcvtD,EAAKwtD,QAAQ/kD,QAAQ,SAACC,EAAMyK,GAC9C,OAAGA,EAAIm3C,UAAY9sD,EAAM8sD,QACjB,GAAN,mBAAW5hD,GAAX,CAAiByK,IAEV,YAAIzK,KAEZ,IACG+kD,EAAUztD,EAAKwtD,QAAQ/kD,QAAQ,SAACC,EAAMyK,GAC1C,OAAGzK,EAAKyf,MAAM,SAAAhgB,GAAO,OAAIA,EAAQopB,MAAQpe,EAAIoe,QAAQg8B,EAAYplC,MAAM,SAAAhgB,GAAO,OAAIA,EAAQopB,MAAQpe,EAAIoe,OAC7F,YAAI7oB,GAEL,GAAN,mBAAWA,GAAX,CAAiByK,MAElB,IAEHuU,EAAQ+lC,GACR7lC,EAAS2lC,GACTG,EAAgB,YAAIH,KAEtB9+C,YAAa,iBAtBTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAwBjB,EAAqBiR,aAAYq+C,GAAoB,CACjDltC,OAAQ,SAACC,EAAD,GAAmB,EAAVhgB,QADd2tD,EAAP,oBAKA,EAAwB/+C,aAAYs+C,GAAuB,CACzDntC,OAAQ,SAACC,EAAD,GAAmB,EAAVhgB,QADZ4tD,EAAP,oBAKMn7C,EAAUxB,KAChB,EAA8B3R,IAAMkC,SAAS,IAA7C,mBAAO4J,EAAP,KAAgBqc,EAAhB,KACA,EAAwBnoB,IAAMkC,SAAS,IAAvC,mBAAOyQ,EAAP,KAAayV,EAAb,KACA,EAA0BpoB,IAAMkC,SAAS,IAAzC,mBAAOmmB,EAAP,KAAcC,EAAd,KACA,EAAwCtoB,IAAMkC,SAAS,IAAvD,mBAAOqsD,EAAP,KAAqBH,EAArB,KACM7lC,EAAcC,GAAa1c,EAAS6G,GACpC8V,EAAeD,GAAa1c,EAASuc,GAErCS,EAAe,SAAC3qB,GAAD,OAAW,WAC9B,IAAM4qB,EAAejd,EAAQod,QAAQ/qB,GAC/BgrB,EAAU,YAAOrd,IAED,IAAlBid,EACFI,EAAWthB,KAAK1J,GAEhBgrB,EAAWC,OAAOL,EAAc,GAGlCZ,EAAWgB,KAyBPM,EAAa,SAAChkB,EAAOikB,GAAR,OACjB,cAACzhB,EAAA,EAAD,CAAOK,UAAW6K,EAAQsT,MAAO5nB,MAAO,CAACC,MAAM,QAA/C,SACE,eAACoV,GAAA,EAAD,WACE,cAACyV,GAAA,EAAD,CACErhB,UAAW6K,EAAQyW,WACnBnkB,MAAOA,IAET,cAACokB,GAAA,EAAD,IACA,eAACC,GAAA,EAAD,CAAMC,OAAK,EAAC1hB,UAAU,MAAM6Z,KAAK,OAAOrjB,MAAO,CAACjB,QAAQ,GAAxD,UACG8rB,EAAMjhB,KAAI,SAACtK,GACV,IAAM8rB,EAAO,6BAAyB9rB,EAAMd,GAA/B,UACb,OACE,eAAC6sB,GAAA,EAAD,CAAUrrB,MAAO,CAACjB,QAAQ,GAAmBskB,KAAK,WAAWyE,QAAM,EAACliB,QAASqkB,EAAa3qB,GAA1F,UACE,cAACgsB,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CACEte,SAAqC,IAA5BA,EAAQod,QAAQ/qB,GACzBksB,UAAW,EACXC,eAAa,EACbte,WAAY,CAAE,kBAAmBie,OAGrC,cAACM,GAAA,EAAD,CAAcltB,GAAI4sB,EAAS7O,QAASjd,EAAM8zB,QATT9zB,EAAMd,OAa7C,cAAC6sB,GAAA,EAAD,aAKR,GAAI9Y,EACH,OAAO,cAACC,GAAA,EAAD,IAER,GAAIhT,EAEH,OADA0C,QAAQ1C,MAAMA,GACP,yCAmCV,OACE,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,4BACA,eAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,UACA,eAAC8V,GAAA,EAAD,CAAMC,WAAS,EAAC0D,QAAS,EAAGzD,QAAQ,SAAS5G,WAAW,SAASzM,UAAW6K,EAAQ3V,KAApF,UACE,cAACie,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SAAmBmK,EAAW,2BAA4B9W,KAC1D,cAAC8I,GAAA,EAAD,CAAM4D,MAAI,EAAV,SACE,eAAC5D,GAAA,EAAD,CAAMC,WAAS,EAAC8O,UAAU,SAASzV,WAAW,SAA9C,UACE,cAACxQ,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QAxGW,WACrB6jB,EAASD,EAAMoC,OAAO9X,IACtByV,EAAQ,KAuGE/oB,SAA0B,IAAhBsT,EAAK3K,OACf,aAAW,iBANb,oBAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QA7Ge,WACzB6jB,EAASD,EAAMoC,OAAOlC,IACtBH,EAAQQ,GAAIjW,EAAM4V,IAClBJ,EAAWS,GAAI9c,EAASyc,KA2GdlpB,SAAiC,IAAvBkpB,EAAYvgB,OACtB,aAAW,sBANb,eAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QAjHc,WACxB2jB,EAAQzV,EAAK8X,OAAOhC,IACpBH,EAASM,GAAIP,EAAOI,IACpBN,EAAWS,GAAI9c,EAAS2c,KA+GdppB,SAAkC,IAAxBopB,EAAazgB,OACvB,aAAW,qBANb,eAUA,cAACzD,EAAA,EAAD,CACEnF,QAAQ,WACR0F,KAAK,QACLwD,UAAW6K,EAAQwT,OACnBliB,QArHU,WACpB2jB,EAAQzV,EAAK8X,OAAOpC,IACpBC,EAAS,KAoHCjpB,SAA2B,IAAjBgpB,EAAMrgB,OAChB,aAAW,gBANb,yBAYJ,cAACyT,GAAA,EAAD,CAAM4D,MAAI,EAACC,GAAI,EAAf,SAAmBmK,EAAW,uBAAwBpB,QAExD,cAAC,EAAD,CAAiBlpB,WAAS,EAACO,WAAW,EAAOzB,KAAK,iBAAiBF,SArFtD,SAACE,EAAME,EAAOE,GAC3B2vD,EAAU7vD,IAoF6EA,MAAO4vD,EAAQlvD,MAAO,CAAC6E,QAAQ,gBACpH9D,WAAY,CACFs0B,aACA,cAAC,IAAM3uB,SAAP,UACA,cAACgH,EAAA,EAAD,CAAY1N,MAAO,CAAC2F,MAAO8+B,GAASnoB,QAAQ7Z,QAAQuM,MAAOzO,QAAQ,YAAYqF,QAtF7E,WACZ4jB,EAAMQ,MAAK,SAAAhgB,GAAO,OAAIA,EAAQopB,MAAQ87B,MAAYp7C,EAAKkW,MAAK,SAAAhgB,GAAO,OAAIA,EAAQopB,MAAQ87B,MAC3E,KAAXA,GACDzlC,EAAS,GAAD,mBAAKD,GAAL,CAAY,CAAC4J,IAAK87B,EAAQ1wD,GAAI,EAAG2tD,QAAS,MAGtDgD,EAAU,KAgFI,SAAmG,cAAC,KAAD,cAI/G,eAACloD,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,mBAGA,cAACD,EAAA,EAAD,CAAQE,QAtFO,WAEnB8pD,EAAatiC,SAAS,SAACgG,GAGjB5J,EAAMQ,MAAK,SAAAhgB,GAAO,OAAIA,EAAQxL,KAAO40B,EAAI50B,OAC3CixD,EAAc,CAAC19C,UAAW,CAAC49C,WAAYv8B,EAAI50B,SAG/CgrB,EAAM4D,SAAS,SAACgG,GAGVs8B,EAAa1lC,MAAK,SAAAhgB,GAAO,OAAIA,EAAQxL,KAAO40B,EAAI50B,OAClDgxD,EAAW,CAACz9C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,QAAS/4B,IAAKA,EAAIA,UAG/C,KAAX87B,GACDM,EAAW,CAACz9C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,QAAS/4B,IAAK87B,KAEvD1sD,EAAaC,QAAQ,gBACrBpD,EAAMgI,WAkE6B9G,QAAQ,YAAYoF,MAAM,YAAzD,0BClRV,I,GAAMiqD,GAA6BngD,aAAH,mKAQ1BogD,GAAgBpgD,aAAH,6bAwBZ,SAASqgD,GAAgBzwD,GAC5B,MAAwCgE,mBAAS,IAAjD,mBAAO0sD,EAAP,KAAqBC,EAArB,KACA,EAAkC3sD,mBAAS,IAA3C,mBAAO4sD,EAAP,KAAkBC,EAAlB,KACQjtD,EAAoBV,cAApBU,gBACR,EAA2BoN,aAASw/C,GAAe,CAC/C99C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,SAC3B57C,YAAa,SAAA1O,GACT,IAAImzB,EAAU,yBACd9yB,QAAQC,IAAIN,GACiC,OAA1CA,EAAK+sD,WAAWuB,wBACfn7B,GAAW,iBAAmBnzB,EAAK+sD,WAAWuB,sBAAsB7sD,SAAW,KAEnF0xB,GAAW,QAAUnzB,EAAK+sD,WAAWwB,kBAAoB,KACtDvuD,EAAK+sD,WAAWyB,qBACfr7B,GAAW,4BACmC,OAA3CnzB,EAAK+sD,WAAW0B,yBACft7B,GAAW,iBAAmBnzB,EAAK+sD,WAAW0B,uBAAuBhtD,SAAW,KAEpF0xB,GAAW,QAAUnzB,EAAK+sD,WAAW2B,mBAAqB,MAG9DL,EAAaruD,EAAK+sD,YAClBoB,EAAgBh7B,IAEpB1kB,YAAa,iBApBTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAsBjB,EAA6BiR,aAAYm/C,GAA4B,CACjEhuC,OAAQ,SAACC,EAAD,GAAoB,IAAXhgB,EAAU,EAAVA,KACyB,YAAnCA,EAAK2uD,mBAAmBl/C,OACvBrO,EAAgB,gCAAiC,CAAC1C,QAAS,YAE3D0C,EAAgBpB,EAAK2uD,mBAAmBhxD,MAAO,CAACe,QAAS,eAL9DkwD,EAAP,oBASA,GAAIl+C,EACH,OAAO,cAACC,GAAA,EAAD,IAER,GAAIhT,EAEH,OADA0C,QAAQ1C,MAAMA,GACP,yCAQV,OACE,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,kCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBjG,WAAW,EAAM3B,SAAU,aAAQI,MAAOywD,MAE/D,eAAC9oD,GAAA,EAAD,WACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,oBAGkC,IAAhCsqD,EAAUS,oBAA+BT,EAAUU,qBAAyD,IAAjCV,EAAUI,qBAAgCJ,EAAUW,oBAE/H,cAAClrD,EAAA,EAAD,CAAQE,QAlBQ,WACrB1D,QAAQC,IAAI9C,EAAM8sD,SACjBsE,EAAmB,CAAC1+C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,WAC/C9sD,EAAMgI,WAegC9G,QAAQ,YAAYoF,MAAM,YAA5D,mCACG,WC9Ff,I,GAAMkrD,GAAqBphD,aAAH,8NAajB,SAASqhD,GAAyBzxD,GACrC,MAA8BgE,mBAAS,IAAvC,mBAAO6E,EAAP,KAAgBC,EAAhB,KACA,EAA2BkI,aAASwgD,GAAoB,CACpD9+C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,SAC3B57C,YAAa,SAAA1O,GACT,IAAIkvD,EAAiB,yBAA2BlvD,EAAK+sD,WAAWoC,gBAChED,GAAkB,0BAA4BlvD,EAAK+sD,WAAWznC,OAC9D4pC,GAAkB,4BAA8BlvD,EAAK+sD,WAAWqC,eAChEF,GAAkB,0BAA4BlvD,EAAK+sD,WAAWxK,iBAC9D2M,GAAkB,yBAA2BlvD,EAAK+sD,WAAW/O,qBAC7D13C,EAAW4oD,IAEfzgD,YAAa,iBAVTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAYjB,OAAI+S,EACI,cAACC,GAAA,EAAD,IAEJhT,GACH0C,QAAQ1C,MAAMA,GACP,0CAGR,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,kCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBjG,WAAW,EAAMvB,MAAO4I,EAAShJ,SAAU,iBAEhE,cAAC+H,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,wBCzCV,IAAMkrD,GAAqBphD,aAAH,iJAUjB,SAASyhD,GAA2B7xD,GACvC,MAA8BgE,mBAAS,IAAvC,mBAAO6E,EAAP,KAAgBC,EAAhB,KACA,EAA2BkI,aAASwgD,GAAoB,CACpD9+C,UAAW,CAACo6C,QAAS9sD,EAAM8sD,SAC3B57C,YAAa,SAAA1O,GACTsG,EAAW,cAAgBtG,EAAK+sD,WAAWuC,OAAS,gBAAmBtvD,EAAK+sD,WAAWwC,SAE3F9gD,YAAa,iBALTiC,EAAR,EAAQA,QAAS/S,EAAjB,EAAiBA,MAOjB,OAAI+S,EACI,cAACC,GAAA,EAAD,IAEJhT,GACH0C,QAAQ1C,MAAMA,GACP,0CAGR,eAAC,IAAMkH,SAAP,WACI,cAACC,GAAA,EAAD,CAAanI,GAAG,oBAAhB,qCACA,cAACqI,GAAA,EAAD,CAAeC,UAAU,EAAzB,SACI,cAAC,EAAD,CAAiBjG,WAAW,EAAMvB,MAAO4I,EAAShJ,SAAU,iBAEhE,cAAC+H,GAAA,EAAD,UACE,cAACvB,EAAA,EAAD,CAAQE,QAASvG,EAAMgI,QAAS9G,QAAQ,YAAYoF,MAAM,UAA1D,wB,8FCzBG0rD,GAAuB5hD,aAAH,iwEA0H3B6hD,GAAe7hD,aAAH,uIAChB4hD,IAQK,SAASE,GAAgBlyD,GAC5B,IAAMqP,EAAQC,eACd,EAAkCtL,mBAAS,IAA3C,mBAAOmuD,EAAP,KAAkBC,EAAlB,KACA,EAAgDpuD,mBAAS,IAAzD,mBAAOquD,EAAP,KAAyBC,EAAzB,KACA,EAAoDtuD,mBAAS,IAA7D,mBAAOuuD,EAAP,KAA2BC,EAA3B,KACMC,EAAY,CACd,UACA,eACA,qBACA,kBACA,QACA,mBACA,2BACA,kBACA,cACA,sBACA,qBACA,iBACA,eACA,eACA,cACA,iBACA,wBACA,eACA,WACA,gBACA,gBACA,iBACA,WACA,QACA,WACA,gBACA,uBACA,oBACA,aACA,SACA,SACA,uBACA,kBACA,qBACA,UACA,iBACA,oBACA,WACA,cACA,gBACA,eACA,YACA,WACA,2BACA,kBACA,aACA,OACA,iBACA,SACA,SACA,aACA,SACA,QACA,kBACA,kBACA,cACA,wBACA,eACA,mBACA,aACA,yBACA,mBACA,aACA,kCACA,yBACA,iBACA,sBACA,gCACA,eACA,OACA,qBACA,qBACA,YACA,SACA,WACA,UACA,YACA,aACA,WACA,OACA,sBACA,wBACA,wBACA,kBACA,WAEEC,EAAmB,CACvB,UACA,WACA,cACA,YACA,YACA,MACA,YACA,cACA,gBACA,MACA,YACA,sBACA,kBACA,6CACA,cACA,cACA,gBACA,qBACA,aACA,cACA,kBACA,oBACA,qBACA,WAEIC,EAA4B,CAChC,OACA,WAiDJ,OA/CE3hD,aAASihD,GAAc,CACnBv/C,UAAW,CAACoyC,SAAU9kD,EAAM8kD,UAC5B5zC,YAAa,SAAA1O,GACT,GAAwB,OAArBA,EAAKowD,YAAqB,CACzBR,EAAa5vD,EAAKowD,aAClB,IAAMC,EAAmBJ,EAAUxnD,QAAQ,SAACC,EAAM1K,GAChD,YAA6BC,IAA1B+B,EAAKowD,YAAYpyD,IAAgD,OAA1BgC,EAAKowD,YAAYpyD,IAA2C,KAA1BgC,EAAKowD,YAAYpyD,GACrF,GAAN,mBAAW0K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","file":"static/js/main.01aeb8f5.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 770;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {TextField} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nconst ValidationTextField = withStyles({\n      root: {\n        '& input:valid + fieldset': {\n          borderColor: 'grey',\n          borderWidth: 1,\n        },\n        '& input:invalid + fieldset': {\n          borderColor: 'red',\n          borderWidth: 2,\n        },\n        '& input:valid:focus + fieldset': {\n          borderLeftWidth: 6,\n          padding: '4px !important', // override inline-style\n        },\n      },\n    })(TextField);\n\nclass MythicTextField extends React.Component {\n    \n    static propTypes = {\n        placeholder: PropTypes.string,\n        name: PropTypes.string,\n        validate: PropTypes.func,\n        width: PropTypes.number,\n        onChange: PropTypes.func.isRequired,\n        requiredValue: PropTypes.bool,\n        type: PropTypes.string,\n        onEnter: PropTypes.func,\n        autoFocus: PropTypes.bool\n    }\n    onChange = evt => {\n        const name = this.props.name;\n        const value = evt.target.value;\n        const error = this.props.validate ? this.props.validate(value) : false;\n        this.props.onChange(name, value, error);\n    }\n    checkError = () => {\n        return this.props.validate ? this.props.validate(this.props.value) : false\n    }\n    onKeyPress = (event) => {\n      if(event.key === \"Enter\"){\n        if(this.props.onEnter !== undefined){\n          this.props.onEnter();\n        }\n      }else{\n        this.onChange(event);\n      }\n    }\n    render(){\n        return (\n            <div style={{width:  this.props.width ? this.props.width + \"rem\" : \"100%\"}}>\n                <ValidationTextField \n                    fullWidth={true} \n                    placeholder={this.props.placeholder} \n                    value={this.props.value} \n                    onChange={this.onChange}\n                    onKeyPress={this.onKeyPress} \n                    label={this.props.name} \n                    autoFocus={this.props.autoFocus ? true : false}\n                    variant=\"outlined\" \n                    disabled={this.props.disabled === undefined ? false : this.props.disabled}\n                    required={this.props.requiredValue ? this.props.requiredValue : false} \n                    InputLabelProps={this.props.inputLabelProps}\n                    multiline={this.props.multiline ? this.props.multiline : false}\n                    error={this.checkError()} \n                    type={this.props.type === undefined ? \"text\" : this.props.type}\n                    InputProps={this.props.InputProps}\n                    helperText={this.checkError() ? this.props.errorText : this.props.helperText}\n                    style={{\n                        padding:0,\n                        marginBottom: this.props.marginBottom ? this.props.marginBottom : \"10px\"\n                    }}/>\n            </div>\n        )\n    }\n}\nexport default MythicTextField;\n","export default __webpack_public_path__ + \"static/media/mythic.7189479f.svg\";","import { makeVar } from '@apollo/client';\n\nexport const meState = makeVar({loggedIn:false, user: null, access_token: null, refresh_token: null});\nexport const menuOpen = makeVar(false);\n\n\nexport const successfulLogin = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    localStorage.setItem(\"refresh_token\", data.refresh_token);\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\n    meState({\n        loggedIn: true,\n        ...data\n    });\n}\nexport const successfulRefresh = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    meState({\n        loggedIn: true,\n        access_token: localStorage.getItem(\"access_token\"),\n        ...meState()\n    });\n}\nexport const FailedRefresh = () =>{\n    console.log(\"failed refresh\");\n    localStorage.removeItem(\"access_token\");\n    localStorage.removeItem(\"refresh_token\");\n    localStorage.removeItem(\"user\");\n    meState({\n        loggedIn: false,\n        access_token: null,\n        refresh_token: null,\n        user: null\n    });\n}\n\n","import { useSnackbar } from 'notistack'\n\nlet useSnackbarRef = null;\n\nexport const SnackbarUtilsConfigurator = () => {\n  useSnackbarRef = useSnackbar();\n\n  return null;\n};\n\nexport const snackActions = {\n  success(msg, options) {\n    this.toast(msg, 'success', options)\n  },\n  warning(msg, options) {\n    this.toast(msg, 'warning', options)\n  },\n  info(msg, options) {\n    this.toast(msg, 'info', options)\n  },\n  error(msg, options) {\n    this.toast(msg, 'error', options)\n  },\n  dismiss(){\n    useSnackbarRef.closeSnackbar();\n  },\n  toast(msg, variant = 'default', options) {\n    useSnackbarRef.enqueueSnackbar(msg, { variant, ...options })\n  }\n}\n","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport logo from '../../../assets/mythic.svg';\nimport { Redirect } from 'react-router-dom';\nimport { meState, successfulLogin, FailedRefresh } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {restartWebsockets, isJWTValid} from '../../../index';\nimport { snackActions } from '../../utilities/Snackbar';\n\nexport function LoginForm(props){\n    const me = useReactiveVar(meState);\n    const [username, setUsername] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    useEffect( () => {\n        if(!isJWTValid()){\n            console.log(\"calling FailedRefresh on the login page to remove old data\");\n            FailedRefresh();\n        }else{\n            //console.log(meState());\n        }\n    }, [])\n    const submit = e => {\n        e.preventDefault();\n        if( username === \"\" || password === \"\"){\n            snackActions.warning(\"Username and Password required\");\n            return;\n        }\n        const requestOptions = {\n            method: \"POST\",\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({username, password})\n        };\n        fetch('/auth', requestOptions).then((response) => {\n            response.json().then(data => {\n                console.log(data)\n                if(\"access_token\" in data){\n                    successfulLogin(data);\n                    restartWebsockets();\n                }else{\n                    snackActions.warning(\"Invalid Username or Password\");\n                    console.log(\"Error\", data);\n                }\n            }).catch(error => {\n                snackActions.warning(\"Error getting JSON from server\");\n                console.log(\"Error trying to get json response\", error.toString());\n            });\n        }).catch(error => {\n            snackActions.warning(\"Error talking to server\");\n            console.log(\"There was an error!\", error.toString());\n        });\n    }\n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordChange = (name, value, error) => {\n        setPassword(value);\n    }\n    const redirectPath = () => {\n        const locationState = props.location.state;\n        return locationState && locationState.from ? locationState.from.pathname : '/new/';\n    }\n    return (\n        <div style={{justifyContent: \"center\", display: \"flex\"}}>\n        { \n            me.loggedIn ?\n                (\n                    <Redirect to={redirectPath()}/>\n                )\n               : (\n                    <div>\n                    <img src={logo} height=\"400px\" alt=\"Mythic logo\"/>\n                        <form onSubmit={submit}>\n                            <MythicTextField name='username' value={username} onChange={onUsernameChange} width={30} />\n                            <MythicTextField name='password' type=\"password\" value={password} onChange={onPasswordChange} width={30} />\n                            <Button type=\"submit\" color=\"primary\" onClick={submit} variant=\"contained\" style={{marginRight: \"10px\"}}>Login</Button>\n                        </form>\n                    </div>\n                )\n        }\n        </div>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nexport function APITokenRow(props){\n    \n    return (\n            <TableRow key={\"apitokenRow\" + props.id}>\n                <TableCell><Button size=\"small\" onClick={() => {props.onDeleteAPIToken(props.id)}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button></TableCell>\n                <TableCell>{props.token_value}</TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function SettingsOperatorDialog(props) {\n    const [username, setUsername] = React.useState(props.username ? props.username : \"\");\n    const [passwordOld, setPasswordOld] = React.useState(\"\");\n    const [passwordNew, setPasswordNew] = React.useState(\"\");\n    \n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordOldChange = (name, value, error) => {\n        setPasswordOld(value);\n    }\n    const onPasswordNewChange = (name, value, error) => {\n        setPasswordNew(value);\n    }\n    const onAccept = () =>{\n        props.onAccept(props.id, username, passwordOld, passwordNew);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            Use this dialog to update some information about an operator.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            placeholder={props.username}\n            value={username}\n            onChange={onUsernameChange}\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordOld\"\n            onChange={onPasswordOldChange}\n            name=\"old password\"\n            type=\"password\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordNew\"\n            onChange={onPasswordNewChange}\n            name=\"new password\"\n            type=\"password\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"primary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n\nexport function SettingsOperatorDeleteDialog(props) {\n    const onAccept = () =>{\n        props.onAccept(props.id);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Delete Operator</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This deletes an operator and prevents them from permanently logging in again. If you want a temporary solution, disable the operator instead.\n          </DialogContentText>\n          <DialogContentText>\n            Are you sure you want to delete operator \"{props.username}\"?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Delete\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from './MythicTextField';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function MythicDialog(props) {\n  const descriptionElementRef = React.useRef(null);\n  React.useEffect(() => {\n    if (props.open) {\n      const { current: descriptionElement } = descriptionElementRef;\n      if (descriptionElement !== null) {\n        descriptionElement.focus();\n      }\n    }\n  }, [props.open]);\n\n  return (\n      <Dialog\n        open={props.open}\n        onClose={props.onClose}\n        scroll=\"paper\"\n        maxWidth={props.maxWidth}\n        fullWidth={props.fullWidth}\n        aria-labelledby=\"scroll-dialog-title\"\n        aria-describedby=\"scroll-dialog-description\"\n      >\n        {props.innerDialog}\n      </Dialog>\n  );\n}\n\nexport function MythicModifyStringDialog(props) {\n  const [comment, setComment] = React.useState(\"\");\n    const onCommitSubmit = () => {\n        props.onSubmit(comment);\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n    useEffect( () => {\n      setComment(props.value);\n    }, [props.value]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewJSONAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n  const [tableType, setTableType] = React.useState(\"dictionary\");\n  const [headers, setHeaders] = React.useState([]);\n    useEffect( () => {\n      let permissions = [];\n      try{\n        let permissionDict;\n        if(props.value.constructor === Object){\n          permissionDict = props.value;\n        }else{\n          permissionDict = JSON.parse(props.value);\n        } \n        \n        if(permissionDict.constructor === Object){\n          for(let key in permissionDict){\n            if(permissionDict[key].constructor === Object || Array.isArray(permissionDict[key])){\n              permissions.push({\"name\": key, \"value\": JSON.stringify(permissionDict[key], null, 2)});\n            }else{\n              permissions.push({\"name\": key, \"value\": permissionDict[key]});\n            }\n            \n            setHeaders([props.leftColumn, props.rightColumn]);\n          }\n        }else{\n          setTableType(\"array\");\n          if(permissionDict.length > 0){\n            setHeaders(Object.keys(permissionDict[0]));\n            permissions = permissionDict;\n          }else{\n            setHeaders([]);\n          }\n        }\n      }catch(error){\n        console.log(error);\n      }\n      setComment(permissions);\n    }, [props.value, props.leftColumn, props.rightColumn]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          {headers.map( (header, index) => (\n                            <TableCell key={'header' + index}>{header}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {tableType === \"dictionary\" ? (\n                      comment.map( (element, index) => (\n                        <TableRow key={'row' + index} hover>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell style={{wordBreak: \"break-all\", whiteSpace: \"pre-wrap\"}}>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))\n                    ) : (\n                      comment.map( (row, index) => (\n                        <TableRow key={'row' + index} hover>\n                            {Object.keys(row).map( (key) => (\n                              <TableCell key={\"row\" + index + \"cell\" + key}>{row[key]}</TableCell>\n                            ))}\n                        </TableRow>\n                      ))\n                    ) }\n                    \n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewObjectPropertiesAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n    useEffect( () => {\n        const permissions = props.keys.reduce( (prev, key) => {\n          if(props.value[key] !== undefined && props.value[key] !== null && props.value[key] !== \"\"){\n            return [...prev, {\"name\": key, \"value\": props.value[key]}]\n          }\n          else{\n            return [...prev];\n          }\n        }, []);\n\n      setComment(permissions);\n    }, [props.value, props.keys]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell>{props.leftColumn}</TableCell>\n                          <TableCell>{props.rightColumn}</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {comment.map( (element, index) => (\n                      <TableRow key={'row' + index}>\n                        <TableCell>{element.name}</TableCell>\n                        <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import {useEffect, useRef } from 'react';\n\nexport function toLocalTime(date, view_utc_time) {\n    try {\n        if(date === null){\n            return \"N/A\";\n        }\n        let init_date = new Date(date);\n        if (view_utc_time) {\n            return date + \" UTC\";\n        }\n        return init_date.toDateString() + \" \" + init_date.toTimeString().substring(0, 8);\n    } catch (error) {\n        console.log(\"warning\", \"Failed to get local time converted: \" + error.toString());\n    }\n\n}\n\nexport function getTimeDifference(checkin_time) {\n    let date = new Date();\n    let now = date.getTime() + date.getTimezoneOffset() * 60000;\n    let millisec = Math.abs(now - (new Date(checkin_time).getTime()));\n    let seconds = Math.trunc(((millisec / 1000)) % 60);\n    let minutes = Math.trunc(((millisec / (1000 * 60))) % 60);\n    let hours = Math.trunc(((millisec / (1000 * 60 * 60))) % 24);\n    let days = Math.trunc(((millisec / (1000 * 60 * 60 * 24))) % 365);\n    let output = \"\";\n    if(days !== 0){ output += days + \"d\";}\n    if(hours !== 0){ output += hours + \"h\";}\n    if(minutes !== 0){ output += minutes + \"m\";}\n    output += seconds + \"s\";\n    return output;\n}\n//https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n\n    let id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { APITokenRow } from './SettingsOperatorAPIToken';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { SettingsOperatorDeleteDialog } from './SettingsOperatorDeleteDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nexport function SettingsOperator(props){\n    const [open, setOpen] = React.useState(false);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const onViewUTCChanged = (evt) => {\n        const {id} = props;\n        props.onViewUTCChanged(id, !props[evt.target.name]);\n    }\n    const onAdminChanged = (evt) => {\n        const {id} = props;\n        props.onAdminChanged(id, !props[evt.target.name]);\n    }\n    const onActiveChanged = (evt) => {\n        const {id} = props;\n        props.onActiveChanged(id, !props[evt.target.name]);\n    }\n    const onAccept = (id, username, passwordOld, passwordNew) => {\n        if(username !== props.username){\n          props.onUsernameChanged(id, username);\n        }\n        if(passwordNew.length > 0){\n          props.onPasswordChanged({user_id: id, old_password: passwordOld, new_password: passwordNew})\n        }\n        setOpenUpdateDialog(false);\n    }\n    const onAcceptDelete = (id) => {\n        props.onDeleteOperator(id);\n        setOpenDeleteDialog(false);\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id}>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button>\n                    <MythicDialog open={openDelete} \n                        onClose={()=>{setOpenDeleteDialog(false);}} \n                        innerDialog={<SettingsOperatorDeleteDialog onClose={()=>{setOpenDeleteDialog(false);}}  onAccept={onAcceptDelete} {...props} />}\n                     />\n                </TableCell>\n                <TableCell>{props.username}</TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Update</Button>\n                    <MythicDialog open={openUpdate} \n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<SettingsOperatorDialog onAccept={onAccept} handleClose={()=>{setOpenUpdateDialog(false);}} title=\"Update Operator\"  {...props}/>}\n                     />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.view_utc_time}\n                        onChange={onViewUTCChanged}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"view_utc_time\"\n                      />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onActiveChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />\n                </TableCell>\n                <TableCell>{toLocalTime(props.last_login, me.user.view_utc_time)}</TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.admin}\n                        onChange={onAdminChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"admin\"\n                      />\n                </TableCell>\n                <TableCell>\n                  {props.id === me.user.id && \n                    <IconButton aria-label=\"expand row\" size=\"small\" onClick={() => setOpen(!open)}>\n                      {open ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                    </IconButton>\n                  }\n                    \n                </TableCell>\n            </TableRow>\n            <TableRow>\n              {props.id === me.user.id &&\n                <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={9}>\n                  <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                    <Box margin={1}>\n                      <Typography variant=\"h6\" gutterBottom component=\"div\" style={{display: \"inline-block\"}}>\n                        API Tokens\n                      </Typography>\n                      <Button size=\"small\" onClick={props.onCreateAPIToken} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New</Button>\n                      <Table size=\"small\" aria-label=\"tokens\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                        <TableHead>\n                          <TableRow>\n                            <TableCell style={{width: \"10rem\"}}>Delete</TableCell>\n                            <TableCell>Token</TableCell>\n                          </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {\n                            props.apitokens.map((token) => (<APITokenRow {...token} key={\"token\" + token.id} onDeleteAPIToken={props.onDeleteAPIToken} />))\n                          }\n                        </TableBody>\n                      </Table>\n                    </Box>\n                  </Collapse>\n                </TableCell>\n              }\n            \n          </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { SettingsOperator } from './SettingsOperator';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function SettingsOperatorTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            props.onNewOperator(username, passwordNew);\n            setOpenNewDialog(false);\n        }\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Settings\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n        <MythicDialog open={openNew} \n            onClose={()=>{setOpenNewDialog(false);}} \n            innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewDialog(false);}}  {...props}/>}\n         />\n        <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n            <TableHead>\n                <TableRow>\n                    <TableCell style={{width: \"9rem\"}}>Delete Account</TableCell>\n                    <TableCell>Username</TableCell>\n                    <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                    <TableCell style={{width: \"10rem\"}}>UTC Timestamps</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Account Active</TableCell>\n                    <TableCell>Last Login</TableCell>\n                    <TableCell>Account Creation Date</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Admin Status</TableCell>\n                    <TableCell style={{width: \"5rem\"}}>More...</TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n            \n            {props.operators.map( (op) => (\n                <SettingsOperator\n                    onViewUTCChanged={props.onViewUTCChanged}\n                    onAdminChanged={props.onAdminChanged}\n                    onActiveChanged={props.onActiveChanged} \n                    onDeleteOperator={props.onDeleteOperator}\n                    onUsernameChanged={props.onUsernameChanged}\n                    onPasswordChanged={props.onPasswordChanged}\n                    onDeleteAPIToken={props.onDeleteAPIToken}\n                    onCreateAPIToken={props.onCreateAPIToken}\n                    key={\"operator\" + op.id}\n                    {...op}\n                />\n            ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { SettingsOperatorTable } from './SettingsOperatorTable';\nimport {useMutation, useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst GET_Operator = gql`\nquery GetOperators {\n  operator(where: {deleted: {_eq: false}}, order_by: {username: asc}) {\n    active\n    admin\n    creation_time\n    deleted\n    id\n    last_login\n    username\n    view_utc_time\n    apitokens {\n      token_value\n      token_type\n      active\n      id\n    }\n  }\n}\n`;\nconst operatorsUpdateViewUTCTime = gql`\nmutation SettingsUpdateOperatorViewUTCTime($id: Int!, $view_utc_time: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {view_utc_time: $view_utc_time}) {\n    id\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdateAdmin = gql`\nmutation SettingsUpdateOperatorAdminMutation($id: Int!, $admin: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {admin: $admin}) {\n      id\n      admin\n  }\n}\n`;\nconst operatorsUpdateActive = gql`\nmutation SettingsUpdateOperatorActiveMutation($id: Int!, $active: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {active: $active}) {\n      id\n      active\n  }\n}\n`;\nconst operatorsDelete = gql`\nmutation SettingsDeleteOperatorMutation($id: Int!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {deleted: true}) {\n      id\n      deleted\n  }\n}\n`;\nconst operatorsUpdateUsername = gql`\nmutation SettingsUsernameOperatorMutation($id: Int!, $username: String!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {username: $username}) {\n      id\n      username\n  }\n}\n`;\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    active\n    creation_time\n    deleted\n    error\n    id\n    last_login\n    status\n    username\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdatePassword = gql`\nmutation operatorsUpdatePasswordMutation($user_id: Int!, $new_password: String!, $old_password: String){\n  updatePassword(user_id: $user_id, new_password: $new_password, old_password: $old_password){\n    status\n    error\n  }\n}\n`;\nconst createAPITokenMutation = gql`\nmutation createAPITokenMutation{\n  createAPIToken(token_type: \"User\"){\n    id\n    token_value\n    status\n    error\n    operator_id\n  }\n}\n`;\nconst deleteAPITokenMutation = gql`\nmutation deleteAPIToken($id: Int!){\n  delete_apitokens_by_pk(id: $id){\n    id\n    operator_id\n  }\n}\n`;\nexport function Settings(props){\n    const me = useReactiveVar(meState);\n    const [operators, setOperators] = React.useState([]);\n    useQuery(GET_Operator, {fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        setOperators(data.operator);\n      }\n    });\n    const [updateUTC] = useMutation(operatorsUpdateViewUTCTime, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          const updatedOperators = operators.map(o => {\n            if(o.id === result.update_operator_by_pk.id){\n              return {...o, view_utc_time: result.update_operator_by_pk.view_utc_time}\n            }else{\n              return {...o}\n            }\n          })\n          if(result.update_operator_by_pk.id === me.user.id){\n              const state = meState();\n              state.user.view_utc_time = result.update_operator_by_pk.view_utc_time;\n              meState(state);\n          }\n          setOperators(updatedOperators);\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: (err) => {\n          console.log(err);\n          snackActions.error(\"Unable to update operator timestamps without Admin permissions\");\n        }\n    });\n    const [deleteOperator] = useMutation(operatorsDelete, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          const updatedOperators = operators.filter( o => o.id !== result.update_operator_by_pk.id);\n          setOperators(updatedOperators);\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: () => {\n          snackActions.warning(\"Unable to delete operator without Admin permissions\");\n        }\n    });\n    const [updateAdmin] = useMutation(operatorsUpdateAdmin, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map(o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, admin: result.update_operator_by_pk.admin}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator admin status without Admin permissions\");\n      }\n    });\n    const [updateActive] = useMutation(operatorsUpdateActive, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map(o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, active: result.update_operator_by_pk.active}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator active status without Admin permissions\");\n      }\n    });\n    const [createAPIToken] = useMutation(createAPITokenMutation, {\n      onCompleted: (data) => {\n        if(data.createAPIToken.status === \"success\"){\n          snackActions.success(\"Successfully created new API Token\");\n          const updatedOperators = operators.map( o => {\n            if(o.id === data.createAPIToken.operator_id){\n              return {...o, apitokens: [...o.apitokens, {...data.createAPIToken}]}\n            }else{\n              return {...o}\n            }\n          });\n          setOperators(updatedOperators);\n        }else{\n          snackActions.error(data.createAPIToken.error);\n        }\n      },\n      onError: (result) => {\n        console.log(result);\n      }\n    });\n    const [deleteAPIToken] = useMutation(deleteAPITokenMutation, {\n      onCompleted: (data) => {\n        const updatedOperators = operators.map( o => {\n          if(o.id === data.delete_apitokens_by_pk.operator_id){\n            return {...o, apitokens: o.apitokens.filter(api => api.id !== data.delete_apitokens_by_pk.id)}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n      },\n      onError: (data) => {\n\n      }\n    });\n    const [newOperator] = useMutation(newOperatorMutation, {\n        onCompleted: (data) => {\n            if(data.createOperator.status === \"success\"){\n                const newOperator = data.createOperator;\n                setOperators( [...operators, newOperator]);\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateUsername] = useMutation(operatorsUpdateUsername, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map( o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, username: result.update_operator_by_pk.username};\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's username without Admin permissions\");\n      }\n    });\n    const [updatePassword] = useMutation(operatorsUpdatePassword, {\n      onCompleted: (result) => {\n        if(result.updatePassword.status === \"success\"){\n          snackActions.success(\"Successfully updated password\");\n        }else{\n          snackActions.warning(result.updatePassword.error);\n        }\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's password without Admin permissions\");\n      }\n    })\n    const onViewUTCChanged = (id, value) => {\n        updateUTC({variables: {id, view_utc_time: value}});\n    }\n    const onAdminChanged = (id, value) => {\n        updateAdmin({variables: {id, admin: value}});\n    }\n    const onActiveChanged = (id, value) => {\n        updateActive({variables: {id, active: value}});\n    }\n    const onNewOperator = (username, password) => {\n        newOperator({variables: {username, password}});\n    }\n    const onDeleteOperator = (id) => {\n        deleteOperator({variables: {id}});\n    }\n    const onUsernameChanged = (id, value) => {\n      updateUsername({variables: {id, username: value}})\n    }\n    const onPasswordChanged = ({user_id, old_password, new_password}) => {\n      updatePassword({variables: {user_id, new_password, old_password}})\n    }\n    const onCreateAPIToken = () => {\n      createAPIToken({variables: {}})\n    }\n    const onDeleteAPIToken = (id) => {\n      deleteAPIToken({variables: {id}})\n    }\n    return (\n    <div style={{height: \"calc(94vh)\", marginTop: \"10px\", marginRight: \"5px\"}}>\n        <SettingsOperatorTable \n            onViewUTCChanged={onViewUTCChanged}\n            onAdminChanged={onAdminChanged}\n            onActiveChanged={onActiveChanged}\n            onNewOperator={onNewOperator}\n            onDeleteOperator={onDeleteOperator}\n            onUsernameChanged={onUsernameChanged}\n            onPasswordChanged={onPasswordChanged}\n            onCreateAPIToken={onCreateAPIToken}\n            onDeleteAPIToken={onDeleteAPIToken}\n            operators={operators} />\n        </div>\n    );\n} \n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_name: String!) {\n  payloadtype(where: {ptype: {_eq: $payload_name}}) {\n    buildparameters (where: {deleted: {_eq: false} } ){\n      description\n      name\n      id\n      parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function PayloadTypeBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_Payload_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            console.log(data);\n            setBuildParams(data.payloadtype[0].buildparameters);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id}>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                            Scripting/Building Name:<br/>{param.name}<br/>\n                            Parameter Type:<br/>{param.parameter_type}<br/>\n                            Default Parameter:<br/>{param.parameter}<br/>\n                            Required value?<br/>{param.required ? \"Yes\": \"No\"}<br/>\n                            Verifier Regex:<br/>{param.verifier_regex}<br/>\n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {PayloadTypeBuildDialog} from './PayloadTypeBuildDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function PayloadTypeCard(props) {\n  const classes = useStyles();\n  const [wrappedPayloads, setWrappedPayloads] = React.useState(\"\");\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [supportedOS, setSupportedOS] = React.useState(\"\");\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  useEffect( () => {\n    if( props.wrap_these_payload_types.length > 0){\n      const wrapped = props.wrap_these_payload_types.map( (cur) => {\n        return cur.wrapped.ptype;\n      });\n      setWrappedPayloads(wrapped.join(\", \"));\n    }\n    else{\n      setWrappedPayloads(\"\");\n    }\n    setSupportedOS(props.supported_os.split(\",\").join(\", \"));\n  }, [props.wrap_these_payload_types, props.supported_os]);\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <CardMedia\n            className={classes.media}\n            component=\"img\"\n            style={{width: \"125px\", height: \"125\", padding: \"10px\", objectFit: \"unset\"}}\n            src={\"/static/\" + props.ptype + \".svg\"}\n          />\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.ptype}</Typography>\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Operating Systems:</b> {supportedOS}\n              </Typography>\n              \n              {props.wrap_these_payload_types.length === 0 ? (null) : (\n                <Typography variant=\"body1\" component=\"p\">\n                  <b>Wrapped Payload Types:</b> {wrappedPayloads}\n                </Typography>\n              )}\n              <Typography variant=\"body2\" component=\"p\">\n                {props.note}\n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={props.wrapper ? \"/docs/wrappers/\" + props.ptype : \"/docs/agents/\" + props.ptype} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Building Info</Button>\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                    onClose={()=>{setOpenBuildingDialog(false);}} \n                    innerDialog={<PayloadTypeBuildDialog {...props} payload_name={props.ptype} />}\n                 />\n          </div>\n    </Card>\n  );\n}\n","import React, { useEffect }  from 'react';\nimport { PayloadTypeCard } from './PayloadTypeCard';\nimport {useSubscription, gql } from '@apollo/client';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\n\n const SUB_Payload_Types = gql`\n subscription getPayloadTypesSubscription {\n  payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n    author\n    container_running\n    id\n    last_heartbeat\n    note\n    ptype\n    supported_os\n    wrapper\n    translationcontainer {\n        id\n        name\n        last_heartbeat\n        container_running\n    }\n    wrap_these_payload_types {\n        id\n        wrapped {\n          ptype\n        }\n    }\n  }\n}\n `;\n\n\nexport function PayloadTypeContainerDisplay(props){\n    const theme = useTheme();\n    const {  data } = useSubscription(SUB_Payload_Types);\n    const [payloadTypes, setPayloadTypes] = React.useState([]);\n    useEffect( () => {\n      if(data === undefined){\n        setPayloadTypes([]);\n        return;\n      }\n      setPayloadTypes(data.payloadtype);\n    }, [data])\n    return (\n          <div style={{flexDirection: \"column\", alignItems: \"stretch\"}}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                  <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                      Payload Types\n                  </Typography>\n                </Paper> \n              {\n                  payloadTypes.map( (pt) => (\n                      <PayloadTypeCard key={\"payloadtype\" + pt.id} {...pt} />\n                  ))\n              }\n              \n          </div>\n    );\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_C2_Details = gql`\nquery GetPC2Details($payload_name: String!) {\n  c2profile(where: {name: {_eq: $payload_name}}) {\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      name\n      parameter_type\n      id\n      randomize\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function C2ProfileBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_C2_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            setBuildParams(data.c2profile[0].c2profileparameters);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id}>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                            Scripting/Building Name:<br/>{param.name}<br/>\n                            Parameter Type:<br/>{param.parameter_type}<br/>\n                            Default Parameter:<br/>{param.default_value}<br/>\n                            Required value?<br/>{param.required ? \"Yes\": \"No\"}<br/>\n                            Verifier Regex:<br/>{param.verifier_regex}<br/>\n                            Randomize value?: <br/>{param.randomize ? \"Yes\" : \"No\" }<br/>\n                            Random Format String: <br/>{param.format_string}<br/>\n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getProfileOutputQuery = gql`\nquery getProfileOutput($id: Int!) {\n  getProfileOutput(id: $id) {\n    status\n    error\n    output\n  }\n}\n`;\n\nexport function C2ProfileOutputDialog(props) {\n    const { loading, error, data } = useQuery(getProfileOutputQuery, {\n        variables: {id: props.profile_id},\n        onCompleted: data => {\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <MythicTextField multiline={true} onChange={()=>{return}} value={data.getProfileOutput.output} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\n\nconst getProfileConfigQuery = gql`\nquery getProfileConfigOutput($id: Int!, $filename: String!) {\n  downloadContainerFile(id: $id, filename: $filename) {\n    status\n    error\n    filename\n    data\n  }\n}\n`;\n\nexport function C2ProfileConfigDialog(props) {\n    const [config, setConfig] = useState(\"\");\n    const { loading, error } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.profile_id, filename: \"config.json\"},\n        onCompleted: data => {\n            if(data.downloadContainerFile.status === \"error\"){\n                setConfig(\"Errored trying to read file from container\\n\" + data.downloadContainerFile.error);\n            }else{\n                console.log(data);\n                setConfig(atob(data.downloadContainerFile.data));\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    \n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onConfigSubmit = () => {\n        props.onConfigSubmit(btoa(config));\n        props.onClose();\n    }\n    const onChange = (value, event) => {\n        setConfig(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Configuration</DialogTitle>\n        <DialogContent dividers={true}>\n            <AceEditor \n              mode=\"json\"\n              theme={\"monokai\"}\n              onChange={onChange}\n              fontSize={14}\n              showGutter={true}\n              highlightActiveLine={true}\n              value={config}\n              focus={true}\n              width={\"100%\"}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function C2ProfileStartStopOutputDialog(props) {\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <MythicTextField multiline={true} value={props.output} onChange={() => {return}} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport Switch from '@material-ui/core/Switch';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport {Typography} from '@material-ui/core';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.reduce( (prev, opt) => {\n            if(opt.value !== \"\"){\n                return [...prev, {\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                console.log(\"passed dictionaryvalue\", passedValue);\n                let initial = passedValue.reduce( (prev, op) => {\n                    // find all the options that have a default_show of true\n                    if(op.default_show){\n                        return [...prev, {...op} ];\n                    }else{\n                        return [...prev];\n                    }\n                }, [] );\n                submitDictChange(initial);\n                setDictValue(initial);\n                setDictOptions(passedValue);\n                let dictSelectOptionsInitial = passedValue.reduce( (prev, op) => {\n                    //for each option, check how many instances of it are allowed\n                    // then check how many we have currently\n                    const count = initial.reduce( (preCount, cur) => {\n                        if(cur.name === op.name){return preCount + 1}\n                        return preCount;\n                    }, 0);\n                    if(op.max === -1 || op.max > count){\n                        return [...prev, {...op} ];  \n                    }else{\n                        return [...prev]\n                    }\n                }, []);\n                setDictSelectOptions(dictSelectOptionsInitial);\n                if (dictSelectOptionsInitial.length > 0){\n                    setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n                }\n            }else{\n                const options = JSON.parse(default_value);\n                setDictOptions(options);\n                let initial = options.reduce( (prev, op) => {\n                    // find all the options that have a default_show of true\n                    if(op.default_show){\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                    }else{\n                        return [...prev];\n                    }\n                }, [] );\n                submitDictChange(initial);\n                setDictValue(initial);\n                let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                    //for each option, check how many instances of it are allowed\n                    // then check how many we have currently\n                    const count = initial.reduce( (preCount, cur) => {\n                        if(cur.name === op.name){return preCount + 1}\n                        return preCount;\n                    }, 0);\n                    if(op.max === -1 || op.max > count){\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                    }else{\n                        return [...prev]\n                    }\n                }, []);\n                setDictSelectOptions(dictSelectOptionsInitial);\n                if (dictSelectOptionsInitial.length > 0){\n                    setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n                }\n            }\n        }else if(parameter_type === \"Boolean\"){\n            if(default_value !== undefined){\n                setValue( default_value.toLowerCase() === \"true\" ? true : false);\n            }else{\n                setValue(true);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                console.log(passedValue, true);\n                setValue(passedValue);\n            }\n        }else{\n            \n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        let choice = {...dictSelectOptionsChoice};\n        if(choice.name === \"*\"){\n            choice.key = \"\";\n            choice.value = \"\";\n        }\n        const newDictValue = [...dictValue, {...choice, default_show: true}]\n        setDictValue(newDictValue);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newDictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(newDictValue);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(newValues);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const toggleSwitchValue = (evt) => {\n        let newVal = !value;\n        setValue(newVal);\n        onChange(name, newVal, false);\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + i} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                      <Switch\n                        checked={value}\n                        onChange={toggleSwitchValue}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                      />\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + id + 'popover' : undefined}>\n                            {description}\n                    </Typography>\n                    <Popover id={'taskparam' + id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{name.length > 0 ? name : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\n\n\nexport function CreatePayloadC2ProfileParametersTable(props){\n\n    const onChange = (paramName, value, error) => {\n        props.onChange(props.name, paramName, value, error);\n    }\n    return (\n    <TableContainer component={Paper} className=\"mythicElement\">\n  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"20%\"}}>Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {props.c2profileparameters.map( (op) => (\n                        <CreatePayloadParameter key={\"c2paramtablerow\" + op.id} returnAllDictValues={props.returnAllDictValues} onChange={onChange} {...op} />\n                    ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {useState} from 'react';\nimport {Button, Typography} from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useLazyQuery, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {CreatePayloadC2ProfileParametersTable} from '../CreatePayload/CreatePayloadC2ProfileParametersTable';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport * as RandExp from 'randexp';\n\nconst getProfileConfigQuery = gql`\nquery getProfileParameters($id: Int!, $operation_id: Int!) {\n  c2profile_by_pk(id: $id) {\n    c2profileparameters(where: {deleted: {_eq: false}}, order_by: {name: asc}){\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n      instance_name\n    }\n  }\n}\n`;\nconst getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    id\n    value\n  }\n}\n`;\nconst deleteInstanceMutation = gql`\nmutation deleteSavedInstance($name: String!, $operation_id: Int!){\n  delete_c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}){\n    affected_rows\n  }\n}\n`;\nconst createInstanceMutation = gql`\nmutation createNewC2Instance($instance_name: String!, $c2_instance: String!, $c2profile_id: Int!){\n  create_c2_instance(c2_instance: $c2_instance, instance_name: $instance_name, c2profile_id: $c2profile_id){\n    status\n    error\n  }\n}\n`;\n\nexport function C2ProfileSavedInstancesDialog(props) {\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [instanceName, setInstanceName] = useState(\"\");\n    const [selectedInstance, setSelectedInstance] = useState(\"\");\n    const [createdInstances, setCreatedInstances] = useState([]);\n    const [baseParameters, setBaseParameters] = useState([]);\n    const [currentParameters, setCurrentParameters] = useState([]);\n    const { loading } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const parameters = data.c2profile_by_pk.c2profileparameters.map( (param) => {\n              if(param.format_string !== \"\"){\n                  const random = new RandExp(param.format_string).gen();\n                  return {...param, default_value: random, value: random}\n              }else if(param.default_value !== \"\"){\n                  if(param.parameter_type === \"ChooseOne\"){\n                      return {...param, value: param.default_value.split(\"\\n\")[0]}\n                  }else if(param.parameter_type === \"Dictionary\"){\n                      let tmp = JSON.parse(param.default_value);\n                      let initial = tmp.reduce( (prev, op) => {\n                          // find all the options that have a default_show of true\n                          if(op.default_show){\n                              return [...prev, {value: op.default_value, key: op.name === \"*\" ? \"\": op.name, name: op.name, custom: op.name === \"*\" ? true : false} ];\n                          }else{\n                              return [...prev];\n                          }\n                      }, [] );\n                      return {...param, value: initial}\n                  }else if(param.parameter_type === \"Date\"){\n                    let tmpDate = new Date();\n                    tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                    return {...param, value: tmpDate.toISOString().slice(0,10)}\n                  }else{\n                      return {...param, value: param.default_value}\n                  }\n              }else{\n                return {...param, error: param.required, value: param.default_value}\n              }\n          });\n          parameters.sort((a,b) => -b.description.localeCompare(a.description));\n          setBaseParameters([...parameters]);\n          setCurrentParameters([...parameters]);\n          setCreatedInstances(data.c2profile_by_pk.c2profileparametersinstances);\n        },\n        onError: data => {\n          \n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n      onCompleted: (data) => {\n        const updates = data.c2profileparametersinstance.map( (cur) => {\n          let inst = {...cur, ...cur.c2profileparameter};\n          if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n            inst[\"value\"] = JSON.parse(inst[\"value\"]);\n        }\n          return inst;\n        })\n        updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n        setCurrentParameters(updates);\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch instance data: \" + data);\n        console.log(data);\n      },\n      fetchPolicy: \"no-cache\"\n    })\n    const [deleteInstance] = useMutation(deleteInstanceMutation, {\n      onCompleted: (data) => {\n        setSelectedInstance(\"\")\n        setInstanceName(\"\");\n        setCurrentParameters([...baseParameters]);\n        const updatedInstances = createdInstances.filter( (cur) => cur.instance_name !== selectedInstance);\n        setCreatedInstances(updatedInstances);\n        snackActions.success(\"Sucessfully deleted instance\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to delete instance: \" + data);\n      }\n    });\n    const [createInstance] = useMutation(createInstanceMutation, {\n      onCompleted: (data) => {\n        if(data.create_c2_instance.status === \"success\"){\n          snackActions.success(\"Successfully created instance\");\n        }else{\n          snackActions.error(\"Failed to create instance: \" + data.create_c2_instance.error);\n        }\n        props.onClose();\n        \n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to create instance: \" + data);\n      }\n    })\n    if (loading) {\n     return <LinearProgress />;\n    }\n    const onConfigSubmit = () => {\n      if(instanceName.length === 0){\n        snackActions.warning(\"Must supply an instance name\");\n        return;\n      }\n        const config = currentParameters.reduce( (prev, cur) => {\n          return {...prev, [cur.name]: cur.value}\n        }, {});\n        createInstance({variables: {operation_id: me.user.current_operation_id, instance_name: instanceName, c2profile_id: props.id, c2_instance: JSON.stringify(config)}})\n    }\n    const onChange = (name, value, error) => {\n      setInstanceName(value);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n      const c2params = currentParameters.map( (param) => {\n        if (param.name === parameterName){\n            return {...param, error, value}\n        }\n        return param;\n      });\n      console.log(c2params);\n      setCurrentParameters(c2params);\n    }\n    const onChangeCreatedInstanceName = (evt) => {\n      setSelectedInstance(evt.target.value);\n      setInstanceName(evt.target.value);\n      if(evt.target.value === \"\"){\n        setCurrentParameters([...baseParameters]);\n      }else{\n        setCurrentParameters([]);\n        getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n      }\n    }\n    const deleteInstanceButton = () => {\n      setCurrentParameters([]);\n      deleteInstance({variables: {name: selectedInstance, operation_id: me.user.current_operation_id}})\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Save an Instance of {props.name}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <Typography style={{paddingBottom: \"10px\"}}>\n            Saving an instance of the parameters allows you to select them from a dropdown when creating agents later, saving time and typos.\n          </Typography>\n            {createdInstances.length > 0 ? (\n              <Grid container spacing={2} style={{paddingTop: \"10px\"}}>\n                <Grid item xs={6}>\n                  <FormControl style={{width: \"100%\"}}>\n                  <InputLabel >Select an Existing Instance</InputLabel>\n                      <Select\n                        style={{width: \"100%\", marginBottom: \"10px\"}}\n                        value={selectedInstance}\n                        label=\"Select an Existing Instance\"\n                        onChange={onChangeCreatedInstanceName}\n                      >\n                        <MenuItem value=\"\">New Instance</MenuItem>\n                      {\n                          createdInstances.map((opt, i) => (\n                              <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                          ))\n                      }\n                      </Select>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                  {selectedInstance.length > 0 ? (\n                    <Button style={{backgroundColor: theme.palette.error.main, color: \"white\"}} variant=\"contained\" onClick={deleteInstanceButton}> Delete Instance</Button>\n                  ) : (null)}\n                </Grid>\n            </Grid>\n            ) : (null)}\n            <MythicTextField name=\"Instance Name\" onChange={onChange} value={instanceName} style={{paddingTop: \"10px\"}}/>\n            <CreatePayloadC2ProfileParametersTable {...props} returnAllDictValues={true} c2profileparameters={currentParameters} onChange={updateC2Parameter} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            {selectedInstance.length > 0 ? (\"Update\") : (\"Create\")}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport {C2ProfileBuildDialog} from './C2ProfileBuildDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport {useMutation, gql} from '@apollo/client';\nimport {C2ProfileOutputDialog} from './C2ProfileOutputDialog';\nimport {C2ProfileConfigDialog} from './C2ProfileConfigDialog';\nimport {C2ProfileStartStopOutputDialog} from './C2ProfileStartStopOutputDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport {C2ProfileSavedInstancesDialog} from './C2ProfileSavedInstancesDialog';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n  successButton: {\n    backgroundColor: theme.palette.success.main,\n    color: 'white',\n    \"&:hover\":{\n      backgroundColor: theme.palette.success.dark\n    }\n  },\n  errorButton: {\n    backgroundColor: theme.palette.error.main,\n    color: 'white',\n    \"&:hover\":{\n      backgroundColor: theme.palette.error.dark\n    }\n  }\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\nconst startStopProfileMutation = gql`\nmutation StartStopProfile($id: Int!, $action: String) {\n  startStopProfile(id: $id, action: $action) {\n    status\n    error\n    output\n  }\n}\n`;\nconst setProfileConfigMutation = gql`\nmutation setProfileConfiguration($id: Int!, $file_path: String!, $data: String!) {\n  uploadContainerFile(id: $id, file_path: $file_path, data: $data) {\n    status\n    error\n    filename\n  }\n}\n`;\nexport function C2ProfilesCard(props) {\n  let date = new Date();\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n  const dropdownAnchorRef = React.useRef(null);\n  const handleDropdownToggle = () => {\n    setDropdownOpen((prevOpen) => !prevOpen);\n  };\n  const handleDropdownClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setDropdownOpen(false);\n  };\n  const [startStopProfile] = useMutation(startStopProfileMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            setOutput(data.startStopProfile.output);\n            setOpenProfileStartStopDialog(true);\n        }\n    });\n    const onStartStopProfile = () => {\n        if(props.running){\n            snackActions.info(\"Submitting stop task...\" );\n        }else{\n            snackActions.info(\"Submitting start task...\" );\n        }  \n        startStopProfile({variables: {id: props.id, action: props.running ? \"stop\" : \"start\"}});\n    }\n    const [openProfileDialog, setOpenProfileDialog] = React.useState(false);\n    const [openProfileConfigDialog, setOpenProfileConfigDialog] = React.useState(false);\n    const [output, setOutput] = React.useState(\"\");\n    const [openProfileStartStopDialog, setOpenProfileStartStopDialog] = React.useState(false);\n    const [openProfileSavedInstancesDialog, setOpenProfileSavedInstancesDialog] = React.useState(false);\n    const [configSubmit] = useMutation(setProfileConfigMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            //console.log(data);\n            if(data.uploadContainerFile.status === \"success\"){\n                snackActions.success(\"Updated file\");\n            }else{\n                snackActions.error(\"Error updating: \" + data.uploadContainerFile.error );\n            }\n        }\n    });\n    const onConfigSubmit = (content) => {\n        configSubmit({variables: {id: props.id, file_path: \"config.json\", data: content}});\n    }\n  return (\n    <Card className={classes.root} elevation={5} style={{maxWidth: \"100%\"}}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            {props.is_p2p ? \n            (<FontAwesomeIcon icon={faLink} size=\"6x\" style={{width: \"125px\", height: \"125px\"}} />)\n            : \n            (<WifiIcon style={{width: \"125px\", height: \"125px\"}}/>)\n            }\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\"}}>{props.name}</Typography>\n          {!props.is_p2p && props.running &&\n            <Typography variant=\"h6\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\", color:theme.palette.success.main}}>(Server Running)</Typography>\n          }\n          {!props.is_p2p && !props.running &&\n            <Typography variant=\"h6\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\", color:theme.palette.error.main}}>(Server Not Running)</Typography>\n          }\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Agents:</b> {props.payloadtypec2profiles.map( (pt) => (pt.payloadtype.ptype + \" \") )}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                {props.description}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n               \n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={\"/docs/c2-profiles/\" + props.name.toLowerCase()} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Build Info</Button>\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                onClose={()=>{setOpenBuildingDialog(false);}} \n                innerDialog={<C2ProfileBuildDialog {...props} onClose={()=>{setOpenBuildingDialog(false);}} payload_name={props.name} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileStartStopDialog} \n                onClose={()=>{setOpenProfileStartStopDialog(false);}} \n                innerDialog={<C2ProfileStartStopOutputDialog output={output} onClose={()=>{setOpenProfileStartStopDialog(false);}} payload_name={props.name} />}\n            />\n            {props.container_running ? (\n                   props.running ?\n                   (\n                    <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\">\n                       <Button size=\"small\" className={props.running ? classes.successButton : classes.errorButton} onClick={onStartStopProfile} style={{width: \"100%\"}}>Stop Profile</Button>\n                       <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          className={props.running ? classes.successButton : classes.errorButton}\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                   )\n                   :\n                   (\n                     props.is_p2p ? (\n                      null\n                     ) : (\n                      <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\">\n                        <Button size=\"small\" onClick={onStartStopProfile} className={props.running ? classes.successButton : classes.errorButton} style={{width: \"100%\"}}>Start Profile</Button>\n                        <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          className={props.running ? classes.successButton : classes.errorButton}\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                     )\n                      \n                   )\n            ) : (\n              <Button disabled color=\"secondary\">Container Offline</Button>\n            )}\n             <Button size=\"small\" variant=\"contained\" color=\"primary\" onClick={() => {setOpenProfileSavedInstancesDialog(true);}}><BookmarkIcon /> Saved Instances</Button>\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileDialog} \n                onClose={()=>{setOpenProfileDialog(false);}} \n                innerDialog={<C2ProfileOutputDialog {...props} payload_name={props.name} onClose={()=>{setOpenProfileDialog(false);}} profile_id={props.id} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileConfigDialog} \n                onClose={()=>{setOpenProfileConfigDialog(false);}} \n                innerDialog={<C2ProfileConfigDialog {...props} onConfigSubmit={onConfigSubmit} payload_name={props.name} onClose={()=>{setOpenProfileConfigDialog(false);}} profile_id={props.id} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileSavedInstancesDialog} \n                onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} \n                innerDialog={<C2ProfileSavedInstancesDialog {...props} onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} />}\n            />\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleDropdownClose}>\n                      <MenuList id=\"split-button-menu\">\n                        <MenuItem key={\"dropdownprofile\" + props.id + \"menu1\"} onClick={()=>{setOpenProfileConfigDialog(true);}}>View/Edit Config</MenuItem>\n                       {\n                        props.running ? \n                        (<MenuItem key={\"dropdownprofile\" + props.id + \"menu2\"} onClick={()=>{setOpenProfileDialog(true);}}>View Stdout/Stderr</MenuItem>) : (null)\n                       }\n                      </MenuList>\n                      \n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n          </div>\n    </Card>\n  );\n}\n","import React, {useEffect} from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {C2ProfilesCard} from './C2ProfilesCard';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_C2_Profiles = gql`\nsubscription getPayloadTypesSubscription {\n   c2profile(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   author\n   id\n   container_running\n   description\n   is_p2p\n   last_heartbeat\n   name\n   running\n   payloadtypec2profiles(order_by: {payloadtype: {ptype: asc}}) {\n     payloadtype {\n       ptype\n     }\n   }\n }\n}\n`;\n\nexport function C2ProfileContainerDisplay(props) {\n  const { data } = useSubscription(SUB_C2_Profiles, {fetchPolicy: \"network-only\"});\n  const [c2profile, setC2profile] = React.useState([]);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setC2profile([]);\n      return;\n    }\n    setC2profile(data.c2profile);\n  }, [data])\n  return (\n        <div style={{ flexDirection: \"column\", alignItems: \"stretch\", paddingLeft: \"10px\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  C2 Profiles\n              </Typography>\n            </Paper> \n            {\n                c2profile.map( (pt) => (\n                    <C2ProfilesCard key={\"c2prof\" + pt.id} {...pt} />\n                ))\n            }\n        </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLanguage } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function TranslationContainerCard(props) {\n  const classes = useStyles();\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <FontAwesomeIcon icon={faLanguage} size=\"6x\" style={{width: \"125px\", height: \"125px\"}} />\n        </StyledAvatar>\n        <div>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.name}</Typography>\n          {props.payloadtypes.length > 0 ? (\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Translated Payload Types:</b> {props.payloadtypes.map( (pt) => pt.ptype).join(\", \")}\n              </Typography>\n          ): (null)}\n        </div>\n    </Card>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {TranslationContainerCard} from './TranslationContainerCard';\nimport {useSubscription, gql } from '@apollo/client';\nconst SUB_Translation_Containers = gql`\nsubscription getTranslationContainersSubscription {\n translationcontainer(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   name\n   id\n   container_running\n   last_heartbeat\n   payloadtypes(order_by: {ptype: asc}) {\n       ptype\n       id\n   }\n }\n}\n`;\nexport function TranslationContainerDisplay(props) {\n  const [translationContainers, setTranslationContainers] = React.useState([]);\n  const [translationContainersWithPayloads, setTranslationContainersWithPayloads] = React.useState([]);\n  const {  data } = useSubscription(SUB_Translation_Containers);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setTranslationContainers([]);\n      return;\n    }\n    const unassigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length === 0);\n    const assigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length > 0);\n    setTranslationContainers(unassigned);\n    setTranslationContainersWithPayloads(assigned); \n  }, [data]);\n  return (\n    <div style={{width: \"100%\", display: \"inline-flex\", flexDirection: \"column\", alignItems: \"stretch\", }}>\n      {\n        translationContainers.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers Not Assigned to Payload Types\n              </Typography>\n            </Paper> \n            {translationContainers.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n      {\n        translationContainersWithPayloads.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers\n              </Typography>\n            </Paper> \n            {translationContainersWithPayloads.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n    </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport {PayloadTypeContainerDisplay} from './PayloadTypeContainerDisplay';\nimport {C2ProfileContainerDisplay} from './C2ProfileContainerDisplay';\nimport {TranslationContainerDisplay} from './TranslationContainerDisplay';\nimport Grid from '@material-ui/core/Grid';\n\nexport function PayloadTypesC2Profiles(props){\n\n    return (\n      <React.Fragment>\n        <Grid container spacing={0}>\n          <Grid item xs={6}>\n          <PayloadTypeContainerDisplay />\n          </Grid>\n          <Grid item xs={6}>\n          <C2ProfileContainerDisplay />\n          </Grid>\n          <Grid item xs={12}>\n          <TranslationContainerDisplay />\n          </Grid>\n        </Grid>\n      </React.Fragment>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [supportsDynamicLoading, setSupportsDynamicLoading] = React.useState(false);\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n                    console.log(props.prevData);\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setFileExtension(props.prevData.file_extension);\n                    setSupportsDynamicLoading(props.prevData.supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    setSupportsDynamicLoading(data.payloadtype[0].supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }else if(param.parameter_type === \"Boolean\"){\n                                    return {...param, error: param.required, value: param.default_value.toLowerCase() === \"true\" ? true : false}\n                                }else{\n                                    return {...param, error: param.required, value: param.default_value}\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    console.log(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"file_extension\": fileExtension, \n                        \"supports_dynamic_loading\": supportsDynamicLoading,\n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSupportsDynamicLoading(payload.supports_dynamic_loading);\n                const params = payload.buildparameters.map( (param) => {\n                    console.log(param);\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else if(param.parameter_type === \"Boolean\"){\n                        return {...param, error: param.required, value: param.default_value.toLowerCase() === \"true\" ? true : false}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicConfirmDialog(props) {\n    const theme = useTheme();\n    const handleSubmit = () => {\n        props.onSubmit();\n        props.onClose();\n    }\n\n  return (\n    <MythicDialog fullWidth={false} maxWidth=\"sm\" open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle >{props.title ? (props.title) : (\"Are you sure?\")}</DialogTitle>\n            {props.dialogText === undefined ? (null) : (\n              <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n                <DialogContentText>\n                  {props.dialogText}\n                </DialogContentText>\n              </DialogContent>\n            )}\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                {props.cancelText ? (props.cancelText) : (\"Close\")}\n              </Button>\n              <Button onClick={handleSubmit} autoFocus variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                {props.acceptText ? (props.acceptText) : (\"Remove\")}\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nconst GET_Payload_Types = gql`\nquery getCommands($payloadType: String!) {\n  command(where: {payloadtype: {ptype: {_eq: $payloadType}}, deleted: {_eq: false}}, order_by: {cmd: asc}) {\n    cmd\n    attributes\n    id\n    supported_ui_features\n    help_cmd\n    description\n    needs_admin\n  }\n}\n `;\n\nexport function Step3SelectCommands(props){\n    const [commands, setCommands] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type\"]},\n        onCompleted: () => {\n          \n          if(!props.buildOptions[\"supports_dynamic_loading\"]){\n              \n              const allCommands = data.command.map( c => {\n                return {...c, selected: true, disabled: true, reason: \"Agent doesn't support dynamic loading\"}\n              });\n              setCommandOptions(allCommands);\n          }else{\n            const allCommands = data.command.reduce( (prev, cur) => {\n              try{\n                const attributes = JSON.parse(cur.attributes);\n                if(attributes[\"supported_os\"].length === 0 || attributes[\"supported_os\"].includes(props.buildOptions[\"os\"])){\n                  if(attributes[\"builtin\"] !== undefined && attributes[\"builtin\"]){\n                    return [...prev, {...cur, disabled: true, selected: true, reason: \"This command is builtin and must be included\"}];\n                  }else{\n                    try{\n                      if(attributes[\"load_only\"] !== undefined && attributes[\"load_only\"]){\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"This command can only be loaded in once a callback is established\"}]\n                      }\n                      let include_command = true;\n                      let build_option_that_sets_include_to_false = {};\n                      if(attributes[\"filter_by_build_parameter\"] !== undefined){\n                        // if filter_attributes has keys, we need to filter down based on all of them\n                        for( const[key, value] of Object.entries(attributes[\"filter_by_build_parameter\"])){\n                            for(let i = 0; i < props.buildOptions.parameters.length; i++){\n                              if(props.buildOptions.parameters[i][\"name\"] === key){\n                                if(props.buildOptions.parameters[i][\"value\"] !== value){\n                                  include_command = false;\n                                  build_option_that_sets_include_to_false[\"name\"] = key;\n                                  build_option_that_sets_include_to_false[\"value\"] = value;\n                                }\n                              }\n                            }\n                        }\n                      }\n                      if(include_command){\n                        if(attributes[\"suggested_command\"] !== undefined && attributes[\"suggested_command\"]){\n                          return [...prev, {...cur, disabled: false, selected: true, reason: \"This command is suggested to be included\"}]\n                        }else{\n                          return [...prev, {...cur, disabled: false, selected: false, reason: \"\"}];\n                        }\n                      }else{\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"Not available when build option \\\"\" + build_option_that_sets_include_to_false[\"name\"] + \"\\\" is not \\\"\" + build_option_that_sets_include_to_false[\"value\"] + \"\\\"\"}]\n                      }\n                    }catch(error){\n                      console.error(error);\n                    }\n                  }\n                }\n                return [...prev, {...cur, disabled: true, selected: false, reason: \"This command isn't supported by the selected OS\"}];\n              }catch(error){\n                return [...prev, {...cur, disabled: false, selected: false, reason: \"Failed to parse command attributes\"}];\n              }\n            }, []);\n            setCommandOptions(allCommands);\n            if(props.prevData !== undefined){\n              const selectedCommands = allCommands.map( (c) => {\n                if(props.prevData.includes(c.cmd)){\n                  return {...c, selected: true};\n                }else{\n                  return {...c, selected: false};\n                }\n              })\n              setCommandOptions(selectedCommands);\n            }\n          }\n        }\n    });\n    const finished = (selectedCommands) => {\n        let foundExit = false;\n        for(let i = 0; i < selectedCommands.length; i++){\n            if(selectedCommands[i][\"supported_ui_features\"].includes(\"callback_table:exit\")){\n              foundExit = true;\n              break;\n            }\n        }\n        if(foundExit){\n          const cmdNames = selectedCommands.map( c => c.cmd);\n          props.finished(cmdNames);\n        }else{\n          setOpenConfirmDialog(true);\n          setCommands(selectedCommands);\n        }\n    }\n    const acceptConfirm = () => {\n      const cmdNames = commands.map( c => c.cmd);\n      props.finished(cmdNames);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Build Commands Into Agent\n        </Typography> <br/>\n        <CommandTransferSelect commands={commandOptions} payload_type={props.buildOptions[\"payload_type\"]} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        <MythicConfirmDialog open={openConfirmDialog} \n            title={\"No exit command selected, continue?\"} \n            onClose={() => setOpenConfirmDialog(false)} \n            acceptText=\"Accept\"\n            onSubmit={acceptConfirm} />\n        \n        </div>\n    );\n} \n\nfunction CommandTransferSelect(props) {\n  const classes = useStyles();\n  const [checked, setChecked] = React.useState([]);\n  const [left, setLeft] = React.useState([]);\n  const [right, setRight] = React.useState([]);\n  const leftChecked = intersection(checked, left);\n  const rightChecked = intersection(checked, right);\n  const [hoveredCommand, setHoveredCommnad] = React.useState({});\n  function not(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) === undefined)\n  }\n  \n  function intersection(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) !== undefined)\n  }\n  const handleToggle = (value) => () => {\n    let currentIndex = -1;\n    if(props.itemKey){\n      currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n    }else{\n      currentIndex = checked.indexOf(value);\n    }\n    \n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  };\n\n  const handleAllRight = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(cur.disabled && !cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && !cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n\n  const handleCheckedRight = () => {\n    setRight(right.concat(leftChecked));\n    setLeft(not(left, leftChecked));\n    setChecked(not(checked, leftChecked));\n  };\n\n  const handleCheckedLeft = () => {\n    setLeft(left.concat(rightChecked));\n    setRight(not(right, rightChecked));\n    setChecked(not(checked, rightChecked));\n  };\n\n  const handleAllLeft = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if((cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n  useEffect( () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n        if(!cur.selected){\n          return [...prev, {...cur}];\n        }else{\n          return [...prev];\n        }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  }, [props.commands]);\n  const setHoveredData = (event) => {\n    const cmd = props.commands.filter( c => c.cmd === event.target.innerText );\n    if(cmd.length > 0){\n      setHoveredCommnad(cmd[0]);\n    }\n  }\n  const customList = (title, items) => (\n    <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(40vh)\", overflow: \"auto\"}} elevation={5}>\n      \n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = valueObj[\"cmd\"];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <div onMouseEnter={setHoveredData} key={'commandtransfer' + value}>\n                  <ListItem style={{padding:0}} disabled={valueObj[\"disabled\"]} \n                    key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}\n                    >\n                    <ListItemIcon>\n                      <Checkbox\n                        disabled={valueObj[\"disabled\"]}\n                        checked={checked.findIndex( (element) => element[\"cmd\"] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                </div>\n              );\n            })}\n            <ListItem />\n          </List>\n        \n    </Paper>\n  );\n  const finished = () => {\n    props.finished(right);\n  }\nreturn (\n  <React.Fragment>\n      <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n        <Grid item xs={5}>{customList(\"Available Commands\", left)}</Grid>\n        <Grid item>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllRight}\n              disabled={left.length === 0}\n              aria-label=\"move all right\"\n            >\n              \n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedRight}\n              disabled={leftChecked.length === 0}\n              aria-label=\"move selected right\"\n            >\n              &gt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedLeft}\n              disabled={rightChecked.length === 0}\n              aria-label=\"move selected left\"\n            >\n              &lt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllLeft}\n              disabled={right.length === 0}\n              aria-label=\"move all left\"\n            >\n              \n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item xs={5}>{customList(\"Commands Included\", right)}</Grid>\n      </Grid>\n      <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.root}>\n        <Grid item xs={12} style={{height: \"100%\", marginBottom: \"10px\"}}>\n          {hoveredCommand[\"cmd\"] !== undefined &&\n            <Paper className={classes.paper} style={{width: \"100%\"}} elevation={5}>\n              \n                <CardHeader className={classes.cardHeader}\n                  title={\n                    <React.Fragment>\n                      {hoveredCommand[\"cmd\"]}\n                      <Button variant=\"contained\" color=\"primary\" href={\"/docs/agents/\" + props.payload_type + \"/commands/\" + hoveredCommand[\"cmd\"]} \n                        style={{marginLeft: \"10px\", float: \"right\"}}  target=\"_blank\">Documentation\n                      </Button>\n                    </React.Fragment>\n                  }\n                />\n                <Divider classes={{root: classes.divider}}/>\n                {hoveredCommand[\"reason\"] !== \"\" ? (\n                  <Typography variant=\"body1\" align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>{hoveredCommand[\"disabled\"] ? (\"Disabled Reason: \") : (\"Information: \")} </b>{hoveredCommand[\"reason\"]}\n                  </Typography>\n                ) : (null)}\n                <br/>\n                <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Commandline Help: </b>{hoveredCommand[\"help_cmd\"]}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Needs Admin Permissions: </b>{hoveredCommand[\"needs_admin\"] ? \"True\": \"False\"}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Description: </b>{hoveredCommand[\"description\"]}\n                  </Typography>\n            </Paper>\n          }\n          \n        </Grid>\n      </Grid>\n      <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n  </React.Fragment>\n);\n}","import React from 'react';\nimport {useQuery, gql, useLazyQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadC2ProfileParametersTable} from './CreatePayloadC2ProfileParametersTable';\nimport Typography from '@material-ui/core/Typography';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport * as RandExp from 'randexp';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesC2ProfilesQuery($payloadType: String!, $operation_id: Int!) {\n  c2profile(where: {payloadtypec2profiles: {payloadtype: {ptype: {_eq: $payloadType}}}, deleted: {_eq: false}}) {\n    name\n    is_p2p\n    description\n    id\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n        instance_name\n    }\n  }\n}\n `;\n const getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n      c2profile {\n          name\n      }\n    }\n    id\n    value\n  }\n}\n`;\n\nexport function Step4C2Profiles(props){\n    const me = useReactiveVar(meState);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [selectedInstance, setSelectedInstance] = React.useState(\"\");\n    const { loading, error } = useQuery(GET_Payload_Types, {variables:{payloadType: props.buildOptions[\"payload_type\"], operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const profiles = data.c2profile.map( (c2) => {\n                if(props.prevData !== undefined){\n                    console.log(props.prevData);\n                    for(let p = 0; p < props.prevData.length; p++){\n                        if(props.prevData[p][\"name\"] === c2.name){\n                            // we selected this c2 profile before and clicked back, so re-fill it out\n                            const parameters = props.prevData[p][\"c2profileparameters\"].map( (c) => {\n                                if(c.parameter_type === 'Dictionary'){\n                                    const original = JSON.parse(c.default_value);\n                                    const fixedArray = c.value.map( (p) => {\n                                        // p looks like {\"name\": \"something\", \"key\": \"something\", \"value\": \"something\", \"custom\": true/false}\n                                        // we're missing the \"max\" limiter from the original that we need to add back in\n                                        const originalPiece = original.find( o => o[\"name\"] === p[\"name\"]);\n                                        if(originalPiece !== undefined){\n                                            return {...originalPiece, ...p, \"default_show\": p.value === \"\" ? false : true}\n                                        }\n                                        return {...p, \"default_show\": false}\n                                    });\n                                    // now that we've added in the `max` value for each of the keys we had, we need to add back in the original possibilities that we didn't select\n                                    const final = original.reduce( (prev, cur) => {\n                                        //console.log(\"looking for\", cur, \"in\", prev)\n                                        if(prev.findIndex( o => o[\"name\"] === cur[\"name\"]) > -1 ){\n                                            return [...prev]\n                                        }\n                                        return [...prev, {...cur, default_show: false, \"key\": cur.name === \"*\" ? \"\": cur.name, value: cur.default_value}]\n                                    }, [...fixedArray])\n                                    return {...c, value: final};\n                                    \n                                }\n                                return c;\n                            })\n                            \n                            parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                            return {...c2, \"selected\": props.prevData[p][\"selected\"], c2profileparameters: parameters};\n                        }\n                    }\n                }\n                \n                const parameters = c2.c2profileparameters.map( (param) => {\n                    if(param.format_string !== \"\"){\n                        const random = new RandExp(param.format_string).gen();\n                        return {...param, default_value: random, value: random}\n                    }else if(param.default_value !== \"\"){\n                        if(param.parameter_type === \"ChooseOne\"){\n                            return {...param, value: param.default_value.split(\"\\n\")[0]}\n                        }else if(param.parameter_type === \"Dictionary\"){\n                            let tmp = JSON.parse(param.default_value);\n                            let initial = tmp.reduce( (prev, op) => {\n                                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name, default_show: op.default_show} ];\n                            }, [] );\n                            return {...param, value: initial}\n                        }else if(param.parameter_type === \"Date\"){\n                            var tmpDate = new Date();\n                            if(param.default_value !== \"\"){\n                                tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                            }\n                            return {...param, value: tmpDate.toISOString().slice(0,10)}\n                        }else{\n                            return {...param, value: param.default_value}\n                        }\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                return {...c2, \"selected\": false, c2profileparameters: parameters};\n            });\n            profiles.sort((a, b) => -b.name.localeCompare(a.name))\n            //console.log(profiles);\n            setC2Profiles(profiles);\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const finished = () => {\n        let allValid = true;\n        let includedC2 = false;\n        const adjustedC2 = c2Profiles.reduce( (prev, c2) => {\n            if(c2.selected){\n                const params = c2.c2profileparameters.map( (p) => {\n                    if(p.parameter_type === \"Dictionary\"){\n                        const values = p.value.filter(v => v.value !== \"\");\n                        return {...p, value: values};\n                    }else{\n                        return {...p};\n                    }\n                })\n                return [...prev, {...c2, c2profileparameters: params}];\n            }else{\n                return [...prev, {...c2}];\n            }\n        }, []);\n        c2Profiles.forEach( (c2) => {\n            if(c2.selected){\n                includedC2 = true;\n                c2.c2profileparameters.forEach( (param) => {\n                    if(param.error){\n                        snackActions.warning(c2.name + \"'s parameter \" + param.name + \" is invalid\");\n                        allValid = false;\n                    }\n                });\n            }\n        });\n        if(allValid){\n            //console.log(c2Profiles);\n            if(!includedC2){\n                snackActions.warning(\"Must select at least one C2 to include\");\n                return;\n            }\n            props.finished(adjustedC2);\n        }\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const toggleC2Selection = (evt, c2) => {\n        const updatedc2 = c2Profiles.map( (curc2) => {\n            if(c2.name === curc2.name){\n                return {...curc2, selected: !curc2.selected}\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n        const updatedc2 = c2Profiles.map( (curC2) => {\n            if(curC2.name === c2Name){\n                const c2params = curC2.c2profileparameters.map( (param) => {\n                    if (param.name === parameterName){\n                        return {...param, error, value}\n                    }\n                    return param;\n                });\n                return {...curC2, c2profileparameters: c2params};\n            }\n            return curC2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n        onCompleted: (data) => {\n          const updates = data.c2profileparametersinstance.map( (cur) => {\n            let inst = {...cur, ...cur.c2profileparameter};\n            if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n                inst[\"value\"] = JSON.parse(inst[\"value\"]);\n            }\n            return inst;\n          })\n          updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n          const updatedc2 = c2Profiles.map( (curc2) => {\n            if(updates[0].c2profile.name === curc2.name){\n                return {...curc2, c2profileparameters: updates};\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to fetch instance data: \" + data);\n          console.log(data);\n        },\n        fetchPolicy: \"no-cache\"\n      })\n    const onChangeCreatedInstanceName = (evt, c2) => {\n        setSelectedInstance(evt.target.value);\n        if(evt.target.value !== \"\"){\n            const updatedc2 = c2Profiles.map( (curc2) => {\n                if(c2.name === curc2.name){\n                    curc2.c2profileparameters = [];\n                }\n                return curc2;\n            });\n            setC2Profiles(updatedc2);\n            getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n        }\n      }\n      if (loading) {\n        return <div><CircularProgress /></div>;\n       }\n       if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n       }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select C2 Profiles\n            </Typography>\n            {\n                c2Profiles.map( (c2) => (\n                <React.Fragment key={\"step4c2switch\" + c2.id}>\n                    <FormControlLabel\n                      value=\"top\"\n                      control={\n                      <Switch\n                        checked={c2.selected}\n                        onChange={evt => toggleC2Selection(evt, c2)}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />}\n                      label={c2.name}\n                      labelPlacement=\"top\"\n                      style={{display: \"inline\"}}\n                    />\n                    {c2.c2profileparametersinstances.length > 0 && c2.selected ? (\n                        <FormControl style={{width: \"100%\"}}>\n                        <InputLabel >Select an Existing Instance</InputLabel>\n                            <Select\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedInstance}\n                              label=\"Select an Existing Instance\"\n                              onChange={evt => onChangeCreatedInstanceName(evt, c2)}\n                            >\n                              <MenuItem value=\"\">New Instance</MenuItem>\n                            {\n                                c2.c2profileparametersinstances.map((opt, i) => (\n                                    <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                    ) : (null)}\n                    <Typography variant=\"body1\" align=\"left\" id=\"selectc2profiles\" component=\"div\" key={\"step4desc\" + c2.id}\n                        style={{\"marginLeft\": \"10px\"}}>\n                          {c2.description}\n                    </Typography>\n                    { c2.selected ? ( \n                        <CreatePayloadC2ProfileParametersTable key={\"step4table\" + c2.id} returnAllDictValues={false} {...c2} onChange={updateC2Parameter} />\n                        ):(null)\n                    }\n                </React.Fragment>\n                ))\n            }\n<br/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n        </div>\n    );\n} \n","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        console.log(data);\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                \n            }else{\n                if(data.payload[0].build_stderr !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const c2Profiles = props.buildOptions[3].reduce( (prev, c2) => {\n            if(c2.selected){\n                const parameters = c2.c2profileparameters.reduce( (prev, param) => {\n                    if(param.parameter_type === \"Dictionary\"){\n                        const final_values = param.value.map( (p) => {\n                            return {name: p.name, key: p.key, value: p.value, custom: p.custom}\n                        });\n                        return {...prev, [param.name]: final_values};\n                    }\n                    return {...prev, [param.name]: param.value}\n                }, {});\n                return [...prev, {\"c2_profile\": c2.name, \"c2_profile_parameters\": parameters}];\n            }\n            return prev;\n        }, []);\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": props.buildOptions[2],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": c2Profiles\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectCommands} from './Step3SelectCommands';\nimport {Step4C2Profiles} from './Step4C2Profiles';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Commands', 'Select C2 Profiles', 'Build']\n}\n\nexport function CreatePayload(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectCommands buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step4C2Profiles buildOptions={payload[1]} prevData={payload[3]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 4:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n                disabled={props.disableNext}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n        if(sortedOptions.length === 0){\n            snackActions.warning(\"No Wrappers exist within Mythic. Try importing one first via the mythic-cli binary\")\n        }\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        if(osOptions.length === 0){\n            snackActions.warning(\"No Wrappers exist within Mythic. Try importing one first via the mythic-cli binary\");\n            return;\n        }\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport {Typography} from '@material-ui/core';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.map( (opt) => {\n            if(returnAllDictValues){\n                return{\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }\n            }\n            return {[opt.key]: opt.value};\n        });\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            const options = JSON.parse(default_value);\n            setDictOptions(options);\n            let initial = options.reduce( (prev, op) => {\n                // find all the options that have a default_show of true\n                if(op.default_show){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                }else{\n                    return [...prev];\n                }\n            }, [] );\n            submitDictChange(initial);\n            setDictValue(initial);\n            let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                //for each option, check how many instances of it are allowed\n                // then check how many we have currently\n                const count = initial.reduce( (preCount, cur) => {\n                    if(cur.name === op.name){return preCount + 1}\n                    return preCount;\n                }, 0);\n                if(op.max === -1 || op.max > count){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                }else{\n                    return [...prev]\n                }\n            }, []);\n            setDictSelectOptions(dictSelectOptionsInitial);\n            if (dictSelectOptionsInitial.length > 0){\n                setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                setDictValue(passedValue);\n                submitDictChange(passedValue);\n            }\n            \n        }else{\n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        const choice = dictSelectOptionsChoice;\n        setDictValue([...dictValue, choice]);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = dictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + \"i\"} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + id + 'popover' : undefined}>\n                            {description}\n                    </Typography>\n                    <Popover id={'taskparam' + id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{name.length > 0 ? name : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedPayloadTypeID, setSelectedPayloadTypeID] = React.useState(0);\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setSelectedPayloadTypeID(props.prevData.payload_type_id);\n                    setFileExtension(props.prevData.file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    if(payloadtypedata.length === 0){\n                        snackActions.warning(\"No available payload types exist for the selected OS\");\n                    }\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setSelectedPayloadTypeID(data.payloadtype[0].id);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }\n                                return {...param, error: param.required, value: param.default_value}\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        if(selectedPayloadType === \"\"){\n            snackActions.warning(\"No payload type selected\");\n            return;\n        }\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"payload_type_id\": selectedPayloadTypeID,\n                        \"file_extension\": fileExtension, \n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSelectedPayloadTypeID(payload.id);\n                const params = payload.buildparameters.map( (param) => {\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_id: Int!, $operation_id: Int!) {\n  payload(where: {id: {_eq: $payload_id}, operation_id: {_eq: $operation_id}}) {\n    uuid\n    wrapped_payload_id\n    payloadtype{\n        ptype\n    }\n    payloadcommands {\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    filemetum {\n      filename_text\n      agent_file_id\n      id\n      md5\n      sha1\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        description\n      }\n    }\n    os\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n  }\n}\n`;\nexport function DetailedPayloadTable(props){\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Payload Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n           <DetailedPayloadInnerTable {...props} />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\nfunction DetailedPayloadInnerTable(props){\n  const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {payload_id: props.payload_id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const commandState = data.payload[0].payloadcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            }).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0));\n            setCommands(commandState);\n            const buildParametersState = data.payload[0].buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.payload[0].c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n      <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.payload[0].payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.payload[0].os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.payload[0].uuid}</TableCell>\n                    </TableRow>\n                    { data.payload[0].filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.payload[0].filemetum.filename_text}</TableCell>\n                        </TableRow>\n                        \n                    ) : null }\n\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.payload[0].filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.payload[0].filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.payload[0].filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + props.payload_id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + props.payload_id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + props.payload_id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                          {cmd.enc_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Encryption Key: </b> {cmd.enc_key}\n                                          </React.Fragment>) }\n                                        {cmd.dec_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Decryption Key: </b> {cmd.dec_key}\n                                        </React.Fragment>) }\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                                \n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n                {commands.length > 0 &&\n                <React.Fragment>\n                    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Loaded Commands\n                      </Typography>\n                    </Paper>\n                    <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Command Name</TableCell>\n                        <TableCell>Mythic Version</TableCell>\n                        <TableCell>Loaded Version</TableCell>\n                        <TableCell>Documentation</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {\n                        commands.map( (cmd) => (\n                            <TableRow key={cmd.cmd + props.payload_id} hover>\n                                <TableCell>{cmd.cmd}</TableCell>\n                                <TableCell>{cmd.mythic}</TableCell>\n                                <TableCell>{cmd.payload}</TableCell>\n                                <TableCell>\n                                <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                                    href={\"/docs/agents/\" + data.payload[0].payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button>\n                                </TableCell>\n                            </TableRow>\n                        ))\n                        \n                      }\n                    </TableBody>\n                  </Table>\n                </React.Fragment>\n                }\n              {data.payload[0].wrapped_payload_id !== null &&\n                <React.Fragment>\n                  <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Wrapped Payload Information\n                      </Typography>\n                    </Paper>\n                  <DetailedPayloadInnerTable payload_id={data.payload[0].wrapped_payload_id} />\n                </React.Fragment>\n              }\n          </React.Fragment>\n        )\n}","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from '../Payloads/DetailedPayloadTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport InfoIcon from '@material-ui/icons/Info';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nconst GET_Payload_Types = gql`\nquery getWrappablePayloads($payloadType: Int!) {\n  payloadtype_by_pk(id: $payloadType) {\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n        payloads(where: {auto_generated: {_eq: false}, build_phase: {_eq: \"success\"}, deleted: {_eq: false}}) {\n          id\n          tag\n          uuid\n          creation_time\n          filemetum {\n            agent_file_id\n            filename_text\n            id\n          }\n        }\n      }\n    }\n  }\n}\n `;\n\nexport function Step3SelectPayload(props){\n    const [payloadOptions, setPayloadOptions] = React.useState([]);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type_id\"]},\n        onCompleted: () => {\n          if(data.payloadtype_by_pk.wrap_these_payload_types.length > 0){\n            let options = [];\n            for(let i = 0; i < data.payloadtype_by_pk.wrap_these_payload_types.length; i++){\n              for(let j = 0; j < data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads.length; j++){\n                options.push({ptype: data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.ptype, ...data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads[j] })\n              }\n            }\n            setPayloadOptions(options);\n          }else{\n            snackActions.warning(\"No supported payload for that wrapper\");\n          }\n          \n        }\n    });\n    const finished = (selectedPayload) => {\n      if(selectedPayload.uuid === undefined){\n        snackActions.error(\"Can't continue without selecting a payload\");\n        return;\n      }\n      props.finished(selectedPayload.uuid);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Wrap Agent Into New Payload\n        </Typography> <br/>\n        <PayloadSelect payloadOptions={payloadOptions} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        </div>\n    );\n} \n\nfunction PayloadSelect(props) {\n  const classes = useStyles();\n  \n  const finished = (payload) => {\n    props.finished(payload);\n  }\nreturn (\n  <React.Fragment>\n      <TableContainer component={Paper}>\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Select</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.payloadOptions.map( (op) => (\n                    <PayloadsTableRow\n                        onSelected={finished}\n                        key={\"payload\" + op.id}\n                        payload={op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <div style={{paddingTop: \"20px\"}}>\n           <CreatePayloadNavigationButtons disableNext first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n        </div>\n      \n  </React.Fragment>\n);\n}\n\nexport function PayloadsTableRow(props){\n  const [openDetailedView, setOpenDetailedView] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const onSelected = () => {\n      props.onSelected(props.payload);\n  }\n  return (\n      <React.Fragment>\n          <TableRow key={\"payload\" + props.payload.uuid} hover>\n              <TableCell>\n              <Button size=\"small\" onClick={onSelected} color=\"primary\" variant=\"contained\">Select</Button>\n              </TableCell>\n              <TableCell>{toLocalTime(props.payload.creation_time, me.user.view_utc_time)}</TableCell>\n              <TableCell>{props.payload.filemetum.filename_text}</TableCell>\n              <TableCell>{props.payload.tag}</TableCell>\n              <TableCell>\n                  <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                      <InfoIcon />\n                  </IconButton>\n              </TableCell>\n          </TableRow>\n          <TableRow>\n          {openDetailedView ? (\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                onClose={()=>{setOpenDetailedView(false);}} \n                innerDialog={<DetailedPayloadTable {...props} payload_id={props.payload.id} onClose={()=>{setOpenDetailedView(false);}} />}\n            />\n          ) : (null) }\n        </TableRow>\n      </React.Fragment>\n      )\n}","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                snackActions.info(`Building payload ${data.payload[0].uuid}...`, {autoHideDuration: 5000});\n            }else{\n                if(data.payload[0].build_error !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": [],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": [],\n            \"wrapper\": true,\n            \"wrapped_payload\": props.buildOptions[2]\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectPayload} from './Step3SelectPayload';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Payload', 'Build']\n}\n\nexport function CreatePayloadWrapper(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectPayload buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nexport function EventFeedTableEventsActions(props){\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    \n    const onUpdateResolution = () => {\n        handleClose();\n        props.onUpdateResolution({id: props.id, resolved: !props.resolved});\n    }\n    const onUpdateLevel = () => {\n        handleClose();\n        props.onUpdateLevel({id:props.id});\n    }\n    const handleClose = () => {\n        setAnchorEl(null);\n      };\n    const onUpdateDeleted = () => {\n        handleClose();\n        props.onUpdateDeleted({id:props.id});\n    }\n    const getSurroundingEvents = () => {\n        handleClose();\n        props.getSurroundingEvents({id:props.id});\n    }\n    const handleClick = React.useCallback((e) => {\n        setAnchorEl(e.currentTarget)\n    }, []);\n    return (\n        <ListItemSecondaryAction>\n            <IconButton aria-controls={\"eventmenu\" + props.id} aria-haspopup=\"true\" onClick={handleClick}><MoreVertIcon/></IconButton>\n                <Menu elevation={5} id={\"eventmenu\" + props.id} anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleClose} >\n                    {\n                        props.level === \"warning\" && props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Unresolve</MenuItem>\n                        ) : ( props.level === \"warning\" && !props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Resolve</MenuItem>\n                            ) : (\n                            <MenuItem onClick={onUpdateLevel}>Make Warning</MenuItem>\n                            )\n                        )\n                    }\n                    <MenuItem onClick={getSurroundingEvents}>Get Surrounding Events</MenuItem>\n                    <MenuItem onClick={onUpdateDeleted}><DeleteIcon/>Delete</MenuItem>\n                </Menu>\n            </ListItemSecondaryAction>\n        )\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EventFeedTableEventsActions} from './EventFeedTableEventsActions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: '36ch',\n  },\n  inline: {\n    display: 'inline',\n  },\n}));\n\nexport function EventFeedTableEvents(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n\n    return (\n            <ListItem alignItems=\"flex-start\" style={{...props.style, }}>\n                <ListItemAvatar>\n                    <Avatar>\n                        {props.operator ? props.operator.username[0] : \"M\"}\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText disableTypography \n                    primary={\n                        <React.Fragment>\n                          <Typography\n                            component=\"span\"\n                            variant=\"body1\"\n                            className={classes.inline}\n                            style={{fontWeight: \"bold\", margin: 0, padding: 0}}\n                          >\n                            {props.operator ? props.operator.username : \"Mythic\"}\n                            {props.count > 1 ? \" ( \" + props.count + \" )\" : \"\"}\n                          </Typography>\n                          <Typography\n                            component=\"span\"\n                            variant=\"caption\"\n                            className={classes.inline}\n                            style={{margin: \"0 0 0 10px\"}}\n                            >\n                            {toLocalTime(props.timestamp, me.user.view_utc_time)}\n                            </Typography>\n                        </React.Fragment>\n                    }\n                    secondary={\n                          <pre style={{overflowX: \"auto\", width: \"max-content\", maxWidth: \"97%\", margin: \"0 0 0 0\", borderRadius: \"9px\", padding: \"5px\", backgroundColor: props.level === \"warning\" && props.resolved ? theme.palette.textBackgroundColorSuccess : (props.level === \"warning\" && !props.resolved ? theme.palette.textBackgroundColorError : (props.operator ? theme.palette.textBackgroundColor : theme.palette.textBackgroundColorMythic))}}>{props.message}</pre>\n                    }\n                    style={{}}\n                />\n                <EventFeedTableEventsActions id={props.id} level={props.level} \n                  onUpdateDeleted={props.onUpdateDeleted}\n                  onUpdateResolution={props.onUpdateResolution} \n                  onUpdateLevel={props.onUpdateLevel} \n                  getSurroundingEvents={props.getSurroundingEvents} \n                  resolved={props.resolved}/>\n\n            </ListItem>\n        )\n}\n\n\n","import React from 'react';\nimport SendIcon from '@material-ui/icons/Send';\nimport IconButton from '@material-ui/core/IconButton';\nimport {TextField} from '@material-ui/core';\n\nexport function EventFeedTableInput(props){\n    const [message, setMessage] = React.useState(\"\");\n    const onMessageChange = (evt) => {\n        evt.preventDefault();\n        setMessage(evt.target.value);\n    }\n    const onSubmitMessage = (e) => {\n        e.preventDefault();\n        if(message && message.length > 0){\n            props.onSubmitMessage(message);\n            setMessage(\"\");\n        }\n    } \n\n    return (          \n        <div style={{padding: \"0\", margin: \"0\", position: \"absolute\", bottom: 0, width: \"100%\"}}>\n            <form onSubmit={onSubmitMessage}>\n                <TextField InputProps={{endAdornment:\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitMessage}>\n                        <SendIcon/>\n                    </IconButton>\n                    }} \n                    fullWidth\n                    size=\"small\"\n                    style={{padding:0,margin:0}}\n                    variant=\"outlined\"\n                    value={message} onChange={onMessageChange}\n                    label=\"Type Message...\" \n                />\n            </form>\n        </div>  \n    )\n}\n\n","import React, { useEffect, useRef } from 'react';\nimport { EventFeedTableEvents } from './EventFeedTableEvents';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport { EventFeedTableInput } from './EventFeedTableInput';\nimport {Button} from '@material-ui/core';\nimport {VariableSizeList } from 'react-window';\nimport Autosizer from 'react-virtualized-auto-sizer';\n\nconst Row = ({data, index, style}) => {\n    const op = data[data.length - index - 1];\n    return (\n        <div style={style}>\n            <EventFeedTableEvents\n                {...op}\n            />\n        </div> \n    )\n};\n\nconst EventList = ({onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, operationeventlog}) => {\n    const listRef = React.createRef();\n    const getItemSize = (index) => {\n        const op = operationeventlog[operationeventlog.length - index - 1];\n        return 75 + (20 * (op[\"message\"].match(/\\n/g) || []).length);\n    }\n    const eventlogWithFunctions = operationeventlog.map( (oplog) => {\n        return {onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, ...oplog}\n    });\n    useEffect( () => {\n        if(listRef.current){\n            listRef.current.resetAfterIndex(0);\n        }\n    }, [operationeventlog])\n    return (\n        <Autosizer>\n            {({height, width}) => (\n                <VariableSizeList\n                    ref={listRef}\n                    height={height-50}\n                    itemData={eventlogWithFunctions}\n                    itemCount={operationeventlog.length}\n                    width={width}\n                    itemSize={getItemSize}\n                    overscanCount={20}\n                    >\n                        {Row}\n                </VariableSizeList>\n            )}\n        </Autosizer>\n    )\n};\n\nexport function EventFeedTable(props){\n    const messagesEndRef = useRef(null);\n    const theme = useTheme();\n    \n    const onSubmitMessage = (message) => {\n        if(message && message.length > 0){\n            props.onSubmitMessage({level:\"info\", message});\n            scrollToBottom();\n        }\n    } \n    const scrollToBottom = () => {\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" })\n      }\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main,  color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Operational Event Messages\n                </Typography>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.loadMore()}}>Load More Events</Button>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.loadNextError()}}>Load All Errors</Button>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.resolveViewableErrors()}}>Resolve Viewable Errors</Button>\n                <Button variant=\"contained\" color={\"secondary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.resolveAllErrors()}}>Resolve All Errors</Button>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", height: \"calc(90vh)\", backgroundColor: theme.body}} variant={\"elevation\"}>\n                <EventList \n                    onUpdateResolution={props.onUpdateResolution}\n                    onUpdateLevel={props.onUpdateLevel}\n                    onUpdateDeleted={props.onUpdateDeleted}\n                    getSurroundingEvents={props.getSurroundingEvents}\n                    operationeventlog={props.operationeventlog}/>\n                <div ref={messagesEndRef} />\n                <EventFeedTableInput onSubmitMessage={onSubmitMessage} />\n            </Paper>\n        </React.Fragment>\n    )\n}","import React  from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {EventFeedTable} from './EventFeedTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst SURROUNDING_EVENTS = 5;\nconst EVENT_QUERY_SIZE = 100;\nconst GET_Event_Feed = gql`\nquery GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const SUB_Event_Feed = gql`\nsubscription GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\nconst GET_Surrounding_Events = gql`\nquery GetSurroundingOperationEventLogs($operation_id: Int!, $lower_id: Int!, $upper_id: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, id: {_gt: $lower_id, _lt: $upper_id}}, order_by: {id: desc}) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const Create_Operational_Event_Log = gql`\nmutation CreateOperationEventLog($message: String!, $level: String!) {\n  insert_operationeventlog_one(object:{level: $level, message: $message}) {\n    id\n  }\n}\n `;\n const GET_Event_Feed_Next_Error = gql`\n query GetOperationEventLogError($operation_id: Int!) {\n   operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}}, order_by: {id: desc}) {\n     id\n     level\n     message\n     resolved\n     timestamp\n     count\n     operator {\n       id\n       username\n     }\n   }\n }\n  `;\n  const Update_Deleted = gql`\nmutation UpdateDeletedOperationEventLog($id: Int!) {\n  update_operationeventlog(where:{id: {_eq: $id}}, _set: {deleted: true}) {\n    returning{\n        id\n        deleted\n    }\n  }\n}\n `;\n const Update_Resolution = gql`\nmutation UpdateResolutionOperationEventLog($id: Int!, $resolved: Boolean!) {\n  update_operationeventlog_by_pk(pk_columns:{id: $id}, _set: {resolved: $resolved}) {\n    id\n    resolved\n  }\n}\n `;\n const Update_Level = gql`\nmutation UpdateLevelOperationEventLog($id: Int!) {\n  update_operationeventlog_by_pk(pk_columns: {id: $id}, _set: {level: \"warning\"}) {\n    id\n    level\n  }\n}\n `;\n const Update_ResolveViewableErrors = gql`\n mutation UpdateResolveViewableErrorsOperationEventLog($ids: [Int]!) {\n   update_operationeventlog(where:{id: {_in: $ids}}, _set: {resolved: true}) {\n     returning{\n         id\n         resolved\n     }\n   }\n }\n  `;\n  const Update_ResolveAllErrors = gql`\n  mutation UpdateResolveAllErrorsOperationEventLog($operation_id: Int!) {\n    update_operationeventlog(where: {resolved: {_eq: false}, operation_id: {_eq: $operation_id}}, _set: {resolved: true}) {\n      returning{\n          id\n          resolved\n      }\n    }\n  }\n   `;\nexport function EventFeed(props){\n  const me = useReactiveVar(meState);\n  const [operationeventlog, setOperationEventLog] = React.useState([]);\n  const [offset, setOffset] = React.useState(0);\n  useSubscription(SUB_Event_Feed, {\n    variables: {operation_id: me.user.current_operation_id, offset: 0, eventQuerySize: EVENT_QUERY_SIZE}, fetchPolicy: \"network-only\",\n    shouldResubscribe: true,\n    onSubscriptionData: ({subscriptionData}) => {\n      if(offset === 0){\n        setOffset(subscriptionData.data.operationeventlog.length);\n      }\n      const newEvents = subscriptionData.data.operationeventlog.reduce( (prev, cur) => {\n        if(prev.find(({ id }) => id === cur.id)){\n          let indx = prev.findIndex( ({id}) => id === cur.id);\n          let updatingPrev = [...prev];\n          updatingPrev[indx] = cur;\n          return [...updatingPrev];\n        }\n        return [...prev, cur];\n      }, [...operationeventlog]);\n      newEvents.sort((a,b) => (a.id > b.id) ? -1 : ((b.id > a.id) ? 1 : 0));\n      setOperationEventLog(newEvents);\n    }\n});\n  const [getMoreTasking] = useLazyQuery(GET_Event_Feed, {\n      onError: data => {\n          console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        snackActions.dismiss();\n          if(data.operationeventlog.length === 0){\n            snackActions.info(\"No more events\");\n            return;\n          }\n          const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n            if(prev.find(({ id }) => id === cur.id)){\n              return [...prev];\n            }\n            return [...prev, cur];\n          }, [...operationeventlog]);\n          setOffset(offset + EVENT_QUERY_SIZE);\n          setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more events\");\n      }\n  });\n  const [getSurroundingEventQuery] = useLazyQuery(GET_Surrounding_Events, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        snackActions.dismiss();\n        let foundNew = false;\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          foundNew = true;\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        if(foundNew){\n          snackActions.success(\"Successfully fetched surrounding events\");\n        }else{\n          snackActions.info(\"No additional surrounding events\");\n        }\n        \n    }\n});\n  const [getNextError] = useLazyQuery(GET_Event_Feed_Next_Error, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      snackActions.dismiss();\n        if(data.operationeventlog.length === 0){\n          snackActions.info(\"No more events\");\n          return;\n        }\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more errors\");\n    }\n  });\n  const [newOperationEventLog] = useMutation(Create_Operational_Event_Log);\n  const [updateDeleted] = useMutation(Update_Deleted, {\n    update: (cache, {data}) => {\n        const removedMessage = data.update_operationeventlog.returning[0];\n        const newMessages = operationeventlog.filter(op => (op.id !== removedMessage.id));\n        setOperationEventLog(newMessages);\n        snackActions.success(\"Successfully deleted event log\");\n    }\n  });\n  const [updateResolution] = useMutation(Update_Resolution, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, resolved: updatedMessage.resolved};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateLevel] = useMutation(Update_Level, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, level: updatedMessage.level};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateResolveViewable] = useMutation(Update_ResolveViewableErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss();\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Viewable Errors to Resolve\");\n      }\n      \n    }\n  });\n  const [updateResolveAllErrors] = useMutation(Update_ResolveAllErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss()\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Errors to Resolve\");\n      }\n      \n    }\n  });\n  const onUpdateDeleted = ({id}) => {\n      snackActions.info(\"Deleting event log...\");\n      updateDeleted({variables: {id}});\n  }\n  const onSubmitMessage = ({level, message}) => {\n      newOperationEventLog({variables: {level, message}});\n  }\n  const onUpdateResolution = ({id, resolved}) => {\n    updateResolution({variables: {id, resolved}});\n  }\n  const onUpdateLevel = ({id}) => {\n    updateLevel({variables: {id}})\n  }\n  const loadMore = () => {\n    snackActions.info(\"Loading more events...\");\n    getMoreTasking({variables: {operation_id: me.user.current_operation_id, offset: offset, eventQuerySize: EVENT_QUERY_SIZE}})\n  }\n  const loadNextError = () => {\n    snackActions.info(\"Loading more errors...\");\n    getNextError({variables: {operation_id: me.user.current_operation_id}})\n  }\n  const getSurroundingEvents = ({id}) => {\n    snackActions.info(\"Loading surrounding events...\");\n    getSurroundingEventQuery({variables: {lower_id: id - SURROUNDING_EVENTS, upper_id: id + SURROUNDING_EVENTS, operation_id: me.user.current_operation_id}})\n  }\n  const resolveViewableErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    const resolveIds = operationeventlog.reduce( (prev, cur) => {\n      if(cur.level === \"warning\" && !cur.resolved){\n        return [...prev, cur.id];\n      }else{\n        return [...prev];\n      }\n    }, []);\n    updateResolveViewable({variables: {ids: resolveIds}});\n  }\n  const resolveAllErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    updateResolveAllErrors({variables: {operation_id: me.user.current_operation_id}});\n  }\n  return (\n      <EventFeedTable onSubmitMessage={onSubmitMessage} operationeventlog={operationeventlog} loadMore={loadMore} loadNextError={loadNextError}\n                      onUpdateDeleted={onUpdateDeleted} onUpdateResolution={onUpdateResolution} onUpdateLevel={onUpdateLevel} getSurroundingEvents={getSurroundingEvents}\n                      resolveViewableErrors={resolveViewableErrors} resolveAllErrors={resolveAllErrors}\n      />\n  );\n}\n","import React, { useEffect, useRef } from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nexport function OperationTableRowUpdateOperatorsDialogRow(props){\n    const [checked, setChecked] = React.useState(false);\n    const [viewMode, setViewMode] = React.useState(\"operator\");\n    const [blockListName, setBlockListName] = React.useState({});\n    const options = [\"operator\", \"spectator\", \"lead\"];\n    const inputRef = useRef(null); \n    useEffect( () => {\n      setChecked(props.operator.checked);\n      setViewMode(props.operator.view_mode);\n      console.log(props.operator);\n      if(!props.operator.disabledcommandsprofile){\n        setBlockListName(\"\")\n      }else{\n        setBlockListName(props.operator.disabledcommandsprofile.name);\n      }\n      \n\n    }, [props.operator]);\n    const onBoolChange = (event) => {\n      setChecked(event.target.checked);\n      props.updateOperator({...props.operator, checked: event.target.checked, view_mode: viewMode});\n    }\n    const handleChange = (event) => {\n      setViewMode(event.target.value);\n      props.updateOperator({...props.operator, checked, view_mode: event.target.value});\n    };\n    const handleBlockListChange = (event) => {\n      setBlockListName(event.target.value);\n      const blockListItemIndex = props.commandBlockLists.findIndex( cbl => cbl.name === event.target.value);\n      if(blockListItemIndex > -1){\n        props.updateOperator({...props.operator, checked, disabledcommandsprofile: props.commandBlockLists[blockListItemIndex]});\n      }else{\n        props.updateOperator({...props.operator, checked, disabledcommandsprofile: null});\n      }\n      \n    }\n    return (\n        <React.Fragment>\n            <TableRow>\n                <TableCell><Switch checked={checked} onChange={onBoolChange} color=\"secondary\" /></TableCell>\n                <TableCell>{props.operator.username}</TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={viewMode}\n                        onChange={handleChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        {options.map( (opt) => (\n                            <MenuItem value={opt} key={opt}>{opt}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Block List Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={blockListName}\n                        onChange={handleBlockListChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        <MenuItem value={-1} key={\"None\"}>None</MenuItem>\n                        {props.commandBlockLists.map( (opt) => (\n                            <MenuItem value={opt.name} key={props.operator.username + opt.name}>{opt.name}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React, {  } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation, useQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport {OperationTableRowUpdateOperatorsDialogRow} from './OperationTableRowUpdateOperatorsDialogRow';\n\nconst GET_Operations = gql`\nquery GetOperation($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      disabledcommandsprofile {\n        name\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n  disabledcommandsprofile(where: {operation_id: {_eq: $operation_id}}, distinct_on: name, order_by: {name: asc}) {\n    name\n    id\n  }\n}\n`;\nconst Update_Lead = gql`\nmutation updateLeadMutation($operation_id: Int!, $admin_id: Int!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {admin_id: $admin_id}) {\n    admin {\n      id\n      username\n    }\n    id\n  }\n}\n`;\nconst Update_OperatorViewMode = gql`\nmutation updateOperatorViewMode($operatoroperation_id: Int!, $view_mode: String!, $disabledcommandsprofile: Int) {\n  update_operatoroperation_by_pk(pk_columns: {id: $operatoroperation_id}, _set: {view_mode: $view_mode, base_disabled_commands_id: $disabledcommandsprofile}) {\n    id\n    view_mode\n  }\n}`;\nconst Remove_OperatorFromOperation = gql`\nmutation removeOperatorsFromOperation($operatoroperation_ids: [Int!]!) {\n  delete_operatoroperation(where: {id: {_in: $operatoroperation_ids}}) {\n    returning {\n      id\n    }\n  }\n}`;\nconst Add_OperatorsToOperation = gql`\nmutation addNewOperators($operators: [operatoroperation_insert_input!]!) {\n  insert_operatoroperation(objects: $operators) {\n    returning {\n      id\n    }\n  }\n}`;\nexport function OperationTableRowUpdateOperatorsDialog(props) {\n    const [operators, setOperators] = React.useState([]);\n    const [admin, setAdmin] = React.useState({});\n    const [originalOperators, setOriginalOperators] = React.useState([]);\n    const [commandBlockLists, setCommandBlockLists] = React.useState([]);\n    useQuery(GET_Operations, {variables: {operation_id: props.id}, fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const allOperators = data.operator.map( (operator) => {\n          return {...operator, checked: false}\n        });\n        setOriginalOperators(data.operation_by_pk.operatoroperations);\n        setAdmin(data.operation_by_pk.admin);\n        const updateAssignments = allOperators.map( (operator) => {\n          const assigned = data.operation_by_pk.operatoroperations.find( (op) => op.operator.id === operator.id );\n          if( assigned ){\n            if(assigned.operator.id === data.operation_by_pk.admin.id){\n              return {...operator, checked: true, view_mode: \"lead\", operatoroperation_id: assigned.id, disabledcommandsprofile: assigned.disabledcommandsprofile};\n            }\n            return {...operator, checked: true, view_mode: assigned.view_mode, operatoroperation_id: assigned.id, disabledcommandsprofile: assigned.disabledcommandsprofile};\n          }\n          return {...operator, view_mode: \"operator\"};\n        });\n        updateAssignments.sort( (a,b) => a.username > b.username ? 1 : -1)\n        setOperators(updateAssignments);\n        const blockListNames = [...data.disabledcommandsprofile];\n        setCommandBlockLists(blockListNames)\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to get operational data\");\n        console.error(data);\n      }\n    });\n    const [updateOperationLead] = useMutation(Update_Lead, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated Lead\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operation\");\n        console.log(\"error updating operation\", data);\n      }\n    })\n    const [addOperators] = useMutation(Add_OperatorsToOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully added operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to add operators\");\n        console.error(\"error adding operators to operation\", data);\n      }\n    })\n    const [removeOperatorsMutation] = useMutation(Remove_OperatorFromOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully removed operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to remove operators\");\n        console.error(\"error removing operators from operation\", data);\n      }\n    })\n    const [updateOperatorViewMode] = useMutation(Update_OperatorViewMode, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated operator view mode\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operator view mode\");\n        console.error(\"failed to update view mode: \", data);\n      }\n    })\n    const onAccept = () =>{\n      // make sure there is only one with view_mode of \"lead\"\n      //   set that operator as the lead, add/remove the other operators\n      const newAdmin = operators.find( (op) => op.view_mode === \"lead\");\n      if(!newAdmin){\n        snackActions.error(\"No Lead for the operation is set\");\n        return;\n      }\n      if(newAdmin.id !== admin.id){\n        updateOperationLead({variables: {\n          operation_id: props.id,\n          admin_id: newAdmin.id\n        }});\n      }\n      // now loop through the props.assignedOperators to see \n      let newOperators = [];\n      let removeOperators = [];\n      operators.forEach( (op) => {\n        let oldMatch = originalOperators.find( (oop) => oop.operator.id === op.id);\n        if(oldMatch){\n          // op was listed in the original set, so we're looking to update or remove based on checked/view_mode\n          if(op.checked){\n            // op is still checked, so just a potential update\n            if(op.view_mode !== oldMatch.view_mode || op.disabledcommandsprofile !== oldMatch.disabledcommandsprofile){\n              updateOperatorViewMode({variables: {operatoroperation_id: oldMatch.id, view_mode: op.view_mode, disabledcommandsprofile: op.disabledcommandsprofile?op.disabledcommandsprofile.id:null}});\n            }\n          }\n          else{\n            // op is unchecked, but was originally listed, so remove this operator\n            removeOperators.push(oldMatch.id);\n          }\n          //op was checked then, is checked now, and nothing changed. just move on\n        }else{\n          //op wasn't listed, so if checked is true, then we want to add them to the operation\n          if(op.checked){\n            newOperators.push({operation_id: props.id, operator_id: op.id, view_mode: op.view_mode});\n          }\n          // op wasnt checked then, isn't checked now, so move on\n        }\n      });\n      if(newOperators.length > 0){\n        addOperators({variables: {operators: newOperators}});\n      }\n      if(removeOperators.length > 0){\n        removeOperatorsMutation({variables: {operatoroperation_ids: removeOperators}});\n      }      \n      props.onClose();\n    }\n    const updateOperator = (op) => {\n      let updates = [...operators];\n      if(op.view_mode === \"lead\"){\n        //make sure nobody else has this, if they do, demote them down to \"operator\"\n        updates = updates.map( (operator) => {\n          if(operator.view_mode === \"lead\"){\n            return {...operator, view_mode: \"operator\"}\n          }\n          return {...operator}\n        });\n      }\n      updates = updates.map( (operator) => {\n        if(operator.id === op.id){\n          return {...op};\n        }\n        return {...operator};\n      });\n      setOperators(updates);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify Operator Assignments</DialogTitle>\n        <DialogContent dividers={true}>\n          <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>   \n              <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"8rem\"}}>Assign to Operation</TableCell>\n                          <TableCell style={{width: \"8rem\"}}>Operator</TableCell>\n                          <TableCell style={{width: \"10rem\"}}>Role</TableCell>\n                          <TableCell >Block List</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                  \n                  {operators.map( (op) => (\n                      <OperationTableRowUpdateOperatorsDialogRow\n                          key={\"operator\" + op.id} operator={op} updateOperator={updateOperator} commandBlockLists={commandBlockLists}\n                      />\n                  ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Switch from '@material-ui/core/Switch';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\n\nconst GET_OperationData = gql`\nquery GetOperations($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    name\n    id\n    channel\n    display_name\n    icon_emoji\n    icon_url\n    webhook\n    webhook_message\n    complete\n  }\n}\n`;\n\nexport function OperationTableRowNotificationsDialog(props) {\n    const [name, setName] = React.useState(\"\");\n    const [channel, setChannel] = React.useState(\"\");\n    const [displayName, setDisplayName] = React.useState(\"\");\n    const [iconEmoji, setIconEmoji] = React.useState(\"\");\n    const [iconURL, setIconURL] = React.useState(\"\");\n    const [webhook, setWebhook] = React.useState(\"\");\n    const [webhookMessage, setWebhookMessage] = React.useState(\"\");\n    const [complete, setComplete] = React.useState(false);\n    \n    useQuery(GET_OperationData, {\n      fetchPolicy: \"no-cache\",\n      variables: {operation_id: props.id},\n      onCompleted: (data) => {\n        let webhookMessage = data.operation_by_pk.webhook_message;\n        try{\n          webhookMessage = JSON.stringify(JSON.parse(webhookMessage), null, 4);\n        }catch(error){\n          \n        }\n          setName(data.operation_by_pk.name);\n          setChannel(data.operation_by_pk.channel);\n          setDisplayName(data.operation_by_pk.display_name);\n          setIconEmoji(data.operation_by_pk.icon_emoji);\n          setIconURL(data.operation_by_pk.icon_url);\n          setWebhook(data.operation_by_pk.webhook);\n          setWebhookMessage(webhookMessage);\n          setComplete(data.operation_by_pk.complete);\n      },\n      onError: () => {\n        snackActions.error(\"Failed to fetch data\");\n      }\n    });\n    const onTextChange = (name, value, error) => {\n      switch(name){\n        case \"name\":\n          setName(value);\n          break;\n        case \"Webhook Channel\":\n          setChannel(value);\n          break;\n        case \"Webhook Display Name\":\n          setDisplayName(value);\n          break;\n        case \"Webhook Icon Emoji\":\n          setIconEmoji(value);\n          break;\n        case \"Webhook Icon URL\":\n          setIconURL(value);\n          break;\n        case \"Webhook URL\":\n          setWebhook(value);\n          break;\n        case \"Webhook POST Message\":\n          setWebhookMessage(value);\n          break;\n        default:\n          break;\n      }\n    }\n    const onEditorChange = (value, event) => {\n      setWebhookMessage(value);\n    }\n    const onBoolChange = (event) => {\n      setComplete(event.target.checked);\n    }\n    const onAccept = () =>{\n      props.onUpdateOperation({\n        operation_id: props.id,\n        name: name,\n        channel: channel,\n        display_name: displayName,\n        icon_emoji: iconEmoji,\n        icon_url: iconURL,\n        webhook: webhook,\n        webhook_message: webhookMessage,\n        complete: complete\n      });\n      props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify {name}</DialogTitle>\n        <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n          <DialogContentText>\n            Use this dialog to update some information about an operation.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            value={name}\n            onChange={onTextChange}\n            margin=\"dense\"\n            name=\"name\"\n          />\n          Complete Operation? <Switch checked={complete} onChange={onBoolChange} color=\"secondary\" />\n          <MythicTextField\n            margin=\"dense\"\n            value={channel}\n            onChange={onTextChange}\n            name=\"Webhook Channel\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={displayName}\n            onChange={onTextChange}\n            name=\"Webhook Display Name\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconEmoji}\n            onChange={onTextChange}\n            name=\"Webhook Icon Emoji\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconURL}\n            onChange={onTextChange}\n            name=\"Webhook Icon URL\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={webhook}\n            onChange={onTextChange}\n            name=\"Webhook URL\"\n          />\n          <AceEditor \n              mode=\"json\"\n              theme={\"monokai\"}\n              onChange={onEditorChange}\n              fontSize={14}\n              showGutter={true}\n              maxLines={20}\n              highlightActiveLine={true}\n              value={webhookMessage}\n              width={\"100%\"}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { } from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { OperationTableRowUpdateOperatorsDialog } from './OperationTableRowUpdateOperatorsDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar, useMutation, gql} from '@apollo/client';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport {OperationTableRowNotificationsDialog} from './OperationTableRowNotificationsDialog';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\n\nconst updateCurrentOpertionMutation = gql`\nmutation updateCurrentOpertionMutation($operator_id: Int!, $operation_id: Int!) {\n  updateCurrentOperation(user_id: $operator_id, operation_id: $operation_id) {\n    status\n    error\n    operation_id\n  }\n}\n`;\nexport function OperationTableRow(props){\n    const [openUpdateNotifications, setOpenUpdateNotifications] = React.useState(false);\n    const [openUpdateOperators, setOpenUpdateOperators] = React.useState(false);\n    const [openChangeCurrentOperation, setOpenChangeCurrentOperation] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [updateCurrentOperation] = useMutation(updateCurrentOpertionMutation, {\n      onCompleted: (data) => {\n        if(data.updateCurrentOperation.status === \"success\"){\n          meState({...meState, user: {...meState[\"user\"], current_operation_id: data.updateCurrentOperation.operation_id, current_operation_name: data.updateCurrentOperation.operation_name}})\n          snackActions.success(\"Updated current operation\");\n        }else{\n          snackActions.error(data.updateCurrentOperation.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update current operation\");\n        console.error(data);\n      }\n    })\n    const makeCurrentOperation = () => {\n      updateCurrentOperation({variables: {operator_id: me.user.user_id, operation_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id} hover>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateNotifications(true);}} startIcon={<EditIcon/>} color={props.complete ? \"secondary\" : \"primary\"} variant=\"contained\">Edit</Button>\n                {openUpdateNotifications && \n                    <MythicDialog open={openUpdateNotifications} fullWidth maxWidth={\"lg\"}\n                        onClose={()=>{setOpenUpdateNotifications(false);}} \n                        innerDialog={<OperationTableRowNotificationsDialog onClose={()=>{setOpenUpdateNotifications(false);}} id={props.id} onUpdateOperation={props.onUpdateOperation} />}\n                     />\n                }\n                </TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateOperators(true);}} startIcon={<AssignmentIndIcon/>} color={props.complete ? \"secondary\" : \"primary\"} variant=\"contained\">Edit</Button>\n                {openUpdateOperators && \n                    <MythicDialog open={openUpdateOperators} maxHeight={\"calc(80vh)\"} fullWidth maxWidth={\"md\"}\n                        onClose={()=>{setOpenUpdateOperators(false);}} \n                        innerDialog={<OperationTableRowUpdateOperatorsDialog id={props.id} onClose={()=>{setOpenUpdateOperators(false);}}/>}\n                     />\n                }\n                </TableCell>\n                <TableCell>{props.name} {props.complete ? \" (Completed) \" : \"\"}</TableCell>\n                <TableCell>{props.admin.username}</TableCell>\n                <TableCell>\n                <Button size=\"small\" startIcon={<AssessmentIcon/>} onClick={() => {snackActions.warning(\"Not Implemented\")}} color=\"primary\" variant=\"contained\">Analysis</Button>\n                </TableCell>\n                <TableCell>{props.id === me.user.current_operation_id ? (\"Current Operation\") : (\n                  <React.Fragment>\n                    <Button size=\"small\"startIcon={<PlayArrowIcon/>} onClick={()=>{setOpenChangeCurrentOperation(true);}} color=\"primary\" variant=\"contained\">Make Current</Button>\n                    {openChangeCurrentOperation &&\n                      <MythicConfirmDialog onClose={() => {setOpenChangeCurrentOperation(false);}} onSubmit={makeCurrentOperation} \n                        open={openChangeCurrentOperation} title={\"Change Current Operation?\"} acceptText={\"Update\"}\n                        dialogText={\"Changing operations will force you to log in again\"}/>\n                    }\n                    \n                  </React.Fragment>\n                )}</TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { OperationTableRow } from './OperationTableRow';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport {SettingsOperatorDialog} from '../Settings/SettingsOperatorDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql} from '@apollo/client';\n\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    error\n    id\n    status\n  }\n}\n`;\nconst Update_Operation = gql`\nmutation MyMutation($operation_id: Int!, $channel: String!, $complete: Boolean!, $display_name: String!, $icon_emoji: String!, $icon_url: String!, $name: String!, $webhook: String!, $webhook_message: String!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {channel: $channel, complete: $complete, display_name: $display_name, icon_emoji: $icon_emoji, icon_url: $icon_url, name: $name, webhook: $webhook, webhook_message: $webhook_message}) {\n    id\n    name\n    complete\n  }\n}\n`;\nconst newOperationMutation = gql`\nmutation newOperationMutation{\n    createOperation{\n        status\n        error\n        operation{\n            name\n            id\n            admin {\n                id\n                username\n            }\n        }\n        \n    }\n}\n`;\n\nexport function OperationTable(props){\n    const theme = useTheme();\n    const [openNewOperator, setOpenNewOperatorDialog] = React.useState(false);\n    const [newOperator] = useMutation(newOperatorMutation, {\n        update: (cache, {data}) => {\n            if(data.createOperator.status === \"success\"){\n                snackActions.success(\"Created operator\");\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateOperation] = useMutation(Update_Operation, {\n        onCompleted: (data) => {\n          props.onUpdateOperation(data.update_operation_by_pk);\n          snackActions.success(\"Successfully updated operation\");\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to update operation\");\n          console.log(\"error updating operation\", data);\n        }\n      });\n    const [newOperation] = useMutation(newOperationMutation, {\n        onCompleted: (data) => {\n            console.log(data);\n            if(data.createOperation.status === \"success\"){\n                snackActions.success(\"Successfully created operation!\");\n                props.onNewOperation(data.createOperation.operation);\n            }else{\n                snackActions.error(data.createOperation.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        }\n    })\n    const onUpdateOperation = ({operation_id, name, channel, display_name, icon_emoji, icon_url, webhook, webhook_message, complete}) => {\n        updateOperation({variables:{\n            operation_id,\n            name,\n            channel,\n            display_name,\n            icon_emoji,\n            icon_url,\n            webhook,\n            webhook_message,\n            complete\n        }});\n    }\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            newOperator({variables:{username:username, password:passwordNew}})\n            setOpenNewOperatorDialog(false);\n        }\n    }\n    const onSubmitNewOperation = () => {\n        newOperation()\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Operations\n            </Typography>\n            <Button size=\"small\" onClick={onSubmitNewOperation} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operation</Button>\n            \n            <Button size=\"small\" onClick={()=>{setOpenNewOperatorDialog(true);}} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n            {openNewOperator &&\n                <MythicDialog open={openNewOperator} \n                    onClose={()=>{setOpenNewOperatorDialog(false);}} \n                    innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewOperatorDialog(false);}}  {...props}/>}\n                />\n            }\n            \n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"8rem\"}}>Configure</TableCell>\n                        <TableCell style={{width: \"8rem\"}}>Operators</TableCell>\n                        <TableCell>Operation Name</TableCell>\n                        <TableCell>Operation Admin</TableCell>\n                        <TableCell style={{width: \"10rem\"}}>Analysis</TableCell>\n                        <TableCell style={{width: \"12rem\"}}>Operation Status</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.operations.map( (op) => (\n                    <OperationTableRow\n                        key={\"operation\" + op.id} onUpdateOperation={onUpdateOperation}\n                        {...op} operator={props.operator}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent'\nimport Divider from '@material-ui/core/Divider';\nimport {useQuery, gql} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    overflow: 'auto',\n    backgroundColor: \"rgb(76,80,86) !important\"\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nfunction PayloadTypeBlockListPreMemo(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    useEffect( () => {\n      props.onChange({selected: right, ptype: props.ptype});\n    }, [right])\n    const customList = (title, items) => (\n      <Paper style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.paper}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <CardContent style={{height: \"calc(30vh)\", overflow: \"auto\"}} className={classes.paper}>\n            <List dense component=\"div\" role=\"list\" style={{padding:0}} className={classes.paper}>\n              {items.map((valueObj) => {\n                const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n                const labelId = `transfer-list-item-${value}-label`;\n                return (\n                  <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                    <ListItemIcon>\n                      <Checkbox\n                        checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                );\n              })}\n            </List>\n          </CardContent>\n        </Card>\n      </Paper>\n    );\n    \n  return (\n    <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n      <Grid item xs={12}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                {props.ptype}\n            </Typography>\n        </Paper>\n      </Grid>\n      <Grid item xs={5}>{customList(leftTitle, left)}</Grid>\n      <Grid item>\n        <Grid container direction=\"column\" alignItems=\"center\">\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleAllRight}\n            disabled={left.length === 0}\n            aria-label=\"move all right\"\n          >\n            \n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleCheckedRight}\n            disabled={leftChecked.length === 0}\n            aria-label=\"move selected right\"\n          >\n            &gt;\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleCheckedLeft}\n            disabled={rightChecked.length === 0}\n            aria-label=\"move selected left\"\n          >\n            &lt;\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleAllLeft}\n            disabled={right.length === 0}\n            aria-label=\"move all left\"\n          >\n            \n          </Button>\n        </Grid>\n      </Grid>\n      <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n    </Grid>\n  );\n}\nconst PayloadTypeBlockList = React.memo(PayloadTypeBlockListPreMemo);\nconst getPayloadTypesAndCommandsQuery = gql`\n  query getPayloadTypesAndCommands{\n    payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n      commands(order_by: {cmd: asc}) {\n        cmd\n        id\n      }\n      id\n      ptype\n    }\n  }\n`;\nexport function EditBlockListDialog({dialogTitle, onSubmit, blockListName: propBlockListName, onClose, currentSelected, editable}) {\n  const [payloadtypes, setPayloadTypes] = React.useState([]);\n  const [selectedCommands, setSelectedCommands] = React.useState({});\n  const [blockListName, setBlockListName] = React.useState(\"\");\n  useQuery(getPayloadTypesAndCommandsQuery, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      if(propBlockListName){\n        setBlockListName(propBlockListName);\n      }\n      // for each of the possible commands mark them as selected or not\n      const updatedPayloadTypes = data.payloadtype.map( p => {\n        let selectedCommands = [];\n        if(currentSelected[p.ptype] !== undefined){\n          selectedCommands = [...currentSelected[p.ptype]];\n        }\n        return {...p, selected: selectedCommands};\n      });\n      setPayloadTypes(updatedPayloadTypes);      \n      setSelectedCommands({...currentSelected});\n      \n    },\n    onError: (data) => {\n\n    }\n  })\n  const onChange = React.useCallback( ({selected, ptype}) => {\n    setSelectedCommands({...selectedCommands, [ptype]: selected});\n  }, [selectedCommands]);\n  const onChangeBlockListName = (name, value, error) => {\n    setBlockListName(value);\n  };\n  const submit = () => {\n    if(blockListName.trim() === \"\"){\n      snackActions.warning(\"Must supply a block list name\");\n      return;\n    }\n    // now diff selectedCommands with props.currentSelected to see which should be added or removed\n    let toAdd = [];\n    let toRemove = [];\n    for(const value of Object.values(selectedCommands)){\n      //key is the payload type name, value is an array of commands\n      for(let i = 0; i < value.length; i++){\n        toAdd.push({command_id: value[i].id, name:blockListName.trim()});\n      }\n    }\n    for(const value of Object.values(currentSelected)){\n      for(let i = 0; i < value.length; i++){\n        // if value[i] in add, then remove it from add because it was selected before and is selected now\n        // if value[i] is not in add, then add it to toRemove because it was selected and is no longer selected\n        let index = toAdd.findIndex(c => c.command_id === value[i].id);\n        if(index > -1){\n          toAdd.splice(index, 1); //remove it\n        }else{\n          toRemove.push({command_id: value[i].id, name: blockListName.trim()});\n        }\n      }\n    }\n    onSubmit({toAdd, toRemove});\n    onClose();\n  }\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{dialogTitle}</DialogTitle>\n      <DialogContent dividers={true}>\n        <MythicTextField disabled={!editable} onChange={onChangeBlockListName} value={blockListName} name=\"Block List Name\" autoFocus requiredValue/>\n        {payloadtypes.map(p => (\n          <PayloadTypeBlockList key={p.ptype} leftTitle={\"Not Blocked\"} onChange={onChange} rightTitle={\"Blocked Commands\"} itemKey={\"cmd\"} right={p.selected} left={p.commands} ptype={p.ptype}/>\n        ))}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} variant=\"contained\" color=\"primary\">\n          Close\n        </Button>\n        <Button onClick={submit} variant=\"contained\" color=\"secondary\">\n          Submit\n        </Button>\n      </DialogActions>\n    </React.Fragment>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EditBlockListDialog} from './EditBlockListDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport TuneIcon from '@material-ui/icons/Tune';\n\nconst newBlockListEntry = gql`\nmutation newBlockListsEntries($entries: [disabledcommandsprofile_insert_input!]!) {\n    insert_disabledcommandsprofile(objects: $entries) {\n        returning {\n            id\n            name\n            command{\n              id\n              cmd\n              payloadtype{\n                ptype\n              }\n            }\n        }\n    }\n}\n`;\nconst deleteBlockListMutation = gql`\nmutation deleteEntireBlockList($name: String!){\n    deleteBlockList(name: $name){\n        status\n        error\n        name\n    }\n}\n`;\nconst deleteBlockListEntriesMutation = gql`\nmutation deleteBlockListEntries($name: String!, $entries: [Int!]!){\n    deleteBlockListEntry(name: $name, entries: $entries){\n        status\n        error\n        name\n        deleted_ids\n    }\n}\n`;\n\nexport function CommandBlockListTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const [blockLists, setBlockLists] = React.useState([]);\n    const [newBlockListEntries] = useMutation(newBlockListEntry, {\n        onCompleted: (data) => {\n            const newBlockList = data.insert_disabledcommandsprofile.returning.reduce( (prev, cur) => {\n                if(prev[cur.command.payloadtype.ptype] === undefined){\n                    prev[cur.command.payloadtype.ptype] = [];\n                }\n                prev[cur.command.payloadtype.ptype].push(cur);\n                return {...prev};\n            }, {});\n            // check if this is part of a new block list\n            \n            let currentBlockLists = [...blockLists];\n            let found = false;\n            const newBlockLists = currentBlockLists.map( cbl => {\n                if(cbl[\"name\"] === data.insert_disabledcommandsprofile.returning[0].name){\n                    found = true;\n                    // now we need to update cbl[\"entries\"] based on the newBlockList dictionary\n                    let newEntries = {};\n                    for(const [key, value] of Object.entries(newBlockList)){\n                        if(newEntries[key] === undefined){\n                            newEntries[key] = [...value];\n                        }else{\n                            newEntries[key] = [...newEntries[key], ...value];\n                        }\n                    }\n                    for(const [key, value] of Object.entries(cbl[\"entries\"])){\n                        if(newEntries[key] === undefined){\n                            newEntries[key] = [...value];\n                        }else{\n                            newEntries[key] = [...newEntries[key], ...value];\n                        }\n                    }\n                    return {...cbl, entries: newEntries};\n                }else{\n                    return {...cbl};\n                }\n            });\n            if(!found){\n                setBlockLists([...newBlockLists, {\"name\": data.insert_disabledcommandsprofile.returning[0].name, \"entries\": newBlockList}]);\n            }else{\n                setBlockLists([...newBlockLists]);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new block lists\");\n          console.log(err);\n        }\n    });\n    const [deleteBlockList] = useMutation(deleteBlockListMutation, {\n        onCompleted: (data) => {\n            if(data.deleteBlockList.status === \"success\"){\n                const filteredBlockLists = blockLists.filter( b => b.name !== data.deleteBlockList.name);\n                setBlockLists(filteredBlockLists);\n                snackActions.success(\"Successfully deleted block list\");\n            }else{\n                snackActions.error(data.deleteBlockList.error);\n            }\n        },\n        onError: (err) => {\n            snackActions.warning(\"Unable to delete block list\");\n            console.log(err);\n        }\n    })\n    const [deleteBlockListEntries] = useMutation(deleteBlockListEntriesMutation, {\n        onCompleted: (data) => {\n            if(data.deleteBlockListEntry.status === \"success\"){\n                snackActions.success(\"Successfully deleted block list\");\n                let currentBlockLists = [...blockLists];\n                const newBlockLists = currentBlockLists.map( cbl => {\n                    if(cbl[\"name\"] === data.deleteBlockListEntry.name){\n                        // now we need to update cbl[\"entries\"] based on the newBlockList dictionary\n                        let newEntries = {};\n                        for(const [key, value] of Object.entries(cbl[\"entries\"])){\n                            const filteredValues = value.filter( e => !data.deleteBlockListEntry.deleted_ids.includes(e.id));\n                            newEntries[key] = filteredValues;\n                        }\n                        return {...cbl, entries: newEntries};\n                    }else{\n                        return {...cbl};\n                    }\n                });\n                setBlockLists([...newBlockLists]);\n            }else{\n                snackActions.error(data.deleteBlockListEntry.error);\n            }\n        },\n        onError: (err) => {\n            snackActions.warning(\"Unable to delete block list\");\n            console.log(err);\n        }\n    })\n    React.useEffect( () => {\n        setBlockLists(props.blockLists);\n    }, [props.blockLists])\n    const onSubmitNewBlockList = ({toAdd}) => {\n        newBlockListEntries({variables: {entries: toAdd}});\n    }\n    const onSubmitEdits = ({toAdd, toRemove}) => {\n        if(toAdd.length > 0){\n            newBlockListEntries({variables: {entries: toAdd}});\n        }\n        const removeEntryIDs = toRemove.map(c => c.command_id);\n        if(removeEntryIDs.length > 0){\n            deleteBlockListEntries({variables: {entries: removeEntryIDs, name: toRemove[0][\"name\"]}});\n        }\n        \n    }\n    const onAcceptDelete = ({name}) => {\n        deleteBlockList({variables:{name}})\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Command Block Lists\n            </Typography>\n            <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Block List</Button>\n            {openNew &&\n                <MythicDialog open={openNew} fullWidth={true} maxWidth=\"lg\"\n                    onClose={()=>{setOpenNewDialog(false);}} \n                    innerDialog={<EditBlockListDialog editable={true} currentSelected={[]} onSubmit={onSubmitNewBlockList} dialogTitle=\"Create New Block List\" onClose={() => setOpenNewDialog(false)}\n                    />}\n                />\n            }\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Modify</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Name</TableCell>\n                        <TableCell >Blocked Commands</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {\n                        blockLists.map( b => (\n                            <CommandBlockListTableRow key={b.name} {...b} onAcceptDelete={onAcceptDelete} onSubmitEdits={onSubmitEdits}/>\n                        ))\n                    }\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\nfunction CommandBlockListTableRow(props){\n    const theme = useTheme();\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [blockedCommandDisplay, setBlockedCommandDisplay] = React.useState([]);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [updatedEntries, setUpdatedEntries] = React.useState({});\n    React.useEffect(() => {\n        let newDisplay = [];\n        let entries = {};\n        for(const [key, value] of Object.entries(props.entries)){\n            const commandNames = value.map(c => c.command.cmd).sort().join(\", \");\n            newDisplay.push(\n                {ptype: key, commands: commandNames}\n            )\n            entries[key] = value.map(c => c.command);\n        }\n        setUpdatedEntries(entries);\n        setBlockedCommandDisplay(newDisplay);\n    }, [props.entries])\n    const onAcceptDelete = () => {\n        setOpenDeleteDialog(false);\n        props.onAcceptDelete({name: props.name})\n    }\n    const onSubmitEdits = ({toAdd, toRemove}) => {\n        props.onSubmitEdits({toAdd, toRemove})\n    }\n    return (\n        <TableRow hover>\n            <TableCell>\n                <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n            </TableCell>\n            <TableCell>\n                <Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} startIcon={<TuneIcon/>} color=\"secondary\" variant=\"contained\">Edit</Button>\n                {openUpdate &&\n                    <MythicDialog open={openUpdate} fullWidth maxWidth={\"lg\"}\n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<EditBlockListDialog editable={false} blockListName={props.name} currentSelected={updatedEntries} onSubmit={onSubmitEdits} dialogTitle=\"Edit Block List\" onClose={() => setOpenUpdateDialog(false)}\n                        />}\n                    />\n                }\n                \n            </TableCell>\n            <TableCell>{props.name}</TableCell>\n            <TableCell>\n                {blockedCommandDisplay.map( b => (\n                    <div key={props.name + b.ptype}>{b.ptype} - {b.commands}</div>\n                    \n                ))}\n            </TableCell>\n        </TableRow>\n    )\n}\n\n","import React from 'react';\nimport { OperationTable } from './OperationTable';\nimport {useQuery, gql} from '@apollo/client';\nimport {CommandBlockListTable} from './CommandBlockListTable';\n\nconst GET_Operations = gql`\nquery GetOperations {\n  operation(order_by: {name: asc}) {\n    complete\n    name\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n}\n`;\nconst GET_BlockLists = gql`\nquery getBlockLists {\n  disabledcommandsprofile(order_by: {name: asc}) {\n    id\n    name\n    command{\n      id\n      cmd\n      payloadtype{\n        ptype\n      }\n    }\n  }\n}\n`;\nexport function Operations(props){\n  const [blockLists, setBlockLists] = React.useState([]);\n  const [operations, setOperations] = React.useState([]);\n    useQuery(GET_Operations, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        setOperations(data.operation);\n      },\n      onError: (data) => {\n\n      }\n    });\n    useQuery(GET_BlockLists, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const condensed = data.disabledcommandsprofile.reduce( (prev, cur) => {\n          if(prev[cur.name] === undefined){\n            prev[cur.name] = {};\n          }\n          if(prev[cur.name][cur.command.payloadtype.ptype] === undefined){\n            prev[cur.name][cur.command.payloadtype.ptype] = [];\n          }\n          prev[cur.name][cur.command.payloadtype.ptype].push(cur);\n          return {...prev};\n        }, {});\n        // now break out into array\n        let arrayForm = [];\n        for(const [key, value] of Object.entries(condensed)){\n          arrayForm.push({\"name\": key, entries: value});\n        }\n        setBlockLists(arrayForm);\n      },\n      onError: (data) => {\n\n      }\n    });\n    const onUpdateOperation = ({id, name, complete}) => {\n      const updatedOperations = operations.map( o => {\n        if(o.id === id){\n          return {...o, name, complete};\n        }\n        return {...o};\n      })\n      setOperations(updatedOperations);\n    }\n    const onNewOperation = ({id, name, admin}) => {\n      setOperations([...operations, {id, name, admin}])\n    }\n    return (\n      <div style={{  height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n        <OperationTable operations={operations} onUpdateOperation={onUpdateOperation} onNewOperation={onNewOperation}/>\n        <CommandBlockListTable blockLists={blockLists} />\n      </div>\n    );\n} \n","import React, {useEffect, useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport \"ace-builds/src-noconflict/theme-monokai\";\nimport {useTheme} from '@material-ui/core/styles';\nimport { gql, useQuery } from '@apollo/client';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nconst getCommandsAndPayloadTypesQuery = gql`\nquery getCommandsAndPayloadTypes{\n  payloadtype(order_by: {ptype: asc}){\n    id\n    ptype\n    commands(order_by: {cmd: asc}){\n      id\n      cmd\n    }\n  }\n}\n`;\n\nexport function EditScriptDialog(props) {\n    const theme = useTheme();\n    const [script, setScript] = React.useState(\"\");\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedCommand, setSelectedCommand] = React.useState('');\n    const [payloadTypeCmdOptions, setPayloadTypeCmdOptions] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [author, setAuthor] = React.useState('');\n    const inputPTRef = useRef(null); \n    const inputCMDRef = useRef(null); \n    useQuery(getCommandsAndPayloadTypesQuery, {\n      onCompleted: data => {\n        setPayloadTypeCmdOptions(data.payloadtype);\n        if(props.payload_type_id !== undefined){\n          setSelectedPayloadType(props.payload_type_id);\n        }else{\n          if(data.payloadtype.length > 0){\n            setSelectedPayloadType(data.payloadtype[0].id);\n          }\n        }\n        if(props.command_id !== undefined){\n          setSelectedCommand(props.command_id);\n          for(let i = 0; i < data.payloadtype.length; i++){\n            if(props.payload_type_id === data.payloadtype[i].id){\n              setCommandOptions(data.payloadtype[i].commands)\n            }\n          }\n        }else{\n          if(data.payloadtype.length > 0){\n            if(data.payloadtype[0].commands.length > 0){\n              setCommandOptions(data.payloadtype[0].commands);\n              setSelectedCommand(data.payloadtype[0].commands[0].id);\n            }\n          }\n        }\n        if(props.author !== undefined){\n          setAuthor(props.author);\n        }\n      },\n      onError: data => {\n\n      }\n    })\n    useEffect( () => {\n        if(props.script !== undefined){\n          setScript(atob(props.script));\n        }        \n    }, [props.script]);\n    const onChange = (value) => {\n        setScript(value);\n    }\n    const onSubmit = () => {\n        props.onSubmitEdit({script: btoa(script), command_id: selectedCommand, payload_type_id: selectedPayloadType, author});\n        props.onClose();\n    }\n    const onRevert = () => {\n        props.onRevert();\n        props.onClose();\n    }\n    const onChangeSelectedPayloadType = (event) => {\n      setSelectedPayloadType(event.target.value);\n      const cmds = payloadTypeCmdOptions.filter( (p) => p.id === event.target.value);\n      setCommandOptions(cmds[0].commands);\n      setSelectedCommand(cmds[0].commands[0].id);\n    }\n    const onChangeSelectedCommand = (event) => {\n      setSelectedCommand(event.target.value);\n    }\n    const onChangeAuthor = (name, value, error) => {\n      setAuthor(value);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >\n          {props.title ? props.title : \"Edit BrowserScript Code\"}\n          </DialogTitle>\n        <DialogContent dividers={true} style={{height: \"calc(80vh)\"}}>\n        <FormControl style={{width: \"50%\"}}>\n            <InputLabel ref={inputPTRef}>Payload Type</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedPayloadType}\n              onChange={onChangeSelectedPayloadType}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {payloadTypeCmdOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"payloadtype\" + opt.id}>{opt.ptype}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <FormControl style={{width: \"50%\", paddingBottom: \"10px\"}}>\n            <InputLabel ref={inputCMDRef}>Command</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedCommand}\n              onChange={onChangeSelectedCommand}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {commandOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"command\" + opt.id}>{opt.cmd}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <MythicTextField value={author} onChange={onChangeAuthor} name=\"Author\" fullWidth />\n           <AceEditor\n                mode=\"javascript\"\n                theme={theme.palette.type === 'dark' ? 'monokai' : 'github'}\n                width=\"100%\"\n                height=\"100%\"\n                value={script} \n                focus={true}\n                onChange={onChange}\n                setOptions={{\n                \n                }}\n            />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" style={{backgroundColor: theme.palette.primary.main}}>\n            Close\n          </Button>\n          {props.new ? (\n            <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n              Create\n          </Button>\n          ) : (\n            <React.Fragment>\n              <Button onClick={onRevert} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n                Revert\n              </Button>\n          \n              <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                Save\n              </Button>\n            </React.Fragment>\n          )}\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {Button, Switch} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function BrowserScriptsTableRow(props){\n    const theme = useTheme();\n    const [openEdit, setOpenEdit] = React.useState(false);\n    const [isApplied, setIsApplied] = React.useState(false);\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const onSubmitEdit = ({script, command_id, payload_type_id, author}) => {\n        props.onSubmitEdit({browserscript_id: props.id, script, command_id, payload_type_id, author});\n    }\n    const onRevert = () => {\n        props.onRevert({browserscript_id: props.id, script: props.container_version});\n    }\n    const onSubmitApplyToOperation = () => {\n        props.onSubmitApplyToOperation({browserscript_id: props.id});\n    }\n    const onSubmitRemoveFromOperation = () => {\n        props.onSubmitRemoveFromOperation({browserscript_id: props.id});\n    }\n    useEffect( () => {\n        let found = false;\n        props.browserscriptoperations.forEach( (op) => {\n            if(op.operation_id === props.operation_id){\n                found = true;\n            }\n        } );\n        setIsApplied(found);\n    }, [props.browserscriptoperations, props.operation_id]);\n    const onToggleActive = () => {\n        props.onToggleActive({browserscript_id: props.id, active: !props.active});\n    }\n    const onConfirmDelete = () => {\n        props.onDelete({browserscript_id: props.id})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.id}>\n                <TableCell>\n                    <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onConfirmDelete} open={openDeleteDialog}/>\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onToggleActive}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'checkbox', \"track\": \"white\" }}\n                        name=\"Active\"\n                      />\n                </TableCell>\n                <TableCell>{props.payloadtype.ptype}</TableCell>\n                <TableCell>{props.command.cmd}</TableCell>\n                <TableCell>{props.author}</TableCell>\n                <TableCell>{props.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" onClick={ () => {setOpenEdit(true);} } color=\"primary\"> Edit </Button></TableCell>\n                <TableCell>\n                    {isApplied ?\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitRemoveFromOperation} color=\"secondary\">Remove</Button>)\n                    :\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitApplyToOperation} color=\"primary\">Apply</Button>)\n                    }\n                </TableCell>\n                {openEdit ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openEdit} \n                        onClose={()=>{setOpenEdit(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenEdit(false);}} payload_type_id={props.payloadtype.id} command_id={props.command.id}\n                                script={props.script} onSubmitEdit={onSubmitEdit} onRevert={onRevert} author={props.author}/>\n                        } />    \n                    ) : (null)\n                }\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React  from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsTableRow } from './BrowserScriptsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport Button from '@material-ui/core/Button';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\n\n\nexport function BrowserScriptsTable(props){\n    const theme = useTheme();\n    const [openNewScriptDialog, setOpenNewScriptDialog] = React.useState(false);\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Browser Scripts\n                </Typography>\n                <Button size=\"small\" onClick={() => setOpenNewScriptDialog(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Script</Button>\n                {openNewScriptDialog ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openNewScriptDialog} \n                        onClose={()=>{setOpenNewScriptDialog(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenNewScriptDialog(false);}} title=\"Create New Browser Script\" new={true} onSubmitEdit={props.onSubmitNew} />\n                        } />    \n                    ) : (null)\n                }\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Active</TableCell>\n                        <TableCell >Payload</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell> Author</TableCell>\n                        <TableCell style={{width: \"15em\"}}>User Modified?</TableCell>\n                        <TableCell style={{width: \"8em\"}}> Edit</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Apply to Operation</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.browserscript.map( (op) => (\n                    <BrowserScriptsTableRow onSubmitApplyToOperation={props.onSubmitApplyToOperation} \n                    onSubmitRemoveFromOperation={props.onSubmitRemoveFromOperation} \n                    operation_id={props.operation_id} onToggleActive={props.onToggleActive} \n                    onSubmitEdit={props.onSubmitEdit} onRevert={props.onRevert} \n                    onToggleOperation={props.onToggleOperation}\n                    onDelete={props.onDelete}\n                        key={\"script\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n        \n    )\n}\n\n","import { createMuiTheme } from '@material-ui/core/styles';\nexport const lightTheme = {\n    body: '#FFF',\n    text: '#363537',\n    textLighter: '#B8B8B8',\n    textDarker: '#B8B8B8',\n    toggleBorder: '#FFF',\n    background: '#363537',\n    tableHeader: '#F5F5F5',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#BEDCFE',\n    callbackTitleColor: '',\n    listItemBackground: '#F5F5F5',\n    menuItemBackground: \"#FBFBFB\",\n    topAppBar: \"\",\n    taskAccordian: \"\",\n    taskAccordianResponse: \"#FAFAFA\",\n    taskAccordianBottom: \"#F5F5F5\",\n    secondaryTextColor: \"\",\n    tabHeaderBackground: \"\",\n    tabHeaderText: \"\",\n    tableLineColor:\"\",\n    eventMessageBackgroundColor: \"\",\n}\nexport const darkTheme = {\n    body: '#212121',\n    text: 'white',\n    textLighter: '#989898',\n    textDarker: '#989898',\n    toggleBorder: '#6B8096',\n    background: '#999',\n    tableHeader: '#484848',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#023064',\n    callbackTitleColor: 'white',\n    listItemBackground: '#303030',\n    primaryButtonTextOnly: \"#7e75ea\",\n    secondaryButtonTextOnly: \"#ea7575\",\n    menuItemBackground: \"#363537\",\n    topAppBar: \"\",\n    taskAccordian: \"#424242\",\n    taskAccordianResponse: \"#616161\",\n    taskAccordianBottom: \"#424242\",\n    secondaryTextColor: \"#E0E0E0\",\n    tabHeaderBackground: \"#363537\",\n    tabHeaderText: \"white\",\n    tableLineColor: \"grey\",\n    eventMessageBackgroundColor: \"#303030\",\n}\nexport const muiTheme = createMuiTheme({\n  palette: {\n    primary: {\n            main: \"#1976d2\"\n        },\n    secondary: {\n            main: \"#dc004e\"\n        },\n    error: {\n            main: \"#f44336\"\n        },\n    warning: {\n            main: \"#ff9800\"\n        },\n    info: {\n            main: \"#2196f3\"\n        },\n    disabled: {\n            main: \"rgba(0, 0, 0, 0.38)\"\n        },\n    },\n    \n});\n\n\n","import React, {useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport {muiTheme} from '../../../themes/Themes';\n\nexport function BrowserScriptsOperationsTableRow(props){\n    const [openViewScript, setOpenViewScript] = React.useState(false);\n    const [displayName, setDisplayName] = React.useState(\"\");\n\n    useEffect( () => {\n        setDisplayName(props.browserscript.command === null ? \"Support Script: \" + props.browserscript.name : props.browserscript.command.cmd);\n    }, [props.browserscript]);\n    return (\n        <React.Fragment>\n            <TableRow key={\"opscript\" + props.browserscript.id}>\n                <TableCell>{props.browserscript.payloadtype.ptype}</TableCell>\n                <TableCell>{displayName}</TableCell>\n                <TableCell>{props.browserscript.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell>{props.operation.admin.username}</TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" style={{color: muiTheme.palette.info.main}} onClick={() => {setOpenViewScript(true);}}> View </Button></TableCell>    \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openViewScript} \n                    onClose={()=>{setOpenViewScript(false);}} \n                    innerDialog={\n                        <AceEditor\n                            mode=\"javascript\"\n                            theme=\"github\"\n                            width=\"100%\"\n                            value={atob(props.browserscript.script)} \n                            focus={true}\n                            readOnly={true}\n                            onChange={() => {}}\n                            setOptions={{\n                            \n                            }}\n                        />\n                    } />\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsOperationsTableRow } from './BrowserScriptsOperationsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function BrowserScriptsOperationsTable(props){\n    const theme = useTheme();\n    return (\n        props.browserscriptoperation.length > 0 &&\n            <React.Fragment>\n                <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        Operation Browser Scripts\n                    </Typography>\n                </Paper>\n                <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(30vh)\"}}>\n                    <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell style={{width: \"10em\"}}>Payload</TableCell>\n                                <TableCell style={{}}>Command</TableCell>\n                                <TableCell style={{width: \"5em\"}}>User Modified?</TableCell>\n                                <TableCell style={{}}>Operator</TableCell>\n                                <TableCell style={{width: \"5em\"}}>View Script</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                        {props.browserscriptoperation.map( (op) => (\n                            <BrowserScriptsOperationsTableRow\n                                key={\"opscriptrow\" + op.browserscript.id}\n                                {...op}\n                            />\n                        ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </React.Fragment>\n    )\n}\n\n","import React  from 'react';\nimport { gql, useMutation, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {BrowserScriptsTable} from './BrowserScriptsTable';\nimport {BrowserScriptsOperationsTable} from './BrowserScriptsOperationsTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst SUB_BrowserScripts = gql`\nsubscription SubscribeBrowserScripts($operator_id: Int!) {\n  browserscript(where: {operator_id: {_eq: $operator_id}, for_new_ui: {_eq: true}}) {\n    active\n    author\n    user_modified\n    script\n    payloadtype {\n      ptype\n      id\n    }\n    name\n    id\n    creation_time\n    container_version_author\n    container_version\n    command {\n      cmd\n      id\n    }\n    browserscriptoperations {\n      operation_id\n      id\n    }\n  }\n}\n `;\nconst SUB_OperationBrowserScripts = gql`\nsubscription SubscribeOperationBrowserScripts($operation_id: Int!) {\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {for_new_ui: {_eq: true}}}){\n    browserscript{\n        active\n        author\n        user_modified\n        script\n        payloadtype {\n          ptype\n          id\n        }\n        name\n        id\n        creation_time\n        container_version_author\n        container_version\n        command {\n          cmd\n          id\n        }\n      }\n   operation{\n    admin{\n        username\n    }\n   }\n  }\n}\n `;\nconst updateBrowserScriptActive = gql`\nmutation updateBrowserScriptActive($browserscript_id: Int!, $active: Boolean!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {active: $active}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptScript = gql`\nmutation updateBrowserScriptScript($browserscript_id: Int!, $script: String!, $command_id: Int!, $payload_type_id: Int!, $author: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, author: $author, user_modified: true, command_id: $command_id, payload_type_id: $payload_type_id}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptRevert = gql`\nmutation updateBrowserScriptRevert($browserscript_id: Int!, $script: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, user_modified: false}) {\n    id\n  }\n}\n`;\nconst addBrowserScript = gql`\nmutation insertNewBrowserScript($script: String!, $author: String!, $payload_type_id: Int!, $command_id: Int!){\n  insert_browserscript_one(object: {script: $script, author: $author, payload_type_id: $payload_type_id, command_id: $command_id}){\n    id\n  }\n}\n`;\nconst deleteBrowserScriptMutation = gql`\nmutation deleteBrowserScriptMutation($browserscript_id: Int!){\n  delete_browserscript_by_pk(id: $browserscript_id){\n    id\n  }\n}\n`;\n\n\nexport function BrowserScripts(props){\n    const me = useReactiveVar(meState);\n    const [browserScripts, setBrowserScripts] = React.useState({\"browserscript\": []});\n    const [operationBrowserScripts, setOperationBrowserScripts] = React.useState({\"browserscriptoperation\": []});\n    useSubscription(SUB_BrowserScripts, {\n      variables: {operator_id: me.user.id}, fetchPolicy: \"no-cache\",\n      shouldResubscribe: true,\n      onSubscriptionData: ({subscriptionData}) => {\n        console.log(subscriptionData)\n        setBrowserScripts(subscriptionData.data);\n      }\n    });\n      useSubscription(SUB_OperationBrowserScripts, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"no-cache\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setOperationBrowserScripts(subscriptionData.data);\n        }\n    });\n    const [toggleActive] = useMutation(updateBrowserScriptActive, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [updateScript] = useMutation(updateBrowserScriptScript, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [revertScript] = useMutation(updateBrowserScriptRevert, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [createBrowserScript] = useMutation(addBrowserScript, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully created new browser script!\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to create new script: \" + data);\n      }\n    });\n    const [deleteBrowserScript] = useMutation(deleteBrowserScriptMutation, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully deleted browser script\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to delete browser script: \" + data);\n      }\n    })\n    const onToggleActive = ({browserscript_id, active}) => {\n        toggleActive({variables: {browserscript_id, active}});\n    }\n    const onSubmitEdit = ({browserscript_id, script, command_id, payload_type_id, author}) => {\n        updateScript({variables: {browserscript_id, script, command_id, payload_type_id, author}});\n    }\n    const onRevert = ({browserscript_id, script}) => {\n        revertScript({variables:{browserscript_id, script}});\n    }\n    const onSubmitApplyToOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitRemoveFromOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitCreateNewBrowserScript = ({script, author, payload_type_id, command_id}) => {\n      createBrowserScript({variables: {author, script, payload_type_id, command_id}});\n    }\n    const onDelete = ({browserscript_id}) => {\n      deleteBrowserScript({variables: {browserscript_id}});\n    }\n    return (\n    <React.Fragment>\n        <BrowserScriptsTable {...browserScripts} operation_id={me.user.current_operation_id} onToggleActive={onToggleActive} \n          onSubmitEdit={onSubmitEdit} onRevert={onRevert} onSubmitNew={onSubmitCreateNewBrowserScript} onDelete={onDelete}\n          onSubmitApplyToOperation={onSubmitApplyToOperation} \n          onSubmitRemoveFromOperation={onSubmitRemoveFromOperation}\n        />\n        <BrowserScriptsOperationsTable {...operationBrowserScripts} />\n    </React.Fragment>\n    );\n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($payload_id: Int!, $description: String) {\n  update_payload_by_pk(pk_columns: {id: $payload_id}, _set: {tag: $description}) {\n    tag\n    id\n  }\n}\n`;\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    tag\n    id\n  }\n}\n`;\n\nexport function PayloadDescriptionDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.tag)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated Description\")\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {payload_id: props.payload_id, description: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($file_id: Int!, $filename: bytea!) {\n  update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {filename: $filename}) {\n    filename_text\n    id\n  }\n}\n`;\nconst getFilenameQuery = gql`\nquery getFilenameQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    filemetum {\n      filename_text\n      id\n    }\n    id\n  }\n}\n`;\n\nexport function PayloadFilenameDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const [fileId, setFileId] = useState();\n    const { loading, error } = useQuery(getFilenameQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.filemetum.filename_text);\n            setFileId(data.payload_by_pk.filemetum.id);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n          snackActions.success(\"Updated filename\");\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {file_id: fileId, filename: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Filename</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    build_message\n    build_stderr\n    build_stdout\n    id\n  }\n}\n`;\n\nexport function PayloadBuildMessageDialog(props) {\n    const [payloadData, setPayloadData] = useState({});\n    const [viewError, setViewError] = useState(false);\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setViewError(props.viewError);\n            let output = \"Message:\\n\" + data.payload_by_pk.build_message;\n            output += \"\\nSTDOUT:\\n\" + data.payload_by_pk.build_stdout;\n            setPayloadData({\"message\": output,\n                            \"error\": \"STDERR:\\n\" + data.payload_by_pk.build_stderr});\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        setViewError(props.viewError);\n    }, [props.viewError]);\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Build Messages</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={viewError ? payloadData[\"error\"] : payloadData[\"message\"]} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PermScanWifiIcon from '@material-ui/icons/PermScanWifi';\n\nexport function PayloadsTableRowC2Status(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {\n                props.payloadc2profiles.map( (c2) => (\n                    <Typography key={c2.c2profile.name + props.uuid}> \n                        {c2.c2profile.is_p2p ?\n                            ( c2.c2profile.container_running ? \n                                <Tooltip title=\"C2 Container online\">\n                                    <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                                </Tooltip>: \n                                <Tooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/>\n                                </Tooltip> )\n                            :\n                        ( c2.c2profile.running ? \n                            <Tooltip title=\"C2 Internal Server Running\">\n                                <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                            </Tooltip> : \n                            (c2.c2profile.container_running ? (\n                                <Tooltip title=\"C2 Internal Server Not Running, but Container Online\">\n                                    <PermScanWifiIcon style={{color: theme.palette.warning.main}}/> \n                                </Tooltip>\n                            ) : (\n                                <Tooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/> \n                                </Tooltip>\n                            ))\n                            )\n                        } - {c2.c2profile.name}\n                    </Typography>\n                )) \n            }\n                \n        </React.Fragment>\n        )\n}\n","import IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { snackActions } from '../../utilities/Snackbar';\nimport ReportProblemIcon from '@material-ui/icons/ReportProblem';\n\nexport function PayloadsTableRowBuildStatus(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {props.build_phase === \"success\" ?\n                ( <Tooltip title=\"Download payload\">\n                    <IconButton variant=\"contained\" target=\"_blank\" color=\"primary\" href={window.location.origin + \"/direct/download/\" + props.filemetum.agent_file_id} download>\n                        <GetAppIcon style={{color: theme.palette.success.main}} />\n                    </IconButton>\n                  </Tooltip>\n                    \n                )\n                : \n                (props.build_phase === \"building\" ? \n                (<Tooltip title=\"Payload still building\">\n                    <IconButton variant=\"contained\"><CircularProgress size={20} thickness={4} style={{color: theme.palette.info.main}}/></IconButton>\n                </Tooltip>) : \n                (<Tooltip title=\"Failed to build payload\">\n                    <IconButton variant=\"contained\" onClick={() => snackActions.warning(\"Payload failed to build, cannot download\")}>\n                        <ReportProblemIcon style={{color: theme.palette.error.main}} />\n                    </IconButton>\n                </Tooltip>\n                ) \n                )\n            }\n        </React.Fragment>\n\n        )\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst checkPayloadConfigurationQuery = gql`\nquery checkPayloadConfigurationQuery($uuid: String!) {\n  config_check(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadConfigCheckDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const { loading, error } = useQuery(checkPayloadConfigurationQuery, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.config_check.status === \"success\"){\n            setMessage(data.config_check.output);\n          }else{\n            snackActions.warning(data.config_check.error);\n            setMessage(\"Error!\\n\" + data.config_check.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Config Check</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={message} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst generateRedirectRulesMutation = gql`\nquery generateRedirectRulesMutation($uuid: String!) {\n  redirect_rules(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadRedirectRulesDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const { loading, error } = useQuery(generateRedirectRulesMutation, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.redirect_rules.status === \"success\"){\n            setMessage(data.redirect_rules.output);\n          }else{\n            snackActions.warning(data.redirect_rules.error);\n            setMessage(\"Error!\\n\" + data.redirect_rules.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Redirect Rules Check</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={message} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from './DetailedPayloadTable';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {PayloadDescriptionDialog} from './PayloadDescriptionDialog';\nimport {PayloadFilenameDialog} from './PayloadFilenameDialog';\nimport {PayloadBuildMessageDialog} from './PayloadBuildMessageDialog';\nimport {PayloadsTableRowC2Status} from './PayloadsTableRowC2Status';\nimport {PayloadsTableRowBuildStatus} from './PayloadsTableRowBuildStatus';\nimport {PayloadConfigCheckDialog} from './PayloadConfigCheckDialog';\nimport {PayloadRedirectRulesDialog} from './PayloadRedirectRulesDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport InfoIcon from '@material-ui/icons/Info';\nimport {useMutation, gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst rebuildPayloadMutation = gql`\nmutation triggerRebuildMutation($uuid: String!) {\n  rebuild_payload(uuid: $uuid) {\n      status\n      error\n      uuid\n  }\n}\n`;\nconst exportPayloadConfigQuery = gql`\nquery exportPayloadConfigQuery($uuid: String!) {\n  export_payload_config(uuid: $uuid) {\n      status\n      error \n      config \n  }\n}\n`;\n\nexport function PayloadsTableRow(props){\n    const [viewError, setViewError] = React.useState(true);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [openDescription, setOpenDescriptionDialog] = React.useState(false);\n    const [openFilename, setOpenFilenameDialog] = React.useState(false);\n    const [openBuildMessage, setOpenBuildMessageDialog] = React.useState(false);\n    const [openDetailedView, setOpenDetailedView] = React.useState(false);\n    const [openConfigCheckDialog, setOpenConfigCheckDialog] = React.useState(false);\n    const [openRedirectRulesDialog, setOpenRedirectRulesDialog] = React.useState(false);\n    const dropdownAnchorRef = useRef(null);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [triggerRebuild] = useMutation(rebuildPayloadMutation, {\n      onCompleted: (data) => {\n        console.log(data);\n        snackActions.success(\"Successfully triggered rebuild\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to trigger rebuild: \" + data);\n      }\n    });\n    const [exportConfig] = useLazyQuery(exportPayloadConfigQuery, {\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        if(data.export_payload_config.status === \"success\"){\n          const dataBlob = new Blob([data.export_payload_config.config], {type: 'text/plain'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = props.filemetum.filename_text + \".json\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = props.filemetum.filename_text + \".json\";\n            document.body.appendChild(element);\n            element.click();\n          }\n        }else{\n          snackActions.error(\"Failed to export configuration: \" + data.export_payload_config.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to export configuration: \" + data)\n      }\n    })\n    const onAlertChanged = () => {\n        const {id, callback_alert} = props;\n        props.onAlertChanged(id, !callback_alert);\n    }\n    const onAcceptDelete = () => {\n        props.onDeletePayload(props.filemetum.id);\n        setOpenDeleteDialog(false);\n    }\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setOpenUpdateDialog(false);\n    };\n    const options = [{name: 'Rename File', click: () => {\n                        setOpenFilenameDialog(true);\n                     }},\n                     {name: 'Edit Description', click: () => {\n                        setOpenDescriptionDialog(true);\n                     }},\n                     {name: props.callback_alert ? 'Stop Alerting to New Callbacks' : \"Start Alerting to New Callbacks\", click: () => {\n                        onAlertChanged();\n                      }},\n                     {name: 'View Build Message/Stdout', click: () => {\n                        setViewError(false);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'View Build Errors', click: () => {\n                        setViewError(true);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'Trigger New Build', click: () => {\n                      triggerRebuild({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Export Payload Config', click: () => {\n                      exportConfig({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Generate Redirect Rules', click: () => {\n                      setOpenRedirectRulesDialog(true);\n                    }},\n                    {name: 'Check Agent C2 Configuration', click: () => {\n                      setOpenConfigCheckDialog(true);\n                    }}\n                     ]\n    ;\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setOpenUpdateDialog(false);\n      };\n    return (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.uuid} hover>\n                <TableCell>\n                <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                </TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell><Button ref={dropdownAnchorRef} size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Actions</Button>\n                <Popper open={openUpdate} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name + props.uuid}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n                {openDescription ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDescription} \n                        onClose={()=>{setOpenDescriptionDialog(false);}} \n                        innerDialog={<PayloadDescriptionDialog payload_id={props.id} onClose={()=>{setOpenDescriptionDialog(false);}} />}\n                    />\n                ): (null) }\n                {openFilename ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilename} \n                        onClose={()=>{setOpenFilenameDialog(false);}} \n                        innerDialog={<PayloadFilenameDialog payload_id={props.id} onClose={()=>{setOpenFilenameDialog(false);}} />}\n                    />\n                ): (null) }\n                {openBuildMessage ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openBuildMessage} \n                        onClose={()=>{setOpenBuildMessageDialog(false);}} \n                        innerDialog={<PayloadBuildMessageDialog payload_id={props.id} viewError={viewError} onClose={()=>{setOpenBuildMessageDialog(false);}} />}\n                    />\n                ): (null) }\n                {openConfigCheckDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openConfigCheckDialog} \n                        onClose={()=>{setOpenConfigCheckDialog(false);}} \n                        innerDialog={<PayloadConfigCheckDialog uuid={props.uuid} onClose={()=>{setOpenConfigCheckDialog(false);}} />}\n                    />\n                ): (null) }\n                {openRedirectRulesDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openRedirectRulesDialog} \n                        onClose={()=>{setOpenRedirectRulesDialog(false);}} \n                        innerDialog={<PayloadRedirectRulesDialog uuid={props.uuid} onClose={()=>{setOpenRedirectRulesDialog(false);}} />}\n                    />\n                ): (null) }\n                </TableCell>\n                <TableCell>\n                    <PayloadsTableRowBuildStatus {...props} />\n                </TableCell>\n                <TableCell>{props.filemetum.filename_text}</TableCell>\n                <TableCell>{props.tag}</TableCell>\n                <TableCell>\n                    <PayloadsTableRowC2Status payloadc2profiles={props.payloadc2profiles} uuid={props.uuid} />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                        <InfoIcon />\n                    </IconButton>\n                </TableCell>\n            </TableRow>\n            <TableRow>\n            {openDetailedView ? (\n              <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                  onClose={()=>{setOpenDetailedView(false);}} \n                  innerDialog={<DetailedPayloadTable {...props} payload_id={props.id} onClose={()=>{setOpenDetailedView(false);}} />}\n              />\n            ) : (null) }\n          </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\nexport function ImportPayloadConfigDialog(props) {\n  const [fileValue, setFileValue] = React.useState({name: \"\"});\n  const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    const onCommitSubmit = () => {\n      createPayloadMutation({variables: {payload: fileValue.contents}}).catch( (e) => {console.log(e)} );\n        props.onClose();\n    }\n    const onFileChange = (evt) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n          const contents = e.target.result;\n          setFileValue({name: evt.target.files[0].name, contents: contents});\n      }\n      reader.readAsBinaryString(evt.target.files[0]);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Import Payload Config to Generate New Payload</DialogTitle>\n        <DialogContent dividers={true}>\n          <Button variant=\"contained\" component=\"label\"> \n              { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n              <input onChange={onFileChange} type=\"file\" hidden /> \n          </Button>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { PayloadsTableRow } from './PayloadsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport {ImportPayloadConfigDialog} from './ImportPayloadConfigDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\n\nexport function PayloadsTable({payload, onDeletePayload, onUpdateCallbackAlert}){\n    const theme = useTheme();\n    const [openPayloadImport, setOpenPayloadImport] = React.useState(false);\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Payloads\n                </Typography>\n                <Button size=\"small\" href=\"/new/createpayload\" style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Payload</Button>\n                <Button size=\"small\" onClick={() => setOpenPayloadImport(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">Import Payload Config</Button>\n                {openPayloadImport ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openPayloadImport} \n                        onClose={()=>{setOpenPayloadImport(false);}} \n                        innerDialog={<ImportPayloadConfigDialog onClose={()=>{setOpenPayloadImport(false);}} />}\n                    />\n                ): (null) }\n              </Paper>  \n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Delete</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Download</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell >C2 Status</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {payload.map( (op) => (\n                    <PayloadsTableRow\n                        onDeletePayload={onDeletePayload}\n                        onAlertChanged={onUpdateCallbackAlert}\n                        key={\"payload\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { PayloadsTable } from './PayloadsTable';\nimport {useMutation, useQuery, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nconst payloadFragment = gql`\nfragment payloadData on payload {\n  build_message\n  build_phase\n  build_stderr\n  callback_alert\n  creation_time\n  id\n  operator {\n    id\n    username\n  }\n  uuid\n  tag\n  payloadtype {\n    id\n    ptype\n  }\n  filemetum {\n    agent_file_id\n    filename_text\n    id\n  }\n  payloadc2profiles {\n    c2profile {\n      running\n      name\n      is_p2p\n      container_running\n    }\n  }\n}\n`;\nconst SUB_Payloads = gql`\n${payloadFragment}\nsubscription SubPayloadsQuery($operation_id: Int!) {\n  payload(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, auto_generated: {_eq: false}}, order_by: {id: desc}) {\n    ...payloadData\n  }\n}\n`;\nconst Get_Payloads = gql`\n${payloadFragment}\nquery GetPayloadsQuery($operation_id: Int!) {\n  payload(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, auto_generated: {_eq: false}}, order_by: {id: desc}, limit: 20) {\n    ...payloadData\n  }\n}\n`;\nconst payloadsDelete = gql`\nmutation PayloadsDeletePayloadMutation($id: Int!) {\n  deleteFile(file_id: $id) {\n      file_ids\n      status\n      error\n      payload_ids\n  }\n}\n`;\nconst payloadsCallbackAlert = gql`\nmutation PayloadsCallbackAlertMutation($id: Int!, $callback_alert: Boolean!) {\n  update_payload_by_pk(pk_columns: {id: $id}, _set: {callback_alert: $callback_alert}) {\n    id\n    callback_alert\n  }\n}\n`;\n\nexport function Payloads(props){\n    const me = useReactiveVar(meState);\n    const [payloads, setPayloads] = React.useState([]);\n    useQuery(Get_Payloads, {\n      variables: {operation_id: me.user.current_operation_id},\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        const updated = data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n    })\n    useSubscription(SUB_Payloads, {\n      variables: {operation_id: me.user.current_operation_id},\n      fetchPolicy: \"no-cache\",\n      onSubscriptionData: ({subscriptionData}) => {\n        const updated = subscriptionData.data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to get payloads\");\n        console.log(data);\n      }\n      });\n    const [deletePayload] = useMutation(payloadsDelete, {\n        onCompleted: (data) => {\n          if(data.deleteFile.status === \"success\"){\n            const updated = payloads.filter( (payload) => !data.deleteFile.payload_ids.includes(payload.id));\n            setPayloads(updated);\n            snackActions.success(\"Successfully deleted\");\n          }else{\n            snackActions.error(data.deleteFile.error);\n          }\n          \n        },\n        onError: (data) => {\n          snackActions.warning(\"Failed to delete payload\");\n          console.log(data);\n        }\n    });\n    const [callbackAlert] = useMutation(payloadsCallbackAlert, {\n      onCompleted: (data) => {\n        const updated = payloads.map( (payload) => {\n          if(payload.id === data.update_payload_by_pk.id){\n            return {...payload, ...data.update_payload_by_pk};\n          }else{\n            return {...payload};\n          }\n        });\n        if(data.update_payload_by_pk.callback_alert){\n          snackActions.success(\"Now Alerting on New Callbacks\");\n        }else{\n          snackActions.success(\"No Longer Alerting on New Callbacks\");\n        }\n        \n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to update callback alerting status\");\n        console.log(data);\n      }\n    });\n    const onDeletePayload = (id) => {\n        deletePayload({variables: {id}});\n    }\n    const onUpdateCallbackAlert = (id, callback_alert) => {\n        callbackAlert({\n            variables: {id, callback_alert}\n        \n        });\n    }\n    return (\n      <div style={{height: \"calc(94vh)\", maxHeight: \"calc(94vh)\", marginTop:\"10px\"}}>\n        <PayloadsTable onDeletePayload={onDeletePayload} onUpdateCallbackAlert={onUpdateCallbackAlert} payload={payloads} />\n      </div>\n    );\n} \n","import * as d3 from \"d3\";\n\nexport const menuFactory = (g, x, y, menuItems, data, svgId) => {\n    d3.select(`.contextMenu`).remove();\n    // Draw the menu\n    if(menuItems.length > 0){\n        d3.select(svgId).append('g').attr('class', 'contextMenu')\n            .selectAll('tmp')\n            .data(menuItems).enter()\n            .append('g').attr('class', \"menuEntry\")\n            .style({'cursor': 'pointer'});\n\n        // Draw menu entries\n        d3.selectAll(`.menuEntry`)\n            .append('rect')\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('rx', 2)\n            .attr('fill', '#ffffff')\n            .attr('width', 180)\n            .attr('height', 30)\n            .on('click', (d) => { d.action(g, data) });\n\n        d3.selectAll(`.menuEntry`)\n            .append('text')\n            .text((d) => { return d.title; })\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('dy', 20)\n            .attr('dx', 10)\n            .on('click', (d) => { d.action(g, data) });\n\n        // Other interactions\n        d3.select('body')\n            .on('click', () => {\n                d3.select(`.contextMenu`).remove();\n                d3.select(`.menuEntry`).remove();\n            });\n        }\n}\n\nexport const createContextMenu = (g, d, menuItems, width, height, svgId) => {\n    menuFactory(g, d3.event.pageX , d3.event.pageY - 80 , menuItems, d, svgId);\n    d3.event.preventDefault();\n}\n","import React, {useRef, useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport * as d3 from 'd3';\nimport {createContextMenu} from './D3ContextMenu';\nimport dagreD3 from 'dagre-d3';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function C2PathDialog(props) {\n    const dagreRef = useRef(null);   \n    const [reZoom, setReZoom] = useState(true);\n    const theme = useTheme();\n    useEffect( () => {\n        const view_config = {\n            rankDir: \"LR\",\n            label_components: [\"id\", \"user\"],\n            packet_flow_view: true,\n            include_disconnected: true,\n            show_all_nodes: true\n        }\n        const node_events = {\n            \"mouseover\": (parent, node, d) => {return},\n            \"mouseout\": (parent, node, d) => {return},\n            \"click\": (parent, node, d) => {return},\n            \"contextmenu\": []\n        }\n        drawC2PathElements(props.callbackgraphedges, dagreRef, reZoom, view_config, node_events, theme);\n        setReZoom(false);\n    }, [props.callbackgraphedges, reZoom, theme])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Callback {props.id}'s Egress Path</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <svg ref={dagreRef} id=\"nodeTree\" style={{width: \"100%\", height: \"calc(78vh)\", marginTop: \"10px\"}}></svg>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n\nexport const drawC2PathElements = (edges, dagreRef, reZoom, view_config, node_events, theme) =>{\n    const disconnected = `stroke: ${theme.palette.warning.main}; stroke-width: 3px; stroke-dasharray: 5, 5; fill:none`;\n    const disconnectedArrow = `fill: ${theme.palette.warning.main}`;\n    const connected = `stroke: ${theme.palette.info.main}; fill: none; stroke-width: 1.5px;`;\n    const connectedArrow = `stroke: ${theme.palette.info.main}; fill: ${theme.palette.info.main}; stroke-width: 1.5px;`\n    const nodeColor = `fill: ${theme.palette.success.main},`;\n    const nodeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const edgeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const add_edge_to_mythic = (g, edge, view_config) => {\n        if(!edge.source.active && !view_config[\"show_all_nodes\"]){return}\n        add_node(g, edge.source, view_config);\n        g.setEdge(edge.source.id, \"Mythic\",  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp,direction: edge.direction,\n            style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n            arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n    }\n    const add_node = (g, node, view_config) => {\n        g.setNode(node.id, {label: getLabel(node, view_config[\"label_components\"]),  node: node, style: nodeColor, labelStyle: nodeLabelStyle, shape: 'circle', isParent:false});\n        g.setNode(node.host, {label:  node.host, clusterLabelPos: 'top', style: `fill:${theme.palette.graphGroup}`, node: null, labelStyle: nodeLabelStyle, isParent: true});\n        g.setParent(node.id, node.host);\n        g.setNode(node.host + \"mythic_expander\", {label:\"\", shape: \"square\", node: node, isParent: false})\n        g.setParent(node.host + \"mythic_expander\", node.host)\n    }\n    const getLabel = (edge, label_components) => {\n        return label_components.map( (name) => {\n            return edge[name]\n        }).join(\", \");\n    }\n    const add_edge_p2p = (g, edge, view_config) => {\n        if(!edge.source.active && !edge.destination.active && !view_config[\"show_all_nodes\"]){\n            return;\n        }else if(!view_config[\"show_all_nodes\"]){\n            //at least one of the two nodes is active and we don't want to show all the nodes\n            if(edge.source.active){add_node(g, edge.source, view_config)}\n            if(edge.destination.active){add_node(g, edge.destination, view_config)}\n            // not adding an edge because one of the nodes could be non-existent\n            if(!edge.source.active || !edge.destination.active){\n                return;\n            }\n        }else{\n            add_node(g, edge.source, view_config);\n            add_node(g, edge.destination, view_config);\n        }\n        if(edge.direction === 1){\n            if(view_config[\"packet_flow_view\"]){\n                createEdge(g, edge, 2);\n            }else{\n                createEdge(g, edge, 1);\n            }\n        }else if(edge.direction === 2){\n            createEdge(g, edge, 2);\n        }else{\n            createEdge(g, edge, 1);\n            createEdge(g, edge, 2);\n        }\n    }\n    const createEdge = (g, edge, adjusted_direction) =>{\n        if(adjusted_direction === 1){\n            g.setEdge(edge.source.id, edge.destination.id,  {label: edge.c2profile.name, edge_id: edge.id,end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }else if(adjusted_direction === 2){\n            g.setEdge(edge.destination.id, edge.source.id,  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }\n    }\n    var g = new dagreD3.graphlib.Graph({ compound: true, multigraph: true, directed: true}).setGraph({rankdir: view_config[\"rankDir\"]}).setDefaultEdgeLabel(function() {return {}; });\n    var svg = d3.select(dagreRef.current);\n    var svgGroup;\n    var test = svg.select(\"g\")._groups[0][0];\n    if(test){\n        svgGroup = svg.select(\"g\");\n    }else{\n        svgGroup = svg.append(\"g\");\n    }\n    var zoom = d3.zoom().on(\"zoom\", function() {\n          svgGroup.attr(\"transform\", d3.event.transform);\n        });\n    if(reZoom){\n        svg.select('g.output').remove();\n        svg.call(zoom);\n    }\n    g.setNode(\"Mythic\", {label: \"\", style: nodeColor, shape: 'circle', node: null, labelStyle: nodeLabelStyle});\n    edges.forEach( (edge) => {\n        if(!view_config[\"include_disconnected\"] && edge.end_timestamp !== null){return}\n        if(edge.destination.id === edge.source.id){\n            if(g.hasEdge(edge.source.id, \"Mythic\", edge.c2profile.name)){\n                // we already have an edge to Mythic from our source id, check if this edge is newer or not\n                if(edge.id > g.edge(edge.source.id, \"Mythic\", edge.c2profile.name).edge_id){\n                    add_edge_to_mythic(g, edge, view_config);\n                }\n            }else{\n                //this is a new edge to mythic\n                add_edge_to_mythic(g, edge, view_config);\n            }\n        }else{\n            if(edge.direction === 1){\n                if(!view_config[\"packet_flow_view\"]){\n                    if(g.hasEdge(edge.source.id, edge.destination.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.source.id, edge.destination.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }else{\n                            console.log(\"doing nothing, dropping data\");\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }\n                \n            }else if(edge.direction === 2){\n                if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                    //we've seen an edge between these two before\n                   \n                    if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    //this is a new edge\n                    add_edge_p2p(g, edge, view_config);\n                }\n            }\n        }\n    });\n    var render = new dagreD3.render();\n    var width = svg.node().getBoundingClientRect().width;\n    var height = svg.node().getBoundingClientRect().height;\n    render.shapes().circle = function circle(parent, bbox, node) {\n         var shapeSvg = parent.insert(\"image\")\n             .attr(\"class\", \"nodeImage\")\n             .attr(\"xlink:href\", function(d) {\n                 if (node.node) {\n                    return \"/static/\" + node.node.payload.payloadtype.ptype + \".svg\";\n                 }else{\n                    return \"/static/mythic.svg\";\n                 }\n             }).attr(\"x\", \"-20px\")\n             .attr(\"y\", \"-20px\")\n             .attr(\"width\", \"40px\")\n             .attr(\"height\", \"40px\")\n             .on(\"mouseover\", function(d) { node_events[\"mouseover\"](parent, node, d) })\n             .on(\"mouseout\", function(d) { node_events[\"mouseout\"](parent, node, d) })\n             .on(\"click\", function(d) { d3.event.preventDefault(); node_events[\"click\"](parent, node, d) })\n             .on(\"contextmenu\", (d) => {createContextMenu(g, node, node_events[\"contextmenu\"], width, height, \"#callbacksgraph\")});\n         node.intersect = function(point) {\n             return dagreD3.intersect.circle(node, 20, point);\n         };\n         return shapeSvg;\n     };\n     render.shapes().square = function square(parent, bbox, node){\n         var shapeSvg = parent.insert(\"rect\")\n            .attr(\"width\", function(d) {\n                let candidates = g.children(node.node.host);\n                let longest = node.node.host.length;\n                if(candidates !== undefined){\n                    candidates.forEach( (x) => {\n                        if(g.node(x).label.length > longest){\n                            longest = g.node(x).label.length;\n                        }\n                    });\n                }\n                if(view_config[\"rankDir\"] === \"LR\"){\n                    // need a box at least as long as the host name or longest label with matching parent\n                    return longest * 9 + \"px\";\n                }else{\n                    // need a box at least as long as the hostname or longest label with matching parent\n                    //   need to also subtract width of elements for everything with an edge to Mythic\n                    if(candidates !== undefined){\n                        let count = 0;\n                        candidates.forEach( (x) => {\n                            if(g.outEdges(x, \"Mythic\").length > 0){\n                                count += 1;\n                            }\n                        });\n                        longest = (longest * 9) - (count * 100);\n                        if(longest < 0){ return 0}\n                        return longest + \"px\";\n                    }else{\n                        console.log(\"candidates were undefined\");\n                    }\n                }\n            })\n            .attr(\"height\", 0);\n        return shapeSvg;\n     }\n     // if a parent has no children then it should be removed\n    \n    render(svgGroup, g);\n    if(reZoom){\n        var graphWidth = g.graph().width + 40;\n        var graphHeight = g.graph().height + 40;\n        var zoomScale = Math.min(width / graphWidth, height / graphHeight);\n        var translateX = (width / 2) - ((graphWidth * zoomScale) / 2)\n        var translateY = (height / 2) - ((graphHeight * zoomScale) / 2);\n        var svgZoom = svg.transition().duration(500);\n        svgZoom.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(zoomScale));\n    }\n    svgGroup.selectAll(\"g.nodes g.label\")\n        .attr(\"transform\", \"translate(0,30)\");\n}\nexport const getNodeEdges = (g, node) =>{\n    return g.nodeEdges(node);\n}\n\n","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {C2PathDialog} from '../Callbacks/C2PathDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\n\nexport function ExpandedCallbackSideDetails(props){\n    const maxWidth = \"30%\";\n    const theme = useTheme();\n    return (\n        <div style={{maxWidth, width: maxWidth, display: \"inline-flex\", height: \"calc(94vh)\", flexDirection: \"column\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Callback {props.callback.id}\n                </Typography>\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\">   \n            <ExpandedCallbackSideDetailsTable {...props.callback} />\n        </TableContainer>\n        </div>\n    )\n}\n\n\nexport function ExpandedCallbackSideDetailsTable(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(props.last_checkin);\n    });\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = callbackEdges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in callbackEdges that are _not_ in myEdges so far\n                const newEdges = callbackEdges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        setCallbackgraphedges(myActiveEdges);\n        setCallbackgraphedgesAll(myEdges);\n    }, [callbackEdges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const options = [{name: props.locked ? 'Unlock (Locked by ' + props.locked_operator.username + ')' : 'Lock Callback', icon: props.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                 ];\n    return (\n        <Table  size=\"small\" style={{\"overflow\": \"scroll\"}}>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Elevation Level</TableCell>\n                        <TableCell>{props.integrity_level}\n                            {props.integrity_level > 2 ? (\" ( Elevated Access )\") : \"\"}\n                            {props.integrity_level === 2 ? (\" ( Medium Integrity ) \") : \"\"}\n                            {props.integrity_level < 2 ? (\" ( Low Integrity )\") : \"\"}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Callback Lock Status</TableCell>\n                        <TableCell>\n                            {props.locked ? (\n                                <React.Fragment>\n                                    <LockOpenIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Unlock (Locked by ' + props.locked_operator.username + ')'}\n                                    </Typography>\n                                </React.Fragment>\n                            ) : (\n                                <React.Fragment>\n                                    <LockIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Lock Callback'}\n                                    </Typography>\n                                </React.Fragment>\n                            )}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>IP Address</TableCell>\n                        <TableCell>{props.ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>External IP</TableCell>\n                        <TableCell>{props.external_ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Host</TableCell>\n                        <TableCell>{props.host}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>User</TableCell>\n                        <TableCell>{props.user}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Domain</TableCell>\n                        <TableCell>{props.domain}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>OS / Architecture</TableCell>\n                        <TableCell>{props.os}({props.architecture})</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process ID</TableCell>\n                        <TableCell>{props.pid}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Last Checkin</TableCell>\n                        <TableCell>{displayTime}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Description</TableCell>\n                        <TableCell>{props.description}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Sleep Info</TableCell>\n                        <TableCell>{props.sleep_info}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Agent Type</TableCell>\n                        <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Egress Route</TableCell>\n                        <TableCell>\n                        {hasEgressRoute ? \n                            <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                            <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                        }\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process Name</TableCell>\n                        <TableCell>{props.process_name}</TableCell>\n                    </TableRow>\n                    <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                        onClose={()=>{setOpenC2Dialog(false);}} \n                        innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                    />\n                    <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                        innerDialog={\n                            <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n                        }\n                        />\n                    <TableRow hover>\n                        <TableCell>Extra Info</TableCell>\n                        <TableCell>{props.extra_info}</TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n    )\n}\n","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Tab from '@material-ui/core/Tab';\nimport React from 'react';\n\nexport function MythicTabPanel(props) {\n  const { children, value, index, maxHeight, tabInfo, getCallbackData, queryParams, changeSearchParam, ...other } = props;\n  const style = props.style === undefined ? {display: value === index ? 'flex': 'none', flexDirection: \"column\",  overflowY: \"auto\", flexGrow: 1, width: \"100%\", maxWidth: \"100%\"} : props.style;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      style={style}\n      {...other}\n    >\n      {<React.Fragment>{children}</React.Fragment>}\n    </div>\n  )\n}\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\n  };\n}\nexport function MythicTabLabel(props){\n    const {label, index, fullWidth, maxHeight, onContextMenu, onCloseTab, selectionFollowsFocus, textColor, indicator, tabInfo, onEditTabDescription, getCallbackData, ...other} = props;\n    const onClick = (e) => {\n      e.stopPropagation();onCloseTab({tabID: tabInfo.tabID, index: index});\n    }\n    return (\n        <Tab label={\n            <span onContextMenu={onContextMenu} style={{display: \"inline-block\", zIndex: 1}}>\n                {label}<IconButton component=\"div\" size=\"small\" onClick={onClick} {...other}><CloseIcon /></IconButton>\n            </span>\n        } {...a11yProps(index)} {...other}/>\n    )\n}\nexport function MythicSearchTabLabel(props){\n  const {label, index, fullWidth, maxHeight, selectionFollowsFocus, textColor, indicator, iconComponent, ...other} = props;\n  return (\n      <Tab label={\n          <span>{label}<br/>{iconComponent}\n          </span>\n      } {...a11yProps(index)} {...other}/>\n  )\n}\n","export function copyStringToClipboard(str) {\n    try {\n        // Create new element\n        let el = document.createElement('textarea');\n        // Set value (string to be copied)\n        el.value = str;\n        if(el.value === \"\"){\n            el.value = \" \";\n        }\n        // Set non-editable to avoid focus and move outside of view\n        el.setAttribute('readonly', '');\n        el.style = {position: 'absolute', left: '-9999px'};\n        document.body.appendChild(el);\n        // Select text inside element\n        el.select();\n        // Copy text to clipboard\n        document.execCommand('copy');\n        // Remove temporary element\n        document.body.removeChild(el);\n        return true;\n    } catch (error) {\n        console.log(\"warning\", \"Failed to copy to clipboard: \" + error.toString());\n        return false;\n    }\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nexport function ResponseDisplayScreenshotModal(props) {\n    const [zoom, setZoom] = React.useState(false);\n    const toggleZoom = () => {\n      setZoom(!zoom);\n    }\n  return (\n    <React.Fragment>\n        <DialogContent dividers={true}>\n            <img onClick={toggleZoom} src={props.href} style={{width: zoom ? \"\" : \"100%\", height: zoom ? \"\" : \"100%\", cursor: zoom ? \"zoom-out\" : \"zoom-in\"}} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport {ResponseDisplayScreenshotModal} from './ResponseDisplayScreenshotModal';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplayScreenshot = (props) =>{\n  const [openScreenshot, setOpenScreenshot] = React.useState(false);\n  const classes = useStyles();\n  const now = (new Date()).toUTCString();\n  const clickOpenScreenshot = () => {\n    setOpenScreenshot(true);\n  }\n\n  return (\n    <React.Fragment>\n      {openScreenshot &&\n      <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n          onClose={()=>{setOpenScreenshot(false);}} \n          innerDialog={<ResponseDisplayScreenshotModal href={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id + \"?time=\" + now} onClose={()=>{setOpenScreenshot(false);}} />}\n      />\n      }\n      <pre style={{display: \"inline-block\"}}>\n        {props?.plaintext || \"\"}\n      </pre>\n      <Tooltip title={props?.hoverText || \"View Screenshot\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Button color=\"primary\" variant={props.variant ? props.variant : \"contained\"} onClick={clickOpenScreenshot} style={{marginBottom: \"10px\"}}>{props.name}</Button>\n      </Tooltip>\n    </React.Fragment>\n  )   \n}","import React, { useEffect } from 'react';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const ResponseDisplayPlaintext = (props) =>{\n  const theme = useTheme();\n  const [plaintextView, setPlaintextView] = React.useState(props.plaintext);\n  useEffect( () => {\n    try{\n      const newPlaintext = JSON.stringify(JSON.parse(props.plaintext), null, 4);\n      setPlaintextView(newPlaintext);\n    }catch(error){\n      //console.log(\"trying to JSONify plaintext error\", error);\n      setPlaintextView(props.plaintext);\n    }\n  }, [props.plaintext])\n  return (\n    <AceEditor \n        mode=\"json\"\n        theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n        fontSize={14}\n        showGutter={true}\n        height={\"100px\"}\n        highlightActiveLine={true}\n        value={plaintextView}\n        focus={true}\n        width={\"100%\"}\n        minLines={2}\n        maxLines={50}\n        readOnly\n        setOptions={{\n          showLineNumbers: true,\n          tabSize: 4,\n          useWorker: false\n        }}/>\n  )\n      \n}","import React, {useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicSelectFromListDialog(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const theme = useTheme();\n    const handleChange = (event) => {\n        setSelected(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(selected);\n        if(props.dontCloseOnSubmit){\n          return;\n        }\n        props.onClose();\n    }\n    useEffect( () => {\n        //expects options to be an array of dictionaries with a \"display\" field for what gets presented to the user\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(opts[0]);\n        }else{\n            setSelected(\"\");\n        }\n    }, [props.options]);\n  return (\n    <React.Fragment>\n        <DialogTitle >{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl style={{width: \"100%\"}}>\n                  <InputLabel ref={inputRef}>Options</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={selected}\n                    onChange={handleChange}\n                    input={<Input style={{width: \"100%\"}}/>}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {options.map( (opt) => (\n                        <MenuItem value={opt} key={opt[props.identifier]}>{opt[props.display]}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n            {props.action}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nexport function CredentialTableNewCredentialDialog(props) {\n  const [credentialType, setCredentialType] = React.useState(\"plaintext\");\n  const credentialOptions = [\n    \"plaintext\", \"ticket\", \"hash\", \"certificate\", \"key\", \"hex\"\n  ];\n  const [account, setAccount] = React.useState(\"\");\n  const [realm, setRealm] = React.useState(\"\");\n  const [credential, setCredential] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const classes = useStyles();\n\n  const onSubmit = () => {\n    props.onSubmit({\n      realm,\n      account,\n      comment,\n      credential,\n      \"type\": credentialType\n    });\n    props.onClose();\n  }\n  const onAccountChange = (name, value, error) => {\n    setAccount(value);\n  }\n  const onCommentChange = (name, value, error) => {\n    setComment(value);\n  }\n  const onRealmChange = (name, value, error) => {\n    setRealm(value);\n  }\n  const onCredentialChange = (name, value, error) => {\n    setCredential(value);\n  }\n  const handleCredentialTypeChange = (event) => {\n    setCredentialType(event.target.value);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Register New Credential</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Which Type of Credential</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  id=\"operator-chip\"\n                  value={credentialType}\n                  onChange={handleCredentialTypeChange}\n                  input={<Input />}\n                  MenuProps={MenuProps}\n                >\n                  {credentialOptions.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <MythicTextField value={account} onChange={onAccountChange} name=\"Account Name\"/>\n              <MythicTextField value={realm} onChange={onRealmChange} name=\"Realm or Domain\"/>\n              <MythicTextField value={comment} onChange={onCommentChange} name=\"Comment\"/>\n              <MythicTextField multiline value={credential} onChange={onCredentialChange} name=\"Credential\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Create\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport Input from '@material-ui/core/Input';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Paper from '@material-ui/core/Paper';\nimport TableHead from '@material-ui/core/TableHead';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {useTheme} from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport {Typography} from '@material-ui/core';\nimport {useMutation, gql } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Popover from '@material-ui/core/Popover';\nimport {CredentialTableNewCredentialDialog} from '../Search/CredentialTableNewCredentialDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\nconst getDynamicQueryParams = gql`\nmutation getDynamicParamsMutation($callback: Int!, $command: String!, $payload_type: String!, $parameter_name: String!){\n    dynamic_query_function(callback: $callback, command: $command, payload_type: $payload_type, parameter_name: $parameter_name){\n        status\n        error\n        choices\n    }\n}\n`;\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      ...credentialData\n    }\n  }\n`;\n\nexport function TaskParametersDialogRow(props){\n    const [value, setValue] = React.useState('');\n    const theme = useTheme();\n    const [ChoiceOptions, setChoiceOptions] = React.useState([]);\n    const [boolValue, setBoolValue] = React.useState(false);\n    const [arrayValue, setArrayValue] = React.useState([]);\n    const [choiceMultipleValue, setChoiceMultipleValue] = React.useState([]);\n    const [agentConnectNewHost, setAgentConnectNewHost] = React.useState(\"\");\n    const [agentConnectHostOptions, setAgentConnectHostOptions] = React.useState([]);\n    const [agentConnectNewPayload, setAgentConnectNewPayload] = React.useState(0);\n    const [agentConnectHost, setAgentConnectHost] = React.useState(0);\n    const [agentConnectPayloadOptions, setAgentConnectPayloadOptions] = React.useState([]);\n    const [agentConnectPayload, setAgentConnectPayload] = React.useState(0);\n    const [agentConnectC2ProfileOptions, setAgentConnectC2ProfileOptions] = React.useState([]);\n    const [agentConnectC2Profile, setAgentConnectC2Profile] = React.useState(0);\n    const [openAdditionalPayloadOnHostMenu, setOpenAdditionalPayloadOnHostmenu] = React.useState(false);\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const [fileValue, setFileValue] = React.useState({name: \"\"});\n    const [getDynamicParams] = useMutation(getDynamicQueryParams, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if(data.dynamic_query_function.status === \"success\"){\n                setChoiceOptions([...data.dynamic_query_function.choices]);\n                if(props.type === \"Choice\"){\n                    if(data.dynamic_query_function.choices.length > 0){\n                        setValue(data.dynamic_query_function.choices[0]);\n                        props.onChange(props.name, data.dynamic_query_function.choices[0], false);\n                    }\n                }\n            }else{\n                snackActions.warning(\"Failed to fetch dynamic parameter query: \" + data.dynamic_query_function.error);\n            }\n        },\n        onError: (data) => {\n            snackActions.warning(\"Failed to perform dynamic parameter query\");\n            console.log(data);\n        }\n    })\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n            setChoiceOptions([...ChoiceOptions, {...data.insert_credential_one}])\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    useEffect( () => {\n        if(props.dynamic_query_function !== null){\n            if(ChoiceOptions.length === 0){\n                getDynamicParams({variables:{\n                    callback: props.callback_id,\n                    parameter_name: props.name,\n                    command: props.commandInfo.cmd,\n                    payload_type: props.commandInfo.payloadtype.ptype\n                }})\n            }\n        }\n       if(props.type === \"Boolean\"){\n            if(value === \"\"){\n                setBoolValue(props.value);\n                setValue(props.value);\n            }\n       }else if(props.type === \"Array\"){\n            if(arrayValue.length === 0 && props.value.length > 0){\n                setArrayValue(props.value);\n            }\n       }else if(props.type === \"ChoiceMultiple\" && props.dynamic_query_function === null){\n           if(value === \"\"){\n               //console.log(props.value);\n                setChoiceMultipleValue(props.value);\n                setValue(props.value);\n                setChoiceOptions(props.choices);\n           }\n       }\n       else if(props.type === \"AgentConnect\"){\n            if(props.choices.length > 0){\n                //setAgentConnectHost(0);\n                let hostNum = 0;\n                if(agentConnectHost < props.choices.length){\n                    hostNum = agentConnectHost;\n                }else{\n                    setAgentConnectHost(0);\n                }\n                setAgentConnectHostOptions(props.choices);\n                let payloadNum = 0;\n                if(agentConnectPayload < props.choices[hostNum][\"payloads\"].length){\n                    payloadNum = agentConnectPayload;\n                }else{\n                    setAgentConnectPayload(0);\n                }\n                setAgentConnectPayloadOptions(props.choices[hostNum][\"payloads\"]);\n                if(props.choices[hostNum][\"payloads\"].length > 0){\n                    //setAgentConnectPayload(0);  \n                    if(props.choices[hostNum][\"payloads\"][payloadNum][\"c2info\"].length > 0){\n                        setAgentConnectC2ProfileOptions(props.choices[hostNum][\"payloads\"][payloadNum][\"c2info\"]);\n                        //setAgentConnectC2Profile(0);\n                    }\n                }else{\n                    snackActions.warning(\"Mythic knows of no host with a P2P payload. Please add one.\");\n                }\n            }else{\n                setAgentConnectHostOptions([]);\n                setAgentConnectC2ProfileOptions([]);\n                snackActions.warning(\"Mythic knows of no host with a P2P payload. Please add one.\")\n            }\n       }else{\n           if(value === \"\"){\n               if(props.type === \"Number\"){\n                   if(props.value === \"\"){\n                       setValue(0);\n                   }else{\n                        setValue(parseInt(props.value));\n                   }\n               }else{\n                    setValue(props.value);\n               }\n           }\n           if(props.dynamic_query_function === null && value===\"\"){\n                setChoiceOptions([...props.choices]);\n                setValue(props.value);\n           }\n           \n       }\n       \n    }, [props.choices, props.default_value, props.type, props.value, setBoolValue, value]);\n    const onChangeAgentConnect = (host_index, payload_index, c2_index) => {\n        const c2profileparameters = props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].parameters.reduce( (prev, opt) => {\n            return {...prev, [opt.name]: opt.value}\n        }, {});\n        let agentConnectValue = {host: props.choices[host_index][\"host\"], agent_uuid: props.choices[host_index][\"payloads\"][payload_index].uuid,\n        c2_profile: {name: props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].name, parameters: c2profileparameters}};\n        if(props.choices[host_index][\"payloads\"][payload_index].type === \"callback\"){\n            agentConnectValue[\"callback_uuid\"] = props.choices[host_index][\"payloads\"][payload_index][\"agent_callback_id\"];\n        }else{\n            agentConnectValue[\"callback_uuid\"] = \"\";\n        }\n        props.onChange(props.name, agentConnectValue, false);\n    }\n    const onChangeLinkInfo = (index) => {\n        let choice;\n        if(props.choices[index][\"source\"][\"id\"] === props.callback_id){\n            choice = props.choices[index][\"destination\"];\n        }else{\n            choice = props.choices[index][\"source\"];\n        }\n        const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n            if(opt.c2_profile_id === props.choices[index][\"c2profile\"][\"id\"]){\n                return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key, dec_key: opt.dec_key} }\n            }else{\n                return {...prev};\n            }\n        }, {});\n        let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: props.choices[index][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n        props.onChange(props.name, agentConnectValue, false);\n        setValue(index);\n    }\n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, evt.target.value, false);\n    }\n    const onChangeCredentialJSONValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, ChoiceOptions[evt.target.value], false);\n    }\n    const onChangeChoiceMultiple = (event) => {\n        const { options } = event.target;\n        const value = [];\n        for (let i = 0, l = options.length; i < l; i += 1) {\n          if (options[i].selected) {\n            value.push(options[i].value);\n          }\n        }\n        setChoiceMultipleValue(value);\n        setValue(value);\n        props.onChange(props.name, value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        props.onChange(props.name, value, error);\n    }\n    const onChangeNumber = (name, value, error) => {\n        setValue(parseInt(value));\n        props.onChange(props.name, parseInt(value), error);\n    }\n    const onSwitchChange = (name, value) => {\n        setBoolValue(value);\n        setValue(value);\n        props.onChange(name, value);\n    }\n    const onFileChange = (evt) => {\n        \n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const contents = btoa(e.target.result);\n            setFileValue({name: evt.target.files[0].name, contents: contents});\n            props.onChange(props.name, {name: evt.target.files[0].name, contents: contents});\n        }\n        reader.readAsBinaryString(evt.target.files[0]);\n        \n    }\n    const onChangeAgentConnectHost = (event) => {\n        setAgentConnectHost(event.target.value); \n        setAgentConnectPayloadOptions(props.choices[event.target.value][\"payloads\"]);\n        if(props.choices[event.target.value][\"payloads\"].length > 0){\n            setAgentConnectPayload(0);  \n            if(props.choices[event.target.value][\"payloads\"][0][\"c2info\"].length > 0){\n                setAgentConnectC2ProfileOptions(props.choices[0][\"payloads\"][0][\"c2info\"]);\n                setAgentConnectC2Profile(0);\n                onChangeAgentConnect(event.target.value, 0, 0);\n            }else{\n                setAgentConnectC2ProfileOptions([]);\n                setAgentConnectC2Profile(null);\n            }\n        }else{\n            setAgentConnectPayloadOptions([]);\n            setAgentConnectPayload(null);\n            setAgentConnectC2ProfileOptions([]);\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectPayload = (event) => {\n        setAgentConnectPayload(event.target.value);\n        setAgentConnectC2ProfileOptions(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"]);\n        if(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"].length > 0){\n            setAgentConnectC2Profile(0);\n            onChangeAgentConnect(agentConnectHost, event.target.value, 0);\n        }else{\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectC2Profile = (event) => {\n        setAgentConnectC2Profile(event.target.value);\n        onChangeAgentConnect(agentConnectHost, agentConnectPayload, event.target.value);\n    }\n    const onChangeAgentConnectNewHost = (name, value, error) => {\n        setAgentConnectNewHost(value);\n    }\n    const onChangeAgentConnectNewPayload = (event) => {\n        setAgentConnectNewPayload(event.target.value);\n    }\n    const onAgentConnectAddNewPayloadOnHost = () => {\n        if(agentConnectNewHost === \"\"){\n            snackActions.error(\"Must set a hostname\");\n            return;\n        }\n        props.onAgentConnectAddNewPayloadOnHost(agentConnectNewHost.toUpperCase(), props.payload_choices[agentConnectNewPayload].id);\n        setOpenAdditionalPayloadOnHostmenu(false);\n    }\n    const onAgentConnectRemovePayloadOnHost = () => {\n        if(props.choices[agentConnectHost][\"payloads\"][agentConnectPayload].payloadOnHostID){\n            props.onAgentConnectRemovePayloadOnHost(props.choices[agentConnectHost][\"payloads\"][agentConnectPayload].payloadOnHostID);\n        }else{\n            snackActions.warning(\"Can't remove a callback\");\n        }\n        \n    }\n    const testParameterValues = (curVal) => {\n        if( props.required && props.verifier_regex !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else if(props.verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const addNewArrayValue = () => {\n        const newArray = [...arrayValue, \"\"];\n        setArrayValue(newArray);\n        props.onChange(props.name, newArray, false);\n    }\n    const removeArrayValue = (index) => {\n        let removed = [...arrayValue];\n        removed.splice(index, 1);\n        setArrayValue(removed);\n        props.onChange(props.name, removed, false);\n    }\n    const onChangeArrayText = (value, error, index) => {\n        let values = [...arrayValue];\n        values[index] = value;\n        setArrayValue(values);\n        props.onChange(props.name, values, false);\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    const getParameterObject = () => {\n        switch(props.type){\n            case \"Choice\":\n            case \"ChoiceMultiple\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                          native\n                          autoFocus={props.autoFocus}\n                          multiple={props.type === \"ChoiceMultiple\"}\n                          value={props.type === \"ChoiceMultiple\" ? choiceMultipleValue : value}\n                          onChange={props.type === \"ChoiceMultiple\" ? onChangeChoiceMultiple : onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Array\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\">\n                        <Table size=\"small\" style={{tableLayout: \"fixed\", maxWidth: \"100%\", \"overflow\": \"auto\"}}>\n                            <TableRow >\n                                <TableCell style={{width: \"5rem\"}}></TableCell>\n                                <TableCell></TableCell>\n                            </TableRow>\n                            <TableBody>\n                                {arrayValue.map( (a, i) => (\n                                    <TableRow key={'array' + props.name + i} hover>\n                                        <TableCell>\n                                            <Button onClick={() => removeArrayValue(i)} color=\"secondary\" variant=\"outlined\" size=\"small\">X</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                        <MythicTextField required={props.required} placeholder={\"\"} value={a} multiline={false} autoFocus={props.autoFocus && i === 0}\n                                                onChange={(n,v,e) => onChangeArrayText(v, e, i)} display=\"inline-block\" onEnter={addNewArrayValue}\n                                                validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                                            />\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                                <TableRow hover>\n                                    <TableCell>\n                                        <Button onClick={addNewArrayValue} size=\"small\" variant=\"outlined\" color=\"primary\">+</Button>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false}\n                        onChange={onChangeText} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Number\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false} type=\"number\"\n                        onChange={onChangeNumber} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                    <Switch checked={boolValue} onChange={onSwitchChange} />\n                )\n            case \"File\":\n                return (\n                    <Button variant=\"contained\" component=\"label\"> \n                        { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n                    <input onChange={onFileChange} type=\"file\" hidden /> </Button>\n                )\n            case \"LinkInfo\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={(evt) => {onChangeLinkInfo(evt.target.value)}}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={i}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"PayloadList\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={opt.uuid}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"AgentConnect\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\"> \n                        <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                            <TableBody>\n                                {openAdditionalPayloadOnHostMenu ? (\n                                <React.Fragment>\n                                    <TableRow>\n                                        <TableCell style={{width: \"6em\"}}>Hostname</TableCell>\n                                        <TableCell>\n                                            <MythicTextField required={true} placeholder={\"hostname\"} value={agentConnectNewHost} multiline={false} autoFocus={props.autoFocus}\n                                                onChange={onChangeAgentConnectNewHost} display=\"inline-block\"/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Payload on that host</TableCell>\n                                        <TableCell>\n                                            <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectNewPayload}\n                                                  onChange={onChangeAgentConnectNewPayload}\n                                                  input={<Input />}\n                                                >\n                                                {props.payload_choices ? (\n                                                    props.payload_choices.map((opt, i) => (\n                                                        <option key={props.name + \"newpayload\" + i} value={i}>{opt.display}</option>\n                                                    ))\n                                                ) : ( <option key={props.name + \"nooptionnewpayload\"} value=\"-1\">No Payloads</option> )}\n                                                </Select>\n                                            </FormControl>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>\n                                            <Button component=\"span\"  style={{color: theme.palette.success.main, padding: 0}} onClick={onAgentConnectAddNewPayloadOnHost}><AddCircleIcon />Add</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                            <Button component=\"span\" style={{color: theme.palette.warning.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(false)}}><CancelIcon />Cancel</Button>\n                                        </TableCell>\n                                    </TableRow>\n                                </React.Fragment>\n                                ) : (null) }\n                                <TableRow>\n                                    <TableCell style={{width: \"6em\"}}>\n                                        Host \n                                    </TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectHost}\n                                              onChange={onChangeAgentConnectHost}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectHostOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connecthost\" + i} value={i}>{opt.host}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell>Payload</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectPayload}\n                                              onChange={onChangeAgentConnectPayload}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectPayloadOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connectagent\" + i} value={i}>{opt.display}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                        \n                                    </TableCell>\n                                </TableRow>\n                                {!openAdditionalPayloadOnHostMenu &&\n                                            <TableRow>\n                                                <TableCell>\n                                                <Button component=\"span\" style={{color: theme.palette.success.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(true)}}><AddCircleIcon />Add</Button>\n                                                </TableCell>\n                                                <TableCell>\n                                                <Button component=\"span\" style={{color: theme.palette.error.main, padding: 0}} onClick={onAgentConnectRemovePayloadOnHost}><DeleteIcon />Remove</Button>\n                                                </TableCell>\n                                            </TableRow>\n                                        }\n                                <TableRow>\n                                    <TableCell>C2 Profile</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectC2Profile}\n                                                  onChange={onChangeAgentConnectC2Profile}\n                                                  input={<Input />}\n                                                >\n                                                {\n                                                    agentConnectC2ProfileOptions.map((opt, i) => (\n                                                        <option key={props.name + \"connectprofile\" + i} value={i}>{opt.name}</option>\n                                                    ))\n                                                }\n                                                </Select>\n                                            </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                        {agentConnectC2ProfileOptions.length > 0 ? (\n                            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                                <TableHead>\n                                        <TableRow>\n                                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                            <TableCell>Value</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                <TableBody>\n                                    \n                                    {agentConnectC2ProfileOptions[agentConnectC2Profile][\"parameters\"].map( (opt, i) => (\n                                        <TableRow key={\"agentconnectparameters\" + props.name + i}>\n                                            <TableCell>{opt.name}</TableCell>\n                                            <TableCell><pre>{JSON.stringify(opt.value, null, 2)}</pre></TableCell>\n                                        </TableRow>\n                                    ) ) }\n                                </TableBody>\n                            </Table>\n                        ): (null)}\n                    </TableContainer>\n                )\n            case \"Credential-JSON\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeCredentialJSONValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={i}>\n                                        {opt.account + \"@\" + opt.realm + \" - \" + opt.credential_text.substring(0, 10) + \" - \" + opt.comment}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                    \n                )\n            case \"Credential-Account\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.account} >\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.account + \" )\" : opt.account}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Realm\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.realm}>\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.realm + \" )\" : opt.realm}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Type\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.type}>{opt.type}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Credential\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.credential_text} style={{textOverflow: \"ellipsis\"}}>\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.credential_text + \" )\" : opt.credential_text}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    return (\n            <TableRow key={\"buildparam\" + props.id}>\n                <TableCell >\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + props.id + 'popover' : undefined}>\n                            {props.display_name}\n                    </Typography>\n                    {props.required ? (\n                        <Typography component=\"div\" style={{color: theme.palette.warning.main}}>Required</Typography>\n                    ) : (null) }\n                    <Popover id={'taskparam' + props.id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{props.description.length > 0 ? props.description : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {TaskParametersDialogRow} from './TaskParametersDialogRow';\nimport {useQuery, gql, useLazyQuery, useMutation } from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Input from '@material-ui/core/Input';\n\n//if we need to get all the loaded commands for the callback and filter, use this\nconst GetLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}}) {\n    id\n    command {\n      cmd\n      attributes\n      id\n    }\n  }\n}\n`;\n//if we need to get all the possible commands for a payload type and filter, use this\nconst getAllCommandsQuery = gql`\nquery getAllCommandsQuery($payload_type_id: Int!){\n    command(where: {payload_type_id: {_eq: $payload_type_id}, deleted: {_eq: false}}) {\n        attributes\n        cmd\n        id\n    }\n}\n`;\n//if we need to get all the possible edges for the callback, use this\nconst getAllEdgesQuery = gql`\nquery getAllEdgesQuery($callback_id: Int!){\n    callbackgraphedge(where: {_or: [{source_id:{_eq: $callback_id}}, {destination_id: {_eq: $callback_id}}]}) {\n        id\n        c2profile {\n          id\n          name\n        }\n        direction\n        destination{\n            agent_callback_id\n            host\n            id\n            payload {\n              id\n              uuid\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              value\n              id\n              c2_profile_id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        source{\n            agent_callback_id\n            host\n            id\n            payload {\n              uuid\n              id\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              c2_profile_id\n              value\n              id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        end_timestamp\n      }\n    }\n`;\n// get all payloads query\nconst getAllPayloadsQuery = gql`\nquery getAllPayloadsQuery($operation_id: Int!){\n    payload(where: {deleted: {_eq: false}, build_phase: {_eq: \"success\"}, operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    uuid\n    payloadc2profiles {\n      id\n      c2profile {\n        name\n        id\n      }\n    }\n    payloadtype{\n        id\n        ptype\n    }\n    filemetum {\n        id\n        filename_text\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        name\n        id\n      }\n    }\n  }\n}\n`;\n// get all payloads on hosts\nconst getAllPayloadsOnHostsQuery = gql`\nquery getAllPayloadsOnHostsQuery($operation_id: Int!){\n    payloadonhost(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, payload: {c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}}) {\n        host\n        id\n        payload {\n            auto_generated\n            id\n            tag\n            filemetum {\n                filename_text\n                id\n            }\n            uuid\n            c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n                c2profile {\n                    name\n                    id\n                }\n                c2profileparameter {\n                    crypto_type\n                    name\n                    id\n                }\n                value\n                enc_key_base64\n                dec_key_base64\n                id\n            }\n        }\n    }\n    callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}, c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}){\n        agent_callback_id\n        host\n        id\n        description\n        crypto_type\n        payload {\n            auto_generated\n            id\n            tag\n            filemetum {\n                filename_text\n                id\n            }\n            uuid\n        }\n        c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n            c2profile {\n                name\n                id\n            }\n            c2profileparameter {\n                crypto_type\n                name\n                id\n            }\n            value\n            enc_key_base64\n            dec_key_base64\n            id\n        }\n    }\n}\n`;\n// use this to add a payload on a host\nconst addPayloadOnHostMutation = gql`\n    mutation addPayloadOnHostMutation($host: String!, $payload_id: Int!){\n        insert_payloadonhost(objects: {host: $host, payload_id: $payload_id}) {\n            affected_rows\n          }\n    }\n`;\n// use this to remove a payload on a host\nconst removePayloadOnHostMutation = gql`\n    mutation removePayloadOnHostMutation($payloadOnHostID: Int!){\n        delete_payloadonhost_by_pk(id: $payloadOnHostID) {\n            id\n          }\n    }\n`;\n// use this to get all of the parameters and information for the command we're trying to execute\nconst getCommandQuery = gql`\nquery getCommandQuery($id: Int!){\n  command_by_pk(id: $id) {\n    attributes\n    author\n    cmd\n    description\n    help_cmd\n    id\n    needs_admin\n    version\n    payloadtype{\n        ptype\n    }\n    commandparameters {\n      choice_filter_by_command_attributes\n      choices\n      choices_are_all_commands\n      choices_are_loaded_commands\n      default_value\n      description\n      id\n      name\n      required\n      supported_agent_build_parameters\n      supported_agents\n      type\n      dynamic_query_function\n      ui_position\n      parameter_group_name\n      display_name\n      cli_name\n    }\n    commandopsec {\n      authentication\n      id\n      injection_method\n      process_creation\n    }\n  }\n}\n`;\n// use this to get all of the credentials for the command we're trying to execute\nconst getCredentialsQuery = gql`\nquery getCredentialsQuery($operation_id: Int!){\n    credential(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}}){\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n    }\n}\n`;\nexport function TaskParametersDialog(props) {\n    const [commandInfo, setCommandInfo] = useState({});\n    const [parameterGroups, setParameterGroups] = useState([]);\n    const [selectedParameterGroup, setSelectedParameterGroup] = useState('Default');\n    const [parameters, setParameters] = useState([]);\n    const [rawParameters, setRawParameters] = useState(false);\n    const [requiredPieces, setRequiredPieces] = useState({all: false, loaded: false, edges: false, credentials: false});\n    //get all the data about our command that we can\n    const [getAllCommands, { data: allCommandsLoading}] = useLazyQuery(getAllCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getLoadedCommands, { data: loadedCommandsLoading}] = useLazyQuery(GetLoadedCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllEdges, { data: loadedAllEdgesLoading}] = useLazyQuery(getAllEdgesQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloads, { data: loadedAllPayloadsLoading}] = useLazyQuery(getAllPayloadsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloadsOnHosts, { data: loadedAllPayloadsOnHostsLoading}] = useLazyQuery(getAllPayloadsOnHostsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllCredentials, { data: loadedCredentialsLoading}] = useLazyQuery(getCredentialsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [addPayloadOnHost] = useMutation(addPayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    });\n    const [RemovePayloadOnHost] = useMutation(removePayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    })\n    useQuery(getCommandQuery, {\n        variables: {id: props.command.id},\n        onCompleted: data => {\n            // do an initial pass to see what other quries we need to make\n            let requiredPiecesInitial = {all: false, loaded: false, edges: false, credentials: false};\n            let groupNames = [];\n            data.command_by_pk.commandparameters.forEach( (cmd) => {\n                if(!groupNames.includes(cmd.parameter_group_name)){\n                    groupNames.push(cmd.parameter_group_name);\n                }\n                if(cmd.type === \"LinkInfo\"){\n                    requiredPiecesInitial[\"edges\"] = true;\n                }else if(cmd.choices_are_all_commands){\n                    requiredPiecesInitial[\"all\"] = true;\n                }else if(cmd.choices_are_loaded_commands){\n                    requiredPiecesInitial[\"loaded\"] = true;\n                }else if(cmd.type === \"AgentConnect\"){\n                    requiredPiecesInitial[\"connect\"] = true;\n                    //need payloads as well in case the user wants to add a payload to a host\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type === \"PayloadList\"){\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type.includes(\"Credential\")){\n                    requiredPiecesInitial[\"credentials\"] = true;\n                }\n            });\n            groupNames.sort();\n            setParameterGroups(groupNames);\n            if(props.command.groupName && groupNames.includes(props.command.groupName)){\n                setSelectedParameterGroup(props.command.groupName);\n            } else if(!groupNames.includes(\"Default\")){\n                setSelectedParameterGroup(groupNames[0]);\n            }\n            setCommandInfo({...data.command_by_pk});\n            if(requiredPiecesInitial[\"edges\"]){getAllEdges({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"all\"]){getAllCommands({variables: {payload_type_id: props.payloadtype_id}});}\n            if(requiredPiecesInitial[\"loaded\"]){getLoadedCommands({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"payloads\"]){getAllPayloads({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"connect\"]){getAllPayloadsOnHosts({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"credentials\"]){getAllCredentials({variables: {operation_id: props.operation_id}});}\n            setRequiredPieces(requiredPiecesInitial);\n            setRawParameters({...data});\n        }\n    });\n    const intersect = (a, b) => {\n      let setB = new Set(b);\n      return [...new Set(a)].filter(x => setB.has(x));\n    }\n    \n    useEffect( () => {\n        const getLinkInfoFromAgentConnect = (choices) => {\n            if(choices.length > 0){\n                const c2profileparameters = choices[0][\"payloads\"][0][\"c2info\"][0].parameters.reduce( (prev, opt) => {\n                    return {...prev, [opt.name]: opt.value}\n                }, {});\n                let agentConnectValue = {host: choices[0][\"host\"], agent_uuid: choices[0][\"payloads\"][0].uuid,\n                c2_profile: {name: choices[0][\"payloads\"][0][\"c2info\"][0].name, parameters: c2profileparameters}};\n                if(choices[0][\"payloads\"][0].type === \"callback\"){\n                    agentConnectValue[\"callback_uuid\"] = props.choices[0][\"payloads\"][0][\"agent_callback_id\"];\n                }\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        };\n        const getLinkInfoValue = (choices) => {\n            let choice;\n            if(choices.length > 0){\n                if(choices[0][\"source\"][\"id\"] === props.callback_id){\n                    choice = choices[0][\"destination\"];\n                }else{\n                    choice = choices[0][\"source\"];\n                }\n                const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n                    if(opt.c2_profile_id === choices[0][\"c2profile\"][\"id\"]){\n                        return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key_base64, dec_key: opt.dec_key_base64} }\n                    }else{\n                        return {...prev};\n                    }\n                }, {});\n                let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: choices[0][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        }\n        if(rawParameters && (!requiredPieces[\"loaded\"] || loadedCommandsLoading) &&\n                       (!requiredPieces[\"all\"] || allCommandsLoading) &&\n                       (!requiredPieces[\"edges\"] || loadedAllEdgesLoading) &&\n                       (!requiredPieces[\"payloads\"] || loadedAllPayloadsLoading) && \n                       (!requiredPieces[\"connect\"] || loadedAllPayloadsOnHostsLoading) &&\n                       (!requiredPieces[\"credentials\"] || loadedCredentialsLoading) ){\n            //only process the parameter once we have fetched all of the required pieces\n            const params = rawParameters.command_by_pk.commandparameters.reduce( (prev, cmd) => {\n                if(cmd.parameter_group_name !== selectedParameterGroup){\n                    return [...prev];\n                }\n                switch(cmd.type){\n                    case \"Boolean\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }\n                        else if(cmd.default_value){\n                            return [...prev, {...cmd, value: cmd.default_value.toLowerCase() === \"true\"}];\n                        }else{\n                            return [...prev, {...cmd, value: false}];\n                        }\n                    case \"String\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, value: cmd.default_value}];\n                        }                      \n                    case \"Number\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, value: cmd.default_value === \"\" ? 0 : parseInt(cmd.default_value)}];\n                        }\n                    case \"Array\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else if(cmd.default_value.length > 0){\n                            return [...prev, {...cmd, value: JSON.parse(cmd.default_value)}];\n                        }else{\n                            return [...prev, {...cmd, value: []}];\n                        }\n                    case \"Choice\":\n                    case \"ChoiceMultiple\":\n                        let choices = cmd.choices.split(\"\\n\");\n                        let defaultV = cmd.default_value;\n                        if(cmd.type === \"ChoiceMultiple\"){\n                            if(cmd.default_value !== \"\"){\n                                defaultV = JSON.parse(cmd.default_value);\n                            }else{\n                                defaultV = [];\n                            }\n                        }else{\n                            if(choices.length > 0){\n                                defaultV = cmd.default_value === \"\" ? choices[0] : cmd.default_value;\n                            }\n                        }\n                        let filter = JSON.parse(cmd.choice_filter_by_command_attributes);\n                        if(cmd.choices_are_all_commands){\n                            //get all of the latest commands\n                            choices = [...allCommandsLoading.command];\n                            choices = choices.reduce( (prevn, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prevn, c.cmd];\n                                }else{\n                                    return [...prevn];\n                                }\n                            }, []);\n                            choices.sort();\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }else if(cmd.choices_are_loaded_commands){\n                            //get all of the loaded commands\n                            choices = [...loadedCommandsLoading.loadedcommands];\n                            choices = choices.reduce( (prevn, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.command.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prevn, c.command.cmd];\n                                }else{\n                                    return [...prevn];\n                                }\n                            }, []);\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, choices: choices, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, choices: choices, default_value: defaultV, value: defaultV}];\n                        }\n                    case \"File\":\n                        return [...prev, {...cmd, value: {} }];                   \n                    case \"Credential-JSON\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: {}, choices: []}];\n                        }\n                    case \"Credential-Account\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"account\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Realm\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"realm\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Type\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"type\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Credential\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"credential_text\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"AgentConnect\":\n                        const agentConnectNewPayloads = loadedAllPayloadsLoading.payload.reduce( (prevn, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prevn, profile) => {\n                                return [...prevn, profile.c2profile.name];\n                            }, []).join(\",\");\n                            return [...prevn, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                        }, []);\n                        const callbacksOrganized = loadedAllPayloadsOnHostsLoading.callback.reduce( (prevn, entry) => {\n                            let found = false;\n                            const updates = prevn.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    const c2info = entry.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prevn){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.registered_payload, c2info: c2array, display: \"Callback \" + entry.id + \" - \" + entry.description, ...entry, type: \"callback\", payloadOnHostID:null};\n                                    return {...host, payloads: [...host.payloads, payloadInfo]}\n                                }else{\n                                    return host;\n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prevn){\n                                        //we just want to add a new entry to the c2profile.name list\n                                            \n                                        return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.registered_payload, c2info: c2array, display: \"Callback \" + entry.id + \" - \" + entry.description, ...entry, type: \"callback\", payloadOnHostID:null};\n                                return [...prevn, {host: entry.host, payloads: [payloadInfo] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        const organized = loadedAllPayloadsOnHostsLoading.payloadonhost.reduce( (prevn, entry) => {\n                            let found = false;\n                            const updates = prevn.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    //now we need to merge this entry with our current payloads/callbacks for the host\n                                    let duplicated_payload = false;\n                                    host.payloads.forEach( (p) => {\n                                        if(p.id === entry.payload.id){duplicated_payload = true}\n                                    });\n                                    if(duplicated_payload){return host}\n                                    const c2info = entry.payload.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prevn){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\", payloadOnHostID:entry.id};\n                                    return {...host, payloads: [...host.payloads, payloadInfo]}\n                                }else{\n                                    //this doesn't match our host, so don't modify\n                                    return host; \n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.payload.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prevn){\n                                        //we just want to add a new entry to the c2profile.name list\n                                        \n                                        return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\", payloadOnHostID:entry.id};\n                                return [...prevn, {host: entry.host, payloads: [payloadInfo] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        // callbacksOrganized has all the information for active callbacks to link to\n                        // organized has all of the information for payloads on hosts to link to\n                        // need to merge the two\n                        const allOrganized = callbacksOrganized.reduce( (prevn, cur) => {\n                            let hostIndex = prevn.findIndex(o => o.host === cur.host);\n                            if(hostIndex > -1){\n                                // need to add cur.payloads to the prev[hostIndex].payloads list\n                                prevn[hostIndex].payloads = [...prevn[hostIndex].payloads, ...cur.payloads];\n                                return [...prevn];\n                            }else{\n                                return [...prevn, {...cur}];\n                            }\n                        }, [...organized]);\n                        console.log(\"updating choices and payload choices\", allOrganized, agentConnectNewPayloads)\n                        return [...prev, {...cmd, choices: allOrganized, payload_choices: agentConnectNewPayloads, value: getLinkInfoFromAgentConnect(organized)}];\n                    case \"PayloadList\":\n                        let supported_agents = cmd.supported_agents.split(\",\");\n                        if(supported_agents.indexOf(\"\") !== -1){supported_agents.splice(supported_agents.indexOf(\"\"))}\n                        const build_requirements = JSON.parse(cmd.supported_agent_build_parameters);\n                        const payloads = loadedAllPayloadsLoading.payload.reduce( (prevn, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prevn, profile) => {\n                                return [...prevn, profile.c2profile.name];\n                            }, []).join(\",\");\n                            if(supported_agents.length > 0 && !supported_agents.includes(payload.payloadtype.ptype)){return prevn};\n                            let matched = true;\n                            if(payload.payloadtype.ptype in build_requirements){\n                                //this means we have a filtering condition on our payload\n                                for(const [key, value] of Object.entries(build_requirements[payload.payloadtype.ptype])){\n                                    payload.buildparameterinstances.forEach( (build_param) => {\n                                        if(build_param.buildparameter.name === key){\n                                            if(build_param.parameter !== value){matched = false}\n                                        }\n                                    });\n                                }\n                            }\n                            if(matched){\n                                return [...prevn, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                            }else{\n                                return prevn;\n                            }\n                            \n                        }, []);\n                        //now filter the payloads based on supported_agents and supported_agent_build_parameters\n                        if(payloads.length > 0){\n                            return [...prev, {...cmd, choices: payloads, default_value: payloads[0].uuid, value: payloads[0].uuid}];\n                        }else{\n                            return [...prev, {...cmd, choices: payloads, value: null}];\n                        }\n                    case \"LinkInfo\":\n                        const edge_choices = loadedAllEdgesLoading.callbackgraphedge.reduce( (prevn, edge) => {\n                            if(edge.source.id === edge.destination.id) {return prevn}\n                            if(edge.direction === 1){\n                                return [...prevn, {...edge, display: \"Callback \" + edge.source.id + \" --\" + edge.c2profile.name + \"--> Callback \" + edge.destination.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            }else if(edge.direction === 2){\n                                return [...prevn, {...edge, display: \"Callback \" + edge.destination.id + \"-> \" + edge.c2profile.name + \"--> Callback \" + edge.source.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            } else{\n                                return prevn;\n                            }\n                        }, []);\n                        if(edge_choices.length > 0){\n                            return [...prev, {...cmd, choices: edge_choices, value: getLinkInfoValue(edge_choices)}];\n                        }else{\n                            return [...prev, {...cmd, choices: edge_choices, value: {}}];\n                        }\n                    default:\n                        return [...prev, {...cmd}];\n                }\n            }, [] );\n            const sorted = params.sort((a, b) => (a.ui_position > b.ui_position) ? 1 : -1)\n            if(sorted.length > 0){\n                sorted[0][\"autoFocus\"] = true;\n            }\n            setParameters(sorted);\n        }\n    }, [selectedParameterGroup, rawParameters, loadedCommandsLoading, allCommandsLoading, loadedAllEdgesLoading, requiredPieces, loadedAllPayloadsLoading, loadedCredentialsLoading, loadedAllPayloadsOnHostsLoading, props.callback_id, props.choices]);\n    const onSubmit = () => {\n        const collapsedParameters = parameters.reduce( (prev, param) => {\n            switch(param.type){\n                case \"String\":\n                case \"Boolean\":\n                case \"Number\":\n                case \"Choice\":\n                case \"ChoiceMultiple\":\n                case \"Credential-Account\":\n                case \"Credential-Realm\":\n                case \"Credential-Type\":\n                case \"Credential-Credential\":\n                case \"AgentConnect\":\n                case \"PayloadList\":\n                case \"Array\":\n                case \"LinkInfo\":\n                    return {...prev, [param.name]: param.value}\n                case \"File\":\n                    return {...prev, [param.name]: param.value.name}\n                case \"Credential-JSON\":\n                    return {...prev, [param.name]: {\n                        account: param.value[\"account\"],\n                        comment: param.value[\"comment\"],\n                        credential: param.value[\"credential_text\"],\n                        realm: param.value[\"realm\"],\n                        type: param.value[\"type\"]\n                    }}\n                default:\n                    return {...prev}\n            }\n        }, {});\n        const collapsedFiles = parameters.reduce( (prev, param) => {\n            if(param.type === \"File\"){\n                return {...prev, [param.name]: param.value.contents}\n            }else{\n                return {...prev}\n            }\n        }, {});\n        props.onSubmit(props.command.cmd, JSON.stringify(collapsedParameters), JSON.stringify(collapsedFiles), selectedParameterGroup);\n    }\n    const onAgentConnectAddNewPayloadOnHost = (host, payload) => {\n        addPayloadOnHost({variables: {host: host, payload_id: payload} })\n    }\n    const onAgentConnectRemovePayloadOnHost = (payloadOnHostID) => {\n        RemovePayloadOnHost({variables: {payloadOnHostID: payloadOnHostID}})\n    }\n    const onChange = (name, value, error) => {\n        const params = parameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value: value};\n            }else{\n                return {...param};\n            }\n        });\n        setParameters(params);\n    }\n    const onChangeParameterGroup = (event) => {\n        setSelectedParameterGroup(event.target.value);\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.command.cmd}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <Typography component=\"div\" >\n                <b>Help</b> <pre style={{margin:0}}>{props.command.help_cmd}</pre>\n                <b>Description</b> <pre style={{margin:0, wordBreak: \"break-all\", overflow: \"word-wrap\", whiteSpace: \"pre-wrap\"}}>{props.command.description}</pre>\n                <b>Requires Admin?</b> {props.command.needs_admin ? \"True\": \"False\"}\n                {parameterGroups.length > 1 &&\n                    <FormControl style={{width: \"100%\"}} >\n                        <TextField\n                            select\n                            label=\"Parameter Group\"\n                            value={selectedParameterGroup}\n                            onChange={onChangeParameterGroup}\n                            \n                            input={<Input />}\n                        >\n                        {\n                            parameterGroups.map((opt, i) => (\n                                <MenuItem key={\"paramgroup\" + i} value={opt} >{opt}</MenuItem>\n                            ))\n                        }\n                        </TextField>\n                    </FormControl>\n                }\n            </Typography>\n            <TableContainer component={Paper} className=\"mythicElement\"> \n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                            <TableCell>Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {parameters.map( (op) => (\n                            <TaskParametersDialogRow onSubmit={onSubmit} key={\"taskparameterrow\" + op.id} onChange={onChange} commandInfo={commandInfo} {...op} \n                                callback_id={props.callback_id} onAgentConnectAddNewPayloadOnHost={onAgentConnectAddNewPayloadOnHost}\n                                onAgentConnectRemovePayloadOnHost={onAgentConnectRemovePayloadOnHost}\n                                />\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport {gql, useMutation, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\n\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $ui_feature: String!) {\n    callback_by_pk(id: $callback_id){\n        operation_id\n        loadedcommands(where: {command: {supported_ui_features: {_ilike: $ui_feature}}}) {\n            id\n            command {\n              cmd\n              help_cmd\n              description\n              id\n              needs_admin\n              payload_type_id\n              attributes\n              commandparameters {\n                id\n                type \n              }\n              supported_ui_features\n            }\n        }\n        callbacktokens(where: {deleted: {_eq: false}}) {\n            token {\n              TokenId\n              id\n              User\n              description\n            }\n            id\n        }\n    }\n}\n`;\n\nexport const TaskFromUIButton = ({callback_id, ui_feature, parameters, onTasked}) =>{\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState([]);\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [callbackTokenOptions, setCallbackTokenOptions] = React.useState([]);\n    const [selectedCallbackToken, setSelectedCallbackToken] = React.useState({});\n    const [openCallbackTokenSelectDialog, setOpenCallbackTokenSelectDialog] = React.useState(false);\n    const [taskingVariables, setTaskingVariables] = React.useState({});\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + callback_id);\n            }\n            onTasked();\n        },\n        onError: data => {\n            console.error(data);\n            onTasked();\n        }\n    });\n    const {data: callbackData} = useQuery(getLoadedCommandsQuery, {\n        variables: {callback_id: callback_id, ui_feature: \"%\" + ui_feature + \"%\"},\n        onCompleted: (data) => {\n            const availableCommands = data.callback_by_pk.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const availableTokens = data.callback_by_pk.callbacktokens.reduce( (prev, cur) => {\n                return [...prev, {...cur.token, \"display\": cur.token.User === null ? cur.token.TokenId + \" - \" + cur.token.description : cur.token.User + \" - \" + cur.token.description}]\n            }, []);\n            setCallbackTokenOptions(availableTokens);\n            setFileBrowserCommands(availableCommands);\n            if(availableCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support the \" + ui_feature + \" feature\");\n            }else if(availableCommands.length === 1){\n                setSelectedCommand({...availableCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const onSubmitTasking = ({variables}) => {\n        if(callbackTokenOptions.length > 0){\n            setOpenCallbackTokenSelectDialog(true);\n            setTaskingVariables(variables);\n        }else{\n            createTask({variables})\n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        onSubmitTasking({variables: {callback_id: callback_id, command: cmd, params: parameters, files, tasking_location: \"modal\"}});\n    }\n    const onSubmitSelectedToken = (token) => {\n        setSelectedCallbackToken(token);\n    }\n    useEffect( () => {\n        if(selectedCallbackToken === \"\"){\n            // we selected the default token to use\n            createTask({variables: taskingVariables})\n        }\n        if(selectedCallbackToken.TokenId){\n            createTask({variables: {...taskingVariables, token_id: selectedCallbackToken.TokenId}})\n        }else{\n            return;\n        }\n        \n    }, [selectedCallbackToken])\n    useEffect( () => {\n        if(selectedCommand.commandparameters === undefined){\n            return;\n        }\n        if(selectedCommand.commandparameters.length > 0){\n            if(parameters === undefined || parameters === null){\n                setOpenParametersDialog(true);\n            }else{\n                if(typeof(parameters) === \"string\"){\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters}});\n                }else{\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: JSON.stringify(parameters), tasking_location: \"browserscript\"}});\n                }\n                \n            }\n        }else{\n            if(parameters === undefined || parameters === null){\n                onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: \"\"}});\n            }else{\n                if(typeof(parameters) === \"string\"){\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters}});\n                }else{\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: JSON.stringify(parameters), tasking_location: \"browserscript\"}});\n                }\n            }\n            \n        }\n    }, [selectedCommand])\n    return (\n        <div>\n            {openSelectCommandDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                        onClose={()=>{setOpenSelectCommandDialog(false);onTasked();}} \n                        innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                            onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                            action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                    />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);onTasked();}} \n                    innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={callback_id} payloadtype_id={callbackData.callback_by_pk.payload.payloadtype.id}\n                        operation_id={callbackData.callback_by_pk.operation_id} \n                        onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            {openCallbackTokenSelectDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openCallbackTokenSelectDialog}\n                    onClose={()=>{setOpenCallbackTokenSelectDialog(false);onTasked();}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenCallbackTokenSelectDialog(false);onTasked();}}\n                                        onSubmit={onSubmitSelectedToken} dontCloseOnSubmit={true} options={callbackTokenOptions} title={\"Select Token\"} \n                                        action={\"select\"} identifier={\"id\"} display={\"display\"}/>}\n                />\n            }\n        </div>\n    )\n}\n","import React, {useEffect, useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport { MythicViewJSONAsTableDialog, MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport IconButton from '@material-ui/core/IconButton';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { Tooltip } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faList, faTrashAlt, faSkullCrossbones, faCamera, faSyringe, faFolder, faFolderOpen, faFileArchive, faCog, faFileWord, faFileExcel, faFilePowerpoint, faFilePdf, faDatabase, faKey, faFileCode, faDownload, faUpload, faFileImage, faCopy, faBoxOpen, faFileAlt } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\nconst onCopyToClipboard = (data) => {\n  let result = copyStringToClipboard(data);\n  if(result){\n    snackActions.success(\"Copied text!\");\n  }else{\n    snackActions.error(\"Failed to copy text\");\n  }\n}\nconst getIconName = (iconName) => {\n  switch(iconName.toLowerCase()){\n    case \"openfolder\":\n    case \"folder\":\n      return faFolderOpen;\n    case \"closedfolder\":\n      return faFolder;\n    case \"archive\":\n    case \"zip\":\n      return faFileArchive;\n    case \"diskimage\":\n      return faBoxOpen;\n    case \"executable\":\n      return faCog;\n    case \"word\":\n      return faFileWord;\n    case \"excel\":\n      return faFileExcel;\n    case \"powerpoint\":\n      return faFilePowerpoint;\n    case \"pdf\":\n    case \"adobe\":\n      return faFilePdf;\n    case \"database\":\n      return faDatabase;\n    case \"key\":\n      return faKey;\n    case \"code\":\n    case \"source\":\n      return faFileCode;\n    case \"download\":\n      return faDownload;\n    case \"upload\":\n      return faUpload;\n    case \"png\":\n    case \"jpg\":\n    case \"image\":\n      return faFileImage;\n    case \"list\":\n      return faList;\n    case \"delete\":\n      return faTrashAlt;\n    case \"inject\":\n      return faSyringe;\n    case \"kill\":\n      return faSkullCrossbones;\n    case \"camera\":\n      return faCamera;\n    default:\n      return faFileAlt;\n  }\n}\nconst ResponseDisplayTableStringCell = ({cellData, rowData}) => {\n  const classes = useStyles();\n  return (\n    <div style={{...cellData[\"cellStyle\"]}}>\n      {cellData?.copyIcon? \n        <Tooltip title={\"Copy to clipboard\"} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n            <IconButton onClick={() => onCopyToClipboard(cellData[\"plaintext\"])} size=\"small\">\n                <FontAwesomeIcon icon={faCopy} />\n            </IconButton>\n        </Tooltip> : null}\n      {cellData?.startIcon? \n        <Tooltip title={cellData?.startIconHoverText || \"\"} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}><span>\n            <FontAwesomeIcon icon={getIconName(cellData?.startIcon)} style={{marginRight: \"5px\", color: cellData?.startIconColor  || \"\"}}/></span>\n        </Tooltip>\n         : null\n      }\n      {cellData.plaintextHoverText? (\n        <Tooltip title={cellData.plaintextHoverText} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n          <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext || \" \"}\n          </pre>\n          \n        </Tooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext || \" \"}\n          </pre>\n      )}\n      {cellData?.endIcon? \n       <Tooltip title={cellData?.endIconHoverText || \"\"} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}><span>\n          <FontAwesomeIcon icon={getIconName(cellData?.endIcon)} style={{color: cellData?.endIconColor  || \"\"}}/> </span> \n        </Tooltip>: null\n      }\n    </div>\n          \n  )\n}\nconst getStringSize = ({cellData}) => {\n  try{\n      // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n      let bytes = parseInt(cellData[\"plaintext\"]);\n      if (cellData[\"plaintext\"] === ''){\n        return \"\"\n      }\n      if (bytes === 0){\n        return \"0 Bytes\";\n      };\n      const decimals = 2;\n      const k = 1024;\n      const dm = decimals < 0 ? 0 : decimals;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      const size = parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n      return size;\n  }catch(error){\n    return cellData?.plaintext || \"\"\n    \n  }\n}\nconst ResponseDisplayTableSizeCell = ({cellData}) => {\n  const classes = useStyles();\n  return (\n    <div style={{...cellData[\"cellStyle\"]}}>\n        {cellData.plaintextHoverText? (\n        <Tooltip title={cellData.plaintextHoverText} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n          <pre style={{display: \"inline-block\"}}>\n            {getStringSize({cellData})}\n          </pre>\n          \n        </Tooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {getStringSize({cellData})}\n          </pre>\n      )}\n     </div>\n          \n  )\n}\nconst ResponseDisplayTableActionCell = ({cellData, callback_id, rowData}) => {\n  const theme = useTheme();\n  const [openButton, setOpenButton] = React.useState(false);\n  const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n  const dropdownAnchorRef = useRef(null);\n  const [openDropdownButton, setOpenDropdownButton] = React.useState(false);\n  const [taskingData, setTaskingData] = React.useState({});\n  const classes = useStyles();\n  const handleClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpenDropdownButton(false);\n  };\n  const handleMenuItemClick = (event, index) => {\n    switch(cellData.button.value[index].type.toLowerCase()){\n      case \"task\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenTaskingButton(true);\n        break;\n      case \"dictionary\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenButton(true);\n        break;\n    }\n    setOpenDropdownButton(false);\n  };\n  const finishedTasking = () => {\n    setOpenTaskingButton(false);\n    setTaskingData({});\n  }\n  const finishedViewingData = () => {\n    setOpenButton(false);\n    setTaskingData({});\n  }\n  const getButtonObject = () => {\n    switch(cellData.button.type.toLowerCase()){\n      case \"dictionary\":\n        return (\n          <React.Fragment>\n            <Tooltip title={cellData?.button?.hoverText || \"Display Data\"} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" \n                onClick={() => setOpenButton(true)} disabled={cellData?.button?.disabled || false}\n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n                >{cellData?.button?.name || \" \"}</Button>\n            </Tooltip>\n            {openButton &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openButton} \n                    onClose={()=>{setOpenButton(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title={cellData?.button?.title || \"Title Here\"} leftColumn={cellData?.button?.leftColumnTitle || \"Left Column\"} \n                    rightColumn={cellData?.button?.rightColumnTitle || \"Right Column\"} value={cellData?.button?.value || {}} onClose={()=>{setOpenButton(false);}} />}\n                />\n              }\n            </React.Fragment>\n        )\n      case \"task\":\n        return (\n          <React.Fragment>\n            <Tooltip title={cellData?.button?.hoverText || \"Issues Task to Agent\"} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n              <Button size=\"small\" onClick={() => setOpenTaskingButton(true)} disabled={cellData?.button?.disabled || false} variant=\"contained\" color=\"secondary\" \n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n              >{cellData?.button?.name || \" \"}</Button>\n            </Tooltip>\n            {openTaskingButton && \n              <TaskFromUIButton ui_feature={cellData?.button?.ui_feature || \" \"} \n                callback_id={callback_id} \n                parameters={cellData?.button?.parameters || \"\"}\n                onTasked={() => setOpenTaskingButton(false)}/>\n            }\n          </React.Fragment>\n        )\n      case \"menu\":\n        return (\n          <React.Fragment>\n            {openTaskingButton && \n              <TaskFromUIButton ui_feature={taskingData.ui_feature} \n                callback_id={callback_id} \n                parameters={taskingData.parameters}\n                onTasked={finishedTasking}/>\n            }\n            {openButton && \n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openButton} \n                onClose={finishedViewingData} \n                innerDialog={<MythicViewJSONAsTableDialog title={taskingData.title} leftColumn={taskingData.leftColumnTitle} \n                rightColumn={taskingData.rightColumnTitle} value={taskingData.value} onClose={finishedViewingData} />}\n            />\n            }\n            <Button ref={dropdownAnchorRef} size=\"small\" onClick={()=>{setOpenDropdownButton(true);}} color=\"primary\" variant=\"contained\">{cellData.button.name}</Button>\n                <Popper open={openDropdownButton} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {cellData.button.value.map((option, index) => (\n                              <MenuItem\n                                key={option.name + index}\n                                disabled={option.disabled}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n          </React.Fragment>\n        )\n    }\n  }\n  return (\n    <div style={{...cellData[\"cellStyle\"]}}>\n      {cellData.plaintext ? cellData.plaintext : null}\n      {cellData.button ? (getButtonObject()) : (null)}\n    </div>\n  )\n}\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n  const DisplayData = () => {\n    switch(columnData.format){\n      case \"string\":\n        return <ResponseDisplayTableStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n      case \"size\":\n        return <ResponseDisplayTableSizeCell cellData={rowData[dataKey]} rowData={rowData}/>\n      case \"button\":\n        return <ResponseDisplayTableActionCell callback_id={columnData.callback_id} cellData={rowData[dataKey]} rowData={rowData}/>\n      default:\n        return <ResponseDisplayTableStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n    }\n  };\n  return (\n    DisplayData()\n  )\n}\nconst noRowsRender = () => {\n  return (\n    <div>NO DATA</div>\n  )\n}\n\nexport const ResponseDisplayTable = ({table, callback_id}) =>{\n  const theme = useTheme();\n  const [allHeaders, setAllHeaders] = React.useState([]);\n  const allData = React.useRef([]);\n  const [sortBy, setSortBy] = React.useState(\"\");\n  const [headerWidths, setHeaderWidths] = React.useState({});\n  const widthRef = React.useRef(null);\n  const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n  const rowStyle =  ({index}) => {\n    if(index < 0){\n      return {backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main};\n    }\n    return allData.current[index][\"rowStyle\"] || {};\n  };\n  const sortTable = ({sortBy, sortDirection}) => {\n    const tmpData = [...allData.current];\n    const sortType = table.headers.filter( h => h[\"plaintext\"] === sortBy)[0][\"type\"];\n    if(sortType === \"number\" || sortType === \"size\"){\n      tmpData.sort((a, b) => (parseInt(a[sortBy][\"plaintext\"]) > parseInt(b[sortBy][\"plaintext\"]) ? 1 : -1));\n    }else if(sortType === \"date\"){\n      tmpData.sort((a,b) => ( (new Date(a[sortBy][\"plaintext\"])) > (new Date(b[sortBy][\"plaintext\"])) ? 1: -1));\n    }else{\n      tmpData.sort( (a, b) => {\n        if(a[sortBy][\"plaintext\"] === undefined){\n          return -1;\n        }else if(b[sortBy][\"plaintext\"] === undefined){\n          return 1;\n        }\n        return a[sortBy][\"plaintext\"].toLowerCase() > b[sortBy][\"plaintext\"].toLowerCase() ? 1 : -1\n      });\n    }\n    if(sortDirection === \"DESC\"){\n      tmpData.reverse();\n    }\n    allData.current = [...tmpData];\n    setSortBy(sortBy);\n    setSortDirection(sortDirection);\n\n  };\n  const rowGetter = ({index}) => {\n    return allData.current[index];\n  };\n  const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const prevWidths = {...headerWidths};\n    const percentDelta = deltaX / widthRef.current.offsetWidth;\n    let nextHeader = \"\";\n    for(let i = 0; i < table.headers.length; i++){\n      //console.log(\"testing\", table.headers[i][\"plaintext\"], dataKey);\n      if(table.headers[i][\"plaintext\"] === dataKey){\n        if(i+1 < table.headers.length){\n          nextHeader = table.headers[i+1][\"plaintext\"];\n        }\n      }\n    }\n    if(nextHeader === \"\"){\n      console.log(\"next header not found\");\n      return;\n    }\n    const updatedWidths = {...prevWidths, \n      [dataKey]: prevWidths[dataKey] + percentDelta,\n      [nextHeader]: prevWidths[nextHeader] - percentDelta\n    };\n    setHeaderWidths(updatedWidths);\n  }, [headerWidths]);\n  const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n    return (\n      <React.Fragment key={\"header\" + dataKey}>\n        <span style={{display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n          {label}\n          {sortBy === label ? (\n            sortDirection === \"ASC\" ? (\n              <ArrowDownwardIcon />\n            ) : (\n              <ArrowUpwardIcon />\n            )\n          ) :(null) }\n        </span>\n        <Draggable\n          axis=\"x\"\n          defaultClassName=\"DragHandle\"\n          defaultClassNameDragging=\"DragHandleActive\"\n          onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n          position={{x:0}}\n          zIndex={999}\n          >\n            <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n        </Draggable>        \n      </React.Fragment>\n    )\n  }, [resizeRow]);\n\n  useEffect( () => {\n    const unSpecifiedWidths = table.headers.reduce( (prev, cur) => {\n      if(cur.width){\n        return prev;\n      }else{\n        return prev + 1;\n      }\n    }, 0);\n    const totalSpecifedWidths = table.headers.reduce( (prev, cur) => {\n      if(cur.width){\n        return prev + cur.width;\n      }else{\n        return prev;\n      }\n    }, 0);\n    const remainingWidths = 100 - totalSpecifedWidths;\n\n    const headerWidthData = table.headers.reduce( (prev, cur) => {\n      return {...prev, [cur[\"plaintext\"]]: ( cur.width ? (cur.width/100) : (remainingWidths / unSpecifiedWidths / 100)  )};\n    }, {});\n    setHeaderWidths({...headerWidthData});\n  }, [table.headers])\n  useEffect( () => {\n    allData.current = [...table.rows];\n  }, [table.rows])\n  useEffect( () => {\n      const headerData = table.headers.map( (header) => {\n        return {\n          dataKey: header[\"plaintext\"],\n          label: header[\"plaintext\"],\n          width: headerWidths[header[\"plaintext\"]] * widthRef.current.offsetWidth,\n          columnData: {format: header[\"type\"] === undefined ? \"string\" : header[\"type\"], callback_id: callback_id},\n          cellRenderer: CellRenderer,\n          headerRenderer: headerRenderer\n        }\n      });\n      setAllHeaders(headerData);\n      if(headerData.length > 0){\n        setSortBy(headerData[0][\"dataKey\"]);\n      }\n  }, [table.headers, headerWidths, widthRef.current]);\n\n  return (\n      <React.Fragment>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  {table.title}\n              </Typography>\n          </Paper>\n          <div style={{height: \"calc(45vh)\", width: \"100%\"}} ref={widthRef}>\n            <AutoSizer>\n              {({height, width}) => (\n                <Table\n                  height={height}\n                  width={width}\n                  headerHeight={25}\n                  noRowsRenderer={noRowsRender}\n                  rowCount={allData.current.length}\n                  rowGetter={ rowGetter }\n                  rowHeight={35}\n                  rowStyle={rowStyle}\n                  sort={sortTable}\n                  sortBy={sortBy}\n                  sortDirection={sortDirection}\n                  >\n                    {allHeaders.map( (col) => (\n                      <Column key={\"col\" + col.dataKey} {...col} />\n                    ))}\n                  </Table>\n              )}\n            </AutoSizer>\n            \n          </div>\n      </React.Fragment>\n    \n  )   \n}","import React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplayDownload = (props) =>{\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <pre style={{display: \"inline-block\"}}>\n        {props.download?.plaintext || \"\"}\n      </pre>\n      \n      <Tooltip title={props?.dowload?.hoverText || \"Download payload\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Button variant={props.download?.variant || \"contained\"} component=\"a\" target=\"_blank\" color=\"primary\" href={\"/api/v1.4/files/download/\" + props.download.agent_file_id} download\n          startIcon={<GetAppIcon />}>\n            {props.download?.name || \"\"}\n        </Button>\n      </Tooltip><br/>\n    </React.Fragment>\n  )   \n}","import React from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {  Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplaySearch = (props) =>{\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\"}}>\n        {props.search?.plaintext || \"\"}\n      </pre>\n      \n      <Tooltip title={props.search?.hoverText || \"View on Search Page\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Link component=\"a\" target=\"_blank\" href={window.location.origin + \"/new/search/?\" + props.search.search}>\n            {props.search?.name || \"\"}\n        </Link>\n      </Tooltip><br/>\n    </React.Fragment>\n  )   \n}","import React, {useEffect} from 'react';\nimport {useSubscription, gql, useLazyQuery } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {ResponseDisplayScreenshot} from './ResponseDisplayScreenshot';\nimport {ResponseDisplayPlaintext} from './ResponseDisplayPlaintext';\nimport {ResponseDisplayTable} from './ResponseDisplayTable';\nimport {ResponseDisplayDownload} from './ResponseDisplayDownload';\nimport {ResponseDisplaySearch} from './ResponseDisplaySearch';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { IconButton } from '@material-ui/core';\n\n\nconst subResponsesQuery = gql`\nsubscription subResponsesQuery($task_id: Int!, $fetchLimit: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, limit: $fetchLimit, order_by: {id: desc}) {\n    id\n    response: response_text\n  }\n}`;\nconst getResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $fetchLimit: Int!, $offset: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}, limit: $fetchLimit, offset: $offset, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst taskScript = gql`\nquery getBrowserScriptsQuery($command_id: Int!, $operator_id: Int!, $operation_id: Int!){\n  browserscript(where: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}, operator_id: {_eq: $operator_id}}) {\n    script\n    id\n  }\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}}}) {\n    browserscript {\n      script\n      id\n    }\n  }\n}\n\n`;\n\nexport const ResponseDisplay = (props) =>{\n    const theme = useTheme();\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [output, setOutput] = React.useState(\"\");\n    const [rawResponses, setRawResponses] = React.useState([]);\n    const [browserScriptData, setBrowserScriptData] = React.useState({});\n    const script = React.useRef();\n    const me = useReactiveVar(meState);\n    const [highestFetched, setHighestFetched] = React.useState(0);\n    const [totalFetched, setTotalFetched] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    useSubscription(subResponsesQuery, {variables: {task_id: props.task.id, fetchLimit: props.fetchLimit}, fetchPolicy: \"network_only\",\n    onSubscriptionData: ({subscriptionData}) => {\n      if(totalFetched === 0 && subscriptionData.data.response.length === props.fetchLimit){\n        fetchMoreResponses({variables: {task_id: props.task.id, fetchLimit: props.fetchLimit, offset: 0, search: \"%_%\"}});\n        return;\n      }else if(totalFetched >= props.fetchLimit){\n        // we won't display it\n        console.log(\"got more than we can see currently\");\n        return;\n      }else \n      // we still have some room to view more, but only room for fetchLimit - totalFetched \n      if(subscriptionData.data.response.length > 0){\n        const newerResponses = subscriptionData.data.response.filter( r => r.id > highestFetched);\n        newerResponses.sort( (a,b) => a.id > b.id ? 1 : -1);\n        let outputResponses = output;\n        let rawResponseArray = [...rawResponses];\n        let highestFetchedId = highestFetched;\n        let totalFetchedSoFar = totalFetched;\n        for(let i = 0; i < newerResponses.length; i++){\n          if(totalFetchedSoFar < props.fetchLimit){\n            outputResponses += newerResponses[i][\"response\"];\n            rawResponseArray.push(newerResponses[i][\"response\"]);\n            highestFetchedId = newerResponses[i][\"id\"];\n            totalFetchedSoFar += 1;\n          }else{\n            break;\n          }\n        }\n        setOutput(outputResponses);\n        setRawResponses(rawResponseArray);\n        setHighestFetched(highestFetchedId);\n        setTotalFetched(totalFetchedSoFar);\n      }\n    }\n    });\n    const filterOutput = (scriptData) => {\n      let copied = {...scriptData};\n      if(search === \"\"){\n        return scriptData;\n      }\n      if(scriptData[\"plaintext\"] !== undefined){\n        if(!scriptData[\"plaintext\"].includes(search)){\n          copied[\"plaintext\"] = \"\";\n        }\n      }\n      if(scriptData[\"table\"] !== undefined){\n        if(scriptData[\"table\"].length > 0){\n          const tableUpdates = scriptData.table.map( t => {\n            const filteredRows = t.rows.filter( r => {\n              let foundMatch = false;\n              for (const entry of Object.values(r)) {\n                if(entry[\"plaintext\"] !== undefined){\n                  if(String(entry[\"plaintext\"]).includes(search)){foundMatch = true;}\n                }\n                if(entry[\"button\"] !== undefined && entry[\"button\"][\"value\"] !== undefined){\n                  if(JSON.stringify(entry[\"button\"][\"value\"]).includes(search)){foundMatch = true;}\n                }\n              }\n              return foundMatch;\n            });\n            return {...t, rows: filteredRows};\n          });\n          copied[\"table\"] = tableUpdates;\n        }\n      }\n      return copied;\n    }\n    useEffect( () => {\n      if(script.current === undefined){\n        setViewBrowserScript(false);\n      }else{\n        setViewBrowserScript(props.viewBrowserScript);\n        if(props.viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, rawResponses);\n            setBrowserScriptData(filterOutput(res));\n          }catch(error){\n            setViewBrowserScript(false);\n          }\n            \n        }\n      }\n    }, [props.viewBrowserScript]);\n    const [fetchScripts] = useLazyQuery(taskScript, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        if(data.browserscriptoperation.length > 0){\n          try{\n            let unb64script = atob(data.browserscriptoperation[0][\"script\"]);\n            //console.log(unb64script);\n            setViewBrowserScript(true);\n          }catch(error){\n            snackActions.error(error.toString());\n            setViewBrowserScript(false);\n          }\n          \n        }else if(data.browserscript.length > 0){\n          \n          try{\n            let unb64script = atob(data.browserscript[0][\"script\"]);\n            let fun = Function('\"use strict\";return(' + unb64script + ')')();\n            script.current = fun;\n            setViewBrowserScript(true);\n            let res = script.current(props.task, rawResponses);\n            setBrowserScriptData(filterOutput(res));\n          }catch(error){\n            snackActions.error(error.toString());\n            setViewBrowserScript(false);\n          }\n        }else{\n          setViewBrowserScript(false);\n        }\n      },\n      onError: (data) => {\n        console.log(data);\n      }\n    });\n    const [fetchMoreResponses] = useLazyQuery(getResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + cur.response;\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched);\n        setHighestFetched(maxID);\n        setOutput(responses);\n        const responseArray = data.response.map( r => r.response);\n        setRawResponses(responseArray);\n        if(viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, responseArray);\n            setBrowserScriptData(filterOutput(res));\n          }catch(error){\n            console.log(error);\n            setViewBrowserScript(false);\n          }\n          \n        }\n        setTotalFetched(data.response.length);\n        if(props.searchText !== \"\" || selectAllOutput){\n          setSelectAllOutput(false);\n          props.changeTotalCount(data.response_aggregate.aggregate.count);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch more responses: \" + data)\n      }\n    })\n    const [fetchAllResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + cur.response;\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched);\n        setHighestFetched(maxID);\n        setOutput(responses);\n        const responseArray = data.response.map( r => r.response);\n        setRawResponses(responseArray);\n        if(viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, responseArray);\n            setBrowserScriptData(filterOutput(res));  \n          }\n          catch(error){\n            setViewBrowserScript(false);\n            console.log(error);\n          }\n        }\n        setTotalFetched(data.response.length);\n        props.changeTotalCount(0);\n      },\n      onError: (data) => {\n\n      }\n    })\n    useEffect( () => {\n      if(props.command_id !== undefined){\n        fetchScripts({variables: {command_id: props.command_id, operator_id: me.user.user_id, operation_id: me.user.current_operation_id}});\n      }\n    }, [props.command_id]);\n    useEffect( () => {\n      if(script.current !== undefined){\n        try{\n          let res = script.current(props.task, rawResponses);\n          setBrowserScriptData(filterOutput(res));\n        }catch(error){\n          setViewBrowserScript(false);\n          console.log(error);\n        }\n        \n      }\n    }, [rawResponses]);\n    useEffect( () => {\n      if(props.searchText === undefined || props.searchText === \"\"){\n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: props.fetchLimit * (props.currentPage - 1),\n          search: \"%_%\"\n        }})\n      }else{  \n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: props.fetchLimit * (props.currentPage - 1),\n          search: \"%\" +  props.searchText + \"%\"\n        }})\n      }\n      \n    }, [props.currentPage]);\n    useEffect( () => {\n      if(props.searchText === undefined || props.searchText === \"\"){\n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: 0,\n          search: \"%_%\"\n        }})\n      }else{  \n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: 0,\n          search: \"%\" + props.searchText + \"%\"\n        }})\n      }\n    }, [props.searchText]);\n    useEffect( () => {\n      if(props.selectAllOutput){\n        setSelectAllOutput(true);\n        fetchAllResponses({variables: {task_id: props.task.id, search: \"%\" + props.searchText + \"%\"}})\n      }else{\n        setHighestFetched(0);\n        setTotalFetched(0);\n        fetchMoreResponses({variables: {task_id: props.task.id, fetchLimit: props.fetchLimit, offset: 0, search: \"%\" + props.searchText + \"%\"}})\n      }\n    }, [props.selectAllOutput]);\n    const onSubmitSearch = React.useCallback( () => {\n      props.onSubmitSearch(search)\n    }, [search]);\n\n  return (\n    <React.Fragment>\n      {props.searchOutput &&\n        <MythicTextField value={search} autoFocus onEnter={onSubmitSearch} onChange={(n,v,e) => setSearch(v)} placeholder=\"Search Output of This Task\" name=\"Search...\"\n          InputProps={{\n            endAdornment: \n            <React.Fragment>\n                <Tooltip title=\"Search\">\n                    <IconButton onClick={onSubmitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                </Tooltip>\n            </React.Fragment>,\n            style: {padding: 0}\n        }}\n        ></MythicTextField>\n      }\n      <div style={{overflow: \"auto\", maxWidth: \"100%\", width: \"100%\"}}>\n        {viewBrowserScript && browserScriptData ? (\n          <React.Fragment>\n              {browserScriptData?.screenshot?.map( (scr, index) => (\n                  <ResponseDisplayScreenshot key={\"screenshot\" + index + 'fortask' + props.task.id} {...scr} />\n                )) || null\n              }\n              {browserScriptData?.plaintext &&\n                <ResponseDisplayPlaintext plaintext={browserScriptData[\"plaintext\"]} />\n              }\n              {browserScriptData?.table?.map( (table, index) => (\n                  <ResponseDisplayTable callback_id={props.task.callback_id} table={table} key={\"tablefortask\" + props.task.id + \"table\" + index} />\n                )) || null\n              }\n              {browserScriptData?.download?.map( (dl, index) => (\n                  <ResponseDisplayDownload download={dl} key={\"download\" + index + \"fortask\" + props.task.id} />\n                )) || null\n              }\n              {browserScriptData?.search?.map( (s, index) => (\n                  <ResponseDisplaySearch search={s} key={\"searchlink\" + index + \"fortask\" + props.task.id} />\n              )) || null\n              }\n          </React.Fragment>\n        ) : (\n          <ResponseDisplayPlaintext plaintext={output} />\n        )}\n      </div>\n  </React.Fragment>\n  )\n      \n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($task_id: Int!, $comment: String) {\n  update_task_by_pk(pk_columns: {id: $task_id}, _set: {comment: $comment}) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\n\nexport function TaskCommentDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getCommentQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(data.task_by_pk.comment)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateComment({variables: {task_id: props.task_id, comment: comment}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Comment</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useReactiveVar, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { meState } from '../../../cache';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport NoteAddIcon from '@material-ui/icons/NoteAdd';\nimport { IconButton } from '@material-ui/core';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst addTaskTagMutation = gql`\nmutation addTaskTag ($task_id: Int!, $tag: String!) {\n  insert_tasktag_one(object: {task_id: $task_id, tag: $tag}){\n    id\n  }\n}\n`;\nconst removeTaskTagMutation = gql`\nmutation removeTaskTag($tasktag_id: Int!){\n  delete_tasktag_by_pk(id: $tasktag_id){\n    id\n  }\n}\n`;\nconst getTaskTagsQuery = gql`\nquery getTaskTags ($operation_id: Int!) {\n  tasktag(where: {operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    task_id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\n  \nexport function TaskTagDialog(props) {\n    const [newTag, setNewTag] = useState(\"\");\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getTaskTagsQuery, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n          const currentTags = data.tasktag.reduce( (prev, cur) => {\n            if(cur.task_id === props.task_id){\n              return [...prev, cur];\n            }else{\n              return [...prev];\n            }\n          }, []);\n          const allTags = data.tasktag.reduce( (prev, cur) => {\n            if(prev.find( element => element.tag === cur.tag) || currentTags.find( element => element.tag === cur.tag)){\n              return [...prev];\n            }else{\n              return [...prev, cur];\n            }\n          }, []);\n          \n          setLeft(allTags);\n          setRight(currentTags);\n          setOriginalTags([...currentTags]);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [addTaskTag] = useMutation(addTaskTagMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [removeTaskTag] = useMutation(removeTaskTagMutation, {\n      update: (cache, {data}) => {\n          //console.log(data);\n      }\n  });\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [originalTags, setOriginalTags] = React.useState([]);\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n\n    const handleToggle = (value) => () => {\n      const currentIndex = checked.indexOf(value);\n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((value) => {\n              const labelId = `transfer-list-item-${value.id}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value.id} role=\"listitem\" button onClick={handleToggle(value)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={checked.indexOf(value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value.tag} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onChange = (name, value, error) => {\n        setNewTag(value);\n    }\n    const addNewTag = () => {\n      if(!right.find(element => element.tag === newTag) && !left.find(element => element.tag === newTag)){\n        if(newTag !== \"\"){\n          setRight([...right, {tag: newTag, id: 0, task_id: 0}]);\n        }\n      }\n      setNewTag(\"\");\n    }\n    const setFinalTags = () => {\n\n      originalTags.forEach( (tag) => {\n        // go through the original tags and see if they exist in the right, if so, move on\n        // if the tag doesn't exist, we delete it\n        if(!right.find(element => element.id === tag.id)){\n          removeTaskTag({variables: {tasktag_id: tag.id}});\n        }\n      });\n      right.forEach( (tag) => {\n        // go through the right tags and see if they existed in the original, if so, move on\n        // if the tag doesn't exist, we add it\n        if(!originalTags.find(element => element.id === tag.id)){\n          addTaskTag({variables: {task_id: props.task_id, tag: tag.tag}});\n        }\n      });\n      if(newTag !== \"\"){\n        addTaskTag({variables: {task_id: props.task_id, tag: newTag}});\n      }\n      snackActions.success(\"Updated tags\");\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Tags</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(\"Unused Tags In Operation\", left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                \n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                \n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(\"Applied Tags To Task\", right)}</Grid>\n        </Grid>\n        <MythicTextField autoFocus multiline={false} name=\"Add New Tag...\" onChange={onChange} value={newTag} style={{display:\"inline-block\"}} \n          InputProps={{\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton style={{color: muiTheme.palette.success.main}} variant=\"contained\" onClick={addNewTag}><NoteAddIcon/></IconButton>\n                    </React.Fragment>\n                }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { useSnackbar } from 'notistack';\n\nconst updateOpsecRequestMutation = gql`\nmutation requestOpsecBypass ($task_id: Int!) {\n    requestOpsecBypass(task_id: $task_id){\n        status\n        error\n    }\n}\n`;\nconst getOpsecQuery = gql`\nquery getOPSECQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    opsec_pre_blocked\n    opsec_pre_message\n    opsec_pre_bypassed\n    opsec_pre_bypass_user{\n        username\n        id\n    }\n    opsec_post_blocked\n    opsec_pre_bypass_role\n    opsec_post_message\n    opsec_post_bypassed\n    opsec_post_bypass_role\n    opsec_post_bypass_user{\n        username\n        id\n    }\n    id\n  }\n}\n`;\n\nexport function TaskOpsecDialog(props) {\n    const [opsecMessage, setOpsecMessage] = useState(\"\");\n    const [opsecData, setOpsecData] = useState({});\n    const { enqueueSnackbar } = useSnackbar();\n    const { loading, error } = useQuery(getOpsecQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let message = \"OPSEC PreCheck Message\";\n            console.log(data);\n            if(data.task_by_pk.opsec_pre_bypass_user !== null){\n                message += \" (bypassed by \" + data.task_by_pk.opsec_pre_bypass_user.username + \")\";\n            }\n            message += \":\\n\\n\" + data.task_by_pk.opsec_pre_message + \"\\n\";\n            if(data.task_by_pk.opsec_post_blocked){\n                message += \"\\nOPSEC PostCheck Message\";\n                if(data.task_by_pk.opsec_post_bypass_user !== null){\n                    message += \" (bypassed by \" + data.task_by_pk.opsec_post_bypass_user.username + \")\";\n                }\n                message += \":\\n\\n\" + data.task_by_pk.opsec_post_message + \"\\n\";\n                \n            }\n            setOpsecData(data.task_by_pk);\n            setOpsecMessage(message);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateOpsecRequest] = useMutation(updateOpsecRequestMutation, {\n        update: (cache, {data}) => {\n            if(data.requestOpsecBypass.status === \"success\"){\n                enqueueSnackbar(\"Bypass processed successfully\", {variant: \"success\"});\n            }else{\n                enqueueSnackbar(data.requestOpsecBypass.error, {variant: \"warning\"});\n            }\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onRequestSubmit = () => {\n       console.log(props.task_id);\n        updateOpsecRequest({variables: {task_id: props.task_id}});\n        props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Request OPSEC Bypass</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={opsecMessage} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          {(opsecData.opsec_pre_blocked === true && !opsecData.opsec_pre_bypassed) || (opsecData.opsec_post_blocked === true && !opsecData.opsec_post_bypassed) ?\n          (\n            <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Submit Bypass Request</Button>\n          ) : (null) }\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    display_params\n    original_params\n    params\n    tasking_location\n    parameter_group_name\n    id\n  }\n}\n`;\n\nexport function TaskViewParametersDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let workingComment = \"Original Parameters:\\n\" + data.task_by_pk.original_params;\n            workingComment += \"\\n\\nAgent Parameters:\\n\" + data.task_by_pk.params;\n            workingComment += \"\\n\\nDisplay Parameters:\\n\" + data.task_by_pk.display_params;\n            workingComment += \"\\n\\nTasking Location:\\n\" + data.task_by_pk.tasking_location;\n            workingComment += \"\\n\\nParameter Group:\\n\" + data.task_by_pk.parameter_group_name;\n            setComment(workingComment);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    stdout\n    stderr\n    id\n  }\n}\n`;\n\nexport function TaskViewStdoutStderrDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(\"[STDOUT]:\\n\" + data.task_by_pk.stdout + \"\\n\\[STDERR]:\\n\" + data.task_by_pk.stderr);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Typography } from '@material-ui/core';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const allTokenDataFragment = gql`\nfragment allTokenData on token {\n    id\n    Address\n    AppContainer\n    AppContainerNumber\n    AppContainerSid\n    AppId\n    AppModelPolicies\n    AppModelPolicyDictionary\n    AttributesFlags\n    AuditPolicy\n    AuthenticationId_id\n    BnoIsolationPrefix\n    CanSynchronize\n    Capabilities\n    CreationTime\n    DefaultDacl\n    DenyOnlyGroups\n    DeviceClaimAttributes\n    DeviceGroups\n    Elevated\n    ElevationType\n    EnabledGroups\n    ExpirationTime\n    Filtered\n    Flags\n    FullPath\n    GrantedAccess\n    GrantedAccessGeneric\n    GrantedAccessMask\n    GroupCount\n    Groups\n    Handle\n    HandleReferenceCount\n    HasRestrictions\n    ImpersonationLevel\n    Inherit\n    IntegrityLevel\n    IntegrityLevelSid\n    IsClosed\n    IsContainer\n    IsPseudoToken\n    IsRestricted\n    IsSandbox\n    LogonSid\n    LowPrivilegeAppContainer\n    MandatoryPolicy\n    ModifiedId\n    Name\n    NoChildProcess\n    NotLow\n    NtType\n    NtTypeName\n    Origin\n    Owner\n    PackageFullName\n    PackageIdentity\n    PackageName\n    PointerReferenceCount\n    PrimaryGroup\n    PrivateNamespace\n    Privileges\n    ProcessUniqueAttribute\n    ProtectFromClose\n    Restricted\n    RestrictedDeviceClaimAttributes\n    RestrictedDeviceGroups\n    RestrictedSids\n    RestrictedSidsCount\n    RestrictedUserClaimAttributes\n    SandboxInert\n    Sddl\n    SecurityAttributes\n    SecurityDescriptor\n    SessionId\n    Source\n    ThreadID\n    TokenId\n    TokenType\n    TrustLevel\n    UIAccess\n    User\n    UserClaimAttributes\n    VirtualizationAllowed\n    VirtualizationEnabled\n    WriteRestricted\n    task_id\n    logonsession {\n      id\n      LogonId\n      UserName\n      LogonDomain\n      LogonType\n      SessionId\n      Sid\n      LogonTime\n      LogonServer\n      DnsDomainName\n      Upn\n      UserFlags\n      LastSuccessfulLogon\n      LastFailedLogon\n      FailedAttemptCountSinceLastSuccessfulLogon\n      LogonScript\n      ProfilePath\n      HomeDirectory\n      HomeDirectoryDrive\n      LogoffTime\n      KickOffTime\n      PasswordLastSet\n      PasswordCanChange\n      PasswordMustChange\n      task_id\n      authenticationpackages {\n        id\n        Name\n        task_id\n      }\n    }\n}\n`;\nconst getTokenInfo = gql`\n${allTokenDataFragment}\nquery getTokenInfo ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    ...allTokenData\n  }\n}\n`;\n\nexport function TaskTokenDialog(props) {\n    const theme = useTheme();\n    const [tokenData, setTokenData] = useState([]);\n    const [logonsessionData, setLogonSessionData] = useState([]);\n    const [authenticationData, setAuthenticationData] = useState([]);\n    const tokenKeys = [\n        \"Address\",\n        \"AppContainer\",\n        \"AppContainerNumber\",\n        \"AppContainerSid\",\n        \"AppId\",\n        \"AppModelPolicies\",\n        \"AppModelPolicyDictionary\",\n        \"AttributesFlags\",\n        \"AuditPolicy\",\n        \"AuthenticationId_id\",\n        \"BnoIsolationPrefix\",\n        \"CanSynchronize\",\n        \"Capabilities\",\n        \"CreationTime\",\n        \"DefaultDacl\",\n        \"DenyOnlyGroups\",\n        \"DeviceClaimAttributes\",\n        \"DeviceGroups\",\n        \"Elevated\",\n        \"ElevationType\",\n        \"EnabledGroups\",\n        \"ExpirationTime\",\n        \"Filtered\",\n        \"Flags\",\n        \"FullPath\",\n        \"GrantedAccess\",\n        \"GrantedAccessGeneric\",\n        \"GrantedAccessMask\",\n        \"GroupCount\",\n        \"Groups\",\n        \"Handle\",\n        \"HandleReferenceCount\",\n        \"HasRestrictions\",\n        \"ImpersonationLevel\",\n        \"Inherit\",\n        \"IntegrityLevel\",\n        \"IntegrityLevelSid\",\n        \"IsClosed\",\n        \"IsContainer\",\n        \"IsPseudoToken\",\n        \"IsRestricted\",\n        \"IsSandbox\",\n        \"LogonSid\",\n        \"LowPrivilegeAppContainer\",\n        \"MandatoryPolicy\",\n        \"ModifiedId\",\n        \"Name\",\n        \"NoChildProcess\",\n        \"NotLow\",\n        \"NtType\",\n        \"NtTypeName\",\n        \"Origin\",\n        \"Owner\",\n        \"PackageFullName\",\n        \"PackageIdentity\",\n        \"PackageName\",\n        \"PointerReferenceCount\",\n        \"PrimaryGroup\",\n        \"PrivateNamespace\",\n        \"Privileges\",\n        \"ProcessUniqueAttribute\",\n        \"ProtectFromClose\",\n        \"Restricted\",\n        \"RestrictedDeviceClaimAttributes\",\n        \"RestrictedDeviceGroups\",\n        \"RestrictedSids\",\n        \"RestrictedSidsCount\",\n        \"RestrictedUserClaimAttributes\",\n        \"SandboxInert\",\n        \"Sddl\",\n        \"SecurityAttributes\",\n        \"SecurityDescriptor\",\n        \"SessionId\",\n        \"Source\",\n        \"ThreadID\",\n        \"TokenId\",\n        \"TokenType\",\n        \"TrustLevel\",\n        \"UIAccess\",\n        \"User\",\n        \"UserClaimAttributes\",\n        \"VirtualizationAllowed\",\n        \"VirtualizationEnabled\",\n        \"WriteRestricted\",\n        \"task_id\"\n    ]\n    const logonsessionKeys = [\n      \"LogonId\",\n      \"UserName\",\n      \"LogonDomain\",\n      \"LogonType\",\n      \"SessionId\",\n      \"Sid\",\n      \"LogonTime\",\n      \"LogonServer\",\n      \"DnsDomainName\",\n      \"Upn\",\n      \"UserFlags\",\n      \"LastSuccessfulLogon\",\n      \"LastFailedLogon\",\n      \"FailedAttemptCountSinceLastSuccessfulLogon\",\n      \"LogonScript\",\n      \"ProfilePath\",\n      \"HomeDirectory\",\n      \"HomeDirectoryDrive\",\n      \"LogoffTime\",\n      \"KickOffTime\",\n      \"PasswordLastSet\",\n      \"PasswordCanChange\",\n      \"PasswordMustChange\",\n      \"task_id\"\n    ]\n    const authenticationpackageKeys = [\n      \"Name\",\n      \"task_id\"\n    ]\n    useQuery(getTokenInfo, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            if(data.token_by_pk !== null){\n                setTokenData(data.token_by_pk);\n                const reducedTokenData = tokenKeys.reduce( (prev, key) => {\n                  if(data.token_by_pk[key] !== undefined && data.token_by_pk[key] !== null && data.token_by_pk[key] !== \"\"){\n                    return [...prev, {\"name\": key, \"value\": data.token_by_pk[key]}]\n                  }\n                  else{\n                    return [...prev];\n                  }\n                }, []);\n                setTokenData(reducedTokenData);\n                if(data.token_by_pk.logonsession !== null){\n                  const reducedLogonSessionData = logonsessionKeys.reduce( (prev, key) => {\n                    if(data.token_by_pk.logonsession[key] !== undefined && data.token_by_pk.logonsession[key] !== null && data.token_by_pk.logonsession[key] !== \"\"){\n                      return [...prev, {\"name\": key, \"value\": data.token_by_pk.logonsession[key]}]\n                    }\n                    else{\n                      return [...prev];\n                    }\n                  }, []);\n                  setLogonSessionData(reducedLogonSessionData);\n                  if (data.token_by_pk.logonsession.authenticationpackages.length > 0){\n                    const reducedAuthenticationData = data.token_by_pk.logonsession.authenticationpackages.map( (pkg) => {\n                      const packageData = authenticationpackageKeys.reduce( (prev, key) => {\n                        if(pkg[key] !== undefined && pkg[key] !== null && pkg[key] !== \"\"){\n                          return [...prev, {\"name\": key, \"value\": pkg[key]}];\n                        }else{\n                          return [...prev];\n                        }\n                      }, []);\n                      return packageData;\n                    })\n                    \n                    setAuthenticationData(reducedAuthenticationData);\n                  }\n                }\n                \n            }\n        },\n        onError: data => {\n            snackActions.error(data)\n        },\n        fetchPolicy: \"network-only\"\n    });\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Token Information</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Token Data\n              </Typography>\n            </Paper>\n          <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n            <TableContainer component={Paper} className=\"mythicElement\">\n              <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>Token Property</TableCell>\n                            <TableCell>Token Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {tokenData.map( (element, index) => (\n                        <TableRow key={'row' + index}>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                </Table>\n              </TableContainer>\n          </Paper>\n        \n        {logonsessionData.length > 0 &&\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Associated Logon Session Data\n              </Typography>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n              <TableContainer component={Paper} className=\"mythicElement\">\n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                      <TableHead>\n                          <TableRow>\n                              <TableCell>Logon Session Property</TableCell>\n                              <TableCell>Logon Session Value</TableCell>\n                          </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {logonsessionData.map( (element, index) => (\n                          <TableRow key={'logondatarow' + index}>\n                            <TableCell>{element.name}</TableCell>\n                            <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                  </Table>\n                </TableContainer>\n            </Paper>\n          </React.Fragment>\n        }\n        {authenticationData.map( authpkg => (\n            <React.Fragment key={\"authpkg\" + authpkg.id}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Associated Authentication Package\n                </Typography>\n              </Paper>\n              \n              <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n                <TableContainer component={Paper} className=\"mythicElement\">\n                  <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>Authentication Package Property</TableCell>\n                                <TableCell>Authentication Package Value</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {authpkg.map( (element, index) => (\n                            <TableRow key={'authpackage' + authpkg.id + \"row\" + index}>\n                              <TableCell>{element.name}</TableCell>\n                              <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                            </TableRow>\n                          ))}\n                        </TableBody>\n                    </Table>\n                  </TableContainer>\n              </Paper>\n            </React.Fragment>\n        ))\n        }\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport {ResponseDisplay} from './ResponseDisplay';\nimport RateReviewOutlinedIcon from '@material-ui/icons/RateReviewOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskCommentDialog} from './TaskCommentDialog';\nimport {TaskTagDialog} from './TaskTagDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport {TaskOpsecDialog} from './TaskOpsecDialog';\nimport {TaskViewParametersDialog} from './TaskViewParametersDialog';\nimport {TaskViewStdoutStderrDialog} from './TaskViewStdoutStderrDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport LocalOfferOutlinedIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CodeIcon from '@material-ui/icons/Code';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport {TaskTokenDialog} from './TaskTokenDialog';\nimport Grid from '@material-ui/core/Grid';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport {gql, useMutation, useLazyQuery } from '@apollo/client';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBook} from '@fortawesome/free-solid-svg-icons';\nimport { faExternalLinkAlt, faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Backdrop } from '@material-ui/core';\n\nconst ReissueTaskMutationGQL = gql`\nmutation reissueTaskMutation($task_id: Int!){\n  reissue_task(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst ReissueTaskHandlerMutationGQL = gql`\nmutation reissueTaskHandlerMutation($task_id: Int!){\n  reissue_task_handler(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n}`;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    transform: 'translateZ(0px)',\n    flexGrow: 1,\n  },\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n      top: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n    '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n      bottom: theme.spacing(1),\n      left: theme.spacing(2),\n    },\n    zIndex: 3\n  },\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const TaskDisplayContainer = ({task}) => {\n    const theme = useTheme();\n    const [totalCount, setTotalcount] = React.useState(0);\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [openCommentDialog, setOpenCommentDialog] = React.useState(false);\n    const [openTokenDialog, setOpenTokenDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openStdoutStderrDialog, setOpenStdoutStderrDialog] = React.useState(false);\n    const [openOpsecDialog, setOpenOpsecDialog] = React.useState(false);\n    const [openTaskTagDialog, setOpenTaskTagDialog] = React.useState(false);\n    const [commandID, setCommandID] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchOutput, setSearchOutput] = React.useState(false);\n    const [fetchLimit, setFetchLimit] = React.useState(10);\n    const [currentPage, setCurrentPage] = React.useState(1);\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    const classes = useStyles();\n    const [openSpeedDial, setOpenSpeedDial] = React.useState(false);\n    const [downloadResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n          const output = data.response.reduce( (prev, cur) => {\n            return prev + cur.response;\n          }, \"\");\n          const dataBlob = new Blob([output], {type: 'text/plain'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = \"task_\" + task.id + \".txt\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = \"task_\" + task.id + \".txt\";\n            document.body.appendChild(element);\n            element.click();\n          }\n      },\n      onError: (data) => {\n\n      }\n    })\n    const [reissueTask] = useMutation(ReissueTaskMutationGQL, {\n      onCompleted: data => {\n        if(data.reissue_task.status === \"success\"){\n          snackActions.success(\"Successfully re-issued task to Mythic\");\n        }else{\n          snackActions.error(\"Failed to re-issue task to Mythic: \" + data.reissue_task.error);\n        }\n      },  \n      onError: data => {\n        console.log(data);\n        snackActions.error(\"Failed to re-issue task: \" + data);\n      }\n    });\n    const [reissueTaskHandler] = useMutation(ReissueTaskHandlerMutationGQL, {\n      onCompleted: data => {\n        if(data.reissue_task_handler.status === \"success\"){\n          snackActions.success(\"Successfully resubmitted task for handling\");\n        }else{\n          snackActions.warning(\"Failed to resubmit task for handling: \" + data.reissue_task_handler.error);\n        }\n        \n      },\n      onError: data => {\n        console.log(data);\n        snackActions.error(\"Error resubmitting task for handling: \" + data);\n      }\n    });\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(task.original_params);\n        if(result){\n          snackActions.success(\"Copied text!\");\n        }else{\n          snackActions.error(\"Failed to copy text\");\n        }\n        setOpenSpeedDial(false);\n    }\n    const onReissueTask = () => {\n      reissueTask({variables: {task_id: task.id}});\n    }\n    const onReissueTaskHandler = () => {\n      reissueTaskHandler({variables: {task_id: task.id}});\n    }\n    useEffect( () => {\n        setCommandID(task.command === null ? 0 : task.command.id);\n        if(task.responses_aggregate !== undefined){\n          setTotalcount(task.responses_aggregate.aggregate.count);  \n        }\n    }, [task.command, task.responses_aggregate]);\n    const onSubmitSearch = ( value) => {\n      setSearch(value);\n      if(value === \"\"){\n        if(task.responses_aggregate !== undefined){\n          setTotalcount(task.responses_aggregate.aggregate.count);  \n        }else{\n          setTotalcount(0);\n        }\n      }\n      setCurrentPage(1);\n    }\n    const onChangePage = (event, value) => {\n      setCurrentPage(value);\n    }\n    const changeTotalCount = React.useCallback( (newTotal) => {\n      setTotalcount(newTotal);\n      setCurrentPage(1);\n    }, []);\n    const onDownloadResponses = () => {\n      downloadResponses({variables: {task_id: task.id}});\n      setOpenSpeedDial(false);\n    }\n    const tooltipPlacement = \"top\"\n    return (\n      <React.Fragment>\n        <Grid container spacing={0} style={{maxWidth: \"100%\"}}>\n          <Backdrop open={openSpeedDial} onClick={()=>{setOpenSpeedDial(false);}} style={{zIndex: 2, position: \"absolute\"}}/>\n              {openTokenDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTokenDialog} \n                  onClose={()=>{setOpenTokenDialog(false);}} \n                  innerDialog={<TaskTokenDialog token_id={task.token === undefined ? 0 : task.token.id} onClose={()=>{setOpenTokenDialog(false);}} />}\n              />) : (null)\n              }\n              {openOpsecDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openOpsecDialog} \n                  onClose={()=>{setOpenOpsecDialog(false);}} \n                  innerDialog={<TaskOpsecDialog task_id={task.id} onClose={()=>{setOpenOpsecDialog(false);}} />}\n              />) : (null)\n              }\n              {openParametersDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                  onClose={()=>{setOpenParametersDialog(false);}} \n                  innerDialog={<TaskViewParametersDialog task_id={task.id} onClose={()=>{setOpenParametersDialog(false);}} />}\n              />) : (null)\n              }\n              {openStdoutStderrDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openStdoutStderrDialog} \n                  onClose={()=>{setOpenStdoutStderrDialog(false);}} \n                  innerDialog={<TaskViewStdoutStderrDialog task_id={task.id} onClose={()=>{setOpenStdoutStderrDialog(false);}} />}\n              />) : (null)\n              }\n              {openTaskTagDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTaskTagDialog} \n                  onClose={()=>{setOpenTaskTagDialog(false);}} \n                  innerDialog={<TaskTagDialog task_id={task.id} onClose={()=>{setOpenTaskTagDialog(false);}} />}\n              />) : (null)\n              }\n              {openCommentDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openCommentDialog} \n                  onClose={()=>{setOpenCommentDialog(false);}} \n                  innerDialog={<TaskCommentDialog task_id={task.id} onClose={()=>{setOpenCommentDialog(false);}} />}\n              />) : (null)\n              }\n            <Grid item xs={12}>\n              <ResponseDisplay task={task} command_id={commandID} viewBrowserScript={viewBrowserScript} onSubmitSearch={onSubmitSearch}\n                searchOutput={searchOutput}\n                fetchLimit={fetchLimit} currentPage={currentPage} searchText={search} changeTotalCount={changeTotalCount} selectAllOutput={selectAllOutput}/>\n            </Grid>\n            <Grid item xs={12} >\n            <SpeedDial\n                ariaLabel=\"Task Speeddial\"\n                className={classes.speedDial}\n                icon={<SpeedDialIcon />}\n                onClick={()=>{setOpenSpeedDial(!openSpeedDial)}}\n                FabProps={{ color: \"primary\", size: \"small\" }}\n                open={openSpeedDial}\n                direction=\"right\"\n              >\n                  <SpeedDialAction\n                    icon={<CodeIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Toggle BrowserScript\"}\n                    onClick={() => {setViewBrowserScript(!viewBrowserScript);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<FontAwesomeIcon icon={faExpandArrowsAlt} size=\"lg\" />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View All Output\"}\n                    onClick={() => {setSelectAllOutput(!selectAllOutput);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<SearchIcon />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Search Output\"}\n                    onClick={() => {setSearchOutput(!searchOutput);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<GetAppIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Download output\"}\n                    onClick={onDownloadResponses}\n                  />\n                  <SpeedDialAction\n                    icon={<LocalOfferOutlinedIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Edit Tags\"}\n                    onClick={()=>{setOpenTaskTagDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<FontAwesomeIcon icon={faExternalLinkAlt} size=\"lg\" />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Open Task in New Window\"}\n                    onClick={()=> {window.open('/new/task/' + task.id, \"_blank\")}}\n                  />\n                  <SpeedDialAction\n                    icon={<FileCopyOutlinedIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Copy original params to clipboard\"}\n                    onClick={copyToClipboard}\n                  />\n                  <SpeedDialAction\n                    icon={<RateReviewOutlinedIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Edit Comment\"}\n                    onClick={()=>{setOpenCommentDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<KeyboardIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View All Parameters\"}\n                    onClick={()=>{setOpenParametersDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<FontAwesomeIcon icon={faBook} size=\"lg\" />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View Stdout/Stderr of Task\"}\n                    onClick={()=>{setOpenStdoutStderrDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  {task.opsec_pre_blocked === null ? (\n                    null\n                  ) : (  task.opsec_pre_bypassed === false ? (\n                          <SpeedDialAction\n                            icon={<LockIcon style={{color: theme.palette.error.main}}/>}\n                            arrow\n                            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                            tooltipPlacement={tooltipPlacement}\n                            tooltipTitle={\"Submit OPSEC PreCheck Bypass Request\"}\n                            onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                          />\n                          ): (\n                            <SpeedDialAction\n                            icon={<LockOpenIcon style={{color: theme.palette.success.main}}/>}\n                            arrow\n                            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                            tooltipPlacement={tooltipPlacement}\n                            tooltipTitle={\"View OPSEC PreCheck Data\"}\n                            onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                          />\n                          )             \n                    ) \n                  }\n                  {task.opsec_post_blocked === null ? (\n                    null\n                  ) : (  task.opsec_post_bypassed === false ? (\n                          <SpeedDialAction\n                            icon={<LockIcon style={{color: theme.palette.error.main}}/>}\n                            arrow\n                            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                            tooltipPlacement={tooltipPlacement}\n                            tooltipTitle={\"Submit OPSEC PostCheck Bypass Request\"}\n                            onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                          />\n                          ): (\n                            <SpeedDialAction\n                              icon={<LockOpenIcon style={{color: theme.palette.success.main}}/>}\n                              arrow\n                              TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                              tooltipPlacement={tooltipPlacement}\n                              tooltipTitle={\"View OPSEC PostCheck Data\"}\n                              onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                            />\n                          )             \n                    ) \n                  }\n                  {task.token === null ? (\n                    null\n                  ) : (\n                      <SpeedDialAction\n                        icon={<ConfirmationNumberIcon />}\n                        arrow\n                        TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                        tooltipPlacement={tooltipPlacement}\n                        tooltipTitle={\"View Token Information\"}\n                        onClick={()=>{setOpenTokenDialog(true);setOpenSpeedDial(false);}}\n                      />\n                  )}\n                  {task.status.toLowerCase().includes(\"error: container\") ? (\n                    <SpeedDialAction\n                      icon={<ReplayIcon style={{color: theme.palette.warning.main}}/>}\n                      arrow\n                      TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                      tooltipPlacement={tooltipPlacement}\n                      tooltipTitle={\"Resubmit Tasking\"}\n                      onClick={onReissueTask}\n                    />\n                  ) : (null)}\n                  {task.status.toLowerCase().includes(\"error: task\") ? (\n                    <SpeedDialAction\n                      icon={<ReplayIcon style={{color: theme.palette.warning.main}}/>}\n                      arrow\n                      TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                      tooltipPlacement={tooltipPlacement}\n                      tooltipTitle={\"Resubmit Task Handler\"}\n                      onClick={onReissueTaskHandler}\n                    />\n                  ):(null)}\n                  \n              </SpeedDial>\n              <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingBottom: \"10px\"}} >\n                \n                  <React.Fragment>\n                    <Pagination count={Math.ceil(totalCount / fetchLimit)} page={currentPage} variant=\"outlined\" color=\"primary\" boundaryCount={2} onChange={onChangePage} style={{margin: \"10px\"}}/>\n                    <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n                  </React.Fragment>\n                \n                  \n              </div>\n            </Grid>\n        </Grid>\n        \n      </React.Fragment>\n\t\t\t\t          \n    )\n}","import React, {useEffect, useLayoutEffect, useRef} from 'react';\nimport {IconButton} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles, fade, withStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChatOutlinedIcon from '@material-ui/icons/ChatOutlined';\nimport Badge from '@material-ui/core/Badge';\nimport {useTheme} from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {TaskDisplayContainer} from './TaskDisplayContainer';\n\nexport const taskDisplayFragment = gql`\nfragment taskData on task {\n  comment\n  callback_id\n  commentOperator{\n      username\n  }\n  completed\n  id\n  operator{\n      username\n  }\n  original_params\n  display_params\n  status\n  timestamp\n  command {\n    cmd\n    id\n  }\n  command_name\n  responses_aggregate {\n    aggregate{\n      count\n      max {\n        timestamp\n      }\n    }\n  }\n  opsec_pre_blocked\n  opsec_pre_bypassed\n  opsec_post_blocked\n  opsec_post_bypassed\n  tasks {\n      id\n  }\n  token {\n    id\n  }\n}\n`;\nconst getSubTaskingQuery = gql`\n${taskDisplayFragment}\nquery getSubTasking($task_id: Int!){\n    task(where: {parent_task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n        ...taskData\n  }\n}\n `;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"3px\",\n    marginLeft: \"3px\",\n    marginRight: \"0px\",\n    height: \"auto\",\n    width: \"99%\",\n    \n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    display: \"inline\",\n    cursor: \"default\"\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    overflow: \"auto\", \n    display: \"block\", \n    textOverflow: \"ellipsis\", \n    wordBreak: \"break-all\",\n    maxWidth: \"100%\", \n  },\n  taskAndTimeDisplay: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n    overflow: \"hidden\", \n    textOverflow: \"ellipsis\", \n    maxWidth: \"100%\", \n    width: \"100%\",\n    whiteSpace: \"nowrap\",\n    display: \"inline-block\"\n  },\n  secondaryHeadingExpanded: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    display: \"block\", \n    overflow: \"auto\",\n    maxWidth: \"100%\", \n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  icon: {\n    verticalAlign: 'middle',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n    marginRight: 0\n  },\n  column: {\n    padding: \"0 5px 0 0\",\n    display: \"inline-block\",\n    margin: 0,\n    height: \"auto\"\n  },\n}));\nconst accordionUseStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: 0,\n    height: \"auto\",\n    width: \"100%\",\n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  content: {\n    margin: 0,\n    height: \"100%\",\n    padding: 0,\n  },\n  expandIcon: {\n    margin: 0,\n  },\n  expanded: {\n    marginRight: 0\n  }\n}));\nfunction MinusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z\" />\n    </SvgIcon>\n  );\n}\nfunction PlusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z\" />\n    </SvgIcon>\n  );\n}\n\nconst StyledTreeItem = withStyles((theme) => ({\n  root: {\n    marginRight: 0,\n    paddingRight: 0,\n    width: \"100%\",\n    '&:hover': {\n      backgroundColor: \"none\"\n    }\n  },\n  iconContainer: {\n    '& .close': {\n      opacity: 0.3,\n    },\n  },\n  group: {\n    marginLeft: 7,\n    paddingLeft: 18,\n    borderLeft: `1px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n  },\n}))((props) => <TreeItem {...props}  />); \n\nfunction TaskDisplayPreMemo({task, filterOptions}){\n    \n    const classes = useStyles();\n    const [nodesSelected, setNodesSelected] = React.useState([]);\n\n    const toggleTaskTree = React.useCallback((task_id, selected) => {\n    \tif(selected){\n    \t\t// we want to add our treenode to the list if it's not there already\n    \t\tif(nodesSelected.includes(\"treenode:\" + task_id)){\n    \t\t\treturn;\n    \t\t}\n    \t\tsetNodesSelected([...nodesSelected, \"treenode:\" + task_id]);\n    \t}else{\n    \t\t// we want to remove our treenode from the list if it's there\n    \t\tconst newSelection = nodesSelected.reduce( (prev, cur) => {\n\t\t\t\tif(cur === \"treenode:\" + task_id){\n\t\t\t\t\treturn [...prev];\n\t\t\t\t}\n\t\t\t\treturn [...prev, cur];\n    \t\t}, [])\n    \t\tsetNodesSelected(newSelection);\n    \t}\n    }, [nodesSelected]);\n  return (\n  \t<TreeView className={classes.root}\n  \t\texpanded={nodesSelected}\n    >\n      <TaskRow task={task} filterOptions={filterOptions} nodesSelected={nodesSelected} toggleSelection={toggleTaskTree} />\n    </TreeView>\n  );\n};\nexport const TaskDisplay = React.memo(TaskDisplayPreMemo);\n\nconst TaskStatusDisplay = ({task, theme}) => {\n  if(task.status.toLowerCase().includes(\"error\")){\n    return (<Typography size=\"small\" component=\"span\" style={{padding: \"0\", color: theme.palette.error.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.status === \"cleared\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>cleared</Typography>)\n  }else if(task.completed){\n    return (null)//return (<Typography size=\"small\" style={{padding: \"0\", color: theme.palette.success.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>completed</Typography>)\n  }else if(task.status === \"submitted\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.info.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.status === \"processing\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>OPSEC BLOCKED (PRE)</Typography>)\n  }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>OPSEC BLOCKED (POST)</Typography>)\n  }else{\n      return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.info.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }\n}\nconst ColoredTaskDisplay = ({task, theme, children}) => {\n  const [themeColor, setThemeColor] = React.useState(theme.palette.info.main);\n  useEffect( () => {\n    if(task.status.toLowerCase().includes(\"error\")){\n      setThemeColor(theme.palette.error.main);\n    }else if(task.status.toLowerCase() === \"cleared\"){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.completed){\n      setThemeColor(theme.palette.success.main);\n    }else if(task.status === \"submitted\"){\n      setThemeColor(theme.palette.info.main);\n    }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.status.toLowerCase() === \"processing\"){\n      setThemeColor(theme.palette.warning.main);\n    }else{\n      setThemeColor(theme.palette.info.main);\n    }\n  }, [task.status, task.completed])\n    return(\n      <span style={{display: \"flex\", margin: 0, borderWidth: 0, padding: 0, minHeight: \"48px\", alignItems: \"center\", height: \"100%\", borderLeft: \"6px solid \" + themeColor, paddingLeft: \"5px\", width: \"100%\"}}>\n        {children}\n      </span>\n    )\n}\nconst TaskRow = ({task, filterOptions, nodesSelected, toggleSelection}) => {\n\t  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [isFetchingSubtasks, setIsFetchingSubtasks] = React.useState(false);\n    const [shouldDisplay, setShouldDisplay] = React.useState(true);\n    const me = useReactiveVar(meState);\n    const [getSubTasking, { startPolling, stopPolling }] = useLazyQuery(getSubTaskingQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n        \tif(nodesSelected.includes(\"treenode:\" + task.id)){\n        \t\tstartPolling(2000);\n        \t}else{\n        \t\tstopPolling();\n        \t\tsetIsFetchingSubtasks(false);\n        \t\treturn;\n        \t}\n        \tsetTaskingData(data);\n        }\n    });\n    const getSubTasks = React.useCallback( (event) => {\n    \tif(!isFetchingSubtasks){\n        \ttoggleSelection(task.id, true);\n        \tsetIsFetchingSubtasks(true);\n    \t\tgetSubTasking({variables: {task_id: task.id} });\n    \t\treturn;\n      }\n      //// we're already fetching subtasks, but just clicked the minus sign, so stop\n      toggleSelection(task.id, false);\n    }, [isFetchingSubtasks]);\n    useEffect( () => {\n      /*props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    }); */\n      if(task.display_params.includes(\"help\") && task.operator.username !== me.user.username){\n        setShouldDisplay(false);\n        return;\n      }\n      if(filterOptions === undefined){\n        if(!shouldDisplay){\n          setShouldDisplay(true);\n        }\n        return;\n      }\n      if(filterOptions[\"operatorsList\"].length > 0){\n        if(!filterOptions[\"operatorsList\"].includes(task.operator.username)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commentsFlag\"]){\n        if(task.comment === \"\"){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commandsList\"].length > 0){\n        // only show these commands\n        if(!filterOptions[\"commandsList\"].includes(task.command_name)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"everythingButList\"].length > 0){\n          if(filterOptions[\"everythingButList\"].includes(task.command_name)){\n            if(shouldDisplay){\n              setShouldDisplay(false);\n            }\n            return;\n          }\n      }\n      if(filterOptions[\"parameterString\"] !== \"\"){\n        let regex = new RegExp(filterOptions[\"parameterString\"]);\n        if(!regex.test(task.display_params)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(!shouldDisplay){\n        setShouldDisplay(true);\n      }\n    }, [filterOptions, task.comment, task.command, task.display_params, task.operator.username]);\n    const toggleTaskDropdown = React.useCallback( (event, expanded) => {\n      setDropdownOpen(!dropdownOpen);\n    }, [dropdownOpen]);\n    \n    useEffect( () => {\n      if(!isFetchingSubtasks && task.tasks.length > 0){\n        getSubTasks();\n      }\n    }, [task.tasks])\n    return (\n      shouldDisplay ? (\n        <StyledTreeItem nodeId={\"treenode:\" + task.id}\n          onIconClick={getSubTasks}\n          icon={\n            nodesSelected.includes(\"treenode:\" + task.id) ? (<MinusSquare />) : (task.tasks.length > 0 ? (<PlusSquare />) : (null) )\n          }\n          label={\n            <TaskLabel task={task} dropdownOpen={dropdownOpen} toggleTaskDropdown={toggleTaskDropdown}/>\n          }>\n          {\n            taskingData.task.map( (tsk) => (\n              <TaskRow key={\"taskrow: \" + tsk.id} task={tsk} nodesSelected={nodesSelected} filterOptions={filterOptions} toggleSelection={toggleSelection}/>\n            ))\n          }\n      </StyledTreeItem>\n      ) : (null)\n    )\n}\nconst TaskLabel = ({task, dropdownOpen, toggleTaskDropdown}) => {\n  const [fromNow, setFromNow] = React.useState( (new Date()) );\n  const me = useReactiveVar(meState);\n  const theme = useTheme();\n  const [displayComment, setDisplayComment] = React.useState(false);\n  const [alertBadges, setAlertBadges] = React.useState(0);\n  const classes = useStyles();\n  const accordionClasses = accordionUseStyles();\n  const toggleDisplayComment = (evt) => {\n    evt.stopPropagation();\n    setDisplayComment(!displayComment);\n  }\n  const prevResponseCount = useRef(task.responses_aggregate.aggregate.count);\n  useLayoutEffect( () => {\n    scrollContent();\n  }, [])\n  useEffect( () => {\n    //console.log(\"in use effect\", prevResponseCount.current, props.task.responses);\n    if(!dropdownOpen){\n        if(task.responses_aggregate.aggregate.count > prevResponseCount.current){\n              if(task.responses_aggregate.aggregate.count === 1 && ( (new Date(task.responses_aggregate.aggregate.max.timestamp) > fromNow ))){\n                toggleTaskDropdown();\n              }else{\n                setAlertBadges(task.responses_aggregate.aggregate.count - prevResponseCount.current);\n              }\n        }\n    }else{\n      prevResponseCount.current = task.responses_aggregate.aggregate.count;\n      setAlertBadges(0);\n    }\n  }, [task.responses_aggregate.aggregate.count, dropdownOpen]);\n  const scrollContent = (node, isAppearing) => {\n    document.getElementById(`scrolltotask${task.id}`).scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"start\"\n      })\n  }\n  return(\n    <Paper className={classes.root} elevation={5} style={{marginRight: 0}}>\n      <Accordion TransitionProps={{ unmountOnExit: true, onEntered: scrollContent }} defaultExpanded={false} onChange={toggleTaskDropdown} expanded={dropdownOpen} >\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel1c-content-task-${task.id}`}\n          id=\"panel1c-header\"\n          classes={accordionClasses}\n          \n        >  \n          <ColoredTaskDisplay task={task} theme={theme}>\n              <div id={'scrolltotask' + task.id} style={{width: \"100%\"}}>\n                {displayComment ? (\n                    <React.Fragment>\n                        <Typography className={classes.secondaryHeading}>{task.commentOperator.username}</Typography>\n                        <Typography className={classes.heading}>{task.comment}</Typography>\n                    </React.Fragment>\n                  ) : (null)}\n                    <Typography className={classes.taskAndTimeDisplay}>[{toLocalTime(task.timestamp, me.user.view_utc_time)}] / {task.id} / {task.operator.username}\n                      <TaskStatusDisplay task={task} theme={theme}/>\n                    </Typography>\n                  <div>\n                  {task.comment !== \"\" ? (\n                        <div className={classes.column}>\n                            <IconButton size=\"small\" style={{padding: \"0\"}} color=\"primary\" onClick={toggleDisplayComment}><ChatOutlinedIcon/></IconButton>\n                          </div>\n                      ) : (null)}\n                    <div className={classes.column}>\n                        <Badge badgeContent={alertBadges} color=\"secondary\" anchorOrigin={{vertical: 'top', horizontal: 'left'}}>\n                          <Typography className={classes.heading} onClick={(e) => {e.stopPropagation();}} >\n                            {task.command_name + \" \" + task.display_params}\n                          </Typography>\n                        </Badge>\n                      </div>\n                </div>\n            </div>\n          </ColoredTaskDisplay>\n                        \n        </AccordionSummary>\n\n        <AccordionDetails style={{cursor: \"default\"}}>\n          <TaskDisplayContainer task={task}/>\n        </AccordionDetails>\n      </Accordion>\n  </Paper>\n  )\n}","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport Chip from '@material-ui/core/Chip';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {useQuery, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\nconst operatorQuery = gql`\nquery operatorQuery($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    operators {\n      username\n      id\n    }\n  }\n}`;\nexport function CallbacksTabsTaskingFilterDialog(props) {\n  const me = useReactiveVar(meState);\n  const [onlyOperators, setOnlyOperators] = React.useState([]);\n  const [operatorUsernames, setOperatorUsernames] = React.useState([]);\n  const [onlyHasComments, setOnlyHasComments] = React.useState(false);\n  const [onlyCommands, setOnlyCommands] = React.useState([]);\n  const [everythingBut, setEverythingBut] = React.useState([]);\n  const [onlyParameters, setOnlyParameters] = React.useState(\"\");\n  const [commandOptions, setCommandOptions] = React.useState([]);\n  const classes = useStyles();\n  useQuery(operatorQuery, {variables: {operation_id: me.user.current_operation_id},\n    onCompleted: (data) => {\n      setOperatorUsernames(data.operation_by_pk.operators.map( (op) => op.username));\n    }\n  });\n  useEffect( () => {\n    if(props.filterOptions[\"operatorsList\"] !== undefined){\n      setOnlyOperators(props.filterOptions[\"operatorsList\"]);\n    }\n    if(props.filterOptions[\"commentsFlag\"] !== undefined){\n      setOnlyHasComments(props.filterOptions[\"commentsFlag\"]);\n    }\n    if(props.filterOptions[\"commandsList\"] !== undefined){\n      setOnlyCommands(props.filterOptions[\"commandsList\"]);\n    }\n    if(props.filterOptions[\"parameterString\"] !== undefined){\n      setOnlyParameters(props.filterOptions[\"parameterString\"]);\n    }\n    if(props.filterOptions[\"everythingButList\"] !== undefined){\n      setEverythingBut(props.filterOptions[\"everythingButList\"]);\n    }\n    if(props.filterCommandOptions){\n      const commandOptionNames = props.filterCommandOptions.map(c => c.cmd);\n      setCommandOptions(commandOptionNames);\n    }\n  }, [props.filterOptions]);\n  const onSubmit = () => {\n    props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    });\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    setOnlyParameters(value);\n  }\n  const handleCommentsChange = (event) => {\n    setOnlyHasComments(event.target.checked);\n  }\n  const handleOperatorChange = (event) => {\n    setOnlyOperators(event.target.value);\n  }\n  const handleOnlyCommandsChange = (event) => {\n    setOnlyCommands(event.target.value);\n    if(event.target.value.length > 0){\n      setEverythingBut([]);\n    }\n  }\n  const handleEverythingButChange = (event) => {\n    setEverythingBut(event.target.value);\n    if(event.target.value.length > 0){\n      setOnlyCommands([]);\n    }\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Filter Which Tasks Are Visible</DialogTitle>\n        <DialogContent dividers={true} style={{overflow: \"hidden\"}}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Only Show Tasks by the Following Operators</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  multiple\n                  id=\"operator-chip\"\n                  value={onlyOperators}\n                  onChange={handleOperatorChange}\n                  input={<Input />}\n                  renderValue={(selected) => (\n                    <div className={classes.chips}>\n                      {selected.map((value) => (\n                        <Chip key={value} label={value} className={classes.chip} />\n                      ))}\n                    </div>\n                  )}\n                  MenuProps={MenuProps}\n                >\n                  {operatorUsernames.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <Checkbox color=\"primary\" checked={onlyOperators.indexOf(name) > -1} />\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n                Only Show Tasks with Comments: <Switch checked={onlyHasComments} onChange={handleCommentsChange} color=\"primary\" name=\"Only Comments\" inputProps={{'aria-label': 'primary checkbox'}}/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"include-chip-label\">Only Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"include-chip-label\"\n                    multiple\n                    id=\"include-chip\"\n                    value={onlyCommands}\n                    onChange={handleOnlyCommandsChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={onlyCommands.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"exclude-chip-label\">Do Not Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"exclude-chip-label\"\n                    multiple\n                    id=\"exclude-chip\"\n                    value={everythingBut}\n                    onChange={handleEverythingButChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={everythingBut.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <MythicTextField value={onlyParameters} onChange={onChange} name=\"Only Show Tasks with the Following Parameter Regex\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect} from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function CallbacksTabsTaskingInputTokenSelect(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const handleChange = (event) => {\n        setSelected(event.target.value);\n        props.changeSelectedToken(event.target.value);\n      };\n    useEffect( () => {\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }else{\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }\n    }, [props.options]);\n    const renderValue = (value) => {\n      if(value === \"Default Token\"){\n        return \"Default Token\";\n      }\n      if(value.User === null){\n        return value.tokenId;\n      }else{\n        return value.User;\n      }\n    }\n  return (\n      <FormControl style={{width: \"20%\"}}>\n        <InputLabel ref={inputRef}>Tokens</InputLabel>\n        <Select\n          labelId=\"demo-dialog-select-label\"\n          id=\"demo-dialog-select\"\n          value={selected}\n          onChange={handleChange}\n          variant=\"filled\"\n          renderValue={renderValue}\n          input={<Input style={{width: \"100%\"}}/>}\n        >\n          <MenuItem value={\"Default Token\"} key={0}>Default Token</MenuItem>\n          {options.map( (opt) => (\n              <MenuItem value={opt.token} key={opt.token.id}>{opt.token.User === null ? opt.token.TokenId + \" - \" + opt.token.description : opt.token.User + \" - \" + opt.token.description}</MenuItem>\n          ) )}\n        </Select>\n      </FormControl>\n  );\n}\n\n","import { IconButton, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport React from 'react';\nimport {TextField} from '@material-ui/core';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CallbacksTabsTaskingFilterDialog} from './CallbacksTabsTaskingFilterDialog';\nimport {CallbacksTabsTaskingInputTokenSelect} from './CallbacksTabsTaskingInputTokenSelect';\nimport { gql, useSubscription } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport parser from 'yargs-parser';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nconst arrgv = require('arrgv');\n\nconst GetLoadedCommandsSubscription = gql`\nsubscription GetLoadedCommandsSubscription($callback_id: Int!){\n    loadedcommands(where: {callback_id: {_eq: $callback_id}}){\n        id\n        command {\n            cmd\n            id\n            attributes\n            commandparameters {\n                id\n                parameter_type: type \n                required\n                name\n                ui_position\n                parameter_group_name\n                cli_name\n                display_name\n            }\n        }\n    }\n    \n}\n`;\nconst subscriptionCallbackTokens = gql`\nsubscription subscriptionCallbackTokens ($callback_id: Int!){\n  callbacktoken(where: {deleted: {_eq: false}, callback_id: {_eq: $callback_id}}) {\n    token {\n      TokenId\n      id\n      User\n      description\n    }\n    id\n  }\n}\n`;\nconst subscriptionTask = gql`\nsubscription tasksSubscription($callback_id: Int!){\n    task(where: {callback_id: {_eq: $callback_id}}, order_by: {id: desc}){\n        id\n        original_params\n        display_params\n        command_name\n        comment\n        tasking_location\n        parameter_group_name\n        status\n        operator{\n            username\n        }\n        command {\n            commandparameters {\n                id\n                type\n                name\n            }\n        }\n    }\n}\n`;\n\nexport function CallbacksTabsTaskingInputPreMemo(props){\n    const snackMessageStyles = {anchorOrigin:{vertical: \"bottom\", horizontal: \"left\"}, autoHideDuration: 2000, preventDuplicate: true, maxSnack: 1, style:{marginBottom: \"50px\"}};\n    const snackReverseSearchMessageStyles = {anchorOrigin:{vertical: \"bottom\", horizontal: \"left\"}, autoHideDuration: 1000, preventDuplicate: true, maxSnack: 1, style:{marginBottom: \"100px\"}};\n    const [message, setMessage] = React.useState(\"\");\n    const [loadedOptions, setLoadedOptions] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [taskOptionsIndex, setTaskOptionsIndex] = React.useState(-1);\n    const [filteredTaskOptions, setFilteredTaskOptions] = React.useState([]);\n\n    const [tabOptions, setTabOptions] = React.useState([]);\n    const [tabOptionsIndex, setTabOptionsIndex] = React.useState(-1);\n\n    const [openFilterOptionsDialog, setOpenFilterOptionsDialog] = React.useState(false);\n    const [tokenOptions, setTokenOptions] = React.useState([]);\n\n    const [unmodifiedHistoryValue, setUnmodifiedHistoryValue] = React.useState(\"parsed_cli\");\n    const [reverseSearching, setReverseSearching] = React.useState(false);\n    const [reverseSearchString, setReverseSearchString] = React.useState('');\n    const [reverseSearchOptions, setReverseSearchOptions] = React.useState([]);\n    const [reverseSearchIndex, setReverseSearchIndex] = React.useState(-1);\n\n    const me = useReactiveVar(meState);\n\n    useSubscription(subscriptionCallbackTokens, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setTokenOptions(subscriptionData.data.callbacktoken);\n        }\n      });\n    useSubscription(subscriptionTask, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setTaskOptions(subscriptionData.data.task);\n            const filteredOptions = subscriptionData.data.task.filter( c => applyFilteringToTasks(c));\n            setFilteredTaskOptions(filteredOptions);\n        }\n    });\n    useSubscription(GetLoadedCommandsSubscription, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            const cmds = subscriptionData.data.loadedcommands.map( c => {\n                let cmdData = {...c.command};\n                cmdData.attributes = JSON.parse(cmdData.attributes);\n                return cmdData;\n            })\n            cmds.push({cmd: \"help\", description: \"Get help for a command or info about loaded commands\", commandparameters: [], attributes: {supported_os: []}});\n            cmds.push({cmd: \"clear\", description: \"Clear 'submitted' jobs from being pulled down by an agent\", commandparameters: [], attributes: {supported_os: []}});\n            cmds.sort((a,b) => a.cmd > b.cmd ? 1 : -1);\n            setLoadedOptions(cmds);\n        }\n    });\n    React.useEffect( () => {\n        //console.log(\"filter updated\")\n        const filteredOptions = taskOptions.filter( c => applyFilteringToTasks(c));\n        setFilteredTaskOptions(filteredOptions);\n    }, [props.filterOptions])\n    const applyFilteringToTasks = (task) => {\n        if(task.display_params.includes(\"help\") && task.operator.username !== me.user.username){\n            return false;\n          }\n          if(props.filterOptions === undefined){\n            return true;\n          }\n          if(props.filterOptions[\"operatorsList\"].length > 0){\n            if(!props.filterOptions[\"operatorsList\"].includes(task.operator.username)){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"commentsFlag\"]){\n            if(task.comment === \"\"){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"commandsList\"].length > 0){\n            // only show these commands\n            if(!props.filterOptions[\"commandsList\"].includes(task.command_name)){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"everythingButList\"].length > 0){\n            if(task.command !== null){\n              if(props.filterOptions[\"everythingButList\"].includes(task.command_name)){\n                return false;\n              }\n            }\n          }\n          if(props.filterOptions[\"parameterString\"] !== \"\"){\n            let regex = new RegExp(props.filterOptions[\"parameterString\"]);\n            if(!regex.test(task.display_params)){\n              return false;\n            }\n          }\n          return true;\n    }\n    const handleInputChange = (event) => {\n        setTabOptions([]);\n        setTabOptionsIndex(0);\n        setMessage(event.target.value);\n        if(event.target.value.length === 0){\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n        }\n    }\n    const onKeyDown = (event) => {\n        if(event.key === \"r\" && event.ctrlKey){\n            //this means they typed ctrl+r, so they're wanting to do a reverse search for a command\n            setReverseSearching(true);\n            setMessage(\"\");\n            setReverseSearchString(\"\");\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n        }\n        if(event.key === \"Tab\"){\n            // if we're still typing the command, we want this to cycle through possible matching commands\n            // if we have a command, this should cycle through parameter names that are required\n            event.stopPropagation();\n            event.preventDefault();\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n            if(message.includes(\" \")){\n                // this means we're not trying to help with the initial command since there's already a space in what the user typed\n                // first find the command in question\n                let cmd = loadedOptions.find( l => l.cmd === message.split(\" \")[0]);\n                if(cmd.commandparameters.length > 0){\n                    if(message[message.length -1] === \" \"){\n                        // somebody hit tab after a parameter name or after a parameter value\n                        const parsed = parseCommandLine(message, cmd);\n                        const cmdGroupNames = determineCommandGroupName(cmd, parsed);\n                        if(cmdGroupNames === undefined){\n                            snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n                            return;\n                        }\n                        console.log(\"cmdGroupNames in tab\", cmdGroupNames);\n                        // look for required arguments that aren't present in our parsed dictionary\n                        for(const [key, value] of Object.entries(parsed)){\n                            if(key !== \"_\"){\n                                if(value !== value || value === undefined){\n                                    snackActions.warning(key + \" needs a valid value\",snackMessageStyles);\n                                    return;\n                                }\n                                if(value === undefined){\n                                    // this means we parsed something and it's undefined, so we need a value\n                                    if(message.endsWith(\" -\" + key)){\n                                        //this value is undefined and it's the last one in the list, so we can potentially swap it out with another parameter\n                                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                                            if(cmd.commandparameters[i][\"required\"] && \n                                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) && \n                                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                                const newMsg = message.trim().slice(0, -1 * key.length) + cmd.commandparameters[i][\"cli_name\"];\n                                                setMessage(newMsg);\n                                                return;\n                                            }\n                                        }\n                                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                                            if(!cmd.commandparameters[i][\"required\"] && \n                                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                                const newMsg = message.trim().slice(0, -1 * key.length) + cmd.commandparameters[i][\"cli_name\"];\n                                                setMessage(newMsg);\n                                                return;\n                                            }\n                                        }\n                                    }\n                                    snackActions.warning(key + \" needs a value\", snackMessageStyles);\n                                    return;\n                                }\n                            }\n                        }\n                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                            if(cmd.commandparameters[i][\"required\"] && \n                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                const newMsg = message.trim() + \" -\" + cmd.commandparameters[i][\"cli_name\"];\n                                setMessage(newMsg);\n                                return;\n                            }\n                        }\n                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                            if(!cmd.commandparameters[i][\"required\"] && \n                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                const newMsg = message.trim() + \" -\" + cmd.commandparameters[i][\"cli_name\"];\n                                setMessage(newMsg);\n                                return;\n                            }\n                        }\n                    }else{\n                        // somebody hit tab when looking at something like `shell dj` or `shell -command`\n                        // so, we should check if the last word is a -CommandParameterName and if so, determine other parameters to replace it\n                        // if we're looking at the first option, do nothing until they hit space\n                        if(tabOptions.length > 0){\n                            const newIndex = (tabOptionsIndex + 1) % tabOptions.length;\n                            setTabOptionsIndex(newIndex);\n                            let newMessage = message.split(\" \").slice(0, -1).join(\" \") + \" -\" + tabOptions[newIndex];\n                            setMessage(newMessage);\n                            return;\n                        }\n                        const pieces = message.split(\" \");\n                        const lastFlag = pieces.slice(-1)[0];\n                        // determine if this last thing we see is a flag or not\n                        if(lastFlag.startsWith(\"-\")){\n                            // the last thing we see starts with - and doesn't have a space at the end, so treat this like a tab-completable command parameter\n                            // so we need to remove it and see what group we're dealing with so far\n                            const parsed = parseCommandLine(pieces.slice(0, -1).join(\" \"), cmd);\n                            const cmdGroupNames = determineCommandGroupName(cmd, parsed);\n                            if(cmdGroupNames === undefined){\n                                snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n                                return;\n                            }\n                            // determine if we're looking at a valid flag name in lastFlag or if it's simply the start of a flag\n                            //console.log(\"swapping parameter name, group options: \", cmdGroupNames);\n                            let exactMatch = cmd.commandparameters.find(cur => \n                                cmdGroupNames.includes(cur.parameter_group_name) && \n                                cur.cli_name === lastFlag.slice(1) &&\n                                !(cur.cli_name in parsed)\n                            );\n                            let paramOptions = [];\n                            if(exactMatch){\n                                // what the user typed or what we filled out is an exact match to a parameter name\n                                // the options should be all parameters in that group except for the ones already supplied in parsed\n                                paramOptions = cmd.commandparameters.reduce( (prev, cur) => {\n                                    if(cmdGroupNames.includes(cur.parameter_group_name) && \n                                        cur.cli_name !== lastFlag.slice(1) &&\n                                        !(cur.cli_name in parsed)){\n                                        return [...prev, cur.cli_name];\n                                    }else{\n                                        return [...prev];\n                                    }\n                                }, []);\n                                paramOptions.push(lastFlag.slice(1));\n                            }else{\n                                // what the user typed isn't an exact match, so find things that start with what they're trying to type\n                                paramOptions = cmd.commandparameters.reduce( (prev, cur) => {\n                                    if(cmdGroupNames.includes(cur.parameter_group_name) && \n                                        cur.cli_name.toLowerCase().startsWith(lastFlag.slice(1).toLocaleLowerCase()) &&\n                                        !(cur.cli_name in parsed)){\n                                        return [...prev, cur.cli_name];\n                                    }else{\n                                        return [...prev];\n                                    }\n                                }, []);\n                            }\n                            if(paramOptions.length > 0){\n                                if(paramOptions.length === 1){\n                                    setTabOptions([]);\n                                    setTabOptionsIndex(0);\n                                    let newMsg = pieces.slice(0,-1).join(\" \") + \" -\" + paramOptions[0];\n                                    setMessage(newMsg);\n                                }else{\n                                    setTabOptions(paramOptions);\n                                    setTabOptionsIndex(0);\n                                    let newMsg = pieces.slice(0,-1).join(\" \") + \" -\" + paramOptions[0];\n                                    setMessage(newMsg);\n                                }\n                                return;\n                            }else{\n                                snackActions.warning(\"Unknown Parameter Name\", snackMessageStyles);\n                                return;\n                            }\n                        }else{\n                            // the last thing doesn't start with -, so we're just looking at text, do nothing for now\n                            return;\n                        }\n                        \n                    }\n                    \n                    snackActions.info(\"No more arguments for command\", snackMessageStyles);\n                }else{\n                    snackActions.info(\"No arguments for command\", snackMessageStyles);\n                }\n                \n            }else{\n                // somebody hit tab with either a blank message or a partial word\n                if(tabOptions.length === 0){\n                    let opts = loadedOptions.filter( l => l.cmd.toLowerCase().startsWith(message.toLocaleLowerCase()) && (l.attributes.supported_os.length === 0 || l.attributes.supported_os.includes(props.callback_os)));\n                    setTabOptions(opts);\n                    setTabOptionsIndex(0);\n                    if(opts.length > 0){\n                        setMessage(opts[0].cmd);\n                    }\n                }else{\n                    setTabOptionsIndex( (tabOptionsIndex + 1) % tabOptions.length );\n                    setMessage(tabOptions[(tabOptionsIndex + 1) % tabOptions.length].cmd)\n                }\n            }\n        }else if(event.key === \"Enter\"){\n            if(event.shiftKey){\n                onSubmitCommandLine(event, true);\n            }else{\n                onSubmitCommandLine(event, false);\n            }\n            \n        }else if(event.key === \"ArrowUp\"){\n            if(filteredTaskOptions.length === 0){\n                snackActions.warning(\"No previous tasks\", snackMessageStyles);\n                return;\n            }else{\n                \n                let newIndex = (taskOptionsIndex + 1);\n                if(newIndex > filteredTaskOptions.length -1){\n                    newIndex = filteredTaskOptions.length -1;\n                }\n                setTaskOptionsIndex(newIndex);\n                setMessage(filteredTaskOptions[newIndex].command_name + \" \" + filteredTaskOptions[newIndex].original_params);\n                setUnmodifiedHistoryValue(filteredTaskOptions[newIndex].tasking_location);\n                //setMessage(taskOptions[newIndex].command_name + \" \" + taskOptions[newIndex].display_params);\n            }\n        }else if(event.key === \"ArrowDown\"){\n            if(filteredTaskOptions.length === 0){\n                snackActions.warning(\"No previous tasks\", snackMessageStyles);\n                return;\n            }else{\n                let newIndex = (taskOptionsIndex - 1);\n                if(newIndex < 0){\n                    newIndex = 0;\n                }\n                setTaskOptionsIndex(newIndex);\n                setMessage(filteredTaskOptions[newIndex].command_name + \" \" + filteredTaskOptions[newIndex].original_params);\n                setUnmodifiedHistoryValue(filteredTaskOptions[newIndex].tasking_location);\n                //setMessage(taskOptions[newIndex].command_name + \" \" + taskOptions[newIndex].display_params);\n            }\n        }else{\n            setTabOptions([]);\n            setTabOptionsIndex(0);\n            if(taskOptionsIndex !== -1){\n                setTaskOptionsIndex(-1);\n            }\n        }\n    }\n    const parseCommandLine = (command_line, cmd) => {\n        // given a command line and the associated command\n        let stringArgs = [];\n        let booleanArgs = [];\n        let arrayArgs = [];\n        let numberArgs = [];\n        for(let i = 0; i < cmd.commandparameters.length; i++){\n            switch(cmd.commandparameters[i].parameter_type){\n                case \"Choice\":\n                case \"String\":\n                    stringArgs.push(cmd.commandparameters[i].cli_name);\n                case \"Number\":\n                    numberArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                case \"Boolean\":\n                    booleanArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                case \"Array\":\n                case \"ChoiceMultiple\":\n                    arrayArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                default:\n                    stringArgs.push(cmd.commandparameters[i].cli_name);\n            }\n        }\n        try{\n            const argv = arrgv(command_line);\n            //console.log(\"argv\", argv);\n            //console.log(\"arrayArgs\", arrayArgs);\n            const yargs_parsed = parser(argv, {\n                string: stringArgs,\n                boolean: booleanArgs,\n                number: numberArgs,\n                array: arrayArgs,\n                configuration: {\n                    \"short-option-groups\": false,\n                    \"camel-case-expansion\": false,\n                    \"dot-notation\": false,\n                    \"unknown-options-as-args\": false,\n                    \"greedy-arrays\": true\n                }\n            });\n            //console.log(yargs_parsed, cmd.commandparameters);\n            return yargs_parsed;\n        }catch(error){\n            snackActions.warning(\"Failed to parse command line: \" + error, snackMessageStyles);\n            return undefined;\n        }\n    }\n    const determineCommandGroupName = (cmd, parsed) => {\n        if(cmd.commandparameters.length === 0){\n            return [];\n        }\n        let cmdGroupOptions = cmd.commandparameters.reduce( (prev, cur) => {\n            if(prev.includes(cur.parameter_group_name)){\n                return [...prev];\n            }\n            return [...prev, cur.parameter_group_name];\n        }, []);\n        for(const key of Object.keys(parsed)){\n            // for all of the things we've parsed out so far, determin their parameter groups\n            if( key !== \"_\"){\n                // we don't care about positional arguments at the moment\n                let paramGroups = [];\n                for(let i = 0; i < cmd.commandparameters.length; i++){\n                    if(cmd.commandparameters[i][\"cli_name\"] === key){\n                        paramGroups.push(cmd.commandparameters[i][\"parameter_group_name\"])\n                    }\n                }\n                // now paramGroups has all of the group names associated with `key`\n                // we have some set of possible options, so we need to find the intersection with paramGroups and cmdGroupOptions\n                let intersection = cmdGroupOptions.reduce( (prev, cur) => {\n                    if(paramGroups.includes(cur)){\n                        return [...prev, cur];\n                    }\n                    return [...prev];\n                }, [])\n                if(intersection.length === 0){\n                    // this is a bad thing, we did an intersection and there's no similar paramter groups, but parameters have been supplied\n                    return [];\n                }\n                cmdGroupOptions = [...intersection];\n            }\n        }\n        // now cmdGroupOptions is a list of all the matching parameter_group_names for the commandline arguments we've specified\n        return cmdGroupOptions;\n    }\n    const fillOutPositionalArguments = (cmd, parsed, groupNames) => {\n        let parsedCopy = {...parsed};\n        parsedCopy[\"_\"].shift(); // get rid of the command name from this list of arguments.\n        if(cmd.commandparameters.length === 0){\n            return parsedCopy;\n        }\n        if(groupNames.length === 0){\n            return parsedCopy;\n        }\n        // figure out how to deal with positional parameters\n        const groupParameters = cmd.commandparameters.filter(c => c.parameter_group_name === groupNames[0]);\n        groupParameters.sort((a,b) => a.ui_position < b.ui_position ? -1 : 1);\n        // now we have all of the parameters and they're sorted by `ui_position`\n        \n        let unSatisfiedArguments = [];\n        for(let i = 0; i < groupParameters.length; i++){\n            if( !(groupParameters[i][\"cli_name\"] in parsedCopy)){\n                // this parameter hasn't been supplied yet, track it\n                unSatisfiedArguments.push(groupParameters[i]); \n            }\n        }\n        // now iterate over the unsatisfied arguments and add in the positional paramters\n        for(let i = 0; i < unSatisfiedArguments.length -1; i++){\n            // we cut this short by one so that the last unSatisifedArgument can do a greedy matching for the rest of what was supplied\n            // this parameter hasn't been supplied yet, check if we have any positional parameters in parsedCopy[\"_\"]\n            if(parsedCopy[\"_\"].length > 0){\n                parsedCopy[groupParameters[i][\"cli_name\"]] = parsedCopy[\"_\"].shift();\n            }\n        }\n        if(unSatisfiedArguments.length > 0 && parsedCopy[\"_\"].length > 0){\n            parsedCopy[unSatisfiedArguments[unSatisfiedArguments.length -1][\"cli_name\"]] = parsedCopy[\"_\"].join(\" \");\n            parsedCopy[\"_\"] = [];\n        }\n        return parsedCopy;\n\n    }\n    const onSubmitCommandLine = (evt, force_parsed_popup) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        //console.log(\"onSubmitCommandLine\", evt, message);\n        let splitMessage = message.split(\" \");\n        let cmd = loadedOptions.find( l => l.cmd === splitMessage[0]);\n        if(cmd === undefined){\n            snackActions.warning(\"Unknown command\", snackMessageStyles);\n            return;\n        }\n        let cmdGroupName = \"Default\";\n        let parsedWithPositionalParameters = {};\n        if(unmodifiedHistoryValue.includes(\"modal\") || unmodifiedHistoryValue.includes(\"browserscript\")){\n            // these are the two kinds that'll introduce dictionary values as original_params\n            try{\n                let params = splitMessage.slice(1).join(\" \");\n                parsedWithPositionalParameters = JSON.parse(params);\n                cmdGroupName = determineCommandGroupName(cmd, parsedWithPositionalParameters);\n            }catch(error){\n                snackActions.warning(\"Failed to parse modified JSON value\", snackMessageStyles);\n                return;\n            }   \n        }else{\n            let parsed = parseCommandLine(message, cmd);\n            if(!parsed){\n                return;\n            }\n            cmdGroupName = determineCommandGroupName(cmd, parsed);\n            if(cmd.commandparameters.length > 0){\n                parsedWithPositionalParameters = fillOutPositionalArguments(cmd, parsed, cmdGroupName);\n                if(parsedWithPositionalParameters[\"_\"].length > 0){\n                    snackActions.warning(\"Too many positional arguments given. Did you mean to quote some of them?\", snackMessageStyles);\n                    return;\n                }\n            }else{\n                parsedWithPositionalParameters = parsed;\n            }\n        }\n        if(cmdGroupName === undefined){\n            snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n            return;\n        }else if(cmdGroupName.length > 1){\n            if(Boolean(force_parsed_popup)){\n                props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), cmdGroupName, unmodifiedHistoryValue);\n            }else{\n                if(cmdGroupName.includes(\"Default\")){\n                    props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), [\"Default\"], unmodifiedHistoryValue);\n                }else{\n                    snackActions.warning(\"Passed arguments are ambiguous, use shift+enter for modal or provide more parameters\", snackMessageStyles);\n                    return;\n                }\n            }\n            setMessage(\"\");\n            setTaskOptionsIndex(-1);\n            setReverseSearchIndex(-1);\n            setReverseSearching(false);\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n            return;\n        }\n        //console.log(\"positional args added in:\", parsedWithPositionalParameters);\n        props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), cmdGroupName, unmodifiedHistoryValue);\n        setMessage(\"\");\n        setTaskOptionsIndex(-1);\n        setReverseSearchIndex(-1);\n        setReverseSearching(false);\n        setUnmodifiedHistoryValue(\"parsed_cli\");\n    }\n    const onClickFilter = () => {\n        setOpenFilterOptionsDialog(true);\n    }\n    const handleReverseSearchInputChange = (event) => {\n        setReverseSearchString(event.target.value);\n        if(event.target.value.length === 0){\n            setMessage(\"\");\n            setReverseSearchOptions([]);\n            setReverseSearchIndex(0);\n            return;\n        }\n        // need to do a reverse i search through taskOptions\n        const lowerCaseTextSearch = event.target.value.toLowerCase();\n        const matchingOptions = taskOptions.filter( x => (x.command_name + \" \" + x.original_params).toLowerCase().includes(lowerCaseTextSearch));\n        const filteredMatches = matchingOptions.filter( x => applyFilteringToTasks(x))\n        setReverseSearchOptions(filteredMatches);\n        if(filteredMatches.length > 0){\n            setMessage(filteredMatches[0].command_name + \" \" + filteredMatches[0].original_params);\n        }\n    }\n    const onReverseSearchKeyDown = (event) => {\n        if(event.key === \"Escape\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n        }else if(event.key === \"Tab\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n        }else if(event.key === \"Enter\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n            onSubmitCommandLine(event);\n        }else if(event.key === \"ArrowUp\"){\n            // go up through the reverseSearchOptions by incrementing reverseSearchIndex\n            // setMessage to teh value\n            if(reverseSearchOptions.length === 0){\n                snackActions.warning(\"No matching options\", snackReverseSearchMessageStyles);\n                return;\n            }else{\n                const newIndex = (reverseSearchIndex + 1) % reverseSearchOptions.length;\n                setReverseSearchIndex(newIndex);\n                setMessage(reverseSearchOptions[newIndex].command_name + \" \" + reverseSearchOptions[newIndex].original_params);\n            }\n        }else if(event.key === \"ArrowDown\"){\n            // go down through the reverseSearchOptions by decrementing reverseSearchIndex\n            // setMessage to the value\n            if(reverseSearchOptions.length === 0){\n                snackActions.warning(\"No matching options\", snackReverseSearchMessageStyles);\n                return;\n            }else{\n                let newIndex = (reverseSearchIndex - 1) % reverseSearchOptions.length;\n                if(newIndex < 0){\n                    newIndex = reverseSearchOptions.length - 1;\n                }\n                setReverseSearchIndex(newIndex);\n                setMessage(reverseSearchOptions[newIndex].command_name + \" \" + reverseSearchOptions[newIndex].original_params);\n            }\n        }\n    }\n    return (\n        <React.Fragment>\n            {reverseSearching &&\n                <TextField\n                    placeholder={\"Search previous commands\"}\n                    onKeyDown={onReverseSearchKeyDown}    \n                    onChange={handleReverseSearchInputChange}                     \n                    size=\"small\"\n                    autoFocus={true}\n                    variant=\"outlined\"\n                    value={reverseSearchString}\n                    fullWidth={true}\n                    InputProps={{ type: 'search',\n                        startAdornment: <React.Fragment><Typography style={{width: \"10%\"}}>reverse-i-search:</Typography></React.Fragment>\n                    \n                    }}\n                />\n            }\n            <TextField\n                placeholder={\"Task an agent...\"}\n                onKeyDown={onKeyDown}    \n                onChange={handleInputChange}                     \n                size=\"small\"\n                variant=\"outlined\"\n                disabled={reverseSearching}\n                value={message}\n                autoFocus={true}\n                fullWidth={true}\n                InputProps={{ type: 'search',\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitCommandLine}><SendIcon/></IconButton>\n                    <IconButton color=\"secondary\" variant=\"contained\" onClick={onClickFilter}><TuneIcon/></IconButton>\n                    </React.Fragment>,\n                    startAdornment: <React.Fragment>\n                        {tokenOptions.length > 0 ? (\n                            <CallbacksTabsTaskingInputTokenSelect options={tokenOptions} changeSelectedToken={props.changeSelectedToken}/>\n                        ) : (null)}\n                        \n                    </React.Fragment>\n                \n                }}\n                />\n              {openFilterOptionsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilterOptionsDialog} \n                    onClose={()=>{setOpenFilterOptionsDialog(false);}} \n                    innerDialog={<CallbacksTabsTaskingFilterDialog filterCommandOptions={loadedOptions} onSubmit={props.onSubmitFilter} filterOptions={props.filterOptions} onClose={()=>{setOpenFilterOptionsDialog(false);}} />}\n                />\n              }\n        </React.Fragment>\n    )\n}\nexport const CallbacksTabsTaskingInput = React.memo(CallbacksTabsTaskingInputPreMemo);\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect, useRef, useCallback, useLayoutEffect} from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { TaskDisplay } from './TaskDisplay';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsTaskingInput} from './CallbacksTabsTaskingInput';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { IconButton, Tooltip} from '@material-ui/core';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\n\n\nexport function CallbacksTabsTaskingLabel(props){\n    const [description, setDescription] = React.useState(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription ? props.tabInfo.callbackDescription : \"Callback: \" + props.tabInfo.callbackID)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else if(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription){\n            setDescription(props.tabInfo.callbackDescription);\n        }else{\n            setDescription(\"Callback: \" + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const taskingDataFragment = gql`\n    fragment taskData on task {\n        comment\n        callback_id\n        commentOperator{\n            username\n        }\n        completed\n        id\n        operator{\n            username\n        }\n        original_params\n        display_params\n        status\n        timestamp\n        command {\n          cmd\n          id\n        }\n        command_name\n        responses_aggregate {\n            aggregate{\n              count\n              max {\n                timestamp\n              }\n            }\n          }\n        opsec_pre_blocked\n        opsec_pre_bypassed\n        opsec_post_blocked\n        opsec_post_bypassed\n        tasks {\n            id\n        }\n        token {\n            id\n        }\n    }\n`;\nexport const createTaskingMutation = gql`\nmutation createTasking($callback_id: Int!, $command: String!, $params: String!, $files: String, $token_id: Int, $tasking_location: String, $original_params: String, $parameter_group_name: String) {\n  createTask(callback_id: $callback_id, command: $command, params: $params, files: $files, token: $token_id, tasking_location: $tasking_location, original_params: $original_params, parameter_group_name: $parameter_group_name) {\n    status\n    id\n    error\n  }\n}\n`;\n// this is to listen for the latest taskings\nconst fetchLimit = 10;\nconst getTaskingQuery = gql`\n${taskingDataFragment}\nsubscription getTasking($callback_id: Int!, $fromNow: timestamp!, $limit: Int){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}, timestamp: {_gt: $fromNow}}, order_by: {id: desc}, limit: $limit) {\n        ...taskData\n    }\n}\n `;\nconst getNextBatchTaskingQuery = gql`\n${taskingDataFragment}\nquery getBatchTasking($callback_id: Int!, $offset: Int!, $fetchLimit: Int!){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}}, order_by: {id: desc}, limit: $fetchLimit, offset: $offset) {\n        ...taskData\n    }\n    callback(where: {id: {_eq: $callback_id}}){\n        id\n    }\n}\n`;\nexport const CallbacksTabsTaskingPanel = ({tabInfo, index, value, onCloseTab}) =>{\n    const [taskLimit, setTaskLimit] = React.useState(10);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [commandInfo, setCommandInfo] = React.useState({});\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const taskingDataRef = React.useRef({task: []});\n    const [fromNow, setFromNow] = React.useState((new Date()).toISOString());\n    const [selectedToken, setSelectedToken] = React.useState({});\n    const [filterOptions, setFilterOptions] = React.useState({\n        \"operatorsList\": [],\n        \"commentsFlag\": false,\n        \"commandsList\": [],\n        \"parameterString\": \"\",\n        \"everythingButList\": []\n    });\n    const [canScroll, setCanScroll] = React.useState(true);\n    useEffect( () => {\n        taskingDataRef.current = taskingData;\n    }, [taskingData]);\n    const [fetched, setFetched] = React.useState(false);\n    const [fetchedAllTasks, setFetchedAllTasks] = React.useState(false);\n    const messagesEndRef = useRef(null);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Task created\", {autoHideDuration: 1000});\n            }\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const equalTaskTrees = (oldArray, newArray) => {\n        if(oldArray.length !== newArray.length){\n            return false;\n        }\n        for(let i = 0; i < oldArray.length; i++){\n            if(oldArray[i].comment !== newArray[i].comment){\n                return false;\n            }\n            if(oldArray[i].commentOperator !== newArray[i].commentOperator){\n                return false;\n            }\n            if(oldArray[i].completed !== newArray[i].completed){\n                return false;\n            }\n            if(oldArray[i].display_params !== newArray[i].display_params){\n                return false;\n            }\n            if(oldArray[i].original_params !== newArray[i].original_params){\n                return false;\n            }\n            if(oldArray[i].status !== newArray[i].status){\n                return false;\n            }\n            if(oldArray[i].timestamp !== newArray[i].timestamp){\n                return false;\n            }\n            if(oldArray[i].responses_aggregate.aggregate.count !== newArray[i].responses_aggregate.aggregate.count){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_blocked !== newArray[i].opsec_pre_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_bypassed !== newArray[i].opsec_pre_bypassed){\n                return false;\n            }\n            if(oldArray[i].opsec_post_blocked !== newArray[i].opsec_post_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_post_bypassed !== newArray[i].opsec_post_bypassed){\n                return false;\n            }\n            if(oldArray[i].tasks.length !== newArray[i].tasks.length){\n                return false;\n            }\n        }\n        return true;\n    }\n    const subscriptionDataCallback = useCallback( ({subscriptionData}) => {\n        if(!fetched){\n            setFetched(true);\n        }\n        //console.log(subscriptionData);\n        const oldLength = taskingDataRef.current.task.length;\n        const mergedData = subscriptionData.data.task.reduce( (prev, cur) => {\n            const index = prev.findIndex(element => element.id === cur.id);\n            if(index > -1){\n                // need to update an element\n                const updated = prev.map( (element) => {\n                    if(element.id === cur.id){\n                        return cur;\n                    }else{\n                        return element;\n                    }\n                });\n                return updated;\n            }else{\n                return [...prev, cur];\n            }\n        }, [...taskingDataRef.current.task]);\n        mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n        if(!equalTaskTrees(taskingDataRef.current.task, mergedData)){\n            setTaskingData({task: mergedData});\n        }\n        if(mergedData.length > oldLength){\n            setCanScroll(true);\n        }     \n        if(mergedData.length > taskLimit){\n            setTaskLimit(mergedData.length);\n        }\n    }, [fetched, setFetched, setCanScroll, taskLimit])\n    useSubscription(getTaskingQuery, {\n        variables: {callback_id: tabInfo.callbackID, fromNow:fromNow, limit: taskLimit},\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"no-cache\",\n        onSubscriptionData: subscriptionDataCallback});\n    const scrollToBottom = useCallback( () => {\n        if(taskingData && messagesEndRef.current){\n            messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n        }\n      }, [taskingData, messagesEndRef]);\n    useLayoutEffect( () => {\n        if(canScroll){\n            scrollToBottom();\n            setCanScroll(false);\n        }\n    }, [canScroll, scrollToBottom]);\n    const [getInfiniteScrollTasking, {loading: loadingMore}] = useLazyQuery(getNextBatchTaskingQuery, {\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: (data) => {\n            let foundNew = false;\n            if(data.callback.length === 0){\n                onCloseTab(tabInfo);\n                return;\n            }\n            const mergedData = data.task.reduce( (prev, cur) => {\n                const index = prev.findIndex(element => element.id === cur.id);\n                if(index > -1){\n                    // need to update an element\n                    const updated = prev.map( (element) => {\n                        if(element.id === cur.id){\n                            return cur;\n                        }else{\n                            return element;\n                        }\n                    });\n                    return updated;\n                }else{\n                    foundNew = true;\n                    return [...prev, cur];\n                }\n            }, [...taskingData.task]);\n            mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n            setTaskingData({task: mergedData});    \n            if(!foundNew){\n                setFetchedAllTasks(true);\n            }else{\n                if(data.task.length < fetchLimit){\n                    setFetchedAllTasks(true);\n                }else{\n                    setFetchedAllTasks(false);\n                }\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    useEffect( () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n        setCanScroll(true);\n    }, [])\n    const loadMoreTasks = () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n    }\n    const onSubmitCommandLine = (message, cmd, parsed, force_parsed_popup, cmdGroupNames, previousTaskingLocation) => {\n        //console.log(message, cmd, parsed);\n        let params = message.split(\" \");\n        delete params[0];\n        params = params.join(\" \").trim();\n        let newTaskingLocation = \"parsed_cli\";\n        if(previousTaskingLocation.includes(\"modal\")){\n            newTaskingLocation = \"modal_modified\"\n        }else if(previousTaskingLocation.includes(\"browserscript\")){\n            newTaskingLocation = \"browserscript_modified\";\n        }\n        if(cmd.commandparameters.length === 0){\n            // if there are no parameters, just send whatever the user types along\n            onCreateTask({callback_id: tabInfo.callbackID, command: cmd.cmd, params: params, parameter_group_name: \"Default\"});\n        }else{\n            // check if there's a \"file\" component that needs to be displayed\n            const fileParamExists = cmd.commandparameters.find(param => param.parameter_type === \"File\" && cmdGroupNames.includes(param.parameter_group_name));\n            let missingRequiredPrams = false;\n            if(cmdGroupNames.length === 1){\n                const missingParams = cmd.commandparameters.filter(param => param.required && param.parameter_group_name === cmdGroupNames[0] && !(param.cli_name in parsed));\n                if(missingParams.length > 0){\n                    missingRequiredPrams = true;\n                }\n            }else if(cmdGroupNames > 1 && !force_parsed_popup){\n                // need to force a popup because the tasking is ambiguous\n                force_parsed_popup = true;\n            }\n            if(fileParamExists || force_parsed_popup || missingRequiredPrams){\n                //need to do a popup\n                if(cmdGroupNames.length > 0){\n                    setCommandInfo({...cmd, \"parsedParameters\": parsed, groupName: cmdGroupNames[0]});\n                }else{\n                    setCommandInfo({...cmd, \"parsedParameters\": parsed});\n                }\n                setOpenParametersDialog(true);\n                return;\n            }else{\n                delete parsed[\"_\"];\n                onCreateTask({callback_id: tabInfo.callbackID, \n                    command: cmd.cmd, \n                    params: JSON.stringify(parsed), \n                    tasking_location: newTaskingLocation, \n                    original_params: params, \n                    parameter_group_name: cmdGroupNames[0]});\n            }            \n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files, selectedParameterGroup) => {\n        setOpenParametersDialog(false);\n        onCreateTask({callback_id: tabInfo.callbackID, command: cmd, params: parameters, files: files, tasking_location: \"modal\", parameter_group_name: selectedParameterGroup});\n    }\n    const onCreateTask = ({callback_id, command, params, files, tasking_location, original_params, parameter_group_name}) => {\n        if(selectedToken.id !== undefined){\n            createTask({variables: {callback_id, command, params, files, token_id: selectedToken.TokenId, tasking_location, original_params, parameter_group_name}});\n        }else{\n            createTask({variables: {callback_id, command, params, files, tasking_location, original_params, parameter_group_name}});\n        }\n    }\n    const onSubmitFilter = (newFilter) => {\n        setFilterOptions(newFilter);\n    }\n    const changeSelectedToken = (token) => {\n        if(token === \"Default Token\"){\n            setSelectedToken(\"Default Token\");\n            return;\n        }\n        if(token.TokenId !== selectedToken.TokenId){\n            setSelectedToken(token);\n        }\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            {!fetchedAllTasks && <Tooltip title=\"Fetch Older Tasks\"> \n                <IconButton onClick={loadMoreTasks} variant=\"contained\" color=\"primary\"  ><AutorenewIcon /></IconButton>\n                </Tooltip>}\n            {!fetched && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n            {loadingMore && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n            {\n                taskingData.task.map( (task) => (\n                    <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} \n                        filterOptions={filterOptions}/>\n                ))\n            }\n            </div>\n            <div ref={messagesEndRef} />\n        <CallbacksTabsTaskingInput onSubmitFilter={onSubmitFilter} onSubmitCommandLine={onSubmitCommandLine} changeSelectedToken={changeSelectedToken}\n            filterOptions={filterOptions} callback_id={tabInfo.callbackID} callback_os={tabInfo.os} />\n        {openParametersDialog && \n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                onClose={()=>{setOpenParametersDialog(false);}} \n                innerDialog={<TaskParametersDialog command={commandInfo} callback_id={tabInfo.callbackID} \n                    payloadtype_id={tabInfo.payloadtype_id} operation_id={tabInfo.operation_id} \n                    onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} \n                    />}\n            />\n        }\n            \n    </MythicTabPanel>\n    )\n}","import React  from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {ExpandedCallbackSideDetails} from './ExpandedCallbackSideDetails';\nimport  {useParams} from \"react-router-dom\";\nimport {CallbacksTabsTaskingPanel} from '../Callbacks/CallbacksTabsTasking';\nimport { snackActions } from '../../utilities/Snackbar';\n\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    last_checkin\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n    callbacktokens(where: {deleted: {_eq: false}}) {\n      token {\n        TokenId\n        id\n        User\n        description\n      }\n      callback {\n        id\n      }\n      id\n    }\n  }\n}\n `;\n\n\nexport function ExpandedCallback(props){\n    \n    const {callbackId} = useParams();\n    const [callback, setCallbacks] = React.useState({\"payload\": {\"payloadtype\": {\"ptype\": \"\"}}, \"callbacktokens\": []});\n    const [tabInfo, setTabInfo] = React.useState({callbackID: parseInt(callbackId)});\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callbackId}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(subscriptionData.data.callback_by_pk === null){\n            snackActions.error(\"Unknown Callback\");\n            return;\n          }\n          setCallbacks(subscriptionData.data.callback_by_pk);\n          setTabInfo({tabID: \"interact\", tabType: \"interact\", callbackID: parseInt(callbackId), \n          payloadtype: subscriptionData.data.callback_by_pk[\"payload\"][\"payloadtype\"][\"ptype\"],\n          payloadDescription: subscriptionData.data.callback_by_pk[\"payload\"][\"tag\"],\n          callbackDescription: subscriptionData.data.callback_by_pk[\"description\"],\n          os: subscriptionData.data.callback_by_pk[\"payload\"][\"os\"]});\n        }\n    });\n\n    return (\n        <div style={{width: \"100%\", height: \"100%\", maxHeight: \"100%\", display: \"flex\", flexDirection: \"row\"}}>\n          {tabInfo.payloadtype !== undefined ? (\n            <React.Fragment>\n              <ExpandedCallbackSideDetails callback={callback} />\n              <CallbacksTabsTaskingPanel style={{height:`calc(${96}vh)`, maxHeight:`calc(${96}vh)`, width:\"69%\", maxWidth: \"69%\", position: \"absolute\", overflow: \"auto\", display: \"inline-flex\", flexDirection: \"column\"}} \n                tabInfo={tabInfo} callbacktokens={callback.callbacktokens}/>\n            </React.Fragment>\n          ) : (\n            <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>Fetching Callback</div>\n          )}\n            \n        </div>\n    );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { red } from '@material-ui/core/colors';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: `100%`,\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n}));\n\nexport function QuickStartCard() {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  return (\n    <Card className={classes.root} elevation={5}>\n      <CardHeader\n        avatar={\n          <Avatar className={classes.avatar}>\n            \n          </Avatar>\n        }\n        title=\"Mythic Quick Start Guide\"\n        subheader=\"Expand this section to learn how to: Generate a Payload, Download the Payload, Get To Callbacks\"\n        style={{paddingBottom: 0, marginBottom: 0}}\n      />\n      <CardActions styl={{padding: 0, margin: 0}}>\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent style={{margin: 0, paddingTop: 0}}>\n          <ol>\n            <li>\n              Create a payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/createpayload\"}>Create -> Create Payload</Link>\n              <ul>\n                <li>Select Desired OS</li>\n                <li>Select Payload Type and Supply Build Parameters</li>\n                <li>Select Commands You Want Stamped Into The Agent</li>\n                <li>Select C2 Profiles and Fill Out Parameters</li>\n                <li>Name Your Payload</li>\n                <li>Provide a Description</li>\n                <li>Build Your Payload</li>\n              </ul>\n            </li>\n            <li>Download Your Payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/payloads\"}>Operational Data -> Payloads</Link></li>\n            <li>Run Your payload\n              <ul>\n                <li>For More Information About Your Agent, Check Out The <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/docs/agents\"}>Internal Documentation</Link></li>\n              </ul>\n            </li>\n            <li>Interact With Your Agent At <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/callbacks\"}>Active Callbacks</Link></li>\n          </ol>\n        </CardContent>\n      </Collapse>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst GetC2ProfilesAndPayloadTypes = gql`\nquery GetC2AndPayloadType {\n  c2profile(where: {deleted: {_eq: false}}) {\n    name\n    id\n  }\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    id\n    payloadtypec2profiles {\n      c2profile {\n        name\n        id\n      }\n    }\n  }\n  wrappers: payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n      }\n    }\n  }\n}\n`;\n\nexport function AgentC2Overview(props){\n    const theme = useTheme();\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [payloadTypeRows, setPayloadTypeRows] = React.useState([]);\n    const [wrappers, setWrappers] = React.useState([]);\n    const { loading } = useQuery(GetC2ProfilesAndPayloadTypes, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const c2Headers = data.c2profile.map( (c2) => c2.name);\n        const payloadRows = data.payloadtype.map( (payload) => {\n          const payloadc2 = payload.payloadtypec2profiles.map( (c2) => {\n            return c2.c2profile.name;\n          })\n          return {ptype: payload.ptype, payloadtypec2profiles: payloadc2 };\n        });\n        c2Headers.sort();\n        payloadRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        const wrapperRows = data.wrappers.map( (payload) => {\n          const wrapped = payload.wrap_these_payload_types.map( (w) => {\n            return w.wrapped.ptype;\n          });\n          return {ptype: payload.ptype, wrapped}\n        });\n        wrapperRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        setWrappers(wrapperRows);\n        setC2Profiles(c2Headers);\n        setPayloadTypeRows(payloadRows);\n      },\n      onError: (data) => {\n\n      }\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    return (\n    <div style={{ marginTop: \"10px\", marginRight: \"5px\"}}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Agent / C2 Overview\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Table  size=\"small\">\n            <TableHead>\n                <TableRow hover>\n                    <TableCell></TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={c2}>{c2}</TableCell>\n                    ))}\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                {payloadTypeRows.map( (payload) => (\n                  <TableRow key={payload.ptype} hover>\n                    <TableCell>{payload.ptype}</TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={'payload' + c2}>\n                        {payload.payloadtypec2profiles.includes(c2) ? \n                        <Tooltip title={payload.ptype + \" supports \" + c2}>\n                            <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                        </Tooltip>\n                     : \"\"}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n        {wrappers.length > 0 && \n          <TableContainer component={Paper} className=\"mythicElement\" style={{marginTop: \"10px\"}}>   \n              <Table  size=\"small\">\n                  <TableHead>\n                      <TableRow hover>\n                          <TableCell></TableCell>\n                          {payloadTypeRows.map( (pt) => (\n                            <TableCell key={'wrapped' + pt.ptype}>{pt.ptype}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                      {wrappers.map( (payload) => (\n                        <TableRow key={'wrapper' + payload.ptype} hover>\n                          <TableCell>{payload.ptype}</TableCell>\n                          {payloadTypeRows.map( (wr) => (\n                            <TableCell key={'payload' + wr.ptype}>\n                              {payload.wrapped.includes(wr.ptype) ? \n                              <Tooltip title={payload.ptype + \" wraps \" + wr.ptype}>\n                                  <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                              </Tooltip>\n                          : \"\"}\n                            </TableCell>\n                          ))}\n                        </TableRow>\n                      ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        }\n      </div>\n    );\n} \n","import React from 'react';\nimport { QuickStartCard } from './QuickStartCard';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {AgentC2Overview} from './AgentC2Overview';\n\n\nexport function Home() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Welcome To Mythic\n      </Typography>\n    </Paper> \n    <QuickStartCard />\n    <AgentC2Overview />\n  </div>\n  );\n}\n","import { Route, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../cache';\n\n\nexport function LoggedInRoute({component, ...rest}){\n    const me = useReactiveVar(meState);\n    return (\n        <Route {...rest} render={(props) => (\n            me.loggedIn && me.user ? (\n                //logged in\n                React.createElement(component, props)\n            ) : (\n                //not logged in\n                <Redirect to={{ \n                    pathname: '/new/login',\n                    state: { from: props.location }\n                }} />\n            )\n        )} />\n    )\n}\n","import React from 'react';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport ComputerIcon from '@material-ui/icons/Computer';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {useTheme} from '@material-ui/core/styles';\nimport {FixedSizeTree} from 'react-vtree';\nimport Autosizer from 'react-virtualized-auto-sizer';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      width: '99%',\n      marginTop: \"3px\",\n      marginBottom: \"2px\",\n      marginLeft: \"3px\",\n      marginRight: \"0px\",\n      height: \"auto\",\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      whiteSpace: \"pre-line\"\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    taskAndTimeDisplay: {\n      fontSize: theme.typography.pxToRem(12),\n      color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    secondaryHeadingExpanded: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      display: \"block\", \n      overflow: \"auto\",\n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"break-word\"\n    },\n    icon: {\n      verticalAlign: 'middle',\n      height: 20,\n      width: 20,\n    },\n    details: {\n      alignItems: 'center',\n    },\n    column: {\n      padding: \"0 5px 0 0\",\n      display: \"inline-block\",\n      margin: 0,\n      height: \"auto\"\n    },\n    paper: {\n        width: '100%',\n        marginBottom: theme.spacing(2),\n      },\n      table: {\n        minWidth: 750,\n      },\n      visuallyHidden: {\n        border: 0,\n        clip: 'rect(0 0 0 0)',\n        height: 1,\n        margin: -1,\n        overflow: 'hidden',\n        padding: 0,\n        position: 'absolute',\n        top: 20,\n        width: 1,\n      },\n  }));\n\nconst getNodeData = (node, nestingLevel, fetchFolderData, setTableData, theme) => ({\n    data: {\n        id: node.id.toString(), // mandatory\n        isLeaf: node.filebrowserobjs === undefined || Object.keys(node.filebrowserobjs).length === 0,\n        isOpenByDefault: true, //mandatory\n        name: node.name_text,\n        nestingLevel,\n        fetchFolderData,\n        setTableData,\n        theme,\n        ...node\n    },\n    nestingLevel,\n    node\n});\nexport const CallbacksTabsFileBrowserTree = ({treeRoot, fetchFolderData, setTableData}) => {\n    const theme = useTheme();\n    function* treeWalker() {\n        for(let i = 0; i < treeRoot.length; i++){\n            yield getNodeData(treeRoot[i], 0, fetchFolderData, setTableData, theme);\n        }\n        while(true){\n            const parent = yield;\n           for( const value of Object.values(parent.node.filebrowserobjs)){\n                if(value.is_file){continue}\n                yield getNodeData(value, parent.nestingLevel + 1, fetchFolderData, setTableData, theme);\n           }\n        }\n    }\n    return (\n        treeRoot.length === 0 ? (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No File Browser Data Collected</div>) : (\n            <Autosizer>\n                {({height, width}) => (\n                    <FixedSizeTree\n                        treeWalker={treeWalker}\n                        height={height }\n                        width={width - 10}\n                        itemSize={30}\n                        overscanCount={20}\n                        async\n                        placeholder={<div>Loading....</div>}\n                    >\n                        {FileBrowserNode}\n                    </FixedSizeTree>\n                )}\n            </Autosizer>\n        )\n    )\n}\nconst FileBrowserNode = ({data, isOpen, style, setOpen}) => {\n    \n    return (\n        <div style={{...style, \n                    width: \"calc(100vw)\", display: \"inline-flex\", overflow:\"auto\"}}>\n            {[...Array(data.nestingLevel)].map((o, i) => (\n                <div key={\"folder\" + data.id + \"lines\" + i} style={{borderLeft: `1px dashed ${fade(data.theme.palette.text.primary, 0.4)}`, marginLeft: 15, paddingRight: 15, height: \"100%\", display: \"inline-block\"}}></div>\n            ))}\n            <FileBrowserRow filebrowserobj={data} isOpen={isOpen} setOpen={setOpen}/>\n        </div>\n    )\n    \n}\nconst FileBrowserRow = (props) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const fetchItems = () => {\n        snackActions.info(\"fetching elements...\", {persist: true});\n        props.filebrowserobj.fetchFolderData(props.filebrowserobj);\n        if(!props.isOpen){\n            props.filebrowserobj.fetchFolderData(props.filebrowserobj);\n        }\n        //props.setOpen(!props.isOpen);\n        //props.toggleSelection(props.filebrowserobj.id, !isOpen);\n    }\n    const setTableData = () => {\n        props.filebrowserobj.setTableData(props.filebrowserobj);\n    }\n    const clickIcon = (evt) => {\n        evt.stopPropagation();\n        fetchItems();\n        if(props.isOpen){\n            props.setOpen(!props.isOpen);\n        }else{\n            fetchItems();\n            props.setOpen(!props.isOpen);\n        }\n    }\n    return (\n        <Paper className={classes.root} elevation={5} style={{backgroundColor: theme.body, color: theme.text, alignItems: \"center\", display: \"flex\"}} onClick={setTableData}>\n            {\n                props.filebrowserobj.parent_id === null ? (<ComputerIcon style={{marginLeft: \"3px\", marginRight:\"5px\"}} />) :(\n                props.filebrowserobj.is_file ? (<DescriptionIcon style={{marginLeft: \"3px\", marginRight:\"5px\"}} />) : (\n                    props.isOpen ? (<FolderOpenIcon style={{marginLeft: \"3px\", marginRight:\"5px\", color: props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 0 || props.filebrowserobj.success !== null ? theme.folderColor : \"grey\"}} onClick={clickIcon}/>) : (<FolderIcon style={{paddingTop: \"5px\", marginLeft: \"3px\", marginRight:\"5px\"}} onClick={clickIcon}/>)\n                )\n                )}\n            {props.filebrowserobj.nestingLevel > 0 && props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 99 ? (<Tooltip title=\"Number of known children\">\n                <Badge style={{left: -50}} max={99}\n                    badgeContent={props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count} color=\"primary\" anchorOrigin={{vertical: \"bottom\", horizontal: \"left\"}}></Badge>\n                </Tooltip>) : (null)}\n            <Typography style={{color:props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 0 ||  props.filebrowserobj.success !== null ? theme.palette.text.primary : theme.palette.text.secondary}}>\n                {props.filebrowserobj.parent_id === null ? (props.filebrowserobj.host) : (props.filebrowserobj.name_text)}\n            </Typography>\n            \n            {props.filebrowserobj.success === true && props.filebrowserobj.nestingLevel > 0 ? (\n                <Tooltip title=\"Successfully listed contents of folder\">\n                    <CheckCircleIcon fontSize=\"small\" style={{ color: theme.palette.success.main}}/>\n                </Tooltip>) : (\n                props.filebrowserobj.success === false && props.filebrowserobj.nestingLevel > 0 ? (\n                    <Tooltip title=\"Failed to list contents of folder\">\n                        <ErrorIcon fontSize=\"small\" style={{ color: theme.palette.error.main}} />\n                    </Tooltip>\n                ) : (\n                    null\n                )\n            )}\n        </Paper>\n    )\n}","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport IconButton from '@material-ui/core/IconButton';\n\nexport function DownloadHistoryDialog(props){\n   const [history, setHistory] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    setHistory(props.value);\n   }, [props.value]);\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"5rem\"}}>Download</TableCell>\n                          <TableCell>Time</TableCell>\n                          <TableCell>Task</TableCell>\n                          <TableCell>Comment</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {history.map( (hist) => (\n                      <TableRow key={'hist' + hist.id}>\n                        <TableCell >{hist.complete ? (\n                          <IconButton href={\"/api/v1.4/files/download/\" + hist.agent_file_id} style={{color: theme.palette.success.main}}><GetAppIcon /></IconButton>\n                        ) : (hist.chunks_received + \"/\" + hist.total_chunks)}</TableCell>\n                        <TableCell>{hist.timestamp}</TableCell>\n                        <TableCell>{hist.task.id}</TableCell>\n                        <TableCell>{hist.comment}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n          </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useMutation, useLazyQuery, gql } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog, MythicModifyStringDialog, MythicViewJSONAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Button} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {DownloadHistoryDialog} from './DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { Typography } from '@material-ui/core';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\n\nconst getPermissionsDataQuery = gql`\nquery getPermissionsQuery($filebrowserobj_id: Int!){\n    filebrowserobj_by_pk(id: $filebrowserobj_id){\n        id\n        permissions\n    }\n}\n`;\nconst getFileDownloadHistory = gql`\nquery getFileDownloadHistory($filebrowserobj_id: Int!){\n    filebrowserobj_by_pk(id: $filebrowserobj_id){\n        filemeta {\n            id\n            comment\n            agent_file_id\n            chunks_received\n            complete\n            total_chunks\n            timestamp\n            task {\n                id\n                comment\n            }\n        }\n    }\n}\n`;\nconst updateFileComment = gql`\nmutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!){\n    update_filebrowserobj_by_pk(pk_columns: {id: $filebrowserobj_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n    const DisplayData = () => {\n        switch(columnData.format){\n        case \"string\":\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n        case \"name\":\n            return <FileBrowserTableRowNameCell cellData={rowData[dataKey]} rowData={rowData} />\n        case \"size\":\n            return <FileBrowserTableRowSizeCell cellData={rowData[dataKey]} />\n        case \"button\":\n            return <FileBrowserTableRowActionCell rowData={rowData} onTaskRowAction={columnData.onTaskRowAction}/>\n        default:\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData} />\n        }\n    };\n    return (\n        DisplayData()\n    )\n}\nexport const CallbacksTabsFileBrowserTable = (props) => {\n    const [allData, setAllData] = React.useState([]);\n    const widthRef = React.useRef(null);\n    const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n    const [sortBy, setSortBy] = React.useState(\"name_text\");\n    const [columnWidths, setColumnWidths] = React.useState({\n        actions: .065,\n        name_text: .45,\n        size: .08,\n        modify_time: .18,\n        comment: .2,\n        \n    })\n    const [columns, setColumns] = React.useState([]);\n    \n    const sortTable = ({sortBy, sortDirection}) => {\n        const tmpData = [...allData];\n        const sortType = columns.filter( h => h.dataKey === sortBy)[0][\"columnData\"][\"format\"];\n        if(sortType === \"number\" || sortType === \"size\"){\n          tmpData.sort((a, b) => (parseInt(a[sortBy]) > parseInt(b[sortBy]) ? 1 : -1));\n        }else if(sortType === \"date\"){\n          tmpData.sort((a,b) => ( (new Date(a[sortBy])) > (new Date(b[sortBy])) ? 1: -1));\n        }else{\n          tmpData.sort( (a, b) => a[sortBy].toLowerCase() > b[sortBy].toLowerCase() ? 1 : -1);\n        }\n        if(sortDirection === \"DESC\"){\n          tmpData.reverse();\n        }\n        setAllData([...tmpData]);\n        setSortBy(sortBy);\n        setSortDirection(sortDirection);\n    \n    };\n    const rowGetter = ({index}) => {\n        return allData[index];\n    };\n    const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const prevWidths = {...columnWidths};\n        const percentDelta = deltaX / widthRef.current.offsetWidth;\n        let nextHeader = \"\";\n        let getNext = false;\n        for(const key of Object.keys(columnWidths)){\n            if(getNext){\n                nextHeader = key;\n                break;\n            }else if(key === dataKey){\n                getNext = true;\n            }\n        }\n        if(nextHeader === \"\"){\n            console.log(\"next header not found\");\n            return;\n        }\n        const updatedWidths = {...prevWidths, \n            [dataKey]: prevWidths[dataKey] + percentDelta,\n            [nextHeader]: prevWidths[nextHeader] - percentDelta\n        };\n        setColumnWidths(updatedWidths);\n    }, [columnWidths]);\n    const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n        return (\n          <React.Fragment key={\"header\" + dataKey}>\n            <span style={{display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n              {label}\n              {sortBy === dataKey ? (\n                sortDirection === \"ASC\" ? (\n                  <ArrowDownwardIcon />\n                ) : (\n                  <ArrowUpwardIcon />\n                )\n              ) :(null) }\n            </span>\n            {columnData.format !== \"button\" && label !== \"Comment\" && \n                <Draggable\n                    axis=\"x\"\n                    defaultClassName=\"DragHandle\"\n                    defaultClassNameDragging=\"DragHandleActive\"\n                    onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n                    position={{x:0}}\n                    zIndex={999}\n                    >\n                    <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n                </Draggable>\n            }\n            \n          </React.Fragment>\n        )\n      }, [resizeRow, columns]);\n    const onRowDoubleClick = ({ rowData}) => {\n        if(rowData.is_file){\n            return;\n        }\n        snackActions.info(\"Fetching contents of folder...\");\n        props.onRowDoubleClick(rowData);\n    }\n    useEffect( () => {\n        setColumns([\n            {columnData: {format: \"button\", onTaskRowAction: props.onTaskRowAction}, dataKey: 'actions', label: \"Actions\", \n                cellRenderer: CellRenderer, width: columnWidths.actions * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"name\"}, dataKey: 'name_text', label: \"Name\", \n                cellRenderer: CellRenderer, width: columnWidths.name_text * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"size\"}, dataKey: 'size', label: \"Size\", \n                cellRenderer: CellRenderer, width: columnWidths.size * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"date\"}, dataKey: 'modify_time', label: \"Last Modified\", \n                cellRenderer: CellRenderer,  width: columnWidths.modify_time * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'comment',  label: \"Comment\", \n                cellRenderer: CellRenderer, width: columnWidths.comment * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            \n        ])\n    }, [columnWidths, props.onTaskRowAction]);\n\n    useEffect( () => {\n        //console.log(\"setting selected folder\", props.selectedFolder);\n        if(props.showDeletedFiles){\n            setAllData([...props.selectedFolder]);\n        }else{\n            const filteredData = props.selectedFolder.filter( f => !f.deleted );\n            setAllData([...filteredData]);\n        }\n        \n    }, [props.selectedFolder, props.showDeletedFiles]);\n    \n    return (\n        <div ref={widthRef} style={{width: \"100%\", height: \"90%\", overflow: 'hidden'}}>\n            <AutoSizer>\n                {({height, width}) => (\n                    <Table\n                        headerHeight={25}\n                        rowCount={allData.length}\n                        rowGetter={ rowGetter }\n                        rowHeight={35}\n                        height={height}\n                        width={width}\n                        sort={sortTable}\n                        sortBy={sortBy}\n                        onRowDoubleClick={onRowDoubleClick}\n                        sortDirection={sortDirection}\n                        >\n                        {columns.map( (col) => (\n                            <Column key={\"col\" + col.dataKey} {...col} />\n                        ))}\n                    </Table>\n                )}\n            </AutoSizer>\n        </div>\n    )\n}\nconst FileBrowserTableRowNameCell = ({cellData, rowData}) => {\n    const theme = useTheme();\n    return (\n        <div style={{alignItems: \"center\", display: \"flex\", textDecoration: rowData.deleted ? 'line-through': ''}}>\n            {rowData.is_file ? (<DescriptionIcon style={{marginRight: \"5px\"}}/>) : (<FolderOpenIcon style={{marginRight: \"5px\", color: rowData.filebrowserobjs_aggregate.aggregate.count > 0 || rowData.success !== null ? theme.folderColor : \"grey\"}}/>)}\n            {rowData.filemeta.length > 0 ? (<GetAppIcon style={{color: theme.palette.success.main}}/>) : (null)}\n            <Typography style={{color:rowData.filebrowserobjs_aggregate.aggregate.count > 0 ||  rowData.success !== null ? theme.palette.text.primary : theme.palette.text.secondary}}>\n                {cellData}\n            </Typography>\n            {rowData.success === true ? (\n                <Tooltip title=\"Successfully listed contents of folder\">\n                    <CheckCircleIcon fontSize=\"small\" style={{ color: theme.palette.success.main}}/>\n                </Tooltip>) : (\n                rowData.success === false ? (\n                    <Tooltip title=\"Failed to list contents of folder\">\n                        <ErrorIcon fontSize=\"small\" style={{ color: theme.palette.error.main}} />\n                    </Tooltip>\n                ) : (\n                    null\n                )\n            )}\n        </div>\n    )\n}\nconst FileBrowserTableRowStringCell = ({cellData}) => {\n    return (\n            cellData\n    )\n}\nconst FileBrowserTableRowSizeCell = ({cellData}) => {\n    const getStringSize = () => {\n        try{\n            // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n            let bytes = parseInt(cellData);\n            if (cellData === '') return '';\n            if (bytes === 0) return '0 Bytes';\n            const decimals = 2;\n            const k = 1024;\n            const dm = decimals < 0 ? 0 : decimals;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n        }catch(error){\n            return cellData;\n        }\n    }\n    return (\n        <div>\n            {getStringSize(cellData)}\n        </div>\n    )\n}\nconst FileBrowserTableRowActionCell = ({rowData, onTaskRowAction}) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [fileCommentDialogOpen, setFileCommentDialogOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState(\"\");\n    const [downloadHistory, setDownloadHistory] = React.useState([]);\n    const [getPermissions] = useLazyQuery(getPermissionsDataQuery, {\n        onCompleted: (data) => {\n            setPermissionData(data.filebrowserobj_by_pk.permissions);\n            if(data.filebrowserobj_by_pk.permissions !== \"\"){\n                setViewPermissionsDialogOpen(true);\n            }else{\n                snackActions.warning(\"No permission data available\");\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getHistory] = useLazyQuery(getFileDownloadHistory, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if(data.filebrowserobj_by_pk.filemeta.length === 0){\n                snackActions.warning(\"File has no download history\");\n            }else{\n                setDownloadHistory(data.filebrowserobj_by_pk.filemeta);\n                setFileHistoryDialogOpen(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    })\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {filebrowserobj_id: rowData.id, comment: comment}})\n    }\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption){\n            case \"A\":\n                optionsA[index].click(event);\n                break;\n            case \"B\":\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n    };\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(rowData.full_path_text);\n        if(result){\n          snackActions.success(\"Copied text!\");\n        }else{\n          snackActions.error(\"Failed to copy text\");\n        }\n    }\n    const optionsA = [{name: 'View Permissions', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getPermissions({variables: {filebrowserobj_id: rowData.id}});\n                    }},\n                    {name: 'Download History', icon: <HistoryIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getHistory({variables: {filebrowserobj_id: rowData.id}});\n                    }},\n                    {name: 'Edit Comment', icon: <EditIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        setFileCommentDialogOpen(true);\n                    }},\n                    {name: 'Copy Path to Clipboard', icon: <FileCopyOutlinedIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        copyToClipboard();\n                    }},\n    ];\n    const optionsB = [{name: 'Task File Listing', icon: <ListIcon style={{paddingRight: \"5px\", color: theme.palette.warning.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"file_browser:list\"\n                        });\n                    }},\n                    {name: 'Task Download', icon: <GetAppIcon style={{paddingRight: \"5px\", color: theme.palette.success.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"file_browser:download\"\n                        });\n                    }},\n                    {name: 'Task File Removal', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"file_browser:remove\"\n                        });\n                        \n                    }},\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{padding:0}} \n                size=\"small\"\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup=\"menu\"\n                onClick={handleDropdownToggle}\n                color=\"primary\"\n                variant=\"contained\"\n                ref={dropdownAnchorRef}\n            >\n                Actions\n            </Button>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4000}}>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                {...TransitionProps}\n                style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n                >\n                <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList id=\"split-button-menu\">\n                        {optionsA.map((option, index) => (\n                        <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(\"A\", event, index)}\n                        >\n                            {option.icon}{option.name}\n                        </MenuItem>\n                        ))}\n                        <Divider />\n                        {optionsB.map((option, index) => (\n                        <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(\"B\", event, index)}\n                        >\n                            {option.icon}{option.name}\n                        </MenuItem>\n                        ))}\n                    </MenuList>\n                    </ClickAwayListener>\n                </Paper>\n                </Grow>\n            )}\n            </Popper>\n            {fileCommentDialogOpen && \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileCommentDialogOpen} \n                    onClose={()=>{setFileCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit File Browser Comment\" onSubmit={onSubmitUpdatedComment} value={rowData.comment} onClose={()=>{setFileCommentDialogOpen(false);}} />}\n                />\n            }\n            {viewPermissionsDialogOpen &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title=\"View Permissions Data\" leftColumn=\"Permission\" rightColumn=\"Value\" value={permissionData} onClose={()=>{setViewPermissionsDialogOpen(false);}} />}\n                />\n            }\n            {fileHistoryDialogOpen &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileHistoryDialogOpen} \n                    onClose={()=>{setFileHistoryDialogOpen(false);}} \n                    innerDialog={<DownloadHistoryDialog title=\"Download History\" value={downloadHistory} onClose={()=>{setFileHistoryDialogOpen(false);}} />}\n                />\n            }\n            \n        </React.Fragment>\n    )\n}\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect, useCallback} from 'react';\nimport {gql, useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useTheme} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsFileBrowserTree} from './CallbacksTabsFileBrowserTree';\nimport {CallbacksTabsFileBrowserTable} from './CallbacksTabsFileBrowserTable';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\n\nconst fileDataFragment = gql`\nfragment fileObjData on filebrowserobj {\n    access_time\n    comment\n    deleted\n    filemeta {\n        id\n    }\n    host\n    id\n    is_file\n    modify_time\n    parent_id\n    size\n    success\n    task {\n        callback {\n            id\n        }\n        operator {\n            id\n        }\n    }\n    full_path_text\n    name_text\n    timestamp\n    parent_path_text\n    filebrowserobjs_aggregate {\n        aggregate {\n            count\n        }   \n    }\n}\n`;\nconst rootFileQuery = gql`\n${fileDataFragment}\nquery myRootFolderQuery($operation_id: Int!) {\n    filebrowserobj(where: {operation_id: {_eq: $operation_id}, parent_id: {_is_null: true}}) {\n      ...fileObjData\n    }\n  }\n`;\nconst folderQuery = gql`\n${fileDataFragment}\nquery myFolderQuery($filebrowserobj_id: Int!, $operation_id: Int!) {\n    filebrowserobj(where: {parent_id: {_eq: $filebrowserobj_id}, operation_id: {_eq: $operation_id}}, order_by: {is_file: asc, name: asc}) {\n      ...fileObjData\n    }\n  }\n`;\nconst fileDataSubscription = gql`\n${fileDataFragment}\nsubscription liveData($now: timestamp!, $operation_id: Int!){\n    filebrowserobj(distinct_on: id, order_by: {id: desc}, where: {timestamp: {_gt: $now}, operation_id: {_eq: $operation_id}}, limit: 1){\n        ...fileObjData\n    }\n}\n`;\nconst getDeltaFilesQuery = gql`\n${fileDataFragment}\nquery myDeltaFilesQuery($lastTime: timestamp!, $now: timestamp!, $operation_id: Int!){\n    filebrowserobj(distinct_on: id, order_by: {id: desc}, where: {_and: [{timestamp: {_gte: $lastTime}}, {timestamp: {_lte: $now}}], operation_id: {_eq: $operation_id}}){\n        ...fileObjData\n    }\n}\n`;\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $payloadtype: String!, $ui_feature: String!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_iregex: $ui_feature}}}) {\n    id\n    command {\n      cmd\n      help_cmd\n      description\n      id\n      needs_admin\n      payload_type_id\n      attributes\n      commandparameters {\n        id\n        type \n      }\n      supported_ui_features\n    }\n  }\n  command(where: {payloadtype: {ptype: {_eq: $payloadtype}}, script_only: {_eq: true}, deleted: {_eq: false}, supported_ui_features: {_iregex: $ui_feature }}){\n      id\n      cmd\n      help_cmd\n      description\n      needs_admin\n      attributes\n      payload_type_id\n      commandparameters {\n          id\n          type\n      }\n      supported_ui_features\n    }\n}\n`;\nconst getCallbackDataQuery = gql`\nquery getCallbackDataQuery($callback_id: Int!){\n    callback_by_pk(id: $callback_id){\n        payload {\n            os\n            payloadtype {\n              ptype\n              id\n            }\n            tag\n            id\n        }\n        id\n        operation_id\n        host\n        active\n    }\n}\n`;\n\nexport function CallbacksTabsFileBrowserLabel(props){\n    const [description, setDescription] = React.useState(\"File Browser: \" + props.tabInfo.callbackID);\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else{\n            setDescription(\"File Browser: \" + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const CallbacksTabsFileBrowserPanel = ({index, value, tabInfo}) =>{\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const selectedFolderDataRef = React.useRef({});\n    const [selectedFolderData, setSelectedFolderData] = React.useState({task: {callback: {id: tabInfo.callbackID}}, host: tabInfo.host, full_path_text: \".\"});\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState({});\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [searchCallback, setSearchCallback] = React.useState({});\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const [uiFeature, setUIFeature] = React.useState(\"\");\n    const currentCallbackIDSetInTable = React.useRef();\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const lastFetchedTime = React.useRef((new Date()).toISOString())\n    const [savedStateForConfirmDialog, setSavedStateForConfirmDialog] = React.useState({});\n    const [showDeletedFiles, setShowDeletedFiles] = React.useState(false);\n    const {subscribeToMore} = useQuery(rootFileQuery, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: (data) => {\n            const roots = data.filebrowserobj.reduce( (prev, cur) => {\n                for( let i = 0; i < prev.length; i++){\n                    if(prev[i][\"host\"] === cur.host){\n                        prev[i].filebrowserobjs.push({...cur, parent_id: cur.host, filebrowserobjs: []});\n                        return [...prev];\n                    }\n                }\n                return [...prev, {...cur, id: cur.host, filebrowserobjs: [{...cur,  parent_id: cur.host, filebrowserobjs: []}]} ]\n            }, []);\n            setFileBrowserRootsState(roots);\n        }, fetchPolicy: \"network-only\"\n    });\n    const [getFileDeltas] = useLazyQuery(getDeltaFilesQuery, {\n        onCompleted: (data) => {\n            let updatingData = [...fileBrowserRoots.current];\n            data.filebrowserobj.forEach( (obj) => {\n                let found = false;\n                if(obj.parent_id === null){\n                    // we could have a new host, a new root, or a n updated root\n                    let foundHost = false;\n                    updatingData.forEach( (root) => {\n                        if(root[\"host\"] === obj[\"host\"]){\n                            foundHost = true;\n                            //console.log(root, obj);\n                            root.filebrowserobjs.forEach( (rootEntry) => {\n                                if(rootEntry[\"name_text\"] === obj[\"name_text\"]){\n                                    found = true;\n                                    rootEntry.comment = obj.comment;\n                                    rootEntry.success = obj.success;\n                                    rootEntry.deleted = obj.deleted;\n                                    rootEntry.filemeta = obj.filemeta;\n                                }\n                            })\n                            \n                        }\n                    });\n                    if(!foundHost){\n                        found = false;\n                    }else if(foundHost && !found){\n                        found = true;\n                        // there's a host entry that matches obj, but this is a new root, so find the match again\n                        updatingData.forEach( (root) => {\n                            if(root[\"host\"] === obj[\"host\"]){\n                                root.filebrowserobjs.push({...obj, parent_id: obj[\"host\"], filebrowserobjs: []});\n                            }\n                        });\n                    }\n                }else{\n                    // parent_id is not null, so it's not a root entry\n                    updatingData.forEach( (root) => {\n                        if(root[\"host\"] === obj[\"host\"]){\n                            found = true;\n                            mergeData(root, obj.parent_id, [obj]);\n                        }\n                    });\n                }\n                if(!found && obj.parent_id === null){\n                    // add a new top-level host entry\n                    updatingData.push({...obj, id: obj[\"host\"], filebrowserobjs: [{...obj, parent_id: obj[\"host\"], filebrowserobjs: []}]});\n                }\n            });\n            setFileBrowserRootsState(updatingData);\n            //console.log(\"updating data\", updatingData, selectedFolderDataRef.current, data.filebrowserobj[0]);\n            if(data.filebrowserobj.length > 0 && selectedFolderDataRef.current.id !== undefined && ( data.filebrowserobj[0].parent_id === selectedFolderDataRef.current.id || ( selectedFolderDataRef.current.host === data.filebrowserobj[0].host) ) ){\n                // this means we got updated data for something in the folder we're currently looking at in the table, so we need to make sure to update the table\n                //console.log(\"updating table\");\n                setSelectedFolder(Object.values(selectedFolderDataRef.current.filebrowserobjs));\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        }\n    })\n    useEffect( () => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState])\n    useEffect( () => {\n        selectedFolderDataRef.current = selectedFolderData;\n    }, [selectedFolderData])\n    const [getFolderData] = useLazyQuery(folderQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"no-cache\",\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n            let found = false;\n            if(data.filebrowserobj.length === 0){\n                snackActions.dismiss();\n                if(selectedFolderData.success === null){\n                    snackActions.info(\"Folder hasn't been listed yet\");\n                }else{\n                    snackActions.info(\"Empty folder\");\n                }\n                setSelectedFolder(Object.values(selectedFolderData.filebrowserobjs));\n                return;\n            }\n            snackActions.dismiss();\n            snackActions.success(\"Fetched data\");\n            const newRoots = fileBrowserRootsState.map( (root) => {\n                if(data.filebrowserobj[0][\"host\"] === root[\"host\"]){\n                    // for each element we get back, add to this root\n                    let workingSet = {...root};\n                    found = true;\n                    mergeData(workingSet, data.filebrowserobj[0].parent_id, data.filebrowserobj);\n                    return workingSet;\n                }else{\n                    return {...root};\n                }\n            });\n            if(!found){\n                // we need to add this as a root element\n                newRoots.push(data.filebrowserobj[0]);\n                mergeData(data.filebrowserobj[0], data.filebrowserobj[0].parent_id, data.filebrowserobj);\n            }\n            //console.log(\"setting new roots\");\n            setFileBrowserRootsState(newRoots);\n            setSelectedFolder(Object.values(selectedFolderData.filebrowserobjs));\n        }\n    });\n    const [getCallbackData] = useLazyQuery(getCallbackDataQuery, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            if(data.callback_by_pk !== null){\n                if(data.callback_by_pk.active){\n                    setSearchCallback({...data.callback_by_pk, \"ui_feature\": \".*\" + uiFeature + \".*\", ...savedStateForConfirmDialog});\n                }else{\n                    snackActions.warning(\"That callback isn't active\");\n                }\n                \n            }else{\n                snackActions.warning(\"Failed to find that Callback\");\n            }\n            setSavedStateForConfirmDialog({});\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch callback data for the specified callback\");\n        }\n    });\n    const mergeData = useCallback( (search, parent_id, all_objects) => {\n        //merge the obj into fileBrowserRoots\n        //console.log('in mergeData');\n        // might need to do a recursive call\n        // if this is a folder with children, check the children\n        if(parent_id === search.id){\n            // iterate for each child we're trying to update/insert\n            //console.log(\"found parent, setting children\");\n            for(let i = 0; i < all_objects.length; i++){\n               if(search.filebrowserobjs[all_objects[i].id] === undefined){\n                search.filebrowserobjs[all_objects[i].id] = {...all_objects[i], filebrowserobjs: {}}\n               }else{\n                search.filebrowserobjs[all_objects[i].id] = {...all_objects[i], filebrowserobjs: search.filebrowserobjs[all_objects[i].id].filebrowserobjs}\n               }\n            }\n            //console.log(\"found parent, set children, returning\");\n            return true;\n        }\n        // this current search isn't all_object's parent, so check search's children for our parent\n       for(const [_, value] of Object.entries(search.filebrowserobjs)){\n           if(all_objects[0].parent_path_text.startsWith(value.full_path_text)){\n               let found = mergeData(value, parent_id, all_objects);\n               if(found){return true};\n           }\n       }\n        return false;\n    }, []);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (_, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + searchCallback.id);\n            }\n            setSelectedCommand({});\n            setSearchCallback({});\n            \n            setTaskInfo({});\n            setUIFeature(\"\");\n        },\n        onError: data => {\n            console.error(data);\n            setSelectedCommand({});\n            setSearchCallback({});\n            setTaskInfo({});\n            setUIFeature(\"\");\n        }\n    });\n    const [getCommandOptions] = useLazyQuery(getLoadedCommandsQuery, {\n        onCompleted: (data) => {\n            const availableCommands = data.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.command.reduce( (prev, cur) => {\n                return [...prev, cur];\n            }, [...availableCommands]);\n            setFileBrowserCommands(finalCommands);\n            if(finalCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support that feature\");\n            }else if(finalCommands.length === 1){\n                setSelectedCommand({...finalCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        //console.log(\"useEffect for many things\");\n        if(selectedCommand[\"cmd\"] !== undefined){\n            switch(uiFeature){\n                case \"file_browser:list\":\n                    // static parameters passed\n                    if(taskInfo.path === undefined){\n                        // this is an ls from the top table bar\n                        createTask({variables: {callback_id: searchCallback.id, command: selectedCommand[\"cmd\"], params: JSON.stringify({\n                            \"host\": searchCallback[\"host\"],\n                            \"path\": searchCallback.fullPath,\n                            \"file\": \"\",\n                        }), tasking_location: \"file_browser\"}});\n                    }else{\n                        // this is an ls from the action menu of a row\n                        createTask({variables: {callback_id: currentCallbackIDSetInTable.current, command: selectedCommand[\"cmd\"], params: JSON.stringify({\n                            \"host\": taskInfo.host,\n                            \"path\": taskInfo.path,\n                            \"file\": taskInfo.filename,\n                        }), tasking_location: \"file_browser\"}});\n                    }\n                    break;\n                case \"file_browser:upload\":\n                    // need to do a popup for the user to select the file\n                    setOpenParametersDialog(true);\n                    break;\n                case \"file_browser:download\":\n                    // static parameters passed\n                    // fallsthrough\n                case \"file_browser:remove\":\n                    // static parameters passed\n                    createTask({variables: {callback_id: currentCallbackIDSetInTable.current, command: selectedCommand[\"cmd\"], params: JSON.stringify({\n                        \"host\": taskInfo.host,\n                        \"path\": taskInfo.path,\n                        \"file\": taskInfo.filename,\n                    }), tasking_location: \"file_browser\"}});\n                    break;\n                \n                default:\n                    break;\n            }\n        }\n    }, [selectedCommand, createTask, searchCallback, selectedFolderData.full_path_text, taskInfo.filename, taskInfo.host, taskInfo.path, uiFeature]);\n    useEffect( () => {\n        if(searchCallback.id !== undefined){\n            getCommandOptions({variables: {callback_id: searchCallback.id, payloadtype: searchCallback.payload.payloadtype.ptype, ui_feature: searchCallback.ui_feature}});\n        }\n    }, [searchCallback]);\n    const onSetTableData = useCallback( (filebrowserobj) => {\n        setSelectedFolder(Object.values(filebrowserobj.filebrowserobjs));\n        setSelectedFolderData(filebrowserobj);\n    }, []);\n    const fetchFolderData = useCallback( (filebrowserobj) => {\n        getFolderData({variables: {filebrowserobj_id: filebrowserobj.id, operation_id: me.user.current_operation_id}});\n        setSelectedFolderData(filebrowserobj)\n    }, []);\n    const onListFilesButton = ({callbackID, fullPath}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        setSavedStateForConfirmDialog({fullPath});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"file_browser:list\");\n    }\n    const onUploadFileButton = ({callbackID}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"file_browser:upload\");\n    }\n    const onTaskRowAction = useCallback( ({path, host, filename, uifeature, confirmed}) => {\n        if(uifeature === \"file_browser:remove\" && !confirmed){\n            setSavedStateForConfirmDialog({path, host, filename, uifeature});\n            setOpenConfirmDialog(true);\n        }else{\n            setSavedStateForConfirmDialog({});\n            getCallbackData({variables: {callback_id: currentCallbackIDSetInTable.current}});\n            // clear out commands and re-fetch\n            setFileBrowserCommands([]);\n            setUIFeature(uifeature);\n            setTaskInfo({\n                path, host, filename\n            });\n        }\n    }, []);\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: searchCallback.id, command: cmd, params: parameters, files}});\n    }\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    }\n    const subscribeToMoreCallback = useCallback( (prev, {subscriptionData}) => {\n        if(subscriptionData.data.filebrowserobj.length > 0){\n            getFileDeltas({variables: {operation_id: me.user.current_operation_id, now: (new Date()).toISOString(), lastTime: lastFetchedTime.current}});\n            if(subscriptionData.data.filebrowserobj[0] !== null && subscriptionData.data.filebrowserobj[0] !== undefined){\n                lastFetchedTime.current = subscriptionData.data.filebrowserobj[0][\"timestamp\"];\n            }\n            \n            return;\n        }\n        \n        \n    }, [mergeData]);\n    const toggleShowDeletedFiles = (showStatus) => {\n        setShowDeletedFiles(showStatus);\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            <div style={{display: \"flex\", flexGrow: 1, overflowY: \"auto\"}}>\n                <div style={{width: \"30%\", overflow: \"auto\", flexGrow: 1}}>\n                    <CallbacksTabsFileBrowserTree showDeletedFiles={showDeletedFiles} treeRoot={fileBrowserRootsState} \n                        fetchFolderData={fetchFolderData} setTableData={onSetTableData} />\n                </div>\n                <div style={{width: \"60%\", display: \"flex\", flexDirection: \"column\", overflow: \"auto\", flexGrow: 1}}>\n                    <FileBrowserTableTop selectedFolderData={selectedFolderData} \n                        onListFilesButton={onListFilesButton} \n                        onUploadFileButton={onUploadFileButton} \n                        onChangeCallbackID={onChangeCallbackID}\n                        toggleShowDeletedFiles={toggleShowDeletedFiles}\n                        initialCallbackID={tabInfo.callbackID}\n                        subscribeToNewFileBrowserObjs={() => subscribeToMore({\n                            document: fileDataSubscription,\n                            variables: {now: (new Date()).toISOString(), operation_id: me.user.current_operation_id},\n                            updateQuery:subscribeToMoreCallback})}/>\n                    <CallbacksTabsFileBrowserTable showDeletedFiles={showDeletedFiles} onRowDoubleClick={fetchFolderData}\n                        selectedFolder={selectedFolder} onTaskRowAction={onTaskRowAction}/>\n                </div>\n            </div>\n            {openSelectCommandDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                        onClose={()=>{setOpenSelectCommandDialog(false);}} \n                        innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                            onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                            action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                    />\n            }\n            {openParametersDialog &&\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                onClose={()=>{setOpenParametersDialog(false);}} \n                innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={searchCallback.id} payloadtype_id={searchCallback.payload.payloadtype.id}\n                    operation_id={searchCallback.operation_id} \n                    onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n            />\n            }\n            {openConfirmDialog &&\n                <MythicConfirmDialog onSubmit={() => {onTaskRowAction({...savedStateForConfirmDialog, confirmed: true})}} \n                onClose={()=>{setOpenConfirmDialog(false);}} \n                open={openConfirmDialog}/>\n            }\n            \n        </MythicTabPanel>\n    )\n}\nconst FileBrowserTableTop = ({selectedFolderData, onListFilesButton, initialCallbackID, onUploadFileButton, onChangeCallbackID, subscribeToNewFileBrowserObjs, toggleShowDeletedFiles}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState(\"\");\n    const [fullPath, setFullPath] = React.useState(\"\");\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [showDeletedFiles, setLocalShowDeletedFiles] = React.useState(false);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const onChangeHost = (_, value) => {\n        setHostname(value);\n    }\n    const onChangePath = (_, value) => {\n        setFullPath(value);\n    }\n    const onChangeID = (_, value) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    }\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if(selectedFolderData.task){\n            setCallbackID(selectedFolderData.task.callback.id);\n            \n        }else{\n            setCallbackID(0);\n            onChangeCallbackID(0);\n        }\n    }\n    useEffect( () => {\n        if(selectedFolderData.host !== undefined){\n            setHostname(selectedFolderData.host);\n        }\n        if(selectedFolderData.full_path_text !== undefined){\n            setFullPath(selectedFolderData.full_path_text);\n        }\n        if(!manuallySetCallbackID){\n            if(selectedFolderData.task !== undefined){\n                setCallbackID(selectedFolderData.task.callback.id);\n            }\n            \n        }\n    }, [selectedFolderData, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if(fullPath === \"\"){\n            snackActions.warning(\"Must provide a path to list\");\n            return;\n        }\n        if(callbackID > 0){\n            onListFilesButton({callbackID, fullPath})\n        }else{\n            snackActions.warning(\"Must select a folder or set a callback number first\");\n        }\n    }\n    const onLocalUploadFileButton = () => {\n        if(callbackID > 0){\n            onUploadFileButton({callbackID});\n        }else{\n            snackActions.warning(\"Must select a folder or set a callback number first\");\n        }\n    }\n    useEffect( () => {\n        //console.log(\"useEffect for onChangeCAllbackID\")\n        onChangeCallbackID(callbackID);\n    }, [callbackID])\n    useEffect( () => {\n        subscribeToNewFileBrowserObjs();\n    }, []);\n    const onLocalToggleShowDeletedFiles = () => {\n        setLocalShowDeletedFiles(!showDeletedFiles);\n        toggleShowDeletedFiles(!showDeletedFiles);\n    }\n    return (\n        <Grid container spacing={0} style={{paddingTop: \"10px\"}}>\n            <Grid item xs={4}>\n                <MythicTextField placeholder=\"Host Name\" value={hostname}\n                    onChange={onChangeHost} name=\"Host Name\"/>\n            </Grid>\n            <Grid item xs={7}>\n                    <MythicTextField placeholder=\"Path\" value={fullPath} onEnter={onLocalListFilesButton}\n                        onChange={onChangePath} name=\"Path\" InputProps={{\n                            endAdornment: \n                            <React.Fragment>\n                                <Tooltip title=\"Task callback to list contents\">\n                                    <IconButton style={{padding: \"3px\"}} onClick={onLocalListFilesButton}><RefreshIcon style={{color: theme.palette.info.main}}/></IconButton>\n                                </Tooltip>\n                                <Tooltip title=\"Upload file to folder via callback\">\n                                    <IconButton style={{padding: \"3px\"}} onClick={onLocalUploadFileButton}><CloudUploadIcon style={{color: theme.palette.info.main}}/></IconButton>\n                                </Tooltip>\n                                <Tooltip title={showDeletedFiles ? \"Hide Deleted Files\" : \"Show Deleted Files\"}>\n                                    <IconButton style={{padding: \"3px\"}} onClick={onLocalToggleShowDeletedFiles}>\n                                        {showDeletedFiles ? (\n                                            <VisibilityIcon style={{color: theme.palette.info.main}}/>\n                                        ) : (\n                                            <VisibilityOffIcon style={{color: theme.palette.info.main}}/>\n                                        )}\n                                    </IconButton>\n                                </Tooltip>\n                            </React.Fragment>,\n                            style: {padding: 0}\n                        }}/>\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" placeholder=\"Callback\" name=\"Callback\"\n                    onChange={onChangeID} value={callbackID} InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <Tooltip title=\"Change Callback Based on Data Origin\">\n                                <IconButton style={{padding: \"3px\"}} onClick={revertCallbackID}>\n                                    <LockIcon style={{color: theme.palette.info.main}}/>\n                                </IconButton>\n                            </Tooltip>\n                        ) : (\n                            <Tooltip title=\"Manually Update Callback Number to Prevent Data Origin Tracking\">\n                                <IconButton  style={{padding: \"3px\"}}>\n                                    <RotateLeftIcon disabled style={{color: theme.palette.warning.main}}/> \n                                </IconButton>\n                            </Tooltip>),\n                        style: {padding: 0, margin: 0}\n                    }}/>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, {useCallback} from 'react';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {FixedSizeTree} from 'react-vtree';\nimport Autosizer from 'react-virtualized-auto-sizer';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      width: '99%',\n      marginTop: \"3px\",\n      marginBottom: \"2px\",\n      marginLeft: \"3px\",\n      marginRight: \"0px\",\n      height: \"auto\",\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      whiteSpace: \"pre-line\"\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    taskAndTimeDisplay: {\n      fontSize: theme.typography.pxToRem(12),\n      color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    secondaryHeadingExpanded: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      display: \"block\", \n      overflow: \"auto\",\n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"break-word\"\n    },\n    icon: {\n      verticalAlign: 'middle',\n      height: 20,\n      width: 20,\n    },\n    details: {\n      alignItems: 'center',\n    },\n    column: {\n      padding: \"0 5px 0 0\",\n      display: \"inline-block\",\n      margin: 0,\n      height: \"auto\"\n    },\n    paper: {\n        width: '100%',\n        marginBottom: theme.spacing(2),\n      },\n      table: {\n        minWidth: 750,\n      },\n      visuallyHidden: {\n        border: 0,\n        clip: 'rect(0 0 0 0)',\n        height: 1,\n        margin: -1,\n        overflow: 'hidden',\n        padding: 0,\n        position: 'absolute',\n        top: 20,\n        width: 1,\n      },\n  }));\n\nconst getNodeData = (node, nestingLevel, theme) => ({\n    data: {\n        id: node.id.toString(), // mandatory\n        isLeaf: node.children === undefined || node.children.length === 0,\n        isOpenByDefault: true, //mandatory\n        name: node.name,\n        nestingLevel,\n        theme,\n        ...node\n    },\n    nestingLevel,\n    node\n});\nexport const CallbacksTabsProcessBrowserTree = ({treeRoot, theme}) => {\n    const treeWalker = useCallback(\n        function* treeWalker() {\n            for(let i = 0; i < treeRoot.length; i++){\n                yield getNodeData(treeRoot[i], 0, theme);\n            }\n            while(true){\n                const parent = yield;\n                for(let i = 0; i < parent.node.children.length; i++){\n                    yield getNodeData(parent.node.children[i], parent.nestingLevel + 1, theme);\n                }\n            }\n        }, [treeRoot, theme]);\n    return (\n        treeRoot.length === 0 ? (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Process Listing Data</div>) : (\n            <Autosizer>\n                {({height, width}) => (\n                    <FixedSizeTree\n                        treeWalker={treeWalker}\n                        height={height - 10}\n                        width={width - 10}\n                        itemSize={30}\n                        async\n                        placeholder={<div>Loading....</div>}\n                    >\n                        {FileBrowserNode}\n                    </FixedSizeTree>\n                )}\n            </Autosizer>\n        )\n    )\n}\nconst FileBrowserNode = ({data, isOpen, style, setOpen}) => {\n    return (\n        <div style={{...style, \n                    width: \"calc(100vw)\", display: \"inline-flex\", overflow:\"auto\"}}>\n            {[...Array(data.nestingLevel)].map((o, i) => (\n                <div key={\"folder\" + data.id + \"lines\" + i} style={{borderLeft: `1px dashed ${fade(data.theme.palette.text.primary, 0.4)}`, marginLeft: 15, paddingRight: 15, height: \"100%\", display: \"inline-block\"}}></div>\n            ))}\n            <FileBrowserRow filebrowserobj={data} isOpen={isOpen} setOpen={setOpen}/>\n        </div>\n    )\n    \n}\nconst FileBrowserRow = (props) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    return (\n        <Paper className={classes.root} elevation={5} style={{backgroundColor: theme.body, color: theme.text, alignItems: \"center\", display: \"flex\"}}>\n            <Typography style={{paddingLeft: \"10px\"}}>\n                {props.filebrowserobj.process_id} - {props.filebrowserobj.name}\n            </Typography>\n        </Paper>\n    )\n}","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport { MythicDialog, MythicViewObjectPropertiesAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Button} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\n\nconst getDetailedData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        command_line\n        description\n        signer\n        start_time\n        name\n        bin_path\n    }\n}\n`;\nconst getProcessTokenData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        tokens(where: {deleted: {_eq: false}}) {\n            Address\n            AppContainer\n            AppContainerNumber\n            AppContainerSid\n            AppId\n            AppModelPolicies\n            AppModelPolicyDictionary\n            AttributesFlags\n            AuditPolicy\n            AuthenticationId_id\n            BnoIsolationPrefix\n            CanSynchronize\n            Capabilities\n            CreationTime\n            DefaultDacl\n            DenyOnlyGroups\n            DeviceClaimAttributes\n            DeviceGroups\n            Elevated\n            ElevationType\n            EnabledGroups\n            ExpirationTime\n            Filtered\n            Flags\n            FullPath\n            GrantedAccess\n            GrantedAccessGeneric\n            GrantedAccessMask\n            GroupCount\n            Groups\n            Handle\n            HandleReferenceCount\n            HasRestrictions\n            ImpersonationLevel\n            Inherit\n            IntegrityLevel\n            IntegrityLevelSid\n            IsClosed\n            IsContainer\n            IsPseudoToken\n            IsRestricted\n            IsSandbox\n            LogonSid\n            LowPrivilegeAppContainer\n            MandatoryPolicy\n            ModifiedId\n            Name\n            NoChildProcess\n            NotLow\n            NtType\n            NtTypeName\n            Owner\n            Origin\n            PackageFullName\n            PackageIdentity\n            PackageName\n            PointerReferenceCount\n            PrimaryGroup\n            PrivateNamespace\n            Privileges\n            ProcessUniqueAttribute\n            ProtectFromClose\n            Restricted\n            RestrictedDeviceClaimAttributes\n            RestrictedDeviceGroups\n            RestrictedSids\n            RestrictedSidsCount\n            RestrictedUserClaimAttributes\n            SandboxInert\n            Sddl\n            SecurityAttributes\n            SecurityDescriptor\n            SessionId\n            Source\n            ThreadID\n            TokenId\n            TokenType\n            TrustLevel\n            UIAccess\n            User\n            UserClaimAttributes\n            VirtualizationAllowed\n            VirtualizationEnabled\n            WriteRestricted\n            callbacktokens {\n                callback_id\n            }\n            logonsession {\n                id\n            }\n            task_id\n            timestamp_created\n        }\n    }\n}\n`;\nconst noRowsRender = () => {\n    return (\n        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Data Selected</div>\n    )\n}\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n    const DisplayData = () => {\n        switch(columnData.format){\n        case \"string\":\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n        case \"button\":\n            return <FileBrowserTableRowActionCell rowData={rowData} onTaskRowAction={columnData.onTaskRowAction} os={columnData.os}/>\n        default:\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData} />\n        }\n    };\n    return (\n        DisplayData()\n    )\n}\nexport const CallbacksTabsProcessBrowserTable = (props) => {\n    const widthRef = React.useRef(null);\n    const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n    const [sortBy, setSortBy] = React.useState(\"name\");\n    const [columnWidths, setColumnWidths] = React.useState({\n        actions: .065,\n        parent_process_id: .0714,\n        process_id: .0714,\n        architecture: .06,\n        name: .14,\n        user: .14,\n        bin_path: .40,\n    })\n    const [columns, setColumns] = React.useState([]);\n    \n    const sortTable = ({sortBy, sortDirection}) => {\n        const tmpData = [...allData];\n        const sortType = columns.filter( h => h.dataKey === sortBy)[0][\"columnData\"][\"format\"];\n        if(sortType === \"number\" || sortType === \"size\"){\n          tmpData.sort((a, b) => (parseInt(a[sortBy]) > parseInt(b[sortBy]) ? 1 : -1));\n        }else if(sortType === \"date\"){\n          tmpData.sort((a,b) => ( (new Date(a[sortBy])) > (new Date(b[sortBy])) ? 1: -1));\n        }else{\n          tmpData.sort( (a, b) => a[sortBy] > b[sortBy] ? 1 : -1);\n        }\n        if(sortDirection === \"DESC\"){\n          tmpData.reverse();\n        }\n        setAllData([...tmpData]);\n        setSortBy(sortBy);\n        setSortDirection(sortDirection);\n    \n    };\n    const rowGetter = ({index}) => {\n        return allData[index];\n    };\n    const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const prevWidths = {...columnWidths};\n        const percentDelta = deltaX / widthRef.current.offsetWidth;\n        let nextHeader = \"\";\n        let getNext = false;\n        for(const key of Object.keys(columnWidths)){\n            if(getNext){\n                nextHeader = key;\n                break;\n            }else if(key === dataKey){\n                getNext = true;\n            }\n        }\n        if(nextHeader === \"\"){\n            console.log(\"next header not found\");\n            return;\n        }\n        const updatedWidths = {...prevWidths, \n            [dataKey]: prevWidths[dataKey] + percentDelta,\n            [nextHeader]: prevWidths[nextHeader] - percentDelta\n        };\n        setColumnWidths(updatedWidths);\n    }, [columnWidths]);\n    const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n        return (\n          <React.Fragment key={\"header\" + dataKey}>\n            <span style={{display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n              {label}\n              {sortBy === dataKey ? (\n                sortDirection === \"ASC\" ? (\n                  <ArrowDownwardIcon />\n                ) : (\n                  <ArrowUpwardIcon />\n                )\n              ) :(null) }\n            </span>\n            {columnData.format !== \"button\" && label !== \"Path\" && \n                <Draggable\n                    axis=\"x\"\n                    defaultClassName=\"DragHandle\"\n                    defaultClassNameDragging=\"DragHandleActive\"\n                    onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n                    position={{x:0}}\n                    zIndex={999}\n                    >\n                    <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n                </Draggable>\n            }\n            \n          </React.Fragment>\n        )\n      }, [resizeRow, columns]);\n    const [allData, setAllData] = React.useState([]);\n    useEffect( () => {\n        setColumns([\n            {columnData: {format: \"button\", onTaskRowAction: props.onTaskRowAction, os: props.os}, dataKey: 'actions', label: \"Actions\", \n                cellRenderer: CellRenderer, width: columnWidths.actions * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"number\"}, dataKey: 'parent_process_id', label: \"PPID\", \n                cellRenderer: CellRenderer, width: columnWidths.parent_process_id * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"number\"}, dataKey: 'process_id', label: \"PID\", \n                cellRenderer: CellRenderer,  width: columnWidths.process_id * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'architecture',  label: \"Arch\", \n                cellRenderer: CellRenderer, width: columnWidths.architecture * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'name',  label: \"Name\", \n                cellRenderer: CellRenderer, width: columnWidths.name * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            \n            {columnData: {format: \"string\"}, dataKey: 'user',  label: \"User\", \n                cellRenderer: CellRenderer, width: columnWidths.user * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'bin_path',  label: \"Path\", \n                cellRenderer: CellRenderer, width: columnWidths.bin_path * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n        ])\n    }, [columnWidths, props.onTaskRowAction, props.os]);\n    useEffect( () => {\n        setAllData(props.selectedFolder);\n    }, [props.selectedFolder]);\n\n    return (\n        <div ref={widthRef} style={{width: \"100%\", height: \"90%\", overflow: \"hidden\"}}>\n            <AutoSizer>\n                {({height, width}) => (\n                    <Table\n                        headerHeight={25}\n                        noRowsRenderer={noRowsRender}\n                        rowCount={allData.length}\n                        rowGetter={ rowGetter }\n                        rowHeight={35}\n                        height={height}\n                        width={width}\n                        sort={sortTable}\n                        sortBy={sortBy}\n                        sortDirection={sortDirection}\n                    >\n                        {columns.map( (col) => (\n                            <Column key={\"col\" + col.dataKey} {...col} />\n                        ))}\n                    </Table>\n                )}\n            </AutoSizer>\n        </div>\n    )\n}\n\nconst FileBrowserTableRowStringCell = ({cellData}) => {\n    return (\n        cellData\n    )\n}\n\nconst FileBrowserTableRowActionCell = ({rowData, onTaskRowAction, os}) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [viewTokensDialogOpen, setViewTokensDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState({});\n    const [tokenData, setTokenData] = React.useState({});\n    const [getPermissions] = useLazyQuery(getDetailedData, {\n        onCompleted: (data) => {\n            setPermissionData(data.process_by_pk);\n            setViewPermissionsDialogOpen(true);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getTokens] = useLazyQuery(getProcessTokenData, {\n        onCompleted: (data) => {\n            if(data.process_by_pk.tokens.length === 0){\n                snackActions.warning(\"No Token Data for Process\");\n            }else{\n                setTokenData(data.process_by_pk.tokens);\n                setViewPermissionsDialogOpen(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption){\n            case \"A\":\n                optionsA[index].click(event);\n                break;\n            case \"B\":\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n    };\n    const optionsA = [{name: 'View Detailed Data', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getPermissions({variables: {process_id: rowData.id}});\n                    }},\n                    {name: 'View Tokens', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getTokens({variables: {process_id: rowData.id}});\n                    }, os: [\"Windows\"]},\n    ];\n    const optionsB = [{name: 'Task Token Listing', icon: <ListIcon style={{paddingRight: \"5px\", color: theme.palette.warning.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:list_tokens\"\n                        });\n                    }, os: [\"Windows\"]},\n                    {name: 'Task Inject', icon: <GetAppIcon style={{paddingRight: \"5px\", color: theme.palette.success.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:inject\"\n                        });\n                    }},\n                    {name: 'Task Steal Token', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:steal_token\"\n                        });\n                        \n                    }, os: [\"Windows\"]},\n                    {name: 'Task Kill Process', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:kill\"\n                        });\n                        \n                    }},\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{padding:0}} \n                size=\"small\"\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup=\"menu\"\n                onClick={handleDropdownToggle}\n                color=\"primary\"\n                variant=\"contained\"\n                ref={dropdownAnchorRef}\n            >\n                Actions\n            </Button>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                {...TransitionProps}\n                style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n                >\n                <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList id=\"split-button-menu\">\n                        {optionsA.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"A\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                        <Divider />\n                        {optionsB.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"B\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                    </MenuList>\n                    </ClickAwayListener>\n                </Paper>\n                </Grow>\n            )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewObjectPropertiesAsTableDialog title=\"View Detailed Data\" leftColumn=\"Attribute\" \n                        rightColumn=\"Value\" value={permissionData} \n                        onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                        keys={[\"name\", \"bin_path\", \"signer\", \"command_line\", \"start_time\", \"description\"]}\n                        />}\n                />\n        </React.Fragment>\n    )\n}\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect} from 'react';\nimport {gql, useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useTheme} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsProcessBrowserTree} from './CallbacksTabsProcessBrowserTree';\nimport {CallbacksTabsProcessBrowserTable} from './CallbacksTabsProcessBrowserTable';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\n\nconst dataFragment = gql`\nfragment objData on process {\n    name\n    process_id\n    parent_process_id\n    architecture\n    bin_path\n    integrity_level\n    id\n    user\n}\n`;\nconst taskFragment = gql`\nfragment taskData on task {\n    id\n    callback {\n        id\n        host\n        payload {\n            id\n            os\n            payloadtype{\n                ptype\n            }\n        }\n    }\n}\n`;\nconst getNextProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_gt: $task_id}}, order_by: {task_id: asc}, limit: 1) {\n        task {\n            ...taskData\n            processes(order_by: {process_id: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getPrevProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_lt: $task_id}}, order_by: {task_id: desc}, limit: 1) {\n        task {\n            ...taskData\n            processes(order_by: {name: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getLatestTaskForHost = gql`\nquery getHostsQuery($operation_id: Int!, $host:String!){\n    process_aggregate(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}}, distinct_on: task_id){\n        aggregate {\n            max {\n              task_id\n            }\n        }\n    }\n}\n`;\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $payloadtype: String!, $ui_feature: String!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_iregex: $ui_feature}}}) {\n    id\n    command {\n      cmd\n      help_cmd\n      description\n      id\n      needs_admin\n      payload_type_id\n      attributes\n      commandparameters {\n        id\n        type \n      }\n      supported_ui_features\n    }\n  }\n  command(where: {payloadtype: {ptype: {_eq: $payloadtype}}, script_only: {_eq: true}, deleted: {_eq: false}, supported_ui_features: {_iregex: $ui_feature }}){\n      id\n      cmd\n      help_cmd\n      description\n      needs_admin\n      attributes\n      payload_type_id\n      commandparameters {\n          id\n          type\n      }\n      supported_ui_features\n    }\n}\n`;\nconst getCallbackDataQuery = gql`\nquery getCallbackDataQuery($callback_id: Int!){\n    callback_by_pk(id: $callback_id){\n        payload {\n            os\n            payloadtype {\n              ptype\n              id\n            }\n            tag\n            id\n        }\n        id\n        operation_id\n        host\n        active\n    }\n}\n`;\nexport function CallbacksTabsProcessBrowserLabel(props){\n    const [description, setDescription] = React.useState(\"Processes: \" + props.tabInfo.host)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else{\n            setDescription(\"Processes: \" + props.tabInfo.host);\n        }\n    }, [props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const CallbacksTabsProcessBrowserPanel = ({index, value, tabInfo}) =>{\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState({});\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [searchCallback, setSearchCallback] = React.useState({});\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const [uiFeature, setUIFeature] = React.useState(\"\");\n    const currentCallbackIDSetInTable = React.useRef();\n    const [currentOS, setCurrentOS] = React.useState(\"\");\n    const [getCallbackData] = useLazyQuery(getCallbackDataQuery, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            if(data.callback_by_pk !== null){\n                if(data.callback_by_pk.active){\n                    setSearchCallback({...data.callback_by_pk, \"ui_feature\": \".*\" + uiFeature + \".*\"});\n                }else{\n                    snackActions.warning(\"That callback isn't active\");\n                }\n                \n            }else{\n                snackActions.warning(\"Failed to find that Callback\");\n            }\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch callback data for the specified callback\");\n        }\n    });\n    const makeTree = (root, element) => {\n        if(root.process_id === element.parent_process_id){\n            root.children.push({...element, children: []});\n            return true;\n        }else{\n            // root isn't what we're looking for, but maybe a child of root is\n            for(let i = 0; i < root.children.length; i++){\n                if(makeTree(root.children[i], element)){\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    const [getNextProcessDataByHostAndTask] = useLazyQuery(getNextProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Newer Process Sets\");\n            }\n            \n        }\n    });\n    \n    const [getPreviousProcessDataByHostAndTask] = useLazyQuery(getPrevProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Earlier Process Sets\");\n            }\n            \n        }\n    });\n    useQuery(getLatestTaskForHost, {\n        variables: {operation_id: me.user.current_operation_id, host: tabInfo.host},\n        onCompleted: (data) => {\n            if(data.process_aggregate.aggregate.max.task_id === null){\n                snackActions.warning(\"No Process Data for \" + tabInfo.host)\n                setTaskInfo({callback: {host: tabInfo.host, id: tabInfo.callbackID}, id: 0})\n            }else{\n                snackActions.info(\"Fetching latest process data for \" + tabInfo.host);\n                getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n                    host: tabInfo.host,\n                    task_id: data.process_aggregate.aggregate.max.task_id - 1\n                }});\n            }\n        }, fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState])\n\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + searchCallback.id);\n            }\n            setSelectedCommand({});\n            setSearchCallback({});\n            setUIFeature(\"\");\n        },\n        onError: data => {\n            console.error(data);\n            setSelectedCommand({});\n            setSearchCallback({});\n            setUIFeature(\"\");\n        }\n    });\n    const [getCommandOptions] = useLazyQuery(getLoadedCommandsQuery, {\n        onCompleted: (data) => {\n            const availableCommands = data.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.command.reduce( (prev, cur) => {\n                return [...prev, cur];\n            }, [...availableCommands]);\n            setFileBrowserCommands(finalCommands);\n            if(finalCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support that feature\");\n            }else if(finalCommands.length === 1){\n                setSelectedCommand({...finalCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        if(selectedCommand[\"cmd\"] !== undefined){\n            if(selectedCommand[\"commandparameters\"].length === 0){\n                createTask({variables: {callback_id: searchCallback.id, command: selectedCommand[\"cmd\"], params: \"\"}});\n            }else{\n                switch(uiFeature){\n                    case \"process_browser:list\":\n                        // need to do a popup for the user to select the file\n                        setOpenParametersDialog(true);\n                        break;              \n                    default:\n                        break;\n                }\n            }\n            \n        }\n    }, [selectedCommand, createTask, searchCallback, uiFeature]);\n    useEffect( () => {\n        if(searchCallback.id !== undefined){\n            getCommandOptions({variables: {callback_id: searchCallback.id, payloadtype: searchCallback.payload.payloadtype.ptype, ui_feature: searchCallback.ui_feature}});\n        }\n    }, [searchCallback, getCommandOptions]);\n    const onListFilesButton = ({callbackID}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"process_browser:list\");\n    }\n    const onNextButton = ({task_id}) => {\n        getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onPreviousButton = ({task_id}) => {\n        getPreviousProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onDiffButton = ({task_id}) => {\n        \n    }\n    const onTaskRowAction = ({path, host, filename, uifeature}) => {\n        getCallbackData({variables: {callback_id: currentCallbackIDSetInTable.current}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(uifeature);\n    }\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: searchCallback.id, command: cmd, params: parameters, files}});\n    }\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            <div style={{display: \"flex\", flexGrow: 1, overflowY: \"auto\"}}>\n                <div style={{width: \"30%\", overflow: \"auto\", flexGrow: 1}}>\n                    <CallbacksTabsProcessBrowserTree treeRoot={fileBrowserRootsState} theme={theme} />\n                </div>\n                <div style={{width: \"60%\", display: \"flex\", flexDirection: \"column\", overflow: \"auto\", flexGrow: 1}}>\n                    <ProcessBrowserTableTop\n                        onListFilesButton={onListFilesButton} \n                        onNextButton={onNextButton} \n                        onPreviousButton={onPreviousButton}\n                        onDiffButton={onDiffButton}  \n                        initialCallbackID={tabInfo.callbackID}\n                        onChangeCallbackID={onChangeCallbackID}\n                        taskInfo={taskInfo}/>\n                    <CallbacksTabsProcessBrowserTable selectedFolder={selectedFolder} onTaskRowAction={onTaskRowAction} os={currentOS}/>\n                </div>\n            </div>\n            {openSelectCommandDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                    onClose={()=>{setOpenSelectCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                        action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={searchCallback.id} payloadtype_id={searchCallback.payload.payloadtype.id}\n                    operation_id={searchCallback.operation_id} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            \n        </MythicTabPanel>\n    )\n}\nconst ProcessBrowserTableTop = ({onListFilesButton, onNextButton, onPreviousButton, initialCallbackID, onDiffButton, onChangeCallbackID, taskInfo}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState(\"\");\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const [taskID, setTaskID] = React.useState(0);\n    const onChangeID = (name, value, error) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    }\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if(taskInfo.callback !== undefined){\n            setCallbackID(taskInfo.callback.id);\n        }else{\n            setCallbackID(0);\n        }\n        \n    }\n    useEffect( () => {\n        if(taskInfo.callback !== undefined){\n            setHostname(taskInfo.callback.host);    \n            setTaskID(taskInfo.id);\n        }\n        if(!manuallySetCallbackID){\n            if(taskInfo.callback !== undefined){\n                setCallbackID(taskInfo.callback.id);\n            }else{\n                setCallbackID(0);\n            }\n            \n        }\n    }, [taskInfo, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if(callbackID > 0){\n            onListFilesButton({callbackID})\n        }else{\n            snackActions.warning(\"Must set a callback number to task first\");\n        }\n    }\n    const onLocalNextButton = () => {\n        snackActions.info(\"Fetching next process data...\");\n        onNextButton({task_id: taskInfo.id});\n    }\n    const onLocalPreviousButton = () => {\n        snackActions.info(\"Fetching previous process data...\");\n        onPreviousButton({task_id: taskInfo.id});\n    }\n    const onLocalDiffButton = () => {\n        if(callbackID > 0){\n            onNextButton({callbackID});\n        }else{\n            snackActions.warning(\"Must select a callback number first\");\n        }\n    }\n    useEffect( () => {\n        onChangeCallbackID(callbackID);\n    }, [callbackID, onChangeCallbackID])\n    return (\n        <Grid container spacing={0} style={{paddingTop: \"10px\"}}>\n            <Grid item xs={10}>\n                <MythicTextField placeholder=\"Host Name\" value={hostname} disabled\n                    onChange={() => {}} name=\"Host Name\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Fetch Previous Saved Process Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalPreviousButton}><SkipPreviousIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Task Callback to List Processes\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalListFilesButton}><RefreshIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Fetch Next Saved Process Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalNextButton}><SkipNextIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Compare Previous Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalDiffButton}><CompareArrowsIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        </React.Fragment>\n                    }} />\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" placeholder=\"Callback\" name=\"Callback\"\n                    onChange={onChangeID} value={callbackID} InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <Tooltip title=\"Change Callback Based on Data Origin\">\n                                <IconButton style={{padding: \"3px\"}} onClick={revertCallbackID}>\n                                    <LockIcon style={{color: theme.palette.info.main}}/>\n                                </IconButton>\n                        </Tooltip>\n                        ) : (<Tooltip title=\"Manually Update Callback Number to Prevent Data Origin Tracking\">\n                                <IconButton  style={{padding: \"3px\"}}>\n                                    <RotateLeftIcon disabled style={{color: theme.palette.warning.main}}/> \n                                </IconButton>\n                            </Tooltip>),\n                        style: {padding: 0, margin: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" name=\"Task Data\"\n                    disabled value={taskID} onChange={() => {}}/>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, {useEffect} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport {useSubscription, gql } from '@apollo/client';\nimport {CallbacksTabsTaskingLabel, CallbacksTabsTaskingPanel} from './CallbacksTabsTasking';\nimport {CallbacksTabsFileBrowserLabel, CallbacksTabsFileBrowserPanel} from './CallbacksTabsFileBrowser';\nimport {CallbacksTabsProcessBrowserLabel, CallbacksTabsProcessBrowserPanel} from './CallbacksTabsProcessBrowser';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbacktoken(where: {deleted: {_eq: false}, callback: {operation_id: {_eq: $operation_id}, active: {_eq: true}}}) {\n    token {\n      TokenId\n      id\n      User\n      description\n    }\n    callback {\n      id\n    }\n    id\n  }\n}\n `;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\nexport function CallbacksTabs({onCloseTab, openTabs, clickedTabId, clearSelectedTab, onEditTabDescription}) {\n    const classes = useStyles();\n    const me = useReactiveVar(meState);\n    const [callbackTokens, setCallbackTokens] = React.useState([])\n    useSubscription(SUB_Callbacks, {\n      variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n      shouldResubscribe: true,\n      onSubscriptionData: ({subscriptionData}) => {\n        setCallbackTokens(subscriptionData.data.callbacktoken);\n      }\n    });\n    const [value, setValue] = React.useState(0);\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n        localStorage.setItem(\"clickedTab\", openTabs[newValue].tabID);\n    };\n    const onCloseTabLocal = ({tabID, index}) =>{\n        if(index > 0){\n            setValue(index-1);\n        }else{\n            setValue(0);\n        }\n        onCloseTab({tabID, index});\n    }\n    useEffect( () => {\n        for(let i = 0; i < openTabs.length; i++){\n            if( openTabs[i].tabID === clickedTabId ){\n                setValue(i);\n            }\n        }\n        clearSelectedTab();\n    }, [clickedTabId, openTabs, clearSelectedTab]);\n  return (\n    <div className={classes.root} style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n            <AppBar position=\"static\" color=\"default\">\n              <Tabs \n                value={value}\n                onChange={handleChange}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                variant=\"scrollable\"\n                scrollButtons=\"auto\"\n                style={{maxWidth: \"100%\", width: \"100%\"}}\n                aria-label=\"scrollable auto tabs example\"\n              >\n              {\n                  openTabs.map( (tab, index) => {\n                    switch (tab.tabType){\n                      case \"interact\":\n                        return <CallbacksTabsTaskingLabel onEditTabDescription={onEditTabDescription} onCloseTab={onCloseTabLocal} key={\"tablabel\" + tab.tabID + tab.tabType} tabInfo={tab} index={index} />;\n                      case \"fileBrowser\":\n                        return <CallbacksTabsFileBrowserLabel onEditTabDescription={onEditTabDescription} onCloseTab={onCloseTabLocal} key={\"tablabel\" + tab.tabID + tab.tabType} tabInfo={tab} index={index} />;\n                      case \"processBrowser\":\n                        return <CallbacksTabsProcessBrowserLabel onEditTabDescription={onEditTabDescription} onCloseTab={onCloseTabLocal} key={\"tablabel\" + tab.tabID + tab.tabType} tabInfo={tab} index={index} />;\n                      default:\n                        return (null);\n                    }\n                  })\n              }\n              </Tabs>\n            </AppBar>\n        \n          {\n          openTabs.map( (tab, index) => {\n            switch(tab.tabType){\n                case \"interact\":\n                  return <CallbacksTabsTaskingPanel style={{position: \"relative\", height:\"100%\", maxHeight:\"100%\"}} key={\"tabpanel\" + tab.tabID + tab.tabType} onCloseTab={onCloseTabLocal} tabInfo={tab} value={value} index={index} callbacktokens={callbackTokens}/>\n                case \"fileBrowser\":\n                  return <CallbacksTabsFileBrowserPanel style={{height:\"100%\", maxHeight:\"100%\", position: \"relative\", overflow: \"auto\"}} onCloseTab={onCloseTabLocal} key={\"tabpanel\" + tab.tabID + tab.tabType} tabInfo={tab} value={value} index={index} />\n                case \"processBrowser\":\n                  return <CallbacksTabsProcessBrowserPanel style={{height:\"100%\", maxHeight:\"100%\", position: \"relative\", overflow: \"auto\"}} onCloseTab={onCloseTabLocal} key={\"tabpanel\" + tab.tabID + tab.tabType} tabInfo={tab} value={value} index={index} />\n                default:\n                  return (null);\n            }\n          })\n          }\n        </div>\n  )\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function HeightsDialog(props) {\n  const [heights, setHeights] = React.useState({\"top\": \"0%\", \"bottom\": \"0%\"});\n  useEffect( () => {\n    setHeights(props.heights);\n  }, [props.heights]);\n  const onSubmit = () => {\n    props.onSubmit(heights);\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    const newHeights = {...heights};\n    newHeights[name] = value;\n    setHeights(newHeights);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Adjust sizes of Top/Bottom sections</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <MythicTextField autoFocus value={heights.top} onChange={onChange} name=\"top\"/>\n                <MythicTextField value={heights.bottom} onChange={onChange} name=\"bottom\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nexport function getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nexport function stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\n\n\n\nexport function EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, onRequestSort } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\">\n          <Checkbox\n            indeterminate={numSelected > 0 && numSelected < props.rowCount}\n            checked={props.rowCount > 0 && numSelected === props.rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{ 'aria-label': 'select all desserts' }}\n          />\n        </TableCell>\n        {props.headCells.map((headCell) => (\n          props.shownColumns === undefined || props.shownColumns.includes(headCell.id) || headCell.id === \"id\" ? (\n            <TableCell\n              key={headCell.id}\n              align={'left'}\n              padding={headCell.disablePadding ? 'none' : 'default'}\n              sortDirection={orderBy === headCell.id ? order : false}\n            >\n              <TableSortLabel\n                active={orderBy === headCell.id}\n                direction={orderBy === headCell.id ? order : 'asc'}\n                onClick={createSortHandler(headCell.id)}\n              >\n                {headCell.label}\n                {orderBy === headCell.id ? (\n                  <span className={classes.visuallyHidden}>\n                    {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                  </span>\n                ) : null}\n              </TableSortLabel>\n            </TableCell>\n          ) : (null)\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nexport function EnhancedTableRow(props){\n    \n  const labelId = `enhanced-table-checkbox-${props.index}`;\n\n  return (\n    <TableRow\n      hover\n      \n      role=\"checkbox\"\n      aria-checked={props.isItemSelected}\n      tabIndex={-1}\n      key={props.id}\n      selected={props.isItemSelected}\n      style={props.style === undefined ? {} : props.style}\n    >\n      <TableCell padding=\"checkbox\">\n        <Checkbox\n          onClick={(event) => props.handleClick(event, props.id)}\n          checked={props.isItemSelected}\n          inputProps={{ 'aria-labelledby': labelId }}\n        />\n      </TableCell>\n      {props.children}\n    </TableRow>\n  );\n\n}\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\n\n  \nexport function MythicTransferListDialog(props) {\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    \n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(50vh)\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    const setFinalTags = () => {\n      props.onSubmit({left, right});\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.dialogTitle}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(leftTitle, left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                \n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                \n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n        </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport MythicTextField from './MythicTextField';\n\nexport function MythicDisplayTextDialog(props) {\n  return (\n    <MythicDialog fullWidth={props.fullWidth === null ? false : props.fullWidth} maxWidth={props.maxWidth === null ? \"sm\" : props.maxWidth} open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n            <DialogContent dividers={true}>\n                <MythicTextField multiline={true} value={props.value} onChange={()=>{}} />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                Close\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import {gql } from '@apollo/client';\n\nexport const hideCallbackMutation = gql`\nmutation hideCallback ($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, active: false}) {\n    status\n    error\n  }\n}\n`;\nexport const toggleHideCallbackMutations = gql`\nmutation hideCallback ($callback_id: Int!, $active: Boolean!){\n  updateCallback(input: {callback_id: $callback_id, active: $active}) {\n    status\n    error\n  }\n}\n`;\n\nexport const removeEdgeMutation = gql`\nmutation removeEdgeMutation ($edge_id: Int!, $end_timestamp: timestamp!){\n    update_callbackgraphedge_by_pk(pk_columns: {id: $edge_id}, _set: {end_timestamp: $end_timestamp}) {\n        end_timestamp\n        id\n      }\n}\n`;\n\nexport const addEdgeMutation = gql`\nmutation addEdgeMutation ($source_id: Int!, $destination_id: Int!, $profile_id: Int!){\n  insert_callbackgraphedge_one(object: {c2_profile_id: $profile_id, destination_id: $destination_id, direction: 1, source_id: $source_id}) {\n    id\n  }\n}\n`;\nexport const unlockCallbackMutation = gql`\nmutation unlockCallback($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: false}) {\n    status\n    error\n  }\n}\n`;\nexport const lockCallbackMutation = gql`\nmutation lockCallack($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: true}) {\n    status\n    error\n  }\n}\n`;\nexport const updateDescriptionCallbackMutation = gql`\nmutation updateDescriptionCallack($callback_id: Int!, $description: String!){\n  updateCallback(input: {callback_id: $callback_id, description: $description}) {\n    status\n    error\n  }\n}\n`;\n\nexport const updateSleepInfoCallbackMutation = gql`\nmutation updateSleepInfoCallback($callback_id: Int!, $sleep_info: String!){\n  update_callback_by_pk(pk_columns: {id: $callback_id}, _set: {sleep_info: $sleep_info}){\n    id\n    sleep_info\n  }\n}\n`;\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport {ExpandedCallbackSideDetailsTable} from '../ExpandedCallback/ExpandedCallbackSideDetails';\n\nconst GET_Payload_Details = gql`\nquery GetCallbackDetails($callback_id: Int!) {\n  callback_by_pk(id: $callback_id){\n    payload {\n      uuid\n      payloadtype{\n          ptype\n          id\n          commands(where: {script_only: {_eq: true}, deleted: {_eq: false}}){\n            id\n            cmd\n            version\n          }\n      }\n      filemetum {\n        filename_text\n        agent_file_id\n        id\n        md5\n        sha1\n      }\n      buildparameterinstances {\n        parameter\n        id\n        buildparameter {\n          description\n        }\n      }\n      os\n    }\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n    loadedcommands{\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    last_checkin\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n  }\n  \n}\n`;\nexport function DetailedCallbackTable(props){\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {callback_id: props.callback_id},\n        onCompleted: data => {\n            const commandState = data.callback_by_pk.loadedcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            });\n            const commandsWithScriptOnly = data.callback_by_pk.payload.payloadtype.commands.reduce( (prev, cur) => {\n              return [...prev, {cmd: cur.cmd, mythic: cur.version, payload: cur.version}]\n            }, [...commandState]).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0))\n            setCommands(commandsWithScriptOnly);\n            const buildParametersState = data.callback_by_pk.payload.buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.callback_by_pk.c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Callback Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Callback Information\n              </Typography>\n            </Paper>\n            <ExpandedCallbackSideDetailsTable {...data.callback_by_pk} />\n                \n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.uuid}</TableCell>\n                    </TableRow>\n                    { data.callback_by_pk.payload.filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.callback_by_pk.payload.filemetum.filename_text}</TableCell>\n                        </TableRow>\n                    ) : null }\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.callback_by_pk.payload.filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + data.callback_by_pk.payload.id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" || cmd.parameter_type === \"Array\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Loaded Commands\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Command Name</TableCell>\n                <TableCell>Mythic Version</TableCell>\n                <TableCell>Loaded Version</TableCell>\n                <TableCell>Documentation</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {\n                commands.map( (cmd) => (\n                    <TableRow key={cmd.cmd + data.callback_by_pk.payload.id} hover>\n                        <TableCell>{cmd.cmd}</TableCell>\n                        <TableCell>{cmd.mythic}</TableCell>\n                        <TableCell>{cmd.payload}</TableCell>\n                        <TableCell>\n                          <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                             href={\"/docs/agents/\" + data.callback_by_pk.payload.payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button> \n                        </TableCell>\n                    </TableRow>\n                ))\n                \n              }\n            </TableBody>\n          </Table>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\n","import React, {useCallback, useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicDisplayTextDialog} from '../../MythicComponents/MythicDisplayTextDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {EnhancedTableRow} from '../../MythicComponents/MythicTable';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport LockIcon from '@material-ui/icons/Lock';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport {C2PathDialog} from './C2PathDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport {hideCallbackMutation} from './CallbackMutations';\nimport {useMutation } from '@apollo/client';\nimport SnoozeIcon from '@material-ui/icons/Snooze';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {faQuestion} from '@fortawesome/free-solid-svg-icons';\nimport {faLinux, faApple, faWindows, faChrome} from '@fortawesome/free-brands-svg-icons';\nimport {useSubscription, gql } from '@apollo/client';\nimport {DetailedCallbackTable} from './DetailedCallbackTable';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    id\n    last_checkin\n  }\n}\n `;\nexport function CallbacksTableRowPreMemo(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [openMetaDialog, setOpenMetaDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [openSleepDialog, setOpenSleepDialog] = React.useState(false);\n    const [openOSDialog, setOpenOSDialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [shownColumns, setShownColumns] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const handleDropdownToggle = (evt) => {\n            evt.stopPropagation();\n            setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    useEffect( () => {\n        if(props.shownColumns === undefined){\n            setShownColumns([]);\n        }else{\n            setShownColumns(props.shownColumns);\n        }\n    }, [props.shownColumns]);\n    \n    const onOpenTab = (tabType) => {\n        if(!activeEgressBool){\n            snackActions.warning(\"Agent has no egress route! Re-link before tasking\");\n        }\n        if(tabType === \"interact\"){\n            props.onOpenTab({tabType, tabID: props.id + tabType, callbackID: props.id});\n        }else if(tabType === \"processBrowser\"){\n            props.onOpenTab({tabType, tabID: props.host, callbackID: props.id});\n        }else{\n            props.onOpenTab({tabType, tabID: props.id + tabType, callbackID: props.id});\n        }\n    }\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = props.callbackgraphedges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in props.callbackgraphedges that are _not_ in myEdges so far\n                const newEdges = props.callbackgraphedges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        if(callbackgraphedges.length !== myActiveEdges.length){\n            setCallbackgraphedges(myActiveEdges);\n        }\n        if(callbackgraphedgesAll.length !== myEdges.length){\n            setCallbackgraphedgesAll(myEdges);\n        }\n    }, [props.callbackgraphedges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n    const handleMenuItemClick = (event, index) => {\n        options[index].click(event);\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n\n        setDropdownOpen(false);\n      };\n      const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            console.log(data);\n        }\n    });\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const editSleepSubmit = (sleep) => {\n        props.updateSleepInfo({sleep_info: sleep, id: props.id});\n    }\n    const displayOSInfo = React.useCallback( () => {\n        setOpenOSDialog(true);\n    }, []);\n    const getOSIcon = useCallback( () => {\n        switch(props.payload.os.toLowerCase()){\n            case \"windows\":\n                return <FontAwesomeIcon icon={faWindows} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"linux\":\n                return <FontAwesomeIcon icon={faLinux} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"macos\":\n                return <FontAwesomeIcon icon={faApple} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo}/>\n            case \"chrome\":\n                return <FontAwesomeIcon icon={faChrome} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            default:\n                return <FontAwesomeIcon icon={faQuestion} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n        }\n    }, [])\n    const options =  [{name: 'Hide Callback', icon: <VisibilityOffIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        hideCallback({variables: {callback_id: props.id}});\n                     }},\n                     {name: 'File Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onOpenTab(\"fileBrowser\");\n                     }},\n                     {name: 'Process Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onOpenTab(\"processBrowser\");\n                     }},\n                     {name: props.locked ? 'Unlock (Locked by ' + props.locked_operator.username + ')' : 'Lock Callback', icon: props.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                     {name: \"Expand Callback\", icon: <OpenInNewIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        window.open(\"/new/callbacks/\" + props.id, \"_blank\").focus();\n                     }},\n                     {name: \"View Metadata\", icon: <InfoIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                         evt.stopPropagation();\n                         setOpenMetaDialog(true);\n                     }}\n                 ];\n    return (\n    <React.Fragment>\n        <EnhancedTableRow id={props.id} handleClick={props.handleClick} isItemSelected={props.isItemSelected(props.id)}> \n            <TableCell>\n                <ButtonGroup variant=\"contained\" color={props.integrity_level > 2 ? \"secondary\" : \"primary\"} ref={dropdownAnchorRef} aria-label=\"split button\">\n                <Button size=\"small\" onClick={(evt) => {evt.stopPropagation();onOpenTab(\"interact\")}}>\n                 { props.locked ? (<LockIcon />):(<KeyboardIcon />) } {props.id}\n                 </Button>\n                 <Button\n                    style={{padding:0}} \n                    size=\"small\"\n                    aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}\n                  >\n                    <ArrowDropDownIcon />\n                  </Button>\n                </ButtonGroup>\n                <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 200}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\">\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.icon}{option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n            </TableCell>\n            {shownColumns.includes(\"ip\") ? (\n                <TableCell>{props.ip}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"host\") ? (\n                <TableCell>{props.host}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"user\") ? (\n                <TableCell>{props.user}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"domain\") ? (\n                <TableCell>{props.domain}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"os\") ? (\n                <TableCell>\n                    {getOSIcon()}\n                    <MythicDisplayTextDialog onClose={()=>{setOpenOSDialog(false);}} title={\"Operating System Information\"} maxWidth={\"md\"} fullWidth={true} value={props.os} open={openOSDialog}/>\n                </TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"arch\") ? (\n                <TableCell>{props.architecture}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"pid\") ? (\n                <TableCell>{props.pid}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"last_checkin\") ? (\n            <TableCell>\n                <TimeUpdater callback_id={props.id} />\n            </TableCell>\n            ) : (null)} \n            {shownColumns.includes(\"description\") ? (\n            <TableCell>{props.description}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"sleep\") ? (\n            <TableCell><SnoozeIcon onClick={(evt)=>{evt.stopPropagation();setOpenSleepDialog(true);}} style={{color: props.sleep_info === \"\" ? theme.palette.warning.main : theme.palette.info.main, cursor: \"pointer\"}}/></TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"type\") ? (\n            <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"c2\") ? (\n            <TableCell>{hasEgressRoute ? \n                <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                }\n            </TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"process_name\") ? (\n            <TableCell>{props.process_name}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"external_ip\") ? (\n            <TableCell>{props.external_ip}</TableCell>\n            ) : (null)}\n        </EnhancedTableRow>\n        <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                    onClose={()=>{setOpenC2Dialog(false);}} \n                    innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                />\n            {openMetaDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openMetaDialog}\n                    onClose={()=>{setOpenMetaDialog(false);}} \n                    innerDialog={<DetailedCallbackTable onClose={()=>{setOpenMetaDialog(false);}} callback_id={props.id} />}\n                />\n            }\n        <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n            innerDialog={\n                <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n            }\n            />\n        <MythicDialog fullWidth={true} open={openSleepDialog}  onClose={() => {setOpenSleepDialog(false);}}\n            innerDialog={\n                <MythicModifyStringDialog title={\"Sleep Information\"} onClose={() => {setOpenSleepDialog(false);}} value={props.sleep_info} onSubmit={editSleepSubmit} />\n            }\n            />\n    </React.Fragment>\n    )\n}\nexport const CallbacksTableRow = React.memo(CallbacksTableRowPreMemo);\n\nfunction TimeUpdaterPreMemo({callback_id}){\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [lastCheckin, setLastCheckin] = React.useState(\"\");\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setLastCheckin(subscriptionData.data.callback_by_pk.last_checkin);\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(lastCheckin);\n    });\n    return (\n        displayTime\n    )\n}\nconst TimeUpdater = React.memo(TimeUpdaterPreMemo)","import React, { useEffect, useMemo } from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {EnhancedTableHead, stableSort, getComparator} from '../../MythicComponents/MythicTable';\nimport {MythicTransferListDialog} from '../../MythicComponents/MythicTransferList';\nimport {MythicDialog} from '../../MythicComponents/MythicDialog';\nimport { CallbacksTableRow } from './CallbacksTableRow';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport {useTheme} from '@material-ui/core/styles';\nimport {hideCallbackMutation, unlockCallbackMutation, lockCallbackMutation, updateDescriptionCallbackMutation, updateSleepInfoCallbackMutation} from './CallbackMutations';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation } from '@apollo/client';\nimport {Button} from '@material-ui/core';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faTasks } from '@fortawesome/free-solid-svg-icons';\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    minHeight: \"unset\",\n    marginTop: \"10px\"\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  title: {\n  },\n}));\n\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const theme = useTheme();\n  const { numSelected } = props;\n  return (\n    <React.Fragment>\n        {numSelected > 1 ? (\n          <Toolbar className={clsx(classes.root, {[classes.highlight]: numSelected > 1, })} >\n            <React.Fragment>\n              <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\n                {numSelected} selected\n              </Typography>\n              <Tooltip title=\"Hide Selected\">\n                <IconButton aria-label=\"hide\" onClick={props.onHideSelected}>\n                  <VisibilityOffOutlinedIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Task Selected\">\n                <IconButton aria-label=\"hide\" onClick={props.onTaskSelected}>\n                  <FontAwesomeIcon icon={faTasks} title=\"Task All\" />\n                </IconButton>\n              </Tooltip>\n            </React.Fragment>\n          </Toolbar>\n      ) : (\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\", width: \"100%\"}} variant={\"elevation\"}>\n          <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n              Active Callbacks\n          </Typography>\n          <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"70px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.openDialog(); }}>Show/Hide Columns</Button>\n        </Paper>\n      )\n      }\n    </React.Fragment>\n  );\n};\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n}));\nexport function CallbacksTable(props){\n      const classes = useStyles();\n      const [order, setOrder] = React.useState('asc');\n      const [orderBy, setOrderBy] = React.useState('interact');\n      const [selected, setSelected] = React.useState([]);\n      const [openAdjustColumnsDialog, setOpenAdjustColumnsDialog] = React.useState(false);\n      const [allColumns, setAllColumns] = React.useState([]);\n      const [shownColumns, setShownColumns] = React.useState([\"user\", \"host\", \"domain\", \"description\", \"last_checkin\", \"type\", \"c2\", \"ip\", \"os\"]);\n      const handleSelectAllClick = (event) => {\n        if (event.target.checked) {\n          if(selected.length > 0){\n            setSelected([]);\n          }else{\n            const newSelecteds = props.callbacks.map((n) => n.id);\n            setSelected(newSelecteds);\n          }\n          \n          return;\n        }\n        setSelected([]);\n      };\n      const handleClick = (event, name) => {\n        const selectedIndex = selected.indexOf(name);\n        let newSelected = [];\n        if (selectedIndex === -1) {\n          newSelected = newSelected.concat(selected, name);\n        } else if (selectedIndex === 0) {\n          newSelected = newSelected.concat(selected.slice(1));\n        } else if (selectedIndex === selected.length - 1) {\n          newSelected = newSelected.concat(selected.slice(0, -1));\n        } else if (selectedIndex > 0) {\n          newSelected = newSelected.concat(\n            selected.slice(0, selectedIndex),\n            selected.slice(selectedIndex + 1),\n          );\n        }\n        setSelected(newSelected);\n      };\n      const isSelected = (name) => selected.indexOf(name) !== -1;\n      const handleRequestSort = (event, property) => {\n        const isAsc = orderBy === property && order === 'asc';\n        setOrder(isAsc ? 'desc' : 'asc');\n        setOrderBy(property);\n      };\n      const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            snackActions.warning(data);\n            console.log(data);\n        }\n    });\n    const [lockCallback] = useMutation(lockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Locked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [unlockCallback] = useMutation(unlockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Unlocked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [updateDescription] = useMutation(updateDescriptionCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Updated Callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const [updateSleep] = useMutation(updateSleepInfoCallbackMutation, {\n      update: (cache, {data}) => {\n        snackActions.success(\"Updated Callback\");\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const hideSelected = () => {\n      let updated_selected = [...selected];\n      for(let i = 0; i < props.callbacks.length; i++){\n        if(updated_selected.includes(props.callbacks[i][\"id\"])){\n          hideCallback({variables: {callback_id: props.callbacks[i][\"id\"]}});\n          updated_selected = updated_selected.filter(e => e !== props.callbacks[i][\"id\"]);\n        }\n      }\n      setSelected(updated_selected);\n      //\n    }\n    const onSubmitAdjustColumns = ({left, right}) => {\n      setShownColumns(right);\n      localStorage.setItem(\"callbacks_table_columns\", JSON.stringify(right));\n    }\n    \n    const tableHeadCells = useMemo( () => [\n        {id: \"id\", numeric: true, disablePadding: false, label: \"Interact\"},\n        {id: \"ip\", numeric: false, disablePadding: false, label: \"IP\"},\n        {id: \"host\", numeric: false, disablePadding: false, label: \"Host\"},\n        {id: \"user\", numeric: false, disablePadding: false, label: \"User\"},\n        {id: \"domain\", numeric: false, disablePadding: false, label: \"Domain\"},\n        {id: \"os\", numeric: false, disablePadding: false, label: \"OS\"},\n        {id: \"arch\", numberic: false, disablePadding: false, label: \"Arch\"},\n        {id: \"pid\", numeric: true, disablePadding: false, label: \"PID\"},\n        {id: \"last_checkin\", numeric: true, disablePadding: false, label: \"Last Checkin\"},\n        {id: \"description\", numeric: false, disablePadding: false, label: \"Description\"},\n        {id: \"sleep\", numeric: false, disablePadding: true, label: \"Sleep\"},\n        {id: \"type\", numeric: false, disablePadding: false, label: \"Type\"},\n        {id: \"c2\", numeric: false, disablePadding: true, label: \"C2\"},\n        {id: \"process_name\", numeric: false, disablePadding: true, label: \"Process Name\"},\n        {id: \"external_ip\", numberic: false, disablePadding: true, label: \"External IP\"}\n    ], []);\n    useEffect( () => {\n      const ids = tableHeadCells.map( (cell) => cell.id);\n      const allColumnNames = ids.filter( i => i !== \"id\");\n      setAllColumns(allColumnNames);\n      let localSettings = localStorage.getItem(\"callbacks_table_columns\");\n      if(localSettings !== null){\n        setShownColumns(JSON.parse(localSettings));\n      }\n    }, [tableHeadCells]);\n    const toggleLock = React.useCallback( ({id, locked}) => {\n      if(locked){\n        unlockCallback({variables: {callback_id: id}})\n      }else{\n        lockCallback({variables: {callback_id: id}})\n      }\n    }, []);\n    const updateDescriptionSubmit = React.useCallback( ({id, description}) => {\n      updateDescription({variables: {callback_id: id, description}})\n    }, []);\n    const updateSleepInfo = React.useCallback( ({id, sleep_info}) => {\n      updateSleep({variables: {callback_id: id, sleep_info}})\n    }, [])\n    const taskSelected = () => {\n      snackActions.warning(\"Not Implemented Yet\")\n    }\n    return (\n        <React.Fragment>\n            <EnhancedTableToolbar numSelected={selected.length} onHideSelected={hideSelected} onTaskSelected={taskSelected} openDialog={() => setOpenAdjustColumnsDialog(true)}/>\n              <TableContainer component={Paper} className=\"mythicElement\" style={{\"maxWidth\": \"100%\", marginRight: \"5px\", overflow: \"auto\"}}>\n                    <Table size=\"small\">\n                        <EnhancedTableHead shownColumns={shownColumns} numSelected={selected.length} \n                          rowCount={props.callbacks.length} classes={classes} headCells={tableHeadCells} \n                          onSelectAllClick={handleSelectAllClick} onRequestSort={handleRequestSort} orderBy={orderBy} \n                          order={order} />\n                        <TableBody >\n                        {\n                            stableSort(props.callbacks, getComparator(order, orderBy)).map( (cal, index) => (\n                                <CallbacksTableRow shownColumns={shownColumns} handleClick={handleClick} isItemSelected={isSelected} \n                                  onOpenTab={props.onOpenTab} key={\"callback\" + cal.id} {...cal} \n                                  callbackgraphedges={props.callbackgraphedges}\n                                  toggleLock={toggleLock} updateDescription={updateDescriptionSubmit} updateSleepInfo={updateSleepInfo}\n                                  />\n                            ))\n                        }\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n                {openAdjustColumnsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openAdjustColumnsDialog} \n                  onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                  innerDialog={\n                    <MythicTransferListDialog onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                      onSubmit={onSubmitAdjustColumns} right={shownColumns} rightTitle=\"Show these columns\"\n                      leftTitle={\"Hidden Columns\"} left={allColumns} dialogTitle={\"Edit which columns are shown\"}/>}\n                />\n                }              \n        </React.Fragment>\n    )\n}\n\n","import React, {useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {useQuery, useReactiveVar, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst getP2PProfilesAndCallbacks = gql`\nquery getP2PProfilesAndCallbacks($operation_id: Int!){\n  c2profile(where: {is_p2p: {_eq: true}}) {\n    callbackc2profiles(where: {callback: {operation_id: {_eq: $operation_id}}}) {\n      id\n      callback {\n        id\n        description\n      }\n    }\n    name\n    id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    width: \"97%\"\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport function ManuallyAddEdgeDialog(props) {\n    const classes = useStyles();\n    const [callbackOptions, setCallbackOptions] = React.useState([]);\n    const [profileOptions, setProfileOptions] = React.useState([]);\n    const [selectedDestination, setSelectedDestination] = React.useState('');\n    const [selectedProfile, setSelectedProfile] = React.useState('');\n    const inputRefDestination = useRef(null); \n      const handleChangeProfile = (event) => {\n        setSelectedProfile(event.target.value);\n      };\n      const handleChangeDestination = (event) => {\n        setSelectedDestination(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(props.source.id, selectedProfile, selectedDestination.callback);\n        props.onClose();\n    }\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getP2PProfilesAndCallbacks, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const filteredProfileOptions = data.c2profile.filter( (profile) => {\n                let found = false;\n                props.source.callbackc2profiles.forEach( (source_profile) => {\n                    if(source_profile.c2profile.name === profile.name){found = true};\n                });\n                return found;\n            } );\n            setProfileOptions(filteredProfileOptions);\n            if(filteredProfileOptions.length > 0){\n                setSelectedProfile(filteredProfileOptions[0]);\n                const cbopts = filteredProfileOptions[0][\"callbackc2profiles\"].filter( (cb) => cb.callback.id !== props.source.id );\n                setCallbackOptions(cbopts);\n                if(cbopts.length > 0){\n                    setSelectedDestination(cbopts[0]);\n                }\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >Manually Add Edge From Callback {props.source.id}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                Manually add an edge from Callback {props.source.id} to another callback via a P2P C2 Profile they both share.<br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"demo-dialog-select-label-profile\">Profile</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-profile\"\n                    id=\"demo-dialog-select\"\n                    \n                    value={selectedProfile}\n                    onChange={handleChangeProfile}\n                    style={{minWidth: \"30%\"}}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {profileOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"profile:\" + opt.id}>{opt.name}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl><br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel ref={inputRefDestination}>Destination</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-destination\"\n                    id=\"demo-dialog-select-destination\"\n                    value={selectedDestination}\n                    \n                    onChange={handleChangeDestination}\n                    input={<Input />}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {callbackOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"callback:\" + opt.callback.id}>{opt.callback.id} ({opt.callback.description})</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: muiTheme.palette.success.main}}>\n            Add\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect, useState, useMemo} from 'react';\nimport {drawC2PathElements, getNodeEdges} from './C2PathDialog';\nimport {Button} from '@material-ui/core';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport {useMutation } from '@apollo/client';\nimport {saveSvgAsPng} from 'save-svg-as-png';\nimport {hideCallbackMutation, removeEdgeMutation, addEdgeMutation} from './CallbackMutations';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {ManuallyAddEdgeDialog} from './ManuallyAddEdgeDialog';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const loadedLinkCommandsQuery = gql`\nquery loadedLinkCommandsQuery ($callback_id: Int!){\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_ilike: \"graph_view:link\"}, deleted: {_eq: false}}}) {\n    command {\n        id\n        cmd\n        help_cmd\n        description\n        needs_admin\n    }\n  }\n}\n`;\n\nexport function CallbacksGraph({onOpenTab, callbackgraphedges}){\n    const theme = useTheme();\n    const dagreRef = useRef(null);    \n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [reZoom, setReZoom] = useState(true);\n    //used for creating a task to do a link command\n    const [linkCommands, setLinkCommands] = React.useState([]);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openSelectLinkCommandDialog, setOpenSelectLinkCommandDialog] = React.useState(false);\n    const [selectedLinkCommand, setSelectedLinkCommand] = useState();\n    const [selectedCallback, setSelectedCallback] = useState();\n    const [manuallyRemoveEdgeDialogOpen, setManuallyRemoveEdgeDialogOpen] = useState(false);\n    const [manuallyAddEdgeDialogOpen, setManuallyAddEdgeDialogOpen] = useState(false);\n    const [edgeOptions, setEdgeOptions] = useState([]); // used for manuallyRemoveEdgeDialog\n    const [addEdgeSource, setAddEdgeSource] = useState(null); // used for manuallyAddEdgeDialog\n    const [getLinkCommands] = useLazyQuery(loadedLinkCommandsQuery, {fetchPolicy: \"network-only\",\n        onCompleted: data => {            \n            if(data.loadedcommands.length === 1){\n                //no need for a popup, there's only one possible command\n                setSelectedLinkCommand(data.loadedcommands[0].command);\n                setOpenParametersDialog(true);\n            }else if(data.loadedcommands.length === 0){\n                //no possible command can be used, do a notification\n                snackActions.warning(\"No commands loaded that are 'link' commands\");\n            }else{\n                const cmds = data.loadedcommands.map( (cmd) => { return {...cmd, display: cmd.command.cmd} } );\n                setLinkCommands(cmds);\n                setSelectedLinkCommand(cmds[0].command);\n                setOpenSelectLinkCommandDialog(true);\n            }\n        }});\n    const onSubmitSelectedLinkCommand = (cmd) => {\n        setSelectedLinkCommand(cmd.command);\n        //console.log(cmd);\n        setOpenParametersDialog(true);\n    }\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"task created\");\n            }\n            \n        }\n    });\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: selectedCallback.id, command: cmd, params: parameters, files}});\n    }\n    const [viewConfig, setViewConfig] = React.useState({\n        rankDir: \"LR\",\n        label_components: [\"id\", \"user\"],\n        packet_flow_view: true,\n        include_disconnected: true,\n        show_all_nodes: false\n    });\n    const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyRemoveEdge] = useMutation(removeEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyAddEdge] = useMutation(addEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const onSubmitManuallyRemoveEdge = (edge) => {\n        if(edge === \"\"){\n            snackActions.warning(\"No edge selected\");\n            return;\n        }\n        manuallyRemoveEdge({variables: {edge_id: edge.edge_id, end_timestamp: (new Date()).toISOString()}});\n    }\n    const onSubmitManuallyAddEdge = (source_id, profile, destination) => {\n        if(profile === \"\" || destination === \"\"){\n            snackActions.warning(\"Profile or Destination Callback not provided\");\n            return;\n        }\n        manuallyAddEdge({variables: {source_id: source_id, profile_id: profile.id, destination_id: destination.id}});\n        //console.log(\"want to submit: \", source_id, profile, destination);\n    }\n    const node_events = useMemo(() => {return {\n        \"mouseover\": (parent, node, d) => {return},\n        \"mouseout\": (parent, node, d) => {return},\n        \"click\": (parent, node, d) => {return},\n        \"contextmenu\":  [\n\t        {\n\t\t        title: 'Hide Callback',\n\t\t        action: function(g, elm) {\n\t\t            hideCallback({variables: {callback_id: elm.node.id}});\n\t\t        }\n\t        },\n\t        {\n\t\t        title: 'Interact',\n\t\t        action: function(g, elm){\n\t\t            onOpenTab({tabType: \"interact\", tabID: elm.node.id + \"interact\", callbackID: elm.node.id});\n\t            }\n            },\n            {\n\t            title: \"Manually Remove Edge\",\n\t            action: function(g, elm){\n\t                const edges = getNodeEdges(g, elm.node.id);\n\t                const opts = edges.reduce( (prev, e) => {\n\t                    const fulledg = g.edge(e.v, e.w, e.name);\n\t                    if(fulledg.end_timestamp === null){\n\t                        if(fulledg.direction === 1){\n\t                            if(viewConfig[\"packet_flow_view\"]){\n\t                                return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                            }else{\n\t                                return [...prev, {...fulledg, \"display\": e.v + \" --> \" + e.name + \" --> \" + e.w}];\n\t                            }\n\t                        }else{\n\t                            return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                        }\n\t                        \n\t                    }else{\n\t                        return [...prev];\n\t                    }\n\t                }, []);\n\t                setEdgeOptions(opts);\n\t                setManuallyRemoveEdgeDialogOpen(true);\n                }\n            },\n            {\n                title: \"Manually Add Edge\",\n                action: function(g, elm){\n                    setAddEdgeSource(elm.node);\n                    setManuallyAddEdgeDialogOpen(true);\n                }\n\t        },\n\t        {\n\t            title: \"Task Callback for Edge\",\n\t            action: function(g, elm){\n\t                setLinkCommands([]);\n                    setSelectedLinkCommand(null);\n                    setSelectedCallback(null);\n\t                getLinkCommands({variables: {callback_id: elm.node.id} });\n\t                setSelectedCallback(elm.node);\n\t                \n                }\n            },\n        ]       \n    }}, [getLinkCommands, hideCallback, viewConfig, onOpenTab]);\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setDropdownOpen(false);\n    };\n    const options = [{name: viewConfig[\"include_disconnected\"] ? 'Show Only Active Edges' : \"Show All Edges\", click: () => {\n                        const view = {...viewConfig, include_disconnected: !viewConfig[\"include_disconnected\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }}, \n                     {name: viewConfig[\"show_all_nodes\"] ? 'Hide inactive callbacks' : 'Show All Callbacks', click: () => {\n                        const view = {...viewConfig, show_all_nodes: !viewConfig[\"show_all_nodes\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: 'Autosize', click: () => {\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, viewConfig, node_events, theme);\n                     }}, \n                     {name: viewConfig[\"rankDir\"] === \"LR\" ? 'Change Layout to Top-Bottom' : \"Change Layout to Left-Right\", click: () => {\n                        if(viewConfig[\"rankDir\"] === \"LR\"){\n                            const view = {...viewConfig, rankDir: \"BT\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }else{\n                            const view = {...viewConfig, rankDir: \"LR\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }\n                     }},\n                     {name: viewConfig[\"packet_flow_view\"] ? \"View Connection Directions\" : \"View Egress Routes\" , click: () => {\n                        const view = {...viewConfig, packet_flow_view: !viewConfig[\"packet_flow_view\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: \"Download Graph\", click: () => {\n                        saveSvgAsPng(document.getElementById(\"callbacksgraph\"), \"diagram.png\");\n                     }}];\n    const getConfigString = () => {\n        let config = \"\";\n        config += viewConfig[\"include_disconnected\"] ? \"Showing All Edges, \" : \"Showing Only Active Edges, \";\n        config += viewConfig[\"show_all_nodes\"] ? \"Showing All Callbacks, \" : \"Showing Active Callbacks, \";\n        config += \"Layout: \" + viewConfig[\"rankDir\"] + \", \";\n        config += viewConfig[\"packet_flow_view\"] ? \"Showing Egress Routes\" : \"Showing Connections Paths\";\n        return config;\n    }\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n      };\n    useEffect( () => {\n        const allEdges = [...callbackgraphedges];\n        drawC2PathElements(allEdges, dagreRef, reZoom, viewConfig, node_events, theme);\n        setReZoom(false);\n    }, [callbackgraphedges, reZoom, viewConfig, theme])\n    return (\n        <div style={{maxWidth: \"100%\", \"overflow\": \"auto\", height: \"100%\"}}>\n            <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginTop: \"10px\"}} color=\"primary\">\n                <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}>\n                        Actions <ArrowDropDownIcon />\n                </Button>\n            </ButtonGroup>\n            {getConfigString()}\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                      <MenuList id=\"split-button-menu\">\n                        {options.map((option, index) => (\n                          <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(event, index)}\n                          >\n                            {option.name}\n                          </MenuItem>\n                        ))}\n                      </MenuList>\n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyRemoveEdgeDialogOpen}\n                    onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} identifier=\"edge_id\" display=\"display\"\n                                        onSubmit={onSubmitManuallyRemoveEdge} options={edgeOptions} title={\"Manually Remove Edge\"} action={\"remove\"} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyAddEdgeDialogOpen}\n                    onClose={()=>{setManuallyAddEdgeDialogOpen(false);}} \n                    innerDialog={<ManuallyAddEdgeDialog onClose={()=>{setManuallyAddEdgeDialogOpen(false);}}\n                                        onSubmit={onSubmitManuallyAddEdge} source={addEdgeSource} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedLinkCommand} callback={selectedCallback} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectLinkCommandDialog}\n                    onClose={()=>{setOpenSelectLinkCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectLinkCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedLinkCommand} options={linkCommands} title={\"Select Link Command\"} \n                                        action={\"select\"} display={\"display\"} identifier={\"display\"}/>}\n                />\n            \n                <svg id=\"callbacksgraph\" ref={dagreRef} width=\"100%\" height=\"90%\"></svg> \n            </div>\n    );\n}\n\n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {CallbacksTable} from './CallbacksTable';\nimport {CallbacksGraph} from './CallbacksGraph';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n  }\n}\n `;\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\nexport function CallbacksTop({onOpenTab, topDisplay, heights}){\n    const me = useReactiveVar(meState);\n    const [callbacks, setCallbacks] = React.useState([]);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Callbacks, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbacks(subscriptionData.data.callback);\n        }\n    });\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const onOpenTabLocal = ({tabType, tabID, callbackID}) => {\n      for(let i = 0; i < callbacks.length; i++){\n        if(callbacks[i][\"id\"] === callbackID){\n          const tabData = {tabID, tabType, callbackID, \n              payloadtype: callbacks[i][\"payload\"][\"payloadtype\"][\"ptype\"],\n              payloadtype_id: callbacks[i][\"payload\"][\"payloadtype\"][\"id\"],\n              operation_id: callbacks[i][\"operation_id\"],\n              payloadDescription: callbacks[i][\"payload\"][\"tag\"],\n              callbackDescription: callbacks[i][\"description\"],\n              host: callbacks[i][\"host\"],\n              os: callbacks[i][\"payload\"][\"os\"]};\n          onOpenTab(tabData);\n        }\n      }\n    }\n    return (\n      <div style={{height: \"100%\", maxHeight: \"100%\", overflow: \"auto\"}}>\n        {topDisplay === \"graph\" ? (\n          <CallbacksGraph maxHeight={\"100%\"} topHeight={heights.top} key={\"callbacksgraph\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        ) : (\n          <CallbacksTable key={\"callbackstable\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        )}\n        </div>\n    );\n}","import React, { useEffect }  from 'react';\nimport {CallbacksTabs} from './CallbacksTabs';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AspectRatioIcon from '@material-ui/icons/AspectRatio';\nimport TocIcon from '@material-ui/icons/Toc';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport {HeightsDialog} from './HeightsDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CallbacksTop} from './CallbacksTop';\n\n const useStyles = makeStyles((theme) => ({\n  root: {\n    transform: 'translateZ(0px)',\n    flexGrow: 1,\n  },\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n    '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n      top: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n  },\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\nexport function Callbacks(){\n    const [topDisplay, setTopDisplay] = React.useState(\"table\");\n    const [openTabs, setOpenTabs] = React.useState([]);\n    const [clickedTabId, setClickedTabId] = React.useState(\"\");\n    const [heights, setHeights] = React.useState({top: \"30%\", bottom: \"69%\"});\n    useEffect( () => {\n      const oldTabs = localStorage.getItem(\"openTabs\");\n      if(oldTabs !== undefined && oldTabs !== null){\n        try{\n          const tabs = JSON.parse(oldTabs);\n          setOpenTabs(tabs);\n          const lastClickedTab = localStorage.getItem(\"clickedTab\");\n          if(lastClickedTab !== undefined && lastClickedTab !== null){\n            setClickedTabId(lastClickedTab);\n          }\n        }catch(error){\n          console.log(\"failed to parse oldTabs\", error);\n        }\n      }\n      const oldHeights = localStorage.getItem(\"heights\");\n      if(oldHeights !== undefined && oldHeights !== null){\n        try{\n          const newHeights = JSON.parse(oldHeights);\n          setHeights(newHeights);\n        }catch(error){\n          console.log(\"failed to parse oldHeights\", error);\n        }\n      }\n    }, []);\n    const onOpenTab = (tabData) => {\n        let found = false;\n        openTabs.forEach( (tab) => {\n            if(tab.tabID === tabData.tabID) found = true;\n        });\n        //console.log(\"found is\", found, tabData.tabID, tabData.tabType, tabData.callbackID, openTabs);\n        if(!found){\n          const tabs = [...openTabs, {...tabData}];\n          localStorage.setItem(\"openTabs\", JSON.stringify(tabs));\n          setOpenTabs(tabs);\n        }\n        localStorage.setItem(\"clickedTab\", tabData.tabID);\n        setClickedTabId(tabData.tabID);\n    };\n    const onEditTabDescription = (tabInfo, description) => {\n      const tabs = openTabs.map( (t) => {\n        if(t.tabID === tabInfo.tabID){\n          return {...t, customDescription: description};\n        }else{\n          return {...t};\n        }\n      });\n      setOpenTabs(tabs);\n      localStorage.setItem(\"openTabs\", JSON.stringify(tabs));\n    }\n    const onCloseTab = ({tabID, index}) => {\n        const tabSet = openTabs.filter( (tab) => {\n            return tab.tabID !== tabID;\n        });\n        localStorage.setItem(\"openTabs\", JSON.stringify(tabSet));\n        setOpenTabs(tabSet);\n    };\n    const clearSelectedTab =  React.useCallback(() => {\n        setClickedTabId(\"\");\n    }, []);\n    \n    const onSubmitHeights = React.useCallback( (newHeights) => {\n        setHeights(newHeights);\n        localStorage.setItem(\"heights\", JSON.stringify(newHeights));\n    }, []);\n    return (\n        <div style={{maxWidth: \"100%\", height: \"100%\", maxHeight: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n              <React.Fragment>\n                <SpeedDialWrapper setTopDisplay={setTopDisplay} heights={heights} onSubmitHeights={onSubmitHeights}/>\n                <div style={{maxHeight: heights.top, height: heights.top}}>\n                  <CallbacksTop topDisplay={topDisplay} onOpenTab={onOpenTab} heights={heights}/>\n                </div>\n                <div style={{maxHeight: heights.bottom, height: heights.bottom}}>\n                  <CallbacksTabs onCloseTab={onCloseTab} onEditTabDescription={onEditTabDescription} clearSelectedTab={clearSelectedTab} tabHeight={heights.bottom} maxHeight={heights.bottom} key={\"callbackstabs\"} clickedTabId={clickedTabId} openTabs={openTabs} />\n                </div>\n              </React.Fragment>\n            \n        </div>\n    );\n}\n\nfunction SpeedDialWrapperPreMemo({setTopDisplay, onSubmitHeights, heights}) {\n  const [open, setOpen] = React.useState(false);\n  const classes = useStyles();\n  const [openHeightsDialog, setOpenHeightsDialog] = React.useState(false);\n  const submitHeights = (newHeights) => {\n    setOpen(false);\n    onSubmitHeights(newHeights);\n  }\n  const actions = React.useMemo( () => [\n    { icon: <TocIcon />, name: 'Table layout', onClick: () => {setTopDisplay(\"table\")}},\n    { icon: <AssessmentIcon />, name: 'Graph layout', onClick: () => {setTopDisplay(\"graph\")}},\n    { icon: <AspectRatioIcon />, name: 'Adjust Top/Bottom Size' , onClick: () => {setOpenHeightsDialog(true);setOpen(false);}},\n  ], []);\n  return (\n    <React.Fragment>\n      {openHeightsDialog && \n        <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openHeightsDialog} \n                onClose={()=>{setOpenHeightsDialog(false);setOpen(false);}} \n                innerDialog={<HeightsDialog onClose={()=>{setOpenHeightsDialog(false);setOpen(false);}} heights={heights} onSubmit={submitHeights} />}\n            />\n      }\n      <SpeedDial\n          ariaLabel=\"SpeedDial example\"\n          className={classes.speedDial}\n          icon={<SpeedDialIcon />}\n          onClose={()=>{setOpen(false);}}\n          onOpen={()=>{setOpen(true);}}\n          FabProps={{ color: \"secondary\" }}\n          open={open}\n          style={{marginTop: \"35px\"}}\n          direction=\"down\"\n        >\n          {actions.map((action) => (\n            <SpeedDialAction\n              arrow\n              key={action.name}\n              TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n              icon={action.icon}\n              tooltipTitle={action.name}\n              onClick={action.onClick}\n            />\n          ))}\n        </SpeedDial>\n      </React.Fragment>\n  )\n}\nconst SpeedDialWrapper = React.memo(SpeedDialWrapperPreMemo);","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport {taskingDataFragment} from '../Callbacks/CallbacksTabsTasking'\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst fetchLimit = 20;\nconst responseSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, responses: {response_text: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, responses: {response_text: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst parameterSearch = gql`\n${taskingDataFragment}\nquery parametersQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst commentSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\n\nexport function SearchTabTasksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tasks\"} iconComponent={<AssignmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTasksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const searchFieldOptions = [\"Output\", \"Parameters\", \"Comment\"];\n    const [filterTaskStatus, setFilterTaskStatus] = React.useState(\"\");\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const handleFilterTaskStatusValueChange = (name, value, error) => {\n        setFilterTaskStatus(value);\n        props.changeSearchParam(\"taskStatus\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField, queryTaskStatus) => {\n            let adjustedSearchField = querySearchField ? querySearchField : searchField;\n            let adjustedSearch = querySearch ? querySearch : search;\n            let adjustedTaskStatus = queryTaskStatus ? queryTaskStatus : filterTaskStatus;\n            switch(adjustedSearchField){\n            case \"Output\":\n                props.onOutputSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            case \"Parameters\":\n                props.onParameterSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Output\";\n            let adjustedTaskStatus = \"\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Output\");\n                props.onChangeSearchField(\"Output\");\n                props.changeSearchParam(\"searchField\", \"Output\");\n            }\n            if(queryParams.has(\"taskStatus\")){\n                setFilterTaskStatus(queryParams.get(\"taskStatus\"));\n                props.onChangeTaskStatus(queryParams.get(\"taskStatus\"));\n                adjustedTaskStatus = queryParams.get(\"taskStatus\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField, adjustedTaskStatus);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Task's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Filter Task Status...\" value={filterTaskStatus}\n                        onChange={handleFilterTaskStatusValueChange} onEnter={submitSearch} name=\"Filter Task Status...\"/>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTasksPanel = (props) =>{\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const [taskStatus, setTaskStatus] = React.useState(\"\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n    }\n    const onChangeTaskStatus = (status) => {\n        setTaskStatus(status);\n    }\n    const handleCallbackSearchSuccess = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.task_aggregate.aggregate.count);\n        setTaskingData({task: data.task});\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getOutputSearch] = useLazyQuery(responseSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const [getParameterSearch] = useLazyQuery(parameterSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const onOutputSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        getOutputSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onParameterSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        getParameterSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onCommentSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        console.log(\"search\", search);\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        setSearch(search);\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: 0, taskStatus});\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: 0, taskStatus});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0, taskStatus});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTasksSearchPanel onChangeSearchField={onChangeSearchField} onOutputSearch={onOutputSearch} value={props.value} index={props.index} onChangeTaskStatus={onChangeTaskStatus}\n                onParameterSearch={onParameterSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                \n                {\n                    taskingData.task.length > 0 ? (\n                        taskingData.task.map( (task) => (\n                            <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} />\n                        ))\n                    ) : (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>)\n                }\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport {useTheme} from '@material-ui/core/styles';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\n\nconst useStyles =  makeStyles(theme => ({\n  root: {\n      [theme.breakpoints.up('sm')]: {\n          minWidth: '344px !important',\n      },\n  },\n  typography: {\n      fontWeight: 'bold',\n  },\n  actionRoot: {\n      padding: '8px 8px 8px 16px',\n  },\n  icons: {\n      marginLeft: 'auto',\n      float: \"right\"\n  },\n  expand: {\n      padding: '8px 8px',\n      transform: 'rotate(0deg)',\n      transition: theme.transitions.create('transform', {\n          duration: theme.transitions.duration.shortest,\n      }),\n  },\n  expandOpen: {\n      transform: 'rotate(180deg)',\n  },\n  collapse: {\n      padding: 16,\n  },\n  checkIcon: {\n      fontSize: 20,\n      color: '#b3b3b3',\n      paddingRight: 4,\n  },\n  button: {\n      padding: 0,\n      textTransform: 'none',\n  },\n}));\n\nexport const MythicSnackDownload = React.forwardRef((props, ref) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const { closeSnackbar } = useSnackbar();\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpandClick = () => {\n      setExpanded(!expanded);\n  };\n\n  const handleDismiss = () => {\n      closeSnackbar(props.id);\n  };\n\n  return (\n      <SnackbarContent ref={ref} className={classes.root}>\n          <Card style={{backgroundColor: theme.palette.success.main}} >\n              <CardActions classes={{ root: classes.actionRoot }}>\n                  <Typography variant=\"subtitle2\" className={classes.typography}>{props.title}</Typography>\n                  <div className={classes.icons}>\n                      <IconButton\n                          aria-label=\"Show more\"\n                          className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                          onClick={handleExpandClick}\n                      >\n                          <ExpandMoreIcon />\n                      </IconButton>\n                      <IconButton className={classes.expand} onClick={handleDismiss}>\n                          <CloseIcon />\n                      </IconButton>\n                  </div>\n              </CardActions>\n              <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                  <Paper className={classes.collapse}>\n                      <Typography gutterBottom>{props.innerText}</Typography>\n                      <Button size=\"small\" className={classes.button} download href={props.downloadLink}>\n                          <CheckCircleIcon className={classes.checkIcon} />\n                          Download now\n                      </Button>\n                  </Paper>\n              </Collapse>\n          </Card>\n      </SnackbarContent>\n  );\n});","import React, {useEffect} from 'react';\nimport {Button, Link, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\nimport {useTheme} from '@material-ui/core/styles';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Switch from '@material-ui/core/Switch';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport ArchiveIcon from '@material-ui/icons/Archive';\nimport { gql, useMutation } from '@apollo/client';\nimport { ResponseDisplayScreenshotModal } from '../Callbacks/ResponseDisplayScreenshotModal';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst downloadBulkQuery = gql`\nmutation downloadBulkMutation($files: [String!]!){\n    download_bulk(files: $files){\n        status\n        error\n        file_id\n    }\n}\n`;\nconst updateFileDeleted = gql`\nmutation updateFileMutation($file_id: Int!){\n    deleteFile(file_id: $file_id) {\n        status\n        error\n        file_ids\n    }\n}\n`;\nconst updateFileComment = gql`\nmutation updateCommentMutation($file_id: Int!, $comment: String!){\n    update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileMetaDownloadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({file_ids}) => {\n        const updated = files.map( (file) => {\n            if(file_ids.includes(file.id)){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >File</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaDownloadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        onEditComment={onEditComment}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaDownloadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.deleteFile);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <Tooltip title=\"Toggle to download multiple files at once\">\n                            <Switch\n                                checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                                onChange={onSelectChanged}\n                                color=\"primary\"\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"select_multiple\"\n                                />\n                        </Tooltip>\n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>{props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell style={{width: \"16rem\"}}>md5</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>sha1</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (\n                                                        null\n                                                    ) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaUploadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({file_ids}) => {\n        const updated = files.map( (file) => {\n            if(file_ids.includes(file.id)){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Source</TableCell>\n                        <TableCell >Destination</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaUploadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        onEditComment={onEditComment}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaUploadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.deleteFile);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <Tooltip title=\"Toggle to download multiple files at once\">\n                            <Switch\n                                checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                                onChange={onSelectChanged}\n                                color=\"primary\"\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"select_multiple\"\n                                />\n                        </Tooltip>\n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" download underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.filename_text}</Link>\n                </TableCell>\n                <TableCell  style={{wordBreak: \"break-all\"}}>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>\n                    {props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaScreenshotTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"400px\"}}>Thumbnail</TableCell>\n                        <TableCell >Filename</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaScreenshotTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\nfunction FileMetaScreenshotTableRow(props){\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [openScreenshot, setOpenScreenshot] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    \n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell >\n                    <img onClick={() => setOpenScreenshot(true)} src={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} style={{width: \"350px\", cursor: \"pointer\"}} />\n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n                        onClose={()=>{setOpenScreenshot(false);}} \n                        innerDialog={<ResponseDisplayScreenshotModal href={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} onClose={()=>{setOpenScreenshot(false);}} />} />\n                        {props.chunks_received < props.total_chunks ? (<Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>) : (null)}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.filename_text}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>\n                    {props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}","import React, { useEffect } from 'react';\nimport {Button, IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog, MythicViewJSONAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport {DownloadHistoryDialog} from '../Callbacks/DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst updateFileComment = gql`\nmutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!){\n    update_filebrowserobj_by_pk(pk_columns: {id: $filebrowserobj_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileBrowserTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updates = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment}\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updates);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Host / Path</TableCell>\n                        <TableCell >Modify Time</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Permissions</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Downloads</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileBrowserTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileBrowserTableRow(props){\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filebrowserobj_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {filebrowserobj_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title=\"View Permissions Data\" leftColumn=\"Permission\" rightColumn=\"Value\" value={props.permissions} onClose={()=>{setViewPermissionsDialogOpen(false);}} />}\n                    />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileHistoryDialogOpen} \n                    onClose={()=>{setFileHistoryDialogOpen(false);}} \n                    innerDialog={<DownloadHistoryDialog title=\"Download History\" value={props.filemeta} onClose={()=>{setFileHistoryDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit File Browser Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", textDecoration: props.deleted ? \"strike-through\" : \"\"}}>{props.full_path_text}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.modify_time}</Typography>\n                </TableCell>\n                <TableCell><IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton><Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography></TableCell>\n                <TableCell>\n                    <Button color=\"primary\" variant=\"outlined\" onClick={() => setViewPermissionsDialogOpen(true)}><PlaylistAddCheckIcon /></Button>\n                </TableCell>\n                <TableCell>\n                    {props.filemeta.length > 0 ? (\n                        <Tooltip title=\"View Download History and Download Files\">\n                            <Button color=\"primary\" variant=\"contained\" onClick={() => setFileHistoryDialogOpen(true)}><HistoryIcon /></Button>\n                        </Tooltip>\n                    ): (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {FileMetaDownloadTable, FileMetaUploadTable, FileMetaScreenshotTable} from './FileMetaTable';\nimport {FileBrowserTable} from './FileBrowserTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst fileMetaFragment = gql`\nfragment filemetaData on filemeta{\n    agent_file_id\n    chunk_size\n    chunks_received\n    complete\n    deleted\n    filename_text\n    full_remote_path_text\n    host\n    id\n    is_download_from_agent\n    is_payload\n    is_screenshot\n    md5\n    operator {\n        id\n        username\n    }\n    comment\n    sha1\n    timestamp\n    total_chunks\n    task {\n        id\n        comment\n        command {\n            cmd\n            id\n        }\n    }\n}\n`;\nconst fileBrowserFragment = gql`\nfragment filebrowserData on filebrowserobj{\n    comment\n    deleted\n    full_path_text\n    host\n    id\n    is_file\n    modify_time\n    permissions\n    size\n    filemeta {\n        id\n        agent_file_id\n        chunks_received\n        complete\n        total_chunks\n        timestamp\n        task {\n            id\n            comment\n        }\n    }\n}\n`;\nconst fetchLimit = 20;\nconst filenameFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaUploadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaDownloadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {full_path_text: {_ilike: $filename}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, full_path_text: {_ilike: $filename}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst hashFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaUploadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaUploadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst filenameFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaScreenshotQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaScreenshotQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaScreenshotQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nexport function SearchTabFilesLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Files\"} iconComponent={<AttachmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabFilesSearchPanel = (props) => {\n    const theme = useTheme();\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const searchFieldOptions = [\"Filename\", \"Hash\", \"Comment\"];\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const searchLocationOptions = [\"Uploads\", \"Downloads\", \"FileBrowser\", \"Screenshots\"];\n    const [parsedSearch, setParsedSearch] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchLocationChange = (event) => {\n        setSearchLocation(event.target.value);\n        props.onChangeSearchLocation(event.target.value);\n        props.changeSearchParam(\"location\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const handleSearchHostValueChange = (name, value, error) => {\n        setSearchHost(value);\n        props.changeSearchParam(\"host\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchHost, querySearchField, querySearchLocation) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        let adjustedSearchHost = querySearchHost ? querySearchHost : searchHost;\n        let adjustedSearchLocation = querySearchLocation ? querySearchLocation : searchLocation;\n        switch(adjustedSearchField){\n            case \"Filename\":\n                props.onFilenameSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            case \"Hash\":\n                props.onHashSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            default:\n                break;\n        }\n    }\n    const uploadFile = (file) => {\n        try {\n            let xhr = new XMLHttpRequest();\n            let fd = new FormData();\n            xhr.open(\"POST\", window.location.origin + \"/api/v1.4/files/manual\", true);\n            //xhr.withCredentials = true;\n            xhr.setRequestHeader(\"Authorization\", \"Bearer \" + localStorage.getItem(\"access_token\"));\n            //xhr.setRequestHeader(\"refresh_token\", localStorage.getItem(\"refresh_token\"));\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    try{\n                        let response = JSON.parse(xhr.responseText);\n                        if(response[\"status\"] === \"success\"){\n                            snackActions.success(\"Successfuly hosted file! Now searchable on the 'Uploads' search\");\n                        }else{\n                            snackActions.error(\"Failed to host file! \" + response[\"error\"]);\n                        }\n                    }catch(error){\n                        snackActions.error(\"Failed to process response from upload: \" + error);\n                        console.log(error);\n                    }\n                } else if (xhr.readyState === 4 && (xhr.status === 302 || xhr.status === 405)) {\n                    // either got redirected or try to post/put to a bad path\n                    console.log(\"httpGetAsync was 302 or 405 from url \");\n                    snackActions.error(\"Got HTTP 302 or 405 when trying to host file\");\n                } else if (xhr.readyState === 4) {\n                    console.log(\"httpGetAsync Error with data: \" + fd);\n                    snackActions.error(\"Mythic hit an error trying to hos the file: \" + xhr.status + \": \" + xhr.statusText);\n                }\n            };\n            fd.append(\"upload_file\", file);\n            xhr.send(fd);\n        } catch (error) {\n            snackActions.error(\"HTTP Browser error trying to upload file: \" + error.toString());\n            console.error(\"HTTP Browser error: \" + error.toString());\n        }\n    \n    }\n    const onFileChange = (evt) => {  \n        uploadFile(evt.target.files[0]);\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchHost = \"\";\n            let adjustedSearchField = \"Filename\";\n            let adjustedSearchLocation = \"Downloads\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Filename\");\n                props.onChangeSearchField(\"Filename\");\n                props.changeSearchParam(\"searchField\", \"Filename\");\n            }\n            if(queryParams.has(\"location\") && searchLocationOptions.includes(queryParams.get(\"location\"))){\n                setSearchLocation(queryParams.get(\"location\"));\n                adjustedSearchLocation = queryParams.get(\"location\");\n                props.onChangeSearchLocation(queryParams.get(\"location\"));\n            }\n            if(queryParams.has(\"host\")){\n                setSearchHost(queryParams.get(\"host\"));\n                adjustedSearchHost = queryParams.get(\"host\")\n            }\n            setParsedSearch(!parsedSearch);\n            submitSearch(null, adjustedSearch, adjustedSearchHost, adjustedSearchField, adjustedSearchLocation);\n        }\n    }, [props.value, props.index]);\n    return (\n        <Grid container spacing={1} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Host Name Search...\" value={searchHost}\n                    onChange={handleSearchHostValueChange} onEnter={submitSearch} name=\"Host Name Search...\" />\n            </Grid>\n            <Grid item xs={3}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search File's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n            <FormLabel component=\"legend\">Search Location</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchLocation}\n                    onChange={handleSearchLocationChange}\n                >\n                    {\n                        searchLocationOptions.map((opt, i) => (\n                            <MenuItem key={\"searchlocopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <Button variant=\"contained\" color=\"primary\" component=\"label\">Host File in Mythic <input onChange={onFileChange} type=\"file\" hidden /></Button>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabFilesPanel = (props) =>{\n    const [fileMetaData, setFileMetaData] = React.useState([]);\n    const [fileBrowserData, setFileBrowserData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n    }\n    const onChangeSearchLocation = (field) => {\n        setSearchLocation(field);\n        setFileMetaData([]);\n        setFileBrowserData([]);\n    }\n    const handleFileMetaSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.filemeta_aggregate.aggregate.count);\n        setFileBrowserData([]);\n        setFileMetaData(data.filemeta);\n    }\n    const handleFileBrowserSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.filebrowserobj_aggregate.aggregate.count);\n        setFileBrowserData(data.filebrowserobj);\n        setFileMetaData([]);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getfilenameFileMetaUploadSearch] = useLazyQuery(filenameFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileMetaDownloadSearch] = useLazyQuery(filenameFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileBrowserSearch] = useLazyQuery(filenameFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileMetaScreenshotSearch] = useLazyQuery(filenameFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaUploadSearch] = useLazyQuery(hashFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaDownloadSearch] = useLazyQuery(hashFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaScreenshotSearch] = useLazyQuery(hashFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaUploadSearch] = useLazyQuery(commentFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaDownloadSearch] = useLazyQuery(commentFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileBrowserSearch] = useLazyQuery(commentFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaScreenshotSearch] = useLazyQuery(commentFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onFilenameSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            getfilenameFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            getfilenameFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            getfilenameFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getfilenameFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onHashSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            snackActions.dismiss();\n            snackActions.warning(\"FileBrowser doesn't currently track file hashes\");\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            gethashFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            gethashFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            gethashFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onCommentSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        setSearch(new_search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            getcommentFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            getcommentFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            getcommentFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getcommentFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    \n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabFilesSearchPanel onChangeSearchField={onChangeSearchField} onFilenameSearch={onFilenameSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onHashSearch={onHashSearch} onCommentSearch={onCommentSearch} onChangeSearchLocation={onChangeSearchLocation} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {fileMetaData.length > 0 ? (\n                    searchLocation === \"Uploads\" ? (<FileMetaUploadTable files={fileMetaData} />) : (searchLocation === \"Downloads\" ? (<FileMetaDownloadTable files={fileMetaData} />) : (<FileMetaScreenshotTable files={fileMetaData} />))\n                ) : (fileBrowserData.length > 0 ? (<FileBrowserTable files={fileBrowserData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                ))}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst updateCredentialComment = gql`\nmutation updateCommentMutation($credential_id: Int!, $comment: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {comment: $comment}) {\n        comment\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialAccount = gql`\nmutation updateAccountMutation($credential_id: Int!, $account: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {account: $account}) {\n        account\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialRealm = gql`\nmutation updateAccountMutation($credential_id: Int!, $realm: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {realm: $realm}) {\n        realm\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialCredential = gql`\nmutation updateAccountMutation($credential_id: Int!, $credential: bytea!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {credential_raw: $credential}) {\n        credential_text\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialDeleted = gql`\nmutation updateAccountMutation($credential_id: Int!, $deleted: Boolean!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\n\nexport function CredentialTable(props){\n    const [credentials, setCredentials] = React.useState([]);\n    useEffect( () => {\n        setCredentials([...props.credentials]);\n    }, [props.credentials]);\n    const onEditComment = ({id, comment, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, comment, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditAccount = ({id, account, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, account, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditRealm = ({id, realm, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, realm, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditCredential = ({id, credential_text, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, credential_text, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditDeleted = ({id, deleted, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Account</TableCell>\n                        <TableCell >Realm</TableCell>\n                        <TableCell >Credential</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell >Timestamp</TableCell>\n                        <TableCell >Task / Operator</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Type</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {credentials.map( (op) => (\n                    <CredentialTableRow\n                        key={\"cred\" + op.id}\n                        onEditComment={onEditComment}\n                        onEditAccount={onEditAccount}\n                        onEditRealm={onEditRealm}\n                        onEditCredential={onEditCredential}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CredentialTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [editAccountDialogOpen, setEditAccountDialogOpen] = React.useState(false);\n    const [editRealmDialogOpen, setEditRealmDialogOpen] = React.useState(false);\n    const [editCredentialDialogOpen, setEditCredentialDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateCredentialComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_credential_by_pk);\n        }\n    });\n    const [updateAccount] = useMutation(updateCredentialAccount, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated account\");\n            props.onEditAccount(data.update_credential_by_pk);\n        }\n    });\n    const [updateRealm] = useMutation(updateCredentialRealm, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated realm\");\n            props.onEditRealm(data.update_credential_by_pk);\n        }\n    });\n    const [updateCredential] = useMutation(updateCredentialCredential, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated credential\");\n            props.onEditCredential(data.update_credential_by_pk);\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated deleted status\");\n            props.onEditDeleted(data.update_credential_by_pk);\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {credential_id: props.id, comment: comment}})\n    }\n    const onSubmitUpdatedAccount = (account) => {\n        updateAccount({variables: {credential_id: props.id, account: account}})\n    }\n    const onSubmitUpdatedRealm = (realm) => {\n        updateRealm({variables: {credential_id: props.id, realm: realm}})\n    }\n    const onSubmitUpdatedCredential = (credential) => {\n        updateCredential({variables: {credential_id: props.id, credential: credential}})\n    }\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {credential_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editAccountDialogOpen} \n                    onClose={()=>{setEditAccountDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Account\" onSubmit={onSubmitUpdatedAccount} value={props.account} onClose={()=>{setEditAccountDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editRealmDialogOpen} \n                    onClose={()=>{setEditRealmDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Realm\" onSubmit={onSubmitUpdatedRealm} value={props.realm} onClose={()=>{setEditRealmDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCredentialDialogOpen} \n                    onClose={()=>{setEditCredentialDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Credential\" onSubmit={onSubmitUpdatedCredential} value={props.credential_text} onClose={()=>{setEditCredentialDialogOpen(false);}} />}\n                />\n                \n                <TableCell>{props.deleted ? (\n                    <Tooltip title=\"Restore Credential for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Delete Credential so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <IconButton onClick={() => setEditAccountDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.account}</Typography>\n                </TableCell>\n                <TableCell >\n                    <IconButton onClick={() => setEditRealmDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.realm}</Typography>\n                </TableCell>\n                <TableCell >\n                    <IconButton onClick={() => setEditCredentialDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.credential_text}</Typography>\n                </TableCell>\n                <TableCell>\n                    <IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography>\n                    </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.task_id !== null ? (\n                        props.task_id\n                    ): (props.operator.username)}\n                </TableCell>\n                <TableCell>{props.type}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {CredentialTable} from './CredentialTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CredentialTableNewCredentialDialog} from './CredentialTableNewCredentialDialog';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst fetchLimit = 20;\nconst accountSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $account: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst realmSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $realm: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst credentialSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $credential: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst commentSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $comment: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      id\n    }\n  }\n`;\n\nexport function SearchTabCredentialsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Credentials\"} iconComponent={<VpnKeyIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCredentialsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const searchFieldOptions = [\"Account\", \"Realm\", \"Comment\", \"Credential\"];\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Account\":\n                props.onAccountSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Realm\":\n                props.onRealmSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Credential\":\n                props.onCredentialSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.OnTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Account\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Account\");\n                props.onChangeSearchField(\"Account\");\n                props.changeSearchParam(\"searchField\", \"Account\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={5}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Credential's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                    onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                    innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                />\n                <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCredentialsPanel = (props) =>{\n    const [credentialaData, setCredentialData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setCredentialData([]);\n    }\n    const handleCredentialSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.credential_aggregate.aggregate.count);\n        setCredentialData(data.credential);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getAccountSearch] = useLazyQuery(accountSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getRealmSearch] = useLazyQuery(realmSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCredentialSearch] = useLazyQuery(credentialSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onAccountSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getAccountSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            account: \"%\" + search + \"%\",\n        }})\n    }\n    const onRealmSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getRealmSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            realm: \"%\" + search + \"%\",\n        }})\n    }\n    const onCredentialSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCredentialSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            credential: \"%\" + search + \"%\",\n        }})\n    }\n    const onCommentSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            comment: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: 0});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: 0});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: 0});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabCredentialsSearchPanel onChangeSearchField={onChangeSearchField} onAccountSearch={onAccountSearch} value={props.value} index={props.index}\n                onRealmSearch={onRealmSearch} onCredentialSearch={onCredentialSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {credentialaData.length > 0 ? (\n                    <CredentialTable credentials={credentialaData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\n\nexport function KeylogsTable(props){\n    const [keylogs, setKeylogs] = React.useState([]);\n    useEffect( () => {\n        const condensed = props.keylogs.reduce( (prev, cur) => {\n            if(prev[cur.user] === undefined){\n                prev[cur.user] = {[cur.task.callback.host]: {[cur.window]: [{...cur}]}}\n            }else if(prev[cur.user][cur.task.callback.host] === \"undefined\"){\n                prev[cur.user][cur.task.callback.host] = {[cur.window]: [{...cur}]}\n            }else if(prev[cur.user][cur.task.callback.host][cur.window] === undefined){\n                prev[cur.user][cur.task.callback.host][cur.window] = [{...cur}];\n            }else{\n                prev[cur.user][cur.task.callback.host][cur.window].push({...cur});\n            }\n            return {...prev}\n        },{})\n        //now that we have it split into a dictionary, we need to split it back out into an array for easy processing\n        let newArrayData = [];\n        for(const [key, value] of Object.entries(condensed)){\n            // key should be a User, Host, or Window\n            let newSecondLevel = [];\n            //console.log(\"key\", key, \"value\", value);\n            for(const [key2, value2] of Object.entries(value)){\n                // key2 should be a Host, User, or Host\n                let newThirdLevel = []\n                //console.log(\"key2\", key2, \"value2\", value2);\n                for( const[key3, value3] of Object.entries(value2)){\n                    // key3 should be Window, Window, or User\n                    // value3 should always be an array of keylog entries so we can get the actual keystrokes\n                    //console.log(\"key3\", key3, \"value3\", value3);\n                    newThirdLevel.push({\"name\": key3, \"value\": value3});\n                }\n                //console.log(\"newThirdLevel\", newThirdLevel);\n                newSecondLevel.push({\"name\": key2, \"value\": newThirdLevel});\n            }\n            newArrayData.push({\"name\": key, \"value\": newSecondLevel});\n        }\n        //console.log(newArrayData);\n        setKeylogs([...newArrayData]);\n    }, [props.keylogs]);\n//k0[\"name\"]\n    return (\n        <Grid container spacing={0} direction=\"row\" columns={12}>\n            {keylogs.map( k0 => (\n                <React.Fragment key={k0[\"name\"]}>\n                    <Grid item xs={2} style={{borderBottom: \"2px solid grey\"}}>{k0[\"name\"]}</Grid>\n                    <Grid container item spacing={0} xs={10} style={{borderBottom: \"2px solid grey\"}}>\n                        {k0.value.map( (k1, k1i) => (\n                            <React.Fragment key={k0[\"name\"] + k1[\"name\"]}>\n                                <Grid item xs={2} style={{borderBottom: k1i + 1 !== k0.value.length ? \"2px solid grey\": \"\"}}>{k1[\"name\"]}</Grid>\n                                <Grid container item spacing={0} xs={10} style={{borderBottom: k1i + 1 !== k0.value.length ? \"2px solid grey\" : \"\"}}>\n                                    {k1.value.map( (k2, k2i) => (\n                                        <React.Fragment key={k0[\"name\"] + k1[\"name\"] + k2[\"name\"]}>\n                                            <Grid item xs={2} style={{borderBottom: k2i + 1 !== k1.value.length ? \"2px solid grey\" : \"\"}}> {k2[\"name\"]} </Grid>\n                                            <Grid container item spacing={0} xs={10} style={{borderBottom: k2i + 1 !== k1.value.length ? \"2px solid grey\": \"\"}}>\n                                                <Grid item xs={12}>\n                                                    {k2.value.map( (k3, k3i) => (\n                                                        <span key={k0[\"name\"] + k1[\"name\"] + k2[\"name\"] + k3i}>{k3.keystrokes_text}</span>\n                                                    ))}\n                                                </Grid>\n                                            </Grid>\n                                        </React.Fragment>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>\n                        ))}\n                    </Grid>\n                </React.Fragment>\n            ))}\n        </Grid>\n    )\n}\n\n/*\n    <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.task.callback.host}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.keystrokes_text}</Typography>\n                </TableCell>\n*/\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {KeylogsTable} from './KeylogsTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst keylogFragment = gql`\nfragment keylogData on keylog{\n    keystrokes_text\n    task {\n        id\n        callback {\n            host\n            id\n        }\n    }\n    user\n    window\n    timestamp\n    id\n}\n`;\nconst fetchLimit = 200;\nconst keylogSearch = gql`\n${keylogFragment}\nquery keylogQuery($operation_id: Int!, $keylog: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userUniqueSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: user, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: user, offset: $offset, order_by: {user: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programUniqueSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: window, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: window, offset: $offset, order_by: {window: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst hostSearch = gql`\n${keylogFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\n\nexport function SearchTabKeylogsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Keylogs\"} iconComponent={<KeyboardIcon />} {...props}/>\n    )\n}\n\nconst SearchTabKeylogsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const searchFieldOptions = [\"Keystroke\", \"User\", \"Program\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Keystroke\":\n                props.onKeylogSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Program\":\n                props.onProgramSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Keystroke\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Keystroke\");\n                props.onChangeSearchField(\"Keystroke\");\n                props.changeSearchParam(\"searchField\", \"Keystroke\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Keylog's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabKeylogsPanel = (props) =>{\n    const [keylogData, setKeylogData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setKeylogData([]);\n    }\n    const handleKeylogSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.keylog_aggregate.aggregate.count);\n        setKeylogData(data.keylog);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getKeylogSearch] = useLazyQuery(keylogSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getUserUniqueSearch] = useLazyQuery(userUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique User\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramSearch] = useLazyQuery(programSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramUniqueSearch] = useLazyQuery(programUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique Program\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onKeylogSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getKeylogSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            keylog: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getUserUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%_%\",\n            }})\n        }else{\n            getUserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onProgramSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getProgramUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%_%\",\n            }})\n        }else{\n            getProgramSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: 0});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabKeylogsSearchPanel onChangeSearchField={onChangeSearchField} onKeylogSearch={onKeylogSearch} value={props.value} index={props.index}\n                onUserSearch={onUserSearch} onProgramSearch={onProgramSearch} onHostSearch={onHostSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {keylogData.length > 0 ? (\n                    <KeylogsTable keylogs={keylogData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($token_id: Int!, $description: String) {\n  update_token_by_pk(pk_columns: {id: $token_id}, _set: {description: $description}) {\n    description\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    description\n    id\n  }\n}\n`;\n\nexport function TokenDescriptionDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    useQuery(getCommentQuery, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            setComment(data.token_by_pk.description)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        onCompleted: (data) => {\n          console.log('udpated');\n          props.onClose();\n        },\n        onError: (data) => {\n          console.error(data);\n          props.onClose();\n        }\n        \n    });\n    const onCommitSubmit = () => {\n        updateComment({variables: {token_id: props.token_id, description: comment}});\n        \n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Token Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport EditIcon from '@material-ui/icons/Edit';\nimport {TaskTokenDialog} from '../Callbacks/TaskTokenDialog';\nimport {TokenDescriptionDialog} from './TokenDescriptionDialog';\n\nconst updateCredentialDeleted = gql`\nmutation updateCredentialDeletedMutation($token_id: Int!, $deleted: Boolean!){\n    update_token_by_pk(pk_columns: {id: $token_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n    }\n}\n`;\nconst updateCallbacksOfDeletedToken = gql`\nmutation updateCallbacksOfDeletedTokenMutation($token_id: Int!, $deleted: Boolean!){\n    update_callbacktoken(where: {token_id: {_eq: $token_id}}, _set: {deleted: $deleted}) {\n        affected_rows\n    }\n}\n`;\n\nexport function TokenTable(props){\n    const [tokens, setTokens] = React.useState([]);\n    useEffect( () => {\n        setTokens([...props.tokens]);\n    }, [props.credentials]);\n\n    const onEditDeleted = ({id, deleted}) => {\n        const updates = tokens.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted}\n            }else{\n                return {...cred}\n            }\n        });\n        setTokens(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Groups</TableCell>\n                        <TableCell >TokenId</TableCell>\n                        <TableCell >Logon Session</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callbacks With Handles</TableCell>\n                        <TableCell >Host</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {tokens.map( (op) => (\n                    <TokenTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction TokenTableRow(props){\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [viewTokenDialog, setViewTokenDialog] = React.useState(false);\n    const [editDescriptionDialog, setEditDescriptionDialog] = React.useState(false);\n    const [updateCallbackTokensDeleted] = useMutation(updateCallbacksOfDeletedToken, {\n        onCompleted: (data) => {\n            snackActions.success(\"Removed token from callback\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated deleted status\");\n            if(props.callbacktokens !== null && !props.deleted){\n                //token was deleted, make sure to delete associated callback tokens too\n                updateCallbackTokensDeleted({variables: {token_id: props.id, deleted: true}})\n            }\n            props.onEditDeleted(data.update_token_by_pk);\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {token_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                \n                <TableCell>{props.deleted ? (\n                    <Tooltip title=\"Restore Token for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Delete Token so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.User}</Typography>\n                    \n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.Groups}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.TokenId}</Typography>\n                    <Tooltip title=\"View Token Information\"><IconButton size=\"small\" color=\"primary\" onClick={()=>{setViewTokenDialog(true);}}><ConfirmationNumberIcon/></IconButton></Tooltip>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewTokenDialog} \n                        onClose={()=>{setViewTokenDialog(false);}} \n                        innerDialog={<TaskTokenDialog token_id={props.id} onClose={()=>{setViewTokenDialog(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    {props.logonsession === null ? (\n                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>No Logon Session Data</Typography>\n                    ) : (\n                        <React.Fragment>\n                            {props.logonsession.LogonId} {props.logonsession.LogonType !== null ? (\" (\" + props.logonsession.LogonType + \")\") : (null)}\n                        </React.Fragment>\n                    )}\n                    </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                    <IconButton onClick={() => setEditDescriptionDialog(true)} size=\"small\"><EditIcon /></IconButton>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={editDescriptionDialog} \n                            onClose={()=>{setEditDescriptionDialog(false);}} \n                            innerDialog={<TokenDescriptionDialog token_id={props.id} onClose={()=>{setEditDescriptionDialog(false);}}/>}\n                        />\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>{props.callbacktokens?.map( (cbt) => (\n                        cbt.callback_id\n                    )) || null\n                }</TableCell>\n                <TableCell>{props.host}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {TokenTable} from './TokenTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst tokenFragment = gql`\nfragment tokenData on token{\n    id\n    User\n    Groups\n    TokenId\n    logonsession {\n        LogonType\n        UserName\n        LogonDomain\n        id\n        LogonId\n        authenticationpackages(where: {deleted: {_eq: false}}) {\n            Name\n            id\n        }\n    }\n    task {\n        id\n    }\n    host\n    deleted\n    description\n    callbacktokens(where: {deleted: {_eq: false}}) {\n        callback_id\n        id\n    }\n}\n`;\nconst fetchLimit = 20;\nconst userGroupSearch = gql`\n${tokenFragment}\nquery usergroupQuery($operation_id: Int!, $name: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst SIDSearch = gql`\n${tokenFragment}\nquery sidQuery($operation_id: Int!, $sid: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst logonTypeSearch = gql`\n${tokenFragment}\nquery logontypeQuery($operation_id: Int!, $logontype: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n  }\n`;\nconst hostSearch = gql`\n${tokenFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n}\n`;\nexport function SearchTabTokensLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tokens\"} iconComponent={<ConfirmationNumberIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTokensSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const searchFieldOptions = [\"User/Group\", \"SID\", \"LogonType\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"User/Group\":\n                props.onUserGroupSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"SID\":\n                props.onSIDSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"LogonType\":\n                props.onLogonTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User/Group\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User/Group\");\n                props.onChangeSearchField(\"User/Group\");\n                props.changeSearchParam(\"searchField\", \"User/Group\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Tokens by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTokensPanel = (props) =>{\n    const [tokenData, setTokenData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setTokenData([]);\n    }\n    const handleTokenSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.token_aggregate.aggregate.count);\n        setTokenData(data.token);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getUserGroupSearch] = useLazyQuery(userGroupSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getSIDSearch] = useLazyQuery(SIDSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getLogonTypeSearch] = useLazyQuery(logonTypeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onUserGroupSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserGroupSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            name: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onLogonTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getLogonTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            logontype: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onSIDSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getSIDSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            sid: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: 0});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: 0});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTokensSearchPanel onChangeSearchField={onChangeSearchField} onUserGroupSearch={onUserGroupSearch} value={props.value} index={props.index}\n                onLogonTypeSearch={onLogonTypeSearch} onHostSearch={onHostSearch} onSIDSearch={onSIDSearch} changeSearchParam={props.changeSearchParam} />\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {tokenData.length > 0 ? (\n                    <TokenTable tokens={tokenData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport {  useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {toggleHideCallbackMutations} from '../Callbacks/CallbackMutations';\n\nexport function CallbackSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, active}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Hide</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >IP</TableCell>\n                        <TableCell >Process Name</TableCell>\n                        <TableCell >ID</TableCell>\n                        <TableCell>Checkin Times</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(toggleHideCallbackMutations, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated active status\");\n            props.onEditDeleted({id: props.id, active: !props.active});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id, active: !props.active}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.active ? \"Hide\" : \"Restore\" }/>\n                \n                <TableCell>{!props.active ? (\n                    <Tooltip title=\"Restore Callback for Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Hide Callback so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.ip}\n                </TableCell>\n                <TableCell>\n                    {props.process_name}\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Initial: {toLocalTime(props.init_callback, me.user.view_utc_time)}\n                    </Typography>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Latest: {toLocalTime(props.last_checkin, me.user.view_utc_time)}\n                    </Typography>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {CallbackSearchTable} from './CallbackSearchTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n}\n`;\nconst fetchLimit = 50;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      ...callbackData\n    }\n}\n`;\nconst hostSearch = gql`\n${callbackFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst domainSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $domain: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst descriptionSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $description: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst ipSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $ip: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabCallbacksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Callbacks\"} iconComponent={<PhoneCallbackIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCallbacksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const searchFieldOptions = [\"User\", \"Domain\", \"Host\", \"Description\", \"IP\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Domain\":\n                props.onDomainSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Description\":\n                props.onDescriptionSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"IP\":\n                props.onIPSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            console.log(queryParams.get(\"searchField\"));\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User\");\n                props.onChangeSearchField(\"User\");\n                props.changeSearchParam(\"searchField\", \"User\");\n            }\n            submitSearch(null, adjustedSearch,  adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Callbacks by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCallbacksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setCallbackData([]);\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.callback_aggregate.aggregate.count);\n        setCallbackData(data.callback);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getDomainSearch] = useLazyQuery(domainSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getDescriptionSearch] = useLazyQuery(descriptionSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getIPSearch] = useLazyQuery(ipSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            user: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDomainSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDomainSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            domain: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDescriptionSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDescriptionSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            description: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onIPSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getIPSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            ip: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: 0});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n                <SearchTabCallbacksSearchPanel onChangeSearchField={onChangeSearchField} onUserSearch={onUserSearch} onIPSearch={onIPSearch} value={props.value} index={props.index}\n                    onDomainSearch={onDomainSearch} onHostSearch={onHostSearch} onDescriptionSearch={onDescriptionSearch} changeSearchParam={props.changeSearchParam}/>\n                <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                    {callbackData.length > 0 ? (\n                        <CallbackSearchTable callbacks={callbackData} />) : (\n                        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                    )}\n                </div>\n                <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingTop: \"5px\", paddingBottom: \"5px\"}}>\n                    <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                            siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                        <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n                </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function ArtifactTable(props){\n    const [artifacts, setArtifacts] = React.useState([]);\n    useEffect( () => {\n        setArtifacts([...props.artifacts]);\n    }, [props.artifacts]);\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{}}>\n            <Table stickyHeader size=\"small\" style={{}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Type</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callback</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {artifacts.map( (op) => (\n                    <ArtifactTableRow\n                        key={\"cred\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction ArtifactTableRow(props){\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.artifact.name}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.task.callback_id}>\n                            {props.task.callback_id}\n                    </Link>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.host}</Typography>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.artifact_instance_text}</Typography>\n                </TableCell>\n              \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {ArtifactTable} from './ArtifactTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst artifactFragment = gql`\nfragment artifactData on taskartifact{\n    id\n    artifact_instance_text\n    host\n    id\n    timestamp\n    artifact {\n        name\n        description\n    }\n    task {\n        id\n        callback_id\n        command {\n            cmd\n        }\n    }\n}\n`;\nconst fetchLimit = 100;\nconst artifactSearch = gql`\n${artifactFragment}\nquery artifactQuery($operation_id: Int!, $artifact: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      ...artifactData\n    }\n}\n`;\nconst hostSearch = gql`\n${artifactFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst commandSearch = gql`\n${artifactFragment}\nquery commandQuery($operation_id: Int!, $command: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst typeSearch = gql`\n${artifactFragment}\nquery typeQuery($operation_id: Int!, $type: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst taskSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $task_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst callbackSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $callback_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\n\nexport function SearchTabArtifactsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Artifacts\"} iconComponent={<FingerprintIcon />} {...props}/>\n    )\n}\n\nconst SearchTabArtifactsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const searchFieldOptions = [\"Artifact\", \"Command\", \"Host\", \"Type\", \"Task\", \"Callback\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Artifact\":\n                props.onArtifactSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Command\":\n                props.onCommandSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.onTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Task\":\n                props.onTaskSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Callback\":\n                props.onCallbackSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Artifact\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Artifact\");\n                props.onChangeSearchField(\"Artifact\");\n                props.changeSearchParam(\"searchField\", \"Artifact\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Artifacts by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabArtifactsPanel = (props) =>{\n    const [artifactData, setArtifactData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setArtifactData([]);\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.taskartifact_aggregate.aggregate.count);\n        setArtifactData(data.taskartifact);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getArtifactSearch] = useLazyQuery(artifactSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommandSearch] = useLazyQuery(commandSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getTypeSearch] = useLazyQuery(typeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getTaskSearch] = useLazyQuery(taskSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCallbackSearch] = useLazyQuery(callbackSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onArtifactSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getArtifactSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            artifact: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onCommandSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommandSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            command: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            type: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTaskSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a task number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getTaskSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            task_id: parseInt(search),\n        }})\n    }\n    const onCallbackSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a callback number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCallbackSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            callback_id: search,\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: 0});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: 0});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: 0});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n                <SearchTabArtifactsSearchPanel onChangeSearchField={onChangeSearchField} onArtifactSearch={onArtifactSearch} onTaskSearch={onTaskSearch} value={props.value} index={props.index}\n                        onCommandSearch={onCommandSearch} onHostSearch={onHostSearch} onTypeSearch={onTypeSearch} onCallbackSearch={onCallbackSearch} changeSearchParam={props.changeSearchParam}/>\n         \n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {artifactData.length > 0 ? (\n                    <ArtifactTable artifacts={artifactData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingTop: \"5px\", paddingBottom: \"10px\"}}>\n                <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n                \n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst stopSocks = gql`\nmutation StopSocksMutation($callback_id: Int!){\n    stop_socks(callback_id: $callback_id){\n        status\n        error\n    }\n}\n`;\n\nexport function SocksSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, port: null}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Stop</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >ID</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(stopSocks, {\n        onCompleted: (data) => {\n            snackActions.success(\"Stopped Socks on that Port\");\n            props.onEditDeleted({id: props.id});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={\"Stop Socks\"}/>\n                \n                <TableCell>{props.port ? (\n                    <Tooltip title=\"Stop Socks Port on Mythic Server\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                ) : ( null )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, { useEffect } from 'react';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {SocksSearchTable} from './SocksSearchTable';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n    port\n}\n`;\nconst fetchLimit = 20;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabSocksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"SOCKS\"} iconComponent={<FontAwesomeIcon icon={faSocks} size=\"lg\" />} {...props}/>\n    )\n}\n\nexport const SearchTabSocksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const me = useReactiveVar(meState);\n    const [onSocksSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.callback_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Socks Running\");\n            }\n            setTotalCount(data.callback_aggregate.aggregate.count);\n            setCallbackData(data.callback);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for socks\");\n            console.log(data);\n        }\n    });\n    useEffect(() => {\n        if(props.value === props.index){\n            onSocksSearch({variables: {offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }\n    }, [props.value, props.index])\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            onSocksSearch({variables: { offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }else{\n            onSocksSearch({variables: { offset: (value - 1) * fetchLimit, operation_id: me.user.current_operation_id, fetchLimit}});        \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {callbackData.length > 0 ? (\n                    <SocksSearchTable callbacks={callbackData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {SearchTabTasksLabel, SearchTabTasksPanel} from './SearchTabTasks';\nimport {SearchTabFilesLabel, SearchTabFilesPanel} from './SearchTabFiles';\nimport {SearchTabCredentialsLabel, SearchTabCredentialsPanel} from './SearchTabCredentials';\nimport {SearchTabKeylogsLabel, SearchTabKeylogsPanel} from './SearchTabKeylog';\nimport {SearchTabTokensLabel, SearchTabTokensPanel} from './SearchTabTokens';\nimport {SearchTabCallbacksLabel, SearchTabCallbacksPanel} from './SearchTabCallbacks';\nimport {SearchTabArtifactsLabel, SearchTabArtifactsPanel} from './SearchTabArtifacts';\nimport {SearchTabSocksLabel, SearchTabSocksPanel} from './SearchTabSocks';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nexport function Search(props){\n  const classes = useStyles();\n  const tabTypes = [\"callbacks\", \"tasks\", \"files\", \"credentials\", \"keylogs\", \"artifacts\", \"tokens\", \"socks\"];\n  var params = new URLSearchParams(window.location.search);\n  var valueString = params.get(\"tab\");\n  var valueIndex = tabTypes.findIndex(t => t === valueString);\n  var value = valueIndex === -1 ? 0 : valueIndex;\n\n  const handleChange = (event, newValue) => {\n      params.set(\"tab\", tabTypes[newValue]);\n      var newRelativePathQuery = window.location.pathname + \"?\" + params.toString();\n      props.history.push(newRelativePathQuery);\n  };\n\nconst changeSearchParam = (name, value) => {\n  params.set(name, value);\n  var newRelativePathQuery = window.location.pathname + \"?\" + params.toString();\n  props.history.push(newRelativePathQuery);\n}\nreturn (\n  <div className={classes.root} style={{  height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n      <AppBar position=\"static\" color=\"default\">\n        <Tabs \n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n        >\n        {\n            tabTypes.map( (tab, index) => {\n              switch (tab){\n                case \"tasks\":\n                  return <SearchTabTasksLabel key={\"taskstab\"} />;\n                case \"files\":\n                  return <SearchTabFilesLabel key={\"filestab\"} />;\n                case \"credentials\":\n                  return <SearchTabCredentialsLabel key={\"credentialstab\"} />;\n                case \"keylogs\":\n                  return <SearchTabKeylogsLabel key={\"keylogstab\"} />;\n                case \"tokens\":\n                  return <SearchTabTokensLabel key={\"tokenstab\"} />;\n                case \"callbacks\":\n                  return <SearchTabCallbacksLabel key={\"callbackstab\"} />;\n                case \"artifacts\":\n                  return <SearchTabArtifactsLabel key={\"artifactstab\"} />;\n                case \"socks\":\n                  return <SearchTabSocksLabel key={\"sockstab\"} />;\n                default:\n                  return (null);\n              }\n            })\n        }\n        </Tabs>\n      </AppBar>\n      {\n        tabTypes.map( (tab, index) => {\n          switch(tab){\n              case \"tasks\":\n                return <SearchTabTasksPanel key={\"taskspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"callbacks\":\n                return <SearchTabCallbacksPanel key={\"callbackspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"files\":\n                return <SearchTabFilesPanel key={\"filespanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"credentials\":\n                return <SearchTabCredentialsPanel key={\"credentialspanel\"} index={index} value={value} changeSearchParam={changeSearchParam}/>\n              case \"keylogs\":\n                return <SearchTabKeylogsPanel key={\"keylogspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"tokens\":\n                return <SearchTabTokensPanel key={\"tokenspanel\"} index={index} value={value}  changeSearchParam={changeSearchParam} />\n              case \"artifacts\":\n                return <SearchTabArtifactsPanel key={\"artifactspanel\"} index={index} value={value}  changeSearchParam={changeSearchParam} />\n              case \"socks\":\n                return <SearchTabSocksPanel key={\"sockspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              default:\n                return (null);\n          }\n        })\n      }\n  </div>\n)\n} \n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { Link } from 'react-router-dom';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {snackActions} from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst SUB_Event_Logs = gql`\nsubscription MySubscription($operation_id: Int!) {\n  operationeventlog_aggregate(where: {deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}, operation_id: {_eq: $operation_id}}) {\n    aggregate{\n        count\n    }\n  }\n}\n `;\n \n const useStyles = makeStyles((theme) => ({\n    tooltip: {\n      backgroundColor: theme.palette.background.contrast,\n      color: theme.palette.text.contrast,\n      boxShadow: theme.shadows[1],\n      fontSize: 13\n    },\n    arrow: {\n      color: theme.palette.background.contrast,\n    }\n  }));\nexport function TopAppBarNotifications(props) {\n    const me = useReactiveVar(meState);\n    const classes = useStyles();\n  const { loading, error, data } = useSubscription(SUB_Event_Logs, {\n      variables: {operation_id: me?.user?.current_operation_id || 0},\n    onError: data => {\n        snackActions.error(\"Mythic encountered an error getting event log messages: \" + data.toString());\n        console.error(data);\n    }\n  });\n\n    return (    \n        <IconButton color=\"inherit\" component={Link} to='/new/EventFeed' style={{float: \"right\"}}>\n            <Tooltip title=\"Event Feed\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n            { \n                loading ? (\n                    <Badge color=\"secondary\" badgeContent={0}>\n                        <CircularProgress size={20} thickness={4} />\n                    </Badge>\n                ) : \n                \n                (\n                    error ? (\n                        <Badge color=\"secondary\" badgeContent={0}>\n                            <ErrorIcon />\n                        </Badge>\n                    ) : (\n                        <Badge badgeContent={data.operationeventlog_aggregate.aggregate.count} color=\"error\">\n                            <MailIcon />\n                        </Badge>\n                    )\n                )\n                \n            }\n            </Tooltip>\n        </IconButton>\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {snackActions} from './utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription EventFeedNotificationSubscription($fromNow: timestamp!, $operation_id: Int!) {\n  operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    operator {\n        username\n    }\n    message\n    level\n    resolved\n    source\n  }\n}\n `;\n\nexport function EventFeedNotifications(props) {\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n\n    const { loading, error, data } = useSubscription(subscribe_payloads, {\n        variables: {fromNow: fromNow.current, operation_id: me?.user?.current_operation_id || 0}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get event notifications\");\n        }\n    });\n\n    useEffect( () => {\n        //console.log(data, loading, error, fromNow.current);\n        if(!loading && !error && data && data.operationeventlog.length > 0){\n            if(data.operationeventlog[0].source === \"debug\"){\n                return;\n            }\n            if(data.operationeventlog[0].operator ){\n                const message = data.operationeventlog[0].operator.username + \":\" + data.operationeventlog[0].message;\n                snackActions.toast(message, data.operationeventlog[0].level, { autoHideDuration: 2000});\n            }else if(!data.operationeventlog[0].operator){\n                snackActions.toast(data.operationeventlog[0].message, data.operationeventlog[0].level, {autoHideDuration: 3000});\n            }\n        }else if(error){\n            console.error(error);\n            snackActions.warning(\"Mythic encountered an error getting operational event stream\", {autoHideDuration: 2000});\n        }\n    }, [loading, data, error, me.user]);\n    return (    \n       null\n    );\n}\n\n","var _image;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMythicRedSmall(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"80px\",\n    height: \"66px\",\n    viewBox: \"0 0 80 66\",\n    enableBackground: \"new 0 0 80 66\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _image || (_image = /*#__PURE__*/React.createElement(\"image\", {\n    id: \"image0\",\n    width: 80,\n    height: 66,\n    x: 0,\n    y: 0,\n    href: \"data:image/png;base64,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\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMythicRedSmall);\nexport default __webpack_public_path__ + \"static/media/mythic_red_small.793b41cc.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Menu from '@material-ui/core/Menu';\nimport { Link } from 'react-router-dom';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState, menuOpen, FailedRefresh } from '../cache';\nimport Switch from '@material-ui/core/Switch';\nimport { TopAppBarNotifications } from './TopAppBarNotifications';\nimport { EventFeedNotifications } from './EventFeedNotifications';\nimport {Redirect} from 'react-router-dom';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport HelpIcon from '@material-ui/icons/Help';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport {ReactComponent as ReactLogo} from './mythic_red_small.svg';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport PostAddIcon from '@material-ui/icons/PostAdd';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Typography, Tooltip } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport HeadsetIcon from '@material-ui/icons/Headset';\nimport CodeIcon from '@material-ui/icons/Code';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBiohazard, faFlagCheckered} from '@fortawesome/free-solid-svg-icons';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\nimport {faCamera} from '@fortawesome/free-solid-svg-icons';\nimport {mythicVersion, mythicUIVersion} from '../index';\n\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  appBar: {\n    width: \"100%\",\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    maxWidth: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  mythicElement: {},\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport function TopAppBar(props) {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const settingsRef = React.useRef(null);\n  const documentationRef = React.useRef(null);\n  const [anchorEl, setAnchorEl] = React.useState(false);\n  const [documentationAnchorEl, setDocumentationAnchorEl] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const isOpen = useReactiveVar(menuOpen);\n  const [openGlobal, setOpenGlobal] = React.useState(false);\n  const [openCreate, setOpenCreate] = React.useState(false);\n  const [openOperations, setOpenOperations] = React.useState(false);\n  const [openData, setOpenData] = React.useState(false);\n  const handleDrawerOpen = () => {\n    menuOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    menuOpen(false);\n  };\n\n  const handleMenu = (event) => {\n    setAnchorEl(true);\n  };\n\n  const handleClose = (evt) => {\n    setAnchorEl(false);\n  };\n  const handleDocumentationMenu = (event) => {\n    setDocumentationAnchorEl(true);\n  };\n  const handleDocumentationClose = (evt) => {\n    setDocumentationAnchorEl(false);\n  };\n\n  const handleToggleGlobal = () => {\n    setOpenGlobal(!openGlobal);\n  }\n  const handleToggleCreate = () => {\n    setOpenCreate(!openCreate);\n  }\n  const handleToggleOperations = () => {\n    setOpenOperations(!openOperations);\n  }\n  const handleToggleData = () => {\n    setOpenData(!openData);\n  }\n  const handleLogout = () => {\n    menuOpen(false);\n    console.log(\"clicked logout, calling FailedRefresh\");\n    FailedRefresh();\n  }\n\n  return (\n    <React.Fragment >\n\n      {me?.user?.current_operation_id ? (<EventFeedNotifications />) : (null) }\n      <AppBar className={clsx(classes.appBar, {[classes.appBarShift]: isOpen,})}>\n        \n        { me?.loggedIn ? (\n        <Toolbar variant=\"dense\" >\n            <IconButton edge=\"start\" className={clsx(classes.menuButton, isOpen && classes.hide)} color=\"inherit\" aria-label=\"menu\" onClick={handleDrawerOpen}>\n                <MenuIcon />\n            </IconButton>\n            <div style={{width: \"100%\"}}>\n                \n                <IconButton component={Link} to='/new/payloadtypes' color=\"inherit\">\n                  <Tooltip title=\"C2 Profiles and Payload Types\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <HeadsetIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <Tooltip title=\"Payloads\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <IconButton component={Link} to='/new/payloads' color=\"inherit\">\n                      <FontAwesomeIcon icon={faBiohazard} />\n                  </IconButton>\n                </Tooltip>\n                <IconButton component={Link} to='/new/search' color=\"inherit\">\n                  <Tooltip title=\"Search Operation\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <SearchIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <IconButton component={Link} to='/new/search?searchField=Filename&tab=files&location=Downloads' color=\"inherit\">\n                  <Tooltip title=\"Files\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <AttachmentIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <IconButton component={Link} to='/new/search?searchField=Artifact&tab=artifacts' color=\"inherit\">\n                  <Tooltip title=\"Artifacts\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <FingerprintIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <Tooltip title=\"SOCKS\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                  <IconButton component={Link} to='/new/search?tab=socks' color=\"inherit\">\n                      <FontAwesomeIcon icon={faSocks} />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Screenshots\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                  <IconButton component={Link} to='/new/search?searchField=Filename&tab=files&location=Screenshots' color=\"inherit\">\n                      <FontAwesomeIcon icon={faCamera} />\n                  </IconButton>\n                </Tooltip>\n                <IconButton component={Link} to='/new/callbacks' color=\"inherit\">\n                  <Tooltip title=\"Active Callbacks\"  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <PhoneCallbackIcon className=\"mythicElement\"/>\n                  </Tooltip>\n                </IconButton>\n                <Tooltip title=\"Reporting\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                  <IconButton component={Link} to='/new/reporting' color=\"inherit\">\n                      <FontAwesomeIcon icon={faFlagCheckered} />\n                  </IconButton>\n                </Tooltip>\n                <Button style={{display: \"inline-flex\", alignItems: \"center\", paddingRight: \"10px\", color: \"white\"}} component={Link} to=\"/new/operations\">\n                    <Typography >\n                        {me?.user?.current_operation || \"No Operation Set\"}\n                    </Typography>\n                </Button>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={settingsRef}\n                    anchorEl={()=>settingsRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={anchorEl}\n                    onClose={handleClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} to=\"/new/settings\" onClick={handleClose} name=\"settings\">User Management</MenuItem>\n                    <MenuItem component={Link} to=\"/new/login\" onClick={handleLogout}>Logout</MenuItem>\n                </Menu>\n                <div style={{display: \"inline-flex\", justifyContent: \"flex-end\", float: \"right\"}}>\n                <IconButton\n                    aria-label=\"account of current user\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleMenu}\n                    ref={settingsRef}\n                    color=\"inherit\"\n                    style={{float: \"right\"}}\n                >\n                  <Tooltip title=\"Settings or Logout\"  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <AccountCircle />\n                  </Tooltip>\n                </IconButton>\n                <IconButton\n                    aria-label=\"documentation links\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleDocumentationMenu}\n                    ref={documentationRef}\n                    color=\"inherit\"\n                    style={{float:\"right\"}}\n                >\n                  <Tooltip title=\"Help Documentation\"  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n                    <HelpIcon />  \n                  </Tooltip>\n                </IconButton>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={documentationRef}\n                    anchorEl={()=>documentationRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={documentationAnchorEl}\n                    onClose={handleDocumentationClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/agents\" onClick={handleDocumentationClose}>Agent Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/wrappers\" onClick={handleDocumentationClose}>Wrapper Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/c2-profiles\" onClick={handleDocumentationClose}>C2 Profile Documentation</MenuItem>\n                    <MenuItem component={Link} href=\"https://docs.mythic-c2.net\" target=\"_blank\" onClick={handleDocumentationClose}>Mythic Documentation</MenuItem>\n                </Menu>\n                <TopAppBarNotifications />\n                { me?.user?.username ? \n                  <Typography style={{display: \"flex\", alignItems: \"center\", paddingRight: \"10px\"}} >\n                    {me?.user?.username }\n                  </Typography> : (\n                  <Redirect to='/new/login'/>\n                )}\n                </div>\n            </div>\n        </Toolbar>\n          ) : null\n        } \n      </AppBar>\n      <Drawer\n            className={classes.drawer}\n            anchor=\"left\"\n            open={isOpen}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            onEscapeKeyDown={handleDrawerClose}\n          >\n        <div className={classes.drawerHeader} role=\"presentation\">\n          <ReactLogo style={{width: \"90%\"}}/>\n          v{mythicVersion}\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon className=\"mythicElement\"/> : <ChevronRightIcon className=\"mythicElement\"/>}\n          </IconButton>\n        </div>\n        <Divider />\n        <List\n        subheader={\n          <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n            Home\n          </ListSubheader>\n        }>\n            <ListItem button component={Link} to='/new' key={\"home\"} onClick={handleDrawerClose}>\n              <ListItemIcon ><HomeIcon className=\"mythicElement\" /></ListItemIcon>\n              <ListItemText primary={\"Home\"} />\n            </ListItem>\n        </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Global Configurations\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleGlobal}>\n                <ListItemIcon><LayersIcon /></ListItemIcon>\n                <ListItemText>Services</ListItemText>\n                {openGlobal ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openGlobal} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                  <ListItem button className={classes.nested} component={Link} to='/new/payloadtypes' key={\"payloadtypes\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><InboxIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"Payload Types\"} />\n                  </ListItem>\n                  <ListItem button className={classes.nested} component={Link} to='/new/c2profiles' key={\"c2profiles\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><WifiIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"C2 Profiles\"} />\n                  </ListItem>\n                </List>\n              </Collapse>\n              <ListItem button onClick={handleToggleCreate}>\n                <ListItemIcon><PostAddIcon /></ListItemIcon>\n                <ListItemText>Create</ListItemText>\n                {openCreate ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openCreate} unmountOnExit>\n                  <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createpayload' key={\"createpayload\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Payload\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createwrapper' key={\"createwrapper\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Wrapped Payload\"} />\n                    </ListItem>\n                  </List>\n                </Collapse>\n              <ListItem button onClick={handleToggleOperations}>\n                <ListItemIcon><SupervisorAccountIcon /></ListItemIcon>\n                <ListItemText>Operations</ListItemText>\n                {openOperations ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openOperations} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/operations' key={\"modifyoperations\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><EditIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Modify Operations\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/browserscripts' key={\"browserscripts\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><CodeIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"BrowserScripts\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n            </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Operational Views\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleData}>\n                <ListItemIcon><BarChartIcon /></ListItemIcon>\n                <ListItemText>Operational Data</ListItemText>\n                {openData ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openData} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/payloads' key={\"payloads\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><FontAwesomeIcon icon={faBiohazard} size=\"lg\"/></ListItemIcon>\n                      <ListItemText primary={\"Payloads\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/search' key={\"search\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><SearchIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Search\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n                <ListItem button component={Link} to='/new/callbacks' key={\"callbacks\"} onClick={handleDrawerClose}>\n                  <ListItemIcon><PhoneCallbackIcon className=\"mythicElement\"/></ListItemIcon>\n                  <ListItemText primary={\"Active Callbacks\"} />\n                </ListItem>\n            </List>\n        <ListItem>\n        <Switch\n            checked={props.theme === 'dark'}\n            onChange={props.toggleTheme}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'primary checkbox' }}\n            name=\"darkMode\"\n          />\n        <div style={{display: \"inline-block\"}}> Enable Dark Mode </div>\n        </ListItem>\n        <ListItem>\n          UI Version: {mythicUIVersion}\n        </ListItem>\n      </Drawer>\n    </React.Fragment>\n  );\n}\n\n","import { useEffect, useState } from 'react';\nexport const useDarkMode = () => {\n    const [theme, setTheme] = useState('light');\n    const [mountedComponent, setMountedComponent] = useState(false)\n    const setMode = mode => {\n        window.localStorage.setItem('theme', mode)\n        setTheme(mode)\n    };\n\n    const themeToggler = () => {\n        theme === 'light' ? setMode('dark') : setMode('light')\n    };\n\n    useEffect(() => {\n        const localTheme = window.localStorage.getItem('theme');\n        localTheme ? setTheme(localTheme) : setMode('light')\n        setMountedComponent(true)\n    }, []);\n\n    return [theme, themeToggler, mountedComponent]\n};\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskArtifactsTable(props){\n   const [artifacts, setArtifacts] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.taskartifacts];\n    }, []);\n    condensed.sort((a,b) => (a.task_id > b.task_id) ? 1 : ((b.task_id > a.task_id) ? -1 : 0));\n    setArtifacts(condensed);\n   }, [props.tasks]);\n   if(artifacts.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Artifact Tasks\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task ID</TableCell>\n                        <TableCell>Artifact Type</TableCell>\n                        <TableCell>Host</TableCell>\n                        <TableCell>Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {artifacts.map( (artifact) => (\n                    <TableRow key={\"artifact\" + artifact.id}>\n                      <TableCell>{artifact.task_id}</TableCell>\n                      <TableCell>{artifact.artifact.name}</TableCell>\n                      <TableCell>{artifact.host}</TableCell>\n                      <TableCell>{artifact.artifact_instance_text}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskMITREATTACKTable(props){\n   const [attacks, setAttacks] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      \n      const newAdds = tsk.attacktasks.reduce( (old, attck) => {\n        if(prev.find(element => element.attack.t_num === attck.attack.t_num)){\n          return [...old];\n        }else{\n          return [...old, attck];\n        }\n      }, []);\n      return [...prev, ...newAdds];\n    }, []);\n    condensed.sort((a,b) => (a.attack.t_num > b.attack.t_num) ? 1 : ((b.attack.t_num > a.attack.t_num) ? -1 : 0));\n    setAttacks(condensed);\n    \n   }, [props.tasks]);\n   if(attacks.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                MITRE ATT&amp;CK Mappings\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Technique ID</TableCell>\n                        <TableCell>Technique</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {attacks.map( (attack) => (\n                    <TableRow key={'attack' + attack.attack.id}>\n                      <TableCell>{attack.attack.t_num}</TableCell>\n                      <TableCell>{attack.attack.name}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Link from '@material-ui/core/Link';\n\n\nexport function TaskFilesTable(props){\n   const [files, setFiles] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.filemeta];\n    }, []);\n    setFiles(condensed);\n    condensed.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n   }, [props.tasks]);\n   if(files.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Files / Screenshots\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Filename</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Remote Path</TableCell>\n                        <TableCell>Comment</TableCell>\n                        <TableCell>Hashes</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {files.map( (file) => (\n                    <TableRow key={\"file\" + file.id}>\n                      <TableCell>\n                        {!file.deleted && file.complete ? (\n                          <Link href={window.origin + \"/api/v1.4/files/download/\" + file.agent_file_id} style={{textDecoration: \"underline\", color: \"inherit\"}}>{file.filename_text}</Link>\n                        ) : ( \n                          !file.complete ? (\n                            file.filename_text +  \" (\" + file.chunks_received + \"/\" + file.total_chunks + \")\"\n                          ) : (file.filename_text)\n                         )}\n                        </TableCell>\n                      <TableCell>\n                        {file.is_screenshot ? (\"Screenshot\") : (\n                          file.is_payload ? (\"Payload\") : (\n                            file.is_download_from_agent ? (\"Download\") : (\n                              \"Upload\"\n                            )\n                          )\n                        )}\n                      </TableCell>\n                      <TableCell>{file.full_remote_path_text === \"\" ? (\"\") : (file.host + \":\" + file.full_remote_path_text) }</TableCell>\n                      <TableCell>{file.comment}</TableCell>\n                      <TableCell>MD5:<br/>{file.md5}<br/>SHA1:<br/>{file.sha1}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskCredentialsTable(props){\n   const [credentials, setCredentials] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.credentials];\n    }, []);\n    setCredentials(condensed);\n   }, [props.tasks]);\n   if(credentials.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Credentials\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Realm</TableCell>\n                        <TableCell>Account</TableCell>\n                        <TableCell>Credentials</TableCell>\n                        <TableCell>Comment</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {credentials.map( (cred) => (\n                    <TableRow key={\"cred\" + cred.id}>\n                      <TableCell>{cred.task_id}</TableCell>\n                      <TableCell>{cred.type}</TableCell>\n                      <TableCell>{cred.realm}</TableCell>\n                      <TableCell>{cred.account}</TableCell>\n                      <TableCell>{cred.credential_text}</TableCell>\n                      <TableCell>{cred.comment}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport {TaskArtifactsTable} from './TaskArtifactsTable';\nimport {TaskMITREATTACKTable} from './TaskMITREATTACKTable';\nimport {TaskFilesTable} from './TaskFilesTable';\nimport {TaskCredentialsTable} from './TaskCredentialsTable';\n\nconst MetadataQuery = gql`\nquery taskMetadataQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}) {\n      credentials {\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n        task_id\n      }\n      filemeta {\n        agent_file_id\n        complete\n        deleted\n        filename_text\n        full_remote_path_text\n        host\n        id\n        comment\n        total_chunks\n        chunks_received\n        is_download_from_agent\n        is_payload\n        is_screenshot\n        md5\n        sha1\n        task {\n            comment\n            id\n        }\n      }\n      taskartifacts {\n        artifact_instance_text\n        host\n        task_id\n        artifact{\n            id\n            name\n        }\n        id\n      }\n      tokens {\n        TokenId\n        id\n        host\n      }\n      attacktasks(distinct_on: attack_id) {\n        attack {\n          name\n          os\n          id\n          t_num\n          tactic\n        }\n        id\n      }\n      id\n    }\n  }`;\nexport function TaskMetadataTable(props){\n   const [tasks, setTasks] = React.useState([]);\n\n   const [getMetadata] = useLazyQuery(MetadataQuery, {\n        onCompleted: data => {\n            setTasks(data.task);\n        },\n        onError: data => {\n            console.log(\"error!\", data)\n        }\n    });\n    useEffect( () => {\n        getMetadata({variables: {task_range: props.taskIDs } });\n    }, [props.taskIDs, getMetadata]);\n  return (\n    <div style={{marginTop: \"10px\", marginRight: \"5px\"}}>\n        <TaskArtifactsTable tasks={tasks}/>\n        <TaskMITREATTACKTable tasks={tasks}/>\n        <TaskFilesTable tasks={tasks}/>\n        <TaskCredentialsTable tasks={tasks}/>\n    </div>\n  );\n}\n","import React, {useState, useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function IncludeMoreTasksDialog(props) {\n    const [taskSelected, setTaskSelected] = useState(0);\n    const [taskOptions, setTaskOptions] = useState([]);\n    const [beforeCount, setBeforeCount] = useState(10);\n    const [afterCount, setAfterCount] = useState(10);\n    const [searchTerm, setSearchTerm] = useState(\"all\");\n    const [operator, setOperator] = useState(\"\");\n    const searchOptions = [\n        {\"type\": \"all\", \"text\": \"All Callbacks\"},\n        {\"type\": \"callback\", \"text\": \"This Callack\"},\n        {\"type\": \"operator\", \"text\": \"All callbacks but limited by operator\"}\n    ];\n    const inputRef = useRef(null); \n    const onRequestSubmit = () => {\n        props.submitFetchTasks({\n            taskSelected,\n            beforeCount: parseInt(beforeCount),\n            afterCount: parseInt(afterCount),\n            search: searchTerm === \"operator\" ? operator : searchTerm\n        });\n        props.onClose();\n    }\n    const handleChange = (event) => {\n        setSearchTerm(event.target.value);\n      };\n    const handleTaskChange = (event) => {\n        setTaskSelected(event.target.value);\n    };\n    useEffect( () => {\n        setTaskOptions(props.taskOptions);\n        if(props.taskOptions.length > 0){\n            setTaskSelected(props.taskOptions[0]);\n        }\n    }, [props.tasks, props.taskOptions])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Add More Tasks to View</DialogTitle>\n        <DialogContent dividers={true}>\n        <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>View More Tasks Around Task:</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={taskSelected}\n                    onChange={handleTaskChange}\n                    input={<Input />}\n                  >\n                    {taskOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"selectiontask:\" + opt}>{opt}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            <MythicTextField type=\"number\" value={beforeCount} onChange={(name, value, error)=>setBeforeCount(value)} name={\"Number of tasks before\"} />\n            <MythicTextField type=\"number\" value={afterCount} onChange={(name, value, error)=>setAfterCount(value)} name={\"Number of tasks after\"} />\n            <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>Search Type</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={searchTerm}\n                    onChange={handleChange}\n                    input={<Input />}\n                  >\n                    {searchOptions.map( (opt) => (\n                        <MenuItem value={opt.type} key={\"selectiontype:\" + opt.type}>{opt.text}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            {searchTerm === 'operator' ? (\n                <MythicTextField multiline={false} onChange={(name, value, error)=>{setOperator(value)}} value={operator} name={\"Operator Username\"}/>\n            ) : (null)}\n            \n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Fetch Tasks</Button>          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport  {useParams} from \"react-router-dom\";\nimport {TaskMetadataTable} from './MetadataTable';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {Button, Grid} from '@material-ui/core';\nimport {IncludeMoreTasksDialog} from './IncludeMoreTasksDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {copyStringToClipboard} from '../../utilities/Clipboard';\nimport Switch from '@material-ui/core/Switch';\nimport {useTheme} from '@material-ui/core/styles';\nconst taskInfoFragment = gql`\nfragment TaskData on task {\n    comment\n    callback_id\n    commentOperator{\n        username\n    }\n    completed\n    id\n    operator{\n        username\n    }\n    display_params\n    original_params\n    command_name\n    status\n    timestamp\n    command {\n        cmd\n        id\n    }\n    callback {\n        id\n        host\n        user\n        integrity_level\n        domain\n    }\n    responses_aggregate{\n        aggregate{\n            count\n        }\n    }\n    parent_task_id\n    opsec_pre_blocked\n    opsec_pre_bypassed\n    opsec_post_blocked\n    opsec_post_bypassed\n    tasks {\n        id\n    }\n    token {\n        id\n    }\n}\n`;\nconst tasksQuery = gql`\n${taskInfoFragment}\nquery tasksQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacks($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, order_by: {id: desc}, limit: $beforeCount) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossACallbackQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossACallbacks($callback_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksByOperatorQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacksByOperator($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!, $operator: String!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nexport function SingleTaskView(props){\n    const me = useReactiveVar(meState);\n    const {taskId} = useParams();\n    const [taskIDs, setTaskIDs] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [tasks, setTasks] = React.useState([]);\n    const [removing, setRemoving] = React.useState(false);\n    const [openIncludeMoreTasksDialog, setOpenIncludeMoreTasksDialog] = React.useState(false);\n    const theme = useTheme();\n    const mergeData = (taskData) => {\n        let allNewParents = taskData.filter( (task) => task.parent_task_id === null);\n        let allData = [];\n        let recent_callback = -1;\n        if(allNewParents.length === 0){\n            allNewParents = [...taskData];\n        }\n        const allParents = tasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\" && cur.parent_task_id === null){\n                if(prev.find( (element) => element.id === cur.id)){\n                    return [...prev];\n                }\n                return [...prev, {...cur, checked: false}];\n            }\n            return [...prev];\n        }, [...allNewParents]);\n        \n        allParents.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n        allParents.forEach( (tsk) => {\n            if(tsk.callback.id !== recent_callback){\n                allData.push({\"type\": \"callback\", ...tsk.callback, checked: false});\n            }\n            recent_callback = tsk.callback.id;\n            allData.push({\"type\": \"task\", ...tsk, checked: false});\n        });\n        setTasks(allData);\n        const allTaskIds = taskData.reduce( (prev, cur) => {\n            const subIds = cur.tasks.filter( (cur) => !prev.includes(cur.id)).map( (cur) => cur.id);\n            if(prev.includes(cur.id)){\n                return [...prev, ...subIds];\n            }else{\n                return [...prev, cur.id, ...subIds];\n            }\n        }, [...taskIDs]);\n        setTaskIDs(allTaskIds);\n    }\n    const [getTasksAcrossAllCallbacks] = useLazyQuery(getTasksAcrossAllCallbacksQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossACallback,] = useLazyQuery(getTasksAcrossACallbackQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossAllCallbacksByOperator] = useLazyQuery(getTasksAcrossAllCallbacksByOperatorQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasks] = useLazyQuery(tasksQuery, {\n     onCompleted: completedData => {\n        mergeData(completedData.task);\n     }\n    });\n    const setTaskSearchInfo = (callback_id) => {\n        const opts = tasks.reduce( (prev, cur) => {\n            if(cur.type === 'task' && cur.callback.id === callback_id){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskOptions(opts);\n        \n        setOpenIncludeMoreTasksDialog(true);\n    }\n    const toggleTaskToRemove = (event) => {\n        const updated = tasks.map( (task) => {\n            if(task.type === \"task\" && (\"task\" + task.id) === event.target.name){\n                return {...task, checked: event.target.checked};\n            }\n            return {...task};\n        });\n        setTasks(updated);\n    }\n    const removeTasksButton = () => {\n        removing ? setRemoving(false) : setRemoving(true);\n        const remainingTasks = tasks.filter( (task) => !task.checked);\n        setTasks(remainingTasks);\n        const remainingTaskIDs = remainingTasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\"){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskIDs(remainingTaskIDs);\n    }\n    const collapse_range = (all_nums) =>{\n        // takes in an array of the expanded numbers and collapses it down\n        all_nums.sort( (a,b) => (a-b));\n        // pulled from https://stackoverflow.com/a/2270987\n        let ranges = [], rstart, rend;\n        for (let i = 0; i < all_nums.length; i++) {\n          rstart = all_nums[i];\n          rend = rstart;\n          while (all_nums[i + 1] - all_nums[i] === 1) {\n            rend = all_nums[i + 1]; // increment the index if the numbers sequential\n            i++;\n          }\n          ranges.push(rstart === rend ? rstart+'' : rstart + '-' + rend);\n        }\n        return ranges.join(\",\");\n    }\n    const expand_range = (range) =>{\n        let numbers = [], ranges = range.split(\",\");\n        for(let i = 0; i < ranges.length; i++){\n            if(ranges[i].includes(\"-\")){\n                let split = ranges[i].split(\"-\");\n                split = split.map( (r) => parseInt(r) );\n                numbers.push( ...[...Array(split[1]-split[0]+1).keys()].map(x => x+split[0]))\n            }else{\n                numbers.push(parseInt(ranges[i]));\n            }\n        }\n        numbers.sort( (a,b) => a - b);\n        return numbers;\n    }\n    const getShareableLink = () => {\n        let ids = [...taskIDs];\n        const range = collapse_range(ids);\n        copyStringToClipboard(window.origin + \"/new/tasks/by_range?tasks=\" + range);\n        snackActions.success(\"Copied link to clipboard!\");\n    }\n    const submitIncludeMoreTasks = ({taskSelected, beforeCount, afterCount, search}) => {\n        snackActions.info(\"Searching for tasks...\");\n        switch(search){\n            case \"all\":\n                getTasksAcrossAllCallbacks({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount}});\n                break;\n            case \"callback\":\n                getTasksAcrossACallback({variables: {}});\n                break;\n            default:\n                getTasksAcrossAllCallbacksByOperator({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount, operator: search}});\n                break;\n        }\n    }\n    useEffect( () => {\n        if(window.location.pathname.includes(\"/new/tasks/by_range\")){\n            let params = new URLSearchParams(window.location.search);\n            if(params.has(\"tasks\")){\n                console.log(params.get(\"tasks\"));\n                let ids = expand_range(params.get(\"tasks\"));\n                getTasks({variables: {task_range: ids}});\n            }else{\n                snackActions.warning(\"URL Query missing '?tasks=' with a range of tasks\")\n            }\n        }else{\n            getTasks({variables: {task_range: [parseInt(taskId)]}});\n        }      \n    }, [getTasks, taskId]);\n  return (\n    <div style={{marginTop: \"10px\", maxHeight: \"calc(94vh)\", width:\"100%\", marginBottom: \"10px\" }}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Task View\n            </Typography>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.success.main}} \n                onClick={getShareableLink}>Get Shareable link</Button>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.warning.main}} \n                onClick={removeTasksButton}>Remove Tasks From View</Button>\n            <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                onClick={(evt) => {evt.stopPropagation(); snackActions.warning(\"Not implemented yet\");}}>Add Tags To All</Button>\n            \n        </Paper>\n        {tasks.map( (task) => (\n            task.type === \"task\" ? (\n                    <Grid container alignItems=\"stretch\" key={\"taskdisplay:\" + task.id} style={{marginRight: \"5px\"}}>\n                        <Grid item style={{display: \"inline-flex\", width: removing ? \"96%\" : \"100%\"}}>\n                            <TaskDisplay  task={task} command_id={task.command === null ? 0 : task.command.id} />\n                        </Grid>\n                        <Grid item  style={{display: \"inline-flex\"}}>\n                        {removing ? (\n                            <Switch\n                                checked={task.checked}\n                                onChange={toggleTaskToRemove}\n                                name={\"task\" + task.id}\n                                inputProps={{ 'aria-label': 'checkbox', 'color': theme.palette.error.main }}\n                        />\n                        ) : (null)}\n                        </Grid>\n                    </Grid>\n                    \n            ) : (\n                <Paper key={\"taskdisplayforcallback:\" + task.id} elevation={5} style={{ marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        {task.domain === \"\" ? (null) : (task.domain + \"\\\\\")}{task.user}{task.integrity_level > 2 ? (\"*\") : (null)}@{task.host} ({task.id})\n                    </Typography>\n                    <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.info.main}} \n                        onClick={() => {setTaskSearchInfo(task.id)}}>Include More Tasks</Button>                  \n                </Paper>\n            ))\n            \n            )\n        }\n        <MythicDialog fullWidth={true} maxWidth=\"md\" open={openIncludeMoreTasksDialog} \n            onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} \n            innerDialog={<IncludeMoreTasksDialog submitFetchTasks={submitIncludeMoreTasks} taskOptions={taskOptions} onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} />}\n        />\n        <TaskMetadataTable taskIDs={taskIDs} />\n    </div>\n  );\n}\n//\n","import { createGlobalStyle} from \"styled-components\"\nexport const GlobalStyles = createGlobalStyle`\nbody {\n    margin: 0\n}\nhtml, body, #root {\n    height: 100%;\n}\n.MuiAccordionDetails-root{\n\n    padding-bottom: 0;\n    padding-top: 0;\n}\n.MuiAccordionSummary-content.Mui-expanded{\n    margin: 0px 0px 0px 0px !important;\n    min-height: unset;\n}\n.MuiAccordionSummary-root.Mui-expanded{\n    min-height: unset;\n}\n// placeholder/helper text for input boxes\n.MuiFormLabel-root {\n    background: transparent;\n}\n.MuiTableCell-head {\n\n    font-weight: bold;\n}\n.MuiSelect-select.MuiSelect-select{\n    padding-left: 10px\n}\n.ReactVirtualized__Table__row {\n    &:hover,\n    &--hovered {\n        background-color: ${(props) => props.theme.tableHover} !important;\n        color: ${(props) => props.theme.palette.text.primary} !important;\n        \n    }\n}\n.menuEntry {\n  cursor: pointer;\n}\n\ntspan {\n  font-size: 15px;\n  stroke: none;\n}\n\n.ReactVirtualized__Table__headerTruncatedText {\n\n  }\n.ReactVirtualized__Table__headerColumn {\n\n    padding: 0;\n  }\n.MuiTab-root {\n    max-width: unset;\n}\n.MuiSpeedDialAction-staticTooltipLabel {\n    white-space: nowrap;\n    max-width: none;\n}\n.MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label{\n    background-color: transparent;\n}\n.MuiTreeItem-root.Mui-selected:hover > .MuiTreeItem-content .MuiTreeItem-label{\n    background-color: transparent;\n}\n.MuiTreeItem-root:hover > .MuiTreeItem-content .MuiTreeItem-label {\n    background-color: transparent;\n}\n.MuiAppBar-root{\n    z-index: 1\n}\n`\n","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\n\nconst generateReportMutation = gql`\nmutation generateReportMutation($outputFormat: String!, $includeMITREPerTask: Boolean!, $includeMITREOverall: Boolean!, $excludedUsers: String!, $excludedHosts: String!, $excludedIDs: String!, $includeOutput: Boolean!){\n    generateReport(outputFormat: $outputFormat, includeMITREPerTask: $includeMITREPerTask, includeMITREOverall: $includeMITREOverall, excludedUsers: $excludedUsers, excludedHosts: $excludedHosts, excludedIDs: $excludedIDs, includeOutput: $includeOutput){\n        status\n        error\n    }\n}\n`;\nconst generatedReportSubscription = gql`\nsubscription generatedReportEventSubscription($fromNow: timestamp!, $operation_id: Int!){\n    operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}, source: {_eq: \"generated_report\"}}, order_by: {id: desc}) {\n        operator {\n            username\n        }\n        message\n        level\n      }\n}\n`;\nexport function ReportingTable(props){\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n    const [selectedOutputFormat, setSelectedOutputFormat] = React.useState(\"pdf\");\n    const outputOptions = [\"pdf\", \"latex\", \"json\"];\n    const [includeMITREPerTask, setIncludeMITREPerTask] = React.useState(false);\n    const [includeMITREOverview, setIncludeMITREOverview] = React.useState(false);\n    const [includeOutput, setIncludeOutput] = React.useState(false);\n    const [includeGraphs, setIncludeGraphs] = React.useState(false);\n    const [excludedCallbackHost, setExcludedCallbackHost] = React.useState(\"\");\n    const [excludedCallbackUser, setExcludedCallbackUser] = React.useState(\"\");\n    const [excludedCallbackID, setExcludedCallbackID] = React.useState(\"\");\n    const [generateReport] = useMutation(generateReportMutation, {\n        onCompleted: (data) => {\n            if(data.generateReport.status === \"success\"){\n                snackActions.info(\"Generating report...\");\n                snackActions.info(\"Final reports are always available via the 'Uploads' tab within 'Search'\");\n            }else{\n                snackActions.error(data.generateReport.error);\n            }\n        },\n        onError: (data) => {\n            snackActions.error(data);\n        }\n    });\n    const { data } = useSubscription(generatedReportSubscription, {\n        variables: {fromNow: fromNow.current, operation_id: me?.user?.current_operation_id || 0}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get notifications for generated payloads\");\n        }\n    });\n    const setOutputFormat = (evt) => {\n        setSelectedOutputFormat(evt.target.value);\n        if(evt.target.value !== \"json\"){\n            setIncludeOutput(false);\n        }\n        if(evt.target.value === \"json\"){\n            setIncludeGraphs(false);\n        }\n    }\n    const changeExcludedCallbackUser = (name, value, error) => {\n        setExcludedCallbackUser(value);\n    }\n    const changeExcludedCallbackHost = (name, value, error) => {\n        setExcludedCallbackHost(value);\n    }\n    const changeExcludedCallbackID = (name, value, error) => {\n        setExcludedCallbackID(value);\n    }\n    const onGenerateReport = () => {\n        generateReport({variables: {\n            outputFormat: selectedOutputFormat,\n            includeMITREOverall: includeMITREOverview,\n            includeMITREPerTask,\n            includeOutput,\n            excludedUsers: excludedCallbackUser,\n            excludedHosts: excludedCallbackHost,\n            excludedIDs: excludedCallbackID\n        }})\n    }\n    useEffect( () => {\n        console.log(data);\n        if(data?.operationeventlog?.length > 0){\n            const dataUUID = data.operationeventlog[0].message.split(\":\").pop().trim();\n            snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Generated Report\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + dataUUID} />});\n        }\n    }, [data])\n    return (\n        <React.Fragment>\n\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"25rem\"}}>Report Option</TableCell>\n                        <TableCell >Selected Values</TableCell> \n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Output Format</TableCell>\n                        <TableCell>\n                            <Select\n                              autoFocus\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedOutputFormat}\n                              label=\"Select an Output Format\"\n                              onChange={setOutputFormat}\n                            >\n                            {\n                                outputOptions.map((opt, i) => (\n                                    <MenuItem key={\"outputformat\" + i} value={opt}>{opt}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Include MITRE ATT&CK Coverage Per Task</TableCell>\n                        <TableCell>\n                            <Switch\n                                checked={includeMITREPerTask}\n                                onChange={evt => setIncludeMITREPerTask(!includeMITREPerTask)}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"active\"\n                            />\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Include MITRE ATT&CK Coverage Overview</TableCell>\n                        <TableCell>\n                            <Switch\n                                checked={includeMITREOverview}\n                                onChange={evt => setIncludeMITREOverview(!includeMITREOverview)}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"active\"\n                            />\n                        </TableCell>\n                    </TableRow>\n                    {\n                        selectedOutputFormat === \"json\" && \n                        <TableRow hover>\n                            <TableCell>Include Command Output</TableCell>\n                            <TableCell>\n                                <Switch\n                                    checked={includeOutput}\n                                    onChange={evt => setIncludeOutput(!includeOutput)}\n                                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                                    name=\"active\"\n                                />\n                            </TableCell>\n                        </TableRow>\n                    }\n                    <TableRow hover>\n                        <TableCell>Exclude Callbacks With Matching Values</TableCell>\n                        <TableCell>\n                                <Table>\n                                    <TableRow>\n                                        <TableCell style={{width: \"10rem\"}}>Exclude Users</TableCell>\n                                        <TableCell>\n                                            <MythicTextField onChange={changeExcludedCallbackUser} value={excludedCallbackUser} name={\"Excluded Usernames\"}/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Exclude Hosts</TableCell>\n                                        <TableCell>\n                                            <MythicTextField onChange={changeExcludedCallbackHost} value={excludedCallbackHost} name={\"Excluded Hostnames\"}/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Exclude IDs</TableCell>\n                                        <TableCell>\n                                            <MythicTextField onChange={changeExcludedCallbackID} value={excludedCallbackID} name={\"Excluded Callback IDs\"}/>\n                                        </TableCell>\n                                    </TableRow>\n                                </Table>\n                        </TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <Button variant=\"contained\" style={{marginTop: \"10px\", backgroundColor: theme.palette.success.main, color: \"white\"}} onClick={onGenerateReport}>Generate</Button>\n    </React.Fragment>\n    )\n}\n\n/**\n *                     {\n                        selectedOutputFormat !== \"json\" &&\n                        <TableRow hover>\n                            <TableCell>Include Graphs</TableCell>\n                            <TableCell>\n                                <Switch\n                                    checked={includeGraphs}\n                                    onChange={evt => setIncludeGraphs(!includeOutput)}\n                                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                                    name=\"active\"\n                                />\n                            </TableCell>\n                        </TableRow>\n                    }\n */\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {ReportingTable} from './ReportingTable';\n\n\nexport function Reporting() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Mythic Report Generation\n      </Typography>\n    </Paper> \n    <ReportingTable />\n  </div>\n  );\n}\n","import { LoginForm } from './pages/Login/LoginForm';\nimport { Settings } from './pages/Settings/Settings';\nimport { PayloadTypesC2Profiles } from './pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles';\nimport { CreatePayload } from './pages/CreatePayload/CreatePayload';\nimport { CreatePayloadWrapper } from './pages/CreateWrapper/CreatePayload';\nimport { EventFeed } from './pages/EventFeed/EventFeed';\nimport {Operations} from './pages/Operations/Operations';\nimport { BrowserScripts } from './pages/BrowserScripts/BrowserScripts';\nimport { Payloads } from './pages/Payloads/Payloads';\nimport {ExpandedCallback} from './pages/ExpandedCallback/ExpandedCallback';\nimport { Home } from './pages/Home/Home';\nimport { LoggedInRoute } from './utilities/LoggedInRoute';\nimport { Callbacks } from './pages/Callbacks/Callbacks';\nimport {Search} from './pages/Search/Search';\nimport React from 'react';\nimport { TopAppBar } from './TopAppBar';\nimport { useReactiveVar } from '@apollo/client';\nimport  {useDarkMode} from \"./utilities/useDarkMode\";\nimport { SnackbarProvider } from 'notistack';\nimport {SingleTaskView} from './pages/SingleTaskView/SingleTaskView';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { GlobalStyles } from \"../themes/GlobalStyles\";\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {SnackbarUtilsConfigurator, } from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport {Reporting} from './pages/Reporting/Reporting';\n\n//background-color: #282c34;\nimport {\n    Route,\n    Switch,\n} from 'react-router-dom'\n\n\nexport function App(props) {\n    const me = useReactiveVar(meState);\n    const [themeMode, themeToggler] = useDarkMode();\n    const theme = React.useMemo( () => createMuiTheme({\n        palette: {\n          primary: {\n                  main: \"#7f93c0\"\n              },\n          secondary: {\n                  main: \"#a791c3\"\n              },\n          error: {\n                  main: \"#f44336\"\n              },\n          warning: {\n                  main: \"#ff9800\"\n              },\n          info: {\n                  main: \"#2196f3\"\n              },\n          disabled: {\n                  main: \"rgba(0, 0, 0, 0.38)\"\n              },\n          type: themeMode,\n          background: {\n              default: themeMode === 'dark' ? 'rgb(37, 41, 51)' : '#ffffff',\n              paper: themeMode === 'dark' ? 'rgb(50, 60, 69)' : '#ffffff',\n              contrast: themeMode === 'dark' ? '#ffffff' : 'rgb(37, 41, 51)'\n          },\n          text: {\n            primary: themeMode === 'dark' ? '#fff' : '#000',\n            secondary: themeMode === 'dark' ? 'rgba(255, 255, 255, 0.7)': 'rgba(0, 0, 0, 0.54)',\n            contrast: themeMode === \"dark\" ? '#000' : '#fff'\n          },\n          textBackgroundColor: themeMode === 'dark' ? '#74828b' : '#d9dbdc',\n          textBackgroundColorMythic: themeMode === 'dark' ? '#436b9f': '#aadcf5',\n          textBackgroundColorSuccess: themeMode === 'dark' ? '#09a21a' : '#70e373',\n          textBackgroundColorError: themeMode === 'dark' ? '#9f1616' : '#f19da3',\n          graphGroup: themeMode === 'dark' ? '#394c5d' : \"#d3d7e8\"\n        },\n        folderColor: '#f1d592',\n        tableHeader: '#484848',\n        tableBorder: themeMode === 'dark' ? 'rgba(81,81,81,1)' : 'rgba(224,224,224,1)',\n        tableHover: themeMode === 'dark' ? 'rgba(255, 255, 255, 0.08)': 'rgba(0, 0, 0, 0.04)',\n        pageHeader: {\n            main: \"#827E80\"\n        },\n        pageHeaderText: {\n            main: \"white\"\n        },\n        }\n    ), [themeMode]\n    );\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyles theme={theme}/>\n            <CssBaseline />                \n            <SnackbarProvider maxSnack={5} anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}>\n                <SnackbarUtilsConfigurator />\n                    <div style={{maxHeight: \"100%\", height: \"100%\"}}>\n                        <div style={{height: \"48px\"}}>\n                            {me.loggedIn && me.user !== undefined && me.user !== null ? (<TopAppBar theme={themeMode} toggleTheme={themeToggler}/>) : (null)} \n                        </div>\n                        <div style={{margin: \"0px 16px 0px 16px\", height: \"calc(100% - 48px)\", maxHeight: \"calc(100% - 48px)\", display: \"flex\", flexDirection: \"column\"}}>\n                            <Switch>\n                                <LoggedInRoute exact path='/new' component={Home} />\n                                <Route exact path='/new/login' component={LoginForm} /> \n                                <LoggedInRoute exact path='/new/settings' component={Settings} />\n                                <LoggedInRoute exact path='/new/payloadtypes' component={PayloadTypesC2Profiles} />\n                                <LoggedInRoute exact path='/new/eventfeed' component={EventFeed} />\n                                <LoggedInRoute exact path='/new/createpayload' component={CreatePayload} />\n                                <LoggedInRoute exact path='/new/createwrapper' component={CreatePayloadWrapper} />\n                                <LoggedInRoute exact path='/new/payloads' component={Payloads} />\n                                <LoggedInRoute exact path='/new/c2profiles' component={PayloadTypesC2Profiles} />\n                                <LoggedInRoute exact path='/new/services/' component={PayloadTypesC2Profiles} />\n                                <LoggedInRoute exact path='/new/callbacks' component={Callbacks} />\n                                <LoggedInRoute path='/new/search' component={Search} />\n                                <LoggedInRoute exact path='/new/browserscripts' component={BrowserScripts} />\n                                <LoggedInRoute exact path='/new/task/:taskId' component={SingleTaskView} />\n                                <LoggedInRoute exact path='/new/tasks/by_range' component={SingleTaskView} />\n                                <LoggedInRoute exact path='/new/operations' component={Operations} />\n                                <LoggedInRoute exact path='/new/callbacks/:callbackId' component={ExpandedCallback} />\n                                <LoggedInRoute exact path='/new/reporting' component={Reporting} />\n                            </Switch>\n                        </div>\n                    </div>\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n\n}\n\n","//import './wdyr';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport { ApolloProvider, ApolloClient, InMemoryCache, from, split, HttpLink } from '@apollo/client';\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport { successfulRefresh, FailedRefresh } from './cache';\nimport { onError } from \"@apollo/client/link/error\";\nimport { RetryLink } from \"@apollo/client/link/retry\";\nimport { SubscriptionClient } from 'subscriptions-transport-ws'\nimport { getMainDefinition } from '@apollo/client/utilities'\nimport { setContext } from '@apollo/client/link/context';\nimport {snackActions} from './components/utilities/Snackbar';\nimport MessageTypes from 'subscriptions-transport-ws/dist/message-types';\nimport jwt_decode from 'jwt-decode';\nimport {meState} from './cache';\n\nexport const mythicVersion = \"2.3.3\";\nexport const mythicUIVersion = \"0.0.3\";\n\nconst cache = new InMemoryCache({\n    typePolicies: {\n        Query: {\n            fields: {\n                operationeventlog: {\n                    \n                },\n                callback: {\n                  \n                }\n            }\n        }\n    }\n});\n\nconst retryLink = new RetryLink({\n  delay: {\n    initial: 20,\n    max: 300,\n    jitter: true\n  },\n  attempts: {\n    max: 2,\n    retryIf: (error, _operation) => !!error\n  }\n});\nconst httpLink = new HttpLink({\n    uri: window.location.origin + \"/graphql/\",\n    options: {\n        reconnect: true,   \n        connectionParams: {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       }     \n    }\n});\nexport const isJWTValid = () => {\n  let access_token = localStorage.getItem(\"access_token\");\n  //console.log(\"in isJWTValid\", \"access_token\", access_token);\n  if(access_token){\n    const decoded_token = jwt_decode(access_token);\n    if(Date.now() > decoded_token.exp * 1000){\n      //console.log(\"exp is expired: \", decoded_token.exp * 1000, Date.now())\n      return false;\n    }else{\n      return true;\n    }\n  }else{\n    return false;\n  }\n}\nconst authLink = setContext( async (_, {headers}) => {\n  // get the authentication token from local storage if it exists\n  // return the headers to the context so httpLink can read them\n    let access_token = localStorage.getItem('access_token');\n    if(access_token){\n      const decoded_token = jwt_decode(access_token);\n      //console.log(decoded_token);\n      // JWT lifetime is 4 hours. If there's 2hrs or less left of the JWT, update it\n      let diff = Math.abs(Date.now() - (decoded_token.exp * 1000));\n      let twoHours = 7200000; // 2 hours in miliseconds, this is half the JWT lifetime\n      // we want to make sure we try to get a new access_token while the current one is still active or it'll fail\n      if(diff < twoHours){\n        console.log(\"token is at its half life or less, try to get a new token\");\n        const updated = await GetNewToken();\n        //console.log(\"updated?\", updated);\n        if(updated){\n          return{\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            }\n          }\n        }else{\n          //console.log(\"update failed!\");\n        }\n      }else{\n        //console.log(\"No update needed, access_token still valid\");\n      }\n    }else{\n      //console.log(\"no access token\");\n    }\n    //console.log(\"should be called after updating if needed\");\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      }\n    }\n});\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  console.log(\"errors?\");\n  try{\n    if (graphQLErrors) {\n      console.log(\"[graphQLError]\", graphQLErrors);\n      for (let err of graphQLErrors) {\n        switch (err.extensions.code) {\n          case 'forbidden':\n              snackActions.error(err.message);\n              break;\n          case 'access-denied':\n            //fallsthrough\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in graphql\");\n            // modify the operation context with a new token\n            /*\n            return promiseToObservable(\n              GetNewToken())\n              .flatMap(() => {\n              // retry the request, returning the new observable\n              operation.setContext({\n                headers: {\n                 Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n                },\n              });\n              // retry the request, returning the new observable\n              console.log(\"forwarding operation in promise thingy\", localStorage.getItem(\"access_token\"))\n              return forward(operation);\n              });\n              */\n             console.log(\"would have asked for new token, but auth link will handle it\");\n          case 'validation-failed':\n            console.log(err);\n            return;\n          default:\n              console.log(err);\n              snackActions.error(err.message);\n        }\n      }\n    }\n    if (networkError) {\n      console.log(\"[Network error]\", networkError);\n      \n      if(networkError.extensions === undefined){\n        snackActions.error(\"Failed to connect to Mythic, please refresh\");\n        FailedRefresh();\n        restartWebsockets();\n        window.location = \"/new/login\";\n        return;\n      }\n      switch (networkError.extensions.code) {\n          case 'access-denied':\n            snackActions.warning(\"Access Denied\");\n            break;\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in network\");\n              FailedRefresh();\n              restartWebsockets();\n              window.location = \"/new/login\";\n              break;\n          default:\n              console.log(networkError);\n        }\n        \n    }\n  }catch(error){\n    snackActions.error(\"Failed to connect to Mythic, please refresh\");\n    console.log(error);\n    restartWebsockets();\n    window.location = \"/new/login\";\n    return;\n  }\n});\n\nconst GetNewToken = async () =>{\n  const requestOptions = {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\"refresh_token\": localStorage.getItem(\"refresh_token\"),\n        \"access_token\": localStorage.getItem(\"access_Token\")})\n  };\n  const response = await fetch('/refresh', requestOptions);\n  const json = response.json().then(data => {\n          console.log(data)\n          if(\"access_token\" in data){\n              successfulRefresh(data);\n              console.log(\"successfully got new access_token\");\n              return true;\n          }else{\n            console.log(\"calling FailedRefresh from GetNewToken call\");\n              FailedRefresh();\n              return false;\n          }\n      }).catch(error => {\n          console.log(\"Error trying to get json response in GetNewToken\", error);\n          console.log(response);\n          FailedRefresh();\n          return false;\n      });\n  return json;\n}\nconst websocketAddress =() =>{\n    return window.location.protocol === \"https:\" ? \"wss://\" + window.location.host + \"/graphql/\" : \"ws://\" + window.location.host + \"/graphql/\";\n}\nconst websocketClient = new SubscriptionClient(websocketAddress(), {\n  reconnect: true,\n  reconnectionAttempts: 10,\n  connectionParams: () => {\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`\n      }\n    }\n  }\n})\nconst wsLink = new WebSocketLink(websocketClient);\n/*\nconst websocketLink = new WebSocketLink({\n     uri: websocketAddress(),\n     options: {\n       reconnect: true,\n       lazy: true,\n       connectionParams: async () => ({\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       })\n     }\n    });\n  */\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query)\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    )\n  },\n  wsLink,\n  httpLink\n)\nexport const apolloClient = new ApolloClient({\n   link: from([authLink, errorLink, retryLink, authLink.concat(splitLink)]),\n    cache\n  });\nexport function restartWebsockets () {\n    // Copy current operations\n    const operations = Object.assign({}, websocketClient.operations)\n  \n    // Close connection\n    websocketClient.close(true)\n  \n    // Open a new one\n    websocketClient.connect()\n  \n    // Push all current operations to the new connection\n    Object.keys(operations).forEach(id => {\n      websocketClient.sendMessage(\n        id,\n        MessageTypes.GQL_START,\n        operations[id].options\n      )\n    })\n  }\n  // if the user refreshes the page, we lose all react tracking, so try to reload from localstorage first\nif(localStorage.getItem(\"access_token\") !== null){\n  if(isJWTValid(localStorage.getItem(\"access_token\"))){\n      if(localStorage.getItem(\"user\") !== null){\n          meState({\n              loggedIn: true,\n              access_token: localStorage.getItem(\"access_token\"),\n              refresh_token: localStorage.getItem(\"refresh_token\"),\n              user: JSON.parse(localStorage.getItem(\"user\"))\n          })\n      }\n  }else{\n      //leave meState as a blank value to force new login\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"refresh_token\");\n      localStorage.removeItem(\"user\");\n  }\n}\nReactDOM.render(\n  <React.StrictMode>\n        <ApolloProvider client={apolloClient}>\n            <Router>\n                <App key=\"App\"/>\n            </Router>\n        </ApolloProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}