{"version":3,"sources":["components/pages/Callbacks/TaskParametersDialogRow.js","components/pages/Callbacks/TaskParametersDialog.js","components/MythicComponents/MythicDialog.js","components/MythicComponents/MythicSelectFromListDialog.js","components/utilities/Clipboard.js","components/pages/Search/CredentialTableNewCredentialDialog.js","components/MythicComponents/MythicTextField.js","cache.js","themes/Themes.js","components/pages/Callbacks/TaskDisplay.js","components/pages/Callbacks/ResponseDisplayScreenshotModal.js","components/pages/Callbacks/TaskTokenDialog.js","components/utilities/useSingleAndDoubleClick.js","components/MythicComponents/MythicResizableGrid/styles.js","components/MythicComponents/MythicResizableGrid/HeaderCell.js","components/MythicComponents/MythicResizableGrid/Cell.js","components/MythicComponents/MythicResizableGrid/DraggableHandles.js","components/MythicComponents/MythicResizableGrid/MythicResizableGrid.js","components/MythicComponents/MythicResizableGrid/index.js","components/pages/Callbacks/ResponseDisplayPlaintext.js","components/utilities/Snackbar.js","components/MythicComponents/MythicTabPanel.js","components/pages/Callbacks/TaskDisplayContainer.js","components/pages/Callbacks/ResponseDisplay.js","components/pages/Callbacks/ResponseDisplayScreenshot.js","components/pages/Callbacks/ResponseDisplayDownload.js","components/pages/Callbacks/ResponseDisplaySearch.js","components/pages/Callbacks/TaskCommentDialog.js","components/pages/Callbacks/TaskTagDialog.js","components/pages/Callbacks/TaskOpsecDialog.js","components/pages/Callbacks/TaskViewParametersDialog.js","components/pages/Callbacks/TaskViewStdoutStderrDialog.js","components/MythicComponents/MythicStyledTooltip.js","components/pages/Callbacks/TaskFromUIButton.js","components/pages/Callbacks/ResponseDisplayTable.js","components/utilities/Time.js","../node_modules/yargs-parser sync","assets/mythic.svg","components/pages/Login/LoginForm.js","components/pages/Settings/SettingsOperatorAPIToken.js","components/pages/Settings/SettingsOperatorDialog.js","components/pages/Settings/SettingsOperatorDeleteDialog.js","components/pages/Settings/SettingsOperator.js","components/pages/Settings/SettingsOperatorTable.js","components/pages/Settings/Settings.js","components/pages/PayloadTypesC2Profiles/PayloadTypeBuildDialog.js","components/pages/PayloadTypesC2Profiles/PayloadTypeCard.js","components/pages/PayloadTypesC2Profiles/PayloadTypeContainerDisplay.js","components/pages/PayloadTypesC2Profiles/C2ProfileBuildDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileOutputDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileConfigDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfileStartStopOutputDialog.js","components/pages/CreatePayload/CreatePayloadParameter.js","components/pages/CreatePayload/CreatePayloadC2ProfileParametersTable.js","components/pages/PayloadTypesC2Profiles/C2ProfileSavedInstancesDialog.js","components/pages/PayloadTypesC2Profiles/C2ProfilesCard.js","components/pages/PayloadTypesC2Profiles/C2ProfileContainerDisplay.js","components/pages/PayloadTypesC2Profiles/TranslationContainerCard.js","components/pages/PayloadTypesC2Profiles/TranslationContainerDisplay.js","components/pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles.js","components/pages/CreatePayload/CreatePayloadNavigationButtons.js","components/pages/CreatePayload/Step1SelectOS.js","components/pages/CreatePayload/CreatePayloadBuildParametersTable.js","components/pages/CreatePayload/Step2SelectPayloadType.js","components/MythicComponents/MythicConfirmDialog.js","components/pages/CreatePayload/Step3SelectCommands.js","components/pages/CreatePayload/Step4C2Profiles.js","components/pages/CreatePayload/PayloadSubscriptionNotification.js","components/pages/CreatePayload/Step5Build.js","components/pages/CreatePayload/CreatePayload.js","components/pages/CreateWrapper/CreatePayloadNavigationButtons.js","components/pages/CreateWrapper/Step1SelectOS.js","components/pages/CreateWrapper/CreatePayloadParameter.js","components/pages/CreateWrapper/CreatePayloadBuildParametersTable.js","components/pages/CreateWrapper/Step2SelectPayloadType.js","components/pages/Payloads/DetailedPayloadTable.js","components/pages/CreateWrapper/Step3SelectPayload.js","components/pages/CreateWrapper/PayloadSubscriptionNotification.js","components/pages/CreateWrapper/Step5Build.js","components/pages/CreateWrapper/CreatePayload.js","components/pages/EventFeed/EventFeedTableEventsActions.js","components/pages/EventFeed/EventFeedTableEvents.js","components/pages/EventFeed/EventFeedTableInput.js","components/pages/EventFeed/EventFeedTable.js","components/pages/EventFeed/EventFeed.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialogRow.js","components/pages/Operations/OperationTableRowUpdateOperatorsDialog.js","components/pages/Operations/OperationTableRowNotificationsDialog.js","components/pages/Operations/OperationTableRow.js","components/pages/Operations/OperationTable.js","components/pages/Operations/EditBlockListDialog.js","components/pages/Operations/CommandBlockListTable.js","components/pages/Operations/Operations.js","components/pages/BrowserScripts/EditScriptDialog.js","components/pages/BrowserScripts/BrowserScriptsTableRow.js","components/pages/BrowserScripts/BrowserScriptsTable.js","components/pages/BrowserScripts/BrowserScriptsOperationsTableRow.js","components/pages/BrowserScripts/BrowserScriptsOperationsTable.js","components/pages/BrowserScripts/BrowserScripts.js","components/pages/Payloads/PayloadDescriptionDialog.js","components/pages/Payloads/PayloadFilenameDialog.js","components/pages/Payloads/PayloadBuildMessageDialog.js","components/pages/Payloads/PayloadsTableRowC2Status.js","components/pages/Payloads/PayloadsTableRowBuildStatus.js","components/pages/Payloads/PayloadConfigCheckDialog.js","components/pages/Payloads/PayloadRedirectRulesDialog.js","components/pages/Payloads/PayloadsTableRow.js","components/pages/Payloads/ImportPayloadConfigDialog.js","components/pages/Payloads/PayloadsTable.js","components/pages/Payloads/Payloads.js","components/pages/Callbacks/D3ContextMenu.js","components/pages/Callbacks/C2PathDialog.js","components/pages/ExpandedCallback/ExpandedCallbackSideDetails.js","components/pages/ExpandedCallback/ExpandedCallback.js","components/pages/Home/QuickStartCard.js","components/pages/Home/AgentC2Overview.js","components/pages/Home/Home.js","components/utilities/LoggedInRoute.js","components/MythicComponents/MythicFileBrowserVirtualTree.js","components/pages/Callbacks/CallbacksTabsFileBrowserTree.js","components/pages/Callbacks/DownloadHistoryDialog.js","components/pages/Callbacks/CallbacksTabsFileBrowserTable.js","components/pages/Callbacks/CallbacksTabsFileBrowser.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTree.js","components/pages/Callbacks/CallbacksTabsProcessBrowserTable.js","components/pages/Callbacks/CallbacksTabsProcessBrowser.js","components/pages/Callbacks/CallbacksTabs.js","components/pages/Callbacks/HeightsDialog.js","components/MythicComponents/MythicTable.js","components/MythicComponents/MythicTransferList.js","components/MythicComponents/MythicDisplayTextDialog.js","components/pages/Callbacks/CallbackMutations.js","components/pages/Callbacks/DetailedCallbackTable.js","components/pages/Callbacks/CallbacksTableRow.js","components/pages/Callbacks/CallbacksTable.js","components/pages/Callbacks/ManuallyAddEdgeDialog.js","components/pages/Callbacks/CallbacksGraph.js","components/pages/Callbacks/CallbacksTop.js","components/pages/Callbacks/Callbacks.js","components/pages/Search/SearchTabTasks.js","components/MythicComponents/MythicSnackDownload.js","components/pages/Search/FileMetaTable.js","components/pages/Search/FileBrowserTable.js","components/pages/Search/SearchTabFiles.js","components/pages/Search/CredentialTable.js","components/pages/Search/SearchTabCredentials.js","components/pages/Search/KeylogsTable.js","components/pages/Search/SearchTabKeylog.js","components/pages/Search/TokenDescriptionDialog.js","components/pages/Search/TokenTable.js","components/pages/Search/SearchTabTokens.js","components/pages/Search/CallbackSearchTable.js","components/pages/Search/SearchTabCallbacks.js","components/pages/Search/ArtifactTable.js","components/pages/Search/SearchTabArtifacts.js","components/pages/Search/SocksSearchTable.js","components/pages/Search/SearchTabSocks.js","components/pages/Search/Search.js","components/TopAppBarNotifications.js","components/EventFeedNotifications.js","components/mythic_red_small.svg","components/TopAppBar.js","components/utilities/useDarkMode.js","components/pages/SingleTaskView/TaskArtifactsTable.js","components/pages/SingleTaskView/TaskMITREATTACKTable.js","components/pages/SingleTaskView/TaskFilesTable.js","components/pages/SingleTaskView/TaskCredentialsTable.js","components/pages/SingleTaskView/MetadataTable.js","components/pages/SingleTaskView/IncludeMoreTasksDialog.js","components/pages/SingleTaskView/SingleTaskView.js","themes/GlobalStyles.js","components/pages/Reporting/ReportingTable.js","components/pages/Reporting/Reporting.js","components/App.js","index.js","components/pages/Callbacks/CallbacksTabsTaskingFilterDialog.js","components/pages/Callbacks/CallbacksTabsTaskingInputTokenSelect.js","components/pages/Callbacks/CallbacksTabsTaskingInput.js","components/pages/Callbacks/CallbacksTabsTasking.js"],"names":["getDynamicQueryParams","gql","credentialFragment","createCredentialMutation","TaskParametersDialogRow","props","React","useState","value","setValue","theme","useTheme","ChoiceOptions","setChoiceOptions","boolValue","setBoolValue","arrayValue","setArrayValue","choiceMultipleValue","setChoiceMultipleValue","agentConnectNewHost","setAgentConnectNewHost","agentConnectHostOptions","setAgentConnectHostOptions","agentConnectNewPayload","setAgentConnectNewPayload","agentConnectHost","setAgentConnectHost","agentConnectPayloadOptions","setAgentConnectPayloadOptions","agentConnectPayload","setAgentConnectPayload","agentConnectC2ProfileOptions","setAgentConnectC2ProfileOptions","agentConnectC2Profile","setAgentConnectC2Profile","openAdditionalPayloadOnHostMenu","setOpenAdditionalPayloadOnHostmenu","createCredentialDialogOpen","setCreateCredentialDialogOpen","name","fileValue","setFileValue","useMutation","onCompleted","data","dynamic_query_function","status","choices","type","length","onChange","snackActions","warning","error","onError","console","log","getDynamicParams","fetchPolicy","success","insert_credential_one","createCredential","useEffect","variables","callback","callback_id","parameter_name","command","commandInfo","cmd","payload_type","payloadtype","ptype","hostNum","payloadNum","parseInt","default_value","onChangeAgentConnect","host_index","payload_index","c2_index","c2profileparameters","parameters","reduce","prev","opt","agentConnectValue","host","agent_uuid","uuid","c2_profile","onChangeValue","evt","target","onChangeCredentialJSONValue","onChangeChoiceMultiple","event","options","i","l","selected","push","onChangeText","onChangeNumber","onSwitchChange","onFileChange","reader","FileReader","onload","e","contents","btoa","result","files","readAsBinaryString","onChangeAgentConnectHost","onChangeAgentConnectPayload","onChangeAgentConnectC2Profile","onChangeAgentConnectNewHost","onChangeAgentConnectNewPayload","onAgentConnectAddNewPayloadOnHost","toUpperCase","payload_choices","id","onAgentConnectRemovePayloadOnHost","payloadOnHostID","testParameterValues","curVal","required","verifier_regex","RegExp","test","addNewArrayValue","newArray","onCreateCredential","account","realm","comment","credential","anchorPopoverEl","setAnchorPopoverEl","openDescription","Boolean","handlePopoverClose","TableRow","TableCell","Typography","onMouseEnter","currentTarget","onMouseLeave","undefined","display_name","component","style","color","palette","main","Popover","open","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","onClose","disableRestoreFocus","elevation","pointerEvents","PaperProps","padding","margin","backgroundColor","primary","dark","light","variant","description","FormControl","width","Select","native","autoFocus","multiple","input","Input","map","TableContainer","Paper","className","Table","size","tableLayout","maxWidth","TableBody","a","hover","Button","onClick","index","removed","splice","removeArrayValue","MythicTextField","placeholder","multiline","n","v","values","onChangeArrayText","display","onEnter","validate","errorText","onSubmit","Switch","checked","hidden","choice","c2_profile_id","c2profileparameter","crypto_type","enc_key","dec_key","payload","callback_uuid","agent_callback_id","onChangeLinkInfo","Fragment","TableHead","JSON","stringify","MythicDialog","fullWidth","innerDialog","CredentialTableNewCredentialDialog","credential_text","substring","textOverflow","getParameterObject","GetLoadedCommandsQuery","getAllCommandsQuery","getAllEdgesQuery","getAllPayloadsQuery","getAllPayloadsOnHostsQuery","addPayloadOnHostMutation","removePayloadOnHostMutation","getCommandQuery","getCredentialsQuery","TaskParametersDialog","setCommandInfo","parameterGroups","setParameterGroups","selectedParameterGroup","setSelectedParameterGroup","setParameters","rawParameters","setRawParameters","all","loaded","edges","credentials","requiredPieces","setRequiredPieces","useLazyQuery","getAllCommands","allCommandsLoading","getLoadedCommands","loadedCommandsLoading","getAllEdges","loadedAllEdgesLoading","getAllPayloads","loadedAllPayloadsLoading","getAllPayloadsOnHosts","loadedAllPayloadsOnHostsLoading","getAllCredentials","loadedCredentialsLoading","operation_id","addPayloadOnHost","RemovePayloadOnHost","useQuery","requiredPiecesInitial","groupNames","command_by_pk","commandparameters","forEach","includes","parameter_group_name","choices_are_all_commands","choices_are_loaded_commands","sort","groupName","payload_type_id","payloadtype_id","intersect","b","setB","Set","filter","x","has","getLinkInfoFromAgentConnect","getLinkInfoValue","enc_key_base64","dec_key_base64","sorted","parsedParameters","toLowerCase","parse","split","defaultV","choice_filter_by_command_attributes","prevn","c","match","cmd_attributes","attributes","Object","entries","key","loadedcommands","agentConnectNewPayloads","profiles","payloadc2profiles","profile","c2profile","join","filemetum","filename_text","tag","callbacksOrganized","entry","found","updates","c2info","c2profileparametersinstances","cur","val","c2array","payloadInfo","registered_payload","payloads","organized","payloadonhost","duplicated_payload","p","allOrganized","hostIndex","findIndex","o","supported_agents","indexOf","build_requirements","supported_agent_build_parameters","matched","buildparameterinstances","build_param","buildparameter","parameter","edge_choices","callbackgraphedge","edge","source","destination","direction","end_timestamp","ui_position","collapsedParameters","param","collapsedFiles","payload_id","params","DialogTitle","DialogContent","dividers","help_cmd","wordBreak","overflow","whiteSpace","needs_admin","TextField","select","label","MenuItem","op","DialogActions","descriptionElementRef","useRef","descriptionElement","current","focus","scroll","MythicModifyStringDialog","setComment","onCommitSubmit","title","MythicViewJSONAsTableDialog","tableType","setTableType","headers","setHeaders","permissions","permissionDict","constructor","Array","isArray","leftColumn","rightColumn","keys","position","header","element","row","MythicViewObjectPropertiesAsTableDialog","MythicSelectFromListDialog","setOptions","setSelected","inputRef","opts","ref","labelId","identifier","dontCloseOnSubmit","action","copyStringToClipboard","str","el","document","createElement","setAttribute","left","body","appendChild","execCommand","removeChild","toString","MenuProps","maxHeight","ITEM_HEIGHT","getContentAnchorEl","useStyles","makeStyles","formControl","spacing","chips","flexWrap","chip","noLabel","marginTop","credentialType","setCredentialType","setAccount","setRealm","setCredential","classes","ValidationTextField","withStyles","root","borderColor","borderWidth","borderLeftWidth","checkError","onKeyPress","this","disabled","requiredValue","InputLabelProps","inputLabelProps","InputProps","helperText","marginBottom","Component","meState","makeVar","loggedIn","user","access_token","refresh_token","menuOpen","successfulLogin","localStorage","setItem","successfulRefresh","getItem","FailedRefresh","removeItem","muiTheme","createMuiTheme","secondary","info","taskDisplayFragment","getSubTaskingQuery","marginLeft","marginRight","height","heading","fontSize","typography","pxToRem","cursor","secondaryHeading","taskAndTimeDisplay","text","secondaryHeadingExpanded","icon","verticalAlign","details","alignItems","column","accordionUseStyles","content","expandIcon","expanded","MinusSquare","d","PlusSquare","StyledTreeItem","paddingRight","iconContainer","opacity","group","paddingLeft","borderLeft","fade","TaskDisplayPreMemo","task","filterOptions","nodesSelected","setNodesSelected","toggleTaskTree","useCallback","task_id","newSelection","TaskRow","toggleSelection","TaskDisplay","memo","TaskStatusDisplay","completed","opsec_pre_blocked","opsec_pre_bypassed","opsec_post_blocked","opsec_post_bypassed","ColoredTaskDisplay","children","themeColor","setThemeColor","minHeight","dropdownOpen","setDropdownOpen","taskingData","setTaskingData","isFetchingSubtasks","setIsFetchingSubtasks","shouldDisplay","setShouldDisplay","me","useReactiveVar","notifyOnNetworkStatusChange","stopPolling","startPolling","getSubTasking","getSubTasks","display_params","operator","username","command_name","toggleTaskDropdown","tasks","nodeId","onIconClick","TaskLabel","tsk","Date","fromNow","displayComment","setDisplayComment","alertBadges","setAlertBadges","accordionClasses","prevResponseCount","responses_aggregate","aggregate","count","useLayoutEffect","scrollContent","max","timestamp","node","isAppearing","getElementById","scrollIntoView","behavior","block","inline","TransitionProps","unmountOnExit","onEntered","defaultExpanded","commentOperator","toLocalTime","view_utc_time","stopPropagation","badgeContent","ResponseDisplayScreenshotModal","zoom","setZoom","src","href","allTokenDataFragment","getTokenInfo","TaskTokenDialog","tokenData","setTokenData","logonsessionData","setLogonSessionData","authenticationData","setAuthenticationData","tokenKeys","logonsessionKeys","authenticationpackageKeys","token_id","token_by_pk","reducedTokenData","logonsession","reducedLogonSessionData","authenticationpackages","reducedAuthenticationData","pkg","pageHeader","pageHeaderText","textAlign","pageHeaderColor","authpkg","useSingleAndDoubleClick","onSingleClick","onDoubleClick","delay","click","setClick","timer","setTimeout","clearTimeout","headerCellRow","flexDirection","top","right","zIndex","headerCell","boxSizing","justifyContent","userSelect","background","paper","borderTop","borderRight","borderBottom","tableHover","cell","fontFamily","cellInner","overflowX","draggableHandlesContainer","draggableHandlesClickArea","draggableHandlesIndicator","backgroundImage","HeaderCell","sortIndicatorIndex","sortDirection","headerNameKey","VariableSizeGridProps","rowIndex","columnIndex","handleClick","handleDoubleClick","handleClicks","item","items","Box","Cell","onDoubleClickRow","cellStyle","DraggableHandles","forwardRef","rowHeight","minColumnWidth","columnWidths","onStop","isDragging","setIsDragging","_","leftOffset","slice","axis","bounds","Number","POSITIVE_INFINITY","bottom","y","onStart","MIN_COLUMN_WIDTH","CellRenderer","ResizableGridWrapper","columns","onClickHeader","widthMeasureKey","AutoSizerProps","scrollbarWidth","useScrollbarSize","setColumnWidths","gridRef","dragHandlesRef","getColumnWidth","getRowHeight","totalWidth","updatedColumnWidths","totalWidthDiff","updatedWidthIndexs","resetAfterColumnIndex","itemsWithHeader","innerElementType","rest","disableAutosize","longestElementInColumn","Math","itemRow","String","cellData","updatedWidths","columnWidth","floor","autosizeColumn","columnCount","rowCount","itemData","overscanRowCount","onScroll","scrollLeft","scrollTo","MythicResizableGrid","ResponseDisplayPlaintext","plaintext","plaintextView","setPlaintextView","newPlaintext","mode","showGutter","highlightActiveLine","minLines","maxLines","readOnly","showLineNumbers","tabSize","useWorker","useSnackbarRef","SnackbarUtilsConfigurator","useSnackbar","msg","toast","dismiss","closeSnackbar","enqueueSnackbar","MythicTabPanel","other","tabInfo","getCallbackData","queryParams","changeSearchParam","flexGrow","overflowY","role","a11yProps","MythicTabLabel","onContextMenu","onCloseTab","selectionFollowsFocus","textColor","indicator","onEditTabDescription","tabID","MythicSearchTabLabel","iconComponent","ReissueTaskMutationGQL","ReissueTaskHandlerMutationGQL","getAllResponsesLazyQuery","transform","speedDial","tooltip","contrast","boxShadow","shadows","arrow","TaskDisplayContainer","totalCount","setTotalcount","viewBrowserScript","setViewBrowserScript","openCommentDialog","setOpenCommentDialog","openTokenDialog","setOpenTokenDialog","openParametersDialog","setOpenParametersDialog","openStdoutStderrDialog","setOpenStdoutStderrDialog","openOpsecDialog","setOpenOpsecDialog","openTaskTagDialog","setOpenTaskTagDialog","commandID","setCommandID","search","setSearch","searchOutput","setSearchOutput","fetchLimit","currentPage","setCurrentPage","selectAllOutput","setSelectAllOutput","openSpeedDial","setOpenSpeedDial","output","response","Buffer","from","dataBlob","Blob","ele","URL","createObjectURL","download","downloadResponses","reissue_task","reissueTask","reissue_task_handler","reissueTaskHandler","changeTotalCount","newTotal","tooltipPlacement","container","token","xs","command_id","onSubmitSearch","searchText","ariaLabel","FabProps","TooltipClasses","tooltipTitle","faExpandArrowsAlt","faExternalLinkAlt","window","original_params","faBook","paddingBottom","ceil","page","boundaryCount","subResponsesQuery","getResponsesLazyQuery","taskScript","ResponseDisplay","setOutput","rawResponses","setRawResponses","browserScriptData","setBrowserScriptData","script","highestFetched","setHighestFetched","totalFetched","setTotalFetched","useSubscription","onSubscriptionData","subscriptionData","newerResponses","r","outputResponses","rawResponseArray","highestFetchedId","totalFetchedSoFar","fetchMoreResponses","offset","filterOutput","scriptData","copied","tableUpdates","table","t","filteredRows","rows","foundMatch","res","browserscriptoperation","browserscript","unb64script","fun","Function","fetchScripts","responses","maxID","responseArray","response_aggregate","fetchAllResponses","operator_id","user_id","current_operation_id","endAdornment","screenshot","scr","dl","s","ResponseDisplayScreenshot","openScreenshot","setOpenScreenshot","now","toUTCString","agent_file_id","hoverText","ResponseDisplayDownload","dowload","startIcon","ResponseDisplaySearch","location","origin","updateCommentMutation","getCommentQuery","TaskCommentDialog","task_by_pk","loading","update","cache","updateComment","addTaskTagMutation","removeTaskTagMutation","getTaskTagsQuery","button","not","intersection","TaskTagDialog","newTag","setNewTag","currentTags","tasktag","allTags","find","setLeft","setRight","setOriginalTags","addTaskTag","removeTaskTag","setChecked","originalTags","leftChecked","rightChecked","handleToggle","currentIndex","newChecked","customList","cardHeader","dense","tabIndex","disableRipple","inputProps","justify","concat","tasktag_id","updateOpsecRequestMutation","getOpsecQuery","TaskOpsecDialog","opsecMessage","setOpsecMessage","opsecData","setOpsecData","message","opsec_pre_bypass_user","opsec_pre_message","opsec_post_bypass_user","opsec_post_message","requestOpsecBypass","updateOpsecRequest","getParametersQuery","TaskViewParametersDialog","workingComment","tasking_location","TaskViewStdoutStderrDialog","stdout","stderr","MythicStyledTooltip","getLoadedCommandsQuery","TaskFromUIButton","ui_feature","onTasked","fileBrowserCommands","setFileBrowserCommands","openSelectCommandDialog","setOpenSelectCommandDialog","selectedCommand","setSelectedCommand","callbackTokenOptions","setCallbackTokenOptions","selectedCallbackToken","setSelectedCallbackToken","openCallbackTokenSelectDialog","setOpenCallbackTokenSelectDialog","taskingVariables","setTaskingVariables","createTaskingMutation","createTask","callbackData","availableCommands","callback_by_pk","availableTokens","callbacktokens","User","TokenId","onSubmitTasking","getIconName","iconName","faFolderOpen","faFolder","faFileArchive","faBoxOpen","faCog","faFileWord","faFileExcel","faFilePowerpoint","faFilePdf","faDatabase","faKey","faFileCode","faDownload","faUpload","faFileImage","faList","faTrashAlt","faSyringe","faSkullCrossbones","faCamera","faFileAlt","ResponseDisplayTableStringCell","rowData","rowStyle","copyIcon","IconButton","faCopy","startIconHoverText","startIconColor","plaintextHoverText","endIcon","endIconHoverText","endIconColor","getStringSize","bytes","parseFloat","pow","toFixed","ResponseDisplayTableSizeCell","ResponseDisplayTableActionCell","openButton","setOpenButton","openTaskingButton","setOpenTaskingButton","dropdownAnchorRef","openDropdownButton","setOpenDropdownButton","handleClose","contains","finishedTasking","finishedViewingData","leftColumnTitle","rightColumnTitle","Popper","transition","placement","Grow","ClickAwayListener","onClickAway","MenuList","option","handleMenuItemClick","getButtonObject","ResponseDisplayTable","allData","setAllData","sortKey","sortType","sortData","setSortData","sortedData","useMemo","tmpData","reverse","gridData","sortColumn","disableSort","date","init_date","toDateString","toTimeString","getTimeDifference","checkin_time","getTime","getTimezoneOffset","millisec","abs","seconds","trunc","minutes","hours","days","useInterval","savedCallback","setInterval","clearInterval","webpackEmptyContext","req","Error","code","resolve","module","exports","LoginForm","setUsername","password","setPassword","isJWTValid","submit","preventDefault","requestOptions","method","fetch","then","json","restartWebsockets","catch","to","locationState","state","pathname","redirectPath","logo","alt","APITokenRow","onDeleteAPIToken","token_value","SettingsOperatorDialog","passwordOld","setPasswordOld","passwordNew","setPasswordNew","DialogContentText","onAccept","SettingsOperatorDeleteDialog","SettingsOperator","setOpen","openUpdate","setOpenUpdateDialog","openDelete","setOpenDeleteDialog","onDeleteOperator","onUsernameChanged","onPasswordChanged","old_password","new_password","onViewUTCChanged","active","onActiveChanged","last_login","creation_time","admin","onAdminChanged","paddingTop","colSpan","Collapse","in","timeout","gutterBottom","onCreateAPIToken","float","apitokens","SettingsOperatorTable","openNew","setOpenNewDialog","onNewOperator","operators","GET_Operator","operatorsUpdateViewUTCTime","operatorsUpdateAdmin","operatorsUpdateActive","operatorsDelete","operatorsUpdateUsername","newOperatorMutation","operatorsUpdatePassword","createAPITokenMutation","deleteAPITokenMutation","Settings","setOperators","update_operator_by_pk","updatedOperators","err","updateUTC","deleteOperator","updateAdmin","updateActive","createAPIToken","delete_apitokens_by_pk","api","deleteAPIToken","createOperator","newOperator","updateUsername","updatePassword","GET_Payload_Details","PayloadTypeBuildDialog","buildParams","setBuildParams","payload_name","buildparameters","parameter_type","defaultParameter","LinearProgress","expand","transitions","create","duration","shortest","expandOpen","running","notrunning","StyledAvatar","badge","borderRadius","animation","border","Badge","PayloadTypeCard","wrappedPayloads","setWrappedPayloads","openBuildingDialog","setOpenBuildingDialog","supportedOS","setSupportedOS","last_heartbeat","wrap_these_payload_types","wrapped","supported_os","Card","overlap","invisible","CardMedia","media","objectFit","CardContent","author","note","alignContent","wrapper","SUB_Payload_Types","PayloadTypeContainerDisplay","payloadTypes","setPayloadTypes","pt","GET_C2_Details","C2ProfileBuildDialog","randomize","format_string","getProfileOutputQuery","C2ProfileOutputDialog","profile_id","getProfileOutput","getProfileConfigQuery","C2ProfileConfigDialog","config","setConfig","filename","downloadContainerFile","atob","onConfigSubmit","C2ProfileStartStopOutputDialog","CreatePayloadParameter","passedValue","returnAllDictValues","dictValue","setDictValue","dictOptions","setDictOptions","dictSelectOptions","setDictSelectOptions","dictSelectOptionsChoice","setDictSelectOptionsChoice","chooseOptions","setChooseOptions","dateValue","setDateValue","submitDictChange","list","condensed","custom","tmpDate","setDate","getDate","onChangeDate","toISOString","initial","default_show","dictSelectOptionsInitial","preCount","addDictValEntry","newDictValue","toggleSwitchValue","newVal","utils","DateFnsUtils","Grid","disableToolbar","format","KeyboardButtonProps","newValues","removeDictEntry","startAdornment","updated","onChangeDictKey","onChangeDictVal","selectOpt","CreatePayloadC2ProfileParametersTable","paramName","getProfileInstaceQuery","deleteInstanceMutation","createInstanceMutation","C2ProfileSavedInstancesDialog","instanceName","setInstanceName","selectedInstance","setSelectedInstance","createdInstances","setCreatedInstances","baseParameters","setBaseParameters","currentParameters","setCurrentParameters","c2profile_by_pk","random","RandExp","gen","localeCompare","c2profileparametersinstance","inst","getInstanceValues","updatedInstances","instance_name","deleteInstance","create_c2_instance","createInstance","InputLabel","c2Name","parameterName","c2params","c2profile_id","c2_instance","successButton","errorButton","startStopProfileMutation","setProfileConfigMutation","C2ProfilesCard","handleDropdownToggle","prevOpen","handleDropdownClose","startStopProfile","setOpenProfileStartStopDialog","onStartStopProfile","openProfileDialog","setOpenProfileDialog","openProfileConfigDialog","setOpenProfileConfigDialog","openProfileStartStopDialog","openProfileSavedInstancesDialog","setOpenProfileSavedInstancesDialog","uploadContainerFile","configSubmit","is_p2p","faLink","payloadtypec2profiles","container_running","ButtonGroup","file_path","disablePortal","SUB_C2_Profiles","C2ProfileContainerDisplay","setC2profile","TranslationContainerCard","faLanguage","payloadtypes","SUB_Translation_Containers","TranslationContainerDisplay","translationContainers","setTranslationContainers","translationContainersWithPayloads","setTranslationContainersWithPayloads","unassigned","translationcontainer","tr","assigned","PayloadTypesC2Profiles","CreatePayloadNavigationButtons","first","canceled","finished","last","GET_Payload_Types","Step1SelectOS","os","setOS","osOptions","setOSOptions","sortedOptions","currentOptions","adds","prevData","CircularProgress","align","FormHelperText","CreatePayloadBuildParametersTable","buildParameters","Step2SelectPayloadType","selectedPayloadType","setSelectedPayloadType","fileExtension","setFileExtension","supportsDynamicLoading","setSupportsDynamicLoading","payloadTypeParameters","setSelectedPayloadTypeParameters","buildOptions","file_extension","supports_dynamic_loading","payloadtypedata","newParams","finishedParams","MythicConfirmDialog","dialogText","cancelText","acceptText","divider","Step3SelectCommands","commands","setCommands","commandOptions","setCommandOptions","openConfirmDialog","setOpenConfirmDialog","payloadType","allCommands","reason","include_command","build_option_that_sets_include_to_false","selectedCommands","CommandTransferSelect","foundExit","cmdNames","hoveredCommand","setHoveredCommnad","itemKey","initialLeft","initialRight","setHoveredData","innerText","CardHeader","Divider","List","valueObj","ListItem","ListItemIcon","Checkbox","ListItemText","Step4C2Profiles","c2Profiles","setC2Profiles","c2","original","fixedArray","originalPiece","final","updateC2Parameter","updatedc2","curC2","curc2","FormControlLabel","control","toggleC2Selection","labelPlacement","onChangeCreatedInstanceName","allValid","includedC2","adjustedC2","subscribe_payloads","breakpoints","up","minWidth","fontWeight","actionRoot","icons","collapse","checkIcon","textTransform","SnackMessage","setExpanded","CardActions","clsx","file_id","SnackMessageError","PayloadSubscriptionNotification","build_phase","build_message","persist","build_stderr","create_payload","Step5Build","setFilename","setDescription","createPayload","createPayloadMutation","final_values","finishedPayload","CreatePayload","setPayload","activeStep","setActiveStep","handleStepData","stepData","handleNext","cancelStep","handleBack","steps","prevActiveStep","Stepper","alternativeLabel","Step","StepLabel","step","getStepContent","disableNext","selectedPayloadTypeID","setSelectedPayloadTypeID","DetailedPayloadTable","DetailedPayloadInnerTable","setBuildParameters","commandState","payloadcommands","mythic","version","buildParametersState","c2ProfilesState","sha1","md5","j","wrapped_payload_id","Step3SelectPayload","payloadOptions","setPayloadOptions","payloadtype_by_pk","PayloadSelect","selectedPayload","stickyHeader","PayloadsTableRow","onSelected","openDetailedView","setOpenDetailedView","autoHideDuration","build_error","CreatePayloadWrapper","EventFeedTableEventsActions","setAnchorEl","onUpdateResolution","resolved","ListItemSecondaryAction","Menu","level","onUpdateLevel","getSurroundingEvents","onUpdateDeleted","EventFeedTableEvents","ListItemAvatar","Avatar","disableTypography","textBackgroundColorSuccess","textBackgroundColor","textBackgroundColorMythic","textBackgroundColorError","EventFeedTableInput","setMessage","onSubmitMessage","Row","EventList","operationeventlog","listRef","createRef","getItemSize","eventlogWithFunctions","oplog","resetAfterIndex","itemCount","itemSize","overscanCount","EventFeedTable","messagesEndRef","scrollToBottom","loadMore","loadNextError","resolveViewableErrors","resolveAllErrors","GET_Event_Feed","SUB_Event_Feed","GET_Surrounding_Events","Create_Operational_Event_Log","GET_Event_Feed_Next_Error","Update_Deleted","Update_Resolution","Update_Level","Update_ResolveViewableErrors","Update_ResolveAllErrors","EventFeed","setOperationEventLog","setOffset","eventQuerySize","shouldResubscribe","newEvents","indx","updatingPrev","getMoreTasking","foundNew","getSurroundingEventQuery","getNextError","newOperationEventLog","removedMessage","update_operationeventlog","returning","newMessages","updateDeleted","updatedMessage","update_operationeventlog_by_pk","updatedMessages","updateResolution","updateLevel","updated_ids","updateResolveViewable","updateResolveAllErrors","lower_id","upper_id","resolveIds","ids","OperationTableRowUpdateOperatorsDialogRow","viewMode","setViewMode","blockListName","setBlockListName","view_mode","disabledcommandsprofile","updateOperator","blockListItemIndex","commandBlockLists","cbl","GET_Operations","Update_Lead","Update_OperatorViewMode","Remove_OperatorFromOperation","Add_OperatorsToOperation","OperationTableRowUpdateOperatorsDialog","setAdmin","originalOperators","setOriginalOperators","setCommandBlockLists","allOperators","operation_by_pk","operatoroperations","updateAssignments","operatoroperation_id","blockListNames","updateOperationLead","addOperators","removeOperatorsMutation","updateOperatorViewMode","newAdmin","admin_id","newOperators","removeOperators","oldMatch","oop","operatoroperation_ids","GET_OperationData","OperationTableRowNotificationsDialog","setName","channel","setChannel","displayName","setDisplayName","iconEmoji","setIconEmoji","iconURL","setIconURL","webhook","setWebhook","webhookMessage","setWebhookMessage","complete","setComplete","webhook_message","icon_emoji","icon_url","onTextChange","onUpdateOperation","updateCurrentOpertionMutation","OperationTableRow","openUpdateNotifications","setOpenUpdateNotifications","openUpdateOperators","setOpenUpdateOperators","openChangeCurrentOperation","setOpenChangeCurrentOperation","updateCurrentOperation","current_operation_name","operation_name","Update_Operation","newOperationMutation","OperationTable","openNewOperator","setOpenNewOperatorDialog","update_operation_by_pk","updateOperation","createOperation","onNewOperation","operation","newOperation","operations","PayloadTypeBlockListPreMemo","leftTitle","setLeftTitle","rightTitle","setRightTitle","PayloadTypeBlockList","getPayloadTypesAndCommandsQuery","EditBlockListDialog","dialogTitle","propBlockListName","currentSelected","editable","setSelectedCommands","updatedPayloadTypes","trim","toAdd","toRemove","newBlockListEntry","deleteBlockListMutation","deleteBlockListEntriesMutation","CommandBlockListTable","blockLists","setBlockLists","newBlockList","insert_disabledcommandsprofile","currentBlockLists","newBlockLists","newEntries","newBlockListEntries","deleteBlockList","filteredBlockLists","deleteBlockListEntry","filteredValues","deleted_ids","deleteBlockListEntries","onSubmitEdits","removeEntryIDs","onAcceptDelete","CommandBlockListTableRow","blockedCommandDisplay","setBlockedCommandDisplay","updatedEntries","setUpdatedEntries","newDisplay","commandNames","GET_BlockLists","Operations","setOperations","arrayForm","updatedOperations","getCommandsAndPayloadTypesQuery","EditScriptDialog","setScript","payloadTypeCmdOptions","setPayloadTypeCmdOptions","setAuthor","inputPTRef","inputCMDRef","onSubmitEdit","cmds","new","onRevert","BrowserScriptsTableRow","openEdit","setOpenEdit","isApplied","setIsApplied","openDeleteDialog","browserscriptoperations","onDelete","browserscript_id","onToggleActive","user_modified","onSubmitRemoveFromOperation","onSubmitApplyToOperation","container_version","BrowserScriptsTable","openNewScriptDialog","setOpenNewScriptDialog","onSubmitNew","onToggleOperation","BrowserScriptsOperationsTableRow","openViewScript","setOpenViewScript","BrowserScriptsOperationsTable","SUB_BrowserScripts","SUB_OperationBrowserScripts","updateBrowserScriptActive","updateBrowserScriptScript","updateBrowserScriptRevert","addBrowserScript","deleteBrowserScriptMutation","BrowserScripts","browserScripts","setBrowserScripts","operationBrowserScripts","setOperationBrowserScripts","toggleActive","updateScript","revertScript","createBrowserScript","deleteBrowserScript","updateDescriptionMutation","getDescriptionQuery","PayloadDescriptionDialog","payload_by_pk","updateDescription","getFilenameQuery","PayloadFilenameDialog","fileId","setFileId","PayloadBuildMessageDialog","payloadData","setPayloadData","viewError","setViewError","build_stdout","PayloadsTableRowC2Status","PayloadsTableRowBuildStatus","thickness","checkPayloadConfigurationQuery","PayloadConfigCheckDialog","config_check","generateRedirectRulesMutation","PayloadRedirectRulesDialog","redirect_rules","rebuildPayloadMutation","exportPayloadConfigQuery","setOpenDescriptionDialog","openFilename","setOpenFilenameDialog","openBuildMessage","setOpenBuildMessageDialog","openConfigCheckDialog","setOpenConfigCheckDialog","openRedirectRulesDialog","setOpenRedirectRulesDialog","triggerRebuild","export_payload_config","exportConfig","callback_alert","onAlertChanged","deleted","auto_generated","showDeleted","showAutoGenerated","onDeletePayload","ImportPayloadConfigDialog","PayloadsTable","onUpdateCallbackAlert","setShowDeleted","setShowAutoGenerated","openPayloadImport","setOpenPayloadImport","payloadFragment","SUB_Payloads","Get_Payloads","payloadsDelete","payloadsCallbackAlert","Payloads","setPayloads","deleteFile","payload_ids","deletePayload","update_payload_by_pk","callbackAlert","createContextMenu","g","menuItems","svgId","d3","remove","append","attr","selectAll","enter","on","menuFactory","pageX","pageY","C2PathDialog","dagreRef","reZoom","setReZoom","drawC2PathElements","callbackgraphedges","rankDir","label_components","packet_flow_view","include_disconnected","show_all_nodes","parent","view_config","node_events","svgGroup","disconnected","disconnectedArrow","connected","connectedArrow","nodeColor","nodeLabelStyle","edgeLabelStyle","add_edge_to_mythic","add_node","setEdge","edge_id","labelStyle","arrowheadStyle","setNode","getLabel","shape","isParent","clusterLabelPos","graphGroup","setParent","add_edge_p2p","createEdge","adjusted_direction","dagreD3","graphlib","Graph","compound","multigraph","directed","setGraph","rankdir","setDefaultEdgeLabel","svg","_groups","call","hasEdge","render","getBoundingClientRect","shapes","circle","bbox","shapeSvg","insert","point","square","candidates","longest","outEdges","graphWidth","graph","graphHeight","zoomScale","min","translateX","translateY","translate","scale","SUB_Edges","ExpandedCallbackSideDetails","ExpandedCallbackSideDetailsTable","displayTime","setDisplayTime","openEditDescriptionDialog","setOpenEditDescriptionDialog","activeEgress","setActiveEgress","activeEgressBool","setActiveEgressBool","openC2Dialog","setOpenC2Dialog","setCallbackgraphedges","callbackgraphedgesAll","setCallbackgraphedgesAll","hasEgressRoute","setHasEgressRoute","callbackEdges","setCallbackEdges","curTime","last_checkin","routes","getEdges","activeOnly","myEdges","foundMore","newEdges","myActiveEdges","locked","locked_operator","integrity_level","ip","external_ip","domain","architecture","pid","sleep_info","process_name","extra_info","SUB_Callbacks","ExpandedCallback","callbackId","useParams","setCallbacks","callbackID","setTabInfo","tabType","payloadDescription","callbackDescription","CallbacksTabsTasking","avatar","red","QuickStartCard","subheader","styl","Link","underline","GetC2ProfilesAndPayloadTypes","AgentC2Overview","payloadTypeRows","setPayloadTypeRows","wrappers","setWrappers","c2Headers","payloadRows","payloadc2","wrapperRows","w","Tooltip","wr","Home","LoggedInRoute","rowContainer","depth","rowButtonWrapper","textDecoration","rowButton","rowLabel","visuallyHidden","clip","FileBrowserNode","isOpen","onClickButton","handleOnClickRow","filebrowserobj","FileBrowserRow","parent_id","is_file","folderColor","filebrowserobjs_aggregate","name_text","VirtualTreeRow","onSelectNode","onExpandNode","onCollapseNode","ListProps","FileBrowserVirtualTree","nodes","openNodes","flattenNode","isLeaf","flat","flattenedNodes","CallbacksTabsFileBrowserTree","treeRoot","fetchFolderData","setTableData","setOpenNodes","nodeData","DownloadHistoryDialog","history","setHistory","hist","chunks_received","total_chunks","getPermissionsDataQuery","getFileDownloadHistory","updateFileComment","fillWidth","CallbacksTabsFileBrowserTable","setSortDirection","setSortKey","setSortType","tempData","onTaskRowAction","FileBrowserTableRowSizeCell","FileBrowserTableRowStringCell","modify_time","showDeletedFiles","selectedFolder","filteredData","f","onRowDoubleClick","FileBrowserTableRowNameCell","filemeta","FileBrowserTableRowActionCell","fileCommentDialogOpen","setFileCommentDialogOpen","viewPermissionsDialogOpen","setViewPermissionsDialogOpen","fileHistoryDialogOpen","setFileHistoryDialogOpen","permissionData","setPermissionData","downloadHistory","setDownloadHistory","filebrowserobj_by_pk","getPermissions","getHistory","whichOption","optionsA","optionsB","filebrowserobj_id","full_path_text","path","parent_path_text","uifeature","fileDataFragment","rootFileQuery","folderQuery","fileDataSubscription","getDeltaFilesQuery","getCallbackDataQuery","CallbacksTabsFileBrowserLabel","customDescription","CallbacksTabsFileBrowserPanel","fileBrowserRoots","fileBrowserRootsState","setFileBrowserRootsState","setSelectedFolder","selectedFolderDataRef","selectedFolderData","setSelectedFolderData","searchCallback","setSearchCallback","taskInfo","setTaskInfo","uiFeature","setUIFeature","currentCallbackIDSetInTable","lastFetchedTime","savedStateForConfirmDialog","setSavedStateForConfirmDialog","setShowDeletedFiles","subscribeToMore","roots","chilren","updatingData","obj","foundHost","rootEntry","mergeData","getFileDeltas","newRoots","workingSet","getFolderData","all_objects","startsWith","finalCommands","getCommandOptions","fullPath","file","onSetTableData","confirmed","subscribeToMoreCallback","lastTime","onListFilesButton","onUploadFileButton","onChangeCallbackID","toggleShowDeletedFiles","showStatus","initialCallbackID","subscribeToNewFileBrowserObjs","updateQuery","FileBrowserTableTop","hostname","setHostname","setFullPath","setCallbackID","setLocalShowDeletedFiles","manuallySetCallbackID","setManuallySetCallbackID","onLocalListFilesButton","getNodeData","nestingLevel","isOpenByDefault","CallbacksTabsProcessBrowserTree","treeWalker","async","process_id","getDetailedData","getProcessTokenData","noRowsRender","columnData","dataKey","DisplayData","CallbacksTabsProcessBrowserTable","widthRef","sortBy","setSortBy","actions","parent_process_id","bin_path","setColumns","sortTable","h","rowGetter","resizeRow","deltaX","prevWidths","percentDelta","offsetWidth","nextHeader","getNext","headerRenderer","defaultClassName","defaultClassNameDragging","onDrag","cellRenderer","headerHeight","noRowsRenderer","col","process_by_pk","tokens","getTokens","dataFragment","taskFragment","getNextProcessQuery","getPrevProcessQuery","getLatestTaskForHost","CallbacksTabsProcessBrowserLabel","CallbacksTabsProcessBrowserPanel","currentOS","setCurrentOS","makeTree","process","dataTree","processes","getNextProcessDataByHostAndTask","getPreviousProcessDataByHostAndTask","process_aggregate","onNextButton","onPreviousButton","onDiffButton","ProcessBrowserTableTop","taskID","setTaskID","CallbacksTabs","openTabs","clickedTabId","clearSelectedTab","callbackTokens","setCallbackTokens","callbacktoken","onCloseTabLocal","AppBar","Tabs","newValue","indicatorColor","scrollButtons","tab","HeightsDialog","heights","setHeights","newHeights","descendingComparator","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","EnhancedTableHead","onSelectAllClick","numSelected","onRequestSort","indeterminate","headCells","headCell","shownColumns","disablePadding","TableSortLabel","property","EnhancedTableRow","isItemSelected","MythicTransferListDialog","MythicDisplayTextDialog","hideCallbackMutation","toggleHideCallbackMutations","removeEdgeMutation","addEdgeMutation","unlockCallbackMutation","lockCallbackMutation","updateDescriptionCallbackMutation","updateSleepInfoCallbackMutation","DetailedCallbackTable","commandsWithScriptOnly","CallbacksTableRowPreMemo","openMetaDialog","setOpenMetaDialog","openSleepDialog","setOpenSleepDialog","openOSDialog","setOpenOSDialog","setShownColumns","onOpenTab","updateCallback","hideCallback","displayOSInfo","getOSIcon","faWindows","faLinux","faApple","faChrome","faQuestion","toggleLock","TimeUpdater","sleep","updateSleepInfo","CallbacksTableRow","TimeUpdaterPreMemo","lastCheckin","setLastCheckin","useToolbarStyles","highlight","lighten","EnhancedTableToolbar","Toolbar","onHideSelected","onTaskSelected","faTasks","openDialog","CallbacksTable","setOrder","setOrderBy","openAdjustColumnsDialog","setOpenAdjustColumnsDialog","allColumns","setAllColumns","selectedIndex","newSelected","isSelected","lockCallback","unlockCallback","updateSleep","tableHeadCells","numeric","numberic","allColumnNames","localSettings","updateDescriptionSubmit","updated_selected","callbacks","newSelecteds","cal","getP2PProfilesAndCallbacks","selectEmpty","ManuallyAddEdgeDialog","callbackOptions","setCallbackOptions","profileOptions","setProfileOptions","selectedDestination","setSelectedDestination","selectedProfile","setSelectedProfile","inputRefDestination","filteredProfileOptions","callbackc2profiles","source_profile","cbopts","cb","loadedLinkCommandsQuery","CallbacksGraph","linkCommands","setLinkCommands","openSelectLinkCommandDialog","setOpenSelectLinkCommandDialog","selectedLinkCommand","setSelectedLinkCommand","selectedCallback","setSelectedCallback","manuallyRemoveEdgeDialogOpen","setManuallyRemoveEdgeDialogOpen","manuallyAddEdgeDialogOpen","setManuallyAddEdgeDialogOpen","edgeOptions","setEdgeOptions","addEdgeSource","setAddEdgeSource","getLinkCommands","viewConfig","setViewConfig","manuallyRemoveEdge","manuallyAddEdge","elm","nodeEdges","getNodeEdges","fulledg","view","saveSvgAsPng","allEdges","getConfigString","source_id","destination_id","CallbacksTop","topDisplay","onOpenTabLocal","tabData","topHeight","Callbacks","setTopDisplay","setOpenTabs","setClickedTabId","oldTabs","tabs","lastClickedTab","oldHeights","onSubmitHeights","SpeedDialWrapper","flexBasis","tabSet","tabHeight","SpeedDialWrapperPreMemo","openHeightsDialog","setOpenHeightsDialog","SpeedDial","SpeedDialIcon","onOpen","SpeedDialAction","responseSearch","taskingDataFragment","parameterSearch","commentSearch","SearchTabTasksLabel","SearchTabTasksSearchPanel","searchField","setSearchField","searchFieldOptions","filterTaskStatus","setFilterTaskStatus","submitSearch","querySearch","querySearchField","queryTaskStatus","adjustedSearch","adjustedTaskStatus","onOutputSearch","taskStatus","onParameterSearch","onCommentSearch","URLSearchParams","adjustedSearchField","get","onChangeSearchField","onChangeTaskStatus","FormLabel","SearchTabTasksPanel","setTotalCount","setTaskStatus","handleCallbackSearchSuccess","task_aggregate","handleCallbackSearchFailure","getOutputSearch","getParameterSearch","getCommentSearch","new_search","newTaskStatus","field","Pagination","siblingCount","showFirstButton","showLastButton","MythicSnackDownload","downloadLink","downloadBulkQuery","updateFileDeleted","FileMetaDownloadTable","setFiles","onToggleSelection","initialSelected","download_bulk","downloadBulk","file_ids","onEditComment","fileIds","FileMetaDownloadTableRow","setOpenDelete","openDetails","setOpenDetails","editCommentDialogOpen","setEditCommentDialogOpen","update_filemeta_by_pk","full_remote_path_text","FileMetaUploadTable","FileMetaUploadTableRow","FileMetaScreenshotTable","FileMetaScreenshotTableRow","FileBrowserTable","FileBrowserTableRow","update_filebrowserobj_by_pk","fileMetaFragment","fileBrowserFragment","filenameFileMetaUploadSearch","filenameFileMetaDownloadSearch","filenameFileBrowserSearch","hashFileMetaUploadSearch","hashFileMetaDownloadSearch","commentFileMetaUploadSearch","commentFileMetaDownloadSearch","commentFileBrowserSearch","filenameFileMetaScreenshotSearch","hashFileMetaScreenshotSearch","commentFileMetaScreenshotSearch","SearchTabFilesLabel","SearchTabFilesSearchPanel","searchHost","setSearchHost","searchLocation","setSearchLocation","searchLocationOptions","parsedSearch","setParsedSearch","querySearchHost","querySearchLocation","adjustedSearchHost","adjustedSearchLocation","onFilenameSearch","onHashSearch","onChangeSearchLocation","xhr","XMLHttpRequest","fd","FormData","setRequestHeader","onreadystatechange","readyState","responseText","statusText","send","uploadFile","SearchTabFilesPanel","fileMetaData","setFileMetaData","fileBrowserData","setFileBrowserData","handleFileMetaSearchResults","filemeta_aggregate","handleFileBrowserSearchResults","filebrowserobj_aggregate","getfilenameFileMetaUploadSearch","getfilenameFileMetaDownloadSearch","getfilenameFileBrowserSearch","getfilenameFileMetaScreenshotSearch","gethashFileMetaUploadSearch","gethashFileMetaDownloadSearch","gethashFileMetaScreenshotSearch","getcommentFileMetaUploadSearch","getcommentFileMetaDownloadSearch","getcommentFileBrowserSearch","getcommentFileMetaScreenshotSearch","hash","updateCredentialComment","updateCredentialAccount","updateCredentialRealm","updateCredentialCredential","updateCredentialDeleted","CredentialTable","setCredentials","cred","onEditAccount","onEditRealm","onEditCredential","onEditDeleted","CredentialTableRow","editAccountDialogOpen","setEditAccountDialogOpen","editRealmDialogOpen","setEditRealmDialogOpen","editCredentialDialogOpen","setEditCredentialDialogOpen","update_credential_by_pk","updateAccount","updateRealm","updateCredential","credential_id","accountSearch","realmSearch","credentialSearch","SearchTabCredentialsLabel","SearchTabCredentialsSearchPanel","onAccountSearch","onRealmSearch","onCredentialSearch","OnTypeSearch","SearchTabCredentialsPanel","credentialaData","setCredentialData","handleCredentialSearchResults","credential_aggregate","getAccountSearch","getRealmSearch","getCredentialSearch","KeylogsTable","keylogs","setKeylogs","newArrayData","newSecondLevel","key2","value2","newThirdLevel","key3","value3","k0","k1","k1i","k2","k2i","k3","k3i","keystrokes_text","keylogFragment","keylogSearch","userUniqueSearch","userSearch","programSearch","programUniqueSearch","hostSearch","SearchTabKeylogsLabel","SearchTabKeylogsSearchPanel","onKeylogSearch","onUserSearch","onProgramSearch","onHostSearch","SearchTabKeylogsPanel","keylogData","setKeylogData","handleKeylogSearchResults","keylog_aggregate","keylog","getKeylogSearch","getUserSearch","getUserUniqueSearch","getProgramSearch","getProgramUniqueSearch","getHostSearch","program","TokenDescriptionDialog","updateCallbacksOfDeletedToken","TokenTable","setTokens","TokenTableRow","viewTokenDialog","setViewTokenDialog","editDescriptionDialog","setEditDescriptionDialog","updateCallbackTokensDeleted","update_token_by_pk","Groups","LogonId","LogonType","cbt","tokenFragment","userGroupSearch","SIDSearch","logonTypeSearch","SearchTabTokensLabel","SearchTabTokensSearchPanel","onUserGroupSearch","onSIDSearch","onLogonTypeSearch","SearchTabTokensPanel","handleTokenSearchResults","token_aggregate","getUserGroupSearch","getSIDSearch","getLogonTypeSearch","logontype","sid","CallbackSearchTable","CallbackSearchTableRow","init_callback","callbackFragment","domainSearch","descriptionSearch","ipSearch","SearchTabCallbacksLabel","SearchTabCallbacksSearchPanel","onDomainSearch","onDescriptionSearch","onIPSearch","SearchTabCallbacksPanel","setCallbackData","handleCallbackSearchResults","callback_aggregate","getDomainSearch","getDescriptionSearch","getIPSearch","ArtifactTable","artifacts","setArtifacts","ArtifactTableRow","artifact","artifact_instance_text","artifactFragment","artifactSearch","commandSearch","typeSearch","taskSearch","callbackSearch","SearchTabArtifactsLabel","SearchTabArtifactsSearchPanel","onArtifactSearch","onCommandSearch","onTypeSearch","onTaskSearch","onCallbackSearch","SearchTabArtifactsPanel","artifactData","setArtifactData","taskartifact_aggregate","taskartifact","getArtifactSearch","getCommandSearch","getTypeSearch","getTaskSearch","getCallbackSearch","stopSocks","SocksSearchTable","port","SearchTabSocksLabel","faSocks","SearchTabSocksPanel","onSocksSearch","Search","tabTypes","valueString","valueIndex","set","newRelativePathQuery","SUB_Event_Logs","TopAppBarNotifications","operationeventlog_aggregate","EventFeedNotifications","errorData","_image","_extends","assign","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgMythicRedSmall","_ref","svgRef","titleId","xmlns","xmlnsXlink","viewBox","enableBackground","xmlSpace","ForwardRef","drawerWidth","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","appBar","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","nested","mythicElement","TopAppBar","settingsRef","documentationRef","documentationAnchorEl","setDocumentationAnchorEl","openGlobal","setOpenGlobal","openCreate","setOpenCreate","openOperations","setOpenOperations","openData","setOpenData","handleDrawerClose","handleDocumentationClose","menuButton","faBiohazard","faFlagCheckered","current_operation","nodeRef","MenuListProps","Drawer","anchor","onEscapeKeyDown","mythicVersion","ListSubheader","toggleTheme","mythicUIVersion","TaskArtifactsTable","taskartifacts","TaskMITREATTACKTable","attacks","setAttacks","newAdds","attacktasks","old","attck","attack","t_num","TaskFilesTable","is_screenshot","is_payload","is_download_from_agent","TaskCredentialsTable","MetadataQuery","TaskMetadataTable","setTasks","getMetadata","task_range","taskIDs","IncludeMoreTasksDialog","taskSelected","setTaskSelected","taskOptions","setTaskOptions","beforeCount","setBeforeCount","afterCount","setAfterCount","searchTerm","setSearchTerm","setOperator","submitFetchTasks","taskInfoFragment","tasksQuery","getTasksAcrossAllCallbacksQuery","getTasksAcrossACallbackQuery","getTasksAcrossAllCallbacksByOperatorQuery","SingleTaskView","taskId","setTaskIDs","removing","setRemoving","openIncludeMoreTasksDialog","setOpenIncludeMoreTasksDialog","taskData","allNewParents","parent_task_id","recent_callback","allParents","allTaskIds","subIds","completedData","before","after","getTasksAcrossAllCallbacks","getTasksAcrossACallback","getTasksAcrossAllCallbacksByOperator","getTasks","toggleTaskToRemove","range","numbers","ranges","expand_range","all_nums","rstart","rend","collapse_range","remainingTasks","remainingTaskIDs","setTaskSearchInfo","baseTask","GlobalStyles","createGlobalStyle","generateReportMutation","generatedReportSubscription","ReportingTable","selectedOutputFormat","setSelectedOutputFormat","includeMITREPerTask","setIncludeMITREPerTask","includeMITREOverview","setIncludeMITREOverview","includeOutput","setIncludeOutput","setIncludeGraphs","excludedCallbackHost","setExcludedCallbackHost","excludedCallbackUser","setExcludedCallbackUser","excludedCallbackID","setExcludedCallbackID","generateReport","dataUUID","pop","outputFormat","includeMITREOverall","excludedUsers","excludedHosts","excludedIDs","Reporting","App","setTheme","mountedComponent","setMountedComponent","setMode","localTheme","useDarkMode","themeMode","themeToggler","default","tableHeader","tableBorder","ThemeProvider","CssBaseline","maxSnack","Snackbar","exact","InMemoryCache","typePolicies","Query","fields","retryLink","RetryLink","jitter","attempts","retryIf","_operation","httpLink","HttpLink","uri","reconnect","connectionParams","Authorization","decoded_token","jwt_decode","exp","authLink","setContext","diff","GetNewToken","errorLink","graphQLErrors","networkError","extensions","websocketClient","SubscriptionClient","protocol","reconnectionAttempts","wsLink","WebSocketLink","splitLink","query","definition","getMainDefinition","kind","apolloClient","ApolloClient","link","close","connect","sendMessage","MessageTypes","GQL_START","ReactDOM","StrictMode","ApolloProvider","client","operatorQuery","CallbacksTabsTaskingFilterDialog","onlyOperators","setOnlyOperators","operatorUsernames","setOperatorUsernames","onlyHasComments","setOnlyHasComments","onlyCommands","setOnlyCommands","everythingBut","setEverythingBut","onlyParameters","setOnlyParameters","filterCommandOptions","commandOptionNames","renderValue","Chip","CallbacksTabsTaskingInputTokenSelect","changeSelectedToken","tokenId","arrgv","require","GetLoadedCommandsSubscription","subscriptionCallbackTokens","subscriptionTask","CallbacksTabsTaskingInputPreMemo","snackMessageStyles","preventDuplicate","snackReverseSearchMessageStyles","loadedOptions","setLoadedOptions","taskOptionsIndex","setTaskOptionsIndex","filteredTaskOptions","setFilteredTaskOptions","tabOptions","setTabOptions","tabOptionsIndex","setTabOptionsIndex","openFilterOptionsDialog","setOpenFilterOptionsDialog","tokenOptions","setTokenOptions","unmodifiedHistoryValue","setUnmodifiedHistoryValue","reverseSearching","setReverseSearching","reverseSearchString","setReverseSearchString","reverseSearchOptions","setReverseSearchOptions","reverseSearchIndex","setReverseSearchIndex","filteredOptions","applyFilteringToTasks","cmdData","parseCommandLine","command_line","stringArgs","booleanArgs","arrayArgs","numberArgs","cli_name","argv","parser","string","boolean","number","configuration","determineCommandGroupName","parsed","cmdGroupOptions","paramGroups","onSubmitCommandLine","force_parsed_popup","splitMessage","cmdGroupName","parsedWithPositionalParameters","parsedCopy","shift","groupParameters","unSatisfiedArguments","fillOutPositionalArguments","onKeyDown","newIndex","lowerCaseTextSearch","filteredMatches","ctrlKey","newMessage","pieces","lastFlag","cmdGroupNames","paramOptions","toLocaleLowerCase","newMsg","endsWith","callback_os","shiftKey","onSubmitFilter","CallbacksTabsTaskingInput","CallbacksTabsTaskingLabel","getTaskingQuery","getNextBatchTaskingQuery","CallbacksTabsTaskingPanel","taskLimit","setTaskLimit","taskingDataRef","selectedToken","setSelectedToken","setFilterOptions","canScroll","setCanScroll","fetched","setFetched","fetchedAllTasks","setFetchedAllTasks","subscriptionDataCallback","oldLength","mergedData","oldArray","equalTaskTrees","limit","getInfiniteScrollTasking","loadingMore","onCreateTask","newFilter","previousTaskingLocation","newTaskingLocation","fileParamExists","missingRequiredPrams"],"mappings":"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,KAAyBC,EAAzB,KACA,EAAoDhmB,mBAAS,IAA7D,mBAAOimB,EAAP,KAA2BC,EAA3B,KACMC,EAAY,CACd,UACA,eACA,qBACA,kBACA,QACA,mBACA,2BACA,kBACA,cACA,sBACA,qBACA,iBACA,eACA,eACA,cACA,iBACA,wBACA,eACA,WACA,gBACA,gBACA,iBACA,WACA,QACA,WACA,gBACA,uBACA,oBACA,aACA,SACA,SACA,uBACA,kBACA,qBACA,UACA,iBACA,oBACA,WACA,cACA,gBACA,eACA,YACA,WACA,2BACA,kBACA,aACA,OACA,iBACA,SACA,SACA,aACA,SACA,QACA,kBACA,kBACA,cACA,wBACA,eACA,mBACA,aACA,yBACA,mBACA,aACA,kCACA,yBACA,iBACA,sBACA,gCACA,eACA,OACA,qBACA,qBACA,YACA,SACA,WACA,UACA,YACA,aACA,WACA,OACA,sBACA,wBACA,wBACA,kBACA,WAEEC,EAAmB,CACvB,UACA,WACA,cACA,YACA,YACA,MACA,YACA,cACA,gBACA,MACA,YACA,sBACA,kBACA,6CACA,cACA,cACA,gBACA,qBACA,aACA,cACA,kBACA,oBACA,qBACA,WAEIC,EAA4B,CAChC,OACA,WAiDJ,OA/CEpV,YAAS0U,EAAc,CACnBliB,UAAW,CAAC6iB,SAAUxmB,EAAMwmB,UAC5BjkB,YAAa,SAAAC,GACT,GAAwB,OAArBA,EAAKikB,YAAqB,CACzBT,EAAaxjB,EAAKikB,aAClB,IAAMC,EAAmBL,EAAUthB,QAAQ,SAACC,EAAM0O,GAChD,YAA6BxK,IAA1B1G,EAAKikB,YAAY/S,IAAgD,OAA1BlR,EAAKikB,YAAY/S,IAA2C,KAA1BlR,EAAKikB,YAAY/S,GACrF,GAAN,mBAAW1O,GAAX,CAAiB,CAAC,KAAQ0O,EAAK,MAASlR,EAAKikB,YAAY/S,MAGlD,YAAI1O,KAEZ,IAEH,GADAghB,EAAaU,GACwB,OAAlClkB,EAAKikB,YAAYE,aAAsB,CACxC,IAAMC,EAA0BN,EAAiBvhB,QAAQ,SAACC,EAAM0O,GAC9D,YAA0CxK,IAAvC1G,EA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","file":"static/js/main.b7729c4d.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport Input from '@material-ui/core/Input';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Paper from '@material-ui/core/Paper';\nimport TableHead from '@material-ui/core/TableHead';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {useTheme} from '@material-ui/core/styles';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport {Typography} from '@material-ui/core';\nimport {useMutation, gql } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Popover from '@material-ui/core/Popover';\nimport {CredentialTableNewCredentialDialog} from '../Search/CredentialTableNewCredentialDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\nconst getDynamicQueryParams = gql`\nmutation getDynamicParamsMutation($callback: Int!, $command: String!, $payload_type: String!, $parameter_name: String!){\n    dynamic_query_function(callback: $callback, command: $command, payload_type: $payload_type, parameter_name: $parameter_name){\n        status\n        error\n        choices\n    }\n}\n`;\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      ...credentialData\n    }\n  }\n`;\n\nexport function TaskParametersDialogRow(props){\n    const [value, setValue] = React.useState('');\n    const theme = useTheme();\n    const [ChoiceOptions, setChoiceOptions] = React.useState([]);\n    const [boolValue, setBoolValue] = React.useState(false);\n    const [arrayValue, setArrayValue] = React.useState([]);\n    const [choiceMultipleValue, setChoiceMultipleValue] = React.useState([]);\n    const [agentConnectNewHost, setAgentConnectNewHost] = React.useState(\"\");\n    const [agentConnectHostOptions, setAgentConnectHostOptions] = React.useState([]);\n    const [agentConnectNewPayload, setAgentConnectNewPayload] = React.useState(0);\n    const [agentConnectHost, setAgentConnectHost] = React.useState(0);\n    const [agentConnectPayloadOptions, setAgentConnectPayloadOptions] = React.useState([]);\n    const [agentConnectPayload, setAgentConnectPayload] = React.useState(0);\n    const [agentConnectC2ProfileOptions, setAgentConnectC2ProfileOptions] = React.useState([]);\n    const [agentConnectC2Profile, setAgentConnectC2Profile] = React.useState(0);\n    const [openAdditionalPayloadOnHostMenu, setOpenAdditionalPayloadOnHostmenu] = React.useState(false);\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const [fileValue, setFileValue] = React.useState({name: \"\"});\n    const [getDynamicParams] = useMutation(getDynamicQueryParams, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if(data.dynamic_query_function.status === \"success\"){\n                setChoiceOptions([...data.dynamic_query_function.choices]);\n                if(props.type === \"Choice\"){\n                    if(data.dynamic_query_function.choices.length > 0){\n                        setValue(data.dynamic_query_function.choices[0]);\n                        props.onChange(props.name, data.dynamic_query_function.choices[0], false);\n                    }\n                }\n            }else{\n                snackActions.warning(\"Failed to fetch dynamic parameter query: \" + data.dynamic_query_function.error);\n            }\n        },\n        onError: (data) => {\n            snackActions.warning(\"Failed to perform dynamic parameter query\");\n            console.log(data);\n        }\n    })\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n            setChoiceOptions([...ChoiceOptions, {...data.insert_credential_one}])\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    useEffect( () => {\n        if(props.dynamic_query_function !== null){\n            if(ChoiceOptions.length === 0){\n                getDynamicParams({variables:{\n                    callback: props.callback_id,\n                    parameter_name: props.name,\n                    command: props.commandInfo.cmd,\n                    payload_type: props.commandInfo.payloadtype.ptype\n                }})\n            }\n        }\n       if(props.type === \"Boolean\"){\n            if(value === \"\"){\n                setBoolValue(props.value);\n                setValue(props.value);\n            }\n       }else if(props.type === \"Array\"){\n            if(arrayValue.length === 0 && props.value.length > 0){\n                setArrayValue(props.value);\n            }\n       }else if(props.type === \"ChoiceMultiple\" && props.dynamic_query_function === null){\n           if(value === \"\"){\n               //console.log(props.value);\n                setChoiceMultipleValue(props.value);\n                setValue(props.value);\n                setChoiceOptions(props.choices);\n           }\n       }\n       else if(props.type === \"AgentConnect\"){\n            if(props.choices.length > 0){\n                //setAgentConnectHost(0);\n                let hostNum = 0;\n                if(agentConnectHost < props.choices.length){\n                    hostNum = agentConnectHost;\n                }else{\n                    setAgentConnectHost(0);\n                }\n                setAgentConnectHostOptions(props.choices);\n                let payloadNum = 0;\n                if(agentConnectPayload < props.choices[hostNum][\"payloads\"].length){\n                    payloadNum = agentConnectPayload;\n                }else{\n                    setAgentConnectPayload(0);\n                }\n                setAgentConnectPayloadOptions(props.choices[hostNum][\"payloads\"]);\n                if(props.choices[hostNum][\"payloads\"].length > 0){\n                    //setAgentConnectPayload(0);  \n                    if(props.choices[hostNum][\"payloads\"][payloadNum][\"c2info\"].length > 0){\n                        setAgentConnectC2ProfileOptions(props.choices[hostNum][\"payloads\"][payloadNum][\"c2info\"]);\n                        //setAgentConnectC2Profile(0);\n                    }\n                }else{\n                    snackActions.warning(\"Mythic knows of no host with a P2P payload. Please add one.\");\n                }\n            }else{\n                setAgentConnectHostOptions([]);\n                setAgentConnectC2ProfileOptions([]);\n                snackActions.warning(\"Mythic knows of no host with a P2P payload. Please add one.\")\n            }\n       }else{\n           if(value === \"\"){\n               if(props.type === \"Number\"){\n                   if(props.value === \"\"){\n                       setValue(0);\n                   }else{\n                        setValue(parseInt(props.value));\n                   }\n               }else{\n                    setValue(props.value);\n               }\n           }\n           if(props.dynamic_query_function === null && value===\"\"){\n                setChoiceOptions([...props.choices]);\n                setValue(props.value);\n           }\n           \n       }\n       \n    }, [props.choices, props.default_value, props.type, props.value, setBoolValue, value]);\n    const onChangeAgentConnect = (host_index, payload_index, c2_index) => {\n        const c2profileparameters = props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].parameters.reduce( (prev, opt) => {\n            return {...prev, [opt.name]: opt.value}\n        }, {});\n        let agentConnectValue = {host: props.choices[host_index][\"host\"], agent_uuid: props.choices[host_index][\"payloads\"][payload_index].uuid,\n        c2_profile: {name: props.choices[host_index][\"payloads\"][payload_index][\"c2info\"][c2_index].name, parameters: c2profileparameters}};\n        if(props.choices[host_index][\"payloads\"][payload_index].type === \"callback\"){\n            agentConnectValue[\"callback_uuid\"] = props.choices[host_index][\"payloads\"][payload_index][\"agent_callback_id\"];\n        }else{\n            agentConnectValue[\"callback_uuid\"] = \"\";\n        }\n        props.onChange(props.name, agentConnectValue, false);\n    }\n    const onChangeLinkInfo = (index) => {\n        let choice;\n        if(props.choices[index][\"source\"][\"id\"] === props.callback_id){\n            choice = props.choices[index][\"destination\"];\n        }else{\n            choice = props.choices[index][\"source\"];\n        }\n        const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n            if(opt.c2_profile_id === props.choices[index][\"c2profile\"][\"id\"]){\n                return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key, dec_key: opt.dec_key} }\n            }else{\n                return {...prev};\n            }\n        }, {});\n        let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: props.choices[index][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n        props.onChange(props.name, agentConnectValue, false);\n        setValue(index);\n    }\n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, evt.target.value, false);\n    }\n    const onChangeCredentialJSONValue = (evt) => {\n        setValue(evt.target.value);\n        props.onChange(props.name, ChoiceOptions[evt.target.value], false);\n    }\n    const onChangeChoiceMultiple = (event) => {\n        const { options } = event.target;\n        const value = [];\n        for (let i = 0, l = options.length; i < l; i += 1) {\n          if (options[i].selected) {\n            value.push(options[i].value);\n          }\n        }\n        setChoiceMultipleValue(value);\n        setValue(value);\n        props.onChange(props.name, value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        props.onChange(props.name, value, error);\n    }\n    const onChangeNumber = (name, value, error) => {\n        setValue(parseInt(value));\n        props.onChange(props.name, parseInt(value), error);\n    }\n    const onSwitchChange = (name, value) => {\n        setBoolValue(value);\n        setValue(value);\n        props.onChange(name, value);\n    }\n    const onFileChange = (evt) => {\n        \n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const contents = btoa(e.target.result);\n            setFileValue({name: evt.target.files[0].name, contents: contents});\n            props.onChange(props.name, {name: evt.target.files[0].name, contents: contents});\n        }\n        reader.readAsBinaryString(evt.target.files[0]);\n        \n    }\n    const onChangeAgentConnectHost = (event) => {\n        setAgentConnectHost(event.target.value); \n        setAgentConnectPayloadOptions(props.choices[event.target.value][\"payloads\"]);\n        if(props.choices[event.target.value][\"payloads\"].length > 0){\n            setAgentConnectPayload(0);  \n            if(props.choices[event.target.value][\"payloads\"][0][\"c2info\"].length > 0){\n                setAgentConnectC2ProfileOptions(props.choices[0][\"payloads\"][0][\"c2info\"]);\n                setAgentConnectC2Profile(0);\n                onChangeAgentConnect(event.target.value, 0, 0);\n            }else{\n                setAgentConnectC2ProfileOptions([]);\n                setAgentConnectC2Profile(null);\n            }\n        }else{\n            setAgentConnectPayloadOptions([]);\n            setAgentConnectPayload(null);\n            setAgentConnectC2ProfileOptions([]);\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectPayload = (event) => {\n        setAgentConnectPayload(event.target.value);\n        setAgentConnectC2ProfileOptions(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"]);\n        if(props.choices[agentConnectHost][\"payloads\"][event.target.value][\"c2info\"].length > 0){\n            setAgentConnectC2Profile(0);\n            onChangeAgentConnect(agentConnectHost, event.target.value, 0);\n        }else{\n            setAgentConnectC2Profile(null);\n        }\n    }\n    const onChangeAgentConnectC2Profile = (event) => {\n        setAgentConnectC2Profile(event.target.value);\n        onChangeAgentConnect(agentConnectHost, agentConnectPayload, event.target.value);\n    }\n    const onChangeAgentConnectNewHost = (name, value, error) => {\n        setAgentConnectNewHost(value);\n    }\n    const onChangeAgentConnectNewPayload = (event) => {\n        setAgentConnectNewPayload(event.target.value);\n    }\n    const onAgentConnectAddNewPayloadOnHost = () => {\n        if(agentConnectNewHost === \"\"){\n            snackActions.error(\"Must set a hostname\");\n            return;\n        }\n        props.onAgentConnectAddNewPayloadOnHost(agentConnectNewHost.toUpperCase(), props.payload_choices[agentConnectNewPayload].id);\n        setOpenAdditionalPayloadOnHostmenu(false);\n    }\n    const onAgentConnectRemovePayloadOnHost = () => {\n        if(props.choices[agentConnectHost][\"payloads\"][agentConnectPayload].payloadOnHostID){\n            props.onAgentConnectRemovePayloadOnHost(props.choices[agentConnectHost][\"payloads\"][agentConnectPayload].payloadOnHostID);\n        }else{\n            snackActions.warning(\"Can't remove a callback\");\n        }\n        \n    }\n    const testParameterValues = (curVal) => {\n        if( props.required && props.verifier_regex !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else if(props.verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(props.verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const addNewArrayValue = () => {\n        const newArray = [...arrayValue, \"\"];\n        setArrayValue(newArray);\n        props.onChange(props.name, newArray, false);\n    }\n    const removeArrayValue = (index) => {\n        let removed = [...arrayValue];\n        removed.splice(index, 1);\n        setArrayValue(removed);\n        props.onChange(props.name, removed, false);\n    }\n    const onChangeArrayText = (value, error, index) => {\n        let values = [...arrayValue];\n        values[index] = value;\n        setArrayValue(values);\n        props.onChange(props.name, values, false);\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    const getParameterObject = () => {\n        switch(props.type){\n            case \"Choice\":\n            case \"ChoiceMultiple\":\n                return (\n                    <FormControl style={{width: \"100%\"}}>\n                        <Select\n                          native\n                          autoFocus={props.autoFocus}\n                          multiple={props.type === \"ChoiceMultiple\"}\n                          value={props.type === \"ChoiceMultiple\" ? choiceMultipleValue : value}\n                          onChange={props.type === \"ChoiceMultiple\" ? onChangeChoiceMultiple : onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            ChoiceOptions.map((opt, i) => (\n                                <option key={props.name + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Array\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\">\n                        <Table size=\"small\" style={{tableLayout: \"fixed\", maxWidth: \"100%\", \"overflow\": \"auto\"}}>\n                            <TableRow >\n                                <TableCell style={{width: \"5rem\"}}></TableCell>\n                                <TableCell></TableCell>\n                            </TableRow>\n                            <TableBody>\n                                {arrayValue.map( (a, i) => (\n                                    <TableRow key={'array' + props.name + i} hover>\n                                        <TableCell>\n                                            <Button onClick={() => removeArrayValue(i)} color=\"secondary\" variant=\"outlined\" size=\"small\">X</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                        <MythicTextField required={props.required} placeholder={\"\"} value={a} multiline={false} autoFocus={props.autoFocus && i === 0}\n                                                onChange={(n,v,e) => onChangeArrayText(v, e, i)} display=\"inline-block\" onEnter={addNewArrayValue}\n                                                validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                                            />\n                                        </TableCell>\n                                    </TableRow>\n                                ))}\n                                <TableRow hover>\n                                    <TableCell>\n                                        <Button onClick={addNewArrayValue} size=\"small\" variant=\"outlined\" color=\"primary\">+</Button>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false}\n                        onChange={onChangeText} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Number\":\n                return (\n                    <MythicTextField required={props.required} placeholder={props.default_value} value={value} multiline={false} type=\"number\"\n                        onChange={onChangeNumber} display=\"inline-block\" onEnter={props.onSubmit} autoFocus={props.autoFocus}\n                        validate={testParameterValues} errorText={\"Must match: \" + props.verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                    <Switch checked={boolValue} onChange={onSwitchChange} />\n                )\n            case \"File\":\n                return (\n                    <Button variant=\"contained\" component=\"label\"> \n                        { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n                    <input onChange={onFileChange} type=\"file\" hidden /> </Button>\n                )\n            case \"LinkInfo\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={(evt) => {onChangeLinkInfo(evt.target.value)}}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={i}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"PayloadList\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          autoFocus={props.autoFocus}\n                          onChange={onChangeValue}\n                          input={<Input />}\n                        >\n                        {\n                            props.choices.map((opt, i) => (\n                                <option key={props.name + i} value={opt.uuid}>{opt.display}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"AgentConnect\":\n                return (\n                    <TableContainer component={Paper} className=\"mythicElement\"> \n                        <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                            <TableBody>\n                                {openAdditionalPayloadOnHostMenu ? (\n                                <React.Fragment>\n                                    <TableRow>\n                                        <TableCell style={{width: \"6em\"}}>Hostname</TableCell>\n                                        <TableCell>\n                                            <MythicTextField required={true} placeholder={\"hostname\"} value={agentConnectNewHost} multiline={false} autoFocus={props.autoFocus}\n                                                onChange={onChangeAgentConnectNewHost} display=\"inline-block\"/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Payload on that host</TableCell>\n                                        <TableCell>\n                                            <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectNewPayload}\n                                                  onChange={onChangeAgentConnectNewPayload}\n                                                  input={<Input />}\n                                                >\n                                                {props.payload_choices ? (\n                                                    props.payload_choices.map((opt, i) => (\n                                                        <option key={props.name + \"newpayload\" + i} value={i}>{opt.display}</option>\n                                                    ))\n                                                ) : ( <option key={props.name + \"nooptionnewpayload\"} value=\"-1\">No Payloads</option> )}\n                                                </Select>\n                                            </FormControl>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>\n                                            <Button component=\"span\"  style={{color: theme.palette.success.main, padding: 0}} onClick={onAgentConnectAddNewPayloadOnHost}><AddCircleIcon />Add</Button>\n                                        </TableCell>\n                                        <TableCell>\n                                            <Button component=\"span\" style={{color: theme.palette.warning.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(false)}}><CancelIcon />Cancel</Button>\n                                        </TableCell>\n                                    </TableRow>\n                                </React.Fragment>\n                                ) : (null) }\n                                <TableRow>\n                                    <TableCell style={{width: \"6em\"}}>\n                                        Host \n                                    </TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectHost}\n                                              onChange={onChangeAgentConnectHost}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectHostOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connecthost\" + i} value={i}>{opt.host}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell>Payload</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                            <Select\n                                              native\n                                              value={agentConnectPayload}\n                                              onChange={onChangeAgentConnectPayload}\n                                              input={<Input />}\n                                            >\n                                            {\n                                                agentConnectPayloadOptions.map((opt, i) => (\n                                                    <option key={props.name + \"connectagent\" + i} value={i}>{opt.display}</option>\n                                                ))\n                                            }\n                                            </Select>\n                                        </FormControl>\n                                        \n                                    </TableCell>\n                                </TableRow>\n                                {!openAdditionalPayloadOnHostMenu &&\n                                            <TableRow>\n                                                <TableCell>\n                                                <Button component=\"span\" style={{color: theme.palette.success.main, padding: 0}} onClick={() =>{setOpenAdditionalPayloadOnHostmenu(true)}}><AddCircleIcon />Add</Button>\n                                                </TableCell>\n                                                <TableCell>\n                                                <Button component=\"span\" style={{color: theme.palette.error.main, padding: 0}} onClick={onAgentConnectRemovePayloadOnHost}><DeleteIcon />Remove</Button>\n                                                </TableCell>\n                                            </TableRow>\n                                        }\n                                <TableRow>\n                                    <TableCell>C2 Profile</TableCell>\n                                    <TableCell>\n                                        <FormControl>\n                                                <Select\n                                                  native\n                                                  value={agentConnectC2Profile}\n                                                  onChange={onChangeAgentConnectC2Profile}\n                                                  input={<Input />}\n                                                >\n                                                {\n                                                    agentConnectC2ProfileOptions.map((opt, i) => (\n                                                        <option key={props.name + \"connectprofile\" + i} value={i}>{opt.name}</option>\n                                                    ))\n                                                }\n                                                </Select>\n                                            </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                        {agentConnectC2ProfileOptions.length > 0 ? (\n                            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                                <TableHead>\n                                        <TableRow>\n                                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                            <TableCell>Value</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                <TableBody>\n                                    \n                                    {agentConnectC2ProfileOptions[agentConnectC2Profile][\"parameters\"].map( (opt, i) => (\n                                        <TableRow key={\"agentconnectparameters\" + props.name + i}>\n                                            <TableCell>{opt.name}</TableCell>\n                                            <TableCell><pre>{JSON.stringify(opt.value, null, 2)}</pre></TableCell>\n                                        </TableRow>\n                                    ) ) }\n                                </TableBody>\n                            </Table>\n                        ): (null)}\n                    </TableContainer>\n                )\n            case \"Credential-JSON\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeCredentialJSONValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={i}>\n                                        {opt.account + \"@\" + opt.realm + \" - \" + opt.credential_text.substring(0, 10) + \" - \" + opt.comment}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                    \n                )\n            case \"Credential-Account\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.account} >\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.account + \" )\" : opt.account}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Realm\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.realm}>\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.realm + \" )\" : opt.realm}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Type\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.type}>{opt.type}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n            case \"Credential-Credential\":\n                return (\n                    <React.Fragment>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                            onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                            innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                        />\n                        <FormControl style={{width: \"100%\"}}>\n                            <Select\n                                native\n                                value={value}\n                                autoFocus={props.autoFocus}\n                                onChange={onChangeValue}\n                                input={<Input />}\n                            >\n                            {\n                                ChoiceOptions.map((opt, i) => (\n                                    <option key={props.name + i} value={opt.credential_text} style={{textOverflow: \"ellipsis\"}}>\n                                        {opt.comment.length > 0 ? opt.comment + \" ( \" + opt.credential_text + \" )\" : opt.credential_text}\n                                    </option>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                        <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n                    </React.Fragment>\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    return (\n            <TableRow key={\"buildparam\" + props.id}>\n                <TableCell >\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + props.id + 'popover' : undefined}>\n                            {props.display_name}\n                    </Typography>\n                    {props.required ? (\n                        <Typography component=\"div\" style={{color: theme.palette.warning.main}}>Required</Typography>\n                    ) : (null) }\n                    <Popover id={'taskparam' + props.id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{props.description.length > 0 ? props.description : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {TaskParametersDialogRow} from './TaskParametersDialogRow';\nimport {useQuery, gql, useLazyQuery, useMutation } from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Input from '@material-ui/core/Input';\n\n//if we need to get all the loaded commands for the callback and filter, use this\nconst GetLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}}) {\n    id\n    command {\n      cmd\n      attributes\n      id\n    }\n  }\n}\n`;\n//if we need to get all the possible commands for a payload type and filter, use this\nconst getAllCommandsQuery = gql`\nquery getAllCommandsQuery($payload_type_id: Int!){\n    command(where: {payload_type_id: {_eq: $payload_type_id}, deleted: {_eq: false}}) {\n        attributes\n        cmd\n        id\n    }\n}\n`;\n//if we need to get all the possible edges for the callback, use this\nconst getAllEdgesQuery = gql`\nquery getAllEdgesQuery($callback_id: Int!){\n    callbackgraphedge(where: {_or: [{source_id:{_eq: $callback_id}}, {destination_id: {_eq: $callback_id}}]}) {\n        id\n        c2profile {\n          id\n          name\n        }\n        direction\n        destination{\n            agent_callback_id\n            host\n            id\n            payload {\n              id\n              uuid\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              value\n              id\n              c2_profile_id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        source{\n            agent_callback_id\n            host\n            id\n            payload {\n              uuid\n              id\n            }\n            c2profileparametersinstances {\n              enc_key_base64\n              dec_key_base64\n              c2_profile_id\n              value\n              id\n              c2profileparameter {\n                crypto_type\n                name\n                id\n              }\n            }\n        }\n        end_timestamp\n      }\n    }\n`;\n// get all payloads query\nconst getAllPayloadsQuery = gql`\nquery getAllPayloadsQuery($operation_id: Int!){\n    payload(where: {deleted: {_eq: false}, build_phase: {_eq: \"success\"}, operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    uuid\n    payloadc2profiles {\n      id\n      c2profile {\n        name\n        id\n      }\n    }\n    payloadtype{\n        id\n        ptype\n    }\n    filemetum {\n        id\n        filename_text\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        name\n        id\n      }\n    }\n  }\n}\n`;\n// get all payloads on hosts\nconst getAllPayloadsOnHostsQuery = gql`\nquery getAllPayloadsOnHostsQuery($operation_id: Int!){\n    payloadonhost(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}, payload: {c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}}) {\n        host\n        id\n        payload {\n            auto_generated\n            id\n            tag\n            filemetum {\n                filename_text\n                id\n            }\n            uuid\n            c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n                c2profile {\n                    name\n                    id\n                }\n                c2profileparameter {\n                    crypto_type\n                    name\n                    id\n                }\n                value\n                enc_key_base64\n                dec_key_base64\n                id\n            }\n        }\n    }\n    callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}, c2profileparametersinstances: {c2profile: {is_p2p: {_eq: true}}}}){\n        agent_callback_id\n        host\n        id\n        description\n        crypto_type\n        payload {\n            auto_generated\n            id\n            tag\n            filemetum {\n                filename_text\n                id\n            }\n            uuid\n        }\n        c2profileparametersinstances(where: {c2profile: {is_p2p: {_eq: true}}}) {\n            c2profile {\n                name\n                id\n            }\n            c2profileparameter {\n                crypto_type\n                name\n                id\n            }\n            value\n            enc_key_base64\n            dec_key_base64\n            id\n        }\n    }\n}\n`;\n// use this to add a payload on a host\nconst addPayloadOnHostMutation = gql`\n    mutation addPayloadOnHostMutation($host: String!, $payload_id: Int!){\n        insert_payloadonhost(objects: {host: $host, payload_id: $payload_id}) {\n            affected_rows\n          }\n    }\n`;\n// use this to remove a payload on a host\nconst removePayloadOnHostMutation = gql`\n    mutation removePayloadOnHostMutation($payloadOnHostID: Int!){\n        delete_payloadonhost_by_pk(id: $payloadOnHostID) {\n            id\n          }\n    }\n`;\n// use this to get all of the parameters and information for the command we're trying to execute\nconst getCommandQuery = gql`\nquery getCommandQuery($id: Int!){\n  command_by_pk(id: $id) {\n    attributes\n    author\n    cmd\n    description\n    help_cmd\n    id\n    needs_admin\n    version\n    payloadtype{\n        ptype\n    }\n    commandparameters {\n      choice_filter_by_command_attributes\n      choices\n      choices_are_all_commands\n      choices_are_loaded_commands\n      default_value\n      description\n      id\n      name\n      required\n      supported_agent_build_parameters\n      supported_agents\n      type\n      dynamic_query_function\n      ui_position\n      parameter_group_name\n      display_name\n      cli_name\n    }\n    commandopsec {\n      authentication\n      id\n      injection_method\n      process_creation\n    }\n  }\n}\n`;\n// use this to get all of the credentials for the command we're trying to execute\nconst getCredentialsQuery = gql`\nquery getCredentialsQuery($operation_id: Int!){\n    credential(where: {deleted: {_eq: false}, operation_id: {_eq: $operation_id}}){\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n    }\n}\n`;\nexport function TaskParametersDialog(props) {\n    const [commandInfo, setCommandInfo] = useState({});\n    const [parameterGroups, setParameterGroups] = useState([]);\n    const [selectedParameterGroup, setSelectedParameterGroup] = useState('Default');\n    const [parameters, setParameters] = useState([]);\n    const [rawParameters, setRawParameters] = useState(false);\n    const [requiredPieces, setRequiredPieces] = useState({all: false, loaded: false, edges: false, credentials: false});\n    //get all the data about our command that we can\n    const [getAllCommands, { data: allCommandsLoading}] = useLazyQuery(getAllCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getLoadedCommands, { data: loadedCommandsLoading}] = useLazyQuery(GetLoadedCommandsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllEdges, { data: loadedAllEdgesLoading}] = useLazyQuery(getAllEdgesQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloads, { data: loadedAllPayloadsLoading}] = useLazyQuery(getAllPayloadsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllPayloadsOnHosts, { data: loadedAllPayloadsOnHostsLoading}] = useLazyQuery(getAllPayloadsOnHostsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [getAllCredentials, { data: loadedCredentialsLoading}] = useLazyQuery(getCredentialsQuery, {\n        fetchPolicy: \"no-cache\"\n    });\n    const [addPayloadOnHost] = useMutation(addPayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    });\n    const [RemovePayloadOnHost] = useMutation(removePayloadOnHostMutation, {\n        onCompleted: data => {\n            getAllPayloadsOnHosts({variables: {operation_id: props.operation_id}})\n        }\n    })\n    useQuery(getCommandQuery, {\n        variables: {id: props.command.id},\n        onCompleted: data => {\n            // do an initial pass to see what other quries we need to make\n            let requiredPiecesInitial = {all: false, loaded: false, edges: false, credentials: false};\n            let groupNames = [];\n            data.command_by_pk.commandparameters.forEach( (cmd) => {\n                if(!groupNames.includes(cmd.parameter_group_name)){\n                    groupNames.push(cmd.parameter_group_name);\n                }\n                if(cmd.type === \"LinkInfo\"){\n                    requiredPiecesInitial[\"edges\"] = true;\n                }else if(cmd.choices_are_all_commands){\n                    requiredPiecesInitial[\"all\"] = true;\n                }else if(cmd.choices_are_loaded_commands){\n                    requiredPiecesInitial[\"loaded\"] = true;\n                }else if(cmd.type === \"AgentConnect\"){\n                    requiredPiecesInitial[\"connect\"] = true;\n                    //need payloads as well in case the user wants to add a payload to a host\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type === \"PayloadList\"){\n                    requiredPiecesInitial[\"payloads\"] = true;\n                }else if(cmd.type.includes(\"Credential\")){\n                    requiredPiecesInitial[\"credentials\"] = true;\n                }\n            });\n            groupNames.sort();\n            setParameterGroups(groupNames);\n            if(props.command.groupName && groupNames.includes(props.command.groupName)){\n                setSelectedParameterGroup(props.command.groupName);\n            } else if(!groupNames.includes(\"Default\")){\n                setSelectedParameterGroup(groupNames[0]);\n            }\n            setCommandInfo({...data.command_by_pk});\n            if(requiredPiecesInitial[\"edges\"]){getAllEdges({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"all\"]){getAllCommands({variables: {payload_type_id: props.payloadtype_id}});}\n            if(requiredPiecesInitial[\"loaded\"]){getLoadedCommands({variables: {callback_id: props.callback_id} });}\n            if(requiredPiecesInitial[\"payloads\"]){getAllPayloads({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"connect\"]){getAllPayloadsOnHosts({variables: {operation_id: props.operation_id} });}\n            if(requiredPiecesInitial[\"credentials\"]){getAllCredentials({variables: {operation_id: props.operation_id}});}\n            setRequiredPieces(requiredPiecesInitial);\n            setRawParameters({...data});\n        }\n    });\n    const intersect = (a, b) => {\n      let setB = new Set(b);\n      return [...new Set(a)].filter(x => setB.has(x));\n    }\n    \n    useEffect( () => {\n        const getLinkInfoFromAgentConnect = (choices) => {\n            if(choices.length > 0){\n                const c2profileparameters = choices[0][\"payloads\"][0][\"c2info\"][0].parameters.reduce( (prev, opt) => {\n                    return {...prev, [opt.name]: opt.value}\n                }, {});\n                let agentConnectValue = {host: choices[0][\"host\"], agent_uuid: choices[0][\"payloads\"][0].uuid,\n                c2_profile: {name: choices[0][\"payloads\"][0][\"c2info\"][0].name, parameters: c2profileparameters}};\n                if(choices[0][\"payloads\"][0].type === \"callback\"){\n                    agentConnectValue[\"callback_uuid\"] = props.choices[0][\"payloads\"][0][\"agent_callback_id\"];\n                }\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        };\n        const getLinkInfoValue = (choices) => {\n            let choice;\n            if(choices.length > 0){\n                if(choices[0][\"source\"][\"id\"] === props.callback_id){\n                    choice = choices[0][\"destination\"];\n                }else{\n                    choice = choices[0][\"source\"];\n                }\n                const c2profileparameters = choice[\"c2profileparametersinstances\"].reduce( (prev, opt) => {\n                    if(opt.c2_profile_id === choices[0][\"c2profile\"][\"id\"]){\n                        return {...prev, [opt.c2profileparameter.name]: !opt.c2profileparameter.crypto_type ? opt.value : {crypto_type: opt.c2profileparameter.crypto_type, enc_key: opt.enc_key_base64, dec_key: opt.dec_key_base64} }\n                    }else{\n                        return {...prev};\n                    }\n                }, {});\n                let agentConnectValue = {host: choice.host, agent_uuid: choice.payload.uuid, callback_uuid: choice.agent_callback_id, c2_profile: {name: choices[0][\"c2profile\"][\"name\"], parameters: c2profileparameters} };\n                return agentConnectValue;\n            }else{\n                return {};\n            }\n        }\n        if(rawParameters && (!requiredPieces[\"loaded\"] || loadedCommandsLoading) &&\n                       (!requiredPieces[\"all\"] || allCommandsLoading) &&\n                       (!requiredPieces[\"edges\"] || loadedAllEdgesLoading) &&\n                       (!requiredPieces[\"payloads\"] || loadedAllPayloadsLoading) && \n                       (!requiredPieces[\"connect\"] || loadedAllPayloadsOnHostsLoading) &&\n                       (!requiredPieces[\"credentials\"] || loadedCredentialsLoading) ){\n            //only process the parameter once we have fetched all of the required pieces\n            const params = rawParameters.command_by_pk.commandparameters.reduce( (prev, cmd) => {\n                if(cmd.parameter_group_name !== selectedParameterGroup){\n                    return [...prev];\n                }\n                switch(cmd.type){\n                    case \"Boolean\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }\n                        else if(cmd.default_value){\n                            return [...prev, {...cmd, value: cmd.default_value.toLowerCase() === \"true\"}];\n                        }else{\n                            return [...prev, {...cmd, value: false}];\n                        }\n                    case \"String\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, value: cmd.default_value}];\n                        }                      \n                    case \"Number\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, value: cmd.default_value === \"\" ? 0 : parseInt(cmd.default_value)}];\n                        }\n                    case \"Array\":\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, value: props.command.parsedParameters[cmd.name]}];\n                        }else if(cmd.default_value.length > 0){\n                            return [...prev, {...cmd, value: JSON.parse(cmd.default_value)}];\n                        }else{\n                            return [...prev, {...cmd, value: []}];\n                        }\n                    case \"Choice\":\n                    case \"ChoiceMultiple\":\n                        let choices = cmd.choices.split(\"\\n\");\n                        let defaultV = cmd.default_value;\n                        if(cmd.type === \"ChoiceMultiple\"){\n                            if(cmd.default_value !== \"\"){\n                                defaultV = JSON.parse(cmd.default_value);\n                            }else{\n                                defaultV = [];\n                            }\n                        }else{\n                            if(choices.length > 0){\n                                defaultV = cmd.default_value === \"\" ? choices[0] : cmd.default_value;\n                            }\n                        }\n                        let filter = JSON.parse(cmd.choice_filter_by_command_attributes);\n                        if(cmd.choices_are_all_commands){\n                            //get all of the latest commands\n                            choices = [...allCommandsLoading.command];\n                            choices = choices.reduce( (prevn, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prevn, c.cmd];\n                                }else{\n                                    return [...prevn];\n                                }\n                            }, []);\n                            choices.sort();\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }else if(cmd.choices_are_loaded_commands){\n                            //get all of the loaded commands\n                            choices = [...loadedCommandsLoading.loadedcommands];\n                            choices = choices.reduce( (prevn, c) => {\n                                let match = true;\n                                let cmd_attributes = JSON.parse(c.command.attributes);\n                                for(const [key, value] of Object.entries(filter)){\n                                    if(key === \"spawn_and_injectable\"){\n                                        if(value !== cmd_attributes[key]){\n                                            match = false;\n                                        }\n                                    }else if(key === \"supported_os\" && value.length > 0){\n                                        if(intersect(value, cmd_attributes[key]).length === 0){\n                                            match = false;\n                                        }\n                                    }\n                                }\n                                if(match){\n                                    return [...prevn, c.command.cmd];\n                                }else{\n                                    return [...prevn];\n                                }\n                            }, []);\n                            if(choices.length > 0){\n                                if(cmd.type === \"ChoiceMultiple\"){defaultV = []}\n                                else{defaultV = choices[0];}\n                            }\n                        }\n                        if(cmd.name in props.command.parsedParameters){\n                            return [...prev, {...cmd, choices: choices, value: props.command.parsedParameters[cmd.name]}];\n                        }else{\n                            return [...prev, {...cmd, choices: choices, default_value: defaultV, value: defaultV}];\n                        }\n                    case \"File\":\n                        return [...prev, {...cmd, value: {} }];                   \n                    case \"Credential-JSON\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: {}, choices: []}];\n                        }\n                    case \"Credential-Account\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"account\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Realm\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"realm\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Type\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"type\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"Credential-Credential\":\n                        if (loadedCredentialsLoading.credential.length > 0){\n                            return [...prev, {...cmd, value: loadedCredentialsLoading.credential[0][\"credential_text\"], choices: loadedCredentialsLoading.credential}];\n                        }else{\n                            return [...prev, {...cmd, value: \"\", choices: []}];\n                        }\n                    case \"AgentConnect\":\n                        const agentConnectNewPayloads = loadedAllPayloadsLoading.payload.reduce( (prevn, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prevn, profile) => {\n                                return [...prevn, profile.c2profile.name];\n                            }, []).join(\",\");\n                            return [...prevn, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                        }, []);\n                        const callbacksOrganized = loadedAllPayloadsOnHostsLoading.callback.reduce( (prevn, entry) => {\n                            let found = false;\n                            const updates = prevn.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    const c2info = entry.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prevn){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.registered_payload, c2info: c2array, display: \"Callback \" + entry.id + \" - \" + entry.description, ...entry, type: \"callback\", payloadOnHostID:null};\n                                    return {...host, payloads: [...host.payloads, payloadInfo]}\n                                }else{\n                                    return host;\n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prevn){\n                                        //we just want to add a new entry to the c2profile.name list\n                                            \n                                        return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.registered_payload, c2info: c2array, display: \"Callback \" + entry.id + \" - \" + entry.description, ...entry, type: \"callback\", payloadOnHostID:null};\n                                return [...prevn, {host: entry.host, payloads: [payloadInfo] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        const organized = loadedAllPayloadsOnHostsLoading.payloadonhost.reduce( (prevn, entry) => {\n                            let found = false;\n                            const updates = prevn.map( (host) => {\n                                if(host.host === entry.host){\n                                    found = true;\n                                    //now we need to merge this entry with our current payloads/callbacks for the host\n                                    let duplicated_payload = false;\n                                    host.payloads.forEach( (p) => {\n                                        if(p.id === entry.payload.id){duplicated_payload = true}\n                                    });\n                                    if(duplicated_payload){return host}\n                                    const c2info = entry.payload.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                        if(cur.c2profile.name in prevn){\n                                            //we just want to add a new entry to the c2profile.name list\n                                            \n                                            return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                        }\n                                    }, {});\n                                    let c2array = [];\n                                    for( const [key, value] of Object.entries(c2info)){\n                                        c2array.push({name: key, parameters: value});\n                                    }\n                                    const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\", payloadOnHostID:entry.id};\n                                    return {...host, payloads: [...host.payloads, payloadInfo]}\n                                }else{\n                                    //this doesn't match our host, so don't modify\n                                    return host; \n                                }\n                            });\n                            if(!found){\n                                const c2info = entry.payload.c2profileparametersinstances.reduce( (prevn, cur) => {\n                                    const val = !cur.c2profileparameter.crypto_type ? cur.value : {crypto_type: cur.value, enc_key: cur.enc_key_base64, dec_key: cur.dec_key_base64};\n                                    if(cur.c2profile.name in prevn){\n                                        //we just want to add a new entry to the c2profile.name list\n                                        \n                                        return {...prevn, [cur.c2profile.name]: [...prevn[cur.c2profile.name], { name: cur.c2profileparameter.name, value:  val } ] }\n                                    }else{\n                                        return {...prevn, [cur.c2profile.name]: [ { name: cur.c2profileparameter.name, value: val } ] }\n                                    }\n                                }, {});\n                                let c2array = [];\n                                for( const [key, value] of Object.entries(c2info)){\n                                    c2array.push({name: key, parameters: value});\n                                }\n                                const payloadInfo = {...entry.payload, c2info: c2array, display: entry.payload.filemetum.filename_text + \" - \" + entry.payload.tag, type: \"payload\", payloadOnHostID:entry.id};\n                                return [...prevn, {host: entry.host, payloads: [payloadInfo] } ]\n                            }else{\n                                return updates;\n                            }\n                        }, []);\n                        // callbacksOrganized has all the information for active callbacks to link to\n                        // organized has all of the information for payloads on hosts to link to\n                        // need to merge the two\n                        const allOrganized = callbacksOrganized.reduce( (prevn, cur) => {\n                            let hostIndex = prevn.findIndex(o => o.host === cur.host);\n                            if(hostIndex > -1){\n                                // need to add cur.payloads to the prev[hostIndex].payloads list\n                                prevn[hostIndex].payloads = [...prevn[hostIndex].payloads, ...cur.payloads];\n                                return [...prevn];\n                            }else{\n                                return [...prevn, {...cur}];\n                            }\n                        }, [...organized]);\n                        console.log(\"updating choices and payload choices\", allOrganized, agentConnectNewPayloads)\n                        return [...prev, {...cmd, choices: allOrganized, payload_choices: agentConnectNewPayloads, value: getLinkInfoFromAgentConnect(organized)}];\n                    case \"PayloadList\":\n                        let supported_agents = cmd.supported_agents.split(\",\");\n                        if(supported_agents.indexOf(\"\") !== -1){supported_agents.splice(supported_agents.indexOf(\"\"))}\n                        const build_requirements = JSON.parse(cmd.supported_agent_build_parameters);\n                        const payloads = loadedAllPayloadsLoading.payload.reduce( (prevn, payload) => {\n                            const profiles = payload.payloadc2profiles.reduce( (prevn, profile) => {\n                                return [...prevn, profile.c2profile.name];\n                            }, []).join(\",\");\n                            if(supported_agents.length > 0 && !supported_agents.includes(payload.payloadtype.ptype)){return prevn};\n                            let matched = true;\n                            if(payload.payloadtype.ptype in build_requirements){\n                                //this means we have a filtering condition on our payload\n                                for(const [key, value] of Object.entries(build_requirements[payload.payloadtype.ptype])){\n                                    payload.buildparameterinstances.forEach( (build_param) => {\n                                        if(build_param.buildparameter.name === key){\n                                            if(build_param.parameter !== value){matched = false}\n                                        }\n                                    });\n                                }\n                            }\n                            if(matched){\n                                return [...prevn, {...payload, display: payload.filemetum.filename_text + \" - \" + profiles + \" - \" + payload.tag}]\n                            }else{\n                                return prevn;\n                            }\n                            \n                        }, []);\n                        //now filter the payloads based on supported_agents and supported_agent_build_parameters\n                        if(payloads.length > 0){\n                            return [...prev, {...cmd, choices: payloads, default_value: payloads[0].uuid, value: payloads[0].uuid}];\n                        }else{\n                            return [...prev, {...cmd, choices: payloads, value: null}];\n                        }\n                    case \"LinkInfo\":\n                        const edge_choices = loadedAllEdgesLoading.callbackgraphedge.reduce( (prevn, edge) => {\n                            if(edge.source.id === edge.destination.id) {return prevn}\n                            if(edge.direction === 1){\n                                return [...prevn, {...edge, display: \"Callback \" + edge.source.id + \" --\" + edge.c2profile.name + \"--> Callback \" + edge.destination.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            }else if(edge.direction === 2){\n                                return [...prevn, {...edge, display: \"Callback \" + edge.destination.id + \"-> \" + edge.c2profile.name + \"--> Callback \" + edge.source.id + (edge.end_timestamp === null? \"(Active)\" : \"(Dead at \" + edge.end_timestamp + \")\")}];\n                            } else{\n                                return prevn;\n                            }\n                        }, []);\n                        if(edge_choices.length > 0){\n                            return [...prev, {...cmd, choices: edge_choices, value: getLinkInfoValue(edge_choices)}];\n                        }else{\n                            return [...prev, {...cmd, choices: edge_choices, value: {}}];\n                        }\n                    default:\n                        return [...prev, {...cmd}];\n                }\n            }, [] );\n            const sorted = params.sort((a, b) => (a.ui_position > b.ui_position) ? 1 : -1)\n            if(sorted.length > 0){\n                sorted[0][\"autoFocus\"] = true;\n            }\n            setParameters(sorted);\n        }\n    }, [selectedParameterGroup, rawParameters, loadedCommandsLoading, allCommandsLoading, loadedAllEdgesLoading, requiredPieces, loadedAllPayloadsLoading, loadedCredentialsLoading, loadedAllPayloadsOnHostsLoading, props.callback_id, props.choices]);\n    const onSubmit = () => {\n        const collapsedParameters = parameters.reduce( (prev, param) => {\n            switch(param.type){\n                case \"String\":\n                case \"Boolean\":\n                case \"Number\":\n                case \"Choice\":\n                case \"ChoiceMultiple\":\n                case \"Credential-Account\":\n                case \"Credential-Realm\":\n                case \"Credential-Type\":\n                case \"Credential-Credential\":\n                case \"AgentConnect\":\n                case \"PayloadList\":\n                case \"Array\":\n                case \"LinkInfo\":\n                    return {...prev, [param.name]: param.value}\n                case \"File\":\n                    return {...prev, [param.name]: param.value.name}\n                case \"Credential-JSON\":\n                    return {...prev, [param.name]: {\n                        account: param.value[\"account\"],\n                        comment: param.value[\"comment\"],\n                        credential: param.value[\"credential_text\"],\n                        realm: param.value[\"realm\"],\n                        type: param.value[\"type\"]\n                    }}\n                default:\n                    return {...prev}\n            }\n        }, {});\n        const collapsedFiles = parameters.reduce( (prev, param) => {\n            if(param.type === \"File\"){\n                return {...prev, [param.name]: param.value.contents}\n            }else{\n                return {...prev}\n            }\n        }, {});\n        props.onSubmit(props.command.cmd, JSON.stringify(collapsedParameters), JSON.stringify(collapsedFiles), selectedParameterGroup);\n    }\n    const onAgentConnectAddNewPayloadOnHost = (host, payload) => {\n        addPayloadOnHost({variables: {host: host, payload_id: payload} })\n    }\n    const onAgentConnectRemovePayloadOnHost = (payloadOnHostID) => {\n        RemovePayloadOnHost({variables: {payloadOnHostID: payloadOnHostID}})\n    }\n    const onChange = (name, value, error) => {\n        const params = parameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value: value};\n            }else{\n                return {...param};\n            }\n        });\n        setParameters(params);\n    }\n    const onChangeParameterGroup = (event) => {\n        setSelectedParameterGroup(event.target.value);\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.command.cmd}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <Typography component=\"div\" >\n                <b>Help</b> <pre style={{margin:0}}>{props.command.help_cmd}</pre>\n                <b>Description</b> <pre style={{margin:0, wordBreak: \"break-all\", overflow: \"word-wrap\", whiteSpace: \"pre-wrap\"}}>{props.command.description}</pre>\n                <b>Requires Admin?</b> {props.command.needs_admin ? \"True\": \"False\"}\n                {parameterGroups.length > 1 &&\n                    <FormControl style={{width: \"100%\"}} >\n                        <TextField\n                            select\n                            label=\"Parameter Group\"\n                            value={selectedParameterGroup}\n                            onChange={onChangeParameterGroup}\n                            \n                            input={<Input />}\n                        >\n                        {\n                            parameterGroups.map((opt, i) => (\n                                <MenuItem key={\"paramgroup\" + i} value={opt} >{opt}</MenuItem>\n                            ))\n                        }\n                        </TextField>\n                    </FormControl>\n                }\n            </Typography>\n            <TableContainer component={Paper} className=\"mythicElement\"> \n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                            <TableCell>Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {parameters.map( (op) => (\n                            <TaskParametersDialogRow onSubmit={onSubmit} key={\"taskparameterrow\" + op.id} onChange={onChange} commandInfo={commandInfo} {...op} \n                                callback_id={props.callback_id} onAgentConnectAddNewPayloadOnHost={onAgentConnectAddNewPayloadOnHost}\n                                onAgentConnectRemovePayloadOnHost={onAgentConnectRemovePayloadOnHost}\n                                />\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from './MythicTextField';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function MythicDialog(props) {\n  const descriptionElementRef = React.useRef(null);\n  React.useEffect(() => {\n    if (props.open) {\n      const { current: descriptionElement } = descriptionElementRef;\n      if (descriptionElement !== null) {\n        descriptionElement.focus();\n      }\n    }\n  }, [props.open]);\n\n  return (\n      <Dialog\n        open={props.open}\n        onClose={props.onClose}\n        scroll=\"paper\"\n        maxWidth={props.maxWidth}\n        fullWidth={props.fullWidth}\n        aria-labelledby=\"scroll-dialog-title\"\n        aria-describedby=\"scroll-dialog-description\"\n      >\n        {props.innerDialog}\n      </Dialog>\n  );\n}\n\nexport function MythicModifyStringDialog(props) {\n  const [comment, setComment] = React.useState(\"\");\n    const onCommitSubmit = () => {\n        props.onSubmit(comment);\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n    useEffect( () => {\n      setComment(props.value);\n    }, [props.value]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewJSONAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n  const [tableType, setTableType] = React.useState(\"dictionary\");\n  const [headers, setHeaders] = React.useState([]);\n    useEffect( () => {\n      let permissions = [];\n      try{\n        let permissionDict;\n        if(props.value.constructor === Object){\n          permissionDict = props.value;\n        }else{\n          permissionDict = JSON.parse(props.value);\n        } \n        \n        if(permissionDict.constructor === Object){\n          for(let key in permissionDict){\n            if(permissionDict[key].constructor === Object || Array.isArray(permissionDict[key])){\n              permissions.push({\"name\": key, \"value\": JSON.stringify(permissionDict[key], null, 2)});\n            }else{\n              permissions.push({\"name\": key, \"value\": permissionDict[key]});\n            }\n            \n            setHeaders([props.leftColumn, props.rightColumn]);\n          }\n        }else{\n          setTableType(\"array\");\n          if(permissionDict.length > 0){\n            setHeaders(Object.keys(permissionDict[0]));\n            permissions = permissionDict;\n          }else{\n            setHeaders([]);\n          }\n        }\n      }catch(error){\n        console.log(error);\n      }\n      setComment(permissions);\n    }, [props.value, props.leftColumn, props.rightColumn]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          {headers.map( (header, index) => (\n                            <TableCell key={'header' + index}>{header}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {tableType === \"dictionary\" ? (\n                      comment.map( (element, index) => (\n                        <TableRow key={'row' + index} hover>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell style={{wordBreak: \"break-all\", whiteSpace: \"pre-wrap\"}}>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))\n                    ) : (\n                      comment.map( (row, index) => (\n                        <TableRow key={'row' + index} hover>\n                            {Object.keys(row).map( (key) => (\n                              <TableCell key={\"row\" + index + \"cell\" + key}>{row[key]}</TableCell>\n                            ))}\n                        </TableRow>\n                      ))\n                    ) }\n                    \n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\nexport function MythicViewObjectPropertiesAsTableDialog(props) {\n  const [comment, setComment] = React.useState([]);\n    useEffect( () => {\n        const permissions = props.keys.reduce( (prev, key) => {\n          if(props.value[key] !== undefined && props.value[key] !== null && props.value[key] !== \"\"){\n            return [...prev, {\"name\": key, \"value\": props.value[key]}]\n          }\n          else{\n            return [...prev];\n          }\n        }, []);\n\n      setComment(permissions);\n    }, [props.value, props.keys]);\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell>{props.leftColumn}</TableCell>\n                          <TableCell>{props.rightColumn}</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {comment.map( (element, index) => (\n                      <TableRow key={'row' + index}>\n                        <TableCell>{element.name}</TableCell>\n                        <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n        </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import React, {useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicSelectFromListDialog(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const theme = useTheme();\n    const handleChange = (event) => {\n        setSelected(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(selected);\n        if(props.dontCloseOnSubmit){\n          return;\n        }\n        props.onClose();\n    }\n    useEffect( () => {\n        //expects options to be an array of dictionaries with a \"display\" field for what gets presented to the user\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(opts[0]);\n        }else{\n            setSelected(\"\");\n        }\n    }, [props.options]);\n  return (\n    <React.Fragment>\n        <DialogTitle >{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl style={{width: \"100%\"}}>\n                  <InputLabel ref={inputRef}>Options</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={selected}\n                    onChange={handleChange}\n                    input={<Input style={{width: \"100%\"}}/>}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {options.map( (opt) => (\n                        <MenuItem value={opt} key={opt[props.identifier]}>{opt[props.display]}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n            {props.action}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","export function copyStringToClipboard(str) {\n    try {\n        // Create new element\n        let el = document.createElement('textarea');\n        // Set value (string to be copied)\n        el.value = str;\n        if(el.value === \"\"){\n            el.value = \" \";\n        }\n        // Set non-editable to avoid focus and move outside of view\n        el.setAttribute('readonly', '');\n        el.style = {position: 'absolute', left: '-9999px'};\n        document.body.appendChild(el);\n        // Select text inside element\n        el.select();\n        // Copy text to clipboard\n        document.execCommand('copy');\n        // Remove temporary element\n        document.body.removeChild(el);\n        return true;\n    } catch (error) {\n        console.log(\"warning\", \"Failed to copy to clipboard: \" + error.toString());\n        return false;\n    }\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nexport function CredentialTableNewCredentialDialog(props) {\n  const [credentialType, setCredentialType] = React.useState(\"plaintext\");\n  const credentialOptions = [\n    \"plaintext\", \"ticket\", \"hash\", \"certificate\", \"key\", \"hex\"\n  ];\n  const [account, setAccount] = React.useState(\"\");\n  const [realm, setRealm] = React.useState(\"\");\n  const [credential, setCredential] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const classes = useStyles();\n\n  const onSubmit = () => {\n    props.onSubmit({\n      realm,\n      account,\n      comment,\n      credential,\n      \"type\": credentialType\n    });\n    props.onClose();\n  }\n  const onAccountChange = (name, value, error) => {\n    setAccount(value);\n  }\n  const onCommentChange = (name, value, error) => {\n    setComment(value);\n  }\n  const onRealmChange = (name, value, error) => {\n    setRealm(value);\n  }\n  const onCredentialChange = (name, value, error) => {\n    setCredential(value);\n  }\n  const handleCredentialTypeChange = (event) => {\n    setCredentialType(event.target.value);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Register New Credential</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Which Type of Credential</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  id=\"operator-chip\"\n                  value={credentialType}\n                  onChange={handleCredentialTypeChange}\n                  input={<Input />}\n                  MenuProps={MenuProps}\n                >\n                  {credentialOptions.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <MythicTextField value={account} onChange={onAccountChange} name=\"Account Name\"/>\n              <MythicTextField value={realm} onChange={onRealmChange} name=\"Realm or Domain\"/>\n              <MythicTextField value={comment} onChange={onCommentChange} name=\"Comment\"/>\n              <MythicTextField multiline value={credential} onChange={onCredentialChange} name=\"Credential\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Create\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {TextField} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nconst ValidationTextField = withStyles({\n      root: {\n        '& input:valid + fieldset': {\n          borderColor: 'grey',\n          borderWidth: 1,\n        },\n        '& input:invalid + fieldset': {\n          borderColor: 'red',\n          borderWidth: 2,\n        },\n        '& input:valid:focus + fieldset': {\n          borderLeftWidth: 6,\n          padding: '4px !important', // override inline-style\n        },\n      },\n    })(TextField);\n\nclass MythicTextField extends React.Component {\n    \n    static propTypes = {\n        placeholder: PropTypes.string,\n        name: PropTypes.string,\n        validate: PropTypes.func,\n        width: PropTypes.number,\n        onChange: PropTypes.func.isRequired,\n        requiredValue: PropTypes.bool,\n        type: PropTypes.string,\n        onEnter: PropTypes.func,\n        autoFocus: PropTypes.bool\n    }\n    onChange = evt => {\n        const name = this.props.name;\n        const value = evt.target.value;\n        const error = this.props.validate ? this.props.validate(value) : false;\n        this.props.onChange(name, value, error);\n    }\n    checkError = () => {\n        return this.props.validate ? this.props.validate(this.props.value) : false\n    }\n    onKeyPress = (event) => {\n      if(event.key === \"Enter\"){\n        if(this.props.onEnter !== undefined){\n          this.props.onEnter();\n        }\n      }else{\n        this.onChange(event);\n      }\n    }\n    render(){\n        return (\n            <div style={{width:  this.props.width ? this.props.width + \"rem\" : \"100%\"}}>\n                <ValidationTextField \n                    fullWidth={true} \n                    placeholder={this.props.placeholder} \n                    value={this.props.value} \n                    onChange={this.onChange}\n                    onKeyPress={this.onKeyPress} \n                    label={this.props.name} \n                    autoFocus={this.props.autoFocus ? true : false}\n                    variant=\"outlined\" \n                    disabled={this.props.disabled === undefined ? false : this.props.disabled}\n                    required={this.props.requiredValue ? this.props.requiredValue : false} \n                    InputLabelProps={this.props.inputLabelProps}\n                    multiline={this.props.multiline ? this.props.multiline : false}\n                    error={this.checkError()} \n                    type={this.props.type === undefined ? \"text\" : this.props.type}\n                    InputProps={this.props.InputProps}\n                    helperText={this.checkError() ? this.props.errorText : this.props.helperText}\n                    style={{\n                        padding:0,\n                        marginBottom: this.props.marginBottom ? this.props.marginBottom : \"10px\"\n                    }}/>\n            </div>\n        )\n    }\n}\nexport default MythicTextField;\n","import { makeVar } from '@apollo/client';\n\nexport const meState = makeVar({loggedIn:false, user: null, access_token: null, refresh_token: null});\nexport const menuOpen = makeVar(false);\n\n\nexport const successfulLogin = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    localStorage.setItem(\"refresh_token\", data.refresh_token);\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\n    meState({\n        loggedIn: true,\n        ...data\n    });\n}\nexport const successfulRefresh = (data) => {\n    localStorage.setItem(\"access_token\", data.access_token);\n    meState({\n        loggedIn: true,\n        access_token: localStorage.getItem(\"access_token\"),\n        ...meState()\n    });\n}\nexport const FailedRefresh = () =>{\n    console.log(\"failed refresh\");\n    localStorage.removeItem(\"access_token\");\n    localStorage.removeItem(\"refresh_token\");\n    localStorage.removeItem(\"user\");\n    meState({\n        loggedIn: false,\n        access_token: null,\n        refresh_token: null,\n        user: null\n    });\n}\n\n","import { createMuiTheme } from '@material-ui/core/styles';\nexport const lightTheme = {\n    body: '#FFF',\n    text: '#363537',\n    textLighter: '#B8B8B8',\n    textDarker: '#B8B8B8',\n    toggleBorder: '#FFF',\n    background: '#363537',\n    tableHeader: '#F5F5F5',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#BEDCFE',\n    callbackTitleColor: '',\n    listItemBackground: '#F5F5F5',\n    menuItemBackground: \"#FBFBFB\",\n    topAppBar: \"\",\n    taskAccordian: \"\",\n    taskAccordianResponse: \"#FAFAFA\",\n    taskAccordianBottom: \"#F5F5F5\",\n    secondaryTextColor: \"\",\n    tabHeaderBackground: \"\",\n    tabHeaderText: \"\",\n    tableLineColor:\"\",\n    eventMessageBackgroundColor: \"\",\n}\nexport const darkTheme = {\n    body: '#212121',\n    text: 'white',\n    textLighter: '#989898',\n    textDarker: '#989898',\n    toggleBorder: '#6B8096',\n    background: '#999',\n    tableHeader: '#484848',\n    pageHeader: '#424242',\n    pageHeaderColor: 'white',\n    callbackTitle: '#023064',\n    callbackTitleColor: 'white',\n    listItemBackground: '#303030',\n    primaryButtonTextOnly: \"#7e75ea\",\n    secondaryButtonTextOnly: \"#ea7575\",\n    menuItemBackground: \"#363537\",\n    topAppBar: \"\",\n    taskAccordian: \"#424242\",\n    taskAccordianResponse: \"#616161\",\n    taskAccordianBottom: \"#424242\",\n    secondaryTextColor: \"#E0E0E0\",\n    tabHeaderBackground: \"#363537\",\n    tabHeaderText: \"white\",\n    tableLineColor: \"grey\",\n    eventMessageBackgroundColor: \"#303030\",\n}\nexport const muiTheme = createMuiTheme({\n  palette: {\n    primary: {\n            main: \"#1976d2\"\n        },\n    secondary: {\n            main: \"#dc004e\"\n        },\n    error: {\n            main: \"#f44336\"\n        },\n    warning: {\n            main: \"#ff9800\"\n        },\n    info: {\n            main: \"#2196f3\"\n        },\n    disabled: {\n            main: \"rgba(0, 0, 0, 0.38)\"\n        },\n    },\n    \n});\n\n\n","import React, {useEffect, useLayoutEffect, useRef} from 'react';\nimport {IconButton} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles, fade, withStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChatOutlinedIcon from '@material-ui/icons/ChatOutlined';\nimport Badge from '@material-ui/core/Badge';\nimport {useTheme} from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {TaskDisplayContainer} from './TaskDisplayContainer';\n\nexport const taskDisplayFragment = gql`\nfragment taskData on task {\n  comment\n  callback_id\n  commentOperator{\n      username\n  }\n  completed\n  id\n  operator{\n      username\n  }\n  original_params\n  display_params\n  status\n  timestamp\n  command {\n    cmd\n    id\n  }\n  command_name\n  responses_aggregate {\n    aggregate{\n      count\n      max {\n        timestamp\n      }\n    }\n  }\n  opsec_pre_blocked\n  opsec_pre_bypassed\n  opsec_post_blocked\n  opsec_post_bypassed\n  tasks {\n      id\n  }\n  token {\n    id\n  }\n}\n`;\nconst getSubTaskingQuery = gql`\n${taskDisplayFragment}\nquery getSubTasking($task_id: Int!){\n    task(where: {parent_task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n        ...taskData\n  }\n}\n `;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: \"3px\",\n    marginLeft: \"3px\",\n    marginRight: \"0px\",\n    height: \"auto\",\n    width: \"99%\",\n    \n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    display: \"inline\",\n    cursor: \"default\"\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    overflow: \"auto\", \n    display: \"block\", \n    textOverflow: \"ellipsis\", \n    wordBreak: \"break-all\",\n    maxWidth: \"100%\", \n  },\n  taskAndTimeDisplay: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n    overflow: \"hidden\", \n    textOverflow: \"ellipsis\", \n    maxWidth: \"100%\", \n    width: \"100%\",\n    whiteSpace: \"nowrap\",\n    display: \"inline-block\"\n  },\n  secondaryHeadingExpanded: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    display: \"block\", \n    overflow: \"auto\",\n    maxWidth: \"100%\", \n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  icon: {\n    verticalAlign: 'middle',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n    marginRight: 0\n  },\n  column: {\n    padding: \"0 5px 0 0\",\n    display: \"inline-block\",\n    margin: 0,\n    height: \"auto\"\n  },\n}));\nconst accordionUseStyles = makeStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: 0,\n    height: \"auto\",\n    width: \"100%\",\n    whiteSpace: \"break-all\",\n    wordBreak: \"break-all\",\n  },\n  content: {\n    margin: 0,\n    height: \"100%\",\n    padding: 0,\n  },\n  expandIcon: {\n    margin: 0,\n  },\n  expanded: {\n    marginRight: 0\n  }\n}));\nfunction MinusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z\" />\n    </SvgIcon>\n  );\n}\nfunction PlusSquare(props) {\n  return (\n    <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n      {/* tslint:disable-next-line: max-line-length */}\n      <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z\" />\n    </SvgIcon>\n  );\n}\n\nconst StyledTreeItem = withStyles((theme) => ({\n  root: {\n    marginRight: 0,\n    paddingRight: 0,\n    width: \"100%\",\n    '&:hover': {\n      backgroundColor: \"none\"\n    }\n  },\n  iconContainer: {\n    '& .close': {\n      opacity: 0.3,\n    },\n  },\n  group: {\n    marginLeft: 7,\n    paddingLeft: 18,\n    borderLeft: `1px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n  },\n}))((props) => <TreeItem {...props}  />); \n\nfunction TaskDisplayPreMemo({task, filterOptions}){\n    \n    const classes = useStyles();\n    const [nodesSelected, setNodesSelected] = React.useState([]);\n\n    const toggleTaskTree = React.useCallback((task_id, selected) => {\n    \tif(selected){\n    \t\t// we want to add our treenode to the list if it's not there already\n    \t\tif(nodesSelected.includes(\"treenode:\" + task_id)){\n    \t\t\treturn;\n    \t\t}\n    \t\tsetNodesSelected([...nodesSelected, \"treenode:\" + task_id]);\n    \t}else{\n    \t\t// we want to remove our treenode from the list if it's there\n    \t\tconst newSelection = nodesSelected.reduce( (prev, cur) => {\n\t\t\t\tif(cur === \"treenode:\" + task_id){\n\t\t\t\t\treturn [...prev];\n\t\t\t\t}\n\t\t\t\treturn [...prev, cur];\n    \t\t}, [])\n    \t\tsetNodesSelected(newSelection);\n    \t}\n    }, [nodesSelected]);\n  return (\n  \t<TreeView className={classes.root}\n  \t\texpanded={nodesSelected}\n    >\n      <TaskRow task={task} filterOptions={filterOptions} nodesSelected={nodesSelected} toggleSelection={toggleTaskTree} />\n    </TreeView>\n  );\n};\nexport const TaskDisplay = React.memo(TaskDisplayPreMemo);\n\nconst TaskStatusDisplay = ({task, theme}) => {\n  if(task.status.toLowerCase().includes(\"error\")){\n    return (<Typography size=\"small\" component=\"span\" style={{padding: \"0\", color: theme.palette.error.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.status === \"cleared\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>cleared</Typography>)\n  }else if(task.completed){\n    return (null)//return (<Typography size=\"small\" style={{padding: \"0\", color: theme.palette.success.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>completed</Typography>)\n  }else if(task.status === \"submitted\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.info.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.status === \"processing\"){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>OPSEC BLOCKED (PRE)</Typography>)\n  }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n    return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.warning.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>OPSEC BLOCKED (POST)</Typography>)\n  }else{\n      return (<Typography size=\"small\" component=\"span\"  style={{padding: \"0\", color: theme.palette.info.main, marginLeft: \"5%\", display: \"inline-block\", fontSize: theme.typography.pxToRem(15)}}>{task.status.toLowerCase()}</Typography>)\n  }\n}\nconst ColoredTaskDisplay = ({task, theme, children}) => {\n  const [themeColor, setThemeColor] = React.useState(theme.palette.info.main);\n  useEffect( () => {\n    if(task.status.toLowerCase().includes(\"error\")){\n      setThemeColor(theme.palette.error.main);\n    }else if(task.status.toLowerCase() === \"cleared\"){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.completed){\n      setThemeColor(theme.palette.success.main);\n    }else if(task.status === \"submitted\"){\n      setThemeColor(theme.palette.info.main);\n    }else if(task.opsec_pre_blocked && !task.opsec_pre_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.opsec_post_blocked && !task.opsec_post_bypassed){\n      setThemeColor(theme.palette.warning.main);\n    }else if(task.status.toLowerCase() === \"processing\"){\n      setThemeColor(theme.palette.warning.main);\n    }else{\n      setThemeColor(theme.palette.info.main);\n    }\n  }, [task.status, task.completed])\n    return(\n      <span style={{display: \"flex\", margin: 0, borderWidth: 0, padding: 0, minHeight: \"48px\", alignItems: \"center\", height: \"100%\", borderLeft: \"6px solid \" + themeColor, paddingLeft: \"5px\", width: \"100%\"}}>\n        {children}\n      </span>\n    )\n}\nconst TaskRow = ({task, filterOptions, nodesSelected, toggleSelection}) => {\n\t  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [isFetchingSubtasks, setIsFetchingSubtasks] = React.useState(false);\n    const [shouldDisplay, setShouldDisplay] = React.useState(true);\n    const me = useReactiveVar(meState);\n    const [getSubTasking, { startPolling, stopPolling }] = useLazyQuery(getSubTaskingQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n        \tif(nodesSelected.includes(\"treenode:\" + task.id)){\n        \t\tstartPolling(2000);\n        \t}else{\n        \t\tstopPolling();\n        \t\tsetIsFetchingSubtasks(false);\n        \t\treturn;\n        \t}\n        \tsetTaskingData(data);\n        }\n    });\n    const getSubTasks = React.useCallback( (event) => {\n    \tif(!isFetchingSubtasks){\n        \ttoggleSelection(task.id, true);\n        \tsetIsFetchingSubtasks(true);\n    \t\tgetSubTasking({variables: {task_id: task.id} });\n    \t\treturn;\n      }\n      //// we're already fetching subtasks, but just clicked the minus sign, so stop\n      toggleSelection(task.id, false);\n    }, [isFetchingSubtasks]);\n    useEffect( () => {\n      /*props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    }); */\n      if(task.display_params.includes(\"help\") && task.operator.username !== me.user.username){\n        setShouldDisplay(false);\n        return;\n      }\n      if(filterOptions === undefined){\n        if(!shouldDisplay){\n          setShouldDisplay(true);\n        }\n        return;\n      }\n      if(filterOptions[\"operatorsList\"].length > 0){\n        if(!filterOptions[\"operatorsList\"].includes(task.operator.username)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commentsFlag\"]){\n        if(task.comment === \"\"){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"commandsList\"].length > 0){\n        // only show these commands\n        if(!filterOptions[\"commandsList\"].includes(task.command_name)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(filterOptions[\"everythingButList\"].length > 0){\n          if(filterOptions[\"everythingButList\"].includes(task.command_name)){\n            if(shouldDisplay){\n              setShouldDisplay(false);\n            }\n            return;\n          }\n      }\n      if(filterOptions[\"parameterString\"] !== \"\"){\n        let regex = new RegExp(filterOptions[\"parameterString\"]);\n        if(!regex.test(task.display_params)){\n          if(shouldDisplay){\n            setShouldDisplay(false);\n          }\n          return;\n        }\n      }\n      if(!shouldDisplay){\n        setShouldDisplay(true);\n      }\n    }, [filterOptions, task.comment, task.command, task.display_params, task.operator.username]);\n    const toggleTaskDropdown = React.useCallback( (event, expanded) => {\n      setDropdownOpen(!dropdownOpen);\n    }, [dropdownOpen]);\n    \n    useEffect( () => {\n      if(!isFetchingSubtasks && task.tasks.length > 0){\n        getSubTasks();\n      }\n    }, [task.tasks])\n    return (\n      shouldDisplay ? (\n        <StyledTreeItem nodeId={\"treenode:\" + task.id}\n          onIconClick={getSubTasks}\n          icon={\n            nodesSelected.includes(\"treenode:\" + task.id) ? (<MinusSquare />) : (task.tasks.length > 0 ? (<PlusSquare />) : (null) )\n          }\n          label={\n            <TaskLabel task={task} dropdownOpen={dropdownOpen} toggleTaskDropdown={toggleTaskDropdown}/>\n          }>\n          {\n            taskingData.task.map( (tsk) => (\n              <TaskRow key={\"taskrow: \" + tsk.id} task={tsk} nodesSelected={nodesSelected} filterOptions={filterOptions} toggleSelection={toggleSelection}/>\n            ))\n          }\n      </StyledTreeItem>\n      ) : (null)\n    )\n}\nconst TaskLabel = ({task, dropdownOpen, toggleTaskDropdown}) => {\n  const [fromNow, setFromNow] = React.useState( (new Date()) );\n  const me = useReactiveVar(meState);\n  const theme = useTheme();\n  const [displayComment, setDisplayComment] = React.useState(false);\n  const [alertBadges, setAlertBadges] = React.useState(0);\n  const classes = useStyles();\n  const accordionClasses = accordionUseStyles();\n  const toggleDisplayComment = (evt) => {\n    evt.stopPropagation();\n    setDisplayComment(!displayComment);\n  }\n  const prevResponseCount = useRef(task.responses_aggregate.aggregate.count);\n  useLayoutEffect( () => {\n    scrollContent();\n  }, [])\n  useEffect( () => {\n    //console.log(\"in use effect\", prevResponseCount.current, props.task.responses);\n    if(!dropdownOpen){\n        if(task.responses_aggregate.aggregate.count > prevResponseCount.current){\n              if(task.responses_aggregate.aggregate.count === 1 && ( (new Date(task.responses_aggregate.aggregate.max.timestamp) > fromNow ))){\n                toggleTaskDropdown();\n              }else{\n                setAlertBadges(task.responses_aggregate.aggregate.count - prevResponseCount.current);\n              }\n        }\n    }else{\n      prevResponseCount.current = task.responses_aggregate.aggregate.count;\n      setAlertBadges(0);\n    }\n  }, [task.responses_aggregate.aggregate.count, dropdownOpen]);\n  const scrollContent = (node, isAppearing) => {\n    document.getElementById(`scrolltotask${task.id}`).scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"start\"\n      })\n  }\n  return(\n    <Paper className={classes.root} elevation={5} style={{marginRight: 0}}>\n      <Accordion TransitionProps={{ unmountOnExit: true, onEntered: scrollContent }} defaultExpanded={false} onChange={toggleTaskDropdown} expanded={dropdownOpen} >\n        <AccordionSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls={`panel1c-content-task-${task.id}`}\n          id=\"panel1c-header\"\n          classes={accordionClasses}\n          \n        >  \n          <ColoredTaskDisplay task={task} theme={theme}>\n              <div id={'scrolltotask' + task.id} style={{width: \"100%\"}}>\n                {displayComment ? (\n                    <React.Fragment>\n                        <Typography className={classes.secondaryHeading}>{task.commentOperator.username}</Typography>\n                        <Typography className={classes.heading}>{task.comment}</Typography>\n                    </React.Fragment>\n                  ) : (null)}\n                    <Typography className={classes.taskAndTimeDisplay}>[{toLocalTime(task.timestamp, me.user.view_utc_time)}] / {task.id} / {task.operator.username}\n                      <TaskStatusDisplay task={task} theme={theme}/>\n                    </Typography>\n                  <div>\n                  {task.comment !== \"\" ? (\n                        <div className={classes.column}>\n                            <IconButton size=\"small\" style={{padding: \"0\"}} color=\"primary\" onClick={toggleDisplayComment}><ChatOutlinedIcon/></IconButton>\n                          </div>\n                      ) : (null)}\n                    <div className={classes.column}>\n                        <Badge badgeContent={alertBadges} color=\"secondary\" anchorOrigin={{vertical: 'top', horizontal: 'left'}}>\n                          <Typography className={classes.heading} onClick={(e) => {e.stopPropagation();}} >\n                            {task.command_name + \" \" + task.display_params}\n                          </Typography>\n                        </Badge>\n                      </div>\n                </div>\n            </div>\n          </ColoredTaskDisplay>\n                        \n        </AccordionSummary>\n\n        <AccordionDetails style={{cursor: \"default\"}}>\n          <TaskDisplayContainer task={task}/>\n        </AccordionDetails>\n      </Accordion>\n  </Paper>\n  )\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nexport function ResponseDisplayScreenshotModal(props) {\n    const [zoom, setZoom] = React.useState(false);\n    const toggleZoom = () => {\n      setZoom(!zoom);\n    }\n  return (\n    <React.Fragment>\n        <DialogContent dividers={true}>\n            <img onClick={toggleZoom} src={props.href} style={{width: zoom ? \"\" : \"100%\", height: zoom ? \"\" : \"100%\", cursor: zoom ? \"zoom-out\" : \"zoom-in\"}} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Typography } from '@material-ui/core';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const allTokenDataFragment = gql`\nfragment allTokenData on token {\n    id\n    Address\n    AppContainer\n    AppContainerNumber\n    AppContainerSid\n    AppId\n    AppModelPolicies\n    AppModelPolicyDictionary\n    AttributesFlags\n    AuditPolicy\n    AuthenticationId_id\n    BnoIsolationPrefix\n    CanSynchronize\n    Capabilities\n    CreationTime\n    DefaultDacl\n    DenyOnlyGroups\n    DeviceClaimAttributes\n    DeviceGroups\n    Elevated\n    ElevationType\n    EnabledGroups\n    ExpirationTime\n    Filtered\n    Flags\n    FullPath\n    GrantedAccess\n    GrantedAccessGeneric\n    GrantedAccessMask\n    GroupCount\n    Groups\n    Handle\n    HandleReferenceCount\n    HasRestrictions\n    ImpersonationLevel\n    Inherit\n    IntegrityLevel\n    IntegrityLevelSid\n    IsClosed\n    IsContainer\n    IsPseudoToken\n    IsRestricted\n    IsSandbox\n    LogonSid\n    LowPrivilegeAppContainer\n    MandatoryPolicy\n    ModifiedId\n    Name\n    NoChildProcess\n    NotLow\n    NtType\n    NtTypeName\n    Origin\n    Owner\n    PackageFullName\n    PackageIdentity\n    PackageName\n    PointerReferenceCount\n    PrimaryGroup\n    PrivateNamespace\n    Privileges\n    ProcessUniqueAttribute\n    ProtectFromClose\n    Restricted\n    RestrictedDeviceClaimAttributes\n    RestrictedDeviceGroups\n    RestrictedSids\n    RestrictedSidsCount\n    RestrictedUserClaimAttributes\n    SandboxInert\n    Sddl\n    SecurityAttributes\n    SecurityDescriptor\n    SessionId\n    Source\n    ThreadID\n    TokenId\n    TokenType\n    TrustLevel\n    UIAccess\n    User\n    UserClaimAttributes\n    VirtualizationAllowed\n    VirtualizationEnabled\n    WriteRestricted\n    task_id\n    logonsession {\n      id\n      LogonId\n      UserName\n      LogonDomain\n      LogonType\n      SessionId\n      Sid\n      LogonTime\n      LogonServer\n      DnsDomainName\n      Upn\n      UserFlags\n      LastSuccessfulLogon\n      LastFailedLogon\n      FailedAttemptCountSinceLastSuccessfulLogon\n      LogonScript\n      ProfilePath\n      HomeDirectory\n      HomeDirectoryDrive\n      LogoffTime\n      KickOffTime\n      PasswordLastSet\n      PasswordCanChange\n      PasswordMustChange\n      task_id\n      authenticationpackages {\n        id\n        Name\n        task_id\n      }\n    }\n}\n`;\nconst getTokenInfo = gql`\n${allTokenDataFragment}\nquery getTokenInfo ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    ...allTokenData\n  }\n}\n`;\n\nexport function TaskTokenDialog(props) {\n    const theme = useTheme();\n    const [tokenData, setTokenData] = useState([]);\n    const [logonsessionData, setLogonSessionData] = useState([]);\n    const [authenticationData, setAuthenticationData] = useState([]);\n    const tokenKeys = [\n        \"Address\",\n        \"AppContainer\",\n        \"AppContainerNumber\",\n        \"AppContainerSid\",\n        \"AppId\",\n        \"AppModelPolicies\",\n        \"AppModelPolicyDictionary\",\n        \"AttributesFlags\",\n        \"AuditPolicy\",\n        \"AuthenticationId_id\",\n        \"BnoIsolationPrefix\",\n        \"CanSynchronize\",\n        \"Capabilities\",\n        \"CreationTime\",\n        \"DefaultDacl\",\n        \"DenyOnlyGroups\",\n        \"DeviceClaimAttributes\",\n        \"DeviceGroups\",\n        \"Elevated\",\n        \"ElevationType\",\n        \"EnabledGroups\",\n        \"ExpirationTime\",\n        \"Filtered\",\n        \"Flags\",\n        \"FullPath\",\n        \"GrantedAccess\",\n        \"GrantedAccessGeneric\",\n        \"GrantedAccessMask\",\n        \"GroupCount\",\n        \"Groups\",\n        \"Handle\",\n        \"HandleReferenceCount\",\n        \"HasRestrictions\",\n        \"ImpersonationLevel\",\n        \"Inherit\",\n        \"IntegrityLevel\",\n        \"IntegrityLevelSid\",\n        \"IsClosed\",\n        \"IsContainer\",\n        \"IsPseudoToken\",\n        \"IsRestricted\",\n        \"IsSandbox\",\n        \"LogonSid\",\n        \"LowPrivilegeAppContainer\",\n        \"MandatoryPolicy\",\n        \"ModifiedId\",\n        \"Name\",\n        \"NoChildProcess\",\n        \"NotLow\",\n        \"NtType\",\n        \"NtTypeName\",\n        \"Origin\",\n        \"Owner\",\n        \"PackageFullName\",\n        \"PackageIdentity\",\n        \"PackageName\",\n        \"PointerReferenceCount\",\n        \"PrimaryGroup\",\n        \"PrivateNamespace\",\n        \"Privileges\",\n        \"ProcessUniqueAttribute\",\n        \"ProtectFromClose\",\n        \"Restricted\",\n        \"RestrictedDeviceClaimAttributes\",\n        \"RestrictedDeviceGroups\",\n        \"RestrictedSids\",\n        \"RestrictedSidsCount\",\n        \"RestrictedUserClaimAttributes\",\n        \"SandboxInert\",\n        \"Sddl\",\n        \"SecurityAttributes\",\n        \"SecurityDescriptor\",\n        \"SessionId\",\n        \"Source\",\n        \"ThreadID\",\n        \"TokenId\",\n        \"TokenType\",\n        \"TrustLevel\",\n        \"UIAccess\",\n        \"User\",\n        \"UserClaimAttributes\",\n        \"VirtualizationAllowed\",\n        \"VirtualizationEnabled\",\n        \"WriteRestricted\",\n        \"task_id\"\n    ]\n    const logonsessionKeys = [\n      \"LogonId\",\n      \"UserName\",\n      \"LogonDomain\",\n      \"LogonType\",\n      \"SessionId\",\n      \"Sid\",\n      \"LogonTime\",\n      \"LogonServer\",\n      \"DnsDomainName\",\n      \"Upn\",\n      \"UserFlags\",\n      \"LastSuccessfulLogon\",\n      \"LastFailedLogon\",\n      \"FailedAttemptCountSinceLastSuccessfulLogon\",\n      \"LogonScript\",\n      \"ProfilePath\",\n      \"HomeDirectory\",\n      \"HomeDirectoryDrive\",\n      \"LogoffTime\",\n      \"KickOffTime\",\n      \"PasswordLastSet\",\n      \"PasswordCanChange\",\n      \"PasswordMustChange\",\n      \"task_id\"\n    ]\n    const authenticationpackageKeys = [\n      \"Name\",\n      \"task_id\"\n    ]\n    useQuery(getTokenInfo, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            if(data.token_by_pk !== null){\n                setTokenData(data.token_by_pk);\n                const reducedTokenData = tokenKeys.reduce( (prev, key) => {\n                  if(data.token_by_pk[key] !== undefined && data.token_by_pk[key] !== null && data.token_by_pk[key] !== \"\"){\n                    return [...prev, {\"name\": key, \"value\": data.token_by_pk[key]}]\n                  }\n                  else{\n                    return [...prev];\n                  }\n                }, []);\n                setTokenData(reducedTokenData);\n                if(data.token_by_pk.logonsession !== null){\n                  const reducedLogonSessionData = logonsessionKeys.reduce( (prev, key) => {\n                    if(data.token_by_pk.logonsession[key] !== undefined && data.token_by_pk.logonsession[key] !== null && data.token_by_pk.logonsession[key] !== \"\"){\n                      return [...prev, {\"name\": key, \"value\": data.token_by_pk.logonsession[key]}]\n                    }\n                    else{\n                      return [...prev];\n                    }\n                  }, []);\n                  setLogonSessionData(reducedLogonSessionData);\n                  if (data.token_by_pk.logonsession.authenticationpackages.length > 0){\n                    const reducedAuthenticationData = data.token_by_pk.logonsession.authenticationpackages.map( (pkg) => {\n                      const packageData = authenticationpackageKeys.reduce( (prev, key) => {\n                        if(pkg[key] !== undefined && pkg[key] !== null && pkg[key] !== \"\"){\n                          return [...prev, {\"name\": key, \"value\": pkg[key]}];\n                        }else{\n                          return [...prev];\n                        }\n                      }, []);\n                      return packageData;\n                    })\n                    \n                    setAuthenticationData(reducedAuthenticationData);\n                  }\n                }\n                \n            }\n        },\n        onError: data => {\n            snackActions.error(data)\n        },\n        fetchPolicy: \"network-only\"\n    });\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Token Information</DialogTitle>\n        <DialogContent dividers={true}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Token Data\n              </Typography>\n            </Paper>\n          <Paper elevation={5} style={{position: \"relative\"}} variant={\"elevation\"}>\n            <TableContainer component={Paper} className=\"mythicElement\">\n              <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>Token Property</TableCell>\n                            <TableCell>Token Value</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {tokenData.map( (element, index) => (\n                        <TableRow key={'row' + index}>\n                          <TableCell>{element.name}</TableCell>\n                          <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                </Table>\n              </TableContainer>\n          </Paper>\n        \n        {logonsessionData.length > 0 &&\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Associated Logon Session Data\n              </Typography>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n              <TableContainer component={Paper} className=\"mythicElement\">\n                <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                      <TableHead>\n                          <TableRow>\n                              <TableCell>Logon Session Property</TableCell>\n                              <TableCell>Logon Session Value</TableCell>\n                          </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {logonsessionData.map( (element, index) => (\n                          <TableRow key={'logondatarow' + index}>\n                            <TableCell>{element.name}</TableCell>\n                            <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                  </Table>\n                </TableContainer>\n            </Paper>\n          </React.Fragment>\n        }\n        {authenticationData.map( authpkg => (\n            <React.Fragment key={\"authpkg\" + authpkg.id}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Associated Authentication Package\n                </Typography>\n              </Paper>\n              \n              <Paper elevation={5} style={{position: \"relative\", marginTop: \"20px\"}} variant={\"elevation\"}>\n                <TableContainer component={Paper} className=\"mythicElement\">\n                  <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>Authentication Package Property</TableCell>\n                                <TableCell>Authentication Package Value</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {authpkg.map( (element, index) => (\n                            <TableRow key={'authpackage' + authpkg.id + \"row\" + index}>\n                              <TableCell>{element.name}</TableCell>\n                              <TableCell>{element.value === true ? (\"True\") : (element.value === false ? (\"False\") : (element.value) ) }</TableCell>\n                            </TableRow>\n                          ))}\n                        </TableBody>\n                    </Table>\n                  </TableContainer>\n              </Paper>\n            </React.Fragment>\n        ))\n        }\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n\n","import { useState, useEffect } from 'react';\n\nconst useSingleAndDoubleClick = (onSingleClick, onDoubleClick, delay = 250) => {\n    const [click, setClick] = useState(0);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            // simple click\n            if (click === 1) onSingleClick();\n            setClick(0);\n        }, delay);\n\n        // the duration between this click and the previous one\n        // is less than the value of delay = double-click\n        if (click === 2) onDoubleClick();\n\n        return () => clearTimeout(timer);\n    }, [delay, onSingleClick, onDoubleClick, click]);\n\n    return () => setClick((prev) => prev + 1);\n};\n\nexport default useSingleAndDoubleClick;\n","import { makeStyles } from '@material-ui/core';\n\nexport default makeStyles((theme) => ({\n    headerCellRow: {\n        display: 'flex',\n        flexDirection: 'row',\n        position: 'sticky',\n        top: '0',\n        left: '0',\n        right: '0',\n        zIndex: 1,\n    },\n    headerCell: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 0.25em',\n        boxSizing: 'border-box',\n        justifyContent: 'space-between',\n        userSelect: 'none',\n        backgroundColor: theme.palette.background.paper,\n        borderTop: '1px solid #e0e0e0',\n        borderRight: '1px solid #e0e0e0',\n        borderBottom: '1px solid #e0e0e0',\n        '&:first-child': {\n            borderLeft: '1px solid #e0e0e0',\n        },\n        '&:hover': {\n            backgroundColor: theme.tableHover,\n            cursor: 'pointer',\n        },\n    },\n    cell: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0 0.25em',\n        boxSizing: 'border-box',\n        fontFamily: 'monospace',\n        borderBottom: '1px solid #e0e0e0',\n        '&:hover': {\n            backgroundColor: theme.tableHover,\n            cursor: 'pointer',\n        },\n    },\n    cellInner: {\n        width: '100%',\n        whiteSpace: 'nowrap',\n        overflowX: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    draggableHandlesContainer: {\n        position: 'absolute',\n        top: 0,\n        overflowX: 'hidden',\n    },\n    draggableHandlesClickArea: {\n        position: 'absolute',\n        top: 0,\n        width: '16px',\n        cursor: 'col-resize',\n        pointerEvents: 'initial',\n    },\n    draggableHandlesIndicator: {\n        position: 'absolute',\n        top: 0,\n        left: 8,\n        width: '1px',\n        backgroundImage: 'linear-gradient(#7f93c0, #00000000)',\n    },\n}));\n","import { Box, Typography } from '@material-ui/core';\nimport { useCallback } from 'react';\nimport useSingleAndDoubleClick from '../../utilities/useSingleAndDoubleClick';\nimport useStyles from './styles';\n\nconst HeaderCell = ({\n    onClick = () => {},\n    onDoubleClick = () => {},\n    sortIndicatorIndex,\n    sortDirection,\n    headerNameKey = \"name\",\n    VariableSizeGridProps: { style, rowIndex, columnIndex, data, ...other },\n}) => {\n    const classes = useStyles();\n\n\n    const handleClick = useCallback(\n        (e) => {\n            onClick(e, columnIndex);\n        },\n        [onClick, columnIndex]\n    );\n\n    const handleDoubleClick = useCallback(\n        (e) => {\n            onDoubleClick(e, columnIndex);\n        },\n        [onDoubleClick, columnIndex]\n    );\n\n    const handleClicks = useSingleAndDoubleClick(handleClick, handleDoubleClick);\n\n    const item = data.items[rowIndex][columnIndex];\n\n    return (\n        <div style={style} className={classes.headerCell} onClick={handleClicks}>\n            <Box display='flex' alignItems='center' justifyContent='space-between' width='100%'>\n                <Typography className={classes.cellInner} variant='body1'>\n                    {item[headerNameKey].toUpperCase()}\n                </Typography>\n                {sortIndicatorIndex === columnIndex && (sortDirection === 'ASC' ? <div></div> : <div></div>)}\n            </Box>\n        </div>\n    );\n};\n\nexport default HeaderCell;\n","import { useCallback } from 'react';\nimport useStyles from './styles';\n\nconst Cell = ({ VariableSizeGridProps: { style, rowIndex, columnIndex, data, ...other } }) => {\n    const classes = useStyles();\n\n    const handleDoubleClick = useCallback(\n        (e) => {\n            data.onDoubleClickRow(e, rowIndex - 1); // minus 1 to account for header row\n        },\n        [data, rowIndex]\n    );\n\n    const item = data.items[rowIndex][columnIndex];\n    return (\n        <div style={{...style, ...item?.cellStyle || null}} className={classes.cell} onDoubleClick={handleDoubleClick}>\n            <div className={classes.cellInner}>{item}</div>\n        </div>\n    );\n};\n\nexport default Cell;\n","import React, { useState } from 'react';\nimport useStyles from './styles';\nimport Draggable from 'react-draggable';\n\nconst DraggableHandles = React.forwardRef(({ height, rowHeight, width, minColumnWidth, columnWidths, onStop }, ref) => {\n    const classes = useStyles();\n    const [isDragging, setIsDragging] = useState(false);\n    return (\n        <div\n            ref={ref}\n            className={classes.draggableHandlesContainer}\n            style={{\n                height: height,\n                width: width,\n                pointerEvents: isDragging ? 'initial' : 'none',\n            }}>\n            {columnWidths.map((_, i) => {\n                const leftOffset = columnWidths.slice(0, i).reduce((a, b) => a + b, 0);\n                return (\n                    <Draggable\n                        key={i}\n                        axis='x'\n                        bounds={{\n                            left: minColumnWidth - columnWidths[i],\n                            right: Number.POSITIVE_INFINITY,\n                            top: 0,\n                            bottom: 0,\n                        }}\n                        position={isDragging ? null : { x: 0, y: 0 }}\n                        onStart={() => {\n                            setIsDragging(i);\n                        }}\n                        onStop={(e, data) => {\n                            setIsDragging(false);\n                            onStop(data.x, i);\n                        }}>\n                        <div\n                            className={classes.draggableHandlesClickArea}\n                            style={{\n                                left: leftOffset + columnWidths[i] - 1 - 8,\n                                height: rowHeight,\n                            }}>\n                            <div\n                                className={classes.draggableHandlesIndicator}\n                                style={{\n                                    display: isDragging === i ? 'block' : 'none',\n                                    height: height / 2,\n                                }}\n                            />\n                        </div>\n                    </Draggable>\n                );\n            })}\n        </div>\n    );\n});\n\nexport default DraggableHandles;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport useScrollbarSize from 'react-scrollbar-size';\nimport { VariableSizeGrid } from 'react-window';\nimport HeaderCell from './HeaderCell';\nimport Cell from './Cell';\nimport DraggableHandles from './DraggableHandles';\nimport useStyles from './styles';\n\nconst MIN_COLUMN_WIDTH = 100;\n\nconst CellRenderer = (VariableSizeGridProps) => {\n    return VariableSizeGridProps.rowIndex === 0 ? null : <Cell VariableSizeGridProps={VariableSizeGridProps} />;\n};\n\nconst ResizableGridWrapper = ({\n    columns,\n    sortIndicatorIndex,\n    sortDirection,\n    items,\n    headerNameKey,\n    onClickHeader,\n    onDoubleClickRow,\n    rowHeight,\n    widthMeasureKey,\n    ...AutoSizerProps\n}) => {\n    /* Hooks */\n    const { width: scrollbarWidth } = useScrollbarSize();\n\n    const [columnWidths, setColumnWidths] = useState(columns.map((column) => column.width || MIN_COLUMN_WIDTH));\n\n    const gridRef = useRef(null);\n\n    const dragHandlesRef = useRef(null);\n\n    const getColumnWidth = useCallback(\n        (index) => {\n            return columnWidths[index];\n        },\n        [columnWidths]\n    );\n\n    const getRowHeight = useCallback(\n        (index) => {\n            return rowHeight;\n        },\n        [rowHeight]\n    );\n\n    useEffect(() => {\n        const totalWidth = AutoSizerProps.width - scrollbarWidth;\n        const updatedColumnWidths = columns.map((column) => column.width || MIN_COLUMN_WIDTH);\n        const totalWidthDiff = totalWidth - updatedColumnWidths.reduce((a, b) => a + b, 0);\n        if (totalWidthDiff > 0) {\n            let updatedWidthIndexs = [];\n            for(let i = 0; i < columns.length; i++){\n                // check if any of the columns have the `fillWidth` property to true\n                if(columns[i][\"fillWidth\"]){\n                    updatedWidthIndexs.push(i);\n                }\n            }\n            if(updatedWidthIndexs.length === 0){\n                updatedWidthIndexs.push(columns.length - 1);\n            }\n            for(let i = 0; i < updatedWidthIndexs.length; i++){\n                updatedColumnWidths[updatedWidthIndexs[i]] += totalWidthDiff / updatedWidthIndexs.length;\n            }\n            //updatedColumnWidths[updatedWidthIndex] += totalWidthDiff;\n        }\n        setColumnWidths(updatedColumnWidths);\n    }, [scrollbarWidth]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        gridRef.current.resetAfterColumnIndex(0, true);\n    }, [columnWidths]);\n\n    /* Event Handlers */\n\n    const resizeColumn = (x, columnIndex) => {\n        const updatedWidths = columnWidths.map((columnWidth, index) => {\n            if (columnIndex === index) {\n                return Math.floor(Math.max(columnWidth + x, MIN_COLUMN_WIDTH));\n            }\n            return Math.floor(columnWidth);\n        });\n        setColumnWidths(updatedWidths);\n    };\n\n    const autosizeColumn = (columnIndex) => {\n        const longestElementInColumn = Math.max(...items.map((itemRow) => {\n            if(typeof(itemRow[columnIndex]) === \"string\"){\n                return itemRow[columnIndex].length;\n            }else if(widthMeasureKey){\n                return String(itemRow[columnIndex]?.props?.cellData?.[widthMeasureKey]).length || -1;\n            }else{\n                return itemRow[columnIndex]?.props?.cellData?.length || -1;\n            }\n            \n        }));\n        const updatedWidths = columnWidths.map((columnWidth, index) => {\n            if (columnIndex === index) {\n                return Math.floor(Math.max(longestElementInColumn * 8 + 32, MIN_COLUMN_WIDTH));\n            }\n            return Math.floor(columnWidth);\n        });\n        setColumnWidths(updatedWidths);\n    };\n\n    const itemsWithHeader = [columns, ...items];\n\n    const innerElementType = React.forwardRef(({ children, ...rest }, ref) => {\n        const classes = useStyles();\n        return (\n            <div ref={ref} {...rest}>\n                {/* always render header cells */}\n                <div\n                    className={classes.headerCellRow}\n                    style={{\n                        height: getRowHeight(0),\n                    }}>\n                    {columns.map((column, i) => {\n                        const leftOffset = columnWidths.slice(0, i).reduce((a, b) => a + b, 0);\n                        return (\n                            <HeaderCell\n                                key={i}\n                                headerNameKey={headerNameKey}\n                                onClick={onClickHeader}\n                                onDoubleClick={(e, columnIndex) => {\n                                    if (column.disableAutosize) return;\n                                    autosizeColumn(columnIndex);\n                                }}\n                                sortIndicatorIndex={sortIndicatorIndex}\n                                sortDirection={sortDirection}\n                                VariableSizeGridProps={{\n                                    style: {\n                                        position: 'absolute',\n                                        top: 0,\n                                        left: leftOffset,\n                                        height: getRowHeight(0),\n                                        width: getColumnWidth(i),\n                                    },\n                                    rowIndex: 0,\n                                    columnIndex: i,\n                                    data: { items: itemsWithHeader },\n                                }}\n                            />\n                        );\n                    })}\n                </div>\n                {/* render other cells as usual */}\n                {children}\n            </div>\n        );\n    });\n\n    return (\n        <>\n            <VariableSizeGrid\n                height={AutoSizerProps.height}\n                width={AutoSizerProps.width}\n                columnCount={columns.length}\n                columnWidth={getColumnWidth}\n                headerNameKey={headerNameKey}\n                rowCount={itemsWithHeader.length}\n                rowHeight={getRowHeight}\n                itemData={{ items: itemsWithHeader, onDoubleClickRow }}\n                innerElementType={innerElementType}\n                overscanRowCount={20}\n                onScroll={({ scrollLeft }) => {\n                    if (dragHandlesRef.current) {\n                        dragHandlesRef.current.scrollTo({ left: scrollLeft });\n                    }\n                }}\n                ref={gridRef}>\n                {CellRenderer}\n            </VariableSizeGrid>\n            <DraggableHandles\n                height={AutoSizerProps.height}\n                rowHeight={getRowHeight(0)}\n                width={AutoSizerProps.width}\n                minColumnWidth={MIN_COLUMN_WIDTH}\n                columnWidths={columnWidths}\n                onStop={resizeColumn}\n                ref={dragHandlesRef}\n            />\n        </>\n    );\n};\n\nconst MythicResizableGrid = ({\n    columns,\n    sortIndicatorIndex,\n    sortDirection,\n    items,\n    onClickHeader,\n    headerNameKey,\n    onDoubleClickRow,\n    widthMeasureKey,\n    rowHeight = 32,\n}) => {\n    return (\n        <AutoSizer>\n            {(AutoSizerProps) => (\n                <ResizableGridWrapper\n                    columns={columns}\n                    headerNameKey={headerNameKey}\n                    sortIndicatorIndex={sortIndicatorIndex}\n                    sortDirection={sortDirection}\n                    items={items}\n                    widthMeasureKey={widthMeasureKey}\n                    rowHeight={rowHeight}\n                    onClickHeader={onClickHeader}\n                    onDoubleClickRow={onDoubleClickRow}\n                    {...AutoSizerProps}\n                />\n            )}\n        </AutoSizer>\n    );\n};\n\nMythicResizableGrid.propTypes = {\n    columns: PropTypes.arrayOf(\n        PropTypes.shape({\n            name: PropTypes.string,\n            width: PropTypes.number,\n            disableAutosize: PropTypes.bool,\n            disableSort: PropTypes.bool\n        })\n    ).isRequired,\n    sortIndicatorIndex: PropTypes.number,\n    sortDirection: PropTypes.oneOf(['ASC', 'DESC']),\n    items: PropTypes.arrayOf(PropTypes.array).isRequired,\n    onClickHeader: PropTypes.func,\n    onDoubleClickRow: PropTypes.func,\n    rowHeight: PropTypes.number,\n    headerNameKey: PropTypes.string,\n    widthMeasureKey: PropTypes.string\n};\n\nexport default MythicResizableGrid;\n","import MythicResizableGrid from './MythicResizableGrid';\n\nexport default MythicResizableGrid;\n","import React, { useEffect } from 'react';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const ResponseDisplayPlaintext = (props) =>{\n  const theme = useTheme();\n  const [plaintextView, setPlaintextView] = React.useState(props.plaintext);\n  useEffect( () => {\n    try{\n      const newPlaintext = JSON.stringify(JSON.parse(props.plaintext), null, 4);\n      setPlaintextView(newPlaintext);\n    }catch(error){\n      //console.log(\"trying to JSONify plaintext error\", error);\n      setPlaintextView(props.plaintext);\n    }\n  }, [props.plaintext])\n  return (\n    <AceEditor \n        mode=\"json\"\n        theme={theme.palette.type === \"dark\" ? \"monokai\" : \"xcode\"}\n        fontSize={14}\n        showGutter={true}\n        height={\"100px\"}\n        highlightActiveLine={true}\n        value={plaintextView}\n        focus={true}\n        width={\"100%\"}\n        minLines={2}\n        maxLines={50}\n        readOnly\n        setOptions={{\n          showLineNumbers: true,\n          tabSize: 4,\n          useWorker: false\n        }}/>\n  )\n      \n}","import { useSnackbar } from 'notistack'\n\nlet useSnackbarRef = null;\n\nexport const SnackbarUtilsConfigurator = () => {\n  useSnackbarRef = useSnackbar();\n\n  return null;\n};\n\nexport const snackActions = {\n  success(msg, options) {\n    this.toast(msg, 'success', options)\n  },\n  warning(msg, options) {\n    this.toast(msg, 'warning', options)\n  },\n  info(msg, options) {\n    this.toast(msg, 'info', options)\n  },\n  error(msg, options) {\n    this.toast(msg, 'error', options)\n  },\n  dismiss(){\n    useSnackbarRef.closeSnackbar();\n  },\n  toast(msg, variant = 'default', options) {\n    useSnackbarRef.enqueueSnackbar(msg, { variant, ...options })\n  }\n}\n","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Tab from '@material-ui/core/Tab';\nimport React from 'react';\n\nexport function MythicTabPanel(props) {\n    const { children, value, index, maxHeight, tabInfo, getCallbackData, queryParams, changeSearchParam, ...other } =\n        props;\n    const style =\n        props.style === undefined\n            ? {\n                  display: value === index ? 'flex' : 'none',\n                  flexDirection: 'column',\n                  flexGrow: 1,\n                  width: '100%',\n                  maxWidth: '100%',\n                  overflowY: \"auto\",\n              }\n            : props.style;\n    return (\n        <div\n            role='tabpanel'\n            hidden={value !== index}\n            id={`scrollable-auto-tabpanel-${index}`}\n            aria-labelledby={`scrollable-auto-tab-${index}`}\n            style={style}\n            {...other}>\n            {<React.Fragment>{children}</React.Fragment>}\n        </div>\n    );\n}\nfunction a11yProps(index) {\n    return {\n        id: `scrollable-auto-tab-${index}`,\n        'aria-controls': `scrollable-auto-tabpanel-${index}`,\n    };\n}\nexport function MythicTabLabel(props) {\n    const {\n        label,\n        index,\n        fullWidth,\n        maxHeight,\n        onContextMenu,\n        onCloseTab,\n        selectionFollowsFocus,\n        textColor,\n        indicator,\n        tabInfo,\n        onEditTabDescription,\n        getCallbackData,\n        ...other\n    } = props;\n    const onClick = (e) => {\n        e.stopPropagation();\n        onCloseTab({ tabID: tabInfo.tabID, index: index });\n    };\n    return (\n        <Tab\n            label={\n                <span onContextMenu={onContextMenu} style={{ display: 'inline-block', zIndex: 1 }}>\n                    {label}\n                    <IconButton component='div' size='small' onClick={onClick} {...other}>\n                        <CloseIcon />\n                    </IconButton>\n                </span>\n            }\n            {...a11yProps(index)}\n            {...other}\n        />\n    );\n}\nexport function MythicSearchTabLabel(props) {\n    const { label, index, fullWidth, maxHeight, selectionFollowsFocus, textColor, indicator, iconComponent, ...other } =\n        props;\n    return (\n        <Tab\n            label={\n                <span>\n                    {label}\n                    <br />\n                    {iconComponent}\n                </span>\n            }\n            {...a11yProps(index)}\n            {...other}\n        />\n    );\n}\n","import React, {useEffect} from 'react';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport {ResponseDisplay} from './ResponseDisplay';\nimport RateReviewOutlinedIcon from '@material-ui/icons/RateReviewOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskCommentDialog} from './TaskCommentDialog';\nimport {TaskTagDialog} from './TaskTagDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport {TaskOpsecDialog} from './TaskOpsecDialog';\nimport {TaskViewParametersDialog} from './TaskViewParametersDialog';\nimport {TaskViewStdoutStderrDialog} from './TaskViewStdoutStderrDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport LocalOfferOutlinedIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CodeIcon from '@material-ui/icons/Code';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport {TaskTokenDialog} from './TaskTokenDialog';\nimport Grid from '@material-ui/core/Grid';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport {gql, useMutation, useLazyQuery } from '@apollo/client';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBook} from '@fortawesome/free-solid-svg-icons';\nimport { faExternalLinkAlt, faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Backdrop } from '@material-ui/core';\n\nconst ReissueTaskMutationGQL = gql`\nmutation reissueTaskMutation($task_id: Int!){\n  reissue_task(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst ReissueTaskHandlerMutationGQL = gql`\nmutation reissueTaskHandlerMutation($task_id: Int!){\n  reissue_task_handler(task_id: $task_id){\n    status\n    error\n  }\n}\n`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n}`;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    transform: 'translateZ(0px)',\n    flexGrow: 1,\n  },\n  speedDial: {\n    position: 'absolute',\n    '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n      top: theme.spacing(2),\n      right: theme.spacing(2),\n    },\n    '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n      bottom: theme.spacing(1),\n      left: theme.spacing(2),\n    },\n    zIndex: 3\n  },\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const TaskDisplayContainer = ({task}) => {\n    const theme = useTheme();\n    const [totalCount, setTotalcount] = React.useState(0);\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [openCommentDialog, setOpenCommentDialog] = React.useState(false);\n    const [openTokenDialog, setOpenTokenDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openStdoutStderrDialog, setOpenStdoutStderrDialog] = React.useState(false);\n    const [openOpsecDialog, setOpenOpsecDialog] = React.useState(false);\n    const [openTaskTagDialog, setOpenTaskTagDialog] = React.useState(false);\n    const [commandID, setCommandID] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchOutput, setSearchOutput] = React.useState(false);\n    const [fetchLimit, setFetchLimit] = React.useState(10);\n    const [currentPage, setCurrentPage] = React.useState(1);\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    const classes = useStyles();\n    const [openSpeedDial, setOpenSpeedDial] = React.useState(false);\n    const [downloadResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n          const output = data.response.reduce( (prev, cur) => {\n            return prev + Buffer.from(cur.response, \"base64\");\n          }, \"\");\n          const dataBlob = new Blob([output], {type: 'application/octet-stream'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = \"task_\" + task.id + \".txt\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = \"task_\" + task.id + \".txt\";\n            document.body.appendChild(element);\n            element.click();\n          }\n      },\n      onError: (data) => {\n\n      }\n    })\n    const [reissueTask] = useMutation(ReissueTaskMutationGQL, {\n      onCompleted: data => {\n        if(data.reissue_task.status === \"success\"){\n          snackActions.success(\"Successfully re-issued task to Mythic\");\n        }else{\n          snackActions.error(\"Failed to re-issue task to Mythic: \" + data.reissue_task.error);\n        }\n      },  \n      onError: data => {\n        console.log(data);\n        snackActions.error(\"Failed to re-issue task: \" + data);\n      }\n    });\n    const [reissueTaskHandler] = useMutation(ReissueTaskHandlerMutationGQL, {\n      onCompleted: data => {\n        if(data.reissue_task_handler.status === \"success\"){\n          snackActions.success(\"Successfully resubmitted task for handling\");\n        }else{\n          snackActions.warning(\"Failed to resubmit task for handling: \" + data.reissue_task_handler.error);\n        }\n        \n      },\n      onError: data => {\n        console.log(data);\n        snackActions.error(\"Error resubmitting task for handling: \" + data);\n      }\n    });\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(task.original_params);\n        if(result){\n          snackActions.success(\"Copied text!\");\n        }else{\n          snackActions.error(\"Failed to copy text\");\n        }\n        setOpenSpeedDial(false);\n    }\n    const onReissueTask = () => {\n      reissueTask({variables: {task_id: task.id}});\n    }\n    const onReissueTaskHandler = () => {\n      reissueTaskHandler({variables: {task_id: task.id}});\n    }\n    useEffect( () => {\n        setCommandID(task.command === null ? 0 : task.command.id);\n        if(task.responses_aggregate !== undefined){\n          setTotalcount(task.responses_aggregate.aggregate.count);  \n        }\n    }, [task.command, task.responses_aggregate]);\n    const onSubmitSearch = ( value) => {\n      setSearch(value);\n      if(value === \"\"){\n        if(task.responses_aggregate !== undefined){\n          setTotalcount(task.responses_aggregate.aggregate.count);  \n        }else{\n          setTotalcount(0);\n        }\n      }\n      setCurrentPage(1);\n    }\n    const onChangePage = (event, value) => {\n      setCurrentPage(value);\n    }\n    const changeTotalCount = React.useCallback( (newTotal) => {\n      setTotalcount(newTotal);\n      setCurrentPage(1);\n    }, []);\n    const onDownloadResponses = () => {\n      downloadResponses({variables: {task_id: task.id}});\n      setOpenSpeedDial(false);\n    }\n    const tooltipPlacement = \"top\"\n    return (\n      <React.Fragment>\n        <Grid container spacing={0} style={{maxWidth: \"100%\"}}>\n          <Backdrop open={openSpeedDial} onClick={()=>{setOpenSpeedDial(false);}} style={{zIndex: 2, position: \"absolute\"}}/>\n              {openTokenDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTokenDialog} \n                  onClose={()=>{setOpenTokenDialog(false);}} \n                  innerDialog={<TaskTokenDialog token_id={task.token === undefined ? 0 : task.token.id} onClose={()=>{setOpenTokenDialog(false);}} />}\n              />) : (null)\n              }\n              {openOpsecDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openOpsecDialog} \n                  onClose={()=>{setOpenOpsecDialog(false);}} \n                  innerDialog={<TaskOpsecDialog task_id={task.id} onClose={()=>{setOpenOpsecDialog(false);}} />}\n              />) : (null)\n              }\n              {openParametersDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                  onClose={()=>{setOpenParametersDialog(false);}} \n                  innerDialog={<TaskViewParametersDialog task_id={task.id} onClose={()=>{setOpenParametersDialog(false);}} />}\n              />) : (null)\n              }\n              {openStdoutStderrDialog ? \n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openStdoutStderrDialog} \n                  onClose={()=>{setOpenStdoutStderrDialog(false);}} \n                  innerDialog={<TaskViewStdoutStderrDialog task_id={task.id} onClose={()=>{setOpenStdoutStderrDialog(false);}} />}\n              />) : (null)\n              }\n              {openTaskTagDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openTaskTagDialog} \n                  onClose={()=>{setOpenTaskTagDialog(false);}} \n                  innerDialog={<TaskTagDialog task_id={task.id} onClose={()=>{setOpenTaskTagDialog(false);}} />}\n              />) : (null)\n              }\n              {openCommentDialog ?\n                (<MythicDialog fullWidth={true} maxWidth=\"md\" open={openCommentDialog} \n                  onClose={()=>{setOpenCommentDialog(false);}} \n                  innerDialog={<TaskCommentDialog task_id={task.id} onClose={()=>{setOpenCommentDialog(false);}} />}\n              />) : (null)\n              }\n            <Grid item xs={12}>\n              <ResponseDisplay task={task} command_id={commandID} viewBrowserScript={viewBrowserScript} onSubmitSearch={onSubmitSearch}\n                searchOutput={searchOutput}\n                fetchLimit={fetchLimit} currentPage={currentPage} searchText={search} changeTotalCount={changeTotalCount} selectAllOutput={selectAllOutput}/>\n            </Grid>\n            <Grid item xs={12} >\n            <SpeedDial\n                ariaLabel=\"Task Speeddial\"\n                className={classes.speedDial}\n                icon={<SpeedDialIcon />}\n                onClick={()=>{setOpenSpeedDial(!openSpeedDial)}}\n                FabProps={{ color: \"primary\", size: \"small\" }}\n                open={openSpeedDial}\n                direction=\"right\"\n              >\n                  <SpeedDialAction\n                    icon={<CodeIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Toggle BrowserScript\"}\n                    onClick={() => {setViewBrowserScript(!viewBrowserScript);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<FontAwesomeIcon icon={faExpandArrowsAlt} size=\"lg\" />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View All Output\"}\n                    onClick={() => {setSelectAllOutput(!selectAllOutput);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<SearchIcon />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Search Output\"}\n                    onClick={() => {setSearchOutput(!searchOutput);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<GetAppIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Download output\"}\n                    onClick={onDownloadResponses}\n                  />\n                  <SpeedDialAction\n                    icon={<LocalOfferOutlinedIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Edit Tags\"}\n                    onClick={()=>{setOpenTaskTagDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<FontAwesomeIcon icon={faExternalLinkAlt} size=\"lg\" />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Open Task in New Window\"}\n                    onClick={()=> {window.open('/new/task/' + task.id, \"_blank\")}}\n                  />\n                  <SpeedDialAction\n                    icon={<FileCopyOutlinedIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Copy original params to clipboard\"}\n                    onClick={copyToClipboard}\n                  />\n                  <SpeedDialAction\n                    icon={<RateReviewOutlinedIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"Edit Comment\"}\n                    onClick={()=>{setOpenCommentDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<KeyboardIcon/>}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View All Parameters\"}\n                    onClick={()=>{setOpenParametersDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  <SpeedDialAction\n                    icon={<FontAwesomeIcon icon={faBook} size=\"lg\" />}\n                    arrow\n                    TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                    tooltipPlacement={tooltipPlacement}\n                    tooltipTitle={\"View Stdout/Stderr of Task\"}\n                    onClick={()=>{setOpenStdoutStderrDialog(true);setOpenSpeedDial(false);}}\n                  />\n                  {task.opsec_pre_blocked === null ? (\n                    null\n                  ) : (  task.opsec_pre_bypassed === false ? (\n                          <SpeedDialAction\n                            icon={<LockIcon style={{color: theme.palette.error.main}}/>}\n                            arrow\n                            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                            tooltipPlacement={tooltipPlacement}\n                            tooltipTitle={\"Submit OPSEC PreCheck Bypass Request\"}\n                            onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                          />\n                          ): (\n                            <SpeedDialAction\n                            icon={<LockOpenIcon style={{color: theme.palette.success.main}}/>}\n                            arrow\n                            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                            tooltipPlacement={tooltipPlacement}\n                            tooltipTitle={\"View OPSEC PreCheck Data\"}\n                            onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                          />\n                          )             \n                    ) \n                  }\n                  {task.opsec_post_blocked === null ? (\n                    null\n                  ) : (  task.opsec_post_bypassed === false ? (\n                          <SpeedDialAction\n                            icon={<LockIcon style={{color: theme.palette.error.main}}/>}\n                            arrow\n                            TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                            tooltipPlacement={tooltipPlacement}\n                            tooltipTitle={\"Submit OPSEC PostCheck Bypass Request\"}\n                            onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                          />\n                          ): (\n                            <SpeedDialAction\n                              icon={<LockOpenIcon style={{color: theme.palette.success.main}}/>}\n                              arrow\n                              TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                              tooltipPlacement={tooltipPlacement}\n                              tooltipTitle={\"View OPSEC PostCheck Data\"}\n                              onClick={()=>{setOpenOpsecDialog(true);setOpenSpeedDial(false);}}\n                            />\n                          )             \n                    ) \n                  }\n                  {task.token === null ? (\n                    null\n                  ) : (\n                      <SpeedDialAction\n                        icon={<ConfirmationNumberIcon />}\n                        arrow\n                        TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                        tooltipPlacement={tooltipPlacement}\n                        tooltipTitle={\"View Token Information\"}\n                        onClick={()=>{setOpenTokenDialog(true);setOpenSpeedDial(false);}}\n                      />\n                  )}\n                  {task.status.toLowerCase().includes(\"error: container\") ? (\n                    <SpeedDialAction\n                      icon={<ReplayIcon style={{color: theme.palette.warning.main}}/>}\n                      arrow\n                      TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                      tooltipPlacement={tooltipPlacement}\n                      tooltipTitle={\"Resubmit Tasking\"}\n                      onClick={onReissueTask}\n                    />\n                  ) : (null)}\n                  {task.status.toLowerCase().includes(\"error: task\") ? (\n                    <SpeedDialAction\n                      icon={<ReplayIcon style={{color: theme.palette.warning.main}}/>}\n                      arrow\n                      TooltipClasses={{tooltip: classes.tooltip, arrow: classes.arrow}}\n                      tooltipPlacement={tooltipPlacement}\n                      tooltipTitle={\"Resubmit Task Handler\"}\n                      onClick={onReissueTaskHandler}\n                    />\n                  ):(null)}\n                  \n              </SpeedDial>\n              <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingBottom: \"10px\"}} >\n                \n                  <React.Fragment>\n                    <Pagination count={Math.ceil(totalCount / fetchLimit)} page={currentPage} variant=\"outlined\" color=\"primary\" boundaryCount={2} onChange={onChangePage} style={{margin: \"10px\"}}/>\n                    <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n                  </React.Fragment>\n                \n                  \n              </div>\n            </Grid>\n        </Grid>\n        \n      </React.Fragment>\n\t\t\t\t          \n    )\n}","import React, {useEffect} from 'react';\nimport {useSubscription, gql, useLazyQuery } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {ResponseDisplayScreenshot} from './ResponseDisplayScreenshot';\nimport {ResponseDisplayPlaintext} from './ResponseDisplayPlaintext';\nimport {ResponseDisplayTable} from './ResponseDisplayTable';\nimport {ResponseDisplayDownload} from './ResponseDisplayDownload';\nimport {ResponseDisplaySearch} from './ResponseDisplaySearch';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { IconButton } from '@material-ui/core';\n\n\nconst subResponsesQuery = gql`\nsubscription subResponsesQuery($task_id: Int!, $fetchLimit: Int!) {\n  response(where: {task_id: {_eq: $task_id}}, limit: $fetchLimit, order_by: {id: desc}) {\n    id\n    response: response_text\n  }\n}`;\nconst getResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $fetchLimit: Int!, $offset: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}, limit: $fetchLimit, offset: $offset, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst getAllResponsesLazyQuery = gql`\nquery subResponsesQuery($task_id: Int!, $search: String!) {\n  response(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}, order_by: {id: asc}) {\n    id\n    response: response_text\n  }\n  response_aggregate(where: {task_id: {_eq: $task_id}, response_text: {_ilike: $search}}){\n    aggregate{\n      count\n    }\n  }\n}`;\nconst taskScript = gql`\nquery getBrowserScriptsQuery($command_id: Int!, $operator_id: Int!, $operation_id: Int!){\n  browserscript(where: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}, operator_id: {_eq: $operator_id}}) {\n    script\n    id\n  }\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {active: {_eq: true}, command_id: {_eq: $command_id}, for_new_ui: {_eq: true}}}) {\n    browserscript {\n      script\n      id\n    }\n  }\n}\n\n`;\n\nexport const ResponseDisplay = (props) =>{\n    const theme = useTheme();\n    const [viewBrowserScript, setViewBrowserScript] = React.useState(true);\n    const [output, setOutput] = React.useState(\"\");\n    const [rawResponses, setRawResponses] = React.useState([]);\n    const [browserScriptData, setBrowserScriptData] = React.useState({});\n    const script = React.useRef();\n    const me = useReactiveVar(meState);\n    const [highestFetched, setHighestFetched] = React.useState(0);\n    const [totalFetched, setTotalFetched] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [selectAllOutput, setSelectAllOutput] = React.useState(false);\n    useSubscription(subResponsesQuery, {variables: {task_id: props.task.id, fetchLimit: props.fetchLimit}, fetchPolicy: \"network_only\",\n    onSubscriptionData: ({subscriptionData}) => {\n      if(totalFetched === 0 && subscriptionData.data.response.length === props.fetchLimit){\n        fetchMoreResponses({variables: {task_id: props.task.id, fetchLimit: props.fetchLimit, offset: 0, search: \"%_%\"}});\n        return;\n      }else if(totalFetched >= props.fetchLimit){\n        // we won't display it\n        console.log(\"got more than we can see currently\");\n        return;\n      }else \n      // we still have some room to view more, but only room for fetchLimit - totalFetched \n      if(subscriptionData.data.response.length > 0){\n        const newResponses = subscriptionData.data.response.filter( r => r.id > highestFetched);\n        const newerResponses = newResponses.map( (r) => { return {...r, response: Buffer.from(r.response,\"base64\")}});\n        newerResponses.sort( (a,b) => a.id > b.id ? 1 : -1);\n        let outputResponses = output;\n        let rawResponseArray = [...rawResponses];\n        let highestFetchedId = highestFetched;\n        let totalFetchedSoFar = totalFetched;\n        for(let i = 0; i < newerResponses.length; i++){\n          if(totalFetchedSoFar < props.fetchLimit){\n            outputResponses += newerResponses[i][\"response\"];\n            rawResponseArray.push(newerResponses[i][\"response\"]);\n            highestFetchedId = newerResponses[i][\"id\"];\n            totalFetchedSoFar += 1;\n          }else{\n            break;\n          }\n        }\n        setOutput(outputResponses);\n        setRawResponses(rawResponseArray);\n        setHighestFetched(highestFetchedId);\n        setTotalFetched(totalFetchedSoFar);\n      }\n    }\n    });\n    const filterOutput = (scriptData) => {\n      let copied = {...scriptData};\n      if(search === \"\"){\n        return scriptData;\n      }\n      if(scriptData[\"plaintext\"] !== undefined){\n        if(!scriptData[\"plaintext\"].includes(search)){\n          copied[\"plaintext\"] = \"\";\n        }\n      }\n      if(scriptData[\"table\"] !== undefined){\n        if(scriptData[\"table\"].length > 0){\n          const tableUpdates = scriptData.table.map( t => {\n            const filteredRows = t.rows.filter( r => {\n              let foundMatch = false;\n              for (const entry of Object.values(r)) {\n                if(entry[\"plaintext\"] !== undefined){\n                  if(String(entry[\"plaintext\"]).includes(search)){foundMatch = true;}\n                }\n                if(entry[\"button\"] !== undefined && entry[\"button\"][\"value\"] !== undefined){\n                  if(JSON.stringify(entry[\"button\"][\"value\"]).includes(search)){foundMatch = true;}\n                }\n              }\n              return foundMatch;\n            });\n            return {...t, rows: filteredRows};\n          });\n          copied[\"table\"] = tableUpdates;\n        }\n      }\n      return copied;\n    }\n    useEffect( () => {\n      if(script.current === undefined){\n        setViewBrowserScript(false);\n      }else{\n        setViewBrowserScript(props.viewBrowserScript);\n        if(props.viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, rawResponses);\n            setBrowserScriptData(filterOutput(res));\n          }catch(error){\n            setViewBrowserScript(false);\n          }\n            \n        }\n      }\n    }, [props.viewBrowserScript]);\n    const [fetchScripts] = useLazyQuery(taskScript, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        if(data.browserscriptoperation.length > 0){\n          try{\n            let unb64script = Buffer.from(data.browserscriptoperation[0][\"script\"], \"base64\");\n            //console.log(unb64script);\n            setViewBrowserScript(true);\n          }catch(error){\n            snackActions.error(error.toString());\n            setViewBrowserScript(false);\n          }\n          \n        }else if(data.browserscript.length > 0){\n          \n          try{\n            let unb64script = Buffer.from(data.browserscript[0][\"script\"], \"base64\");\n            let fun = Function('\"use strict\";return(' + unb64script + ')')();\n            script.current = fun;\n            setViewBrowserScript(true);\n            let res = script.current(props.task, rawResponses);\n            setBrowserScriptData(filterOutput(res));\n          }catch(error){\n            snackActions.error(error.toString());\n            setViewBrowserScript(false);\n          }\n        }else{\n          setViewBrowserScript(false);\n        }\n      },\n      onError: (data) => {\n        console.log(data);\n      }\n    });\n    const [fetchMoreResponses] = useLazyQuery(getResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + Buffer.from(cur.response, \"base64\");\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched);\n        setHighestFetched(maxID);\n        setOutput(responses);\n        const responseArray = data.response.map( r => Buffer.from(r.response, \"base64\"));\n        setRawResponses(responseArray);\n        if(viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, responseArray);\n            setBrowserScriptData(filterOutput(res));\n          }catch(error){\n            console.log(error);\n            setViewBrowserScript(false);\n          }\n          \n        }\n        setTotalFetched(data.response.length);\n        if(props.searchText !== \"\" || selectAllOutput){\n          setSelectAllOutput(false);\n          props.changeTotalCount(data.response_aggregate.aggregate.count);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch more responses: \" + data)\n      }\n    })\n    const [fetchAllResponses] = useLazyQuery(getAllResponsesLazyQuery, {\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const responses = data.response.reduce( (prev, cur) => {\n          return prev + Buffer.from(cur.response, \"base64\");\n        }, \"\");\n        const maxID = data.response.reduce( (prev, cur) => {\n          if(cur.id > prev){\n            return cur.id;\n          }\n          return prev;\n        }, highestFetched);\n        setHighestFetched(maxID);\n        setOutput(responses);\n        const responseArray = data.response.map( r => Buffer.from(r.response, \"base64\"));\n        setRawResponses(responseArray);\n        if(viewBrowserScript && script.current !== undefined){\n          try{\n            let res = script.current(props.task, responseArray);\n            setBrowserScriptData(filterOutput(res));  \n          }\n          catch(error){\n            setViewBrowserScript(false);\n            console.log(error);\n          }\n        }\n        setTotalFetched(data.response.length);\n        props.changeTotalCount(0);\n      },\n      onError: (data) => {\n\n      }\n    })\n    useEffect( () => {\n      if(props.command_id !== undefined){\n        fetchScripts({variables: {command_id: props.command_id, operator_id: me.user.user_id, operation_id: me.user.current_operation_id}});\n      }\n    }, [props.command_id]);\n    useEffect( () => {\n      if(script.current !== undefined){\n        try{\n          let res = script.current(props.task, rawResponses);\n          setBrowserScriptData(filterOutput(res));\n        }catch(error){\n          setViewBrowserScript(false);\n          console.log(error);\n        }\n        \n      }\n    }, [rawResponses]);\n    useEffect( () => {\n      if(props.searchText === undefined || props.searchText === \"\"){\n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: props.fetchLimit * (props.currentPage - 1),\n          search: \"%_%\"\n        }})\n      }else{  \n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: props.fetchLimit * (props.currentPage - 1),\n          search: \"%\" +  props.searchText + \"%\"\n        }})\n      }\n      \n    }, [props.currentPage]);\n    useEffect( () => {\n      if(props.searchText === undefined || props.searchText === \"\"){\n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: 0,\n          search: \"%_%\"\n        }})\n      }else{  \n        fetchMoreResponses({variables: {task_id: props.task.id, \n          fetchLimit: props.fetchLimit, \n          offset: 0,\n          search: \"%\" + props.searchText + \"%\"\n        }})\n      }\n    }, [props.searchText]);\n    useEffect( () => {\n      if(props.selectAllOutput){\n        setSelectAllOutput(true);\n        fetchAllResponses({variables: {task_id: props.task.id, search: \"%\" + props.searchText + \"%\"}})\n      }else{\n        setHighestFetched(0);\n        setTotalFetched(0);\n        fetchMoreResponses({variables: {task_id: props.task.id, fetchLimit: props.fetchLimit, offset: 0, search: \"%\" + props.searchText + \"%\"}})\n      }\n    }, [props.selectAllOutput]);\n    const onSubmitSearch = React.useCallback( () => {\n      props.onSubmitSearch(search)\n    }, [search]);\n\n  return (\n    <React.Fragment>\n      {props.searchOutput &&\n        <MythicTextField value={search} autoFocus onEnter={onSubmitSearch} onChange={(n,v,e) => setSearch(v)} placeholder=\"Search Output of This Task\" name=\"Search...\"\n          InputProps={{\n            endAdornment: \n            <React.Fragment>\n                <Tooltip title=\"Search\">\n                    <IconButton onClick={onSubmitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                </Tooltip>\n            </React.Fragment>,\n            style: {padding: 0}\n        }}\n        ></MythicTextField>\n      }\n      <div style={{overflow: \"auto\", maxWidth: \"100%\", width: \"100%\"}}>\n        {viewBrowserScript && browserScriptData ? (\n          <React.Fragment>\n              {browserScriptData?.screenshot?.map( (scr, index) => (\n                  <ResponseDisplayScreenshot key={\"screenshot\" + index + 'fortask' + props.task.id} {...scr} />\n                )) || null\n              }\n              {browserScriptData?.plaintext &&\n                <ResponseDisplayPlaintext plaintext={browserScriptData[\"plaintext\"]} />\n              }\n              {browserScriptData?.table?.map( (table, index) => (\n                  <ResponseDisplayTable callback_id={props.task.callback_id} table={table} key={\"tablefortask\" + props.task.id + \"table\" + index} />\n                )) || null\n              }\n              {browserScriptData?.download?.map( (dl, index) => (\n                  <ResponseDisplayDownload download={dl} key={\"download\" + index + \"fortask\" + props.task.id} />\n                )) || null\n              }\n              {browserScriptData?.search?.map( (s, index) => (\n                  <ResponseDisplaySearch search={s} key={\"searchlink\" + index + \"fortask\" + props.task.id} />\n              )) || null\n              }\n          </React.Fragment>\n        ) : (\n          <ResponseDisplayPlaintext plaintext={output} />\n        )}\n      </div>\n  </React.Fragment>\n  )\n      \n}\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport {ResponseDisplayScreenshotModal} from './ResponseDisplayScreenshotModal';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplayScreenshot = (props) =>{\n  const [openScreenshot, setOpenScreenshot] = React.useState(false);\n  const classes = useStyles();\n  const now = (new Date()).toUTCString();\n  const clickOpenScreenshot = () => {\n    setOpenScreenshot(true);\n  }\n\n  return (\n    <React.Fragment>\n      {openScreenshot &&\n      <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n          onClose={()=>{setOpenScreenshot(false);}} \n          innerDialog={<ResponseDisplayScreenshotModal href={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id + \"?time=\" + now} onClose={()=>{setOpenScreenshot(false);}} />}\n      />\n      }\n      <pre style={{display: \"inline-block\"}}>\n        {props?.plaintext || \"\"}\n      </pre>\n      <Tooltip title={props?.hoverText || \"View Screenshot\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Button color=\"primary\" variant={props.variant ? props.variant : \"contained\"} onClick={clickOpenScreenshot} style={{marginBottom: \"10px\"}}>{props.name}</Button>\n      </Tooltip>\n    </React.Fragment>\n  )   \n}","import React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplayDownload = (props) =>{\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <pre style={{display: \"inline-block\"}}>\n        {props.download?.plaintext || \"\"}\n      </pre>\n      \n      <Tooltip title={props?.dowload?.hoverText || \"Download payload\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Button variant={props.download?.variant || \"contained\"} component=\"a\" target=\"_blank\" color=\"primary\" href={\"/api/v1.4/files/download/\" + props.download.agent_file_id} download\n          startIcon={<GetAppIcon />}>\n            {props.download?.name || \"\"}\n        </Button>\n      </Tooltip><br/>\n    </React.Fragment>\n  )   \n}","import React from 'react';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {  Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.contrast,\n    color: theme.palette.text.contrast,\n    boxShadow: theme.shadows[1],\n    fontSize: 13\n  },\n  arrow: {\n    color: theme.palette.background.contrast,\n  }\n}));\n\nexport const ResponseDisplaySearch = (props) =>{\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\"}}>\n        {props.search?.plaintext || \"\"}\n      </pre>\n      \n      <Tooltip title={props.search?.hoverText || \"View on Search Page\"}  arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n        <Link component=\"a\" target=\"_blank\" href={window.location.origin + \"/new/search/?\" + props.search.search}>\n            {props.search?.name || \"\"}\n        </Link>\n      </Tooltip><br/>\n    </React.Fragment>\n  )   \n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($task_id: Int!, $comment: String) {\n  update_task_by_pk(pk_columns: {id: $task_id}, _set: {comment: $comment}) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    comment\n    commentOperator {\n      username\n    }\n    id\n  }\n}\n`;\n\nexport function TaskCommentDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getCommentQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(data.task_by_pk.comment)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateComment({variables: {task_id: props.task_id, comment: comment}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Comment</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useReactiveVar, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { meState } from '../../../cache';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport NoteAddIcon from '@material-ui/icons/NoteAdd';\nimport { IconButton } from '@material-ui/core';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst addTaskTagMutation = gql`\nmutation addTaskTag ($task_id: Int!, $tag: String!) {\n  insert_tasktag_one(object: {task_id: $task_id, tag: $tag}){\n    id\n  }\n}\n`;\nconst removeTaskTagMutation = gql`\nmutation removeTaskTag($tasktag_id: Int!){\n  delete_tasktag_by_pk(id: $tasktag_id){\n    id\n  }\n}\n`;\nconst getTaskTagsQuery = gql`\nquery getTaskTags ($operation_id: Int!) {\n  tasktag(where: {operation_id: {_eq: $operation_id}}) {\n    id\n    tag\n    task_id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nfunction not(a, b) {\n  return a.filter((value) => b.indexOf(value) === -1);\n}\n\nfunction intersection(a, b) {\n  return a.filter((value) => b.indexOf(value) !== -1);\n}\n  \nexport function TaskTagDialog(props) {\n    const [newTag, setNewTag] = useState(\"\");\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getTaskTagsQuery, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n          const currentTags = data.tasktag.reduce( (prev, cur) => {\n            if(cur.task_id === props.task_id){\n              return [...prev, cur];\n            }else{\n              return [...prev];\n            }\n          }, []);\n          const allTags = data.tasktag.reduce( (prev, cur) => {\n            if(prev.find( element => element.tag === cur.tag) || currentTags.find( element => element.tag === cur.tag)){\n              return [...prev];\n            }else{\n              return [...prev, cur];\n            }\n          }, []);\n          \n          setLeft(allTags);\n          setRight(currentTags);\n          setOriginalTags([...currentTags]);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [addTaskTag] = useMutation(addTaskTagMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [removeTaskTag] = useMutation(removeTaskTagMutation, {\n      update: (cache, {data}) => {\n          //console.log(data);\n      }\n  });\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [originalTags, setOriginalTags] = React.useState([]);\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n\n    const handleToggle = (value) => () => {\n      const currentIndex = checked.indexOf(value);\n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((value) => {\n              const labelId = `transfer-list-item-${value.id}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value.id} role=\"listitem\" button onClick={handleToggle(value)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={checked.indexOf(value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value.tag} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onChange = (name, value, error) => {\n        setNewTag(value);\n    }\n    const addNewTag = () => {\n      if(!right.find(element => element.tag === newTag) && !left.find(element => element.tag === newTag)){\n        if(newTag !== \"\"){\n          setRight([...right, {tag: newTag, id: 0, task_id: 0}]);\n        }\n      }\n      setNewTag(\"\");\n    }\n    const setFinalTags = () => {\n\n      originalTags.forEach( (tag) => {\n        // go through the original tags and see if they exist in the right, if so, move on\n        // if the tag doesn't exist, we delete it\n        if(!right.find(element => element.id === tag.id)){\n          removeTaskTag({variables: {tasktag_id: tag.id}});\n        }\n      });\n      right.forEach( (tag) => {\n        // go through the right tags and see if they existed in the original, if so, move on\n        // if the tag doesn't exist, we add it\n        if(!originalTags.find(element => element.id === tag.id)){\n          addTaskTag({variables: {task_id: props.task_id, tag: tag.tag}});\n        }\n      });\n      if(newTag !== \"\"){\n        addTaskTag({variables: {task_id: props.task_id, tag: newTag}});\n      }\n      snackActions.success(\"Updated tags\");\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Task Tags</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(\"Unused Tags In Operation\", left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                \n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                \n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(\"Applied Tags To Task\", right)}</Grid>\n        </Grid>\n        <MythicTextField autoFocus multiline={false} name=\"Add New Tag...\" onChange={onChange} value={newTag} style={{display:\"inline-block\"}} \n          InputProps={{\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton style={{color: muiTheme.palette.success.main}} variant=\"contained\" onClick={addNewTag}><NoteAddIcon/></IconButton>\n                    </React.Fragment>\n                }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { useSnackbar } from 'notistack';\n\nconst updateOpsecRequestMutation = gql`\nmutation requestOpsecBypass ($task_id: Int!) {\n    requestOpsecBypass(task_id: $task_id){\n        status\n        error\n    }\n}\n`;\nconst getOpsecQuery = gql`\nquery getOPSECQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    opsec_pre_blocked\n    opsec_pre_message\n    opsec_pre_bypassed\n    opsec_pre_bypass_user{\n        username\n        id\n    }\n    opsec_post_blocked\n    opsec_pre_bypass_role\n    opsec_post_message\n    opsec_post_bypassed\n    opsec_post_bypass_role\n    opsec_post_bypass_user{\n        username\n        id\n    }\n    id\n  }\n}\n`;\n\nexport function TaskOpsecDialog(props) {\n    const [opsecMessage, setOpsecMessage] = useState(\"\");\n    const [opsecData, setOpsecData] = useState({});\n    const { enqueueSnackbar } = useSnackbar();\n    const { loading, error } = useQuery(getOpsecQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let message = \"OPSEC PreCheck Message\";\n            console.log(data);\n            if(data.task_by_pk.opsec_pre_bypass_user !== null){\n                message += \" (bypassed by \" + data.task_by_pk.opsec_pre_bypass_user.username + \")\";\n            }\n            message += \":\\n\\n\" + data.task_by_pk.opsec_pre_message + \"\\n\";\n            if(data.task_by_pk.opsec_post_blocked){\n                message += \"\\nOPSEC PostCheck Message\";\n                if(data.task_by_pk.opsec_post_bypass_user !== null){\n                    message += \" (bypassed by \" + data.task_by_pk.opsec_post_bypass_user.username + \")\";\n                }\n                message += \":\\n\\n\" + data.task_by_pk.opsec_post_message + \"\\n\";\n                \n            }\n            setOpsecData(data.task_by_pk);\n            setOpsecMessage(message);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateOpsecRequest] = useMutation(updateOpsecRequestMutation, {\n        update: (cache, {data}) => {\n            if(data.requestOpsecBypass.status === \"success\"){\n                enqueueSnackbar(\"Bypass processed successfully\", {variant: \"success\"});\n            }else{\n                enqueueSnackbar(data.requestOpsecBypass.error, {variant: \"warning\"});\n            }\n        }\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onRequestSubmit = () => {\n       console.log(props.task_id);\n        updateOpsecRequest({variables: {task_id: props.task_id}});\n        props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Request OPSEC Bypass</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={opsecMessage} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          {(opsecData.opsec_pre_blocked === true && !opsecData.opsec_pre_bypassed) || (opsecData.opsec_post_blocked === true && !opsecData.opsec_post_bypassed) ?\n          (\n            <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Submit Bypass Request</Button>\n          ) : (null) }\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    display_params\n    original_params\n    params\n    tasking_location\n    parameter_group_name\n    id\n  }\n}\n`;\n\nexport function TaskViewParametersDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            let workingComment = \"Original Parameters:\\n\" + data.task_by_pk.original_params;\n            workingComment += \"\\n\\nAgent Parameters:\\n\" + data.task_by_pk.params;\n            workingComment += \"\\n\\nDisplay Parameters:\\n\" + data.task_by_pk.display_params;\n            workingComment += \"\\n\\nTasking Location:\\n\" + data.task_by_pk.tasking_location;\n            workingComment += \"\\n\\nParameter Group:\\n\" + data.task_by_pk.parameter_group_name;\n            setComment(workingComment);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getParametersQuery = gql`\nquery getParametersQuery ($task_id: Int!) {\n  task_by_pk(id: $task_id) {\n    stdout\n    stderr\n    id\n  }\n}\n`;\n\nexport function TaskViewStdoutStderrDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    const { loading, error } = useQuery(getParametersQuery, {\n        variables: {task_id: props.task_id},\n        onCompleted: data => {\n            setComment(\"[STDOUT]:\\n\" + data.task_by_pk.stdout + \"\\n\\[STDERR]:\\n\" + data.task_by_pk.stderr);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">View Task Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} value={comment} onChange={() => {}}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Tooltip } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    tooltip: {\n      backgroundColor: theme.palette.background.contrast,\n      color: theme.palette.text.contrast,\n      boxShadow: theme.shadows[1],\n      fontSize: 13\n    },\n    arrow: {\n      color: theme.palette.background.contrast,\n    }\n  }));\n\nexport function MythicStyledTooltip(props){\n    const { children, title, ...other} = props;\n    const classes = useStyles();\n    return (\n        <Tooltip title={title} arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}} {...other}>\n            {<span style={{display: \"inline-block\"}}>{children}</span>}\n        </Tooltip>\n    );\n}\n","import React, { useEffect } from 'react';\nimport {gql, useMutation, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\n\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $ui_feature: String!) {\n    callback_by_pk(id: $callback_id){\n        operation_id\n        loadedcommands(where: {command: {supported_ui_features: {_ilike: $ui_feature}}}) {\n            id\n            command {\n              cmd\n              help_cmd\n              description\n              id\n              needs_admin\n              payload_type_id\n              attributes\n              commandparameters {\n                id\n                type \n              }\n              supported_ui_features\n            }\n        }\n        callbacktokens(where: {deleted: {_eq: false}}) {\n            token {\n              TokenId\n              id\n              User\n              description\n            }\n            id\n        }\n    }\n}\n`;\n\nexport const TaskFromUIButton = ({callback_id, ui_feature, parameters, onTasked}) =>{\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState([]);\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [callbackTokenOptions, setCallbackTokenOptions] = React.useState([]);\n    const [selectedCallbackToken, setSelectedCallbackToken] = React.useState({});\n    const [openCallbackTokenSelectDialog, setOpenCallbackTokenSelectDialog] = React.useState(false);\n    const [taskingVariables, setTaskingVariables] = React.useState({});\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + callback_id);\n            }\n            onTasked();\n        },\n        onError: data => {\n            console.error(data);\n            onTasked();\n        }\n    });\n    const {data: callbackData} = useQuery(getLoadedCommandsQuery, {\n        variables: {callback_id: callback_id, ui_feature: \"%\" + ui_feature + \"%\"},\n        onCompleted: (data) => {\n            const availableCommands = data.callback_by_pk.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const availableTokens = data.callback_by_pk.callbacktokens.reduce( (prev, cur) => {\n                return [...prev, {...cur.token, \"display\": cur.token.User === null ? cur.token.TokenId + \" - \" + cur.token.description : cur.token.User + \" - \" + cur.token.description}]\n            }, []);\n            setCallbackTokenOptions(availableTokens);\n            setFileBrowserCommands(availableCommands);\n            if(availableCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support the \" + ui_feature + \" feature\");\n            }else if(availableCommands.length === 1){\n                setSelectedCommand({...availableCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const onSubmitTasking = ({variables}) => {\n        if(callbackTokenOptions.length > 0){\n            setOpenCallbackTokenSelectDialog(true);\n            setTaskingVariables(variables);\n        }else{\n            createTask({variables})\n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        onSubmitTasking({variables: {callback_id: callback_id, command: cmd, params: parameters, files, tasking_location: \"modal\"}});\n    }\n    const onSubmitSelectedToken = (token) => {\n        setSelectedCallbackToken(token);\n    }\n    useEffect( () => {\n        if(selectedCallbackToken === \"\"){\n            // we selected the default token to use\n            createTask({variables: taskingVariables})\n        }\n        if(selectedCallbackToken.TokenId){\n            createTask({variables: {...taskingVariables, token_id: selectedCallbackToken.TokenId}})\n        }else{\n            return;\n        }\n        \n    }, [selectedCallbackToken])\n    useEffect( () => {\n        if(selectedCommand.commandparameters === undefined){\n            return;\n        }\n        if(selectedCommand.commandparameters.length > 0){\n            if(parameters === undefined || parameters === null){\n                setOpenParametersDialog(true);\n            }else{\n                if(typeof(parameters) === \"string\"){\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters}});\n                }else{\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: JSON.stringify(parameters), tasking_location: \"browserscript\"}});\n                }\n                \n            }\n        }else{\n            if(parameters === undefined || parameters === null){\n                onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: \"\"}});\n            }else{\n                if(typeof(parameters) === \"string\"){\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: parameters}});\n                }else{\n                    onSubmitTasking({variables: {callback_id: callback_id, command: selectedCommand.cmd, params: JSON.stringify(parameters), tasking_location: \"browserscript\"}});\n                }\n            }\n            \n        }\n    }, [selectedCommand])\n    return (\n        <div>\n            {openSelectCommandDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                        onClose={()=>{setOpenSelectCommandDialog(false);onTasked();}} \n                        innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                            onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                            action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                    />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);onTasked();}} \n                    innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={callback_id} payloadtype_id={callbackData.callback_by_pk.payload.payloadtype.id}\n                        operation_id={callbackData.callback_by_pk.operation_id} \n                        onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            {openCallbackTokenSelectDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openCallbackTokenSelectDialog}\n                    onClose={()=>{setOpenCallbackTokenSelectDialog(false);onTasked();}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenCallbackTokenSelectDialog(false);onTasked();}}\n                                        onSubmit={onSubmitSelectedToken} dontCloseOnSubmit={true} options={callbackTokenOptions} title={\"Select Token\"} \n                                        action={\"select\"} identifier={\"id\"} display={\"display\"}/>}\n                />\n            }\n        </div>\n    )\n}\n","import React, {useEffect, useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport { MythicViewJSONAsTableDialog, MythicDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport 'react-virtualized/styles.css';\nimport {TaskFromUIButton} from './TaskFromUIButton';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport IconButton from '@material-ui/core/IconButton';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {MythicStyledTooltip} from '../../MythicComponents/MythicStyledTooltip';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport MythicResizableGrid from '../../MythicComponents/MythicResizableGrid';\nimport {faList, faTrashAlt, faSkullCrossbones, faCamera, faSyringe, faFolder, faFolderOpen, faFileArchive, faCog, faFileWord, faFileExcel, faFilePowerpoint, faFilePdf, faDatabase, faKey, faFileCode, faDownload, faUpload, faFileImage, faCopy, faBoxOpen, faFileAlt } from '@fortawesome/free-solid-svg-icons';\n\nconst onCopyToClipboard = (data) => {\n  let result = copyStringToClipboard(data);\n  if(result){\n    snackActions.success(\"Copied text!\");\n  }else{\n    snackActions.error(\"Failed to copy text\");\n  }\n}\nconst getIconName = (iconName) => {\n  switch(iconName.toLowerCase()){\n    case \"openfolder\":\n    case \"folder\":\n      return faFolderOpen;\n    case \"closedfolder\":\n      return faFolder;\n    case \"archive\":\n    case \"zip\":\n      return faFileArchive;\n    case \"diskimage\":\n      return faBoxOpen;\n    case \"executable\":\n      return faCog;\n    case \"word\":\n      return faFileWord;\n    case \"excel\":\n      return faFileExcel;\n    case \"powerpoint\":\n      return faFilePowerpoint;\n    case \"pdf\":\n    case \"adobe\":\n      return faFilePdf;\n    case \"database\":\n      return faDatabase;\n    case \"key\":\n      return faKey;\n    case \"code\":\n    case \"source\":\n      return faFileCode;\n    case \"download\":\n      return faDownload;\n    case \"upload\":\n      return faUpload;\n    case \"png\":\n    case \"jpg\":\n    case \"image\":\n      return faFileImage;\n    case \"list\":\n      return faList;\n    case \"delete\":\n      return faTrashAlt;\n    case \"inject\":\n      return faSyringe;\n    case \"kill\":\n      return faSkullCrossbones;\n    case \"camera\":\n      return faCamera;\n    default:\n      return faFileAlt;\n  }\n}\nconst ResponseDisplayTableStringCell = ({cellData, rowData}) => {\n  return (\n    <div style={{...rowData?.rowStyle || null, ...cellData?.cellStyle || null}}>\n      {cellData?.copyIcon? \n        <MythicStyledTooltip title={\"Copy to clipboard\"}>\n            <IconButton onClick={() => onCopyToClipboard(cellData[\"plaintext\"])} size=\"small\">\n                <FontAwesomeIcon icon={faCopy} />\n            </IconButton>\n        </MythicStyledTooltip> : null}\n      {cellData?.startIcon? \n        <MythicStyledTooltip title={cellData?.startIconHoverText || \"\"} >\n            <FontAwesomeIcon icon={getIconName(cellData?.startIcon)} style={{marginRight: \"5px\", color: cellData?.startIconColor  || \"\"}}/>\n        </MythicStyledTooltip>\n         : null\n      }\n      {cellData?.plaintextHoverText? (\n        <MythicStyledTooltip title={cellData.plaintextHoverText}>\n          <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext || \" \"}\n          </pre>\n          \n        </MythicStyledTooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {cellData?.plaintext || \" \"}\n          </pre>\n      )}\n      {cellData?.endIcon? \n       <MythicStyledTooltip title={cellData?.endIconHoverText || \"\"}>\n          <FontAwesomeIcon icon={getIconName(cellData?.endIcon)} style={{color: cellData?.endIconColor  || \"\"}}/>\n        </MythicStyledTooltip>: null\n      }\n    </div>\n          \n  )\n}\nconst getStringSize = ({cellData}) => {\n  try{\n      // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n      let bytes = parseInt(cellData[\"plaintext\"]);\n      if (cellData[\"plaintext\"] === ''){\n        return \"\"\n      }\n      if (bytes === 0){\n        return \"0 Bytes\";\n      };\n      const decimals = 2;\n      const k = 1024;\n      const dm = decimals < 0 ? 0 : decimals;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      const size = parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n      return size;\n  }catch(error){\n    return cellData?.plaintext || \"\"\n    \n  }\n}\nconst ResponseDisplayTableSizeCell = ({cellData, rowData}) => {\n  return (\n    <div style={{...rowData?.rowStyle || null, ...cellData?.cellStyle || null}}>\n        {cellData?.plaintextHoverText? (\n        <MythicStyledTooltip title={cellData.plaintextHoverText} >\n          <pre style={{display: \"inline-block\"}}>\n            {getStringSize({cellData})}\n          </pre>\n          \n        </MythicStyledTooltip>\n      ) : (\n        <pre style={{display: \"inline-block\"}}>\n            {getStringSize({cellData})}\n          </pre>\n      )}\n     </div>\n          \n  )\n}\nconst ResponseDisplayTableActionCell = ({cellData, callback_id, rowData}) => {\n  const theme = useTheme();\n  const [openButton, setOpenButton] = React.useState(false);\n  const [openTaskingButton, setOpenTaskingButton] = React.useState(false);\n  const dropdownAnchorRef = useRef(null);\n  const [openDropdownButton, setOpenDropdownButton] = React.useState(false);\n  const [taskingData, setTaskingData] = React.useState({});\n  const handleClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpenDropdownButton(false);\n  };\n  const handleMenuItemClick = (event, index) => {\n    switch(cellData.button.value[index].type.toLowerCase()){\n      case \"task\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenTaskingButton(true);\n        break;\n      case \"dictionary\":\n        setTaskingData(cellData.button.value[index]);\n        setOpenButton(true);\n        break;\n    }\n    setOpenDropdownButton(false);\n  };\n  const finishedTasking = () => {\n    setOpenTaskingButton(false);\n    setTaskingData({});\n  }\n  const finishedViewingData = () => {\n    setOpenButton(false);\n    setTaskingData({});\n  }\n  const getButtonObject = () => {\n    switch(cellData.button.type.toLowerCase()){\n      case \"dictionary\":\n        return (\n          <React.Fragment>\n            <MythicStyledTooltip title={cellData?.button?.hoverText || \"Display Data\"} >\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" \n                onClick={() => setOpenButton(true)} disabled={cellData?.button?.disabled || false}\n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n                >{cellData?.button?.name || \" \"}</Button>\n            </MythicStyledTooltip>\n            {openButton &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openButton} \n                    onClose={()=>{setOpenButton(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title={cellData?.button?.title || \"Title Here\"} leftColumn={cellData?.button?.leftColumnTitle || \"Left Column\"} \n                    rightColumn={cellData?.button?.rightColumnTitle || \"Right Column\"} value={cellData?.button?.value || {}} onClose={()=>{setOpenButton(false);}} />}\n                />\n              }\n            </React.Fragment>\n        )\n      case \"task\":\n        return (\n          <React.Fragment>\n            <MythicStyledTooltip title={cellData?.button?.hoverText || \"Issues Task to Agent\"}>\n              <Button size=\"small\" onClick={() => setOpenTaskingButton(true)} disabled={cellData?.button?.disabled || false} variant=\"contained\" color=\"secondary\" \n                startIcon={cellData?.button?.startIcon ? <FontAwesomeIcon icon={getIconName(cellData?.button?.startIcon)} style={{color: cellData?.button?.startIconColor  || \"\"}}/> : null}\n              >{cellData?.button?.name || \" \"}</Button>\n            </MythicStyledTooltip>\n            {openTaskingButton && \n              <TaskFromUIButton ui_feature={cellData?.button?.ui_feature || \" \"} \n                callback_id={callback_id} \n                parameters={cellData?.button?.parameters || \"\"}\n                onTasked={() => setOpenTaskingButton(false)}/>\n            }\n          </React.Fragment>\n        )\n      case \"menu\":\n        return (\n          <React.Fragment>\n            {openTaskingButton && \n              <TaskFromUIButton ui_feature={taskingData.ui_feature} \n                callback_id={callback_id} \n                parameters={taskingData.parameters}\n                onTasked={finishedTasking}/>\n            }\n            {openButton && \n              <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openButton} \n                onClose={finishedViewingData} \n                innerDialog={<MythicViewJSONAsTableDialog title={taskingData.title} leftColumn={taskingData.leftColumnTitle} \n                rightColumn={taskingData.rightColumnTitle} value={taskingData.value} onClose={finishedViewingData} />}\n            />\n            }\n            <Button ref={dropdownAnchorRef} size=\"small\" onClick={()=>{setOpenDropdownButton(true);}} color=\"primary\" variant=\"contained\">{cellData.button.name}</Button>\n                <Popper open={openDropdownButton} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {cellData.button.value.map((option, index) => (\n                              <MenuItem\n                                key={option.name + index}\n                                disabled={option.disabled}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                <MythicStyledTooltip title={option?.hoverText || (option.type === \"task\" ? \"Task an Agent\" : \"Display Data\")}>\n                                    {option?.startIcon ? <FontAwesomeIcon icon={getIconName(option?.startIcon)} style={{color: option?.startIconColor  || \"\", marginRight: \"5px\"}}/> : null}\n                                    {option.name}\n                                </MythicStyledTooltip>\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n          </React.Fragment>\n        )\n    }\n  }\n  return (\n    <div style={{...rowData?.rowStyle || null, ...cellData?.cellStyle || null}}>\n      {cellData?.plaintext ? cellData.plaintext : null}\n      {cellData?.button ? (getButtonObject()) : (null)}\n    </div>\n  )\n}\n\nexport const ResponseDisplayTable = ({table, callback_id}) =>{\n  const theme = useTheme();\n  const [allData, setAllData] = React.useState([]);\n  const [sortData, setSortData] = React.useState({sortKey: null, sortType: null, sortDirection: \"ASC\"})\n  const rowStyle =  ({index}) => {\n    if(index < 0){\n      return {backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main};\n    }\n    return allData.current[index][\"rowStyle\"] || {};\n  };\n  const sortedData = React.useMemo(() => {\n    if (sortData.sortKey === null || sortData.sortType === null) {\n      return allData\n    }\n    const tmpData = [...allData];\n    if(sortData.sortType === \"number\" || sortData.sortType === \"size\"){\n      tmpData.sort((a, b) => (parseInt(a[sortData.sortKey][\"plaintext\"]) > parseInt(b[sortData.sortKey][\"plaintext\"]) ? 1 : -1));\n    }else if(sortData.sortType === \"date\"){\n      tmpData.sort((a,b) => ( (new Date(a[sortData.sortKey][\"plaintext\"])) > (new Date(b[sortData.sortKey][\"plaintext\"])) ? 1: -1));\n    }else{\n      tmpData.sort( (a, b) => {\n        if(a[sortData.sortKey][\"plaintext\"] === undefined){\n          return -1;\n        }else if(b[sortData.sortKey][\"plaintext\"] === undefined){\n          return 1;\n        }\n        console.log(a[sortData.sortKey], sortData.sortType, sortData.sortKey)\n        return a[sortData.sortKey][\"plaintext\"].toLowerCase() > b[sortData.sortKey][\"plaintext\"].toLowerCase() ? 1 : -1\n      });\n    }\n    if(sortData.sortDirection === \"DESC\"){\n      tmpData.reverse();\n    }\n    return tmpData;\n  }, [allData, sortData]);\n  const onClickHeader = (e, columnIndex) => {\n    const column = table.headers[columnIndex];\n    console.log(column)\n    if(column.disableSort){\n        return;\n    }\n    if (!column.plaintext) {\n        setSortData({sortKey: null, sortType: null, sortDirection: \"ASC\"});\n    }\n    if (sortData.sortKey === column.plaintext) {\n        if (sortData.sortDirection === 'ASC') {\n            setSortData({sortKey: column.plaintext, sortType: column.type, sortDirection: \"DESC\"});\n        } else {\n            setSortData({sortKey: column.plaintext, sortType: column.type, sortDirection: \"ASC\"});\n        }\n    } else {\n        setSortData({sortKey: column.plaintext, sortType: column.type, sortDirection: \"ASC\"});\n    }\n  };\n  const gridData = React.useMemo(\n    () => {\n        return sortedData.map((row) => {\n          let rowData = [];\n          for(let i = 0; i < table.headers.length; i++){\n            switch(table.headers[i].type){\n              case \"string\":\n                rowData.push(\n                  <ResponseDisplayTableStringCell cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n              case \"size\":\n                rowData.push(\n                  <ResponseDisplayTableSizeCell cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n              case \"button\":\n                rowData.push(\n                  <ResponseDisplayTableActionCell callback_id={callback_id} cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n              default:\n                rowData.push(\n                  <ResponseDisplayTableStringCell cellData={row[table.headers[i]['plaintext']]} rowData={row}/>\n                )\n                break;\n            }\n          }\n          return [...rowData];\n        });\n    }, [sortedData]\n  );\n  \n  useEffect( () => {\n    setAllData([...table.rows]);\n  }, [table.rows])\n  const sortColumn = table.headers.findIndex((column) => column.plaintext === sortData.sortKey);\n  return (\n      <React.Fragment>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  {table.title}\n              </Typography>\n          </Paper>\n          <div style={{height: \"calc(45vh)\", width: \"100%\"}}>\n            <MythicResizableGrid\n                  columns={table.headers}\n                  sortIndicatorIndex={sortColumn}\n                  sortDirection={sortData.sortDirection}\n                  items={gridData}\n                  widthMeasureKey={\"plaintext\"}\n                  headerNameKey={\"plaintext\"}\n                  rowHeight={35}\n                  onClickHeader={onClickHeader}\n              />\n            \n          </div>\n      </React.Fragment>\n    \n  )   \n}","import {useEffect, useRef } from 'react';\n\nexport function toLocalTime(date, view_utc_time) {\n    try {\n        if(date === null){\n            return \"N/A\";\n        }\n        let init_date = new Date(date);\n        if (view_utc_time) {\n            return date + \" UTC\";\n        }\n        return init_date.toDateString() + \" \" + init_date.toTimeString().substring(0, 8);\n    } catch (error) {\n        console.log(\"warning\", \"Failed to get local time converted: \" + error.toString());\n    }\n\n}\n\nexport function getTimeDifference(checkin_time) {\n    let date = new Date();\n    let now = date.getTime() + date.getTimezoneOffset() * 60000;\n    let millisec = Math.abs(now - (new Date(checkin_time).getTime()));\n    let seconds = Math.trunc(((millisec / 1000)) % 60);\n    let minutes = Math.trunc(((millisec / (1000 * 60))) % 60);\n    let hours = Math.trunc(((millisec / (1000 * 60 * 60))) % 24);\n    let days = Math.trunc(((millisec / (1000 * 60 * 60 * 24))) % 365);\n    let output = \"\";\n    if(days !== 0){ output += days + \"d\";}\n    if(hours !== 0){ output += hours + \"h\";}\n    if(minutes !== 0){ output += minutes + \"m\";}\n    output += seconds + \"s\";\n    return output;\n}\n//https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n\n    let id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 829;","export default __webpack_public_path__ + \"static/media/mythic.7189479f.svg\";","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport logo from '../../../assets/mythic.svg';\nimport { Redirect } from 'react-router-dom';\nimport { meState, successfulLogin, FailedRefresh } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {restartWebsockets, isJWTValid} from '../../../index';\nimport { snackActions } from '../../utilities/Snackbar';\n\nexport function LoginForm(props){\n    const me = useReactiveVar(meState);\n    const [username, setUsername] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    useEffect( () => {\n        if(!isJWTValid()){\n            console.log(\"calling FailedRefresh on the login page to remove old data\");\n            FailedRefresh();\n        }else{\n            //console.log(meState());\n        }\n    }, [])\n    const submit = e => {\n        e.preventDefault();\n        if( username === \"\" || password === \"\"){\n            snackActions.warning(\"Username and Password required\");\n            return;\n        }\n        const requestOptions = {\n            method: \"POST\",\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({username, password})\n        };\n        fetch('/auth', requestOptions).then((response) => {\n            response.json().then(data => {\n                console.log(data)\n                if(\"access_token\" in data){\n                    successfulLogin(data);\n                    restartWebsockets();\n                }else{\n                    snackActions.warning(\"Invalid Username or Password\");\n                    console.log(\"Error\", data);\n                }\n            }).catch(error => {\n                snackActions.warning(\"Error getting JSON from server\");\n                console.log(\"Error trying to get json response\", error.toString());\n            });\n        }).catch(error => {\n            snackActions.warning(\"Error talking to server\");\n            console.log(\"There was an error!\", error.toString());\n        });\n    }\n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordChange = (name, value, error) => {\n        setPassword(value);\n    }\n    const redirectPath = () => {\n        const locationState = props.location.state;\n        return locationState && locationState.from ? locationState.from.pathname : '/new/';\n    }\n    return (\n        <div style={{justifyContent: \"center\", display: \"flex\"}}>\n        { \n            me.loggedIn ?\n                (\n                    <Redirect to={redirectPath()}/>\n                )\n               : (\n                    <div>\n                    <img src={logo} height=\"400px\" alt=\"Mythic logo\"/>\n                        <form onSubmit={submit}>\n                            <MythicTextField name='username' value={username} onChange={onUsernameChange} width={30} />\n                            <MythicTextField name='password' type=\"password\" value={password} onChange={onPasswordChange} width={30} />\n                            <Button type=\"submit\" color=\"primary\" onClick={submit} variant=\"contained\" style={{marginRight: \"10px\"}}>Login</Button>\n                        </form>\n                    </div>\n                )\n        }\n        </div>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nexport function APITokenRow(props){\n    \n    return (\n            <TableRow key={\"apitokenRow\" + props.id}>\n                <TableCell><Button size=\"small\" onClick={() => {props.onDeleteAPIToken(props.id)}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button></TableCell>\n                <TableCell>{props.token_value}</TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function SettingsOperatorDialog(props) {\n    const [username, setUsername] = React.useState(props.username ? props.username : \"\");\n    const [passwordOld, setPasswordOld] = React.useState(\"\");\n    const [passwordNew, setPasswordNew] = React.useState(\"\");\n    \n    const onUsernameChange = (name, value, error) => {\n        setUsername(value);\n    }\n    const onPasswordOldChange = (name, value, error) => {\n        setPasswordOld(value);\n    }\n    const onPasswordNewChange = (name, value, error) => {\n        setPasswordNew(value);\n    }\n    const onAccept = () =>{\n        props.onAccept(props.id, username, passwordOld, passwordNew);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            Use this dialog to update some information about an operator.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            placeholder={props.username}\n            value={username}\n            onChange={onUsernameChange}\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordOld\"\n            onChange={onPasswordOldChange}\n            name=\"old password\"\n            type=\"password\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            id=\"passwordNew\"\n            onChange={onPasswordNewChange}\n            name=\"new password\"\n            type=\"password\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.handleClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"primary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n\nexport function SettingsOperatorDeleteDialog(props) {\n    const onAccept = () =>{\n        props.onAccept(props.id);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Delete Operator</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This deletes an operator and prevents them from permanently logging in again. If you want a temporary solution, disable the operator instead.\n          </DialogContentText>\n          <DialogContentText>\n            Are you sure you want to delete operator \"{props.username}\"?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Delete\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { APITokenRow } from './SettingsOperatorAPIToken';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { SettingsOperatorDeleteDialog } from './SettingsOperatorDeleteDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nexport function SettingsOperator(props){\n    const [open, setOpen] = React.useState(false);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const onViewUTCChanged = (evt) => {\n        const {id} = props;\n        props.onViewUTCChanged(id, !props[evt.target.name]);\n    }\n    const onAdminChanged = (evt) => {\n        const {id} = props;\n        props.onAdminChanged(id, !props[evt.target.name]);\n    }\n    const onActiveChanged = (evt) => {\n        const {id} = props;\n        props.onActiveChanged(id, !props[evt.target.name]);\n    }\n    const onAccept = (id, username, passwordOld, passwordNew) => {\n        if(username !== props.username){\n          props.onUsernameChanged(id, username);\n        }\n        if(passwordNew.length > 0){\n          props.onPasswordChanged({user_id: id, old_password: passwordOld, new_password: passwordNew})\n        }\n        setOpenUpdateDialog(false);\n    }\n    const onAcceptDelete = (id) => {\n        props.onDeleteOperator(id);\n        setOpenDeleteDialog(false);\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id}>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} startIcon={<DeleteIcon/>} color=\"secondary\" variant=\"contained\">Delete</Button>\n                    <MythicDialog open={openDelete} \n                        onClose={()=>{setOpenDeleteDialog(false);}} \n                        innerDialog={<SettingsOperatorDeleteDialog onClose={()=>{setOpenDeleteDialog(false);}}  onAccept={onAcceptDelete} {...props} />}\n                     />\n                </TableCell>\n                <TableCell>{props.username}</TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Update</Button>\n                    <MythicDialog open={openUpdate} \n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<SettingsOperatorDialog onAccept={onAccept} handleClose={()=>{setOpenUpdateDialog(false);}} title=\"Update Operator\"  {...props}/>}\n                     />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.view_utc_time}\n                        onChange={onViewUTCChanged}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"view_utc_time\"\n                      />\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onActiveChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />\n                </TableCell>\n                <TableCell>{toLocalTime(props.last_login, me.user.view_utc_time)}</TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.admin}\n                        onChange={onAdminChanged}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"admin\"\n                      />\n                </TableCell>\n                <TableCell>\n                  {props.id === me.user.id && \n                    <IconButton aria-label=\"expand row\" size=\"small\" onClick={() => setOpen(!open)}>\n                      {open ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                    </IconButton>\n                  }\n                    \n                </TableCell>\n            </TableRow>\n            <TableRow>\n              {props.id === me.user.id &&\n                <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={9}>\n                  <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                    <Box margin={1}>\n                      <Typography variant=\"h6\" gutterBottom component=\"div\" style={{display: \"inline-block\"}}>\n                        API Tokens\n                      </Typography>\n                      <Button size=\"small\" onClick={props.onCreateAPIToken} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New</Button>\n                      <Table size=\"small\" aria-label=\"tokens\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                        <TableHead>\n                          <TableRow>\n                            <TableCell style={{width: \"10rem\"}}>Delete</TableCell>\n                            <TableCell>Token</TableCell>\n                          </TableRow>\n                        </TableHead>\n                        <TableBody>\n                          {\n                            props.apitokens.map((token) => (<APITokenRow {...token} key={\"token\" + token.id} onDeleteAPIToken={props.onDeleteAPIToken} />))\n                          }\n                        </TableBody>\n                      </Table>\n                    </Box>\n                  </Collapse>\n                </TableCell>\n              }\n            \n          </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { SettingsOperator } from './SettingsOperator';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { SettingsOperatorDialog } from './SettingsOperatorDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function SettingsOperatorTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            props.onNewOperator(username, passwordNew);\n            setOpenNewDialog(false);\n        }\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Settings\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{float: \"right\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n        <MythicDialog open={openNew} \n            onClose={()=>{setOpenNewDialog(false);}} \n            innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewDialog(false);}}  {...props}/>}\n         />\n        <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n            <TableHead>\n                <TableRow>\n                    <TableCell style={{width: \"9rem\"}}>Delete Account</TableCell>\n                    <TableCell>Username</TableCell>\n                    <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                    <TableCell style={{width: \"10rem\"}}>UTC Timestamps</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Account Active</TableCell>\n                    <TableCell>Last Login</TableCell>\n                    <TableCell>Account Creation Date</TableCell>\n                    <TableCell style={{width: \"9rem\"}}>Admin Status</TableCell>\n                    <TableCell style={{width: \"5rem\"}}>More...</TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n            \n            {props.operators.map( (op) => (\n                <SettingsOperator\n                    onViewUTCChanged={props.onViewUTCChanged}\n                    onAdminChanged={props.onAdminChanged}\n                    onActiveChanged={props.onActiveChanged} \n                    onDeleteOperator={props.onDeleteOperator}\n                    onUsernameChanged={props.onUsernameChanged}\n                    onPasswordChanged={props.onPasswordChanged}\n                    onDeleteAPIToken={props.onDeleteAPIToken}\n                    onCreateAPIToken={props.onCreateAPIToken}\n                    key={\"operator\" + op.id}\n                    {...op}\n                />\n            ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { SettingsOperatorTable } from './SettingsOperatorTable';\nimport {useMutation, useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst GET_Operator = gql`\nquery GetOperators {\n  operator(where: {deleted: {_eq: false}}, order_by: {username: asc}) {\n    active\n    admin\n    creation_time\n    deleted\n    id\n    last_login\n    username\n    view_utc_time\n    apitokens {\n      token_value\n      token_type\n      active\n      id\n    }\n  }\n}\n`;\nconst operatorsUpdateViewUTCTime = gql`\nmutation SettingsUpdateOperatorViewUTCTime($id: Int!, $view_utc_time: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {view_utc_time: $view_utc_time}) {\n    id\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdateAdmin = gql`\nmutation SettingsUpdateOperatorAdminMutation($id: Int!, $admin: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {admin: $admin}) {\n      id\n      admin\n  }\n}\n`;\nconst operatorsUpdateActive = gql`\nmutation SettingsUpdateOperatorActiveMutation($id: Int!, $active: Boolean) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {active: $active}) {\n      id\n      active\n  }\n}\n`;\nconst operatorsDelete = gql`\nmutation SettingsDeleteOperatorMutation($id: Int!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {deleted: true}) {\n      id\n      deleted\n  }\n}\n`;\nconst operatorsUpdateUsername = gql`\nmutation SettingsUsernameOperatorMutation($id: Int!, $username: String!) {\n  update_operator_by_pk(pk_columns: {id: $id}, _set: {username: $username}) {\n      id\n      username\n  }\n}\n`;\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    active\n    creation_time\n    deleted\n    error\n    id\n    last_login\n    status\n    username\n    view_utc_time\n  }\n}\n`;\nconst operatorsUpdatePassword = gql`\nmutation operatorsUpdatePasswordMutation($user_id: Int!, $new_password: String!, $old_password: String){\n  updatePassword(user_id: $user_id, new_password: $new_password, old_password: $old_password){\n    status\n    error\n  }\n}\n`;\nconst createAPITokenMutation = gql`\nmutation createAPITokenMutation{\n  createAPIToken(token_type: \"User\"){\n    id\n    token_value\n    status\n    error\n    operator_id\n  }\n}\n`;\nconst deleteAPITokenMutation = gql`\nmutation deleteAPIToken($id: Int!){\n  delete_apitokens_by_pk(id: $id){\n    id\n    operator_id\n  }\n}\n`;\nexport function Settings(props){\n    const me = useReactiveVar(meState);\n    const [operators, setOperators] = React.useState([]);\n    useQuery(GET_Operator, {fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        setOperators(data.operator);\n      }\n    });\n    const [updateUTC] = useMutation(operatorsUpdateViewUTCTime, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          const updatedOperators = operators.map(o => {\n            if(o.id === result.update_operator_by_pk.id){\n              return {...o, view_utc_time: result.update_operator_by_pk.view_utc_time}\n            }else{\n              return {...o}\n            }\n          })\n          if(result.update_operator_by_pk.id === me.user.id){\n              const state = meState();\n              state.user.view_utc_time = result.update_operator_by_pk.view_utc_time;\n              meState(state);\n          }\n          setOperators(updatedOperators);\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: (err) => {\n          console.log(err);\n          snackActions.error(\"Unable to update operator timestamps without Admin permissions\");\n        }\n    });\n    const [deleteOperator] = useMutation(operatorsDelete, {\n        onCompleted: (result) => {\n          if(result.update_operator_by_pk === null){\n            snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n            return;\n          }\n          const updatedOperators = operators.filter( o => o.id !== result.update_operator_by_pk.id);\n          setOperators(updatedOperators);\n          snackActions.success(\"Successfully updated\");\n        },\n        onError: () => {\n          snackActions.warning(\"Unable to delete operator without Admin permissions\");\n        }\n    });\n    const [updateAdmin] = useMutation(operatorsUpdateAdmin, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map(o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, admin: result.update_operator_by_pk.admin}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator admin status without Admin permissions\");\n      }\n    });\n    const [updateActive] = useMutation(operatorsUpdateActive, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map(o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, active: result.update_operator_by_pk.active}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator active status without Admin permissions\");\n      }\n    });\n    const [createAPIToken] = useMutation(createAPITokenMutation, {\n      onCompleted: (data) => {\n        if(data.createAPIToken.status === \"success\"){\n          snackActions.success(\"Successfully created new API Token\");\n          const updatedOperators = operators.map( o => {\n            if(o.id === data.createAPIToken.operator_id){\n              return {...o, apitokens: [...o.apitokens, {...data.createAPIToken}]}\n            }else{\n              return {...o}\n            }\n          });\n          setOperators(updatedOperators);\n        }else{\n          snackActions.error(data.createAPIToken.error);\n        }\n      },\n      onError: (result) => {\n        console.log(result);\n      }\n    });\n    const [deleteAPIToken] = useMutation(deleteAPITokenMutation, {\n      onCompleted: (data) => {\n        const updatedOperators = operators.map( o => {\n          if(o.id === data.delete_apitokens_by_pk.operator_id){\n            return {...o, apitokens: o.apitokens.filter(api => api.id !== data.delete_apitokens_by_pk.id)}\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n      },\n      onError: (data) => {\n\n      }\n    });\n    const [newOperator] = useMutation(newOperatorMutation, {\n        onCompleted: (data) => {\n            if(data.createOperator.status === \"success\"){\n                const newOperator = data.createOperator;\n                setOperators( [...operators, newOperator]);\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateUsername] = useMutation(operatorsUpdateUsername, {\n      onCompleted: (result) => {\n        if(result.update_operator_by_pk === null){\n          snackActions.warning(\"Cannot update another user's data without Admin permissions\");\n          return;\n        }\n        const updatedOperators = operators.map( o => {\n          if(o.id === result.update_operator_by_pk.id){\n            return {...o, username: result.update_operator_by_pk.username};\n          }else{\n            return {...o}\n          }\n        });\n        setOperators(updatedOperators);\n        snackActions.success(\"Successfully updated\");\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's username without Admin permissions\");\n      }\n    });\n    const [updatePassword] = useMutation(operatorsUpdatePassword, {\n      onCompleted: (result) => {\n        if(result.updatePassword.status === \"success\"){\n          snackActions.success(\"Successfully updated password\");\n        }else{\n          snackActions.warning(result.updatePassword.error);\n        }\n      },\n      onError: () => {\n        snackActions.warning(\"Unable to update operator's password without Admin permissions\");\n      }\n    })\n    const onViewUTCChanged = (id, value) => {\n        updateUTC({variables: {id, view_utc_time: value}});\n    }\n    const onAdminChanged = (id, value) => {\n        updateAdmin({variables: {id, admin: value}});\n    }\n    const onActiveChanged = (id, value) => {\n        updateActive({variables: {id, active: value}});\n    }\n    const onNewOperator = (username, password) => {\n        newOperator({variables: {username, password}});\n    }\n    const onDeleteOperator = (id) => {\n        deleteOperator({variables: {id}});\n    }\n    const onUsernameChanged = (id, value) => {\n      updateUsername({variables: {id, username: value}})\n    }\n    const onPasswordChanged = ({user_id, old_password, new_password}) => {\n      updatePassword({variables: {user_id, new_password, old_password}})\n    }\n    const onCreateAPIToken = () => {\n      createAPIToken({variables: {}})\n    }\n    const onDeleteAPIToken = (id) => {\n      deleteAPIToken({variables: {id}})\n    }\n    return (\n    <div style={{height: \"calc(94vh)\", marginTop: \"10px\", marginRight: \"5px\"}}>\n        <SettingsOperatorTable \n            onViewUTCChanged={onViewUTCChanged}\n            onAdminChanged={onAdminChanged}\n            onActiveChanged={onActiveChanged}\n            onNewOperator={onNewOperator}\n            onDeleteOperator={onDeleteOperator}\n            onUsernameChanged={onUsernameChanged}\n            onPasswordChanged={onPasswordChanged}\n            onCreateAPIToken={onCreateAPIToken}\n            onDeleteAPIToken={onDeleteAPIToken}\n            operators={operators} />\n        </div>\n    );\n} \n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_name: String!) {\n  payloadtype(where: {ptype: {_eq: $payload_name}}) {\n    buildparameters (where: {deleted: {_eq: false} } ){\n      description\n      name\n      id\n      parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function PayloadTypeBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_Payload_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            console.log(data);\n            const buildParams = data.payloadtype[0].buildparameters.map((param) => {\n              switch(param.parameter_type){\n                case \"ChooseOne\":\n                  return {...param, defaultParameter: param.parameter.split(\"\\n\")[0], options: param.parameter.split(\"\\n\").join(\", \")};\n                default:\n                  return {...param, defaultParameter: param.parameter};\n              }\n            });\n            setBuildParams(buildParams);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell >Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id} hover>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                            <b>Scripting/Building Name: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.name}</pre><br/>\n                            <b>Parameter Type: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.parameter_type}</pre><br/>\n                            <b>Default Parameter: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.defaultParameter}</pre><br/>\n                            {param.parameter_type === \"ChooseOne\" ? (\n                              <React.Fragment>\n                                <b>Parameter Options: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.options}</pre><br/>\n                              </React.Fragment>\n                            ) : (null)}\n                            <b>Required? </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.required ? \"Yes\": \"No\"}</pre><br/>\n                            <b>Verifier Regex: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.verifier_regex}</pre><br/>\n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {PayloadTypeBuildDialog} from './PayloadTypeBuildDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function PayloadTypeCard(props) {\n  const classes = useStyles();\n  const [wrappedPayloads, setWrappedPayloads] = React.useState(\"\");\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [supportedOS, setSupportedOS] = React.useState(\"\");\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  useEffect( () => {\n    if( props.wrap_these_payload_types.length > 0){\n      const wrapped = props.wrap_these_payload_types.map( (cur) => {\n        return cur.wrapped.ptype;\n      });\n      setWrappedPayloads(wrapped.join(\", \"));\n    }\n    else{\n      setWrappedPayloads(\"\");\n    }\n    setSupportedOS(props.supported_os.split(\",\").join(\", \"));\n  }, [props.wrap_these_payload_types, props.supported_os]);\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <CardMedia\n            className={classes.media}\n            component=\"img\"\n            style={{width: \"125px\", height: \"125\", padding: \"10px\", objectFit: \"unset\"}}\n            src={\"/static/\" + props.ptype + \".svg\"}\n          />\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.ptype}</Typography>\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Operating Systems:</b> {supportedOS}\n              </Typography>\n              \n              {props.wrap_these_payload_types.length === 0 ? (null) : (\n                <Typography variant=\"body1\" component=\"p\">\n                  <b>Wrapped Payload Types:</b> {wrappedPayloads}\n                </Typography>\n              )}\n              <Typography variant=\"body2\" component=\"p\">\n                {props.note}\n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={props.wrapper ? \"/docs/wrappers/\" + props.ptype : \"/docs/agents/\" + props.ptype} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Building Info</Button>\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                    onClose={()=>{setOpenBuildingDialog(false);}} \n                    innerDialog={<PayloadTypeBuildDialog {...props} payload_name={props.ptype} />}\n                 />\n          </div>\n    </Card>\n  );\n}\n","import React, { useEffect }  from 'react';\nimport { PayloadTypeCard } from './PayloadTypeCard';\nimport {useSubscription, gql } from '@apollo/client';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\n\n const SUB_Payload_Types = gql`\n subscription getPayloadTypesSubscription {\n  payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n    author\n    container_running\n    id\n    last_heartbeat\n    note\n    ptype\n    supported_os\n    wrapper\n    translationcontainer {\n        id\n        name\n        last_heartbeat\n        container_running\n    }\n    wrap_these_payload_types {\n        id\n        wrapped {\n          ptype\n        }\n    }\n  }\n}\n `;\n\n\nexport function PayloadTypeContainerDisplay(props){\n    const theme = useTheme();\n    const {  data } = useSubscription(SUB_Payload_Types);\n    const [payloadTypes, setPayloadTypes] = React.useState([]);\n    useEffect( () => {\n      if(data === undefined){\n        setPayloadTypes([]);\n        return;\n      }\n      setPayloadTypes(data.payloadtype);\n    }, [data])\n    return (\n          <div style={{flexDirection: \"column\", alignItems: \"stretch\"}}>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                  <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                      Payload Types\n                  </Typography>\n                </Paper> \n              {\n                  payloadTypes.map( (pt) => (\n                      <PayloadTypeCard key={\"payloadtype\" + pt.id} {...pt} />\n                  ))\n              }\n              \n          </div>\n    );\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst GET_C2_Details = gql`\nquery GetPC2Details($payload_name: String!) {\n  c2profile(where: {name: {_eq: $payload_name}}) {\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      name\n      parameter_type\n      id\n      randomize\n      required\n      verifier_regex\n    }\n  }\n}\n`;\n\nexport function C2ProfileBuildDialog(props) {\n    const [buildParams, setBuildParams] = useState([]);\n    const { loading, error } = useQuery(GET_C2_Details, {\n        variables: {payload_name: props.payload_name},\n        onCompleted: data => {\n            const buildParams = data.c2profile[0].c2profileparameters.map((param) => {\n              switch(param.parameter_type){\n                case \"ChooseOne\":\n                  return {...param, defaultParameter: param.default_value.split(\"\\n\")[0], options: param.default_value.split(\"\\n\").join(\", \")};\n                case \"Date\":\n                  return {...param, defaultParameter: \"Today with an offset of \" + param.default_value + \" days\"}\n                case \"Dictionary\":\n                  return {...param, defaultParameter: JSON.stringify(JSON.parse(param.default_value), null, 2)};\n                default:\n                  return {...param, defaultParameter: param.default_value};\n              }\n            });\n            setBuildParams(buildParams);\n        }\n        });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Build Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            These are the build parameters associated with this payload\n          </DialogContentText>\n            <Table size=\"small\" aria-label=\"details\" style={{\"tableLayout\": \"fixed\", \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParams.map( (param) => (\n                        <TableRow key={\"buildprop\" + param.id}>\n                            <TableCell>{param.description}</TableCell>\n                            <TableCell>\n                              <b>Scripting/Building Name: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.name}</pre><br/>\n                              <b>Parameter Type: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.parameter_type}</pre><br/>\n                              <b>Default Parameter: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.defaultParameter}</pre><br/>\n                              {param.parameter_type === \"ChooseOne\" ? (\n                              <React.Fragment>\n                                <b>Parameter Options: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.options}</pre><br/>\n                              </React.Fragment>\n                            ) : (null)}\n                              <b>Required? </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.required ? \"Yes\": \"No\"}</pre><br/>\n                              {param.verifier_regex === \"\" ? (null) : (<React.Fragment>\n                                <b>Verifier Regex: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.verifier_regex}</pre><br/>\n                              </React.Fragment>)}\n                              <b>Randomize value?: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.randomize ? \"Yes\" : \"No\" }</pre><br/>\n                              {param.format_string === \"\" ? (null) : (<React.Fragment>\n                                <b>Random Format String: </b><pre style={{display: \"inline-block\", whiteSpace: \"pre-wrap\", margin: 0}}>{param.format_string}</pre><br/>\n                              </React.Fragment>)}\n                              \n                            </TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getProfileOutputQuery = gql`\nquery getProfileOutput($id: Int!) {\n  getProfileOutput(id: $id) {\n    status\n    error\n    output\n  }\n}\n`;\n\nexport function C2ProfileOutputDialog(props) {\n    const { loading, error, data } = useQuery(getProfileOutputQuery, {\n        variables: {id: props.profile_id},\n        onCompleted: data => {\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <MythicTextField multiline={true} onChange={()=>{return}} value={data.getProfileOutput.output} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\n\nconst getProfileConfigQuery = gql`\nquery getProfileConfigOutput($id: Int!, $filename: String!) {\n  downloadContainerFile(id: $id, filename: $filename) {\n    status\n    error\n    filename\n    data\n  }\n}\n`;\n\nexport function C2ProfileConfigDialog(props) {\n    const [config, setConfig] = useState(\"\");\n    const { loading, error } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.profile_id, filename: \"config.json\"},\n        onCompleted: data => {\n            if(data.downloadContainerFile.status === \"error\"){\n                setConfig(\"Errored trying to read file from container\\n\" + data.downloadContainerFile.error);\n            }else{\n                console.log(data);\n                setConfig(atob(data.downloadContainerFile.data));\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    \n    if (loading) {\n     return <LinearProgress />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onConfigSubmit = () => {\n        props.onConfigSubmit(btoa(config));\n        props.onClose();\n    }\n    const onChange = (value, event) => {\n        setConfig(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Configuration</DialogTitle>\n        <DialogContent dividers={true}>\n            <AceEditor \n              mode=\"json\"\n              theme={\"monokai\"}\n              onChange={onChange}\n              fontSize={14}\n              showGutter={true}\n              highlightActiveLine={true}\n              value={config}\n              focus={true}\n              width={\"100%\"}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function C2ProfileStartStopOutputDialog(props) {\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.payload_name}'s Current Stdout/Stderr</DialogTitle>\n        <DialogContent dividers={true}>\n          <DialogContentText>\n            This is the current Stdout/Stderr for the profile. This goes away once you close this dialog.\n          </DialogContentText>\n            <MythicTextField multiline={true} value={props.output} onChange={() => {return}} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport Switch from '@material-ui/core/Switch';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport {Typography} from '@material-ui/core';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.reduce( (prev, opt) => {\n            if(opt.value !== \"\"){\n                return [...prev, {\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                console.log(\"passed dictionaryvalue\", passedValue);\n                let initial = passedValue.reduce( (prev, op) => {\n                    // find all the options that have a default_show of true\n                    if(op.default_show){\n                        return [...prev, {...op} ];\n                    }else{\n                        return [...prev];\n                    }\n                }, [] );\n                submitDictChange(initial);\n                setDictValue(initial);\n                setDictOptions(passedValue);\n                let dictSelectOptionsInitial = passedValue.reduce( (prev, op) => {\n                    //for each option, check how many instances of it are allowed\n                    // then check how many we have currently\n                    const count = initial.reduce( (preCount, cur) => {\n                        if(cur.name === op.name){return preCount + 1}\n                        return preCount;\n                    }, 0);\n                    if(op.max === -1 || op.max > count){\n                        return [...prev, {...op} ];  \n                    }else{\n                        return [...prev]\n                    }\n                }, []);\n                setDictSelectOptions(dictSelectOptionsInitial);\n                if (dictSelectOptionsInitial.length > 0){\n                    setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n                }\n            }else{\n                const options = JSON.parse(default_value);\n                setDictOptions(options);\n                let initial = options.reduce( (prev, op) => {\n                    // find all the options that have a default_show of true\n                    if(op.default_show){\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                    }else{\n                        return [...prev];\n                    }\n                }, [] );\n                submitDictChange(initial);\n                setDictValue(initial);\n                let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                    //for each option, check how many instances of it are allowed\n                    // then check how many we have currently\n                    const count = initial.reduce( (preCount, cur) => {\n                        if(cur.name === op.name){return preCount + 1}\n                        return preCount;\n                    }, 0);\n                    if(op.max === -1 || op.max > count){\n                        return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                    }else{\n                        return [...prev]\n                    }\n                }, []);\n                setDictSelectOptions(dictSelectOptionsInitial);\n                if (dictSelectOptionsInitial.length > 0){\n                    setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n                }\n            }\n        }else if(parameter_type === \"Boolean\"){\n            if(default_value !== undefined){\n                setValue( default_value.toLowerCase() === \"true\" ? true : false);\n            }else{\n                setValue(true);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                console.log(passedValue, true);\n                setValue(passedValue);\n            }\n        }else{\n            \n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        let choice = {...dictSelectOptionsChoice};\n        if(choice.name === \"*\"){\n            choice.key = \"\";\n            choice.value = \"\";\n        }\n        const newDictValue = [...dictValue, {...choice, default_show: true}]\n        setDictValue(newDictValue);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newDictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(newDictValue);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(newValues);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const toggleSwitchValue = (evt) => {\n        let newVal = !value;\n        setValue(newVal);\n        onChange(name, newVal, false);\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + i} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n            case \"Boolean\":\n                return (\n                      <Switch\n                        checked={value}\n                        onChange={toggleSwitchValue}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                      />\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + id + 'popover' : undefined}>\n                            {description}\n                    </Typography>\n                    <Popover id={'taskparam' + id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{name.length > 0 ? name : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\n\n\nexport function CreatePayloadC2ProfileParametersTable(props){\n\n    const onChange = (paramName, value, error) => {\n        props.onChange(props.name, paramName, value, error);\n    }\n    return (\n    <TableContainer component={Paper} className=\"mythicElement\">\n  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"20%\"}}>Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {props.c2profileparameters.map( (op) => (\n                        <CreatePayloadParameter key={\"c2paramtablerow\" + op.id} returnAllDictValues={props.returnAllDictValues} onChange={onChange} {...op} />\n                    ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {useState} from 'react';\nimport {Button, Typography} from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useLazyQuery, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {CreatePayloadC2ProfileParametersTable} from '../CreatePayload/CreatePayloadC2ProfileParametersTable';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport * as RandExp from 'randexp';\n\nconst getProfileConfigQuery = gql`\nquery getProfileParameters($id: Int!, $operation_id: Int!) {\n  c2profile_by_pk(id: $id) {\n    c2profileparameters(where: {deleted: {_eq: false}}, order_by: {name: asc}){\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n      instance_name\n    }\n  }\n}\n`;\nconst getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    id\n    value\n  }\n}\n`;\nconst deleteInstanceMutation = gql`\nmutation deleteSavedInstance($name: String!, $operation_id: Int!){\n  delete_c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}){\n    affected_rows\n  }\n}\n`;\nconst createInstanceMutation = gql`\nmutation createNewC2Instance($instance_name: String!, $c2_instance: String!, $c2profile_id: Int!){\n  create_c2_instance(c2_instance: $c2_instance, instance_name: $instance_name, c2profile_id: $c2profile_id){\n    status\n    error\n  }\n}\n`;\n\nexport function C2ProfileSavedInstancesDialog(props) {\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [instanceName, setInstanceName] = useState(\"\");\n    const [selectedInstance, setSelectedInstance] = useState(\"\");\n    const [createdInstances, setCreatedInstances] = useState([]);\n    const [baseParameters, setBaseParameters] = useState([]);\n    const [currentParameters, setCurrentParameters] = useState([]);\n    const { loading } = useQuery(getProfileConfigQuery, {\n        variables: {id: props.id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const parameters = data.c2profile_by_pk.c2profileparameters.map( (param) => {\n              if(param.format_string !== \"\"){\n                  const random = new RandExp(param.format_string).gen();\n                  return {...param, default_value: random, value: random}\n              }else if(param.default_value !== \"\"){\n                  if(param.parameter_type === \"ChooseOne\"){\n                      return {...param, value: param.default_value.split(\"\\n\")[0]}\n                  }else if(param.parameter_type === \"Dictionary\"){\n                      let tmp = JSON.parse(param.default_value);\n                      let initial = tmp.reduce( (prev, op) => {\n                          // find all the options that have a default_show of true\n                          if(op.default_show){\n                              return [...prev, {value: op.default_value, key: op.name === \"*\" ? \"\": op.name, name: op.name, custom: op.name === \"*\" ? true : false} ];\n                          }else{\n                              return [...prev];\n                          }\n                      }, [] );\n                      return {...param, value: initial}\n                  }else if(param.parameter_type === \"Date\"){\n                    let tmpDate = new Date();\n                    tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                    return {...param, value: tmpDate.toISOString().slice(0,10)}\n                  }else{\n                      return {...param, value: param.default_value}\n                  }\n              }else{\n                return {...param, error: param.required, value: param.default_value}\n              }\n          });\n          parameters.sort((a,b) => -b.description.localeCompare(a.description));\n          setBaseParameters([...parameters]);\n          setCurrentParameters([...parameters]);\n          setCreatedInstances(data.c2profile_by_pk.c2profileparametersinstances);\n        },\n        onError: data => {\n          \n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n      onCompleted: (data) => {\n        const updates = data.c2profileparametersinstance.map( (cur) => {\n          let inst = {...cur, ...cur.c2profileparameter};\n          if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n            inst[\"value\"] = JSON.parse(inst[\"value\"]);\n        }\n          return inst;\n        })\n        updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n        setCurrentParameters(updates);\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to fetch instance data: \" + data);\n        console.log(data);\n      },\n      fetchPolicy: \"no-cache\"\n    })\n    const [deleteInstance] = useMutation(deleteInstanceMutation, {\n      onCompleted: (data) => {\n        setSelectedInstance(\"\")\n        setInstanceName(\"\");\n        setCurrentParameters([...baseParameters]);\n        const updatedInstances = createdInstances.filter( (cur) => cur.instance_name !== selectedInstance);\n        setCreatedInstances(updatedInstances);\n        snackActions.success(\"Sucessfully deleted instance\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to delete instance: \" + data);\n      }\n    });\n    const [createInstance] = useMutation(createInstanceMutation, {\n      onCompleted: (data) => {\n        if(data.create_c2_instance.status === \"success\"){\n          snackActions.success(\"Successfully created instance\");\n        }else{\n          snackActions.error(\"Failed to create instance: \" + data.create_c2_instance.error);\n        }\n        props.onClose();\n        \n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to create instance: \" + data);\n      }\n    })\n    if (loading) {\n     return <LinearProgress />;\n    }\n    const onConfigSubmit = () => {\n      if(instanceName.length === 0){\n        snackActions.warning(\"Must supply an instance name\");\n        return;\n      }\n        const config = currentParameters.reduce( (prev, cur) => {\n          return {...prev, [cur.name]: cur.value}\n        }, {});\n        createInstance({variables: {operation_id: me.user.current_operation_id, instance_name: instanceName, c2profile_id: props.id, c2_instance: JSON.stringify(config)}})\n    }\n    const onChange = (name, value, error) => {\n      setInstanceName(value);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n      const c2params = currentParameters.map( (param) => {\n        if (param.name === parameterName){\n            return {...param, error, value}\n        }\n        return param;\n      });\n      console.log(c2params);\n      setCurrentParameters(c2params);\n    }\n    const onChangeCreatedInstanceName = (evt) => {\n      setSelectedInstance(evt.target.value);\n      setInstanceName(evt.target.value);\n      if(evt.target.value === \"\"){\n        setCurrentParameters([...baseParameters]);\n      }else{\n        setCurrentParameters([]);\n        getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n      }\n    }\n    const deleteInstanceButton = () => {\n      setCurrentParameters([]);\n      deleteInstance({variables: {name: selectedInstance, operation_id: me.user.current_operation_id}})\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Save an Instance of {props.name}'s Parameters</DialogTitle>\n        <DialogContent dividers={true}>\n          <Typography style={{paddingBottom: \"10px\"}}>\n            Saving an instance of the parameters allows you to select them from a dropdown when creating agents later, saving time and typos.\n          </Typography>\n            {createdInstances.length > 0 ? (\n              <Grid container spacing={2} style={{paddingTop: \"10px\"}}>\n                <Grid item xs={6}>\n                  <FormControl style={{width: \"100%\"}}>\n                  <InputLabel >Select an Existing Instance</InputLabel>\n                      <Select\n                        style={{width: \"100%\", marginBottom: \"10px\"}}\n                        value={selectedInstance}\n                        label=\"Select an Existing Instance\"\n                        onChange={onChangeCreatedInstanceName}\n                      >\n                        <MenuItem value=\"\">New Instance</MenuItem>\n                      {\n                          createdInstances.map((opt, i) => (\n                              <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                          ))\n                      }\n                      </Select>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                  {selectedInstance.length > 0 ? (\n                    <Button style={{backgroundColor: theme.palette.error.main, color: \"white\"}} variant=\"contained\" onClick={deleteInstanceButton}> Delete Instance</Button>\n                  ) : (null)}\n                </Grid>\n            </Grid>\n            ) : (null)}\n            <MythicTextField name=\"Instance Name\" onChange={onChange} value={instanceName} style={{paddingTop: \"10px\"}}/>\n            <CreatePayloadC2ProfileParametersTable {...props} returnAllDictValues={true} c2profileparameters={currentParameters} onChange={updateC2Parameter} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onConfigSubmit} color=\"secondary\">\n            {selectedInstance.length > 0 ? (\"Update\") : (\"Create\")}\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Badge from '@material-ui/core/Badge';\nimport {C2ProfileBuildDialog} from './C2ProfileBuildDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport {useMutation, gql} from '@apollo/client';\nimport {C2ProfileOutputDialog} from './C2ProfileOutputDialog';\nimport {C2ProfileConfigDialog} from './C2ProfileConfigDialog';\nimport {C2ProfileStartStopOutputDialog} from './C2ProfileStartStopOutputDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport {C2ProfileSavedInstancesDialog} from './C2ProfileSavedInstancesDialog';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n  successButton: {\n    backgroundColor: theme.palette.success.main,\n    color: 'white',\n    \"&:hover\":{\n      backgroundColor: theme.palette.success.dark\n    }\n  },\n  errorButton: {\n    backgroundColor: theme.palette.error.main,\n    color: 'white',\n    \"&:hover\":{\n      backgroundColor: theme.palette.error.dark\n    }\n  }\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\nconst startStopProfileMutation = gql`\nmutation StartStopProfile($id: Int!, $action: String) {\n  startStopProfile(id: $id, action: $action) {\n    status\n    error\n    output\n  }\n}\n`;\nconst setProfileConfigMutation = gql`\nmutation setProfileConfiguration($id: Int!, $file_path: String!, $data: String!) {\n  uploadContainerFile(id: $id, file_path: $file_path, data: $data) {\n    status\n    error\n    filename\n  }\n}\n`;\nexport function C2ProfilesCard(props) {\n  let date = new Date();\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n  const [openBuildingDialog, setOpenBuildingDialog] = React.useState(false);\n  const [dropdownOpen, setDropdownOpen] = React.useState(false);\n  const dropdownAnchorRef = React.useRef(null);\n  const handleDropdownToggle = () => {\n    setDropdownOpen((prevOpen) => !prevOpen);\n  };\n  const handleDropdownClose = (event) => {\n    if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setDropdownOpen(false);\n  };\n  const [startStopProfile] = useMutation(startStopProfileMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            setOutput(data.startStopProfile.output);\n            setOpenProfileStartStopDialog(true);\n        }\n    });\n    const onStartStopProfile = () => {\n        if(props.running){\n            snackActions.info(\"Submitting stop task...\" );\n        }else{\n            snackActions.info(\"Submitting start task...\" );\n        }  \n        startStopProfile({variables: {id: props.id, action: props.running ? \"stop\" : \"start\"}});\n    }\n    const [openProfileDialog, setOpenProfileDialog] = React.useState(false);\n    const [openProfileConfigDialog, setOpenProfileConfigDialog] = React.useState(false);\n    const [output, setOutput] = React.useState(\"\");\n    const [openProfileStartStopDialog, setOpenProfileStartStopDialog] = React.useState(false);\n    const [openProfileSavedInstancesDialog, setOpenProfileSavedInstancesDialog] = React.useState(false);\n    const [configSubmit] = useMutation(setProfileConfigMutation, {\n        update: (cache, {data}) => {\n            \n        },\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: data => {\n            //console.log(data);\n            if(data.uploadContainerFile.status === \"success\"){\n                snackActions.success(\"Updated file\");\n            }else{\n                snackActions.error(\"Error updating: \" + data.uploadContainerFile.error );\n            }\n        }\n    });\n    const onConfigSubmit = (content) => {\n        configSubmit({variables: {id: props.id, file_path: \"config.json\", data: content}});\n    }\n  return (\n    <Card className={classes.root} elevation={5} style={{maxWidth: \"100%\"}}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            {props.is_p2p ? \n            (<FontAwesomeIcon icon={faLink}  style={{width: \"100px\", height: \"100px\", marginTop: \"25px\"}} />)\n            : \n            (<WifiIcon style={{width: \"100px\", height: \"100px\", marginTop: \"25px\"}}/>)\n            }\n        </StyledAvatar>\n        <div style={{maxWidth: \"60%\"}}>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\"}}>{props.name}</Typography>\n          {!props.is_p2p && props.running &&\n            <Typography variant=\"h6\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\", color:theme.palette.success.main}}>(Server Running)</Typography>\n          }\n          {!props.is_p2p && !props.running &&\n            <Typography variant=\"h6\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\", display: \"inline-block\", color:theme.palette.error.main}}>(Server Not Running)</Typography>\n          }\n          <CardContent style={{textAlign:\"left\"}}>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Author:</b> {props.author}\n              </Typography>\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Supported Agents:</b> {props.payloadtypec2profiles.map( (pt) => (pt.payloadtype.ptype + \" \") )}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n                {props.description}\n              </Typography>\n              <Typography variant=\"body2\" component=\"p\">\n               \n              </Typography>\n          </CardContent>\n        </div>\n        <div style={{display: \"inline-flex\", paddingRight: \"10px\", marginLeft: \"auto\", justifyContent: \"space-evenly\", alignItems: \"stretch\", flexDirection: \"column\", alignContent: \"flex-end\"}}>\n            <Button size=\"small\" variant=\"contained\" color=\"primary\" href={\"/docs/c2-profiles/\" + props.name.toLowerCase()} target=\"_blank\">\n              Docs\n            </Button>\n            <Button size=\"small\" onClick={()=>{setOpenBuildingDialog(true);}} color=\"primary\" variant=\"contained\">Build Info</Button>\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openBuildingDialog} \n                onClose={()=>{setOpenBuildingDialog(false);}} \n                innerDialog={<C2ProfileBuildDialog {...props} onClose={()=>{setOpenBuildingDialog(false);}} payload_name={props.name} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileStartStopDialog} \n                onClose={()=>{setOpenProfileStartStopDialog(false);}} \n                innerDialog={<C2ProfileStartStopOutputDialog output={output} onClose={()=>{setOpenProfileStartStopDialog(false);}} payload_name={props.name} />}\n            />\n            {props.container_running ? (\n                   props.running ?\n                   (\n                    <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\">\n                       <Button size=\"small\" className={props.running ? classes.successButton : classes.errorButton} onClick={onStartStopProfile} style={{width: \"100%\"}}>Stop Profile</Button>\n                       <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          className={props.running ? classes.successButton : classes.errorButton}\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                   )\n                   :\n                   (\n                     props.is_p2p ? (\n                      null\n                     ) : (\n                      <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\">\n                        <Button size=\"small\" onClick={onStartStopProfile} className={props.running ? classes.successButton : classes.errorButton} style={{width: \"100%\"}}>Start Profile</Button>\n                        <Button\n                          size=\"small\"\n                          aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                          aria-expanded={dropdownOpen ? 'true' : undefined}\n                          aria-label=\"select merge strategy\"\n                          aria-haspopup=\"menu\"\n                          className={props.running ? classes.successButton : classes.errorButton}\n                          onClick={handleDropdownToggle}\n                        >\n                          <ArrowDropDownIcon />\n                        </Button>\n                      </ButtonGroup>\n                     )\n                      \n                   )\n            ) : (\n              <Button disabled color=\"secondary\">Container Offline</Button>\n            )}\n             <Button size=\"small\" variant=\"contained\" color=\"primary\" onClick={() => {setOpenProfileSavedInstancesDialog(true);}}><BookmarkIcon /> Saved Instances</Button>\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileDialog} \n                onClose={()=>{setOpenProfileDialog(false);}} \n                innerDialog={<C2ProfileOutputDialog {...props} payload_name={props.name} onClose={()=>{setOpenProfileDialog(false);}} profile_id={props.id} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileConfigDialog} \n                onClose={()=>{setOpenProfileConfigDialog(false);}} \n                innerDialog={<C2ProfileConfigDialog {...props} onConfigSubmit={onConfigSubmit} payload_name={props.name} onClose={()=>{setOpenProfileConfigDialog(false);}} profile_id={props.id} />}\n            />\n            <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openProfileSavedInstancesDialog} \n                onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} \n                innerDialog={<C2ProfileSavedInstancesDialog {...props} onClose={()=>{setOpenProfileSavedInstancesDialog(false);}} />}\n            />\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleDropdownClose}>\n                      <MenuList id=\"split-button-menu\">\n                        <MenuItem key={\"dropdownprofile\" + props.id + \"menu1\"} onClick={()=>{setOpenProfileConfigDialog(true);}}>View/Edit Config</MenuItem>\n                       {\n                        props.running ? \n                        (<MenuItem key={\"dropdownprofile\" + props.id + \"menu2\"} onClick={()=>{setOpenProfileDialog(true);}}>View Stdout/Stderr</MenuItem>) : (null)\n                       }\n                      </MenuList>\n                      \n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n          </div>\n    </Card>\n  );\n}\n","import React, {useEffect} from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {C2ProfilesCard} from './C2ProfilesCard';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_C2_Profiles = gql`\nsubscription getPayloadTypesSubscription {\n   c2profile(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   author\n   id\n   container_running\n   description\n   is_p2p\n   last_heartbeat\n   name\n   running\n   payloadtypec2profiles(order_by: {payloadtype: {ptype: asc}}) {\n     payloadtype {\n       ptype\n     }\n   }\n }\n}\n`;\n\nexport function C2ProfileContainerDisplay(props) {\n  const { data } = useSubscription(SUB_C2_Profiles, {fetchPolicy: \"network-only\"});\n  const [c2profile, setC2profile] = React.useState([]);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setC2profile([]);\n      return;\n    }\n    setC2profile(data.c2profile);\n  }, [data])\n  return (\n        <div style={{ flexDirection: \"column\", alignItems: \"stretch\", paddingLeft: \"10px\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  C2 Profiles\n              </Typography>\n            </Paper> \n            {\n                c2profile.map( (pt) => (\n                    <C2ProfilesCard key={\"c2prof\" + pt.id} {...pt} />\n                ))\n            }\n        </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faLanguage } from '@fortawesome/free-solid-svg-icons';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    marginBottom: \"10px\"\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  running: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n  },\n  notrunning: {\n    backgroundColor: 'red',\n    color: 'red',\n  },\n}));\nconst StyledAvatar = withStyles((theme) => ({\n    badge: {\n        boxShadow: \"0 0 0 2px white\",\n        '&::after': {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          borderRadius: '50%',\n          animation: '$ripple 1.2s infinite ease-in-out',\n          border: '1px solid currentColor',\n          content:'\"\"'\n        },\n      },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n}))(Badge);\n\nexport function TranslationContainerCard(props) {\n  const classes = useStyles();\n  let date = new Date();\n  let now = date.getTime() + date.getTimezoneOffset() * 60000;\n  let heartbeat = new Date(props.last_heartbeat);\n  let difference = (now - heartbeat.getTime()) / 1000;\n  const running = difference < 30 ? 'running' : 'notrunning';\n\n  return (\n    <Card className={classes.root} elevation={5}>\n        <StyledAvatar overlap=\"circle\" classes={{badge: classes[running]}} invisible={false} anchorOrigin={{vertical: \"bottom\", horizontal: \"right\"}}>\n            <FontAwesomeIcon icon={faLanguage} size=\"6x\" style={{width: \"125px\", height: \"125px\"}} />\n        </StyledAvatar>\n        <div>\n          <Typography variant=\"h4\" component=\"h1\" style={{textAlign:\"left\", marginLeft: \"10px\"}}>{props.name}</Typography>\n          {props.payloadtypes.length > 0 ? (\n              <Typography variant=\"body1\" component=\"p\">\n                <b>Translated Payload Types:</b> {props.payloadtypes.map( (pt) => pt.ptype).join(\", \")}\n              </Typography>\n          ): (null)}\n        </div>\n    </Card>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {useTheme} from '@material-ui/core/styles';\nimport {TranslationContainerCard} from './TranslationContainerCard';\nimport {useSubscription, gql } from '@apollo/client';\nconst SUB_Translation_Containers = gql`\nsubscription getTranslationContainersSubscription {\n translationcontainer(where: {deleted: {_eq: false}}, order_by: {name: asc}) {\n   name\n   id\n   container_running\n   last_heartbeat\n   payloadtypes(order_by: {ptype: asc}) {\n       ptype\n       id\n   }\n }\n}\n`;\nexport function TranslationContainerDisplay(props) {\n  const [translationContainers, setTranslationContainers] = React.useState([]);\n  const [translationContainersWithPayloads, setTranslationContainersWithPayloads] = React.useState([]);\n  const {  data } = useSubscription(SUB_Translation_Containers);\n  const theme = useTheme();\n  useEffect( () => {\n    if(data === undefined){\n      setTranslationContainers([]);\n      return;\n    }\n    const unassigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length === 0);\n    const assigned = data.translationcontainer.filter( (tr) => tr.payloadtypes.length > 0);\n    setTranslationContainers(unassigned);\n    setTranslationContainersWithPayloads(assigned); \n  }, [data]);\n  return (\n    <div style={{width: \"100%\", display: \"inline-flex\", flexDirection: \"column\", alignItems: \"stretch\", }}>\n      {\n        translationContainers.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers Not Assigned to Payload Types\n              </Typography>\n            </Paper> \n            {translationContainers.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n      {\n        translationContainersWithPayloads.length > 0 ? (\n          <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                  Translation Containers\n              </Typography>\n            </Paper> \n            {translationContainersWithPayloads.map( (tr) => (\n              <TranslationContainerCard key={\"translation_container\" + tr.id} {...tr} />\n            ))}\n          </React.Fragment>\n        ) : (null)\n      }\n    </div>\n    \n    \n  );\n}\n","import React from 'react';\nimport {PayloadTypeContainerDisplay} from './PayloadTypeContainerDisplay';\nimport {C2ProfileContainerDisplay} from './C2ProfileContainerDisplay';\nimport {TranslationContainerDisplay} from './TranslationContainerDisplay';\nimport Grid from '@material-ui/core/Grid';\n\nexport function PayloadTypesC2Profiles(props){\n\n    return (\n      <React.Fragment>\n        <Grid container spacing={0}>\n          <Grid item xs={6}>\n          <PayloadTypeContainerDisplay />\n          </Grid>\n          <Grid item xs={6}>\n          <C2ProfileContainerDisplay />\n          </Grid>\n          <Grid item xs={12}>\n          <TranslationContainerDisplay />\n          </Grid>\n        </Grid>\n      </React.Fragment>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [supportsDynamicLoading, setSupportsDynamicLoading] = React.useState(false);\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n                    console.log(props.prevData);\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setFileExtension(props.prevData.file_extension);\n                    setSupportsDynamicLoading(props.prevData.supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    setSupportsDynamicLoading(data.payloadtype[0].supports_dynamic_loading);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }else if(param.parameter_type === \"Boolean\"){\n                                    return {...param, error: param.required, value: param.default_value.toLowerCase() === \"true\" ? true : false}\n                                }else{\n                                    return {...param, error: param.required, value: param.default_value}\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    console.log(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"file_extension\": fileExtension, \n                        \"supports_dynamic_loading\": supportsDynamicLoading,\n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSupportsDynamicLoading(payload.supports_dynamic_loading);\n                const params = payload.buildparameters.map( (param) => {\n                    console.log(param);\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else if(param.parameter_type === \"Boolean\"){\n                        return {...param, error: param.required, value: param.default_value.toLowerCase() === \"true\" ? true : false}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function MythicConfirmDialog(props) {\n    const theme = useTheme();\n    const handleSubmit = () => {\n        props.onSubmit();\n        props.onClose();\n    }\n\n  return (\n    <MythicDialog fullWidth={false} maxWidth=\"sm\" open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle >{props.title ? (props.title) : (\"Are you sure?\")}</DialogTitle>\n            {props.dialogText === undefined ? (null) : (\n              <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n                <DialogContentText>\n                  {props.dialogText}\n                </DialogContentText>\n              </DialogContent>\n            )}\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                {props.cancelText ? (props.cancelText) : (\"Close\")}\n              </Button>\n              <Button onClick={handleSubmit} autoFocus variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                {props.acceptText ? (props.acceptText) : (\"Remove\")}\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nconst GET_Payload_Types = gql`\nquery getCommands($payloadType: String!) {\n  command(where: {payloadtype: {ptype: {_eq: $payloadType}}, deleted: {_eq: false}}, order_by: {cmd: asc}) {\n    cmd\n    attributes\n    id\n    supported_ui_features\n    help_cmd\n    description\n    needs_admin\n  }\n}\n `;\n\nexport function Step3SelectCommands(props){\n    const [commands, setCommands] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type\"]},\n        onCompleted: () => {\n          \n          if(!props.buildOptions[\"supports_dynamic_loading\"]){\n              \n              const allCommands = data.command.map( c => {\n                return {...c, selected: true, disabled: true, reason: \"Agent doesn't support dynamic loading\"}\n              });\n              setCommandOptions(allCommands);\n          }else{\n            const allCommands = data.command.reduce( (prev, cur) => {\n              try{\n                const attributes = JSON.parse(cur.attributes);\n                if(attributes[\"supported_os\"].length === 0 || attributes[\"supported_os\"].includes(props.buildOptions[\"os\"])){\n                  if(attributes[\"builtin\"] !== undefined && attributes[\"builtin\"]){\n                    return [...prev, {...cur, disabled: true, selected: true, reason: \"This command is builtin and must be included\"}];\n                  }else{\n                    try{\n                      if(attributes[\"load_only\"] !== undefined && attributes[\"load_only\"]){\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"This command can only be loaded in once a callback is established\"}]\n                      }\n                      let include_command = true;\n                      let build_option_that_sets_include_to_false = {};\n                      if(attributes[\"filter_by_build_parameter\"] !== undefined){\n                        // if filter_attributes has keys, we need to filter down based on all of them\n                        for( const[key, value] of Object.entries(attributes[\"filter_by_build_parameter\"])){\n                            for(let i = 0; i < props.buildOptions.parameters.length; i++){\n                              if(props.buildOptions.parameters[i][\"name\"] === key){\n                                if(props.buildOptions.parameters[i][\"value\"] !== value){\n                                  include_command = false;\n                                  build_option_that_sets_include_to_false[\"name\"] = key;\n                                  build_option_that_sets_include_to_false[\"value\"] = value;\n                                }\n                              }\n                            }\n                        }\n                      }\n                      if(include_command){\n                        if(attributes[\"suggested_command\"] !== undefined && attributes[\"suggested_command\"]){\n                          return [...prev, {...cur, disabled: false, selected: true, reason: \"This command is suggested to be included\"}]\n                        }else{\n                          return [...prev, {...cur, disabled: false, selected: false, reason: \"\"}];\n                        }\n                      }else{\n                        return [...prev, {...cur, disabled: true, selected: false, reason: \"Not available when build option \\\"\" + build_option_that_sets_include_to_false[\"name\"] + \"\\\" is not \\\"\" + build_option_that_sets_include_to_false[\"value\"] + \"\\\"\"}]\n                      }\n                    }catch(error){\n                      console.error(error);\n                    }\n                  }\n                }\n                return [...prev, {...cur, disabled: true, selected: false, reason: \"This command isn't supported by the selected OS\"}];\n              }catch(error){\n                return [...prev, {...cur, disabled: false, selected: false, reason: \"Failed to parse command attributes\"}];\n              }\n            }, []);\n            setCommandOptions(allCommands);\n            if(props.prevData !== undefined){\n              const selectedCommands = allCommands.map( (c) => {\n                if(props.prevData.includes(c.cmd)){\n                  return {...c, selected: true};\n                }else{\n                  return {...c, selected: false};\n                }\n              })\n              setCommandOptions(selectedCommands);\n            }\n          }\n        }\n    });\n    const finished = (selectedCommands) => {\n        let foundExit = false;\n        for(let i = 0; i < selectedCommands.length; i++){\n            if(selectedCommands[i][\"supported_ui_features\"].includes(\"callback_table:exit\")){\n              foundExit = true;\n              break;\n            }\n        }\n        if(foundExit){\n          const cmdNames = selectedCommands.map( c => c.cmd);\n          props.finished(cmdNames);\n        }else{\n          setOpenConfirmDialog(true);\n          setCommands(selectedCommands);\n        }\n    }\n    const acceptConfirm = () => {\n      const cmdNames = commands.map( c => c.cmd);\n      props.finished(cmdNames);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Build Commands Into Agent\n        </Typography> <br/>\n        <CommandTransferSelect commands={commandOptions} payload_type={props.buildOptions[\"payload_type\"]} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        <MythicConfirmDialog open={openConfirmDialog} \n            title={\"No exit command selected, continue?\"} \n            onClose={() => setOpenConfirmDialog(false)} \n            acceptText=\"Accept\"\n            onSubmit={acceptConfirm} />\n        \n        </div>\n    );\n} \n\nfunction CommandTransferSelect(props) {\n  const classes = useStyles();\n  const [checked, setChecked] = React.useState([]);\n  const [left, setLeft] = React.useState([]);\n  const [right, setRight] = React.useState([]);\n  const leftChecked = intersection(checked, left);\n  const rightChecked = intersection(checked, right);\n  const [hoveredCommand, setHoveredCommnad] = React.useState({});\n  function not(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) === undefined)\n  }\n  \n  function intersection(a, b) {\n      return a.filter( (value) => b.find( (element) => element[\"cmd\"] === value[\"cmd\"] && !element[\"disabled\"] ) !== undefined)\n  }\n  const handleToggle = (value) => () => {\n    let currentIndex = -1;\n    if(props.itemKey){\n      currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n    }else{\n      currentIndex = checked.indexOf(value);\n    }\n    \n    const newChecked = [...checked];\n\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  };\n\n  const handleAllRight = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(cur.disabled && !cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && !cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n\n  const handleCheckedRight = () => {\n    setRight(right.concat(leftChecked));\n    setLeft(not(left, leftChecked));\n    setChecked(not(checked, leftChecked));\n  };\n\n  const handleCheckedLeft = () => {\n    setLeft(left.concat(rightChecked));\n    setRight(not(right, rightChecked));\n    setChecked(not(checked, rightChecked));\n  };\n\n  const handleAllLeft = () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n      if(!(cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if((cur.disabled && cur.selected)){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  };\n  useEffect( () => {\n    const initialLeft = props.commands.reduce( (prev, cur) => {\n        if(!cur.selected){\n          return [...prev, {...cur}];\n        }else{\n          return [...prev];\n        }\n    }, [])\n    const initialRight = props.commands.reduce( (prev, cur) => {\n      if(cur.selected){\n        return [...prev, {...cur}];\n      }else{\n        return [...prev];\n      }\n    }, [])\n    setLeft(initialLeft);\n    setRight(initialRight);\n  }, [props.commands]);\n  const setHoveredData = (event) => {\n    const cmd = props.commands.filter( c => c.cmd === event.target.innerText );\n    if(cmd.length > 0){\n      setHoveredCommnad(cmd[0]);\n    }\n  }\n  const customList = (title, items) => (\n    <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(40vh)\", overflow: \"auto\"}} elevation={5}>\n      \n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = valueObj[\"cmd\"];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <div onMouseEnter={setHoveredData} key={'commandtransfer' + value}>\n                  <ListItem style={{padding:0}} disabled={valueObj[\"disabled\"]} \n                    key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}\n                    >\n                    <ListItemIcon>\n                      <Checkbox\n                        disabled={valueObj[\"disabled\"]}\n                        checked={checked.findIndex( (element) => element[\"cmd\"] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                </div>\n              );\n            })}\n            <ListItem />\n          </List>\n        \n    </Paper>\n  );\n  const finished = () => {\n    props.finished(right);\n  }\nreturn (\n  <React.Fragment>\n      <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n        <Grid item xs={5}>{customList(\"Available Commands\", left)}</Grid>\n        <Grid item>\n          <Grid container direction=\"column\" alignItems=\"center\">\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllRight}\n              disabled={left.length === 0}\n              aria-label=\"move all right\"\n            >\n              \n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedRight}\n              disabled={leftChecked.length === 0}\n              aria-label=\"move selected right\"\n            >\n              &gt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleCheckedLeft}\n              disabled={rightChecked.length === 0}\n              aria-label=\"move selected left\"\n            >\n              &lt;\n            </Button>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.button}\n              onClick={handleAllLeft}\n              disabled={right.length === 0}\n              aria-label=\"move all left\"\n            >\n              \n            </Button>\n          </Grid>\n        </Grid>\n        <Grid item xs={5}>{customList(\"Commands Included\", right)}</Grid>\n      </Grid>\n      <Grid container justify=\"center\" alignItems=\"flex-start\" className={classes.root}>\n        <Grid item xs={12} style={{height: \"100%\", marginBottom: \"10px\"}}>\n          {hoveredCommand[\"cmd\"] !== undefined &&\n            <Paper className={classes.paper} style={{width: \"100%\"}} elevation={5}>\n              \n                <CardHeader className={classes.cardHeader}\n                  title={\n                    <React.Fragment>\n                      {hoveredCommand[\"cmd\"]}\n                      <Button variant=\"contained\" color=\"primary\" href={\"/docs/agents/\" + props.payload_type + \"/commands/\" + hoveredCommand[\"cmd\"]} \n                        style={{marginLeft: \"10px\", float: \"right\"}}  target=\"_blank\">Documentation\n                      </Button>\n                    </React.Fragment>\n                  }\n                />\n                <Divider classes={{root: classes.divider}}/>\n                {hoveredCommand[\"reason\"] !== \"\" ? (\n                  <Typography variant=\"body1\" align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>{hoveredCommand[\"disabled\"] ? (\"Disabled Reason: \") : (\"Information: \")} </b>{hoveredCommand[\"reason\"]}\n                  </Typography>\n                ) : (null)}\n                <br/>\n                <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Commandline Help: </b>{hoveredCommand[\"help_cmd\"]}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Needs Admin Permissions: </b>{hoveredCommand[\"needs_admin\"] ? \"True\": \"False\"}\n                  </Typography>\n                  <Typography  align=\"left\" component=\"div\" \n                      style={{ \"marginLeft\": \"10px\"}}><b>Description: </b>{hoveredCommand[\"description\"]}\n                  </Typography>\n            </Paper>\n          }\n          \n        </Grid>\n      </Grid>\n      <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n  </React.Fragment>\n);\n}","import React from 'react';\nimport {useQuery, gql, useLazyQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadC2ProfileParametersTable} from './CreatePayloadC2ProfileParametersTable';\nimport Typography from '@material-ui/core/Typography';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport * as RandExp from 'randexp';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesC2ProfilesQuery($payloadType: String!, $operation_id: Int!) {\n  c2profile(where: {payloadtypec2profiles: {payloadtype: {ptype: {_eq: $payloadType}}}, deleted: {_eq: false}}) {\n    name\n    is_p2p\n    description\n    id\n    c2profileparameters(where: {deleted: {_eq: false}}) {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n    }\n    c2profileparametersinstances(where: {instance_name: {_is_null: false}, operation_id: {_eq: $operation_id}}, distinct_on: instance_name, order_by: {instance_name: asc}){\n        instance_name\n    }\n  }\n}\n `;\n const getProfileInstaceQuery = gql`\nquery getProfileInstanceQuery($name: String!, $operation_id: Int!) {\n  c2profileparametersinstance(where: {instance_name: {_eq: $name}, operation_id: {_eq: $operation_id}}) {\n    c2profileparameter {\n      default_value\n      description\n      format_string\n      id\n      name\n      parameter_type\n      randomize\n      required\n      verifier_regex\n      c2profile {\n          name\n      }\n    }\n    id\n    value\n  }\n}\n`;\n\nexport function Step4C2Profiles(props){\n    const me = useReactiveVar(meState);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [selectedInstance, setSelectedInstance] = React.useState(\"\");\n    const { loading, error } = useQuery(GET_Payload_Types, {variables:{payloadType: props.buildOptions[\"payload_type\"], operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const profiles = data.c2profile.map( (c2) => {\n                if(props.prevData !== undefined){\n                    console.log(props.prevData);\n                    for(let p = 0; p < props.prevData.length; p++){\n                        if(props.prevData[p][\"name\"] === c2.name){\n                            // we selected this c2 profile before and clicked back, so re-fill it out\n                            const parameters = props.prevData[p][\"c2profileparameters\"].map( (c) => {\n                                if(c.parameter_type === 'Dictionary'){\n                                    const original = JSON.parse(c.default_value);\n                                    const fixedArray = c.value.map( (p) => {\n                                        // p looks like {\"name\": \"something\", \"key\": \"something\", \"value\": \"something\", \"custom\": true/false}\n                                        // we're missing the \"max\" limiter from the original that we need to add back in\n                                        const originalPiece = original.find( o => o[\"name\"] === p[\"name\"]);\n                                        if(originalPiece !== undefined){\n                                            return {...originalPiece, ...p, \"default_show\": p.value === \"\" ? false : true}\n                                        }\n                                        return {...p, \"default_show\": false}\n                                    });\n                                    // now that we've added in the `max` value for each of the keys we had, we need to add back in the original possibilities that we didn't select\n                                    const final = original.reduce( (prev, cur) => {\n                                        //console.log(\"looking for\", cur, \"in\", prev)\n                                        if(prev.findIndex( o => o[\"name\"] === cur[\"name\"]) > -1 ){\n                                            return [...prev]\n                                        }\n                                        return [...prev, {...cur, default_show: false, \"key\": cur.name === \"*\" ? \"\": cur.name, value: cur.default_value}]\n                                    }, [...fixedArray])\n                                    return {...c, value: final};\n                                    \n                                }\n                                return c;\n                            })\n                            \n                            parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                            return {...c2, \"selected\": props.prevData[p][\"selected\"], c2profileparameters: parameters};\n                        }\n                    }\n                }\n                \n                const parameters = c2.c2profileparameters.map( (param) => {\n                    if(param.format_string !== \"\"){\n                        const random = new RandExp(param.format_string).gen();\n                        return {...param, default_value: random, value: random}\n                    }else if(param.default_value !== \"\"){\n                        if(param.parameter_type === \"ChooseOne\"){\n                            return {...param, value: param.default_value.split(\"\\n\")[0]}\n                        }else if(param.parameter_type === \"Dictionary\"){\n                            let tmp = JSON.parse(param.default_value);\n                            let initial = tmp.reduce( (prev, op) => {\n                                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name, default_show: op.default_show} ];\n                            }, [] );\n                            return {...param, value: initial}\n                        }else if(param.parameter_type === \"Date\"){\n                            var tmpDate = new Date();\n                            if(param.default_value !== \"\"){\n                                tmpDate.setDate(tmpDate.getDate() + parseInt(param.default_value));\n                            }\n                            return {...param, value: tmpDate.toISOString().slice(0,10)}\n                        }else{\n                            return {...param, value: param.default_value}\n                        }\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                parameters.sort((a,b) => -b.description.localeCompare(a.description));\n                return {...c2, \"selected\": false, c2profileparameters: parameters};\n            });\n            profiles.sort((a, b) => -b.name.localeCompare(a.name))\n            //console.log(profiles);\n            setC2Profiles(profiles);\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    const finished = () => {\n        let allValid = true;\n        let includedC2 = false;\n        const adjustedC2 = c2Profiles.reduce( (prev, c2) => {\n            if(c2.selected){\n                const params = c2.c2profileparameters.map( (p) => {\n                    if(p.parameter_type === \"Dictionary\"){\n                        const values = p.value.filter(v => v.value !== \"\");\n                        return {...p, value: values};\n                    }else{\n                        return {...p};\n                    }\n                })\n                return [...prev, {...c2, c2profileparameters: params}];\n            }else{\n                return [...prev, {...c2}];\n            }\n        }, []);\n        c2Profiles.forEach( (c2) => {\n            if(c2.selected){\n                includedC2 = true;\n                c2.c2profileparameters.forEach( (param) => {\n                    if(param.error){\n                        snackActions.warning(c2.name + \"'s parameter \" + param.name + \" is invalid\");\n                        allValid = false;\n                    }\n                });\n            }\n        });\n        if(allValid){\n            //console.log(c2Profiles);\n            if(!includedC2){\n                snackActions.warning(\"Must select at least one C2 to include\");\n                return;\n            }\n            props.finished(adjustedC2);\n        }\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const toggleC2Selection = (evt, c2) => {\n        const updatedc2 = c2Profiles.map( (curc2) => {\n            if(c2.name === curc2.name){\n                return {...curc2, selected: !curc2.selected}\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const updateC2Parameter = (c2Name, parameterName, value, error) => {\n        const updatedc2 = c2Profiles.map( (curC2) => {\n            if(curC2.name === c2Name){\n                const c2params = curC2.c2profileparameters.map( (param) => {\n                    if (param.name === parameterName){\n                        return {...param, error, value}\n                    }\n                    return param;\n                });\n                return {...curC2, c2profileparameters: c2params};\n            }\n            return curC2;\n        });\n        setC2Profiles(updatedc2);\n    }\n    const [getInstanceValues] = useLazyQuery(getProfileInstaceQuery, {\n        onCompleted: (data) => {\n          const updates = data.c2profileparametersinstance.map( (cur) => {\n            let inst = {...cur, ...cur.c2profileparameter};\n            if(inst.parameter_type === \"Dictionary\" || inst.parameter_type === \"Array\"){\n                inst[\"value\"] = JSON.parse(inst[\"value\"]);\n            }\n            return inst;\n          })\n          updates.sort( (a, b) => a.name < b.name ? -1 : 1);\n          const updatedc2 = c2Profiles.map( (curc2) => {\n            if(updates[0].c2profile.name === curc2.name){\n                return {...curc2, c2profileparameters: updates};\n            }\n            return curc2;\n        });\n        setC2Profiles(updatedc2);\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to fetch instance data: \" + data);\n          console.log(data);\n        },\n        fetchPolicy: \"no-cache\"\n      })\n    const onChangeCreatedInstanceName = (evt, c2) => {\n        setSelectedInstance(evt.target.value);\n        if(evt.target.value !== \"\"){\n            const updatedc2 = c2Profiles.map( (curc2) => {\n                if(c2.name === curc2.name){\n                    curc2.c2profileparameters = [];\n                }\n                return curc2;\n            });\n            setC2Profiles(updatedc2);\n            getInstanceValues({variables: {name: evt.target.value, operation_id: me.user.current_operation_id}});\n        }\n      }\n      if (loading) {\n        return <div><CircularProgress /></div>;\n       }\n       if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n       }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select C2 Profiles\n            </Typography>\n            {\n                c2Profiles.map( (c2) => (\n                <React.Fragment key={\"step4c2switch\" + c2.id}>\n                    <FormControlLabel\n                      value=\"top\"\n                      control={\n                      <Switch\n                        checked={c2.selected}\n                        onChange={evt => toggleC2Selection(evt, c2)}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                        name=\"active\"\n                      />}\n                      label={c2.name}\n                      labelPlacement=\"top\"\n                      style={{display: \"inline\"}}\n                    />\n                    {c2.c2profileparametersinstances.length > 0 && c2.selected ? (\n                        <FormControl style={{width: \"100%\"}}>\n                        <InputLabel >Select an Existing Instance</InputLabel>\n                            <Select\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedInstance}\n                              label=\"Select an Existing Instance\"\n                              onChange={evt => onChangeCreatedInstanceName(evt, c2)}\n                            >\n                              <MenuItem value=\"\">New Instance</MenuItem>\n                            {\n                                c2.c2profileparametersinstances.map((opt, i) => (\n                                    <MenuItem key={\"buildparamopt\" + i} value={opt.instance_name}>{opt.instance_name}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </FormControl>\n                    ) : (null)}\n                    <Typography variant=\"body1\" align=\"left\" id=\"selectc2profiles\" component=\"div\" key={\"step4desc\" + c2.id}\n                        style={{\"marginLeft\": \"10px\"}}>\n                          {c2.description}\n                    </Typography>\n                    { c2.selected ? ( \n                        <CreatePayloadC2ProfileParametersTable key={\"step4table\" + c2.id} returnAllDictValues={false} {...c2} onChange={updateC2Parameter} />\n                        ):(null)\n                    }\n                </React.Fragment>\n                ))\n            }\n<br/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n        </div>\n    );\n} \n","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        console.log(data);\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                \n            }else{\n                if(data.payload[0].build_stderr !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const c2Profiles = props.buildOptions[3].reduce( (prev, c2) => {\n            if(c2.selected){\n                const parameters = c2.c2profileparameters.reduce( (prev, param) => {\n                    if(param.parameter_type === \"Dictionary\"){\n                        const final_values = param.value.map( (p) => {\n                            return {name: p.name, key: p.key, value: p.value, custom: p.custom}\n                        });\n                        return {...prev, [param.name]: final_values};\n                    }\n                    return {...prev, [param.name]: param.value}\n                }, {});\n                return [...prev, {\"c2_profile\": c2.name, \"c2_profile_parameters\": parameters}];\n            }\n            return prev;\n        }, []);\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": props.buildOptions[2],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": c2Profiles\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectCommands} from './Step3SelectCommands';\nimport {Step4C2Profiles} from './Step4C2Profiles';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Commands', 'Select C2 Profiles', 'Build']\n}\n\nexport function CreatePayload(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectCommands buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step4C2Profiles buildOptions={payload[1]} prevData={payload[3]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 4:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\n/*\n    Takes in props for Boolean of first/last\n    Takes in props for canceled\n    Takes in props for finished\n*/\nexport function CreatePayloadNavigationButtons(props){\n\n    return (\n        <div >\n            <Button\n                disabled={props.first}\n                color=\"primary\"\n                onClick={props.canceled}\n              >\n                Back\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={props.finished}\n                disabled={props.disableNext}\n              >\n                {props.last ? 'Create Payload' : 'Next'}\n              </Button>\n        </div>\n    );\n} \n","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesQuery {\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    id\n    supported_os\n  }\n}\n `;\n\nexport function Step1SelectOS(props){\n    const [os, setOS] = React.useState('');\n    const [osOptions, setOSOptions] = React.useState([]);\n    const { loading } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        const optionsReduced= data.payloadtype.reduce((currentOptions, payloadtype) => {\n            const adds = payloadtype.supported_os.split(\",\").reduce( (prev, os) => {\n                    if(!currentOptions.includes(os)){\n                        return [...prev, os];\n                    }\n                    return prev;\n                }, []);\n            return [...currentOptions, ...adds];\n        }, []);\n        const sortedOptions = optionsReduced.sort();\n        console.log(props.prevData);\n        if(props.prevData !== undefined){\n            setOS(props.prevData);\n        }\n        else if(os === \"\"){\n            setOS(sortedOptions[0]);\n        }\n        setOSOptions(sortedOptions);\n        if(sortedOptions.length === 0){\n            snackActions.warning(\"No Wrappers exist within Mythic. Try importing one first via the mythic-cli binary\")\n        }\n    },\n    onError: (data) => {\n        console.error(data);\n    }\n    });\n\n    if (loading) {\n     return <div><CircularProgress /></div>;\n    }\n    const finished = () => {\n        if(osOptions.length === 0){\n            snackActions.warning(\"No Wrappers exist within Mythic. Try importing one first via the mythic-cli binary\");\n            return;\n        }\n        props.finished(os);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Select Target Operating System\n        </Typography> <br/>\n        \n        <FormControl>\n            <Select\n              native\n              value={os}\n              onChange={evt => setOS(evt.target.value)}\n            >\n            {\n                osOptions.map((opt) => (\n                    <option key={\"step1\" + opt} value={opt}>{opt}</option>\n                ))\n            }\n            </Select>\n            <FormHelperText>Target Operating System</FormHelperText>\n        </FormControl><br/><br/>\n        <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React, {useEffect} from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {IconButton, Input, Button, MenuItem, Grid} from '@material-ui/core';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardDatePicker,\n  } from '@material-ui/pickers';\nimport 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {useTheme} from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport {Typography} from '@material-ui/core';\n\nexport function CreatePayloadParameter({onChange, parameter_type, default_value, name, required, verifier_regex, id, description, value: passedValue, returnAllDictValues}){\n    const [value, setValue] = React.useState(\"\");\n    const theme = useTheme();\n    const [dictValue, setDictValue] = React.useState([]);\n    const [dictOptions, setDictOptions] = React.useState([]);\n    const [dictSelectOptions, setDictSelectOptions] = React.useState([]);\n    const [dictSelectOptionsChoice, setDictSelectOptionsChoice] = React.useState(\"\");\n    const [chooseOptions, setChooseOptions] = React.useState([]);\n    const [dateValue, setDateValue] = React.useState(new Date());\n    const submitDictChange = (list) => {\n        const condensed = list.map( (opt) => {\n            if(returnAllDictValues){\n                return{\n                    custom: opt.name === \"*\" ? true : false,\n                    key: opt.key,\n                    name: opt.name,\n                    value: opt.value\n                }\n            }\n            return {[opt.key]: opt.value};\n        });\n        onChange(name, condensed, false);\n    };\n    useEffect( () => {\n        if(parameter_type === \"ChooseOne\"){\n            if(default_value){\n                const options = default_value.split(\"\\n\");\n                setValue(options[0]);\n                setChooseOptions(options); \n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n        }else if(parameter_type === \"Date\"){\n            if(default_value !== \"\"){\n                var tmpDate = new Date();\n                tmpDate.setDate(tmpDate.getDate() + parseInt(default_value));\n                onChangeDate(tmpDate);\n                setValue(-1);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && passedValue.includes(\"-\")){\n                console.log(\"passed date value: \", passedValue)\n                setDateValue(new Date(passedValue));\n                setValue(-1);\n                onChange(name, (new Date(passedValue)).toISOString().slice(0,10), \"\");\n            }\n        }else if(parameter_type === \"Dictionary\" ){\n            const options = JSON.parse(default_value);\n            setDictOptions(options);\n            let initial = options.reduce( (prev, op) => {\n                // find all the options that have a default_show of true\n                if(op.default_show){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];\n                }else{\n                    return [...prev];\n                }\n            }, [] );\n            submitDictChange(initial);\n            setDictValue(initial);\n            let dictSelectOptionsInitial = options.reduce( (prev, op) => {\n                //for each option, check how many instances of it are allowed\n                // then check how many we have currently\n                const count = initial.reduce( (preCount, cur) => {\n                    if(cur.name === op.name){return preCount + 1}\n                    return preCount;\n                }, 0);\n                if(op.max === -1 || op.max > count){\n                    return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name} ];  \n                }else{\n                    return [...prev]\n                }\n            }, []);\n            setDictSelectOptions(dictSelectOptionsInitial);\n            if (dictSelectOptionsInitial.length > 0){\n                setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined && typeof passedValue === \"object\"){\n                setDictValue(passedValue);\n                submitDictChange(passedValue);\n            }\n            \n        }else{\n            if(default_value !== undefined){\n                setValue(default_value);\n            }\n            if(passedValue !== \"\" && passedValue !== undefined){\n                setValue(passedValue);\n                onChange(name, passedValue, \"\");\n            }\n            \n        }\n    }, [default_value, parameter_type, name]);\n    \n    const onChangeValue = (evt) => {\n        setValue(evt.target.value);\n        onChange(name, evt.target.value, false);\n    }\n    const onChangeText = (name, value, error) => {\n        setValue(value);\n        onChange(name, value, error);\n    }\n    const testParameterValues = (curVal) => {\n        if( required && verifier_regex !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else if(verifier_regex !== \"\" && curVal !== \"\"){\n            return !RegExp(verifier_regex).test(curVal);\n        }else{\n            return false;\n        }\n    }\n    const onChangeDictVal = (evt, opt) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === opt){\n                return {...op, value: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const onChangeDictKey = (evt, index) => {\n        const updated = dictValue.map( (op, i) => {\n            if(i === index){\n                return {...op, key: evt.target.value};\n            }else{\n                return {...op}\n            }\n        } );\n        submitDictChange(updated);\n        setDictValue(updated);\n    }\n    const addDictValEntry = () => {\n        // add the selected value to our dict array\n        const choice = dictSelectOptionsChoice;\n        setDictValue([...dictValue, choice]);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictSelectOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = dictValue.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count += 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const removeDictEntry = (i) => {\n        const choice = dictValue[i];\n        const newValues = dictValue.filter( (opt, index) => {\n            if(i === index){return false};\n            return true;\n        });\n        setDictValue(newValues);\n        // updated the dict array to the new set of options\n        let dictSelectOptionsInitial = dictOptions.reduce( (prev, op) => {\n            //for each option, check how many instances of it are allowed\n            // then check how many we have currently\n            let count = newValues.reduce( (preCount, cur) => {\n                if(cur.name === op.name){return preCount + 1}\n                return preCount;\n            }, 0);\n            if(choice.name === op.name){count -= 1}\n            if(op.max === -1 || op.max > count){\n                return [...prev, {...op, value: op.default_value, key: op.name === \"*\" ? \"\": op.name}];    \n            }else{\n                return [...prev]\n            }\n        }, []);\n        submitDictChange(dictSelectOptionsInitial);\n        setDictSelectOptions(dictSelectOptionsInitial);\n        if (dictSelectOptionsInitial.length > 0){\n            setDictSelectOptionsChoice(dictSelectOptionsInitial[0]);\n        }\n    }\n    const onChangeDate = (date) => {\n        setDateValue(date)\n        onChange(name, date.toISOString().slice(0,10), \"\");\n    }\n    const getParameterObject = () => {\n        switch(parameter_type){\n            case \"Date\":\n                return (\n                    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                        <Grid container justify=\"flex-start\">\n                            <KeyboardDatePicker\n                            disableToolbar\n                            variant=\"inline\"\n                            format=\"MM/dd/yyyy\"\n                            margin=\"normal\"\n                            value={dateValue}\n                            onChange={onChangeDate}\n                            KeyboardButtonProps={{\n                                'aria-label': 'change date',\n                            }}\n                            />\n                        </Grid>\n                    </MuiPickersUtilsProvider>\n                )\n            case \"ChooseOne\":\n                return (\n                    <FormControl>\n                        <Select\n                          native\n                          value={value}\n                          onChange={onChangeValue}\n                        >\n                        {\n                            chooseOptions.map((opt, i) => (\n                                <option key={\"buildparamopt\" + i} value={opt}>{opt}</option>\n                            ))\n                        }\n                        </Select>\n                    </FormControl>\n                )\n            case \"Dictionary\":\n                return (\n                    <React.Fragment>\n                        {dictValue.map( (opt, i) => (\n                            <div key={\"dictval\" + i}>\n                                <IconButton onClick={(e) => {removeDictEntry(i)}}><DeleteIcon style={{color: theme.palette.error.main}} /> </IconButton>\n                                {opt.name === \"*\" ? \n                                    (\n                                        <Input style={{width:\"20%\"}} startAdornment={<Button disabled>Key</Button>} size=\"small\" value={opt.key} onChange={(e) => onChangeDictKey(e, i)}></Input>\n                                    ) : (\n                                        <Input variant=\"outlined\" size=\"small\" style={{width:\"20%\"}} startAdornment={<Button disabled>key</Button>} value={opt.key} ></Input>\n                                    ) \n                                }\n                                <Input style={{width:\"75%\"}} startAdornment={<Button disabled>value</Button>} size=\"small\" value={opt.value} onChange={(e) => onChangeDictVal(e, i)}></Input>\n                            </div>\n                        )\n                        )}\n                        {dictSelectOptions.length > 0 ? (\n                            <div>\n                                <IconButton onClick={addDictValEntry}> <AddCircleIcon style={{color: theme.palette.success.main}}  /> </IconButton>\n                                <Select size=\"small\" value={dictSelectOptionsChoice} onChange={(e) => setDictSelectOptionsChoice(e.target.value)}>\n                                    {dictSelectOptions.map( (selectOpt, i) => (\n                                        <MenuItem key={\"selectopt\" + name + \"i\"} value={selectOpt}>{selectOpt.name === \"*\" ? \"Custom Key\": selectOpt.name}</MenuItem>\n                                    ) )}\n                                </Select>\n                                \n                            </div>\n                        ) : (null) \n                        }\n                    </React.Fragment>\n                )\n            case \"String\":\n                return (\n                    <MythicTextField required={required} value={value} multiline={true}\n                        onChange={onChangeText} display=\"inline-block\" name={name}\n                        validate={testParameterValues} errorText={\"Must match: \" + verifier_regex}\n                    />\n                )\n           default:\n            return null\n        }\n    }\n    const [anchorPopoverEl, setAnchorPopoverEl] = React.useState(null);\n    const openDescription = Boolean(anchorPopoverEl);\n    const handlePopoverOpen = (event) => {\n        setAnchorPopoverEl(event.currentTarget);\n    }\n    const handlePopoverClose = () => {\n        setAnchorPopoverEl(null);\n    }\n    \n    return (\n            <TableRow key={\"buildparam\" + id}>\n                <TableCell>\n                    <Typography aria-haspopup=\"true\" onMouseEnter={handlePopoverOpen} onMouseLeave={handlePopoverClose}\n                        aria-owns={openDescription ? 'taskparam' + id + 'popover' : undefined}>\n                            {description}\n                    </Typography>\n                    <Popover id={'taskparam' + id + 'popover'} open={openDescription} anchorEl={anchorPopoverEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        onClose={handlePopoverClose}\n                        disableRestoreFocus\n                        elevation={5}\n                        style={{pointerEvents: 'none'}}\n                        PaperProps={{style: {padding: \"10px\", margin: \"5px\", backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}, variant: \"outlined\"}}\n                    >\n                        <Typography>{name.length > 0 ? name : \"No Description\"}</Typography>\n                    </Popover>\n                 </TableCell>\n                <TableCell>\n                    {getParameterObject()}\n                </TableCell>\n            </TableRow>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { CreatePayloadParameter } from './CreatePayloadParameter';\nimport Typography from '@material-ui/core/Typography';\n\n\nexport function CreatePayloadBuildParametersTable(props){\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Typography variant=\"h4\" align=\"left\" id=\"SettingsTable\" component=\"div\" \n            style={{\"display\": \"inline-block\", \"float\": \"left\", \"marginLeft\": \"10px\"}}>\n              Build Parameters\n            </Typography>    \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Build Parameter</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.buildParameters.map( (op) => (\n                    <CreatePayloadParameter key={\"buildparamtablerow\" + op.id} onChange={props.onChange} {...op} />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n} \n","import React, {  } from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport {CreatePayloadBuildParametersTable} from './CreatePayloadBuildParametersTable';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst GET_Payload_Types = gql`\nquery getPayloadTypesBuildParametersQuery($os: String!) {\n  payloadtype(where: {supported_os: {_ilike: $os}, deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    file_extension\n    supports_dynamic_loading\n    buildparameters(where: {deleted: {_eq: false} }) {\n      id\n      name\n      description\n      default_value: parameter\n      parameter_type\n      required\n      verifier_regex\n    }\n  }\n}\n `;\n\nexport function Step2SelectPayloadType(props){\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedPayloadTypeID, setSelectedPayloadTypeID] = React.useState(0);\n    const [fileExtension, setFileExtension] = React.useState('');\n    const [payloadTypeParameters, setSelectedPayloadTypeParameters] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Types, {variables:{os: \"%\" + props.buildOptions + \"%\"},\n        onCompleted: data => {\n            if(data.payloadtype.length > 0){\n                if(props.prevData !== undefined && props.prevData.os === props.buildOptions){\n\n                    setSelectedPayloadType(props.prevData.payload_type);\n                    setSelectedPayloadTypeID(props.prevData.payload_type_id);\n                    setFileExtension(props.prevData.file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === props.prevData.payload_type){\n                            const params = payload.buildparameters.map( (param) => {\n                                for(let p = 0; p < props.prevData.parameters.length; p++){\n                                    if(props.prevData.parameters[p][\"name\"] === param.name){\n                                        return {...param, error: param.required, value: props.prevData.parameters[p][\"value\"]}\n                                    }\n                                }\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                    if(payloadtypedata.length === 0){\n                        snackActions.warning(\"No available payload types exist for the selected OS\");\n                    }\n                }else{\n                    setSelectedPayloadType(data.payloadtype[0].ptype);\n                    setSelectedPayloadTypeID(data.payloadtype[0].id);\n                    setFileExtension(data.payloadtype[0].file_extension);\n                    const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n                        if(payload.ptype === data.payloadtype[0].ptype){\n                            const params = payload.buildparameters.map( (param) => {\n                                if(param.parameter_type === \"ChooseOne\"){\n                                    return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                                }\n                                return {...param, error: param.required, value: param.default_value}\n                            });\n                            return [...prev, ...params];\n                        }\n                        return [...prev];\n                    }, []);\n                    payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n                    setSelectedPayloadTypeParameters(payloadtypedata);\n                }\n                \n                \n            }\n        }\n    });\n\n    \n    const finished = () => {\n        const finishedParams = payloadTypeParameters.map( (param) => {\n            return {\"name\": param.name, \"value\": param.value}\n        });\n        if(selectedPayloadType === \"\"){\n            snackActions.warning(\"No payload type selected\");\n            return;\n        }\n        props.finished({\"payload_type\": selectedPayloadType, \n                        \"parameters\": finishedParams, \n                        \"payload_type_id\": selectedPayloadTypeID,\n                        \"file_extension\": fileExtension, \n                        \"os\": props.buildOptions});\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    const changePayloadType = (evt) => {\n        setSelectedPayloadType(evt.target.value);\n        const payloadtypedata = data.payloadtype.reduce( (prev, payload) => {\n            if(payload.ptype === evt.target.value){\n                setFileExtension(payload.file_extension);\n                setSelectedPayloadTypeID(payload.id);\n                const params = payload.buildparameters.map( (param) => {\n                    if(param.parameter_type === \"ChooseOne\"){\n                        return {...param, error: param.required, value: param.default_value.split(\"\\n\")[0]}\n                    }else{\n                        return {...param, error: param.required, value: param.default_value}\n                    }\n                    \n                });\n                return [...prev, ...params];\n            }\n            return [...prev];\n        }, []);\n        payloadtypedata.sort((a,b) => -b.description.localeCompare(a.description));\n        setSelectedPayloadTypeParameters(payloadtypedata);\n    }\n    const onChange = (name, value, error) => {\n        const newParams = payloadTypeParameters.map( (param) => {\n            if(param.name === name){\n                return {...param, value, error}\n            }\n            return {...param};\n        });\n        setSelectedPayloadTypeParameters(newParams);\n    }\n    if (loading) {\n        return <div><CircularProgress /></div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectospage\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Select Target Payload Type\n            </Typography>\n            <Select\n              native\n              value={selectedPayloadType}\n              onChange={changePayloadType}\n            >\n            {\n                data.payloadtype.map((opt) => (\n                    <option key={\"step2\" + opt.ptype} value={opt.ptype}>{opt.ptype}</option>\n                ))\n            }\n            </Select><br/>\n            <CreatePayloadBuildParametersTable onChange={onChange} buildParameters={payloadTypeParameters} />\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n        </div>\n    );\n} \n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nconst GET_Payload_Details = gql`\nquery GetPayloadDetails($payload_id: Int!, $operation_id: Int!) {\n  payload(where: {id: {_eq: $payload_id}, operation_id: {_eq: $operation_id}}) {\n    uuid\n    wrapped_payload_id\n    payloadtype{\n        ptype\n    }\n    payloadcommands {\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    filemetum {\n      filename_text\n      agent_file_id\n      id\n      md5\n      sha1\n    }\n    buildparameterinstances {\n      parameter\n      id\n      buildparameter {\n        description\n      }\n    }\n    os\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n  }\n}\n`;\nexport function DetailedPayloadTable(props){\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Payload Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n           <DetailedPayloadInnerTable {...props} />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\nfunction DetailedPayloadInnerTable(props){\n  const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {payload_id: props.payload_id, operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const commandState = data.payload[0].payloadcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            }).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0));\n            setCommands(commandState);\n            const buildParametersState = data.payload[0].buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.payload[0].c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n      <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.payload[0].payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.payload[0].os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.payload[0].uuid}</TableCell>\n                    </TableRow>\n                    { data.payload[0].filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.payload[0].filemetum.filename_text}</TableCell>\n                        </TableRow>\n                        \n                    ) : null }\n\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.payload[0].filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.payload[0].filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.payload[0].filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + props.payload_id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + props.payload_id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + props.payload_id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                          {cmd.enc_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Encryption Key: </b> {cmd.enc_key}\n                                          </React.Fragment>) }\n                                        {cmd.dec_key === null ? (null) : (<React.Fragment>\n                                            <br/><b>Decryption Key: </b> {cmd.dec_key}\n                                        </React.Fragment>) }\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                                \n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n                {commands.length > 0 &&\n                <React.Fragment>\n                    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Loaded Commands\n                      </Typography>\n                    </Paper>\n                    <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Command Name</TableCell>\n                        <TableCell>Mythic Version</TableCell>\n                        <TableCell>Loaded Version</TableCell>\n                        <TableCell>Documentation</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {\n                        commands.map( (cmd) => (\n                            <TableRow key={cmd.cmd + props.payload_id} hover>\n                                <TableCell>{cmd.cmd}</TableCell>\n                                <TableCell>{cmd.mythic}</TableCell>\n                                <TableCell>{cmd.payload}</TableCell>\n                                <TableCell>\n                                <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                                    href={\"/docs/agents/\" + data.payload[0].payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button>\n                                </TableCell>\n                            </TableRow>\n                        ))\n                        \n                      }\n                    </TableBody>\n                  </Table>\n                </React.Fragment>\n                }\n              {data.payload[0].wrapped_payload_id !== null &&\n                <React.Fragment>\n                  <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                      <Typography variant=\"h5\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                          Wrapped Payload Information\n                      </Typography>\n                    </Paper>\n                  <DetailedPayloadInnerTable payload_id={data.payload[0].wrapped_payload_id} />\n                </React.Fragment>\n              }\n          </React.Fragment>\n        )\n}","import React from 'react';\nimport {useQuery, gql} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { snackActions } from '../../utilities/Snackbar';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from '../Payloads/DetailedPayloadTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport InfoIcon from '@material-ui/icons/Info';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    width: \"100%\"\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\nconst GET_Payload_Types = gql`\nquery getWrappablePayloads($payloadType: Int!) {\n  payloadtype_by_pk(id: $payloadType) {\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n        payloads(where: {auto_generated: {_eq: false}, build_phase: {_eq: \"success\"}, deleted: {_eq: false}}) {\n          id\n          tag\n          uuid\n          creation_time\n          filemetum {\n            agent_file_id\n            filename_text\n            id\n          }\n        }\n      }\n    }\n  }\n}\n `;\n\nexport function Step3SelectPayload(props){\n    const [payloadOptions, setPayloadOptions] = React.useState([]);\n    const { data } = useQuery(GET_Payload_Types, {fetchPolicy: \"network-only\", variables: {payloadType: props.buildOptions[\"payload_type_id\"]},\n        onCompleted: () => {\n          if(data.payloadtype_by_pk.wrap_these_payload_types.length > 0){\n            let options = [];\n            for(let i = 0; i < data.payloadtype_by_pk.wrap_these_payload_types.length; i++){\n              for(let j = 0; j < data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads.length; j++){\n                options.push({ptype: data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.ptype, ...data.payloadtype_by_pk.wrap_these_payload_types[i].wrapped.payloads[j] })\n              }\n            }\n            setPayloadOptions(options);\n          }else{\n            snackActions.warning(\"No supported payload for that wrapper\");\n          }\n          \n        }\n    });\n    const finished = (selectedPayload) => {\n      if(selectedPayload.uuid === undefined){\n        snackActions.error(\"Can't continue without selecting a payload\");\n        return;\n      }\n      props.finished(selectedPayload.uuid);\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n    return (\n        <div >\n        <Typography variant=\"h3\" align=\"left\" id=\"selectcommands\" component=\"div\" \n            style={{ \"marginLeft\": \"10px\"}}>\n              Wrap Agent Into New Payload\n        </Typography> <br/>\n        <PayloadSelect payloadOptions={payloadOptions} first={props.first} last={props.last}\n          canceled={canceled} finished={finished}/>\n        </div>\n    );\n} \n\nfunction PayloadSelect(props) {\n  const classes = useStyles();\n  \n  const finished = (payload) => {\n    props.finished(payload);\n  }\nreturn (\n  <React.Fragment>\n      <TableContainer component={Paper}>\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Select</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.payloadOptions.map( (op) => (\n                    <PayloadsTableRow\n                        onSelected={finished}\n                        key={\"payload\" + op.id}\n                        payload={op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <div style={{paddingTop: \"20px\"}}>\n           <CreatePayloadNavigationButtons disableNext first={props.first} last={props.last} canceled={props.canceled} finished={finished} />\n        </div>\n      \n  </React.Fragment>\n);\n}\n\nexport function PayloadsTableRow(props){\n  const [openDetailedView, setOpenDetailedView] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const onSelected = () => {\n      props.onSelected(props.payload);\n  }\n  return (\n      <React.Fragment>\n          <TableRow key={\"payload\" + props.payload.uuid} hover>\n              <TableCell>\n              <Button size=\"small\" onClick={onSelected} color=\"primary\" variant=\"contained\">Select</Button>\n              </TableCell>\n              <TableCell>{toLocalTime(props.payload.creation_time, me.user.view_utc_time)}</TableCell>\n              <TableCell>{props.payload.filemetum.filename_text}</TableCell>\n              <TableCell>{props.payload.tag}</TableCell>\n              <TableCell>\n                  <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                      <InfoIcon />\n                  </IconButton>\n              </TableCell>\n          </TableRow>\n          <TableRow>\n          {openDetailedView ? (\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                onClose={()=>{setOpenDetailedView(false);}} \n                innerDialog={<DetailedPayloadTable {...props} payload_id={props.payload.id} onClose={()=>{setOpenDetailedView(false);}} />}\n            />\n          ) : (null) }\n        </TableRow>\n      </React.Fragment>\n      )\n}","import React, {useEffect, useState} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription NewPayloadsSubscription($fromNow: timestamp!) {\n  payload(limit: 1, where: {deleted: {_eq: false}, creation_time: {_gte: $fromNow}}, order_by: {creation_time: desc}) {\n    build_message\n    build_phase\n    build_stderr\n    build_stdout\n    uuid\n    tag\n    id\n    filemetum{\n        agent_file_id\n    }\n  }\n}\n `;\nconst useStyles =  makeStyles(theme => ({\n    root: {\n        [theme.breakpoints.up('sm')]: {\n            minWidth: '344px !important',\n        },\n    },\n    typography: {\n        fontWeight: 'bold',\n    },\n    actionRoot: {\n        padding: '8px 8px 8px 16px',\n    },\n    icons: {\n        marginLeft: 'auto',\n        float: \"right\"\n    },\n    expand: {\n        padding: '8px 8px',\n        transform: 'rotate(0deg)',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n    collapse: {\n        padding: 16,\n    },\n    checkIcon: {\n        fontSize: 20,\n        color: '#b3b3b3',\n        paddingRight: 4,\n    },\n    button: {\n        padding: 0,\n        textTransform: 'none',\n    },\n}));\n\nconst SnackMessage = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    \n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.success.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography}>Payload successfuly built!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        <Typography gutterBottom>Agent ready for download</Typography>\n                        <Button className={classes.button} download href={window.location.origin + \"/direct/download/\" + props.file_id}>\n                            <CheckCircleIcon className={classes.checkIcon} />\n                            Download now\n                        </Button>\n                    </Paper>\n                    <Paper className={classes.collapse}>\n                        <Button variant=\"outlined\" color=\"primary\" href=\"/new/payloads\">View on Payloads Page</Button>\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nconst SnackMessageError = React.forwardRef((props, ref) => {\n    \n    const theme = useTheme();\n    const classes = useStyles(theme);\n    const { closeSnackbar } = useSnackbar();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const handleDismiss = () => {\n        closeSnackbar(props.id);\n    };\n\n    return (\n        <SnackbarContent ref={ref} className={classes.root}>\n            <Card style={{backgroundColor: theme.palette.error.main}} >\n                <CardActions classes={{ root: classes.actionRoot }}>\n                    <Typography variant=\"subtitle2\" className={classes.typography} style={{color: \"white\"}}>Payload Failed to build!</Typography>\n                    <div className={classes.icons}>\n                        <IconButton\n                            aria-label=\"Show more\"\n                            className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                            onClick={handleExpandClick}\n                        >\n                            <ExpandMoreIcon />\n                        </IconButton>\n                        <IconButton className={classes.expand} onClick={handleDismiss}>\n                            <CloseIcon />\n                        </IconButton>\n                    </div>\n                </CardActions>\n                <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                    <Paper className={classes.collapse}>\n                        {props.display}\n                    </Paper>\n                </Collapse>\n            </Card>\n        </SnackbarContent>\n    );\n});\nexport function PayloadSubscriptionNotification(props) {\n    const [fromNow, setFromNow] = React.useState( (new Date().toISOString()));\n    const { loading, error, data } = useSubscription(subscribe_payloads, {variables: {fromNow}});\n\n    useEffect( () => {\n        if(!loading && !error && data && data.payload.length > 0){\n            if(data.payload[0].build_phase === \"success\"){\n                snackActions.dismiss();\n                snackActions.success(data.payload[0].build_message, {persist: true, content: key => <SnackMessage id={key} file_id={data.payload[0].filemetum.agent_file_id} />});\n            }else if(data.payload[0].build_phase === \"building\"){\n                snackActions.info(`Building payload ${data.payload[0].uuid}...`, {autoHideDuration: 5000});\n            }else{\n                if(data.payload[0].build_error !== \"\"){\n                    snackActions.error(data.payload[0].build_stderr, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_stderr} />});\n                }else{\n                    snackActions.error(data.payload[0].build_message, {persist: true, content: key => <SnackMessageError id={key} display={data.payload[0].build_message} />});\n                }\n            } \n        }else if(error){\n            console.log(error);\n            snackActions.error(\"Mythic encountered an error: \" + error.toString());\n        }\n    }, [loading, data, error]);\n    return (    \n       null\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport { gql, useMutation} from '@apollo/client';\nimport { CreatePayloadNavigationButtons} from './CreatePayloadNavigationButtons';\nimport Typography from '@material-ui/core/Typography';\nimport {PayloadSubscriptionNotification} from './PayloadSubscriptionNotification';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {snackActions} from '../../utilities/Snackbar';\n\n const create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\n\nexport function Step5Build(props){\n    const [filename, setFilename] = React.useState(\"\");\n    const [description, setDescription] = React.useState(\"\");\n    const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    useEffect( () => {\n        if(props.buildOptions[1][\"file_extension\"] !== \"\"){\n            setFilename(props.buildOptions[1][\"payload_type\"] + \".\" + props.buildOptions[1][\"file_extension\"]);\n        }else{\n            setFilename(props.buildOptions[1][\"payload_type\"] );\n        }\n        \n    }, [props.buildOptions]);\n    const onChangeFilename = (name, value, error) => {\n        setFilename(value);\n    }\n    const onChangeDescription = (name, value, error) => {\n        setDescription(value);\n    }\n    const finished = () => {\n        const buildParameters = props.buildOptions[1][\"parameters\"].map( (param) => {\n            return param;\n        });\n        const finishedPayload = {\n            \"selected_os\": props.buildOptions[0],\n            \"payload_type\": props.buildOptions[1][\"payload_type\"],\n            \"filename\": filename,\n            \"tag\": description,\n            \"commands\": [],\n            \"build_parameters\": buildParameters,\n            \"c2_profiles\": [],\n            \"wrapper\": true,\n            \"wrapped_payload\": props.buildOptions[2]\n            };\n        createPayloadMutation({variables: {payload: JSON.stringify(finishedPayload)}}).catch( (e) => {console.log(e)} );\n    }\n    const canceled = () => {\n        props.canceled();\n    }\n\n    return (\n        <div >\n            <Typography variant=\"h3\" align=\"left\" id=\"selectc2profiles\" component=\"div\" \n                style={{\"marginLeft\": \"10px\"}}>\n                  Payload Review\n            </Typography>\n            <br/>\n            <MythicTextField required={false} placeholder={\"Filename\"} value={filename} multiline={false} onChange={onChangeFilename} display=\"inline-block\"/>\n            <MythicTextField required={false} placeholder={\"description\"} value={description} multiline={false} onChange={onChangeDescription} display=\"inline-block\"/>\n            <CreatePayloadNavigationButtons first={props.first} last={props.last} canceled={canceled} finished={finished} />\n            <br/><br/>\n            <PayloadSubscriptionNotification/>\n        </div>\n    );\n} \n","import React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport {Step1SelectOS} from './Step1SelectOS';\nimport {Step2SelectPayloadType} from './Step2SelectPayloadType';\nimport {Step3SelectPayload} from './Step3SelectPayload';\nimport {Step5Build} from './Step5Build';\n\nfunction getSteps(){\n    return ['Select Target OS', 'Payload Type', 'Select Payload', 'Build']\n}\n\nexport function CreatePayloadWrapper(props){\n    const [payload, setPayload] = React.useState({}); \n    const [activeStep, setActiveStep] = React.useState(0);\n    const getStepContent = (step) => {\n          switch (step) {\n            case 0:\n              return <Step1SelectOS buildOptions={payload} prevData={payload[0]} finished={handleStepData} canceled={cancelStep} first={true} last={false}/>;\n            case 1:\n              return <Step2SelectPayloadType buildOptions={payload[0]} prevData={payload[1]} finished={handleStepData} canceled={cancelStep} first={false} last={false}/>;\n            case 2:\n              return <Step3SelectPayload buildOptions={payload[1]} prevData={payload[2]} finished={handleStepData} canceled={cancelStep} first={false} last={false} />;\n            case 3:\n              return <Step5Build buildOptions={payload} canceled={cancelStep} first={false} last={true} />;\n            default:\n              return 'Unknown step';\n          }\n        }\n      const handleStepData = (stepData) => {\n        setPayload({...payload, [activeStep]: stepData}); \n        handleNext();\n      }\n      const cancelStep = () => {\n        handleBack();\n      }\n      \n      const steps = getSteps();\n\n      const handleNext = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      };\n\n      const handleBack = () => {\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\n      };\n\n    return (\n        <div style={{height: \"calc(95vh)\"}}>\n            <Stepper activeStep={activeStep} alternativeLabel>\n                {steps.map((label, index) => (\n                  <Step key={label}>\n                    <StepLabel>{label}</StepLabel>\n                  </Step>\n                ))}\n              </Stepper>\n            {getStepContent(activeStep)}\n        </div>\n    );\n} \n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\n\nexport function EventFeedTableEventsActions(props){\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    \n    const onUpdateResolution = () => {\n        handleClose();\n        props.onUpdateResolution({id: props.id, resolved: !props.resolved});\n    }\n    const onUpdateLevel = () => {\n        handleClose();\n        props.onUpdateLevel({id:props.id});\n    }\n    const handleClose = () => {\n        setAnchorEl(null);\n      };\n    const onUpdateDeleted = () => {\n        handleClose();\n        props.onUpdateDeleted({id:props.id});\n    }\n    const getSurroundingEvents = () => {\n        handleClose();\n        props.getSurroundingEvents({id:props.id});\n    }\n    const handleClick = React.useCallback((e) => {\n        setAnchorEl(e.currentTarget)\n    }, []);\n    return (\n        <ListItemSecondaryAction>\n            <IconButton aria-controls={\"eventmenu\" + props.id} aria-haspopup=\"true\" onClick={handleClick}><MoreVertIcon/></IconButton>\n                <Menu elevation={5} id={\"eventmenu\" + props.id} anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleClose} >\n                    {\n                        props.level === \"warning\" && props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Unresolve</MenuItem>\n                        ) : ( props.level === \"warning\" && !props.resolved ? (\n                            <MenuItem onClick={onUpdateResolution}>Resolve</MenuItem>\n                            ) : (\n                            <MenuItem onClick={onUpdateLevel}>Make Warning</MenuItem>\n                            )\n                        )\n                    }\n                    <MenuItem onClick={getSurroundingEvents}>Get Surrounding Events</MenuItem>\n                    <MenuItem onClick={onUpdateDeleted}><DeleteIcon/>Delete</MenuItem>\n                </Menu>\n            </ListItemSecondaryAction>\n        )\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EventFeedTableEventsActions} from './EventFeedTableEventsActions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: '36ch',\n  },\n  inline: {\n    display: 'inline',\n  },\n}));\n\nexport function EventFeedTableEvents(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n\n    return (\n            <ListItem alignItems=\"flex-start\" style={{...props.style, }}>\n                <ListItemAvatar>\n                    <Avatar>\n                        {props.operator ? props.operator.username[0] : \"M\"}\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText disableTypography \n                    primary={\n                        <React.Fragment>\n                          <Typography\n                            component=\"span\"\n                            variant=\"body1\"\n                            className={classes.inline}\n                            style={{fontWeight: \"bold\", margin: 0, padding: 0}}\n                          >\n                            {props.operator ? props.operator.username : \"Mythic\"}\n                            {props.count > 1 ? \" ( \" + props.count + \" )\" : \"\"}\n                          </Typography>\n                          <Typography\n                            component=\"span\"\n                            variant=\"caption\"\n                            className={classes.inline}\n                            style={{margin: \"0 0 0 10px\"}}\n                            >\n                            {toLocalTime(props.timestamp, me.user.view_utc_time)}\n                            </Typography>\n                        </React.Fragment>\n                    }\n                    secondary={\n                          <pre style={{overflowX: \"auto\", width: \"max-content\", maxWidth: \"97%\", margin: \"0 0 0 0\", borderRadius: \"9px\", padding: \"5px\", backgroundColor: props.level === \"warning\" && props.resolved ? theme.palette.textBackgroundColorSuccess : (props.level === \"warning\" && !props.resolved ? theme.palette.textBackgroundColorError : (props.operator ? theme.palette.textBackgroundColor : theme.palette.textBackgroundColorMythic))}}>{props.message}</pre>\n                    }\n                    style={{}}\n                />\n                <EventFeedTableEventsActions id={props.id} level={props.level} \n                  onUpdateDeleted={props.onUpdateDeleted}\n                  onUpdateResolution={props.onUpdateResolution} \n                  onUpdateLevel={props.onUpdateLevel} \n                  getSurroundingEvents={props.getSurroundingEvents} \n                  resolved={props.resolved}/>\n\n            </ListItem>\n        )\n}\n\n\n","import React from 'react';\nimport SendIcon from '@material-ui/icons/Send';\nimport IconButton from '@material-ui/core/IconButton';\nimport {TextField} from '@material-ui/core';\n\nexport function EventFeedTableInput(props){\n    const [message, setMessage] = React.useState(\"\");\n    const onMessageChange = (evt) => {\n        evt.preventDefault();\n        setMessage(evt.target.value);\n    }\n    const onSubmitMessage = (e) => {\n        e.preventDefault();\n        if(message && message.length > 0){\n            props.onSubmitMessage(message);\n            setMessage(\"\");\n        }\n    } \n\n    return (          \n        <div style={{padding: \"0\", margin: \"0\", position: \"absolute\", bottom: 0, width: \"100%\"}}>\n            <form onSubmit={onSubmitMessage}>\n                <TextField InputProps={{endAdornment:\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitMessage}>\n                        <SendIcon/>\n                    </IconButton>\n                    }} \n                    fullWidth\n                    size=\"small\"\n                    style={{padding:0,margin:0}}\n                    variant=\"outlined\"\n                    value={message} onChange={onMessageChange}\n                    label=\"Type Message...\" \n                />\n            </form>\n        </div>  \n    )\n}\n\n","import React, { useEffect, useRef } from 'react';\nimport { EventFeedTableEvents } from './EventFeedTableEvents';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport { EventFeedTableInput } from './EventFeedTableInput';\nimport {Button} from '@material-ui/core';\nimport {VariableSizeList } from 'react-window';\nimport Autosizer from 'react-virtualized-auto-sizer';\n\nconst Row = ({data, index, style}) => {\n    const op = data[data.length - index - 1];\n    return (\n        <div style={style}>\n            <EventFeedTableEvents\n                {...op}\n            />\n        </div> \n    )\n};\n\nconst EventList = ({onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, operationeventlog}) => {\n    const listRef = React.createRef();\n    const getItemSize = (index) => {\n        const op = operationeventlog[operationeventlog.length - index - 1];\n        return 75 + (20 * (op[\"message\"].match(/\\n/g) || []).length);\n    }\n    const eventlogWithFunctions = operationeventlog.map( (oplog) => {\n        return {onUpdateDeleted, onUpdateLevel, onUpdateResolution, getSurroundingEvents, ...oplog}\n    });\n    useEffect( () => {\n        if(listRef.current){\n            listRef.current.resetAfterIndex(0);\n        }\n    }, [operationeventlog])\n    return (\n        <Autosizer>\n            {({height, width}) => (\n                <VariableSizeList\n                    ref={listRef}\n                    height={height-50}\n                    itemData={eventlogWithFunctions}\n                    itemCount={operationeventlog.length}\n                    width={width}\n                    itemSize={getItemSize}\n                    overscanCount={20}\n                    >\n                        {Row}\n                </VariableSizeList>\n            )}\n        </Autosizer>\n    )\n};\n\nexport function EventFeedTable(props){\n    const messagesEndRef = useRef(null);\n    const theme = useTheme();\n    \n    const onSubmitMessage = (message) => {\n        if(message && message.length > 0){\n            props.onSubmitMessage({level:\"info\", message});\n            scrollToBottom();\n        }\n    } \n    const scrollToBottom = () => {\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" })\n      }\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main,  color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Operational Event Messages\n                </Typography>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.loadMore()}}>Load More Events</Button>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.loadNextError()}}>Load All Errors</Button>\n                <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.resolveViewableErrors()}}>Resolve Viewable Errors</Button>\n                <Button variant=\"contained\" color={\"secondary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.resolveAllErrors()}}>Resolve All Errors</Button>\n            </Paper>\n            \n            <Paper elevation={5} style={{position: \"relative\", height: \"calc(90vh)\", backgroundColor: theme.body}} variant={\"elevation\"}>\n                <EventList \n                    onUpdateResolution={props.onUpdateResolution}\n                    onUpdateLevel={props.onUpdateLevel}\n                    onUpdateDeleted={props.onUpdateDeleted}\n                    getSurroundingEvents={props.getSurroundingEvents}\n                    operationeventlog={props.operationeventlog}/>\n                <div ref={messagesEndRef} />\n                <EventFeedTableInput onSubmitMessage={onSubmitMessage} />\n            </Paper>\n        </React.Fragment>\n    )\n}","import React  from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {EventFeedTable} from './EventFeedTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\nconst SURROUNDING_EVENTS = 5;\nconst EVENT_QUERY_SIZE = 100;\nconst GET_Event_Feed = gql`\nquery GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const SUB_Event_Feed = gql`\nsubscription GetOperationEventLogs($operation_id: Int!, $offset: Int!, $eventQuerySize: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}}, order_by: {id: desc}, limit: $eventQuerySize, offset: $offset) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\nconst GET_Surrounding_Events = gql`\nquery GetSurroundingOperationEventLogs($operation_id: Int!, $lower_id: Int!, $upper_id: Int!) {\n  operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, id: {_gt: $lower_id, _lt: $upper_id}}, order_by: {id: desc}) {\n    id\n    level\n    message\n    resolved\n    timestamp\n    count\n    operator {\n      id\n      username\n    }\n  }\n}\n `;\n const Create_Operational_Event_Log = gql`\nmutation CreateOperationEventLog($message: String!, $level: String!) {\n  insert_operationeventlog_one(object:{level: $level, message: $message}) {\n    id\n  }\n}\n `;\n const GET_Event_Feed_Next_Error = gql`\n query GetOperationEventLogError($operation_id: Int!) {\n   operationeventlog(where: {operation_id: {_eq: $operation_id}, deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}}, order_by: {id: desc}) {\n     id\n     level\n     message\n     resolved\n     timestamp\n     count\n     operator {\n       id\n       username\n     }\n   }\n }\n  `;\n  const Update_Deleted = gql`\nmutation UpdateDeletedOperationEventLog($id: Int!) {\n  update_operationeventlog(where:{id: {_eq: $id}}, _set: {deleted: true}) {\n    returning{\n        id\n        deleted\n    }\n  }\n}\n `;\n const Update_Resolution = gql`\nmutation UpdateResolutionOperationEventLog($id: Int!, $resolved: Boolean!) {\n  update_operationeventlog_by_pk(pk_columns:{id: $id}, _set: {resolved: $resolved}) {\n    id\n    resolved\n  }\n}\n `;\n const Update_Level = gql`\nmutation UpdateLevelOperationEventLog($id: Int!) {\n  update_operationeventlog_by_pk(pk_columns: {id: $id}, _set: {level: \"warning\"}) {\n    id\n    level\n  }\n}\n `;\n const Update_ResolveViewableErrors = gql`\n mutation UpdateResolveViewableErrorsOperationEventLog($ids: [Int]!) {\n   update_operationeventlog(where:{id: {_in: $ids}}, _set: {resolved: true}) {\n     returning{\n         id\n         resolved\n     }\n   }\n }\n  `;\n  const Update_ResolveAllErrors = gql`\n  mutation UpdateResolveAllErrorsOperationEventLog($operation_id: Int!) {\n    update_operationeventlog(where: {resolved: {_eq: false}, operation_id: {_eq: $operation_id}}, _set: {resolved: true}) {\n      returning{\n          id\n          resolved\n      }\n    }\n  }\n   `;\nexport function EventFeed(props){\n  const me = useReactiveVar(meState);\n  const [operationeventlog, setOperationEventLog] = React.useState([]);\n  const [offset, setOffset] = React.useState(0);\n  useSubscription(SUB_Event_Feed, {\n    variables: {operation_id: me.user.current_operation_id, offset: 0, eventQuerySize: EVENT_QUERY_SIZE}, fetchPolicy: \"network-only\",\n    shouldResubscribe: true,\n    onSubscriptionData: ({subscriptionData}) => {\n      if(offset === 0){\n        setOffset(subscriptionData.data.operationeventlog.length);\n      }\n      const newEvents = subscriptionData.data.operationeventlog.reduce( (prev, cur) => {\n        if(prev.find(({ id }) => id === cur.id)){\n          let indx = prev.findIndex( ({id}) => id === cur.id);\n          let updatingPrev = [...prev];\n          updatingPrev[indx] = cur;\n          return [...updatingPrev];\n        }\n        return [...prev, cur];\n      }, [...operationeventlog]);\n      newEvents.sort((a,b) => (a.id > b.id) ? -1 : ((b.id > a.id) ? 1 : 0));\n      setOperationEventLog(newEvents);\n    }\n});\n  const [getMoreTasking] = useLazyQuery(GET_Event_Feed, {\n      onError: data => {\n          console.error(data)\n      },\n      fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        snackActions.dismiss();\n          if(data.operationeventlog.length === 0){\n            snackActions.info(\"No more events\");\n            return;\n          }\n          const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n            if(prev.find(({ id }) => id === cur.id)){\n              return [...prev];\n            }\n            return [...prev, cur];\n          }, [...operationeventlog]);\n          setOffset(offset + EVENT_QUERY_SIZE);\n          setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more events\");\n      }\n  });\n  const [getSurroundingEventQuery] = useLazyQuery(GET_Surrounding_Events, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n        snackActions.dismiss();\n        let foundNew = false;\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          foundNew = true;\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        if(foundNew){\n          snackActions.success(\"Successfully fetched surrounding events\");\n        }else{\n          snackActions.info(\"No additional surrounding events\");\n        }\n        \n    }\n});\n  const [getNextError] = useLazyQuery(GET_Event_Feed_Next_Error, {\n    onError: data => {\n        console.error(data)\n    },\n    fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      snackActions.dismiss();\n        if(data.operationeventlog.length === 0){\n          snackActions.info(\"No more events\");\n          return;\n        }\n        const newEvents = data.operationeventlog.reduce( (prev, cur) => {\n          if(prev.find(({ id }) => id === cur.id)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }, [...operationeventlog]);\n        setOperationEventLog(newEvents);\n        snackActions.success(\"Successfully fetched more errors\");\n    }\n  });\n  const [newOperationEventLog] = useMutation(Create_Operational_Event_Log);\n  const [updateDeleted] = useMutation(Update_Deleted, {\n    update: (cache, {data}) => {\n        const removedMessage = data.update_operationeventlog.returning[0];\n        const newMessages = operationeventlog.filter(op => (op.id !== removedMessage.id));\n        setOperationEventLog(newMessages);\n        snackActions.success(\"Successfully deleted event log\");\n    }\n  });\n  const [updateResolution] = useMutation(Update_Resolution, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, resolved: updatedMessage.resolved};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateLevel] = useMutation(Update_Level, {\n    update: (cache, {data}) => {\n      const updatedMessage = data.update_operationeventlog_by_pk;\n      const updatedMessages = operationeventlog.map( (log) => {\n        if(log.id === updatedMessage.id){\n          return {...log, level: updatedMessage.level};\n        }\n        return log;\n      });\n      setOperationEventLog(updatedMessages);\n    }\n  });\n  const [updateResolveViewable] = useMutation(Update_ResolveViewableErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss();\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Viewable Errors to Resolve\");\n      }\n      \n    }\n  });\n  const [updateResolveAllErrors] = useMutation(Update_ResolveAllErrors, {\n    update: (cache, {data}) => {\n      snackActions.dismiss()\n      if(data.update_operationeventlog.returning.length > 0){\n        snackActions.success(\"Resolved All Errors\");\n        const updated_ids = data.update_operationeventlog.returning.map( (evt) => evt.id);\n        const updatedMessages = operationeventlog.map( (log) => {\n          if(updated_ids.includes(log.id)){\n            return {...log, resolved: true};\n          }else{\n            return {...log}\n          }\n        });\n        setOperationEventLog(updatedMessages);\n      }else{\n        snackActions.info(\"No Errors to Resolve\");\n      }\n      \n    }\n  });\n  const onUpdateDeleted = ({id}) => {\n      snackActions.info(\"Deleting event log...\");\n      updateDeleted({variables: {id}});\n  }\n  const onSubmitMessage = ({level, message}) => {\n      newOperationEventLog({variables: {level, message}});\n  }\n  const onUpdateResolution = ({id, resolved}) => {\n    updateResolution({variables: {id, resolved}});\n  }\n  const onUpdateLevel = ({id}) => {\n    updateLevel({variables: {id}})\n  }\n  const loadMore = () => {\n    snackActions.info(\"Loading more events...\");\n    getMoreTasking({variables: {operation_id: me.user.current_operation_id, offset: offset, eventQuerySize: EVENT_QUERY_SIZE}})\n  }\n  const loadNextError = () => {\n    snackActions.info(\"Loading more errors...\");\n    getNextError({variables: {operation_id: me.user.current_operation_id}})\n  }\n  const getSurroundingEvents = ({id}) => {\n    snackActions.info(\"Loading surrounding events...\");\n    getSurroundingEventQuery({variables: {lower_id: id - SURROUNDING_EVENTS, upper_id: id + SURROUNDING_EVENTS, operation_id: me.user.current_operation_id}})\n  }\n  const resolveViewableErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    const resolveIds = operationeventlog.reduce( (prev, cur) => {\n      if(cur.level === \"warning\" && !cur.resolved){\n        return [...prev, cur.id];\n      }else{\n        return [...prev];\n      }\n    }, []);\n    updateResolveViewable({variables: {ids: resolveIds}});\n  }\n  const resolveAllErrors = () => {\n    snackActions.info(\"Resolving Errors...\");\n    updateResolveAllErrors({variables: {operation_id: me.user.current_operation_id}});\n  }\n  return (\n      <EventFeedTable onSubmitMessage={onSubmitMessage} operationeventlog={operationeventlog} loadMore={loadMore} loadNextError={loadNextError}\n                      onUpdateDeleted={onUpdateDeleted} onUpdateResolution={onUpdateResolution} onUpdateLevel={onUpdateLevel} getSurroundingEvents={getSurroundingEvents}\n                      resolveViewableErrors={resolveViewableErrors} resolveAllErrors={resolveAllErrors}\n      />\n  );\n}\n","import React, { useEffect, useRef } from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Switch from '@material-ui/core/Switch';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\n\n\nexport function OperationTableRowUpdateOperatorsDialogRow(props){\n    const [checked, setChecked] = React.useState(false);\n    const [viewMode, setViewMode] = React.useState(\"operator\");\n    const [blockListName, setBlockListName] = React.useState({});\n    const options = [\"operator\", \"spectator\", \"lead\"];\n    const inputRef = useRef(null); \n    useEffect( () => {\n      setChecked(props.operator.checked);\n      setViewMode(props.operator.view_mode);\n      console.log(props.operator);\n      if(!props.operator.disabledcommandsprofile){\n        setBlockListName(\"\")\n      }else{\n        setBlockListName(props.operator.disabledcommandsprofile.name);\n      }\n      \n\n    }, [props.operator]);\n    const onBoolChange = (event) => {\n      setChecked(event.target.checked);\n      props.updateOperator({...props.operator, checked: event.target.checked, view_mode: viewMode});\n    }\n    const handleChange = (event) => {\n      setViewMode(event.target.value);\n      props.updateOperator({...props.operator, checked, view_mode: event.target.value});\n    };\n    const handleBlockListChange = (event) => {\n      setBlockListName(event.target.value);\n      const blockListItemIndex = props.commandBlockLists.findIndex( cbl => cbl.name === event.target.value);\n      if(blockListItemIndex > -1){\n        props.updateOperator({...props.operator, checked, disabledcommandsprofile: props.commandBlockLists[blockListItemIndex]});\n      }else{\n        props.updateOperator({...props.operator, checked, disabledcommandsprofile: null});\n      }\n      \n    }\n    return (\n        <React.Fragment>\n            <TableRow>\n                <TableCell><Switch checked={checked} onChange={onBoolChange} color=\"secondary\" /></TableCell>\n                <TableCell>{props.operator.username}</TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={viewMode}\n                        onChange={handleChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        {options.map( (opt) => (\n                            <MenuItem value={opt} key={opt}>{opt}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n                <TableCell>\n                  {checked ? (\n                    <FormControl style={{width: \"100%\"}}>\n                      <InputLabel ref={inputRef}>Block List Options</InputLabel>\n                      <Select\n                        labelId=\"demo-dialog-select-label\"\n                        id=\"demo-dialog-select\"\n                        value={blockListName}\n                        onChange={handleBlockListChange}\n                        input={<Input style={{width: \"100%\"}}/>}\n                      >\n                        <MenuItem value={-1} key={\"None\"}>None</MenuItem>\n                        {props.commandBlockLists.map( (opt) => (\n                            <MenuItem value={opt.name} key={props.operator.username + opt.name}>{opt.name}</MenuItem>\n                        ) )}\n                      </Select>\n                    </FormControl>\n                  ) : (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React, {  } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation, useQuery} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport {OperationTableRowUpdateOperatorsDialogRow} from './OperationTableRowUpdateOperatorsDialogRow';\n\nconst GET_Operations = gql`\nquery GetOperation($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      disabledcommandsprofile {\n        name\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n  disabledcommandsprofile(where: {operation_id: {_eq: $operation_id}}, distinct_on: name, order_by: {name: asc}) {\n    name\n    id\n  }\n}\n`;\nconst Update_Lead = gql`\nmutation updateLeadMutation($operation_id: Int!, $admin_id: Int!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {admin_id: $admin_id}) {\n    admin {\n      id\n      username\n    }\n    id\n  }\n}\n`;\nconst Update_OperatorViewMode = gql`\nmutation updateOperatorViewMode($operatoroperation_id: Int!, $view_mode: String!, $disabledcommandsprofile: Int) {\n  update_operatoroperation_by_pk(pk_columns: {id: $operatoroperation_id}, _set: {view_mode: $view_mode, base_disabled_commands_id: $disabledcommandsprofile}) {\n    id\n    view_mode\n  }\n}`;\nconst Remove_OperatorFromOperation = gql`\nmutation removeOperatorsFromOperation($operatoroperation_ids: [Int!]!) {\n  delete_operatoroperation(where: {id: {_in: $operatoroperation_ids}}) {\n    returning {\n      id\n    }\n  }\n}`;\nconst Add_OperatorsToOperation = gql`\nmutation addNewOperators($operators: [operatoroperation_insert_input!]!) {\n  insert_operatoroperation(objects: $operators) {\n    returning {\n      id\n    }\n  }\n}`;\nexport function OperationTableRowUpdateOperatorsDialog(props) {\n    const [operators, setOperators] = React.useState([]);\n    const [admin, setAdmin] = React.useState({});\n    const [originalOperators, setOriginalOperators] = React.useState([]);\n    const [commandBlockLists, setCommandBlockLists] = React.useState([]);\n    useQuery(GET_Operations, {variables: {operation_id: props.id}, fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const allOperators = data.operator.map( (operator) => {\n          return {...operator, checked: false}\n        });\n        setOriginalOperators(data.operation_by_pk.operatoroperations);\n        setAdmin(data.operation_by_pk.admin);\n        const updateAssignments = allOperators.map( (operator) => {\n          const assigned = data.operation_by_pk.operatoroperations.find( (op) => op.operator.id === operator.id );\n          if( assigned ){\n            if(assigned.operator.id === data.operation_by_pk.admin.id){\n              return {...operator, checked: true, view_mode: \"lead\", operatoroperation_id: assigned.id, disabledcommandsprofile: assigned.disabledcommandsprofile};\n            }\n            return {...operator, checked: true, view_mode: assigned.view_mode, operatoroperation_id: assigned.id, disabledcommandsprofile: assigned.disabledcommandsprofile};\n          }\n          return {...operator, view_mode: \"operator\"};\n        });\n        updateAssignments.sort( (a,b) => a.username > b.username ? 1 : -1)\n        setOperators(updateAssignments);\n        const blockListNames = [...data.disabledcommandsprofile];\n        setCommandBlockLists(blockListNames)\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to get operational data\");\n        console.error(data);\n      }\n    });\n    const [updateOperationLead] = useMutation(Update_Lead, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated Lead\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operation\");\n        console.log(\"error updating operation\", data);\n      }\n    })\n    const [addOperators] = useMutation(Add_OperatorsToOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully added operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to add operators\");\n        console.error(\"error adding operators to operation\", data);\n      }\n    })\n    const [removeOperatorsMutation] = useMutation(Remove_OperatorFromOperation, {\n      onCompleted: (data) => {\n        snackActions.success(\"Sucessfully removed operators\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to remove operators\");\n        console.error(\"error removing operators from operation\", data);\n      }\n    })\n    const [updateOperatorViewMode] = useMutation(Update_OperatorViewMode, {\n      onCompleted: (data) => {\n        snackActions.success(\"Successfully updated operator view mode\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update operator view mode\");\n        console.error(\"failed to update view mode: \", data);\n      }\n    })\n    const onAccept = () =>{\n      // make sure there is only one with view_mode of \"lead\"\n      //   set that operator as the lead, add/remove the other operators\n      const newAdmin = operators.find( (op) => op.view_mode === \"lead\");\n      if(!newAdmin){\n        snackActions.error(\"No Lead for the operation is set\");\n        return;\n      }\n      if(newAdmin.id !== admin.id){\n        updateOperationLead({variables: {\n          operation_id: props.id,\n          admin_id: newAdmin.id\n        }});\n      }\n      // now loop through the props.assignedOperators to see \n      let newOperators = [];\n      let removeOperators = [];\n      operators.forEach( (op) => {\n        let oldMatch = originalOperators.find( (oop) => oop.operator.id === op.id);\n        if(oldMatch){\n          // op was listed in the original set, so we're looking to update or remove based on checked/view_mode\n          if(op.checked){\n            // op is still checked, so just a potential update\n            if(op.view_mode !== oldMatch.view_mode || op.disabledcommandsprofile !== oldMatch.disabledcommandsprofile){\n              updateOperatorViewMode({variables: {operatoroperation_id: oldMatch.id, view_mode: op.view_mode, disabledcommandsprofile: op.disabledcommandsprofile?op.disabledcommandsprofile.id:null}});\n            }\n          }\n          else{\n            // op is unchecked, but was originally listed, so remove this operator\n            removeOperators.push(oldMatch.id);\n          }\n          //op was checked then, is checked now, and nothing changed. just move on\n        }else{\n          //op wasn't listed, so if checked is true, then we want to add them to the operation\n          if(op.checked){\n            newOperators.push({operation_id: props.id, operator_id: op.id, view_mode: op.view_mode});\n          }\n          // op wasnt checked then, isn't checked now, so move on\n        }\n      });\n      if(newOperators.length > 0){\n        addOperators({variables: {operators: newOperators}});\n      }\n      if(removeOperators.length > 0){\n        removeOperatorsMutation({variables: {operatoroperation_ids: removeOperators}});\n      }      \n      props.onClose();\n    }\n    const updateOperator = (op) => {\n      let updates = [...operators];\n      if(op.view_mode === \"lead\"){\n        //make sure nobody else has this, if they do, demote them down to \"operator\"\n        updates = updates.map( (operator) => {\n          if(operator.view_mode === \"lead\"){\n            return {...operator, view_mode: \"operator\"}\n          }\n          return {...operator}\n        });\n      }\n      updates = updates.map( (operator) => {\n        if(operator.id === op.id){\n          return {...op};\n        }\n        return {...operator};\n      });\n      setOperators(updates);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify Operator Assignments</DialogTitle>\n        <DialogContent dividers={true}>\n          <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>   \n              <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"8rem\"}}>Assign to Operation</TableCell>\n                          <TableCell style={{width: \"8rem\"}}>Operator</TableCell>\n                          <TableCell style={{width: \"10rem\"}}>Role</TableCell>\n                          <TableCell >Block List</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                  \n                  {operators.map( (op) => (\n                      <OperationTableRowUpdateOperatorsDialogRow\n                          key={\"operator\" + op.id} operator={op} updateOperator={updateOperator} commandBlockLists={commandBlockLists}\n                      />\n                  ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Switch from '@material-ui/core/Switch';\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-noconflict/mode-json';\nimport 'ace-builds/src-noconflict/theme-monokai';\nimport 'ace-builds/src-noconflict/theme-xcode';\n\nconst GET_OperationData = gql`\nquery GetOperations($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    name\n    id\n    channel\n    display_name\n    icon_emoji\n    icon_url\n    webhook\n    webhook_message\n    complete\n  }\n}\n`;\n\nexport function OperationTableRowNotificationsDialog(props) {\n    const [name, setName] = React.useState(\"\");\n    const [channel, setChannel] = React.useState(\"\");\n    const [displayName, setDisplayName] = React.useState(\"\");\n    const [iconEmoji, setIconEmoji] = React.useState(\"\");\n    const [iconURL, setIconURL] = React.useState(\"\");\n    const [webhook, setWebhook] = React.useState(\"\");\n    const [webhookMessage, setWebhookMessage] = React.useState(\"\");\n    const [complete, setComplete] = React.useState(false);\n    \n    useQuery(GET_OperationData, {\n      fetchPolicy: \"no-cache\",\n      variables: {operation_id: props.id},\n      onCompleted: (data) => {\n        let webhookMessage = data.operation_by_pk.webhook_message;\n        try{\n          webhookMessage = JSON.stringify(JSON.parse(webhookMessage), null, 4);\n        }catch(error){\n          \n        }\n          setName(data.operation_by_pk.name);\n          setChannel(data.operation_by_pk.channel);\n          setDisplayName(data.operation_by_pk.display_name);\n          setIconEmoji(data.operation_by_pk.icon_emoji);\n          setIconURL(data.operation_by_pk.icon_url);\n          setWebhook(data.operation_by_pk.webhook);\n          setWebhookMessage(webhookMessage);\n          setComplete(data.operation_by_pk.complete);\n      },\n      onError: () => {\n        snackActions.error(\"Failed to fetch data\");\n      }\n    });\n    const onTextChange = (name, value, error) => {\n      switch(name){\n        case \"name\":\n          setName(value);\n          break;\n        case \"Webhook Channel\":\n          setChannel(value);\n          break;\n        case \"Webhook Display Name\":\n          setDisplayName(value);\n          break;\n        case \"Webhook Icon Emoji\":\n          setIconEmoji(value);\n          break;\n        case \"Webhook Icon URL\":\n          setIconURL(value);\n          break;\n        case \"Webhook URL\":\n          setWebhook(value);\n          break;\n        case \"Webhook POST Message\":\n          setWebhookMessage(value);\n          break;\n        default:\n          break;\n      }\n    }\n    const onEditorChange = (value, event) => {\n      setWebhookMessage(value);\n    }\n    const onBoolChange = (event) => {\n      setComplete(event.target.checked);\n    }\n    const onAccept = () =>{\n      props.onUpdateOperation({\n        operation_id: props.id,\n        name: name,\n        channel: channel,\n        display_name: displayName,\n        icon_emoji: iconEmoji,\n        icon_url: iconURL,\n        webhook: webhook,\n        webhook_message: webhookMessage,\n        complete: complete\n      });\n      props.onClose();\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Modify {name}</DialogTitle>\n        <DialogContent dividers={true} style={{maxHeight: \"calc(70vh)\"}}>\n          <DialogContentText>\n            Use this dialog to update some information about an operation.\n          </DialogContentText>\n          <MythicTextField\n            autoFocus\n            value={name}\n            onChange={onTextChange}\n            margin=\"dense\"\n            name=\"name\"\n          />\n          Complete Operation? <Switch checked={complete} onChange={onBoolChange} color=\"secondary\" />\n          <MythicTextField\n            margin=\"dense\"\n            value={channel}\n            onChange={onTextChange}\n            name=\"Webhook Channel\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={displayName}\n            onChange={onTextChange}\n            name=\"Webhook Display Name\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconEmoji}\n            onChange={onTextChange}\n            name=\"Webhook Icon Emoji\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={iconURL}\n            onChange={onTextChange}\n            name=\"Webhook Icon URL\"\n          />\n          <MythicTextField\n            margin=\"dense\"\n            value={webhook}\n            onChange={onTextChange}\n            name=\"Webhook URL\"\n          />\n          <AceEditor \n              mode=\"json\"\n              theme={\"monokai\"}\n              onChange={onEditorChange}\n              fontSize={14}\n              showGutter={true}\n              maxLines={20}\n              highlightActiveLine={true}\n              value={webhookMessage}\n              width={\"100%\"}\n              setOptions={{\n                showLineNumbers: true,\n                tabSize: 4,\n                useWorker: false\n              }}/>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={onAccept} variant=\"contained\" color=\"secondary\">\n            Update\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { } from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { OperationTableRowUpdateOperatorsDialog } from './OperationTableRowUpdateOperatorsDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar, useMutation, gql} from '@apollo/client';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport {OperationTableRowNotificationsDialog} from './OperationTableRowNotificationsDialog';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\n\nconst updateCurrentOpertionMutation = gql`\nmutation updateCurrentOpertionMutation($operator_id: Int!, $operation_id: Int!) {\n  updateCurrentOperation(user_id: $operator_id, operation_id: $operation_id) {\n    status\n    error\n    operation_id\n  }\n}\n`;\nexport function OperationTableRow(props){\n    const [openUpdateNotifications, setOpenUpdateNotifications] = React.useState(false);\n    const [openUpdateOperators, setOpenUpdateOperators] = React.useState(false);\n    const [openChangeCurrentOperation, setOpenChangeCurrentOperation] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [updateCurrentOperation] = useMutation(updateCurrentOpertionMutation, {\n      onCompleted: (data) => {\n        if(data.updateCurrentOperation.status === \"success\"){\n          meState({...meState, user: {...meState[\"user\"], current_operation_id: data.updateCurrentOperation.operation_id, current_operation_name: data.updateCurrentOperation.operation_name}})\n          snackActions.success(\"Updated current operation\");\n        }else{\n          snackActions.error(data.updateCurrentOperation.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to update current operation\");\n        console.error(data);\n      }\n    })\n    const makeCurrentOperation = () => {\n      updateCurrentOperation({variables: {operator_id: me.user.user_id, operation_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={props.id} hover>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateNotifications(true);}} startIcon={<EditIcon/>} color={props.complete ? \"secondary\" : \"primary\"} variant=\"contained\">Edit</Button>\n                {openUpdateNotifications && \n                    <MythicDialog open={openUpdateNotifications} fullWidth maxWidth={\"lg\"}\n                        onClose={()=>{setOpenUpdateNotifications(false);}} \n                        innerDialog={<OperationTableRowNotificationsDialog onClose={()=>{setOpenUpdateNotifications(false);}} id={props.id} onUpdateOperation={props.onUpdateOperation} />}\n                     />\n                }\n                </TableCell>\n                <TableCell><Button size=\"small\" onClick={()=>{setOpenUpdateOperators(true);}} startIcon={<AssignmentIndIcon/>} color={props.complete ? \"secondary\" : \"primary\"} variant=\"contained\">Edit</Button>\n                {openUpdateOperators && \n                    <MythicDialog open={openUpdateOperators} maxHeight={\"calc(80vh)\"} fullWidth maxWidth={\"md\"}\n                        onClose={()=>{setOpenUpdateOperators(false);}} \n                        innerDialog={<OperationTableRowUpdateOperatorsDialog id={props.id} onClose={()=>{setOpenUpdateOperators(false);}}/>}\n                     />\n                }\n                </TableCell>\n                <TableCell>{props.name} {props.complete ? \" (Completed) \" : \"\"}</TableCell>\n                <TableCell>{props.admin.username}</TableCell>\n                <TableCell>\n                <Button size=\"small\" startIcon={<AssessmentIcon/>} onClick={() => {snackActions.warning(\"Not Implemented\")}} color=\"primary\" variant=\"contained\">Analysis</Button>\n                </TableCell>\n                <TableCell>{props.id === me.user.current_operation_id ? (\"Current Operation\") : (\n                  <React.Fragment>\n                    <Button size=\"small\"startIcon={<PlayArrowIcon/>} onClick={()=>{setOpenChangeCurrentOperation(true);}} color=\"primary\" variant=\"contained\">Make Current</Button>\n                    {openChangeCurrentOperation &&\n                      <MythicConfirmDialog onClose={() => {setOpenChangeCurrentOperation(false);}} onSubmit={makeCurrentOperation} \n                        open={openChangeCurrentOperation} title={\"Change Current Operation?\"} acceptText={\"Update\"}\n                        dialogText={\"Changing operations will force you to log in again\"}/>\n                    }\n                    \n                  </React.Fragment>\n                )}</TableCell>\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { OperationTableRow } from './OperationTableRow';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport {SettingsOperatorDialog} from '../Settings/SettingsOperatorDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql} from '@apollo/client';\n\nconst newOperatorMutation = gql`\nmutation NewOperator($username: String!, $password: String!) {\n  createOperator(input: {password: $password, username: $username}) {\n    error\n    id\n    status\n  }\n}\n`;\nconst Update_Operation = gql`\nmutation MyMutation($operation_id: Int!, $channel: String!, $complete: Boolean!, $display_name: String!, $icon_emoji: String!, $icon_url: String!, $name: String!, $webhook: String!, $webhook_message: String!) {\n  update_operation_by_pk(pk_columns: {id: $operation_id}, _set: {channel: $channel, complete: $complete, display_name: $display_name, icon_emoji: $icon_emoji, icon_url: $icon_url, name: $name, webhook: $webhook, webhook_message: $webhook_message}) {\n    id\n    name\n    complete\n  }\n}\n`;\nconst newOperationMutation = gql`\nmutation newOperationMutation{\n    createOperation{\n        status\n        error\n        operation{\n            name\n            id\n            admin {\n                id\n                username\n            }\n        }\n        \n    }\n}\n`;\n\nexport function OperationTable(props){\n    const theme = useTheme();\n    const [openNewOperator, setOpenNewOperatorDialog] = React.useState(false);\n    const [newOperator] = useMutation(newOperatorMutation, {\n        update: (cache, {data}) => {\n            if(data.createOperator.status === \"success\"){\n                snackActions.success(\"Created operator\");\n            }else{\n                snackActions.error(data.createOperator.error);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new operator\");\n          console.log(err);\n        }\n    });\n    const [updateOperation] = useMutation(Update_Operation, {\n        onCompleted: (data) => {\n          props.onUpdateOperation(data.update_operation_by_pk);\n          snackActions.success(\"Successfully updated operation\");\n        },\n        onError: (data) => {\n          snackActions.error(\"Failed to update operation\");\n          console.log(\"error updating operation\", data);\n        }\n      });\n    const [newOperation] = useMutation(newOperationMutation, {\n        onCompleted: (data) => {\n            console.log(data);\n            if(data.createOperation.status === \"success\"){\n                snackActions.success(\"Successfully created operation!\");\n                props.onNewOperation(data.createOperation.operation);\n            }else{\n                snackActions.error(data.createOperation.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        }\n    })\n    const onUpdateOperation = ({operation_id, name, channel, display_name, icon_emoji, icon_url, webhook, webhook_message, complete}) => {\n        updateOperation({variables:{\n            operation_id,\n            name,\n            channel,\n            display_name,\n            icon_emoji,\n            icon_url,\n            webhook,\n            webhook_message,\n            complete\n        }});\n    }\n    const onSubmitNewOperator = (id, username, passwordOld, passwordNew) => {\n        if(passwordOld !== passwordNew){\n            snackActions.error(\"Passwords don't match\");\n        }else if(passwordNew.length === 0){\n            snackActions.error(\"Password must not be empty\",);\n        }else if(username.length === 0){\n            snackActions.error(\"Username must not be empty\",);\n        }else{\n            newOperator({variables:{username:username, password:passwordNew}})\n            setOpenNewOperatorDialog(false);\n        }\n    }\n    const onSubmitNewOperation = () => {\n        newOperation()\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Operations\n            </Typography>\n            <Button size=\"small\" onClick={onSubmitNewOperation} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operation</Button>\n            \n            <Button size=\"small\" onClick={()=>{setOpenNewOperatorDialog(true);}} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Operator</Button>\n            {openNewOperator &&\n                <MythicDialog open={openNewOperator} \n                    onClose={()=>{setOpenNewOperatorDialog(false);}} \n                    innerDialog={<SettingsOperatorDialog title=\"New Operator\" onAccept={onSubmitNewOperator} handleClose={()=>{setOpenNewOperatorDialog(false);}}  {...props}/>}\n                />\n            }\n            \n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"8rem\"}}>Configure</TableCell>\n                        <TableCell style={{width: \"8rem\"}}>Operators</TableCell>\n                        <TableCell>Operation Name</TableCell>\n                        <TableCell>Operation Admin</TableCell>\n                        <TableCell style={{width: \"10rem\"}}>Analysis</TableCell>\n                        <TableCell style={{width: \"12rem\"}}>Operation Status</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {props.operations.map( (op) => (\n                    <OperationTableRow\n                        key={\"operation\" + op.id} onUpdateOperation={onUpdateOperation}\n                        {...op} operator={props.operator}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent'\nimport Divider from '@material-ui/core/Divider';\nimport {useQuery, gql} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    overflow: 'auto',\n    backgroundColor: \"rgb(76,80,86) !important\"\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n  divider: {\n    backgroundColor: \"rgb(100, 170, 204)\",\n    border: \"2px solid rgba(100, 170, 204)\"\n  }\n}));\n\nfunction PayloadTypeBlockListPreMemo(props){\n    const classes = useStyles();\n    const theme = useTheme();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    useEffect( () => {\n      props.onChange({selected: right, ptype: props.ptype});\n    }, [right])\n    const customList = (title, items) => (\n      <Paper style={{width:\"100%\"}}>\n        <Card>\n          <CardHeader\n            className={classes.paper}\n            title={title}\n          />\n          <Divider classes={{root: classes.divider}}/>\n          <CardContent style={{height: \"calc(30vh)\", overflow: \"auto\"}} className={classes.paper}>\n            <List dense component=\"div\" role=\"list\" style={{padding:0}} className={classes.paper}>\n              {items.map((valueObj) => {\n                const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n                const labelId = `transfer-list-item-${value}-label`;\n                return (\n                  <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                    <ListItemIcon>\n                      <Checkbox\n                        checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                        tabIndex={-1}\n                        disableRipple\n                        inputProps={{ 'aria-labelledby': labelId }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText id={labelId} primary={value} />\n                  </ListItem>\n                );\n              })}\n            </List>\n          </CardContent>\n        </Card>\n      </Paper>\n    );\n    \n  return (\n    <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n      <Grid item xs={12}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                {props.ptype}\n            </Typography>\n        </Paper>\n      </Grid>\n      <Grid item xs={5}>{customList(leftTitle, left)}</Grid>\n      <Grid item>\n        <Grid container direction=\"column\" alignItems=\"center\">\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleAllRight}\n            disabled={left.length === 0}\n            aria-label=\"move all right\"\n          >\n            \n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleCheckedRight}\n            disabled={leftChecked.length === 0}\n            aria-label=\"move selected right\"\n          >\n            &gt;\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleCheckedLeft}\n            disabled={rightChecked.length === 0}\n            aria-label=\"move selected left\"\n          >\n            &lt;\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"small\"\n            className={classes.button}\n            onClick={handleAllLeft}\n            disabled={right.length === 0}\n            aria-label=\"move all left\"\n          >\n            \n          </Button>\n        </Grid>\n      </Grid>\n      <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n    </Grid>\n  );\n}\nconst PayloadTypeBlockList = React.memo(PayloadTypeBlockListPreMemo);\nconst getPayloadTypesAndCommandsQuery = gql`\n  query getPayloadTypesAndCommands{\n    payloadtype(where: {deleted: {_eq: false}}, order_by: {ptype: asc}) {\n      commands(order_by: {cmd: asc}) {\n        cmd\n        id\n      }\n      id\n      ptype\n    }\n  }\n`;\nexport function EditBlockListDialog({dialogTitle, onSubmit, blockListName: propBlockListName, onClose, currentSelected, editable}) {\n  const [payloadtypes, setPayloadTypes] = React.useState([]);\n  const [selectedCommands, setSelectedCommands] = React.useState({});\n  const [blockListName, setBlockListName] = React.useState(\"\");\n  useQuery(getPayloadTypesAndCommandsQuery, {fetchPolicy: \"network-only\",\n    onCompleted: (data) => {\n      if(propBlockListName){\n        setBlockListName(propBlockListName);\n      }\n      // for each of the possible commands mark them as selected or not\n      const updatedPayloadTypes = data.payloadtype.map( p => {\n        let selectedCommands = [];\n        if(currentSelected[p.ptype] !== undefined){\n          selectedCommands = [...currentSelected[p.ptype]];\n        }\n        return {...p, selected: selectedCommands};\n      });\n      setPayloadTypes(updatedPayloadTypes);      \n      setSelectedCommands({...currentSelected});\n      \n    },\n    onError: (data) => {\n\n    }\n  })\n  const onChange = React.useCallback( ({selected, ptype}) => {\n    setSelectedCommands({...selectedCommands, [ptype]: selected});\n  }, [selectedCommands]);\n  const onChangeBlockListName = (name, value, error) => {\n    setBlockListName(value);\n  };\n  const submit = () => {\n    if(blockListName.trim() === \"\"){\n      snackActions.warning(\"Must supply a block list name\");\n      return;\n    }\n    // now diff selectedCommands with props.currentSelected to see which should be added or removed\n    let toAdd = [];\n    let toRemove = [];\n    for(const value of Object.values(selectedCommands)){\n      //key is the payload type name, value is an array of commands\n      for(let i = 0; i < value.length; i++){\n        toAdd.push({command_id: value[i].id, name:blockListName.trim()});\n      }\n    }\n    for(const value of Object.values(currentSelected)){\n      for(let i = 0; i < value.length; i++){\n        // if value[i] in add, then remove it from add because it was selected before and is selected now\n        // if value[i] is not in add, then add it to toRemove because it was selected and is no longer selected\n        let index = toAdd.findIndex(c => c.command_id === value[i].id);\n        if(index > -1){\n          toAdd.splice(index, 1); //remove it\n        }else{\n          toRemove.push({command_id: value[i].id, name: blockListName.trim()});\n        }\n      }\n    }\n    onSubmit({toAdd, toRemove});\n    onClose();\n  }\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{dialogTitle}</DialogTitle>\n      <DialogContent dividers={true}>\n        <MythicTextField disabled={!editable} onChange={onChangeBlockListName} value={blockListName} name=\"Block List Name\" autoFocus requiredValue/>\n        {payloadtypes.map(p => (\n          <PayloadTypeBlockList key={p.ptype} leftTitle={\"Not Blocked\"} onChange={onChange} rightTitle={\"Blocked Commands\"} itemKey={\"cmd\"} right={p.selected} left={p.commands} ptype={p.ptype}/>\n        ))}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} variant=\"contained\" color=\"primary\">\n          Close\n        </Button>\n        <Button onClick={submit} variant=\"contained\" color=\"secondary\">\n          Submit\n        </Button>\n      </DialogActions>\n    </React.Fragment>\n  )\n}\n\n","import React from 'react';\nimport {Button} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport {EditBlockListDialog} from './EditBlockListDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport TuneIcon from '@material-ui/icons/Tune';\n\nconst newBlockListEntry = gql`\nmutation newBlockListsEntries($entries: [disabledcommandsprofile_insert_input!]!) {\n    insert_disabledcommandsprofile(objects: $entries) {\n        returning {\n            id\n            name\n            command{\n              id\n              cmd\n              payloadtype{\n                ptype\n              }\n            }\n        }\n    }\n}\n`;\nconst deleteBlockListMutation = gql`\nmutation deleteEntireBlockList($name: String!){\n    deleteBlockList(name: $name){\n        status\n        error\n        name\n    }\n}\n`;\nconst deleteBlockListEntriesMutation = gql`\nmutation deleteBlockListEntries($name: String!, $entries: [Int!]!){\n    deleteBlockListEntry(name: $name, entries: $entries){\n        status\n        error\n        name\n        deleted_ids\n    }\n}\n`;\n\nexport function CommandBlockListTable(props){\n    const theme = useTheme();\n    const [openNew, setOpenNewDialog] = React.useState(false);\n    const [blockLists, setBlockLists] = React.useState([]);\n    const [newBlockListEntries] = useMutation(newBlockListEntry, {\n        onCompleted: (data) => {\n            const newBlockList = data.insert_disabledcommandsprofile.returning.reduce( (prev, cur) => {\n                if(prev[cur.command.payloadtype.ptype] === undefined){\n                    prev[cur.command.payloadtype.ptype] = [];\n                }\n                prev[cur.command.payloadtype.ptype].push(cur);\n                return {...prev};\n            }, {});\n            // check if this is part of a new block list\n            \n            let currentBlockLists = [...blockLists];\n            let found = false;\n            const newBlockLists = currentBlockLists.map( cbl => {\n                if(cbl[\"name\"] === data.insert_disabledcommandsprofile.returning[0].name){\n                    found = true;\n                    // now we need to update cbl[\"entries\"] based on the newBlockList dictionary\n                    let newEntries = {};\n                    for(const [key, value] of Object.entries(newBlockList)){\n                        if(newEntries[key] === undefined){\n                            newEntries[key] = [...value];\n                        }else{\n                            newEntries[key] = [...newEntries[key], ...value];\n                        }\n                    }\n                    for(const [key, value] of Object.entries(cbl[\"entries\"])){\n                        if(newEntries[key] === undefined){\n                            newEntries[key] = [...value];\n                        }else{\n                            newEntries[key] = [...newEntries[key], ...value];\n                        }\n                    }\n                    return {...cbl, entries: newEntries};\n                }else{\n                    return {...cbl};\n                }\n            });\n            if(!found){\n                setBlockLists([...newBlockLists, {\"name\": data.insert_disabledcommandsprofile.returning[0].name, \"entries\": newBlockList}]);\n            }else{\n                setBlockLists([...newBlockLists]);\n            }\n        },\n        onError: (err) => {\n          snackActions.warning(\"Unable to create new block lists\");\n          console.log(err);\n        }\n    });\n    const [deleteBlockList] = useMutation(deleteBlockListMutation, {\n        onCompleted: (data) => {\n            if(data.deleteBlockList.status === \"success\"){\n                const filteredBlockLists = blockLists.filter( b => b.name !== data.deleteBlockList.name);\n                setBlockLists(filteredBlockLists);\n                snackActions.success(\"Successfully deleted block list\");\n            }else{\n                snackActions.error(data.deleteBlockList.error);\n            }\n        },\n        onError: (err) => {\n            snackActions.warning(\"Unable to delete block list\");\n            console.log(err);\n        }\n    })\n    const [deleteBlockListEntries] = useMutation(deleteBlockListEntriesMutation, {\n        onCompleted: (data) => {\n            if(data.deleteBlockListEntry.status === \"success\"){\n                snackActions.success(\"Successfully deleted block list\");\n                let currentBlockLists = [...blockLists];\n                const newBlockLists = currentBlockLists.map( cbl => {\n                    if(cbl[\"name\"] === data.deleteBlockListEntry.name){\n                        // now we need to update cbl[\"entries\"] based on the newBlockList dictionary\n                        let newEntries = {};\n                        for(const [key, value] of Object.entries(cbl[\"entries\"])){\n                            const filteredValues = value.filter( e => !data.deleteBlockListEntry.deleted_ids.includes(e.id));\n                            newEntries[key] = filteredValues;\n                        }\n                        return {...cbl, entries: newEntries};\n                    }else{\n                        return {...cbl};\n                    }\n                });\n                setBlockLists([...newBlockLists]);\n            }else{\n                snackActions.error(data.deleteBlockListEntry.error);\n            }\n        },\n        onError: (err) => {\n            snackActions.warning(\"Unable to delete block list\");\n            console.log(err);\n        }\n    })\n    React.useEffect( () => {\n        setBlockLists(props.blockLists);\n    }, [props.blockLists])\n    const onSubmitNewBlockList = ({toAdd}) => {\n        newBlockListEntries({variables: {entries: toAdd}});\n    }\n    const onSubmitEdits = ({toAdd, toRemove}) => {\n        if(toAdd.length > 0){\n            newBlockListEntries({variables: {entries: toAdd}});\n        }\n        const removeEntryIDs = toRemove.map(c => c.command_id);\n        if(removeEntryIDs.length > 0){\n            deleteBlockListEntries({variables: {entries: removeEntryIDs, name: toRemove[0][\"name\"]}});\n        }\n        \n    }\n    const onAcceptDelete = ({name}) => {\n        deleteBlockList({variables:{name}})\n    }\n    return (\n        <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Command Block Lists\n            </Typography>\n            <Button size=\"small\" onClick={()=>{setOpenNewDialog(true);}} style={{marginRight: \"20px\", float: \"right\", marginTop: \"10px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Block List</Button>\n            {openNew &&\n                <MythicDialog open={openNew} fullWidth={true} maxWidth=\"lg\"\n                    onClose={()=>{setOpenNewDialog(false);}} \n                    innerDialog={<EditBlockListDialog editable={true} currentSelected={[]} onSubmit={onSubmitNewBlockList} dialogTitle=\"Create New Block List\" onClose={() => setOpenNewDialog(false)}\n                    />}\n                />\n            }\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Modify</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Name</TableCell>\n                        <TableCell >Blocked Commands</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {\n                        blockLists.map( b => (\n                            <CommandBlockListTableRow key={b.name} {...b} onAcceptDelete={onAcceptDelete} onSubmitEdits={onSubmitEdits}/>\n                        ))\n                    }\n                </TableBody>\n            </Table>\n        </TableContainer>\n    </React.Fragment>\n    )\n}\n\nfunction CommandBlockListTableRow(props){\n    const theme = useTheme();\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [blockedCommandDisplay, setBlockedCommandDisplay] = React.useState([]);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [updatedEntries, setUpdatedEntries] = React.useState({});\n    React.useEffect(() => {\n        let newDisplay = [];\n        let entries = {};\n        for(const [key, value] of Object.entries(props.entries)){\n            const commandNames = value.map(c => c.command.cmd).sort().join(\", \");\n            newDisplay.push(\n                {ptype: key, commands: commandNames}\n            )\n            entries[key] = value.map(c => c.command);\n        }\n        setUpdatedEntries(entries);\n        setBlockedCommandDisplay(newDisplay);\n    }, [props.entries])\n    const onAcceptDelete = () => {\n        setOpenDeleteDialog(false);\n        props.onAcceptDelete({name: props.name})\n    }\n    const onSubmitEdits = ({toAdd, toRemove}) => {\n        props.onSubmitEdits({toAdd, toRemove})\n    }\n    return (\n        <TableRow hover>\n            <TableCell>\n                <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n            </TableCell>\n            <TableCell>\n                <Button size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} startIcon={<TuneIcon/>} color=\"secondary\" variant=\"contained\">Edit</Button>\n                {openUpdate &&\n                    <MythicDialog open={openUpdate} fullWidth maxWidth={\"lg\"}\n                        onClose={()=>{setOpenUpdateDialog(false);}} \n                        innerDialog={<EditBlockListDialog editable={false} blockListName={props.name} currentSelected={updatedEntries} onSubmit={onSubmitEdits} dialogTitle=\"Edit Block List\" onClose={() => setOpenUpdateDialog(false)}\n                        />}\n                    />\n                }\n                \n            </TableCell>\n            <TableCell>{props.name}</TableCell>\n            <TableCell>\n                {blockedCommandDisplay.map( b => (\n                    <div key={props.name + b.ptype}>{b.ptype} - {b.commands}</div>\n                    \n                ))}\n            </TableCell>\n        </TableRow>\n    )\n}\n\n","import React from 'react';\nimport { OperationTable } from './OperationTable';\nimport {useQuery, gql} from '@apollo/client';\nimport {CommandBlockListTable} from './CommandBlockListTable';\n\nconst GET_Operations = gql`\nquery GetOperations {\n  operation(order_by: {name: asc}) {\n    complete\n    name\n    id\n    admin {\n      username\n      id\n    }\n    operatoroperations {\n      view_mode\n      operator {\n        username\n        id\n      }\n      id\n    }\n  }\n  operator(where: {active: {_eq: true}, deleted: {_eq: false}}) {\n    id\n    username\n  }\n}\n`;\nconst GET_BlockLists = gql`\nquery getBlockLists {\n  disabledcommandsprofile(order_by: {name: asc}) {\n    id\n    name\n    command{\n      id\n      cmd\n      payloadtype{\n        ptype\n      }\n    }\n  }\n}\n`;\nexport function Operations(props){\n  const [blockLists, setBlockLists] = React.useState([]);\n  const [operations, setOperations] = React.useState([]);\n    useQuery(GET_Operations, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        setOperations(data.operation);\n      },\n      onError: (data) => {\n\n      }\n    });\n    useQuery(GET_BlockLists, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const condensed = data.disabledcommandsprofile.reduce( (prev, cur) => {\n          if(prev[cur.name] === undefined){\n            prev[cur.name] = {};\n          }\n          if(prev[cur.name][cur.command.payloadtype.ptype] === undefined){\n            prev[cur.name][cur.command.payloadtype.ptype] = [];\n          }\n          prev[cur.name][cur.command.payloadtype.ptype].push(cur);\n          return {...prev};\n        }, {});\n        // now break out into array\n        let arrayForm = [];\n        for(const [key, value] of Object.entries(condensed)){\n          arrayForm.push({\"name\": key, entries: value});\n        }\n        setBlockLists(arrayForm);\n      },\n      onError: (data) => {\n\n      }\n    });\n    const onUpdateOperation = ({id, name, complete}) => {\n      const updatedOperations = operations.map( o => {\n        if(o.id === id){\n          return {...o, name, complete};\n        }\n        return {...o};\n      })\n      setOperations(updatedOperations);\n    }\n    const onNewOperation = ({id, name, admin}) => {\n      setOperations([...operations, {id, name, admin}])\n    }\n    return (\n      <div style={{  height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n        <OperationTable operations={operations} onUpdateOperation={onUpdateOperation} onNewOperation={onNewOperation}/>\n        <CommandBlockListTable blockLists={blockLists} />\n      </div>\n    );\n} \n","import React, {useEffect, useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport \"ace-builds/src-noconflict/theme-monokai\";\nimport {useTheme} from '@material-ui/core/styles';\nimport { gql, useQuery } from '@apollo/client';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nconst getCommandsAndPayloadTypesQuery = gql`\nquery getCommandsAndPayloadTypes{\n  payloadtype(order_by: {ptype: asc}){\n    id\n    ptype\n    commands(order_by: {cmd: asc}){\n      id\n      cmd\n    }\n  }\n}\n`;\n\nexport function EditScriptDialog(props) {\n    const theme = useTheme();\n    const [script, setScript] = React.useState(\"\");\n    const [selectedPayloadType, setSelectedPayloadType] = React.useState('');\n    const [selectedCommand, setSelectedCommand] = React.useState('');\n    const [payloadTypeCmdOptions, setPayloadTypeCmdOptions] = React.useState([]);\n    const [commandOptions, setCommandOptions] = React.useState([]);\n    const [author, setAuthor] = React.useState('');\n    const inputPTRef = useRef(null); \n    const inputCMDRef = useRef(null); \n    useQuery(getCommandsAndPayloadTypesQuery, {\n      onCompleted: data => {\n        setPayloadTypeCmdOptions(data.payloadtype);\n        if(props.payload_type_id !== undefined){\n          setSelectedPayloadType(props.payload_type_id);\n        }else{\n          if(data.payloadtype.length > 0){\n            setSelectedPayloadType(data.payloadtype[0].id);\n          }\n        }\n        if(props.command_id !== undefined){\n          setSelectedCommand(props.command_id);\n          for(let i = 0; i < data.payloadtype.length; i++){\n            if(props.payload_type_id === data.payloadtype[i].id){\n              setCommandOptions(data.payloadtype[i].commands)\n            }\n          }\n        }else{\n          if(data.payloadtype.length > 0){\n            if(data.payloadtype[0].commands.length > 0){\n              setCommandOptions(data.payloadtype[0].commands);\n              setSelectedCommand(data.payloadtype[0].commands[0].id);\n            }\n          }\n        }\n        if(props.author !== undefined){\n          setAuthor(props.author);\n        }\n      },\n      onError: data => {\n\n      }\n    })\n    useEffect( () => {\n        if(props.script !== undefined){\n          setScript(atob(props.script));\n        }        \n    }, [props.script]);\n    const onChange = (value) => {\n        setScript(value);\n    }\n    const onSubmit = () => {\n        props.onSubmitEdit({script: btoa(script), command_id: selectedCommand, payload_type_id: selectedPayloadType, author});\n        props.onClose();\n    }\n    const onRevert = () => {\n        props.onRevert();\n        props.onClose();\n    }\n    const onChangeSelectedPayloadType = (event) => {\n      setSelectedPayloadType(event.target.value);\n      const cmds = payloadTypeCmdOptions.filter( (p) => p.id === event.target.value);\n      setCommandOptions(cmds[0].commands);\n      setSelectedCommand(cmds[0].commands[0].id);\n    }\n    const onChangeSelectedCommand = (event) => {\n      setSelectedCommand(event.target.value);\n    }\n    const onChangeAuthor = (name, value, error) => {\n      setAuthor(value);\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >\n          {props.title ? props.title : \"Edit BrowserScript Code\"}\n          </DialogTitle>\n        <DialogContent dividers={true} style={{height: \"calc(80vh)\"}}>\n        <FormControl style={{width: \"50%\"}}>\n            <InputLabel ref={inputPTRef}>Payload Type</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedPayloadType}\n              onChange={onChangeSelectedPayloadType}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {payloadTypeCmdOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"payloadtype\" + opt.id}>{opt.ptype}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <FormControl style={{width: \"50%\", paddingBottom: \"10px\"}}>\n            <InputLabel ref={inputCMDRef}>Command</InputLabel>\n            <Select\n              labelId=\"demo-dialog-select-label\"\n              id=\"demo-dialog-select\"\n              value={selectedCommand}\n              onChange={onChangeSelectedCommand}\n              input={<Input style={{width: \"100%\"}}/>}\n            >\n              {commandOptions.map( (opt) => (\n                  <MenuItem value={opt.id} key={\"command\" + opt.id}>{opt.cmd}</MenuItem>\n              ) )}\n            </Select>\n          </FormControl>\n          <MythicTextField value={author} onChange={onChangeAuthor} name=\"Author\" fullWidth />\n           <AceEditor\n                mode=\"javascript\"\n                theme={theme.palette.type === 'dark' ? 'monokai' : 'github'}\n                width=\"100%\"\n                height=\"100%\"\n                value={script} \n                focus={true}\n                onChange={onChange}\n                setOptions={{\n                \n                }}\n            />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" style={{backgroundColor: theme.palette.primary.main}}>\n            Close\n          </Button>\n          {props.new ? (\n            <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n              Create\n          </Button>\n          ) : (\n            <React.Fragment>\n              <Button onClick={onRevert} variant=\"contained\" style={{backgroundColor: theme.palette.success.main}}>\n                Revert\n              </Button>\n          \n              <Button onClick={onSubmit} variant=\"contained\" style={{backgroundColor: theme.palette.warning.main}}>\n                Save\n              </Button>\n            </React.Fragment>\n          )}\n          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {Button, Switch} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function BrowserScriptsTableRow(props){\n    const theme = useTheme();\n    const [openEdit, setOpenEdit] = React.useState(false);\n    const [isApplied, setIsApplied] = React.useState(false);\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const onSubmitEdit = ({script, command_id, payload_type_id, author}) => {\n        props.onSubmitEdit({browserscript_id: props.id, script, command_id, payload_type_id, author});\n    }\n    const onRevert = () => {\n        props.onRevert({browserscript_id: props.id, script: props.container_version});\n    }\n    const onSubmitApplyToOperation = () => {\n        props.onSubmitApplyToOperation({browserscript_id: props.id});\n    }\n    const onSubmitRemoveFromOperation = () => {\n        props.onSubmitRemoveFromOperation({browserscript_id: props.id});\n    }\n    useEffect( () => {\n        let found = false;\n        props.browserscriptoperations.forEach( (op) => {\n            if(op.operation_id === props.operation_id){\n                found = true;\n            }\n        } );\n        setIsApplied(found);\n    }, [props.browserscriptoperations, props.operation_id]);\n    const onToggleActive = () => {\n        props.onToggleActive({browserscript_id: props.id, active: !props.active});\n    }\n    const onConfirmDelete = () => {\n        props.onDelete({browserscript_id: props.id})\n    }\n    return (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.id}>\n                <TableCell>\n                    <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onConfirmDelete} open={openDeleteDialog}/>\n                </TableCell>\n                <TableCell>\n                    <Switch\n                        checked={props.active}\n                        onChange={onToggleActive}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'checkbox', \"track\": \"white\" }}\n                        name=\"Active\"\n                      />\n                </TableCell>\n                <TableCell>{props.payloadtype.ptype}</TableCell>\n                <TableCell>{props.command.cmd}</TableCell>\n                <TableCell>{props.author}</TableCell>\n                <TableCell>{props.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" onClick={ () => {setOpenEdit(true);} } color=\"primary\"> Edit </Button></TableCell>\n                <TableCell>\n                    {isApplied ?\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitRemoveFromOperation} color=\"secondary\">Remove</Button>)\n                    :\n                        (<Button size=\"small\" variant=\"contained\" onClick={onSubmitApplyToOperation} color=\"primary\">Apply</Button>)\n                    }\n                </TableCell>\n                {openEdit ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openEdit} \n                        onClose={()=>{setOpenEdit(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenEdit(false);}} payload_type_id={props.payloadtype.id} command_id={props.command.id}\n                                script={props.script} onSubmitEdit={onSubmitEdit} onRevert={onRevert} author={props.author}/>\n                        } />    \n                    ) : (null)\n                }\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React  from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsTableRow } from './BrowserScriptsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport Button from '@material-ui/core/Button';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {EditScriptDialog} from './EditScriptDialog';\n\n\nexport function BrowserScriptsTable(props){\n    const theme = useTheme();\n    const [openNewScriptDialog, setOpenNewScriptDialog] = React.useState(false);\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Browser Scripts\n                </Typography>\n                <Button size=\"small\" onClick={() => setOpenNewScriptDialog(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Script</Button>\n                {openNewScriptDialog ? (   \n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openNewScriptDialog} \n                        onClose={()=>{setOpenNewScriptDialog(false);}} \n                        innerDialog={\n                            <EditScriptDialog onClose={()=>{setOpenNewScriptDialog(false);}} title=\"Create New Browser Script\" new={true} onSubmitEdit={props.onSubmitNew} />\n                        } />    \n                    ) : (null)\n                }\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(50vh)\"}}>  \n            <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Active</TableCell>\n                        <TableCell >Payload</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell> Author</TableCell>\n                        <TableCell style={{width: \"15em\"}}>User Modified?</TableCell>\n                        <TableCell style={{width: \"8em\"}}> Edit</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Apply to Operation</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {props.browserscript.map( (op) => (\n                    <BrowserScriptsTableRow onSubmitApplyToOperation={props.onSubmitApplyToOperation} \n                    onSubmitRemoveFromOperation={props.onSubmitRemoveFromOperation} \n                    operation_id={props.operation_id} onToggleActive={props.onToggleActive} \n                    onSubmitEdit={props.onSubmitEdit} onRevert={props.onRevert} \n                    onToggleOperation={props.onToggleOperation}\n                    onDelete={props.onDelete}\n                        key={\"script\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n        \n    )\n}\n\n","import React, {useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport AceEditor from 'react-ace';\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport {muiTheme} from '../../../themes/Themes';\n\nexport function BrowserScriptsOperationsTableRow(props){\n    const [openViewScript, setOpenViewScript] = React.useState(false);\n    const [displayName, setDisplayName] = React.useState(\"\");\n\n    useEffect( () => {\n        setDisplayName(props.browserscript.command === null ? \"Support Script: \" + props.browserscript.name : props.browserscript.command.cmd);\n    }, [props.browserscript]);\n    return (\n        <React.Fragment>\n            <TableRow key={\"opscript\" + props.browserscript.id}>\n                <TableCell>{props.browserscript.payloadtype.ptype}</TableCell>\n                <TableCell>{displayName}</TableCell>\n                <TableCell>{props.browserscript.user_modified ? \"User Modified\" : \"\" } </TableCell>\n                <TableCell>{props.operation.admin.username}</TableCell>\n                <TableCell><Button size=\"small\" variant=\"contained\" style={{color: muiTheme.palette.info.main}} onClick={() => {setOpenViewScript(true);}}> View </Button></TableCell>    \n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openViewScript} \n                    onClose={()=>{setOpenViewScript(false);}} \n                    innerDialog={\n                        <AceEditor\n                            mode=\"javascript\"\n                            theme=\"github\"\n                            width=\"100%\"\n                            value={atob(props.browserscript.script)} \n                            focus={true}\n                            readOnly={true}\n                            onChange={() => {}}\n                            setOptions={{\n                            \n                            }}\n                        />\n                    } />\n            </TableRow>\n        </React.Fragment>\n        )\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { BrowserScriptsOperationsTableRow } from './BrowserScriptsOperationsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\n\n\nexport function BrowserScriptsOperationsTable(props){\n    const theme = useTheme();\n    return (\n        props.browserscriptoperation.length > 0 &&\n            <React.Fragment>\n                <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        Operation Browser Scripts\n                    </Typography>\n                </Paper>\n                <TableContainer component={Paper} className=\"mythicElement\" style={{maxHeight: \"calc(30vh)\"}}>\n                    <Table size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell style={{width: \"10em\"}}>Payload</TableCell>\n                                <TableCell style={{}}>Command</TableCell>\n                                <TableCell style={{width: \"5em\"}}>User Modified?</TableCell>\n                                <TableCell style={{}}>Operator</TableCell>\n                                <TableCell style={{width: \"5em\"}}>View Script</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                        {props.browserscriptoperation.map( (op) => (\n                            <BrowserScriptsOperationsTableRow\n                                key={\"opscriptrow\" + op.browserscript.id}\n                                {...op}\n                            />\n                        ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </React.Fragment>\n    )\n}\n\n","import React  from 'react';\nimport { gql, useMutation, useSubscription } from '@apollo/client';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {BrowserScriptsTable} from './BrowserScriptsTable';\nimport {BrowserScriptsOperationsTable} from './BrowserScriptsOperationsTable';\nimport {snackActions} from '../../utilities/Snackbar';\n\n\nconst SUB_BrowserScripts = gql`\nsubscription SubscribeBrowserScripts($operator_id: Int!) {\n  browserscript(where: {operator_id: {_eq: $operator_id}, for_new_ui: {_eq: true}}) {\n    active\n    author\n    user_modified\n    script\n    payloadtype {\n      ptype\n      id\n    }\n    name\n    id\n    creation_time\n    container_version_author\n    container_version\n    command {\n      cmd\n      id\n    }\n    browserscriptoperations {\n      operation_id\n      id\n    }\n  }\n}\n `;\nconst SUB_OperationBrowserScripts = gql`\nsubscription SubscribeOperationBrowserScripts($operation_id: Int!) {\n  browserscriptoperation(where: {operation_id: {_eq: $operation_id}, browserscript: {for_new_ui: {_eq: true}}}){\n    browserscript{\n        active\n        author\n        user_modified\n        script\n        payloadtype {\n          ptype\n          id\n        }\n        name\n        id\n        creation_time\n        container_version_author\n        container_version\n        command {\n          cmd\n          id\n        }\n      }\n   operation{\n    admin{\n        username\n    }\n   }\n  }\n}\n `;\nconst updateBrowserScriptActive = gql`\nmutation updateBrowserScriptActive($browserscript_id: Int!, $active: Boolean!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {active: $active}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptScript = gql`\nmutation updateBrowserScriptScript($browserscript_id: Int!, $script: String!, $command_id: Int!, $payload_type_id: Int!, $author: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, author: $author, user_modified: true, command_id: $command_id, payload_type_id: $payload_type_id}) {\n    id\n  }\n}\n`;\nconst updateBrowserScriptRevert = gql`\nmutation updateBrowserScriptRevert($browserscript_id: Int!, $script: String!) {\n  update_browserscript_by_pk(pk_columns: {id: $browserscript_id}, _set: {script: $script, user_modified: false}) {\n    id\n  }\n}\n`;\nconst addBrowserScript = gql`\nmutation insertNewBrowserScript($script: String!, $author: String!, $payload_type_id: Int!, $command_id: Int!){\n  insert_browserscript_one(object: {script: $script, author: $author, payload_type_id: $payload_type_id, command_id: $command_id}){\n    id\n  }\n}\n`;\nconst deleteBrowserScriptMutation = gql`\nmutation deleteBrowserScriptMutation($browserscript_id: Int!){\n  delete_browserscript_by_pk(id: $browserscript_id){\n    id\n  }\n}\n`;\n\n\nexport function BrowserScripts(props){\n    const me = useReactiveVar(meState);\n    const [browserScripts, setBrowserScripts] = React.useState({\"browserscript\": []});\n    const [operationBrowserScripts, setOperationBrowserScripts] = React.useState({\"browserscriptoperation\": []});\n    useSubscription(SUB_BrowserScripts, {\n      variables: {operator_id: me.user.id}, fetchPolicy: \"no-cache\",\n      shouldResubscribe: true,\n      onSubscriptionData: ({subscriptionData}) => {\n        console.log(subscriptionData)\n        setBrowserScripts(subscriptionData.data);\n      }\n    });\n      useSubscription(SUB_OperationBrowserScripts, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"no-cache\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setOperationBrowserScripts(subscriptionData.data);\n        }\n    });\n    const [toggleActive] = useMutation(updateBrowserScriptActive, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [updateScript] = useMutation(updateBrowserScriptScript, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [revertScript] = useMutation(updateBrowserScriptRevert, {\n        onCompleted: data => {\n            snackActions.success(\"Successfully Updated!\", {autoHideDuration: 1000});\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const [createBrowserScript] = useMutation(addBrowserScript, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully created new browser script!\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to create new script: \" + data);\n      }\n    });\n    const [deleteBrowserScript] = useMutation(deleteBrowserScriptMutation, {\n      onCompleted: data => {\n        snackActions.success(\"Successfully deleted browser script\");\n      },\n      onError: data => {\n        snackActions.error(\"Failed to delete browser script: \" + data);\n      }\n    })\n    const onToggleActive = ({browserscript_id, active}) => {\n        toggleActive({variables: {browserscript_id, active}});\n    }\n    const onSubmitEdit = ({browserscript_id, script, command_id, payload_type_id, author}) => {\n        updateScript({variables: {browserscript_id, script, command_id, payload_type_id, author}});\n    }\n    const onRevert = ({browserscript_id, script}) => {\n        revertScript({variables:{browserscript_id, script}});\n    }\n    const onSubmitApplyToOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitRemoveFromOperation = ({browserscript_id}) => {\n        snackActions.warning(\"Not Implemented Yet!\", {autoHideDuration: 1000});\n    }\n    const onSubmitCreateNewBrowserScript = ({script, author, payload_type_id, command_id}) => {\n      createBrowserScript({variables: {author, script, payload_type_id, command_id}});\n    }\n    const onDelete = ({browserscript_id}) => {\n      deleteBrowserScript({variables: {browserscript_id}});\n    }\n    return (\n    <React.Fragment>\n        <BrowserScriptsTable {...browserScripts} operation_id={me.user.current_operation_id} onToggleActive={onToggleActive} \n          onSubmitEdit={onSubmitEdit} onRevert={onRevert} onSubmitNew={onSubmitCreateNewBrowserScript} onDelete={onDelete}\n          onSubmitApplyToOperation={onSubmitApplyToOperation} \n          onSubmitRemoveFromOperation={onSubmitRemoveFromOperation}\n        />\n        <BrowserScriptsOperationsTable {...operationBrowserScripts} />\n    </React.Fragment>\n    );\n}\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($payload_id: Int!, $description: String) {\n  update_payload_by_pk(pk_columns: {id: $payload_id}, _set: {tag: $description}) {\n    tag\n    id\n  }\n}\n`;\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    tag\n    id\n  }\n}\n`;\n\nexport function PayloadDescriptionDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.tag)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated Description\")\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {payload_id: props.payload_id, description: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst updateDescriptionMutation = gql`\nmutation updateDescription ($file_id: Int!, $filename: bytea!) {\n  update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {filename: $filename}) {\n    filename_text\n    id\n  }\n}\n`;\nconst getFilenameQuery = gql`\nquery getFilenameQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    filemetum {\n      filename_text\n      id\n    }\n    id\n  }\n}\n`;\n\nexport function PayloadFilenameDialog(props) {\n    const [description, setDescription] = useState(\"\");\n    const [fileId, setFileId] = useState();\n    const { loading, error } = useQuery(getFilenameQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setDescription(data.payload_by_pk.filemetum.filename_text);\n            setFileId(data.payload_by_pk.filemetum.id);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateDescription] = useMutation(updateDescriptionMutation, {\n        onCompleted: (data) => {\n          snackActions.success(\"Updated filename\");\n        }\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    const onCommitSubmit = () => {\n        updateDescription({variables: {file_id: fileId, filename: description}});\n        props.onClose();\n    }\n    const onChange = (name, value, error) => {\n        setDescription(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Payload Filename</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onChange={onChange} value={description} onEnter={onCommitSubmit}/>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst getDescriptionQuery = gql`\nquery getDescriptionQuery ($payload_id: Int!) {\n  payload_by_pk(id: $payload_id) {\n    build_message\n    build_stderr\n    build_stdout\n    id\n  }\n}\n`;\n\nexport function PayloadBuildMessageDialog(props) {\n    const [payloadData, setPayloadData] = useState({});\n    const [viewError, setViewError] = useState(false);\n    const { loading, error } = useQuery(getDescriptionQuery, {\n        variables: {payload_id: props.payload_id},\n        onCompleted: data => {\n            setViewError(props.viewError);\n            let output = \"Message:\\n\" + data.payload_by_pk.build_message;\n            output += \"\\nSTDOUT:\\n\" + data.payload_by_pk.build_stdout;\n            setPayloadData({\"message\": output,\n                            \"error\": \"STDERR:\\n\" + data.payload_by_pk.build_stderr});\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        setViewError(props.viewError);\n    }, [props.viewError]);\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Build Messages</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={viewError ? payloadData[\"error\"] : payloadData[\"message\"]} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport {useTheme} from '@material-ui/core/styles';\nimport {MythicStyledTooltip} from '../../MythicComponents/MythicStyledTooltip';\nimport PermScanWifiIcon from '@material-ui/icons/PermScanWifi';\n\nexport function PayloadsTableRowC2Status(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {\n                props.payloadc2profiles.map( (c2) => (\n                    <Typography key={c2.c2profile.name + props.uuid} style={{display: \"flex\"}}> \n                        {c2.c2profile.is_p2p ?\n                            ( c2.c2profile.container_running ? \n                                <MythicStyledTooltip title=\"C2 Container online\">\n                                    <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                                </MythicStyledTooltip>: \n                                <MythicStyledTooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/>\n                                </MythicStyledTooltip> )\n                            :\n                        ( c2.c2profile.running ? \n                            <MythicStyledTooltip title=\"C2 Internal Server Running\">\n                                <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                            </MythicStyledTooltip> : \n                            (c2.c2profile.container_running ? (\n                                <MythicStyledTooltip title=\"C2 Internal Server Not Running, but Container Online\">\n                                    <PermScanWifiIcon style={{color: theme.palette.warning.main}}/> \n                                </MythicStyledTooltip>\n                            ) : (\n                                <MythicStyledTooltip title=\"C2 Container offline\">\n                                    <CancelIcon style={{color: theme.palette.error.main}}/> \n                                </MythicStyledTooltip>\n                            ))\n                            )\n                        } - {c2.c2profile.name}\n                    </Typography>\n                )) \n            }\n                \n        </React.Fragment>\n        )\n}\n","import IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React from 'react';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { snackActions } from '../../utilities/Snackbar';\nimport ReportProblemIcon from '@material-ui/icons/ReportProblem';\nimport {MythicStyledTooltip} from '../../MythicComponents/MythicStyledTooltip';\n\nexport function PayloadsTableRowBuildStatus(props){\n    const theme = useTheme();\n    return (\n        <React.Fragment>\n            {props.build_phase === \"success\" ?\n                ( <MythicStyledTooltip title=\"Download payload\">\n                    <IconButton variant=\"contained\" target=\"_blank\" color=\"primary\" href={window.location.origin + \"/direct/download/\" + props.filemetum.agent_file_id} download>\n                        <GetAppIcon style={{color: theme.palette.success.main}} />\n                    </IconButton>\n                  </MythicStyledTooltip>\n                    \n                )\n                : \n                (props.build_phase === \"building\" ? \n                (<MythicStyledTooltip title=\"Payload still building\">\n                    <IconButton variant=\"contained\"><CircularProgress size={20} thickness={4} style={{color: theme.palette.info.main}}/></IconButton>\n                </MythicStyledTooltip>) : \n                (<MythicStyledTooltip title=\"Failed to build payload\">\n                    <IconButton variant=\"contained\" onClick={() => snackActions.warning(\"Payload failed to build, cannot download\")}>\n                        <ReportProblemIcon style={{color: theme.palette.error.main}} />\n                    </IconButton>\n                </MythicStyledTooltip>\n                ) \n                )\n            }\n        </React.Fragment>\n\n        )\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst checkPayloadConfigurationQuery = gql`\nquery checkPayloadConfigurationQuery($uuid: String!) {\n  config_check(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadConfigCheckDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const { loading, error } = useQuery(checkPayloadConfigurationQuery, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.config_check.status === \"success\"){\n            setMessage(data.config_check.output);\n          }else{\n            snackActions.warning(data.config_check.error);\n            setMessage(\"Error!\\n\" + data.config_check.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Config Check</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={message} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst generateRedirectRulesMutation = gql`\nquery generateRedirectRulesMutation($uuid: String!) {\n  redirect_rules(uuid: $uuid) {\n      status\n      error\n      output\n  }\n}\n`;\n\nexport function PayloadRedirectRulesDialog(props) {\n    const [message, setMessage] = useState(\"\");\n    const { loading, error } = useQuery(generateRedirectRulesMutation, {\n        variables: {uuid: props.uuid},\n        onCompleted: data => {\n          if(data.redirect_rules.status === \"success\"){\n            setMessage(data.redirect_rules.output);\n          }else{\n            snackActions.warning(data.redirect_rules.error);\n            setMessage(\"Error!\\n\" + data.redirect_rules.error);\n          }\n            \n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Payload Redirect Rules Check</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField multiline={true} onChange={()=>{}} value={message} />\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {DetailedPayloadTable} from './DetailedPayloadTable';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport {PayloadDescriptionDialog} from './PayloadDescriptionDialog';\nimport {PayloadFilenameDialog} from './PayloadFilenameDialog';\nimport {PayloadBuildMessageDialog} from './PayloadBuildMessageDialog';\nimport {PayloadsTableRowC2Status} from './PayloadsTableRowC2Status';\nimport {PayloadsTableRowBuildStatus} from './PayloadsTableRowBuildStatus';\nimport {PayloadConfigCheckDialog} from './PayloadConfigCheckDialog';\nimport {PayloadRedirectRulesDialog} from './PayloadRedirectRulesDialog';\nimport {useTheme} from '@material-ui/core/styles';\nimport InfoIcon from '@material-ui/icons/Info';\nimport {useMutation, gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst rebuildPayloadMutation = gql`\nmutation triggerRebuildMutation($uuid: String!) {\n  rebuild_payload(uuid: $uuid) {\n      status\n      error\n      uuid\n  }\n}\n`;\nconst exportPayloadConfigQuery = gql`\nquery exportPayloadConfigQuery($uuid: String!) {\n  export_payload_config(uuid: $uuid) {\n      status\n      error \n      config \n  }\n}\n`;\n\nexport function PayloadsTableRow(props){\n    const [viewError, setViewError] = React.useState(true);\n    const [openUpdate, setOpenUpdateDialog] = React.useState(false);\n    const [openDelete, setOpenDeleteDialog] = React.useState(false);\n    const [openDescription, setOpenDescriptionDialog] = React.useState(false);\n    const [openFilename, setOpenFilenameDialog] = React.useState(false);\n    const [openBuildMessage, setOpenBuildMessageDialog] = React.useState(false);\n    const [openDetailedView, setOpenDetailedView] = React.useState(false);\n    const [openConfigCheckDialog, setOpenConfigCheckDialog] = React.useState(false);\n    const [openRedirectRulesDialog, setOpenRedirectRulesDialog] = React.useState(false);\n    const dropdownAnchorRef = useRef(null);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [triggerRebuild] = useMutation(rebuildPayloadMutation, {\n      onCompleted: (data) => {\n        console.log(data);\n        snackActions.success(\"Successfully triggered rebuild\");\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to trigger rebuild: \" + data);\n      }\n    });\n    const [exportConfig] = useLazyQuery(exportPayloadConfigQuery, {\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        if(data.export_payload_config.status === \"success\"){\n          const dataBlob = new Blob([data.export_payload_config.config], {type: 'text/plain'});\n          const ele = document.getElementById(\"download_config\");\n          if(ele !== null){\n            ele.href = URL.createObjectURL(dataBlob);\n            ele.download = props.filemetum.filename_text + \".json\";\n            ele.click();\n          }else{\n            const element = document.createElement(\"a\");\n            element.id = \"download_config\";\n            element.href = URL.createObjectURL(dataBlob);\n            element.download = props.filemetum.filename_text + \".json\";\n            document.body.appendChild(element);\n            element.click();\n          }\n        }else{\n          snackActions.error(\"Failed to export configuration: \" + data.export_payload_config.error);\n        }\n      },\n      onError: (data) => {\n        snackActions.error(\"Failed to export configuration: \" + data)\n      }\n    })\n    const onAlertChanged = () => {\n        const {id, callback_alert} = props;\n        props.onAlertChanged(id, !callback_alert);\n    }\n    const onAcceptDelete = () => {\n        props.onDeletePayload(props.filemetum.id);\n        setOpenDeleteDialog(false);\n    }\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setOpenUpdateDialog(false);\n    };\n    const options = [{name: 'Rename File', click: () => {\n                        setOpenFilenameDialog(true);\n                     }},\n                     {name: 'Edit Description', click: () => {\n                        setOpenDescriptionDialog(true);\n                     }},\n                     {name: props.callback_alert ? 'Stop Alerting to New Callbacks' : \"Start Alerting to New Callbacks\", click: () => {\n                        onAlertChanged();\n                      }},\n                     {name: 'View Build Message/Stdout', click: () => {\n                        setViewError(false);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'View Build Errors', click: () => {\n                        setViewError(true);\n                        setOpenBuildMessageDialog(true);\n                     }},\n                     {name: 'Trigger New Build', click: () => {\n                      triggerRebuild({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Export Payload Config', click: () => {\n                      exportConfig({variables: {uuid: props.uuid}});\n                    }},\n                    {name: 'Generate Redirect Rules', click: () => {\n                      setOpenRedirectRulesDialog(true);\n                    }},\n                    {name: 'Check Agent C2 Configuration', click: () => {\n                      setOpenConfigCheckDialog(true);\n                    }}\n                     ]\n    ;\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setOpenUpdateDialog(false);\n      };\n    const shouldDisplay = React.useMemo(() => {\n      if(!props.deleted && !props.auto_generated){\n        return true;\n      }else if(props.deleted && props.showDeleted){\n        if(!props.auto_generated){return true}\n        if(props.auto_generated && props.showAutoGenerated){return true}\n        return false; // we're auto generated but we aren't showing autogenerated\n      }else if(props.auto_generated && props.showAutoGenerated){\n        if(!props.deleted){return true}\n        if(props.deleted && props.showDeleted){return true}\n        return false; // we're deleted and we aren't showing deleted\n      }else{\n        return false; // we're either deleted or auto generated and we aren't showing those\n      }\n    }, [props.deleted, props.showDeleted, props.auto_generated, props.showAutoGenerated]);\n    return (\n      shouldDisplay ? (\n        <React.Fragment>\n            <TableRow key={\"payload\" + props.uuid} hover>\n                <TableCell>\n                  {props.deleted ? (null) : (\n                    <React.Fragment>\n                      <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                      {openDelete && \n                        <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                      }\n                    </React.Fragment>\n                  )}\n                  \n                </TableCell>\n                <TableCell>{toLocalTime(props.creation_time, me.user.view_utc_time)}</TableCell>\n                <TableCell><Button ref={dropdownAnchorRef} size=\"small\" onClick={()=>{setOpenUpdateDialog(true);}} color=\"primary\" variant=\"contained\">Actions</Button>\n                <Popper open={openUpdate} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 4}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper variant=\"outlined\" style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\"  >\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name + props.uuid}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n                {openDescription ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDescription} \n                        onClose={()=>{setOpenDescriptionDialog(false);}} \n                        innerDialog={<PayloadDescriptionDialog payload_id={props.id} onClose={()=>{setOpenDescriptionDialog(false);}} />}\n                    />\n                ): (null) }\n                {openFilename ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilename} \n                        onClose={()=>{setOpenFilenameDialog(false);}} \n                        innerDialog={<PayloadFilenameDialog payload_id={props.id} onClose={()=>{setOpenFilenameDialog(false);}} />}\n                    />\n                ): (null) }\n                {openBuildMessage ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openBuildMessage} \n                        onClose={()=>{setOpenBuildMessageDialog(false);}} \n                        innerDialog={<PayloadBuildMessageDialog payload_id={props.id} viewError={viewError} onClose={()=>{setOpenBuildMessageDialog(false);}} />}\n                    />\n                ): (null) }\n                {openConfigCheckDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openConfigCheckDialog} \n                        onClose={()=>{setOpenConfigCheckDialog(false);}} \n                        innerDialog={<PayloadConfigCheckDialog uuid={props.uuid} onClose={()=>{setOpenConfigCheckDialog(false);}} />}\n                    />\n                ): (null) }\n                {openRedirectRulesDialog ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={openRedirectRulesDialog} \n                        onClose={()=>{setOpenRedirectRulesDialog(false);}} \n                        innerDialog={<PayloadRedirectRulesDialog uuid={props.uuid} onClose={()=>{setOpenRedirectRulesDialog(false);}} />}\n                    />\n                ): (null) }\n                </TableCell>\n                <TableCell>\n                    <PayloadsTableRowBuildStatus {...props} />\n                </TableCell>\n                <TableCell>{props.filemetum.filename_text}</TableCell>\n                <TableCell>{props.tag}</TableCell>\n                <TableCell>\n                    <PayloadsTableRowC2Status payloadc2profiles={props.payloadc2profiles} uuid={props.uuid} />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" color=\"primary\" onClick={() => setOpenDetailedView(true)}>\n                        <InfoIcon />\n                    </IconButton>\n                </TableCell>\n            </TableRow>\n            <TableRow>\n            {openDetailedView ? (\n              <MythicDialog fullWidth={true} maxWidth=\"md\" open={openDetailedView} \n                  onClose={()=>{setOpenDetailedView(false);}} \n                  innerDialog={<DetailedPayloadTable {...props} payload_id={props.id} onClose={()=>{setOpenDetailedView(false);}} />}\n              />\n            ) : (null) }\n          </TableRow>\n        </React.Fragment>\n      ) : (null)\n    )\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {gql, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\n\nconst create_payload = gql`\n mutation createPayloadMutation($payload: String!) {\n  createPayload(payloadDefinition: $payload) {\n    error\n    status\n    uuid\n  }\n}\n `;\n\nexport function ImportPayloadConfigDialog(props) {\n  const [fileValue, setFileValue] = React.useState({name: \"\"});\n  const [createPayloadMutation] = useMutation(create_payload, {\n        update: (cache, {data}) => {\n            if(data.createPayload.status === \"success\"){\n                snackActions.info(\"Submitted payload to build pipeline\");\n            }else{\n                snackActions.error(data.createPayload.error);\n            }\n        }\n    });\n    const onCommitSubmit = () => {\n      createPayloadMutation({variables: {payload: fileValue.contents}}).catch( (e) => {console.log(e)} );\n        props.onClose();\n    }\n    const onFileChange = (evt) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n          const contents = e.target.result;\n          setFileValue({name: evt.target.files[0].name, contents: contents});\n      }\n      reader.readAsBinaryString(evt.target.files[0]);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Import Payload Config to Generate New Payload</DialogTitle>\n        <DialogContent dividers={true}>\n          <Button variant=\"contained\" component=\"label\"> \n              { fileValue.name === \"\" ? \"Select File\" : fileValue.name } \n              <input onChange={onFileChange} type=\"file\" hidden /> \n          </Button>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={props.onClose} color=\"primary\">\n            Close\n          </Button>\n          <Button variant=\"contained\" onClick={onCommitSubmit} color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { PayloadsTableRow } from './PayloadsTableRow';\nimport {useTheme} from '@material-ui/core/styles';\nimport AddCircleOutlineOutlinedIcon from '@material-ui/icons/AddCircleOutlineOutlined';\nimport {ImportPayloadConfigDialog} from './ImportPayloadConfigDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\n\n\nexport function PayloadsTable({payload, onDeletePayload, onUpdateCallbackAlert}){\n    const theme = useTheme();\n    const [showDeleted, setShowDeleted] = React.useState(false);\n    const [showAutoGenerated, setShowAutoGenerated] = React.useState(false);\n    const [openPayloadImport, setOpenPayloadImport] = React.useState(false);\n    const toggleShowDeleted = () => {\n        setShowDeleted(!showDeleted);\n    }\n    const toggleShowAutoGenerated = () => {\n        setShowAutoGenerated(!showAutoGenerated);\n    }\n    return (\n        <React.Fragment>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Payloads\n                </Typography>\n                <Button size=\"small\" color=\"primary\" variant=\"contained\"\n                    style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}}\n                    onClick={toggleShowDeleted}\n                >\n                    {showDeleted ? \"Hide Deleted\" : \"Show Deleted\"}\n                </Button>\n                <Button size=\"small\" color=\"primary\" variant=\"contained\"\n                    style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}}\n                    onClick={toggleShowAutoGenerated}\n                >\n                    {showAutoGenerated ? \"Hide AutoGenerated\" : \"Show AutoGenerated\"}\n                </Button>\n                <Button size=\"small\" href=\"/new/createpayload\" style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">New Payload</Button>\n                <Button size=\"small\" onClick={() => setOpenPayloadImport(true)} style={{float: \"right\", marginTop: \"10px\", marginRight: \"30px\"}} startIcon={<AddCircleOutlineOutlinedIcon/>} color=\"primary\" variant=\"contained\">Import Payload Config</Button>\n                \n                {openPayloadImport ? (\n                    <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openPayloadImport} \n                        onClose={()=>{setOpenPayloadImport(false);}} \n                        innerDialog={<ImportPayloadConfigDialog onClose={()=>{setOpenPayloadImport(false);}} />}\n                    />\n                ): (null) }\n              </Paper>  \n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Table stickyHeader size=\"small\" style={{ \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"4rem\"}}> Delete</TableCell>\n                        <TableCell style={{width: \"15rem\"}}>Timestamp</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Modify</TableCell>\n                        <TableCell style={{width: \"6rem\"}}>Download</TableCell>\n                        <TableCell>File</TableCell>\n                        <TableCell>Description</TableCell>\n                        <TableCell >C2 Status</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Details</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {payload.map( (op) => (\n                    <PayloadsTableRow\n                        onDeletePayload={onDeletePayload}\n                        onAlertChanged={onUpdateCallbackAlert}\n                        showDeleted={showDeleted}\n                        showAutoGenerated={showAutoGenerated}\n                        key={\"payload\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n        </React.Fragment>\n    )\n}\n\n","import React from 'react';\nimport { PayloadsTable } from './PayloadsTable';\nimport {useMutation, useQuery, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nconst payloadFragment = gql`\nfragment payloadData on payload {\n  build_message\n  build_phase\n  build_stderr\n  callback_alert\n  creation_time\n  id\n  operator {\n    id\n    username\n  }\n  uuid\n  tag\n  deleted\n  auto_generated\n  payloadtype {\n    id\n    ptype\n  }\n  filemetum {\n    agent_file_id\n    filename_text\n    id\n  }\n  payloadc2profiles {\n    c2profile {\n      running\n      name\n      is_p2p\n      container_running\n    }\n  }\n}\n`;\nconst SUB_Payloads = gql`\n${payloadFragment}\nsubscription SubPayloadsQuery($operation_id: Int!) {\n  payload(where: { operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    ...payloadData\n  }\n}\n`;\nconst Get_Payloads = gql`\n${payloadFragment}\nquery GetPayloadsQuery($operation_id: Int!) {\n  payload(where: { operation_id: {_eq: $operation_id}}, order_by: {id: desc}, limit: 20) {\n    ...payloadData\n  }\n}\n`;\nconst payloadsDelete = gql`\nmutation PayloadsDeletePayloadMutation($id: Int!) {\n  deleteFile(file_id: $id) {\n      file_ids\n      status\n      error\n      payload_ids\n  }\n}\n`;\nconst payloadsCallbackAlert = gql`\nmutation PayloadsCallbackAlertMutation($id: Int!, $callback_alert: Boolean!) {\n  update_payload_by_pk(pk_columns: {id: $id}, _set: {callback_alert: $callback_alert}) {\n    id\n    callback_alert\n  }\n}\n`;\n\nexport function Payloads(props){\n    const me = useReactiveVar(meState);\n    const [payloads, setPayloads] = React.useState([]);\n    useQuery(Get_Payloads, {\n      variables: {operation_id: me.user.current_operation_id},\n      fetchPolicy: \"no-cache\",\n      onCompleted: (data) => {\n        const updated = data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n    })\n    useSubscription(SUB_Payloads, {\n      variables: {operation_id: me.user.current_operation_id},\n      fetchPolicy: \"no-cache\",\n      onSubscriptionData: ({subscriptionData}) => {\n        const updated = subscriptionData.data.payload.reduce( (prev, cur) => {\n          const index = prev.findIndex( (p) => p.id === cur.id );\n          if(index > -1){\n            prev[index] = {...cur};\n            return [...prev];\n          }else{\n            return [cur, ...prev];\n          }\n        }, [...payloads])\n        updated.sort( (a,b) => a.id > b.id ? -1 : 1);\n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to get payloads\");\n        console.log(data);\n      }\n      });\n    const [deletePayload] = useMutation(payloadsDelete, {\n        onCompleted: (data) => {\n          if(data.deleteFile.status === \"success\"){\n            const updated = payloads.map( (p) => {\n              if(data.deleteFile.payload_ids.includes(p.id)){\n                return {...p, deleted: true};\n              }else{\n                return {...p}\n              }\n            });\n            setPayloads(updated);\n            snackActions.success(\"Successfully deleted\");\n          }else{\n            snackActions.error(data.deleteFile.error);\n          }\n          \n        },\n        onError: (data) => {\n          snackActions.warning(\"Failed to delete payload\");\n          console.log(data);\n        }\n    });\n    const [callbackAlert] = useMutation(payloadsCallbackAlert, {\n      onCompleted: (data) => {\n        const updated = payloads.map( (payload) => {\n          if(payload.id === data.update_payload_by_pk.id){\n            return {...payload, ...data.update_payload_by_pk};\n          }else{\n            return {...payload};\n          }\n        });\n        if(data.update_payload_by_pk.callback_alert){\n          snackActions.success(\"Now Alerting on New Callbacks\");\n        }else{\n          snackActions.success(\"No Longer Alerting on New Callbacks\");\n        }\n        \n        setPayloads(updated);\n      },\n      onError: (data) => {\n        snackActions.warning(\"Failed to update callback alerting status\");\n        console.log(data);\n      }\n    });\n    const onDeletePayload = (id) => {\n        deletePayload({variables: {id}});\n    }\n    const onUpdateCallbackAlert = (id, callback_alert) => {\n        callbackAlert({\n            variables: {id, callback_alert}\n        \n        });\n    }\n    return (\n      <div style={{height: \"calc(94vh)\", maxHeight: \"calc(94vh)\", marginTop:\"10px\"}}>\n        <PayloadsTable onDeletePayload={onDeletePayload} onUpdateCallbackAlert={onUpdateCallbackAlert} payload={payloads} />\n      </div>\n    );\n} \n","import * as d3 from \"d3\";\n\nexport const menuFactory = (g, x, y, menuItems, data, svgId) => {\n    d3.select(`.contextMenu`).remove();\n    // Draw the menu\n    if(menuItems.length > 0){\n        d3.select(svgId).append('g').attr('class', 'contextMenu')\n            .selectAll('tmp')\n            .data(menuItems).enter()\n            .append('g').attr('class', \"menuEntry\")\n            .style({'cursor': 'pointer'});\n\n        // Draw menu entries\n        d3.selectAll(`.menuEntry`)\n            .append('rect')\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('rx', 2)\n            .attr('fill', '#ffffff')\n            .attr('width', 180)\n            .attr('height', 30)\n            .on('click', (d) => { d.action(g, data) });\n\n        d3.selectAll(`.menuEntry`)\n            .append('text')\n            .text((d) => { return d.title; })\n            .attr('x', x)\n            .attr('y', (d, i) => { return y + (i * 30); })\n            .attr('dy', 20)\n            .attr('dx', 10)\n            .on('click', (d) => { d.action(g, data) });\n\n        // Other interactions\n        d3.select('body')\n            .on('click', () => {\n                d3.select(`.contextMenu`).remove();\n                d3.select(`.menuEntry`).remove();\n            });\n        }\n}\n\nexport const createContextMenu = (g, d, menuItems, width, height, svgId) => {\n    menuFactory(g, d3.event.pageX , d3.event.pageY - 80 , menuItems, d, svgId);\n    d3.event.preventDefault();\n}\n","import React, {useRef, useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport * as d3 from 'd3';\nimport {createContextMenu} from './D3ContextMenu';\nimport dagreD3 from 'dagre-d3';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport function C2PathDialog(props) {\n    const dagreRef = useRef(null);   \n    const [reZoom, setReZoom] = useState(true);\n    const theme = useTheme();\n    useEffect( () => {\n        const view_config = {\n            rankDir: \"LR\",\n            label_components: [\"id\", \"user\"],\n            packet_flow_view: true,\n            include_disconnected: true,\n            show_all_nodes: true\n        }\n        const node_events = {\n            \"mouseover\": (parent, node, d) => {return},\n            \"mouseout\": (parent, node, d) => {return},\n            \"click\": (parent, node, d) => {return},\n            \"contextmenu\": []\n        }\n        drawC2PathElements(props.callbackgraphedges, dagreRef, reZoom, view_config, node_events, theme);\n        setReZoom(false);\n    }, [props.callbackgraphedges, reZoom, theme])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Callback {props.id}'s Egress Path</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <svg ref={dagreRef} id=\"nodeTree\" style={{width: \"100%\", height: \"calc(78vh)\", marginTop: \"10px\"}}></svg>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n\nexport const drawC2PathElements = (edges, dagreRef, reZoom, view_config, node_events, theme) =>{\n    const disconnected = `stroke: ${theme.palette.warning.main}; stroke-width: 3px; stroke-dasharray: 5, 5; fill:none`;\n    const disconnectedArrow = `fill: ${theme.palette.warning.main}`;\n    const connected = `stroke: ${theme.palette.info.main}; fill: none; stroke-width: 1.5px;`;\n    const connectedArrow = `stroke: ${theme.palette.info.main}; fill: ${theme.palette.info.main}; stroke-width: 1.5px;`\n    const nodeColor = `fill: ${theme.palette.success.main},`;\n    const nodeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const edgeLabelStyle = `labelStyle: \"font-size: 2em\"; fill: ${theme.palette.text.primary}`;\n    const add_edge_to_mythic = (g, edge, view_config) => {\n        if(!edge.source.active && !view_config[\"show_all_nodes\"]){return}\n        add_node(g, edge.source, view_config);\n        g.setEdge(edge.source.id, \"Mythic\",  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp,direction: edge.direction,\n            style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n            arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n    }\n    const add_node = (g, node, view_config) => {\n        g.setNode(node.id, {label: getLabel(node, view_config[\"label_components\"]),  node: node, style: nodeColor, labelStyle: nodeLabelStyle, shape: 'circle', isParent:false});\n        g.setNode(node.host, {label:  node.host, clusterLabelPos: 'top', style: `fill:${theme.palette.graphGroup}`, node: null, labelStyle: nodeLabelStyle, isParent: true});\n        g.setParent(node.id, node.host);\n        g.setNode(node.host + \"mythic_expander\", {label:\"\", shape: \"square\", node: node, isParent: false})\n        g.setParent(node.host + \"mythic_expander\", node.host)\n    }\n    const getLabel = (edge, label_components) => {\n        return label_components.map( (name) => {\n            return edge[name]\n        }).join(\", \");\n    }\n    const add_edge_p2p = (g, edge, view_config) => {\n        if(!edge.source.active && !edge.destination.active && !view_config[\"show_all_nodes\"]){\n            return;\n        }else if(!view_config[\"show_all_nodes\"]){\n            //at least one of the two nodes is active and we don't want to show all the nodes\n            if(edge.source.active){add_node(g, edge.source, view_config)}\n            if(edge.destination.active){add_node(g, edge.destination, view_config)}\n            // not adding an edge because one of the nodes could be non-existent\n            if(!edge.source.active || !edge.destination.active){\n                return;\n            }\n        }else{\n            add_node(g, edge.source, view_config);\n            add_node(g, edge.destination, view_config);\n        }\n        if(edge.direction === 1){\n            if(view_config[\"packet_flow_view\"]){\n                createEdge(g, edge, 2);\n            }else{\n                createEdge(g, edge, 1);\n            }\n        }else if(edge.direction === 2){\n            createEdge(g, edge, 2);\n        }else{\n            createEdge(g, edge, 1);\n            createEdge(g, edge, 2);\n        }\n    }\n    const createEdge = (g, edge, adjusted_direction) =>{\n        if(adjusted_direction === 1){\n            g.setEdge(edge.source.id, edge.destination.id,  {label: edge.c2profile.name, edge_id: edge.id,end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }else if(adjusted_direction === 2){\n            g.setEdge(edge.destination.id, edge.source.id,  {label: edge.c2profile.name, edge_id: edge.id, end_timestamp: edge.end_timestamp, direction: edge.direction,\n                        style: edge.end_timestamp === null ? connected: disconnected, labelStyle: edgeLabelStyle,\n                        arrowheadStyle: edge.end_timestamp === null ? connectedArrow : disconnectedArrow}, edge.c2profile.name)\n        }\n    }\n    var g = new dagreD3.graphlib.Graph({ compound: true, multigraph: true, directed: true}).setGraph({rankdir: view_config[\"rankDir\"]}).setDefaultEdgeLabel(function() {return {}; });\n    var svg = d3.select(dagreRef.current);\n    var svgGroup;\n    var test = svg.select(\"g\")._groups[0][0];\n    if(test){\n        svgGroup = svg.select(\"g\");\n    }else{\n        svgGroup = svg.append(\"g\");\n    }\n    var zoom = d3.zoom().on(\"zoom\", function() {\n          svgGroup.attr(\"transform\", d3.event.transform);\n        });\n    if(reZoom){\n        svg.select('g.output').remove();\n        svg.call(zoom);\n    }\n    g.setNode(\"Mythic\", {label: \"\", style: nodeColor, shape: 'circle', node: null, labelStyle: nodeLabelStyle});\n    edges.forEach( (edge) => {\n        if(!view_config[\"include_disconnected\"] && edge.end_timestamp !== null){return}\n        if(edge.destination.id === edge.source.id){\n            if(g.hasEdge(edge.source.id, \"Mythic\", edge.c2profile.name)){\n                // we already have an edge to Mythic from our source id, check if this edge is newer or not\n                if(edge.id > g.edge(edge.source.id, \"Mythic\", edge.c2profile.name).edge_id){\n                    add_edge_to_mythic(g, edge, view_config);\n                }\n            }else{\n                //this is a new edge to mythic\n                add_edge_to_mythic(g, edge, view_config);\n            }\n        }else{\n            if(edge.direction === 1){\n                if(!view_config[\"packet_flow_view\"]){\n                    if(g.hasEdge(edge.source.id, edge.destination.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.source.id, edge.destination.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }else{\n                            console.log(\"doing nothing, dropping data\");\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                        //we've seen an edge between these two before\n                        if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                            add_edge_p2p(g, edge, view_config);\n                        }\n                    }else{\n                        //this is a new edge\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }\n                \n            }else if(edge.direction === 2){\n                if(g.hasEdge(edge.destination.id, edge.source.id, edge.c2profile.name)){\n                    //we've seen an edge between these two before\n                   \n                    if(edge.id > g.edge(edge.destination.id, edge.source.id, edge.c2profile.name).edge_id){\n                        add_edge_p2p(g, edge, view_config);\n                    }\n                }else{\n                    //this is a new edge\n                    add_edge_p2p(g, edge, view_config);\n                }\n            }\n        }\n    });\n    var render = new dagreD3.render();\n    var width = svg.node().getBoundingClientRect().width;\n    var height = svg.node().getBoundingClientRect().height;\n    render.shapes().circle = function circle(parent, bbox, node) {\n         var shapeSvg = parent.insert(\"image\")\n             .attr(\"class\", \"nodeImage\")\n             .attr(\"xlink:href\", function(d) {\n                 if (node.node) {\n                    return \"/static/\" + node.node.payload.payloadtype.ptype + \".svg\";\n                 }else{\n                    return \"/static/mythic.svg\";\n                 }\n             }).attr(\"x\", \"-20px\")\n             .attr(\"y\", \"-20px\")\n             .attr(\"width\", \"40px\")\n             .attr(\"height\", \"40px\")\n             .on(\"mouseover\", function(d) { node_events[\"mouseover\"](parent, node, d) })\n             .on(\"mouseout\", function(d) { node_events[\"mouseout\"](parent, node, d) })\n             .on(\"click\", function(d) { d3.event.preventDefault(); node_events[\"click\"](parent, node, d) })\n             .on(\"contextmenu\", (d) => {createContextMenu(g, node, node_events[\"contextmenu\"], width, height, \"#callbacksgraph\")});\n         node.intersect = function(point) {\n             return dagreD3.intersect.circle(node, 20, point);\n         };\n         return shapeSvg;\n     };\n     render.shapes().square = function square(parent, bbox, node){\n         var shapeSvg = parent.insert(\"rect\")\n            .attr(\"width\", function(d) {\n                let candidates = g.children(node.node.host);\n                let longest = node.node.host.length;\n                if(candidates !== undefined){\n                    candidates.forEach( (x) => {\n                        if(g.node(x).label.length > longest){\n                            longest = g.node(x).label.length;\n                        }\n                    });\n                }\n                if(view_config[\"rankDir\"] === \"LR\"){\n                    // need a box at least as long as the host name or longest label with matching parent\n                    return longest * 9 + \"px\";\n                }else{\n                    // need a box at least as long as the hostname or longest label with matching parent\n                    //   need to also subtract width of elements for everything with an edge to Mythic\n                    if(candidates !== undefined){\n                        let count = 0;\n                        candidates.forEach( (x) => {\n                            if(g.outEdges(x, \"Mythic\").length > 0){\n                                count += 1;\n                            }\n                        });\n                        longest = (longest * 9) - (count * 100);\n                        if(longest < 0){ return 0}\n                        return longest + \"px\";\n                    }else{\n                        console.log(\"candidates were undefined\");\n                    }\n                }\n            })\n            .attr(\"height\", 0);\n        return shapeSvg;\n     }\n     // if a parent has no children then it should be removed\n    \n    render(svgGroup, g);\n    if(reZoom){\n        var graphWidth = g.graph().width + 40;\n        var graphHeight = g.graph().height + 40;\n        var zoomScale = Math.min(width / graphWidth, height / graphHeight);\n        var translateX = (width / 2) - ((graphWidth * zoomScale) / 2)\n        var translateY = (height / 2) - ((graphHeight * zoomScale) / 2);\n        var svgZoom = svg.transition().duration(500);\n        svgZoom.call(zoom.transform, d3.zoomIdentity.translate(translateX, translateY).scale(zoomScale));\n    }\n    svgGroup.selectAll(\"g.nodes g.label\")\n        .attr(\"transform\", \"translate(0,30)\");\n}\nexport const getNodeEdges = (g, node) =>{\n    return g.nodeEdges(node);\n}\n\n","import React, {useEffect} from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockIcon from '@material-ui/icons/Lock';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {C2PathDialog} from '../Callbacks/C2PathDialog';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useSubscription, gql } from '@apollo/client';\n\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\n\nexport function ExpandedCallbackSideDetails(props){\n    const maxWidth = \"30%\";\n    const theme = useTheme();\n    return (\n        <div style={{maxWidth, width: maxWidth, display: \"inline-flex\", height: \"calc(94vh)\", flexDirection: \"column\"}}>\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                    Callback {props.callback.id}\n                </Typography>\n            </Paper>\n            <TableContainer component={Paper} className=\"mythicElement\">   \n            <ExpandedCallbackSideDetailsTable {...props.callback} />\n        </TableContainer>\n        </div>\n    )\n}\n\n\nexport function ExpandedCallbackSideDetailsTable(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(props.last_checkin);\n    });\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = callbackEdges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in callbackEdges that are _not_ in myEdges so far\n                const newEdges = callbackEdges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        setCallbackgraphedges(myActiveEdges);\n        setCallbackgraphedgesAll(myEdges);\n    }, [callbackEdges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const options = [{name: props.locked ? 'Unlock (Locked by ' + props.locked_operator.username + ')' : 'Lock Callback', icon: props.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                 ];\n    return (\n        <Table  size=\"small\" style={{\"overflow\": \"scroll\"}}>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Elevation Level</TableCell>\n                        <TableCell>{props.integrity_level}\n                            {props.integrity_level > 2 ? (\" ( Elevated Access )\") : \"\"}\n                            {props.integrity_level === 2 ? (\" ( Medium Integrity ) \") : \"\"}\n                            {props.integrity_level < 2 ? (\" ( Low Integrity )\") : \"\"}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Callback Lock Status</TableCell>\n                        <TableCell>\n                            {props.locked ? (\n                                <React.Fragment>\n                                    <LockOpenIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Unlock (Locked by ' + props.locked_operator.username + ')'}\n                                    </Typography>\n                                </React.Fragment>\n                            ) : (\n                                <React.Fragment>\n                                    <LockIcon style={{paddingRight: \"5px\", display: \"inline-block\", paddingTop: \"6px\"}}/>\n                                    <Typography style={{display: \"inline-block\"}}>\n                                        {'Lock Callback'}\n                                    </Typography>\n                                </React.Fragment>\n                            )}\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>IP Address</TableCell>\n                        <TableCell>{props.ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>External IP</TableCell>\n                        <TableCell>{props.external_ip}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Host</TableCell>\n                        <TableCell>{props.host}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>User</TableCell>\n                        <TableCell>{props.user}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Domain</TableCell>\n                        <TableCell>{props.domain}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>OS / Architecture</TableCell>\n                        <TableCell>{props.os}({props.architecture})</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process ID</TableCell>\n                        <TableCell>{props.pid}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Last Checkin</TableCell>\n                        <TableCell>{displayTime}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Description</TableCell>\n                        <TableCell>{props.description}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Sleep Info</TableCell>\n                        <TableCell>{props.sleep_info}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Agent Type</TableCell>\n                        <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Egress Route</TableCell>\n                        <TableCell>\n                        {hasEgressRoute ? \n                            <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                            <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                        }\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Process Name</TableCell>\n                        <TableCell>{props.process_name}</TableCell>\n                    </TableRow>\n                    <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                        onClose={()=>{setOpenC2Dialog(false);}} \n                        innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                    />\n                    <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                        innerDialog={\n                            <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n                        }\n                        />\n                    <TableRow hover>\n                        <TableCell>Extra Info</TableCell>\n                        <TableCell>{props.extra_info}</TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n    )\n}\n","import React  from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {ExpandedCallbackSideDetails} from './ExpandedCallbackSideDetails';\nimport  {useParams} from \"react-router-dom\";\nimport {CallbacksTabsTaskingPanel} from '../Callbacks/CallbacksTabsTasking';\nimport { snackActions } from '../../utilities/Snackbar';\n\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    last_checkin\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n    callbacktokens(where: {deleted: {_eq: false}}) {\n      token {\n        TokenId\n        id\n        User\n        description\n      }\n      callback {\n        id\n      }\n      id\n    }\n  }\n}\n `;\n\n\nexport function ExpandedCallback(props){\n    \n    const {callbackId} = useParams();\n    const [callback, setCallbacks] = React.useState({\"payload\": {\"payloadtype\": {\"ptype\": \"\"}}, \"callbacktokens\": []});\n    const [tabInfo, setTabInfo] = React.useState({callbackID: parseInt(callbackId)});\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callbackId}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          if(subscriptionData.data.callback_by_pk === null){\n            snackActions.error(\"Unknown Callback\");\n            return;\n          }\n          setCallbacks(subscriptionData.data.callback_by_pk);\n          setTabInfo({tabID: \"interact\", tabType: \"interact\", callbackID: parseInt(callbackId), \n          payloadtype: subscriptionData.data.callback_by_pk[\"payload\"][\"payloadtype\"][\"ptype\"],\n          payloadDescription: subscriptionData.data.callback_by_pk[\"payload\"][\"tag\"],\n          callbackDescription: subscriptionData.data.callback_by_pk[\"description\"],\n          os: subscriptionData.data.callback_by_pk[\"payload\"][\"os\"]});\n        }\n    });\n\n    return (\n        <div style={{width: \"100%\", height: \"100%\", maxHeight: \"100%\", display: \"flex\", flexDirection: \"row\"}}>\n          {tabInfo.payloadtype !== undefined ? (\n            <React.Fragment>\n              <ExpandedCallbackSideDetails callback={callback} />\n              <CallbacksTabsTaskingPanel style={{height:`calc(${96}vh)`, maxHeight:`calc(${96}vh)`, width:\"69%\", maxWidth: \"69%\", position: \"absolute\", overflow: \"auto\", display: \"inline-flex\", flexDirection: \"column\"}} \n                tabInfo={tabInfo} callbacktokens={callback.callbacktokens}/>\n            </React.Fragment>\n          ) : (\n            <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>Fetching Callback</div>\n          )}\n            \n        </div>\n    );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { red } from '@material-ui/core/colors';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Link } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: `100%`,\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n}));\n\nexport function QuickStartCard() {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  return (\n    <Card className={classes.root} elevation={5}>\n      <CardHeader\n        avatar={\n          <Avatar className={classes.avatar}>\n            \n          </Avatar>\n        }\n        title=\"Mythic Quick Start Guide\"\n        subheader=\"Expand this section to learn how to: Generate a Payload, Download the Payload, Get To Callbacks\"\n        style={{paddingBottom: 0, marginBottom: 0}}\n      />\n      <CardActions styl={{padding: 0, margin: 0}}>\n        <IconButton\n          className={clsx(classes.expand, {\n            [classes.expandOpen]: expanded,\n          })}\n          onClick={handleExpandClick}\n          aria-expanded={expanded}\n          aria-label=\"show more\"\n        >\n          <ExpandMoreIcon />\n        </IconButton>\n      </CardActions>\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n        <CardContent style={{margin: 0, paddingTop: 0}}>\n          <ol>\n            <li>\n              Create a payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/createpayload\"}>Create -> Create Payload</Link>\n              <ul>\n                <li>Select Desired OS</li>\n                <li>Select Payload Type and Supply Build Parameters</li>\n                <li>Select Commands You Want Stamped Into The Agent</li>\n                <li>Select C2 Profiles and Fill Out Parameters</li>\n                <li>Name Your Payload</li>\n                <li>Provide a Description</li>\n                <li>Build Your Payload</li>\n              </ul>\n            </li>\n            <li>Download Your Payload at <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/payloads\"}>Operational Data -> Payloads</Link></li>\n            <li>Run Your payload\n              <ul>\n                <li>For More Information About Your Agent, Check Out The <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/docs/agents\"}>Internal Documentation</Link></li>\n              </ul>\n            </li>\n            <li>Interact With Your Agent At <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={\"/new/callbacks\"}>Active Callbacks</Link></li>\n          </ol>\n        </CardContent>\n      </Collapse>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst GetC2ProfilesAndPayloadTypes = gql`\nquery GetC2AndPayloadType {\n  c2profile(where: {deleted: {_eq: false}}) {\n    name\n    id\n  }\n  payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: false}}) {\n    ptype\n    id\n    payloadtypec2profiles {\n      c2profile {\n        name\n        id\n      }\n    }\n  }\n  wrappers: payloadtype(where: {deleted: {_eq: false}, wrapper: {_eq: true}}) {\n    ptype\n    id\n    wrap_these_payload_types {\n      wrapped {\n        ptype\n      }\n    }\n  }\n}\n`;\n\nexport function AgentC2Overview(props){\n    const theme = useTheme();\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const [payloadTypeRows, setPayloadTypeRows] = React.useState([]);\n    const [wrappers, setWrappers] = React.useState([]);\n    const { loading } = useQuery(GetC2ProfilesAndPayloadTypes, {fetchPolicy: \"network-only\",\n      onCompleted: (data) => {\n        const c2Headers = data.c2profile.map( (c2) => c2.name);\n        const payloadRows = data.payloadtype.map( (payload) => {\n          const payloadc2 = payload.payloadtypec2profiles.map( (c2) => {\n            return c2.c2profile.name;\n          })\n          return {ptype: payload.ptype, payloadtypec2profiles: payloadc2 };\n        });\n        c2Headers.sort();\n        payloadRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        const wrapperRows = data.wrappers.map( (payload) => {\n          const wrapped = payload.wrap_these_payload_types.map( (w) => {\n            return w.wrapped.ptype;\n          });\n          return {ptype: payload.ptype, wrapped}\n        });\n        wrapperRows.sort( (a,b) => a.ptype < b.ptype ? -1 : 1);\n        setWrappers(wrapperRows);\n        setC2Profiles(c2Headers);\n        setPayloadTypeRows(payloadRows);\n      },\n      onError: (data) => {\n\n      }\n    });\n    if (loading) {\n     return <LinearProgress />;;\n    }\n    return (\n    <div style={{ marginTop: \"10px\", marginRight: \"5px\"}}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Agent / C2 Overview\n            </Typography>\n        </Paper>\n        <TableContainer component={Paper} className=\"mythicElement\">   \n        <Table  size=\"small\">\n            <TableHead>\n                <TableRow hover>\n                    <TableCell></TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={c2}>{c2}</TableCell>\n                    ))}\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                {payloadTypeRows.map( (payload) => (\n                  <TableRow key={payload.ptype} hover>\n                    <TableCell>{payload.ptype}</TableCell>\n                    {c2Profiles.map( (c2) => (\n                      <TableCell key={'payload' + c2}>\n                        {payload.payloadtypec2profiles.includes(c2) ? \n                        <Tooltip title={payload.ptype + \" supports \" + c2}>\n                            <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                        </Tooltip>\n                     : \"\"}\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n            </TableBody>\n        </Table>\n    </TableContainer>\n        {wrappers.length > 0 && \n          <TableContainer component={Paper} className=\"mythicElement\" style={{marginTop: \"10px\"}}>   \n              <Table  size=\"small\">\n                  <TableHead>\n                      <TableRow hover>\n                          <TableCell></TableCell>\n                          {payloadTypeRows.map( (pt) => (\n                            <TableCell key={'wrapped' + pt.ptype}>{pt.ptype}</TableCell>\n                          ))}\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                      {wrappers.map( (payload) => (\n                        <TableRow key={'wrapper' + payload.ptype} hover>\n                          <TableCell>{payload.ptype}</TableCell>\n                          {payloadTypeRows.map( (wr) => (\n                            <TableCell key={'payload' + wr.ptype}>\n                              {payload.wrapped.includes(wr.ptype) ? \n                              <Tooltip title={payload.ptype + \" wraps \" + wr.ptype}>\n                                  <CheckCircleIcon style={{color: theme.palette.success.main}}/>\n                              </Tooltip>\n                          : \"\"}\n                            </TableCell>\n                          ))}\n                        </TableRow>\n                      ))}\n                  </TableBody>\n              </Table>\n          </TableContainer>\n        }\n      </div>\n    );\n} \n","import React from 'react';\nimport { QuickStartCard } from './QuickStartCard';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {AgentC2Overview} from './AgentC2Overview';\n\n\nexport function Home() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Welcome To Mythic\n      </Typography>\n    </Paper> \n    <QuickStartCard />\n    <AgentC2Overview />\n  </div>\n  );\n}\n","import { Route, Redirect } from 'react-router-dom';\nimport React from 'react';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../cache';\n\n\nexport function LoggedInRoute({component, ...rest}){\n    const me = useReactiveVar(meState);\n    return (\n        <Route {...rest} render={(props) => (\n            me.loggedIn && me.user ? (\n                //logged in\n                React.createElement(component, props)\n            ) : (\n                //not logged in\n                <Redirect to={{ \n                    pathname: '/new/login',\n                    state: { from: props.location }\n                }} />\n            )\n        )} />\n    )\n}\n","import { makeStyles, fade } from \"@material-ui/core\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { snackActions } from '../utilities/Snackbar';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport ComputerIcon from '@material-ui/icons/Computer';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { useTheme } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  rowContainer: {},\n  row: {\n    display: \"flex\",\n    alignItems: \"left\",\n    marginLeft: (props) => theme.spacing(3 * props.depth),\n    userSelect: \"none\",\n    whiteSpace: \"nowrap\"\n  },\n  rowButtonWrapper: {\n    width: theme.spacing(3),\n    textAlign: \"center\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  rowButton: {\n    width: theme.spacing(3)\n  },\n  rowLabel: {\n    marginLeft: theme.spacing(0.5)\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    whiteSpace: 'pre-line',\n},\nsecondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    overflow: 'hidden',\n    display: 'block',\n    textOverflow: 'ellipsis',\n    maxWidth: 'calc(90vw)',\n    whiteSpace: 'nowrap',\n},\ntaskAndTimeDisplay: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n    overflow: 'hidden',\n    display: 'block',\n    textOverflow: 'ellipsis',\n    maxWidth: 'calc(90vw)',\n    whiteSpace: 'nowrap',\n},\nsecondaryHeadingExpanded: {\n    fontSize: theme.typography.pxToRem(15),\n    //color: theme.palette.text.secondary,\n    display: 'block',\n    overflow: 'auto',\n    maxWidth: 'calc(90vw)',\n    whiteSpace: 'break-word',\n},\nicon: {\n    verticalAlign: 'middle',\n    height: 20,\n    width: 20,\n},\ndetails: {\n    alignItems: 'center',\n},\ncolumn: {\n    padding: '0 5px 0 0',\n    display: 'inline-block',\n    margin: 0,\n    height: 'auto',\n},\npaper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n},\ntable: {\n    minWidth: 750,\n},\nvisuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n},\n}));\n\nconst FileBrowserNode = ({ data, isOpen, onClickButton, handleOnClickRow }) => {\n  const theme = useTheme();\n  return (\n      <div style={{display: 'flex' , marginBottom: \"2px\", flexGrow: 1, width: \"100%\"}}>\n          {[...Array(data.depth)].map((o, i) => (\n              <div\n                  key={'folder' + data.id + 'lines' + i}\n                  style={{\n                      borderLeft: `2px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n                      marginLeft: 15,\n                      paddingRight: 15,\n                      display: 'inline-block',\n                  }}></div>\n          ))}\n          <FileBrowserRow filebrowserobj={data} isOpen={isOpen} onClickButton={onClickButton} handleOnClickRow={handleOnClickRow} />\n      </div>\n  );\n};\nconst FileBrowserRow = (props) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  return (\n      <div\n          className={classes.root}\n          style={{ backgroundColor: theme.body, color: theme.text, alignItems: 'center', display: 'flex', paddingRight: \"10px\" }}\n          onClick={props.handleOnClickRow}>\n          {props.filebrowserobj.parent_id === null ? (\n              <ComputerIcon style={{ marginLeft: '3px', marginRight: '5px' }} onClick={props.onClickButton} />\n          ) : props.filebrowserobj.is_file ? (\n              <DescriptionIcon style={{ marginLeft: '3px', marginRight: '5px' }} />\n          ) : props.isOpen ? (\n              <FolderOpenIcon\n                  style={{\n                      marginLeft: '3px',\n                      marginRight: '5px',\n                      color: theme.folderColor\n                  }}\n                  onClick={props.onClickButton}\n              />\n          ) : (\n              <FolderIcon style={{ paddingTop: '5px', marginLeft: '3px', marginRight: '5px', color: theme.folderColor }} onClick={props.onClickButton} />\n          )}\n          {props.filebrowserobj.depth > 0 &&\n          props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 99 ? (\n              <Tooltip title='Number of known children'>\n                  <Badge\n                      style={{ left: -50 }}\n                      max={99}\n                      badgeContent={props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count}\n                      color='primary'\n                      anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}></Badge>\n              </Tooltip>\n          ) : null}\n          <Typography\n              style={{\n                  color:\n                      props.filebrowserobj.filebrowserobjs_aggregate.aggregate.count > 0 ||\n                      props.filebrowserobj.success !== null\n                          ? theme.palette.text.primary\n                          : theme.palette.text.secondary,\n              }}>\n              {props.filebrowserobj.parent_id === null ? props.filebrowserobj.host : props.filebrowserobj.name_text}\n          </Typography>\n\n          {props.filebrowserobj.success === true && props.filebrowserobj.depth > 0 ? (\n              <Tooltip title='Successfully listed contents of folder'>\n                  <CheckCircleIcon fontSize='small' style={{ color: theme.palette.success.main }} />\n              </Tooltip>\n          ) : props.filebrowserobj.success === false && props.filebrowserobj.depth > 0 ? (\n              <Tooltip title='Failed to list contents of folder'>\n                  <ErrorIcon fontSize='small' style={{ color: theme.palette.error.main }} />\n              </Tooltip>\n          ) : null}\n      </div>\n  );\n};\n\nconst VirtualTreeRow = ({\n  onSelectNode,\n  onExpandNode,\n  onCollapseNode,\n  ...ListProps\n}) => {\n\n  const item = ListProps.data[ListProps.index];\n\n  const handleOnClickButton = (e) => {\n    e.stopPropagation();\n    if (item.isOpen) {\n      onCollapseNode(item.id, item);\n    } else {\n      snackActions.info('fetching elements...', { persist: true });\n      onExpandNode(item.id, item);\n    }\n  };\n\n  const handleOnClickRow = (e) => {\n    onSelectNode(item.id, item);\n  };\n\n  return (\n    <FileBrowserNode data={item.data} handleOnClickRow={handleOnClickRow} onClickButton={handleOnClickButton} isOpen={item.isOpen} />\n  );\n};\n\nconst FileBrowserVirtualTree = ({\n  nodes,\n  openNodes,\n  onSelectNode,\n  onExpandNode,\n  onCollapseNode,\n  display_name,\n}) => {\n  const flattenNode = useCallback(\n    (node, depth = 0) => {\n      if(depth === 0){\n        return [\n          {\n            id: node.id,\n            name: node[display_name],\n            depth,\n            isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n            isOpen: true,\n            data: {...node, depth}\n          },\n          ...(Object.values(node.children).reduce( (prev, cur) => {\n            if(cur.is_file){return [...prev]}\n            return [...prev, flattenNode(cur, depth+1)];\n        }, []).flat())\n        ];\n      }\n      if (openNodes[node.id] === true) {\n        console.log(\"node children: \", node.children);\n        return [\n          {\n            id: node.id,\n            name: node[display_name],\n            depth,\n            isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n            isOpen: true,\n            data: {...node, depth}\n          },\n          ...(Object.values(node.children).reduce( (prev, cur) => {\n              if(cur.is_file){return [...prev]}\n              return [...prev, flattenNode(cur, depth+1)];\n          }, []).flat())\n        ];\n      }\n      console.log(\"node children: \", node.children);\n      return [\n        {\n          id: node.id,\n          name: node[display_name],\n          depth,\n          isLeaf: !Array.isArray(node.children) || node.children.length === 0,\n          isOpen: false,\n          data: {...node, depth},\n        }\n      ];\n     \n    },\n    [openNodes]\n  );\n\n  const flattenedNodes = useMemo(\n    () => nodes.map((node) => flattenNode(node)).flat(),\n    [flattenNode, nodes]\n  );\n  useEffect( () => {\n    console.log(\"nodes\", nodes);\n    console.log(\"flattenedNodes\", flattenedNodes);\n  }, [nodes, flattenedNodes])\n  return (\n    <AutoSizer>\n      {(AutoSizerProps) => (\n        <List\n          itemData={flattenedNodes}\n          direction=\"vertical\"\n          height={AutoSizerProps.height - 10}\n          width={AutoSizerProps.width - 10}\n          itemCount={flattenedNodes.length}\n          itemSize={24}\n        >\n          {(ListProps) => (\n            <VirtualTreeRow\n              {...ListProps}\n              onSelectNode={onSelectNode}\n              onExpandNode={onExpandNode}\n              onCollapseNode={onCollapseNode}\n            />\n          )}\n        </List>\n      )}\n    </AutoSizer>\n  );\n};\n\nexport default FileBrowserVirtualTree;\n","import React from 'react';\nimport FileBrowserVirtualTree from '../../MythicComponents/MythicFileBrowserVirtualTree';\n\n\nexport const CallbacksTabsFileBrowserTree = ({ treeRoot, fetchFolderData, setTableData }) => {\n    const [openNodes, setOpenNodes] = React.useState({});\n    const toggleNodeExpanded = (nodeId, nodeData) => {\n        console.log(\"toggleNodeExpanded\", nodeId, nodeData);\n        setTableData(nodeData.data);\n        fetchFolderData(nodeData.data);\n        setOpenNodes({\n          ...openNodes,\n          [nodeId]: true\n        });\n      };\n    const toggleNodeCollapsed = (nodeId, nodeData) => {\n        setOpenNodes({\n          ...openNodes,\n          [nodeId]: false\n        });\n      };\n    const onSelectNode = (nodeId, nodeData) => {\n        setTableData(nodeData.data);\n        console.log(\"onSelectNode\", nodeId, nodeData);\n    };\n    return treeRoot.length === 0 ? (\n        <div\n            style={{\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                position: 'absolute',\n                left: '50%',\n                top: '50%',\n            }}>\n            No File Browser Data Collected\n        </div>\n    ) : (\n        <FileBrowserVirtualTree\n            nodes={treeRoot}\n            display_name={\"name_text\"}\n            openNodes={openNodes}\n            onSelectNode={onSelectNode}\n            onExpandNode={toggleNodeExpanded}\n            onCollapseNode={toggleNodeCollapsed}\n        />\n    );\n};","import React, { useEffect } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport IconButton from '@material-ui/core/IconButton';\n\nexport function DownloadHistoryDialog(props){\n   const [history, setHistory] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    setHistory(props.value);\n   }, [props.value]);\n  return (\n    <React.Fragment>\n      <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n        <DialogContent dividers={true}>\n          <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n          <TableContainer component={Paper} className=\"mythicElement\">\n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                  <TableHead>\n                      <TableRow>\n                          <TableCell style={{width: \"5rem\"}}>Download</TableCell>\n                          <TableCell>Time</TableCell>\n                          <TableCell>Task</TableCell>\n                          <TableCell>Comment</TableCell>\n                      </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {history.map( (hist) => (\n                      <TableRow key={'hist' + hist.id}>\n                        <TableCell >{hist.complete ? (\n                          <IconButton href={\"/api/v1.4/files/download/\" + hist.agent_file_id} style={{color: theme.palette.success.main}}><GetAppIcon /></IconButton>\n                        ) : (hist.chunks_received + \"/\" + hist.total_chunks)}</TableCell>\n                        <TableCell>{hist.timestamp}</TableCell>\n                        <TableCell>{hist.task.id}</TableCell>\n                        <TableCell>{hist.comment}</TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n              </Table>\n            </TableContainer>\n          </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useMutation, useLazyQuery, gql } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {\n    MythicDialog,\n    MythicModifyStringDialog,\n    MythicViewJSONAsTableDialog,\n} from '../../MythicComponents/MythicDialog';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Paper from '@material-ui/core/Paper';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { useTheme } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { DownloadHistoryDialog } from './DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport 'react-virtualized/styles.css';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport { copyStringToClipboard } from '../../utilities/Clipboard';\nimport MythicResizableGrid from '../../MythicComponents/MythicResizableGrid';\n\nconst getPermissionsDataQuery = gql`\n    query getPermissionsQuery($filebrowserobj_id: Int!) {\n        filebrowserobj_by_pk(id: $filebrowserobj_id) {\n            id\n            permissions\n        }\n    }\n`;\nconst getFileDownloadHistory = gql`\n    query getFileDownloadHistory($filebrowserobj_id: Int!) {\n        filebrowserobj_by_pk(id: $filebrowserobj_id) {\n            filemeta {\n                id\n                comment\n                agent_file_id\n                chunks_received\n                complete\n                total_chunks\n                timestamp\n                task {\n                    id\n                    comment\n                }\n            }\n        }\n    }\n`;\nconst updateFileComment = gql`\n    mutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!) {\n        update_filebrowserobj_by_pk(pk_columns: { id: $filebrowserobj_id }, _set: { comment: $comment }) {\n            comment\n            id\n        }\n    }\n`;\n\nconst columns = [\n    { name: 'Actions', width: 100, disableAutosize: true, disableSort: true },\n    { name: 'Name', type: 'string', key: 'name_text', fillWidth: true },\n    { name: 'Size', type: 'number', key: 'size', width: 200 },\n    { name: 'Last Modified', type: 'date', key: 'modify_time', width: 200 },\n    { name: 'Comment', type: 'string', key: 'comment', width: 200 },\n];\n\nexport const CallbacksTabsFileBrowserTable = (props) => {\n    const [allData, setAllData] = React.useState([]);\n    const [sortDirection, setSortDirection] = React.useState(null);\n    const [sortKey, setSortKey] = React.useState(null);\n    const [sortType, setSortType] = React.useState(null);\n\n    const sortedData = React.useMemo(() => {\n        if (sortKey === null || sortType === null) {\n            return allData;\n        }\n        const tempData = [...allData];\n\n        if (sortType === 'number' || sortType === 'size') {\n            tempData.sort((a, b) => (parseInt(a[sortKey]) > parseInt(b[sortKey]) ? 1 : -1));\n        } else if (sortType === 'date') {\n            tempData.sort((a, b) => (new Date(a[sortKey]) > new Date(b[sortKey]) ? 1 : -1));\n        } else if (sortType === 'string') {\n            tempData.sort((a, b) => (a[sortKey].toLowerCase() > b[sortKey].toLowerCase() ? 1 : -1));\n        }\n        if (sortDirection === 'DESC') {\n            tempData.reverse();\n        }\n        return tempData;\n    }, [allData, sortKey, sortType, sortDirection]);\n\n    const gridData = React.useMemo(\n        () =>\n            sortedData.map((row) => [\n                <FileBrowserTableRowActionCell rowData={row} onTaskRowAction={props.onTaskRowAction} />,\n                <FileBrowserTableRowNameCell rowData={row} cellData={row.name_text} />,\n                FileBrowserTableRowSizeCell({ cellData: row.size }),\n                FileBrowserTableRowStringCell({ cellData: row.modify_time }),\n                FileBrowserTableRowStringCell({ cellData: row.comment }),\n            ]),\n        [sortedData, props.onTaskRowAction]\n    );\n\n    useEffect(() => {\n        if (props.showDeletedFiles) {\n            setAllData([...props.selectedFolder]);\n        } else {\n            const filteredData = props.selectedFolder.filter((f) => !f.deleted);\n            setAllData([...filteredData]);\n        }\n    }, [props.selectedFolder, props.showDeletedFiles]);\n\n    const onRowDoubleClick = (e, rowIndex) => {\n        const rowData = allData[rowIndex];\n        if (rowData.is_file) {\n            return;\n        }\n        snackActions.info('Fetching contents of folder...');\n        props.onRowDoubleClick(rowData);\n\n        setSortKey(null);\n        setSortType(null);\n        setSortDirection('ASC');\n    };\n\n    const onClickHeader = (e, columnIndex) => {\n        const column = columns[columnIndex];\n        if(column.disableSort){\n            return;\n        }\n        if (!column.key) {\n            setSortKey(null);\n            setSortType(null);\n            setSortDirection('ASC');\n        }\n        if (sortKey === column.key) {\n            if (sortDirection === 'ASC') {\n                setSortDirection('DESC');\n            } else {\n                setSortKey(null);\n                setSortType(null);\n                setSortDirection('ASC');\n            }\n        } else {\n            setSortDirection('ASC');\n            setSortKey(column.key);\n            setSortType(column.type);\n        }\n    };\n\n    const sortColumn = columns.findIndex((column) => column.key === sortKey);\n\n    return (\n        <div style={{ width: '100%', height: '100%' }}>\n            <MythicResizableGrid\n                columns={columns}\n                sortIndicatorIndex={sortColumn}\n                sortDirection={sortDirection}\n                items={gridData}\n                rowHeight={35}\n                onClickHeader={onClickHeader}\n                onDoubleClickRow={onRowDoubleClick}\n            />\n        </div>\n    );\n};\nconst FileBrowserTableRowNameCell = ({ cellData, rowData }) => {\n    const theme = useTheme();\n    return (\n        <div style={{ alignItems: 'center', display: 'flex', textDecoration: rowData.deleted ? 'line-through' : '' }}>\n            {rowData.is_file ? (\n                <DescriptionIcon style={{ marginRight: '5px' }} />\n            ) : (\n                <FolderOpenIcon\n                    style={{\n                        marginRight: '5px',\n                        color:\n                            rowData.filebrowserobjs_aggregate.aggregate.count > 0 || rowData.success !== null\n                                ? theme.folderColor\n                                : 'grey',\n                    }}\n                />\n            )}\n            {rowData.filemeta.length > 0 ? <GetAppIcon style={{ color: theme.palette.success.main }} /> : null}\n            <pre \n                style={{\n                    color:\n                        rowData.filebrowserobjs_aggregate.aggregate.count > 0 || rowData.success !== null\n                            ? theme.palette.text.primary\n                            : theme.palette.text.secondary,\n                }}>\n                {cellData}\n            </pre>\n            {rowData.success === true ? (\n                <Tooltip title='Successfully listed contents of folder'>\n                    <CheckCircleIcon fontSize='small' style={{ color: theme.palette.success.main }} />\n                </Tooltip>\n            ) : rowData.success === false ? (\n                <Tooltip title='Failed to list contents of folder'>\n                    <ErrorIcon fontSize='small' style={{ color: theme.palette.error.main }} />\n                </Tooltip>\n            ) : null}\n        </div>\n    );\n};\nconst FileBrowserTableRowStringCell = ({ cellData }) => {\n    return cellData;\n};\nconst FileBrowserTableRowSizeCell = ({ cellData }) => {\n    const getStringSize = () => {\n        try {\n            // process for getting human readable string from bytes: https://stackoverflow.com/a/18650828\n            let bytes = parseInt(cellData);\n            if (cellData === '') return '';\n            if (bytes === 0) return '0 B';\n            const decimals = 2;\n            const k = 1024;\n            const dm = decimals < 0 ? 0 : decimals;\n            const sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n        } catch (error) {\n            return cellData;\n        }\n    };\n    return getStringSize(cellData);\n};\nconst FileBrowserTableRowActionCell = ({ rowData, onTaskRowAction }) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [fileCommentDialogOpen, setFileCommentDialogOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState('');\n    const [downloadHistory, setDownloadHistory] = React.useState([]);\n    const [getPermissions] = useLazyQuery(getPermissionsDataQuery, {\n        onCompleted: (data) => {\n            setPermissionData(data.filebrowserobj_by_pk.permissions);\n            if (data.filebrowserobj_by_pk.permissions !== '') {\n                setViewPermissionsDialogOpen(true);\n            } else {\n                snackActions.warning('No permission data available');\n            }\n        },\n        fetchPolicy: 'network-only',\n    });\n    const [getHistory] = useLazyQuery(getFileDownloadHistory, {\n        onCompleted: (data) => {\n            //console.log(data);\n            if (data.filebrowserobj_by_pk.filemeta.length === 0) {\n                snackActions.warning('File has no download history');\n            } else {\n                setDownloadHistory(data.filebrowserobj_by_pk.filemeta);\n                setFileHistoryDialogOpen(true);\n            }\n        },\n        fetchPolicy: 'network-only',\n    });\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success('updated comment');\n        },\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({ variables: { filebrowserobj_id: rowData.id, comment: comment } });\n    };\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption) {\n            case 'A':\n                optionsA[index].click(event);\n                break;\n            case 'B':\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n            return;\n        }\n        setDropdownOpen(false);\n    };\n    const copyToClipboard = () => {\n        let result = copyStringToClipboard(rowData.full_path_text);\n        if (result) {\n            snackActions.success('Copied text!');\n        } else {\n            snackActions.error('Failed to copy text');\n        }\n    };\n    const optionsA = [\n        {\n            name: 'View Permissions',\n            icon: <VisibilityIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                getPermissions({ variables: { filebrowserobj_id: rowData.id } });\n            },\n        },\n        {\n            name: 'Download History',\n            icon: <HistoryIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                getHistory({ variables: { filebrowserobj_id: rowData.id } });\n            },\n        },\n        {\n            name: 'Edit Comment',\n            icon: <EditIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                setFileCommentDialogOpen(true);\n            },\n        },\n        {\n            name: 'Copy Path to Clipboard',\n            icon: <FileCopyOutlinedIcon style={{ paddingRight: '5px' }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                copyToClipboard();\n            },\n        },\n    ];\n    const optionsB = [\n        {\n            name: 'Task File Listing',\n            icon: <ListIcon style={{ paddingRight: '5px', color: theme.palette.warning.main }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                onTaskRowAction({\n                    path: rowData.parent_path_text,\n                    host: rowData.host,\n                    filename: rowData.name_text,\n                    uifeature: 'file_browser:list',\n                });\n            },\n        },\n        {\n            name: 'Task Download',\n            icon: <GetAppIcon style={{ paddingRight: '5px', color: theme.palette.success.main }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                onTaskRowAction({\n                    path: rowData.parent_path_text,\n                    host: rowData.host,\n                    filename: rowData.name_text,\n                    uifeature: 'file_browser:download',\n                });\n            },\n        },\n        {\n            name: 'Task File Removal',\n            icon: <DeleteIcon style={{ paddingRight: '5px', color: theme.palette.error.main }} />,\n            click: (evt) => {\n                evt.stopPropagation();\n                onTaskRowAction({\n                    path: rowData.parent_path_text,\n                    host: rowData.host,\n                    filename: rowData.name_text,\n                    uifeature: 'file_browser:remove',\n                });\n            },\n        },\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{ }}\n                size='small'\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup='menu'\n                onClick={handleDropdownToggle}\n                color='primary'\n                variant='contained'\n                ref={dropdownAnchorRef}>\n                Actions\n            </Button>\n            <Popper\n                open={dropdownOpen}\n                anchorEl={dropdownAnchorRef.current}\n                role={undefined}\n                transition\n                style={{ zIndex: 4000 }}>\n                {({ TransitionProps, placement }) => (\n                    <Grow\n                        {...TransitionProps}\n                        style={{\n                            transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                        }}>\n                        <Paper\n                            style={{\n                                backgroundColor:\n                                    theme.palette.type === 'dark'\n                                        ? theme.palette.primary.dark\n                                        : theme.palette.primary.light,\n                                color: 'white',\n                            }}>\n                            <ClickAwayListener onClickAway={handleClose}>\n                                <MenuList id='split-button-menu'>\n                                    {optionsA.map((option, index) => (\n                                        <MenuItem\n                                            key={option.name}\n                                            onClick={(event) => handleMenuItemClick('A', event, index)}>\n                                            {option.icon}\n                                            {option.name}\n                                        </MenuItem>\n                                    ))}\n                                    <Divider />\n                                    {optionsB.map((option, index) => (\n                                        <MenuItem\n                                            key={option.name}\n                                            onClick={(event) => handleMenuItemClick('B', event, index)}>\n                                            {option.icon}\n                                            {option.name}\n                                        </MenuItem>\n                                    ))}\n                                </MenuList>\n                            </ClickAwayListener>\n                        </Paper>\n                    </Grow>\n                )}\n            </Popper>\n            {fileCommentDialogOpen && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={fileCommentDialogOpen}\n                    onClose={() => {\n                        setFileCommentDialogOpen(false);\n                    }}\n                    innerDialog={\n                        <MythicModifyStringDialog\n                            title='Edit File Browser Comment'\n                            onSubmit={onSubmitUpdatedComment}\n                            value={rowData.comment}\n                            onClose={() => {\n                                setFileCommentDialogOpen(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n            {viewPermissionsDialogOpen && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={viewPermissionsDialogOpen}\n                    onClose={() => {\n                        setViewPermissionsDialogOpen(false);\n                    }}\n                    innerDialog={\n                        <MythicViewJSONAsTableDialog\n                            title='View Permissions Data'\n                            leftColumn='Permission'\n                            rightColumn='Value'\n                            value={permissionData}\n                            onClose={() => {\n                                setViewPermissionsDialogOpen(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n            {fileHistoryDialogOpen && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={fileHistoryDialogOpen}\n                    onClose={() => {\n                        setFileHistoryDialogOpen(false);\n                    }}\n                    innerDialog={\n                        <DownloadHistoryDialog\n                            title='Download History'\n                            value={downloadHistory}\n                            onClose={() => {\n                                setFileHistoryDialogOpen(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n        </React.Fragment>\n    );\n};\n","import { MythicTabPanel, MythicTabLabel } from '../../../components/MythicComponents/MythicTabPanel';\nimport React, { useEffect, useCallback } from 'react';\nimport { gql, useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicConfirmDialog } from '../../MythicComponents/MythicConfirmDialog';\nimport { MythicSelectFromListDialog } from '../../MythicComponents/MythicSelectFromListDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { useTheme } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport { createTaskingMutation } from './CallbacksTabsTasking';\nimport { TaskParametersDialog } from './TaskParametersDialog';\nimport { CallbacksTabsFileBrowserTree } from './CallbacksTabsFileBrowserTree';\nimport { CallbacksTabsFileBrowserTable } from './CallbacksTabsFileBrowserTable';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport { MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\n\nconst fileDataFragment = gql`\n    fragment fileObjData on filebrowserobj {\n        access_time\n        comment\n        deleted\n        filemeta {\n            id\n        }\n        host\n        id\n        is_file\n        modify_time\n        parent_id\n        size\n        success\n        task {\n            callback {\n                id\n            }\n            operator {\n                id\n            }\n        }\n        full_path_text\n        name_text\n        timestamp\n        parent_path_text\n        filebrowserobjs_aggregate {\n            aggregate {\n                count\n            }\n        }\n    }\n`;\nconst rootFileQuery = gql`\n    ${fileDataFragment}\n    query myRootFolderQuery($operation_id: Int!) {\n        filebrowserobj(where: { operation_id: { _eq: $operation_id }, parent_id: { _is_null: true } }) {\n            ...fileObjData\n        }\n    }\n`;\nconst folderQuery = gql`\n    ${fileDataFragment}\n    query myFolderQuery($filebrowserobj_id: Int!, $operation_id: Int!) {\n        filebrowserobj(\n            where: { parent_id: { _eq: $filebrowserobj_id }, operation_id: { _eq: $operation_id } }\n            order_by: { is_file: asc, name: asc }\n        ) {\n            ...fileObjData\n        }\n    }\n`;\nconst fileDataSubscription = gql`\n    ${fileDataFragment}\n    subscription liveData($now: timestamp!, $operation_id: Int!) {\n        filebrowserobj(\n            distinct_on: id\n            order_by: { id: desc }\n            where: { timestamp: { _gt: $now }, operation_id: { _eq: $operation_id } }\n            limit: 1\n        ) {\n            ...fileObjData\n        }\n    }\n`;\nconst getDeltaFilesQuery = gql`\n    ${fileDataFragment}\n    query myDeltaFilesQuery($lastTime: timestamp!, $now: timestamp!, $operation_id: Int!) {\n        filebrowserobj(\n            distinct_on: id\n            order_by: { id: desc }\n            where: {\n                _and: [{ timestamp: { _gte: $lastTime } }, { timestamp: { _lte: $now } }]\n                operation_id: { _eq: $operation_id }\n            }\n        ) {\n            ...fileObjData\n        }\n    }\n`;\nconst getLoadedCommandsQuery = gql`\n    query GetLoadedCommandsQuery($callback_id: Int!, $payloadtype: String!, $ui_feature: String!) {\n        loadedcommands(\n            where: { callback_id: { _eq: $callback_id }, command: { supported_ui_features: { _iregex: $ui_feature } } }\n        ) {\n            id\n            command {\n                cmd\n                help_cmd\n                description\n                id\n                needs_admin\n                payload_type_id\n                attributes\n                commandparameters {\n                    id\n                    type\n                }\n                supported_ui_features\n            }\n        }\n        command(\n            where: {\n                payloadtype: { ptype: { _eq: $payloadtype } }\n                script_only: { _eq: true }\n                deleted: { _eq: false }\n                supported_ui_features: { _iregex: $ui_feature }\n            }\n        ) {\n            id\n            cmd\n            help_cmd\n            description\n            needs_admin\n            attributes\n            payload_type_id\n            commandparameters {\n                id\n                type\n            }\n            supported_ui_features\n        }\n    }\n`;\nconst getCallbackDataQuery = gql`\n    query getCallbackDataQuery($callback_id: Int!) {\n        callback_by_pk(id: $callback_id) {\n            payload {\n                os\n                payloadtype {\n                    ptype\n                    id\n                }\n                tag\n                id\n            }\n            id\n            operation_id\n            host\n            active\n        }\n    }\n`;\n\nexport function CallbacksTabsFileBrowserLabel(props) {\n    const [description, setDescription] = React.useState('File Browser: ' + props.tabInfo.callbackID);\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    };\n    useEffect(() => {\n        if (props.tabInfo.customDescription !== '' && props.tabInfo.customDescription !== undefined) {\n            setDescription(props.tabInfo.customDescription);\n        } else {\n            setDescription('File Browser: ' + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription]);\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    };\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props} />\n            {openEditDescriptionDialog && (\n                <MythicDialog\n                    fullWidth={true}\n                    open={openEditDescriptionDialog}\n                    onClose={() => {\n                        setOpenEditDescriptionDialog(false);\n                    }}\n                    innerDialog={\n                        <MythicModifyStringDialog\n                            title={\"Edit Tab's Description\"}\n                            onClose={() => {\n                                setOpenEditDescriptionDialog(false);\n                            }}\n                            value={description}\n                            onSubmit={editDescriptionSubmit}\n                        />\n                    }\n                />\n            )}\n        </React.Fragment>\n    );\n}\nexport const CallbacksTabsFileBrowserPanel = ({ index, value, tabInfo }) => {\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const selectedFolderDataRef = React.useRef({});\n    const [selectedFolderData, setSelectedFolderData] = React.useState({\n        task: { callback: { id: tabInfo.callbackID } },\n        host: tabInfo.host,\n        full_path_text: '.',\n    });\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState({});\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [searchCallback, setSearchCallback] = React.useState({});\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const [uiFeature, setUIFeature] = React.useState('');\n    const currentCallbackIDSetInTable = React.useRef();\n    const [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n    const lastFetchedTime = React.useRef(new Date().toISOString());\n    const [savedStateForConfirmDialog, setSavedStateForConfirmDialog] = React.useState({});\n    const [showDeletedFiles, setShowDeletedFiles] = React.useState(false);\n    const { subscribeToMore } = useQuery(rootFileQuery, {\n        variables: { operation_id: me.user.current_operation_id },\n        onCompleted: (data) => {\n            const roots = data.filebrowserobj.reduce((prev, cur) => {\n                for (let i = 0; i < prev.length; i++) {\n                    if (prev[i]['host'] === cur.host) {\n                        prev[i].chilren.push({ ...cur, parent_id: cur.host, children: [] });\n                        return [...prev];\n                    }\n                }\n                return [\n                    ...prev,\n                    { ...cur, id: cur.host, children: [{ ...cur, parent_id: cur.host, children: [] }] },\n                ];\n            }, []);\n            setFileBrowserRootsState(roots);\n        },\n        fetchPolicy: 'network-only',\n    });\n    const [getFileDeltas] = useLazyQuery(getDeltaFilesQuery, {\n        onCompleted: (data) => {\n            let updatingData = [...fileBrowserRoots.current];\n            data.filebrowserobj.forEach((obj) => {\n                let found = false;\n                if (obj.parent_id === null) {\n                    // we could have a new host, a new root, or a n updated root\n                    let foundHost = false;\n                    updatingData.forEach((root) => {\n                        if (root['host'] === obj['host']) {\n                            foundHost = true;\n                            //console.log(root, obj);\n                            root.children.forEach((rootEntry) => {\n                                if (rootEntry['name_text'] === obj['name_text']) {\n                                    found = true;\n                                    rootEntry.comment = obj.comment;\n                                    rootEntry.success = obj.success;\n                                    rootEntry.deleted = obj.deleted;\n                                    rootEntry.filemeta = obj.filemeta;\n                                }\n                            });\n                        }\n                    });\n                    if (!foundHost) {\n                        found = false;\n                    } else if (foundHost && !found) {\n                        found = true;\n                        // there's a host entry that matches obj, but this is a new root, so find the match again\n                        updatingData.forEach((root) => {\n                            if (root['host'] === obj['host']) {\n                                root.children.push({ ...obj, parent_id: obj['host'], children: [] });\n                            }\n                        });\n                    }\n                } else {\n                    // parent_id is not null, so it's not a root entry\n                    updatingData.forEach((root) => {\n                        if (root['host'] === obj['host']) {\n                            found = true;\n                            mergeData(root, obj.parent_id, [obj]);\n                        }\n                    });\n                }\n                if (!found && obj.parent_id === null) {\n                    // add a new top-level host entry\n                    updatingData.push({\n                        ...obj,\n                        id: obj['host'],\n                        children: [{ ...obj, parent_id: obj['host'], children: [] }],\n                    });\n                }\n            });\n            setFileBrowserRootsState(updatingData);\n            //console.log(\"updating data\", updatingData, selectedFolderDataRef.current, data.filebrowserobj[0]);\n            if (\n                data.filebrowserobj.length > 0 &&\n                selectedFolderDataRef.current.id !== undefined &&\n                (data.filebrowserobj[0].parent_id === selectedFolderDataRef.current.id ||\n                    selectedFolderDataRef.current.host === data.filebrowserobj[0].host)\n            ) {\n                // this means we got updated data for something in the folder we're currently looking at in the table, so we need to make sure to update the table\n                //console.log(\"updating table\");\n                setSelectedFolder(Object.values(selectedFolderDataRef.current.children));\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n        },\n    });\n    useEffect(() => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState]);\n    useEffect(() => {\n        selectedFolderDataRef.current = selectedFolderData;\n    }, [selectedFolderData]);\n    const [getFolderData] = useLazyQuery(folderQuery, {\n        onError: (data) => {\n            console.error(data);\n        },\n        fetchPolicy: 'no-cache',\n        notifyOnNetworkStatusChange: true,\n        onCompleted: (data) => {\n            let found = false;\n            if (data.filebrowserobj.length === 0) {\n                snackActions.dismiss();\n                if (selectedFolderData.success === null) {\n                    snackActions.info(\"Folder hasn't been listed yet\");\n                } else {\n                    snackActions.info('Empty folder');\n                }\n                setSelectedFolder(Object.values(selectedFolderData.children));\n                return;\n            }\n            snackActions.dismiss();\n            snackActions.success('Fetched data');\n            const newRoots = fileBrowserRootsState.map((root) => {\n                if (data.filebrowserobj[0]['host'] === root['host']) {\n                    // for each element we get back, add to this root\n                    let workingSet = { ...root };\n                    found = true;\n                    mergeData(workingSet, data.filebrowserobj[0].parent_id, data.filebrowserobj);\n                    return workingSet;\n                } else {\n                    return { ...root };\n                }\n            });\n            if (!found) {\n                // we need to add this as a root element\n                newRoots.push(data.filebrowserobj[0]);\n                mergeData(data.filebrowserobj[0], data.filebrowserobj[0].parent_id, data.filebrowserobj);\n            }\n            //console.log(\"setting new roots\");\n            setFileBrowserRootsState(newRoots);\n            setSelectedFolder(Object.values(selectedFolderData.children));\n        },\n    });\n    const [getCallbackData] = useLazyQuery(getCallbackDataQuery, {\n        fetchPolicy: 'no-cache',\n        onCompleted: (data) => {\n            if (data.callback_by_pk !== null) {\n                if (data.callback_by_pk.active) {\n                    setSearchCallback({\n                        ...data.callback_by_pk,\n                        ui_feature: '.*' + uiFeature + '.*',\n                        ...savedStateForConfirmDialog,\n                    });\n                } else {\n                    snackActions.warning(\"That callback isn't active\");\n                }\n            } else {\n                snackActions.warning('Failed to find that Callback');\n            }\n            setSavedStateForConfirmDialog({});\n        },\n        onError: (data) => {\n            snackActions.error('Failed to fetch callback data for the specified callback');\n        },\n    });\n    const mergeData = useCallback((search, parent_id, all_objects) => {\n        //merge the obj into fileBrowserRoots\n        //console.log('in mergeData');\n        // might need to do a recursive call\n        // if this is a folder with children, check the children\n        if (parent_id === search.id) {\n            // iterate for each child we're trying to update/insert\n            //console.log(\"found parent, setting children\");\n            for (let i = 0; i < all_objects.length; i++) {\n                if (search.children[all_objects[i].id] === undefined) {\n                    search.children[all_objects[i].id] = { ...all_objects[i], children: {} };\n                } else {\n                    search.children[all_objects[i].id] = {\n                        ...all_objects[i],\n                        children: search.children[all_objects[i].id].children,\n                    };\n                }\n            }\n            //console.log(\"found parent, set children, returning\");\n            return true;\n        }\n        // this current search isn't all_object's parent, so check search's children for our parent\n        for (const [_, value] of Object.entries(search.children)) {\n            if (all_objects[0].parent_path_text.startsWith(value.full_path_text)) {\n                let found = mergeData(value, parent_id, all_objects);\n                if (found) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }, []);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (_, { data }) => {\n            if (data.createTask.status === 'error') {\n                snackActions.error(data.createTask.error);\n            } else {\n                snackActions.success('Issued \"' + selectedCommand['cmd'] + '\" to Callback ' + searchCallback.id);\n            }\n            setSelectedCommand({});\n            setSearchCallback({});\n\n            setTaskInfo({});\n            setUIFeature('');\n        },\n        onError: (data) => {\n            console.error(data);\n            setSelectedCommand({});\n            setSearchCallback({});\n            setTaskInfo({});\n            setUIFeature('');\n        },\n    });\n    const [getCommandOptions] = useLazyQuery(getLoadedCommandsQuery, {\n        onCompleted: (data) => {\n            const availableCommands = data.loadedcommands.reduce((prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.command.reduce(\n                (prev, cur) => {\n                    return [...prev, cur];\n                },\n                [...availableCommands]\n            );\n            setFileBrowserCommands(finalCommands);\n            if (finalCommands.length === 0) {\n                snackActions.warning('No commands currently loaded that support that feature');\n            } else if (finalCommands.length === 1) {\n                setSelectedCommand({ ...finalCommands[0] });\n            } else {\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: 'network-only',\n    });\n    useEffect(() => {\n        //console.log(\"useEffect for many things\");\n        if (selectedCommand['cmd'] !== undefined) {\n            switch (uiFeature) {\n                case 'file_browser:list':\n                    // static parameters passed\n                    if (taskInfo.path === undefined) {\n                        // this is an ls from the top table bar\n                        createTask({\n                            variables: {\n                                callback_id: searchCallback.id,\n                                command: selectedCommand['cmd'],\n                                params: JSON.stringify({\n                                    host: searchCallback['host'],\n                                    path: searchCallback.fullPath,\n                                    file: '',\n                                }),\n                                tasking_location: 'file_browser',\n                            },\n                        });\n                    } else {\n                        // this is an ls from the action menu of a row\n                        createTask({\n                            variables: {\n                                callback_id: currentCallbackIDSetInTable.current,\n                                command: selectedCommand['cmd'],\n                                params: JSON.stringify({\n                                    host: taskInfo.host,\n                                    path: taskInfo.path,\n                                    file: taskInfo.filename,\n                                }),\n                                tasking_location: 'file_browser',\n                            },\n                        });\n                    }\n                    break;\n                case 'file_browser:upload':\n                    // need to do a popup for the user to select the file\n                    setOpenParametersDialog(true);\n                    break;\n                case 'file_browser:download':\n                // static parameters passed\n                // fallsthrough\n                case 'file_browser:remove':\n                    // static parameters passed\n                    createTask({\n                        variables: {\n                            callback_id: currentCallbackIDSetInTable.current,\n                            command: selectedCommand['cmd'],\n                            params: JSON.stringify({\n                                host: taskInfo.host,\n                                path: taskInfo.path,\n                                file: taskInfo.filename,\n                            }),\n                            tasking_location: 'file_browser',\n                        },\n                    });\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    }, [\n        selectedCommand,\n        createTask,\n        searchCallback,\n        selectedFolderData.full_path_text,\n        taskInfo.filename,\n        taskInfo.host,\n        taskInfo.path,\n        uiFeature,\n    ]);\n    useEffect(() => {\n        if (searchCallback.id !== undefined) {\n            getCommandOptions({\n                variables: {\n                    callback_id: searchCallback.id,\n                    payloadtype: searchCallback.payload.payloadtype.ptype,\n                    ui_feature: searchCallback.ui_feature,\n                },\n            });\n        }\n    }, [searchCallback]);\n    const onSetTableData = useCallback((filebrowserobj) => {\n        setSelectedFolder(Object.values(filebrowserobj.children));\n        setSelectedFolderData(filebrowserobj);\n    }, []);\n    const fetchFolderData = useCallback((filebrowserobj) => {\n        getFolderData({\n            variables: { filebrowserobj_id: filebrowserobj.id, operation_id: me.user.current_operation_id },\n        });\n        setSelectedFolderData(filebrowserobj);\n    }, []);\n    const onListFilesButton = ({ callbackID, fullPath }) => {\n        getCallbackData({ variables: { callback_id: callbackID } });\n        setSavedStateForConfirmDialog({ fullPath });\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature('file_browser:list');\n    };\n    const onUploadFileButton = ({ callbackID }) => {\n        getCallbackData({ variables: { callback_id: callbackID } });\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature('file_browser:upload');\n    };\n    const onTaskRowAction = useCallback(({ path, host, filename, uifeature, confirmed }) => {\n        if (uifeature === 'file_browser:remove' && !confirmed) {\n            setSavedStateForConfirmDialog({ path, host, filename, uifeature });\n            setOpenConfirmDialog(true);\n        } else {\n            setSavedStateForConfirmDialog({});\n            getCallbackData({ variables: { callback_id: currentCallbackIDSetInTable.current } });\n            // clear out commands and re-fetch\n            setFileBrowserCommands([]);\n            setUIFeature(uifeature);\n            setTaskInfo({\n                path,\n                host,\n                filename,\n            });\n        }\n    }, []);\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    };\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({ variables: { callback_id: searchCallback.id, command: cmd, params: parameters, files } });\n    };\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    };\n    const subscribeToMoreCallback = useCallback(\n        (prev, { subscriptionData }) => {\n            if (subscriptionData.data.filebrowserobj.length > 0) {\n                getFileDeltas({\n                    variables: {\n                        operation_id: me.user.current_operation_id,\n                        now: new Date().toISOString(),\n                        lastTime: lastFetchedTime.current,\n                    },\n                });\n                if (\n                    subscriptionData.data.filebrowserobj[0] !== null &&\n                    subscriptionData.data.filebrowserobj[0] !== undefined\n                ) {\n                    lastFetchedTime.current = subscriptionData.data.filebrowserobj[0]['timestamp'];\n                }\n\n                return;\n            }\n        },\n        [mergeData]\n    );\n    const toggleShowDeletedFiles = (showStatus) => {\n        setShowDeletedFiles(showStatus);\n    };\n    return (\n        <MythicTabPanel index={index} value={value}>\n            <div style={{ display: 'flex', flexGrow: 1, overflowY: 'auto' }}>\n                <div style={{ width: '30%', overflow: 'auto' }}>\n                    <CallbacksTabsFileBrowserTree\n                        showDeletedFiles={showDeletedFiles}\n                        treeRoot={fileBrowserRootsState}\n                        fetchFolderData={fetchFolderData}\n                        setTableData={onSetTableData}\n                    />\n                </div>\n                <div style={{ width: '60%', display: 'flex', flexDirection: 'column', flexGrow: 1 }}>\n                    <div style={{ flexGrow: 0 }}>\n                        <FileBrowserTableTop\n                            selectedFolderData={selectedFolderData}\n                            onListFilesButton={onListFilesButton}\n                            onUploadFileButton={onUploadFileButton}\n                            onChangeCallbackID={onChangeCallbackID}\n                            toggleShowDeletedFiles={toggleShowDeletedFiles}\n                            initialCallbackID={tabInfo.callbackID}\n                            subscribeToNewFileBrowserObjs={() =>\n                                subscribeToMore({\n                                    document: fileDataSubscription,\n                                    variables: {\n                                        now: new Date().toISOString(),\n                                        operation_id: me.user.current_operation_id,\n                                    },\n                                    updateQuery: subscribeToMoreCallback,\n                                })\n                            }\n                        />\n                    </div>\n                    <div style={{ flexGrow: 1 }}>\n                        <CallbacksTabsFileBrowserTable\n                            showDeletedFiles={showDeletedFiles}\n                            onRowDoubleClick={fetchFolderData}\n                            selectedFolder={selectedFolder}\n                            onTaskRowAction={onTaskRowAction}\n                        />\n                    </div>\n                </div>\n            </div>\n            {openSelectCommandDialog && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='sm'\n                    open={openSelectCommandDialog}\n                    onClose={() => {\n                        setOpenSelectCommandDialog(false);\n                    }}\n                    innerDialog={\n                        <MythicSelectFromListDialog\n                            onClose={() => {\n                                setOpenSelectCommandDialog(false);\n                            }}\n                            onSubmit={onSubmitSelectedCommand}\n                            options={fileBrowserCommands}\n                            title={'Select Command'}\n                            action={'select'}\n                            identifier={'id'}\n                            display={'cmd'}\n                        />\n                    }\n                />\n            )}\n            {openParametersDialog && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='md'\n                    open={openParametersDialog}\n                    onClose={() => {\n                        setOpenParametersDialog(false);\n                    }}\n                    innerDialog={\n                        <TaskParametersDialog\n                            command={selectedCommand}\n                            callback_id={searchCallback.id}\n                            payloadtype_id={searchCallback.payload.payloadtype.id}\n                            operation_id={searchCallback.operation_id}\n                            onSubmit={submitParametersDialog}\n                            onClose={() => {\n                                setOpenParametersDialog(false);\n                            }}\n                        />\n                    }\n                />\n            )}\n            {openConfirmDialog && (\n                <MythicConfirmDialog\n                    onSubmit={() => {\n                        onTaskRowAction({ ...savedStateForConfirmDialog, confirmed: true });\n                    }}\n                    onClose={() => {\n                        setOpenConfirmDialog(false);\n                    }}\n                    open={openConfirmDialog}\n                />\n            )}\n        </MythicTabPanel>\n    );\n};\nconst FileBrowserTableTop = ({\n    selectedFolderData,\n    onListFilesButton,\n    initialCallbackID,\n    onUploadFileButton,\n    onChangeCallbackID,\n    subscribeToNewFileBrowserObjs,\n    toggleShowDeletedFiles,\n}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState('');\n    const [fullPath, setFullPath] = React.useState('');\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [showDeletedFiles, setLocalShowDeletedFiles] = React.useState(false);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const onChangeHost = (_, value) => {\n        setHostname(value);\n    };\n    const onChangePath = (_, value) => {\n        setFullPath(value);\n    };\n    const onChangeID = (_, value) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    };\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if (selectedFolderData.task) {\n            setCallbackID(selectedFolderData.task.callback.id);\n        } else {\n            setCallbackID(0);\n            onChangeCallbackID(0);\n        }\n    };\n    useEffect(() => {\n        if (selectedFolderData.host !== undefined) {\n            setHostname(selectedFolderData.host);\n        }\n        if (selectedFolderData.full_path_text !== undefined) {\n            setFullPath(selectedFolderData.full_path_text);\n        }\n        if (!manuallySetCallbackID) {\n            if (selectedFolderData.task !== undefined) {\n                setCallbackID(selectedFolderData.task.callback.id);\n            }\n        }\n    }, [selectedFolderData, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if (fullPath === '') {\n            snackActions.warning('Must provide a path to list');\n            return;\n        }\n        if (callbackID > 0) {\n            onListFilesButton({ callbackID, fullPath });\n        } else {\n            snackActions.warning('Must select a folder or set a callback number first');\n        }\n    };\n    const onLocalUploadFileButton = () => {\n        if (callbackID > 0) {\n            onUploadFileButton({ callbackID });\n        } else {\n            snackActions.warning('Must select a folder or set a callback number first');\n        }\n    };\n    useEffect(() => {\n        //console.log(\"useEffect for onChangeCAllbackID\")\n        onChangeCallbackID(callbackID);\n    }, [callbackID]);\n    useEffect(() => {\n        subscribeToNewFileBrowserObjs();\n    }, []);\n    const onLocalToggleShowDeletedFiles = () => {\n        setLocalShowDeletedFiles(!showDeletedFiles);\n        toggleShowDeletedFiles(!showDeletedFiles);\n    };\n    return (\n        <Grid container spacing={0} style={{ paddingTop: '10px' }}>\n            <Grid item xs={4}>\n                <MythicTextField placeholder='Host Name' value={hostname} onChange={onChangeHost} name='Host Name' />\n            </Grid>\n            <Grid item xs={7}>\n                <MythicTextField\n                    placeholder='Path'\n                    value={fullPath}\n                    onEnter={onLocalListFilesButton}\n                    onChange={onChangePath}\n                    name='Path'\n                    InputProps={{\n                        endAdornment: (\n                            <React.Fragment>\n                                <Tooltip title='Task callback to list contents'>\n                                    <IconButton style={{ padding: '3px' }} onClick={onLocalListFilesButton}>\n                                        <RefreshIcon style={{ color: theme.palette.info.main }} />\n                                    </IconButton>\n                                </Tooltip>\n                                <Tooltip title='Upload file to folder via callback'>\n                                    <IconButton style={{ padding: '3px' }} onClick={onLocalUploadFileButton}>\n                                        <CloudUploadIcon style={{ color: theme.palette.info.main }} />\n                                    </IconButton>\n                                </Tooltip>\n                                <Tooltip title={showDeletedFiles ? 'Hide Deleted Files' : 'Show Deleted Files'}>\n                                    <IconButton style={{ padding: '3px' }} onClick={onLocalToggleShowDeletedFiles}>\n                                        {showDeletedFiles ? (\n                                            <VisibilityIcon style={{ color: theme.palette.info.main }} />\n                                        ) : (\n                                            <VisibilityOffIcon style={{ color: theme.palette.info.main }} />\n                                        )}\n                                    </IconButton>\n                                </Tooltip>\n                            </React.Fragment>\n                        ),\n                        style: { padding: 0 },\n                    }}\n                />\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField\n                    type='number'\n                    placeholder='Callback'\n                    name='Callback'\n                    onChange={onChangeID}\n                    value={callbackID}\n                    InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <Tooltip title='Change Callback Based on Data Origin'>\n                                <IconButton style={{ padding: '3px' }} onClick={revertCallbackID}>\n                                    <LockIcon style={{ color: theme.palette.info.main }} />\n                                </IconButton>\n                            </Tooltip>\n                        ) : (\n                            <Tooltip title='Manually Update Callback Number to Prevent Data Origin Tracking'>\n                                <IconButton style={{ padding: '3px' }}>\n                                    <RotateLeftIcon disabled style={{ color: theme.palette.warning.main }} />\n                                </IconButton>\n                            </Tooltip>\n                        ),\n                        style: { padding: 0, margin: 0 },\n                    }}\n                />\n            </Grid>\n        </Grid>\n    );\n};\n","import React, {useCallback} from 'react';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {FixedSizeTree} from 'react-vtree';\nimport Autosizer from 'react-virtualized-auto-sizer';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      width: '99%',\n      marginTop: \"3px\",\n      marginBottom: \"2px\",\n      marginLeft: \"3px\",\n      marginRight: \"0px\",\n      height: \"auto\",\n    },\n    heading: {\n      fontSize: theme.typography.pxToRem(15),\n      whiteSpace: \"pre-line\"\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    taskAndTimeDisplay: {\n      fontSize: theme.typography.pxToRem(12),\n      color: theme.palette.text.secondary,\n      overflow: \"hidden\", \n      display: \"block\", \n      textOverflow: \"ellipsis\", \n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"nowrap\"\n    },\n    secondaryHeadingExpanded: {\n      fontSize: theme.typography.pxToRem(15),\n      //color: theme.palette.text.secondary,\n      display: \"block\", \n      overflow: \"auto\",\n      maxWidth: \"calc(90vw)\", \n      whiteSpace: \"break-word\"\n    },\n    icon: {\n      verticalAlign: 'middle',\n      height: 20,\n      width: 20,\n    },\n    details: {\n      alignItems: 'center',\n    },\n    column: {\n      padding: \"0 5px 0 0\",\n      display: \"inline-block\",\n      margin: 0,\n      height: \"auto\"\n    },\n    paper: {\n        width: '100%',\n        marginBottom: theme.spacing(2),\n      },\n      table: {\n        minWidth: 750,\n      },\n      visuallyHidden: {\n        border: 0,\n        clip: 'rect(0 0 0 0)',\n        height: 1,\n        margin: -1,\n        overflow: 'hidden',\n        padding: 0,\n        position: 'absolute',\n        top: 20,\n        width: 1,\n      },\n  }));\n\nconst getNodeData = (node, nestingLevel, theme) => ({\n    data: {\n        id: node.id.toString(), // mandatory\n        isLeaf: node.children === undefined || node.children.length === 0,\n        isOpenByDefault: true, //mandatory\n        name: node.name,\n        nestingLevel,\n        theme,\n        ...node\n    },\n    nestingLevel,\n    node\n});\nexport const CallbacksTabsProcessBrowserTree = ({treeRoot, theme}) => {\n    const treeWalker = useCallback(\n        function* treeWalker() {\n            for(let i = 0; i < treeRoot.length; i++){\n                yield getNodeData(treeRoot[i], 0, theme);\n            }\n            while(true){\n                const parent = yield;\n                for(let i = 0; i < parent.node.children.length; i++){\n                    yield getNodeData(parent.node.children[i], parent.nestingLevel + 1, theme);\n                }\n            }\n        }, [treeRoot, theme]);\n    return (\n        treeRoot.length === 0 ? (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Process Listing Data</div>) : (\n            <Autosizer>\n                {({height, width}) => (\n                    <FixedSizeTree\n                        treeWalker={treeWalker}\n                        height={height - 10}\n                        width={width - 10}\n                        itemSize={30}\n                        async\n                        placeholder={<div>Loading....</div>}\n                    >\n                        {FileBrowserNode}\n                    </FixedSizeTree>\n                )}\n            </Autosizer>\n        )\n    )\n}\nconst FileBrowserNode = ({data, isOpen, style, setOpen}) => {\n    return (\n        <div style={{...style, \n                    width: \"calc(100vw)\", display: \"inline-flex\", overflow:\"auto\"}}>\n            {[...Array(data.nestingLevel)].map((o, i) => (\n                <div key={\"folder\" + data.id + \"lines\" + i} style={{borderLeft: `1px dashed ${fade(data.theme.palette.text.primary, 0.4)}`, marginLeft: 15, paddingRight: 15, height: \"100%\", display: \"inline-block\"}}></div>\n            ))}\n            <FileBrowserRow filebrowserobj={data} isOpen={isOpen} setOpen={setOpen}/>\n        </div>\n    )\n    \n}\nconst FileBrowserRow = (props) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    return (\n        <Paper className={classes.root} elevation={5} style={{backgroundColor: theme.body, color: theme.text, alignItems: \"center\", display: \"flex\"}}>\n            <Typography style={{paddingLeft: \"10px\"}}>\n                {props.filebrowserobj.process_id} - {props.filebrowserobj.name}\n            </Typography>\n        </Paper>\n    )\n}","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport { MythicDialog, MythicViewObjectPropertiesAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {Button} from '@material-ui/core';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport Divider from '@material-ui/core/Divider';\nimport ListIcon from '@material-ui/icons/List';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { snackActions } from '../../utilities/Snackbar';\nimport {Table, Column, AutoSizer} from 'react-virtualized';\nimport 'react-virtualized/styles.css';\nimport Draggable from 'react-draggable';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\n\nconst getDetailedData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        command_line\n        description\n        signer\n        start_time\n        name\n        bin_path\n    }\n}\n`;\nconst getProcessTokenData = gql`\nquery getDetailed($process_id: Int!){\n    process_by_pk(id: $process_id){\n        id\n        tokens(where: {deleted: {_eq: false}}) {\n            Address\n            AppContainer\n            AppContainerNumber\n            AppContainerSid\n            AppId\n            AppModelPolicies\n            AppModelPolicyDictionary\n            AttributesFlags\n            AuditPolicy\n            AuthenticationId_id\n            BnoIsolationPrefix\n            CanSynchronize\n            Capabilities\n            CreationTime\n            DefaultDacl\n            DenyOnlyGroups\n            DeviceClaimAttributes\n            DeviceGroups\n            Elevated\n            ElevationType\n            EnabledGroups\n            ExpirationTime\n            Filtered\n            Flags\n            FullPath\n            GrantedAccess\n            GrantedAccessGeneric\n            GrantedAccessMask\n            GroupCount\n            Groups\n            Handle\n            HandleReferenceCount\n            HasRestrictions\n            ImpersonationLevel\n            Inherit\n            IntegrityLevel\n            IntegrityLevelSid\n            IsClosed\n            IsContainer\n            IsPseudoToken\n            IsRestricted\n            IsSandbox\n            LogonSid\n            LowPrivilegeAppContainer\n            MandatoryPolicy\n            ModifiedId\n            Name\n            NoChildProcess\n            NotLow\n            NtType\n            NtTypeName\n            Owner\n            Origin\n            PackageFullName\n            PackageIdentity\n            PackageName\n            PointerReferenceCount\n            PrimaryGroup\n            PrivateNamespace\n            Privileges\n            ProcessUniqueAttribute\n            ProtectFromClose\n            Restricted\n            RestrictedDeviceClaimAttributes\n            RestrictedDeviceGroups\n            RestrictedSids\n            RestrictedSidsCount\n            RestrictedUserClaimAttributes\n            SandboxInert\n            Sddl\n            SecurityAttributes\n            SecurityDescriptor\n            SessionId\n            Source\n            ThreadID\n            TokenId\n            TokenType\n            TrustLevel\n            UIAccess\n            User\n            UserClaimAttributes\n            VirtualizationAllowed\n            VirtualizationEnabled\n            WriteRestricted\n            callbacktokens {\n                callback_id\n            }\n            logonsession {\n                id\n            }\n            task_id\n            timestamp_created\n        }\n    }\n}\n`;\nconst noRowsRender = () => {\n    return (\n        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Data Selected</div>\n    )\n}\nconst CellRenderer = ({columnData, dataKey, rowData}) => {\n    const DisplayData = () => {\n        switch(columnData.format){\n        case \"string\":\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData}/>\n        case \"button\":\n            return <FileBrowserTableRowActionCell rowData={rowData} onTaskRowAction={columnData.onTaskRowAction} os={columnData.os}/>\n        default:\n            return <FileBrowserTableRowStringCell cellData={rowData[dataKey]} rowData={rowData} />\n        }\n    };\n    return (\n        DisplayData()\n    )\n}\nexport const CallbacksTabsProcessBrowserTable = (props) => {\n    const widthRef = React.useRef(null);\n    const [sortDirection, setSortDirection] = React.useState(\"ASC\");\n    const [sortBy, setSortBy] = React.useState(\"name\");\n    const [columnWidths, setColumnWidths] = React.useState({\n        actions: .065,\n        parent_process_id: .0714,\n        process_id: .0714,\n        architecture: .06,\n        name: .14,\n        user: .14,\n        bin_path: .40,\n    })\n    const [columns, setColumns] = React.useState([]);\n    \n    const sortTable = ({sortBy, sortDirection}) => {\n        const tmpData = [...allData];\n        const sortType = columns.filter( h => h.dataKey === sortBy)[0][\"columnData\"][\"format\"];\n        if(sortType === \"number\" || sortType === \"size\"){\n          tmpData.sort((a, b) => (parseInt(a[sortBy]) > parseInt(b[sortBy]) ? 1 : -1));\n        }else if(sortType === \"date\"){\n          tmpData.sort((a,b) => ( (new Date(a[sortBy])) > (new Date(b[sortBy])) ? 1: -1));\n        }else{\n          tmpData.sort( (a, b) => a[sortBy] > b[sortBy] ? 1 : -1);\n        }\n        if(sortDirection === \"DESC\"){\n          tmpData.reverse();\n        }\n        setAllData([...tmpData]);\n        setSortBy(sortBy);\n        setSortDirection(sortDirection);\n    \n    };\n    const rowGetter = ({index}) => {\n        return allData[index];\n    };\n    const resizeRow = React.useCallback( ({event, dataKey, deltaX}) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const prevWidths = {...columnWidths};\n        const percentDelta = deltaX / widthRef.current.offsetWidth;\n        let nextHeader = \"\";\n        let getNext = false;\n        for(const key of Object.keys(columnWidths)){\n            if(getNext){\n                nextHeader = key;\n                break;\n            }else if(key === dataKey){\n                getNext = true;\n            }\n        }\n        if(nextHeader === \"\"){\n            console.log(\"next header not found\");\n            return;\n        }\n        const updatedWidths = {...prevWidths, \n            [dataKey]: prevWidths[dataKey] + percentDelta,\n            [nextHeader]: prevWidths[nextHeader] - percentDelta\n        };\n        setColumnWidths(updatedWidths);\n    }, [columnWidths]);\n    const headerRenderer = React.useCallback( ({columnData, dataKey, disableSort, label, sortBy, sortDirection}) => {\n        return (\n          <React.Fragment key={\"header\" + dataKey}>\n            <span style={{display: \"inline-flex\", flexDirection: \"row\", alignContent: \"stretch\", justifyContent: \"flex-start\"}}>\n              {label}\n              {sortBy === dataKey ? (\n                sortDirection === \"ASC\" ? (\n                  <ArrowDownwardIcon />\n                ) : (\n                  <ArrowUpwardIcon />\n                )\n              ) :(null) }\n            </span>\n            {columnData.format !== \"button\" && label !== \"Path\" && \n                <Draggable\n                    axis=\"x\"\n                    defaultClassName=\"DragHandle\"\n                    defaultClassNameDragging=\"DragHandleActive\"\n                    onDrag={(event, {deltaX}) => resizeRow({event, dataKey, deltaX})}\n                    position={{x:0}}\n                    zIndex={999}\n                    >\n                    <span onClick={(evt) => {evt.preventDefault();evt.stopPropagation();}} className=\"DragHandleIcon\" style={{width: \"20px\", textAlign: \"center\"}}></span>\n                </Draggable>\n            }\n            \n          </React.Fragment>\n        )\n      }, [resizeRow, columns]);\n    const [allData, setAllData] = React.useState([]);\n    useEffect( () => {\n        setColumns([\n            {columnData: {format: \"button\", onTaskRowAction: props.onTaskRowAction, os: props.os}, dataKey: 'actions', label: \"Actions\", \n                cellRenderer: CellRenderer, width: columnWidths.actions * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"number\"}, dataKey: 'parent_process_id', label: \"PPID\", \n                cellRenderer: CellRenderer, width: columnWidths.parent_process_id * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"number\"}, dataKey: 'process_id', label: \"PID\", \n                cellRenderer: CellRenderer,  width: columnWidths.process_id * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'architecture',  label: \"Arch\", \n                cellRenderer: CellRenderer, width: columnWidths.architecture * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'name',  label: \"Name\", \n                cellRenderer: CellRenderer, width: columnWidths.name * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            \n            {columnData: {format: \"string\"}, dataKey: 'user',  label: \"User\", \n                cellRenderer: CellRenderer, width: columnWidths.user * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n            {columnData: {format: \"string\"}, dataKey: 'bin_path',  label: \"Path\", \n                cellRenderer: CellRenderer, width: columnWidths.bin_path * widthRef.current.offsetWidth, headerRenderer: headerRenderer},\n        ])\n    }, [columnWidths, props.onTaskRowAction, props.os]);\n    useEffect( () => {\n        setAllData(props.selectedFolder);\n    }, [props.selectedFolder]);\n\n    return (\n        <div ref={widthRef} style={{width: \"100%\", height: \"90%\", overflow: \"hidden\"}}>\n            <AutoSizer>\n                {({height, width}) => (\n                    <Table\n                        headerHeight={25}\n                        noRowsRenderer={noRowsRender}\n                        rowCount={allData.length}\n                        rowGetter={ rowGetter }\n                        rowHeight={35}\n                        height={height}\n                        width={width}\n                        sort={sortTable}\n                        sortBy={sortBy}\n                        sortDirection={sortDirection}\n                    >\n                        {columns.map( (col) => (\n                            <Column key={\"col\" + col.dataKey} {...col} />\n                        ))}\n                    </Table>\n                )}\n            </AutoSizer>\n        </div>\n    )\n}\n\nconst FileBrowserTableRowStringCell = ({cellData}) => {\n    return (\n        cellData\n    )\n}\n\nconst FileBrowserTableRowActionCell = ({rowData, onTaskRowAction, os}) => {\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [viewTokensDialogOpen, setViewTokensDialogOpen] = React.useState(false);\n    const [permissionData, setPermissionData] = React.useState({});\n    const [tokenData, setTokenData] = React.useState({});\n    const [getPermissions] = useLazyQuery(getDetailedData, {\n        onCompleted: (data) => {\n            setPermissionData(data.process_by_pk);\n            setViewPermissionsDialogOpen(true);\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [getTokens] = useLazyQuery(getProcessTokenData, {\n        onCompleted: (data) => {\n            if(data.process_by_pk.tokens.length === 0){\n                snackActions.warning(\"No Token Data for Process\");\n            }else{\n                setTokenData(data.process_by_pk.tokens);\n                setViewPermissionsDialogOpen(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n    };\n    const handleMenuItemClick = (whichOption, event, index) => {\n        switch (whichOption){\n            case \"A\":\n                optionsA[index].click(event);\n                break;\n            case \"B\":\n                optionsB[index].click(event);\n                break;\n            default:\n                break;\n        }\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n    };\n    const optionsA = [{name: 'View Detailed Data', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getPermissions({variables: {process_id: rowData.id}});\n                    }},\n                    {name: 'View Tokens', icon: <VisibilityIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        getTokens({variables: {process_id: rowData.id}});\n                    }, os: [\"Windows\"]},\n    ];\n    const optionsB = [{name: 'Task Token Listing', icon: <ListIcon style={{paddingRight: \"5px\", color: theme.palette.warning.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:list_tokens\"\n                        });\n                    }, os: [\"Windows\"]},\n                    {name: 'Task Inject', icon: <GetAppIcon style={{paddingRight: \"5px\", color: theme.palette.success.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:inject\"\n                        });\n                    }},\n                    {name: 'Task Steal Token', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:steal_token\"\n                        });\n                        \n                    }, os: [\"Windows\"]},\n                    {name: 'Task Kill Process', icon: <DeleteIcon style={{paddingRight: \"5px\", color: theme.palette.error.main}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onTaskRowAction({\n                            path: rowData.parent_path_text,\n                            host: rowData.host,\n                            filename: rowData.name_text,\n                            uifeature: \"process_browser:kill\"\n                        });\n                        \n                    }},\n    ];\n    return (\n        <React.Fragment>\n            <Button\n                style={{padding:0}} \n                size=\"small\"\n                aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                aria-expanded={dropdownOpen ? 'true' : undefined}\n                aria-haspopup=\"menu\"\n                onClick={handleDropdownToggle}\n                color=\"primary\"\n                variant=\"contained\"\n                ref={dropdownAnchorRef}\n            >\n                Actions\n            </Button>\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition style={{zIndex: 4}}>\n            {({ TransitionProps, placement }) => (\n                <Grow\n                {...TransitionProps}\n                style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                }}\n                >\n                <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                    <MenuList id=\"split-button-menu\">\n                        {optionsA.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"A\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                        <Divider />\n                        {optionsB.map((option, index) => (\n                            option.os === undefined || option.os.includes(os) ? (\n                                <MenuItem\n                                    key={option.name}\n                                    onClick={(event) => handleMenuItemClick(\"B\", event, index)}\n                                >\n                                    {option.icon}{option.name}\n                                </MenuItem>\n                            ) : (null)\n                        ))}\n                    </MenuList>\n                    </ClickAwayListener>\n                </Paper>\n                </Grow>\n            )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewObjectPropertiesAsTableDialog title=\"View Detailed Data\" leftColumn=\"Attribute\" \n                        rightColumn=\"Value\" value={permissionData} \n                        onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                        keys={[\"name\", \"bin_path\", \"signer\", \"command_line\", \"start_time\", \"description\"]}\n                        />}\n                />\n        </React.Fragment>\n    )\n}\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect} from 'react';\nimport {gql, useMutation, useLazyQuery, useQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useTheme} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport IconButton from '@material-ui/core/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsProcessBrowserTree} from './CallbacksTabsProcessBrowserTree';\nimport {CallbacksTabsProcessBrowserTable} from './CallbacksTabsProcessBrowserTable';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CompareArrowsIcon from '@material-ui/icons/CompareArrows';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport LockIcon from '@material-ui/icons/Lock';\n\nconst dataFragment = gql`\nfragment objData on process {\n    name\n    process_id\n    parent_process_id\n    architecture\n    bin_path\n    integrity_level\n    id\n    user\n}\n`;\nconst taskFragment = gql`\nfragment taskData on task {\n    id\n    callback {\n        id\n        host\n        payload {\n            id\n            os\n            payloadtype{\n                ptype\n            }\n        }\n    }\n}\n`;\nconst getNextProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_gt: $task_id}}, order_by: {task_id: asc}, limit: 1) {\n        task {\n            ...taskData\n            processes(order_by: {process_id: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getPrevProcessQuery = gql`\n${dataFragment}\n${taskFragment}\nquery getHostProcessesQuery($operation_id: Int!, $host: String!, $task_id: Int!) {\n    process(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}, task_id: {_lt: $task_id}}, order_by: {task_id: desc}, limit: 1) {\n        task {\n            ...taskData\n            processes(order_by: {name: asc}) {\n                ...objData\n            }\n        }\n    }\n  }\n`;\nconst getLatestTaskForHost = gql`\nquery getHostsQuery($operation_id: Int!, $host:String!){\n    process_aggregate(where: {operation_id: {_eq: $operation_id}, host: {_eq: $host}}, distinct_on: task_id){\n        aggregate {\n            max {\n              task_id\n            }\n        }\n    }\n}\n`;\nconst getLoadedCommandsQuery = gql`\nquery GetLoadedCommandsQuery($callback_id: Int!, $payloadtype: String!, $ui_feature: String!) {\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_iregex: $ui_feature}}}) {\n    id\n    command {\n      cmd\n      help_cmd\n      description\n      id\n      needs_admin\n      payload_type_id\n      attributes\n      commandparameters {\n        id\n        type \n      }\n      supported_ui_features\n    }\n  }\n  command(where: {payloadtype: {ptype: {_eq: $payloadtype}}, script_only: {_eq: true}, deleted: {_eq: false}, supported_ui_features: {_iregex: $ui_feature }}){\n      id\n      cmd\n      help_cmd\n      description\n      needs_admin\n      attributes\n      payload_type_id\n      commandparameters {\n          id\n          type\n      }\n      supported_ui_features\n    }\n}\n`;\nconst getCallbackDataQuery = gql`\nquery getCallbackDataQuery($callback_id: Int!){\n    callback_by_pk(id: $callback_id){\n        payload {\n            os\n            payloadtype {\n              ptype\n              id\n            }\n            tag\n            id\n        }\n        id\n        operation_id\n        host\n        active\n    }\n}\n`;\nexport function CallbacksTabsProcessBrowserLabel(props){\n    const [description, setDescription] = React.useState(\"Processes: \" + props.tabInfo.host)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else{\n            setDescription(\"Processes: \" + props.tabInfo.host);\n        }\n    }, [props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const CallbacksTabsProcessBrowserPanel = ({index, value, tabInfo}) =>{\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const fileBrowserRoots = React.useRef([]);\n    const [fileBrowserRootsState, setFileBrowserRootsState] = React.useState([]);\n    const [selectedFolder, setSelectedFolder] = React.useState([]);\n    const [fileBrowserCommands, setFileBrowserCommands] = React.useState({});\n    const [openSelectCommandDialog, setOpenSelectCommandDialog] = React.useState(false);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [selectedCommand, setSelectedCommand] = React.useState({});\n    const [searchCallback, setSearchCallback] = React.useState({});\n    const [taskInfo, setTaskInfo] = React.useState({});\n    const [uiFeature, setUIFeature] = React.useState(\"\");\n    const currentCallbackIDSetInTable = React.useRef();\n    const [currentOS, setCurrentOS] = React.useState(\"\");\n    const [getCallbackData] = useLazyQuery(getCallbackDataQuery, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            if(data.callback_by_pk !== null){\n                if(data.callback_by_pk.active){\n                    setSearchCallback({...data.callback_by_pk, \"ui_feature\": \".*\" + uiFeature + \".*\"});\n                }else{\n                    snackActions.warning(\"That callback isn't active\");\n                }\n                \n            }else{\n                snackActions.warning(\"Failed to find that Callback\");\n            }\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch callback data for the specified callback\");\n        }\n    });\n    const makeTree = (root, element) => {\n        if(root.process_id === element.parent_process_id){\n            root.children.push({...element, children: []});\n            return true;\n        }else{\n            // root isn't what we're looking for, but maybe a child of root is\n            for(let i = 0; i < root.children.length; i++){\n                if(makeTree(root.children[i], element)){\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    const [getNextProcessDataByHostAndTask] = useLazyQuery(getNextProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Newer Process Sets\");\n            }\n            \n        }\n    });\n    \n    const [getPreviousProcessDataByHostAndTask] = useLazyQuery(getPrevProcessQuery, {\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            if(data.process.length > 0){\n                const dataTree = data.process[0].task.processes.reduce( (prev, cur) => {\n                    if(cur.parent_process_id === null || cur.parent_process_id <= 0){\n                        return [...prev, {...cur, children: []}]\n                    }else{\n                        // this means there is a parent id\n                        // go through the current high level parent processes \n                        const updated = [...prev].map( (root) => {\n                            makeTree(root, cur);\n                            return {...root};\n                        });\n                        return [...updated];\n                    }\n                }, []);\n                setFileBrowserRootsState(dataTree);\n                setSelectedFolder(data.process[0].task.processes);\n                setCurrentOS(data.process[0].task.callback.payload.os);\n                setTaskInfo(data.process[0].task);\n                snackActions.dismiss();\n                snackActions.success(\"Successfully fetched process data\");\n            }else{\n                snackActions.dismiss();\n                snackActions.warning(\"No Earlier Process Sets\");\n            }\n            \n        }\n    });\n    useQuery(getLatestTaskForHost, {\n        variables: {operation_id: me.user.current_operation_id, host: tabInfo.host},\n        onCompleted: (data) => {\n            if(data.process_aggregate.aggregate.max.task_id === null){\n                snackActions.warning(\"No Process Data for \" + tabInfo.host)\n                setTaskInfo({callback: {host: tabInfo.host, id: tabInfo.callbackID}, id: 0})\n            }else{\n                snackActions.info(\"Fetching latest process data for \" + tabInfo.host);\n                getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n                    host: tabInfo.host,\n                    task_id: data.process_aggregate.aggregate.max.task_id - 1\n                }});\n            }\n        }, fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        fileBrowserRoots.current = fileBrowserRootsState;\n    }, [fileBrowserRootsState])\n\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Issued \\\"\" + selectedCommand[\"cmd\"] + \"\\\" to Callback \" + searchCallback.id);\n            }\n            setSelectedCommand({});\n            setSearchCallback({});\n            setUIFeature(\"\");\n        },\n        onError: data => {\n            console.error(data);\n            setSelectedCommand({});\n            setSearchCallback({});\n            setUIFeature(\"\");\n        }\n    });\n    const [getCommandOptions] = useLazyQuery(getLoadedCommandsQuery, {\n        onCompleted: (data) => {\n            const availableCommands = data.loadedcommands.reduce( (prev, cur) => {\n                return [...prev, cur.command];\n            }, []);\n            const finalCommands = data.command.reduce( (prev, cur) => {\n                return [...prev, cur];\n            }, [...availableCommands]);\n            setFileBrowserCommands(finalCommands);\n            if(finalCommands.length === 0){\n                snackActions.warning(\"No commands currently loaded that support that feature\");\n            }else if(finalCommands.length === 1){\n                setSelectedCommand({...finalCommands[0]});\n            }else{\n                setSelectedCommand({});\n                setOpenSelectCommandDialog(true);\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    useEffect( () => {\n        if(selectedCommand[\"cmd\"] !== undefined){\n            if(selectedCommand[\"commandparameters\"].length === 0){\n                createTask({variables: {callback_id: searchCallback.id, command: selectedCommand[\"cmd\"], params: \"\"}});\n            }else{\n                switch(uiFeature){\n                    case \"process_browser:list\":\n                        // need to do a popup for the user to select the file\n                        setOpenParametersDialog(true);\n                        break;              \n                    default:\n                        break;\n                }\n            }\n            \n        }\n    }, [selectedCommand, createTask, searchCallback, uiFeature]);\n    useEffect( () => {\n        if(searchCallback.id !== undefined){\n            getCommandOptions({variables: {callback_id: searchCallback.id, payloadtype: searchCallback.payload.payloadtype.ptype, ui_feature: searchCallback.ui_feature}});\n        }\n    }, [searchCallback, getCommandOptions]);\n    const onListFilesButton = ({callbackID}) => {\n        getCallbackData({variables: {callback_id: callbackID}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(\"process_browser:list\");\n    }\n    const onNextButton = ({task_id}) => {\n        getNextProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onPreviousButton = ({task_id}) => {\n        getPreviousProcessDataByHostAndTask({variables: {operation_id: me.user.current_operation_id, \n            host: tabInfo.host,\n            task_id: task_id\n        }})\n    }\n    const onDiffButton = ({task_id}) => {\n        \n    }\n    const onTaskRowAction = ({path, host, filename, uifeature}) => {\n        getCallbackData({variables: {callback_id: currentCallbackIDSetInTable.current}});\n        // clear out commands and re-fetch\n        setFileBrowserCommands([]);\n        setUIFeature(uifeature);\n    }\n    const onSubmitSelectedCommand = (cmd) => {\n        setSelectedCommand(cmd);\n    }\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: searchCallback.id, command: cmd, params: parameters, files}});\n    }\n    const onChangeCallbackID = (callbackID) => {\n        currentCallbackIDSetInTable.current = callbackID;\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            <div style={{display: \"flex\", flexGrow: 1, overflowY: \"auto\"}}>\n                <div style={{width: \"30%\", overflow: \"auto\", flexGrow: 1}}>\n                    <CallbacksTabsProcessBrowserTree treeRoot={fileBrowserRootsState} theme={theme} />\n                </div>\n                <div style={{width: \"60%\", display: \"flex\", flexDirection: \"column\", overflow: \"auto\", flexGrow: 1}}>\n                    <ProcessBrowserTableTop\n                        onListFilesButton={onListFilesButton} \n                        onNextButton={onNextButton} \n                        onPreviousButton={onPreviousButton}\n                        onDiffButton={onDiffButton}  \n                        initialCallbackID={tabInfo.callbackID}\n                        onChangeCallbackID={onChangeCallbackID}\n                        taskInfo={taskInfo}/>\n                    <CallbacksTabsProcessBrowserTable selectedFolder={selectedFolder} onTaskRowAction={onTaskRowAction} os={currentOS}/>\n                </div>\n            </div>\n            {openSelectCommandDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectCommandDialog}\n                    onClose={()=>{setOpenSelectCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedCommand} options={fileBrowserCommands} title={\"Select Command\"} \n                                        action={\"select\"} identifier={\"id\"} display={\"cmd\"}/>}\n                />\n            }\n            {openParametersDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedCommand} callback_id={searchCallback.id} payloadtype_id={searchCallback.payload.payloadtype.id}\n                    operation_id={searchCallback.operation_id} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            }\n            \n        </MythicTabPanel>\n    )\n}\nconst ProcessBrowserTableTop = ({onListFilesButton, onNextButton, onPreviousButton, initialCallbackID, onDiffButton, onChangeCallbackID, taskInfo}) => {\n    const theme = useTheme();\n    const [hostname, setHostname] = React.useState(\"\");\n    const [callbackID, setCallbackID] = React.useState(initialCallbackID);\n    const [manuallySetCallbackID, setManuallySetCallbackID] = React.useState(true);\n    const [taskID, setTaskID] = React.useState(0);\n    const onChangeID = (name, value, error) => {\n        setManuallySetCallbackID(true);\n        setCallbackID(parseInt(value));\n    }\n    const revertCallbackID = () => {\n        setManuallySetCallbackID(false);\n        if(taskInfo.callback !== undefined){\n            setCallbackID(taskInfo.callback.id);\n        }else{\n            setCallbackID(0);\n        }\n        \n    }\n    useEffect( () => {\n        if(taskInfo.callback !== undefined){\n            setHostname(taskInfo.callback.host);    \n            setTaskID(taskInfo.id);\n        }\n        if(!manuallySetCallbackID){\n            if(taskInfo.callback !== undefined){\n                setCallbackID(taskInfo.callback.id);\n            }else{\n                setCallbackID(0);\n            }\n            \n        }\n    }, [taskInfo, manuallySetCallbackID]);\n    const onLocalListFilesButton = () => {\n        if(callbackID > 0){\n            onListFilesButton({callbackID})\n        }else{\n            snackActions.warning(\"Must set a callback number to task first\");\n        }\n    }\n    const onLocalNextButton = () => {\n        snackActions.info(\"Fetching next process data...\");\n        onNextButton({task_id: taskInfo.id});\n    }\n    const onLocalPreviousButton = () => {\n        snackActions.info(\"Fetching previous process data...\");\n        onPreviousButton({task_id: taskInfo.id});\n    }\n    const onLocalDiffButton = () => {\n        if(callbackID > 0){\n            onNextButton({callbackID});\n        }else{\n            snackActions.warning(\"Must select a callback number first\");\n        }\n    }\n    useEffect( () => {\n        onChangeCallbackID(callbackID);\n    }, [callbackID, onChangeCallbackID])\n    return (\n        <Grid container spacing={0} style={{paddingTop: \"10px\"}}>\n            <Grid item xs={10}>\n                <MythicTextField placeholder=\"Host Name\" value={hostname} disabled\n                    onChange={() => {}} name=\"Host Name\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Fetch Previous Saved Process Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalPreviousButton}><SkipPreviousIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Task Callback to List Processes\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalListFilesButton}><RefreshIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Fetch Next Saved Process Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalNextButton}><SkipNextIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        <Tooltip title=\"Compare Previous Listing\">\n                            <IconButton style={{padding: \"3px\"}} onClick={onLocalDiffButton}><CompareArrowsIcon style={{color: theme.palette.info.main}}/></IconButton>\n                        </Tooltip>\n                        </React.Fragment>\n                    }} />\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" placeholder=\"Callback\" name=\"Callback\"\n                    onChange={onChangeID} value={callbackID} InputProps={{\n                        endAdornment: manuallySetCallbackID ? (\n                            <Tooltip title=\"Change Callback Based on Data Origin\">\n                                <IconButton style={{padding: \"3px\"}} onClick={revertCallbackID}>\n                                    <LockIcon style={{color: theme.palette.info.main}}/>\n                                </IconButton>\n                        </Tooltip>\n                        ) : (<Tooltip title=\"Manually Update Callback Number to Prevent Data Origin Tracking\">\n                                <IconButton  style={{padding: \"3px\"}}>\n                                    <RotateLeftIcon disabled style={{color: theme.palette.warning.main}}/> \n                                </IconButton>\n                            </Tooltip>),\n                        style: {padding: 0, margin: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={1}>\n                <MythicTextField type=\"number\" name=\"Task Data\"\n                    disabled value={taskID} onChange={() => {}}/>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, { useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport { useSubscription, gql } from '@apollo/client';\nimport { CallbacksTabsTaskingLabel, CallbacksTabsTaskingPanel } from './CallbacksTabsTasking';\nimport { CallbacksTabsFileBrowserLabel, CallbacksTabsFileBrowserPanel } from './CallbacksTabsFileBrowser';\nimport { CallbacksTabsProcessBrowserLabel, CallbacksTabsProcessBrowserPanel } from './CallbacksTabsProcessBrowser';\nimport { meState } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\n\nconst SUB_Callbacks = gql`\n    subscription CallbacksSubscription($operation_id: Int!) {\n        callbacktoken(\n            where: {\n                deleted: { _eq: false }\n                callback: { operation_id: { _eq: $operation_id }, active: { _eq: true } }\n            }\n        ) {\n            token {\n                TokenId\n                id\n                User\n                description\n            }\n            callback {\n                id\n            }\n            id\n        }\n    }\n`;\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        backgroundColor: theme.palette.background.paper,\n    },\n}));\nexport function CallbacksTabs({ onCloseTab, openTabs, clickedTabId, clearSelectedTab, onEditTabDescription }) {\n    const classes = useStyles();\n    const me = useReactiveVar(meState);\n    const [callbackTokens, setCallbackTokens] = React.useState([]);\n    useSubscription(SUB_Callbacks, {\n        variables: { operation_id: me.user.current_operation_id },\n        fetchPolicy: 'network-only',\n        shouldResubscribe: true,\n        onSubscriptionData: ({ subscriptionData }) => {\n            setCallbackTokens(subscriptionData.data.callbacktoken);\n        },\n    });\n    const [value, setValue] = React.useState(0);\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n        localStorage.setItem('clickedTab', openTabs[newValue].tabID);\n    };\n    const onCloseTabLocal = ({ tabID, index }) => {\n        if (index > 0) {\n            setValue(index - 1);\n        } else {\n            setValue(0);\n        }\n        onCloseTab({ tabID, index });\n    };\n    useEffect(() => {\n        for (let i = 0; i < openTabs.length; i++) {\n            if (openTabs[i].tabID === clickedTabId) {\n                setValue(i);\n            }\n        }\n        clearSelectedTab();\n    }, [clickedTabId, openTabs, clearSelectedTab]);\n    return (\n        <div className={classes.root} style={{ display: 'flex', flexDirection: 'column', flexGrow: 1, height: \"100%\" }}>\n            <AppBar color='default' position='static'>\n                <Tabs\n                    value={value}\n                    onChange={handleChange}\n                    indicatorColor='primary'\n                    textColor='primary'\n                    variant='scrollable'\n                    scrollButtons='auto'\n                    style={{ maxWidth: '100%', width: '100%' }}\n                    aria-label='scrollable auto tabs example'>\n                    {openTabs.map((tab, index) => {\n                        switch (tab.tabType) {\n                            case 'interact':\n                                return (\n                                    <CallbacksTabsTaskingLabel\n                                        onEditTabDescription={onEditTabDescription}\n                                        onCloseTab={onCloseTabLocal}\n                                        key={'tablabel' + tab.tabID + tab.tabType}\n                                        tabInfo={tab}\n                                        index={index}\n                                    />\n                                );\n                            case 'fileBrowser':\n                                return (\n                                    <CallbacksTabsFileBrowserLabel\n                                        onEditTabDescription={onEditTabDescription}\n                                        onCloseTab={onCloseTabLocal}\n                                        key={'tablabel' + tab.tabID + tab.tabType}\n                                        tabInfo={tab}\n                                        index={index}\n                                    />\n                                );\n                            case 'processBrowser':\n                                return (\n                                    <CallbacksTabsProcessBrowserLabel\n                                        onEditTabDescription={onEditTabDescription}\n                                        onCloseTab={onCloseTabLocal}\n                                        key={'tablabel' + tab.tabID + tab.tabType}\n                                        tabInfo={tab}\n                                        index={index}\n                                    />\n                                );\n                            default:\n                                return null;\n                        }\n                    })}\n                </Tabs>\n            </AppBar>\n\n            {openTabs.map((tab, index) => {\n                switch (tab.tabType) {\n                    case 'interact':\n                        return (\n                            <CallbacksTabsTaskingPanel\n                                style={{\n                                    position: 'relative',\n                                    height: '100%',\n                                    maxHeight: '100%',\n                                    overflow: 'auto',\n                                }}\n                                key={'tabpanel' + tab.tabID + tab.tabType}\n                                onCloseTab={onCloseTabLocal}\n                                tabInfo={tab}\n                                value={value}\n                                index={index}\n                                callbacktokens={callbackTokens}\n                            />\n                        );\n                    case 'fileBrowser':\n                        return (\n                            <CallbacksTabsFileBrowserPanel\n                                style={{\n                                    height: '100%',\n                                    maxHeight: '100%',\n                                    position: 'relative',\n                                    overflow: 'auto',\n                                }}\n                                onCloseTab={onCloseTabLocal}\n                                key={'tabpanel' + tab.tabID + tab.tabType}\n                                tabInfo={tab}\n                                value={value}\n                                index={index}\n                            />\n                        );\n                    case 'processBrowser':\n                        return (\n                            <CallbacksTabsProcessBrowserPanel\n                                style={{\n                                    height: '100%',\n                                    maxHeight: '100%',\n                                    position: 'relative',\n                                    overflow: 'auto',\n                                }}\n                                onCloseTab={onCloseTabLocal}\n                                key={'tabpanel' + tab.tabID + tab.tabType}\n                                tabInfo={tab}\n                                value={value}\n                                index={index}\n                            />\n                        );\n                    default:\n                        return null;\n                }\n            })}\n        </div>\n    );\n}\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\n\n\nexport function HeightsDialog(props) {\n  const [heights, setHeights] = React.useState({\"top\": \"0%\", \"bottom\": \"0%\"});\n  useEffect( () => {\n    setHeights(props.heights);\n  }, [props.heights]);\n  const onSubmit = () => {\n    props.onSubmit(heights);\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    const newHeights = {...heights};\n    newHeights[name] = value;\n    setHeights(newHeights);\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Adjust sizes of Top/Bottom sections</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                <MythicTextField autoFocus value={heights.top} onChange={onChange} name=\"top\"/>\n                <MythicTextField value={heights.bottom} onChange={onChange} name=\"bottom\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nexport function getComparator(order, orderBy) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nexport function stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\n\n\n\nexport function EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, onRequestSort } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\">\n          <Checkbox\n            indeterminate={numSelected > 0 && numSelected < props.rowCount}\n            checked={props.rowCount > 0 && numSelected === props.rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{ 'aria-label': 'select all desserts' }}\n          />\n        </TableCell>\n        {props.headCells.map((headCell) => (\n          props.shownColumns === undefined || props.shownColumns.includes(headCell.id) || headCell.id === \"id\" ? (\n            <TableCell\n              key={headCell.id}\n              align={'left'}\n              padding={headCell.disablePadding ? 'none' : 'default'}\n              sortDirection={orderBy === headCell.id ? order : false}\n            >\n              <TableSortLabel\n                active={orderBy === headCell.id}\n                direction={orderBy === headCell.id ? order : 'asc'}\n                onClick={createSortHandler(headCell.id)}\n              >\n                {headCell.label}\n                {orderBy === headCell.id ? (\n                  <span className={classes.visuallyHidden}>\n                    {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                  </span>\n                ) : null}\n              </TableSortLabel>\n            </TableCell>\n          ) : (null)\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nexport function EnhancedTableRow(props){\n    \n  const labelId = `enhanced-table-checkbox-${props.index}`;\n\n  return (\n    <TableRow\n      hover\n      \n      role=\"checkbox\"\n      aria-checked={props.isItemSelected}\n      tabIndex={-1}\n      key={props.id}\n      selected={props.isItemSelected}\n      style={props.style === undefined ? {} : props.style}\n    >\n      <TableCell padding=\"checkbox\">\n        <Checkbox\n          onClick={(event) => props.handleClick(event, props.id)}\n          checked={props.isItemSelected}\n          inputProps={{ 'aria-labelledby': labelId }}\n        />\n      </TableCell>\n      {props.children}\n    </TableRow>\n  );\n\n}\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n  },\n  paper: {\n    width: 200,\n    height: 230,\n    overflow: 'auto',\n  },\n  button: {\n    margin: theme.spacing(0.5, 0),\n  },\n}));\n\n\n  \nexport function MythicTransferListDialog(props) {\n    const classes = useStyles();\n    const [checked, setChecked] = React.useState([]);\n    const [left, setLeft] = React.useState([]);\n    const [right, setRight] = React.useState([]);\n    const [leftTitle, setLeftTitle] = React.useState(\"\");\n    const [rightTitle, setRightTitle] = React.useState(\"\");\n    const leftChecked = intersection(checked, left);\n    const rightChecked = intersection(checked, right);\n    function not(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) === undefined)\n      }\n      return a.filter((value) => b.indexOf(value) === -1);\n    }\n    \n    function intersection(a, b) {\n      if(props.itemKey){\n        return a.filter( (value) => b.find( (element) => element[props.itemKey] === value[props.itemKey] ) !== undefined)\n      }\n      return a.filter((value) => b.indexOf(value) !== -1);\n    }\n    const handleToggle = (value) => () => {\n      let currentIndex = -1;\n      if(props.itemKey){\n        currentIndex = checked.findIndex( (element) => element[props.itemKey] === value[props.itemKey]);\n      }else{\n        currentIndex = checked.indexOf(value);\n      }\n      \n      const newChecked = [...checked];\n\n      if (currentIndex === -1) {\n        newChecked.push(value);\n      } else {\n        newChecked.splice(currentIndex, 1);\n      }\n\n      setChecked(newChecked);\n    };\n\n    const handleAllRight = () => {\n      setRight(right.concat(left));\n      setLeft([]);\n    };\n\n    const handleCheckedRight = () => {\n      setRight(right.concat(leftChecked));\n      setLeft(not(left, leftChecked));\n      setChecked(not(checked, leftChecked));\n    };\n\n    const handleCheckedLeft = () => {\n      setLeft(left.concat(rightChecked));\n      setRight(not(right, rightChecked));\n      setChecked(not(checked, rightChecked));\n    };\n\n    const handleAllLeft = () => {\n      setLeft(left.concat(right));\n      setRight([]);\n    };\n    useEffect( () => {\n      const left = props.left.reduce( (prev, cur) => {\n        if(props.itemKey === undefined){\n          if(props.right.includes(cur)){\n            return [...prev];\n          }\n          return [...prev, cur];\n        }else{\n          if(props.right.find( element => element[props.itemKey] === cur[props.itemKey])){\n            return [...prev]\n          }\n          return [...prev, cur];\n        }\n        \n      }, [])\n      setLeft(left);\n      setRight(props.right);\n      setLeftTitle(props.leftTitle);\n      setRightTitle(props.rightTitle);\n    }, [props.left, props.right, props.leftTitle, props.rightTitle, props.itemKey]);\n    const customList = (title, items) => (\n      <Paper className={classes.paper} style={{width:\"100%\", height: \"calc(50vh)\"}}>\n        <Card>\n          <CardHeader\n            className={classes.cardHeader}\n            title={title}\n          />\n          <Divider />\n          <List dense component=\"div\" role=\"list\" style={{padding:0}}>\n            {items.map((valueObj) => {\n              const value = props.itemKey === undefined ? valueObj : valueObj[props.itemKey];\n              const labelId = `transfer-list-item-${value}-label`;\n              return (\n                <ListItem style={{padding:0}} key={value} role=\"listitem\" button onClick={handleToggle(valueObj)}>\n                  <ListItemIcon>\n                    <Checkbox\n                      checked={props.itemKey === undefined ? checked.indexOf(value) !== -1 : checked.findIndex( (element) => element[props.itemKey] === value) !== -1}\n                      tabIndex={-1}\n                      disableRipple\n                      inputProps={{ 'aria-labelledby': labelId }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText id={labelId} primary={value} />\n                </ListItem>\n              );\n            })}\n            <ListItem />\n          </List>\n          </Card>\n      </Paper>\n    );\n    const setFinalTags = () => {\n      props.onSubmit({left, right});\n      props.onClose();\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">{props.dialogTitle}</DialogTitle>\n        <DialogContent dividers={true}>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\" className={classes.root}>\n          <Grid item xs={5}>{customList(leftTitle, left)}</Grid>\n          <Grid item>\n            <Grid container direction=\"column\" alignItems=\"center\">\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllRight}\n                disabled={left.length === 0}\n                aria-label=\"move all right\"\n              >\n                \n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedRight}\n                disabled={leftChecked.length === 0}\n                aria-label=\"move selected right\"\n              >\n                &gt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleCheckedLeft}\n                disabled={rightChecked.length === 0}\n                aria-label=\"move selected left\"\n              >\n                &lt;\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                className={classes.button}\n                onClick={handleAllLeft}\n                disabled={right.length === 0}\n                aria-label=\"move all left\"\n              >\n                \n              </Button>\n            </Grid>\n          </Grid>\n          <Grid item xs={5}>{customList(rightTitle, right)}</Grid>\n        </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={setFinalTags} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {MythicDialog} from './MythicDialog';\nimport MythicTextField from './MythicTextField';\n\nexport function MythicDisplayTextDialog(props) {\n  return (\n    <MythicDialog fullWidth={props.fullWidth === null ? false : props.fullWidth} maxWidth={props.maxWidth === null ? \"sm\" : props.maxWidth} open={props.open} onClose={()=>{props.onClose()}} innerDialog={\n        <React.Fragment>\n            <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\n            <DialogContent dividers={true}>\n                <MythicTextField multiline={true} value={props.value} onChange={()=>{}} />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n                Close\n              </Button>\n            </DialogActions>\n        </React.Fragment>\n  } />\n  );\n}\n","import {gql } from '@apollo/client';\n\nexport const hideCallbackMutation = gql`\nmutation hideCallback ($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, active: false}) {\n    status\n    error\n  }\n}\n`;\nexport const toggleHideCallbackMutations = gql`\nmutation hideCallback ($callback_id: Int!, $active: Boolean!){\n  updateCallback(input: {callback_id: $callback_id, active: $active}) {\n    status\n    error\n  }\n}\n`;\n\nexport const removeEdgeMutation = gql`\nmutation removeEdgeMutation ($edge_id: Int!, $end_timestamp: timestamp!){\n    update_callbackgraphedge_by_pk(pk_columns: {id: $edge_id}, _set: {end_timestamp: $end_timestamp}) {\n        end_timestamp\n        id\n      }\n}\n`;\n\nexport const addEdgeMutation = gql`\nmutation addEdgeMutation ($source_id: Int!, $destination_id: Int!, $profile_id: Int!){\n  insert_callbackgraphedge_one(object: {c2_profile_id: $profile_id, destination_id: $destination_id, direction: 1, source_id: $source_id}) {\n    id\n  }\n}\n`;\nexport const unlockCallbackMutation = gql`\nmutation unlockCallback($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: false}) {\n    status\n    error\n  }\n}\n`;\nexport const lockCallbackMutation = gql`\nmutation lockCallack($callback_id: Int!){\n  updateCallback(input: {callback_id: $callback_id, locked: true}) {\n    status\n    error\n  }\n}\n`;\nexport const updateDescriptionCallbackMutation = gql`\nmutation updateDescriptionCallack($callback_id: Int!, $description: String!){\n  updateCallback(input: {callback_id: $callback_id, description: $description}) {\n    status\n    error\n  }\n}\n`;\n\nexport const updateSleepInfoCallbackMutation = gql`\nmutation updateSleepInfoCallback($callback_id: Int!, $sleep_info: String!){\n  update_callback_by_pk(pk_columns: {id: $callback_id}, _set: {sleep_info: $sleep_info}){\n    id\n    sleep_info\n  }\n}\n`;\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport Typography from '@material-ui/core/Typography';\nimport {useQuery, gql} from '@apollo/client';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport {ExpandedCallbackSideDetailsTable} from '../ExpandedCallback/ExpandedCallbackSideDetails';\n\nconst GET_Payload_Details = gql`\nquery GetCallbackDetails($callback_id: Int!) {\n  callback_by_pk(id: $callback_id){\n    payload {\n      uuid\n      payloadtype{\n          ptype\n          id\n          commands(where: {script_only: {_eq: true}, deleted: {_eq: false}}){\n            id\n            cmd\n            version\n          }\n      }\n      filemetum {\n        filename_text\n        agent_file_id\n        id\n        md5\n        sha1\n      }\n      buildparameterinstances {\n        parameter\n        id\n        buildparameter {\n          description\n        }\n      }\n      os\n    }\n    c2profileparametersinstances(order_by: {c2profile: {name: asc}}) {\n      value\n      c2profileparameter {\n        description\n        parameter_type\n      }\n      c2profile {\n        name\n      }\n      enc_key_base64\n      dec_key_base64\n    }\n    loadedcommands{\n      id\n      version\n      command {\n        cmd\n        id\n        version\n      }\n    }\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    last_checkin\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n  }\n  \n}\n`;\nexport function DetailedCallbackTable(props){\n    const theme = useTheme();\n    const [commands, setCommands] = React.useState([]);\n    const [buildParameters, setBuildParameters] = React.useState([]);\n    const [c2Profiles, setC2Profiles] = React.useState([]);\n    const { loading, error, data } = useQuery(GET_Payload_Details, {\n        variables: {callback_id: props.callback_id},\n        onCompleted: data => {\n            const commandState = data.callback_by_pk.loadedcommands.map( (c) => \n            { \n                return {cmd: c.command.cmd, mythic: c.command.version, payload: c.version} \n            });\n            const commandsWithScriptOnly = data.callback_by_pk.payload.payloadtype.commands.reduce( (prev, cur) => {\n              return [...prev, {cmd: cur.cmd, mythic: cur.version, payload: cur.version}]\n            }, [...commandState]).sort((a,b) => (a.cmd > b.cmd) ? 1: ((b.cmd > a.cmd) ? -1 : 0))\n            setCommands(commandsWithScriptOnly);\n            const buildParametersState = data.callback_by_pk.payload.buildparameterinstances.map( (b) =>\n            {\n                return {description: b.buildparameter.description, value: b.parameter}\n            }).sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0));\n            setBuildParameters(buildParametersState);\n            const c2Profiles = data.callback_by_pk.c2profileparametersinstances.reduce( (prev, cur) => {\n                if( !(cur.c2profile.name in prev) ){\n                    return {...prev, [cur.c2profile.name]: [{description: cur.c2profileparameter.description, \n                      value: cur.value, \n                      enc_key: cur.enc_key_base64, \n                      dec_key: cur.dec_key_base64,\n                      parameter_type: cur.c2profileparameter.parameter_type,\n                    }]}\n                }\n                return {...prev, [cur.c2profile.name]: [...prev[cur.c2profile.name], {description: cur.c2profileparameter.description, \n                  value: cur.value, \n                  enc_key: cur.enc_key_base64, \n                  dec_key: cur.dec_key_base64,\n                  parameter_type: cur.c2profileparameter.parameter_type,\n                }]}\n            }, {});\n            const c2ProfilesState = Object.keys(c2Profiles).reduce( (prev, cur) => {\n                return [...prev, {\n                    c2_profile: cur,\n                    parameters: c2Profiles[cur].sort((a,b) => (a.description > b.description) ? 1: ((b.description > a.description) ? -1 : 0))\n                }];\n            }, []);\n            setC2Profiles(c2ProfilesState);\n        }\n        });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}}/>;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n    return (\n        <React.Fragment>\n          <DialogTitle id=\"form-dialog-title\">Callback Configuration</DialogTitle>\n          <DialogContent dividers={true}>\n          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Callback Information\n              </Typography>\n            </Paper>\n            <ExpandedCallbackSideDetailsTable {...data.callback_by_pk} />\n                \n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Payload Information\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow hover>\n                    <TableCell >Payload Info</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Payload Type</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.payloadtype.ptype}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Selected OS</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.os}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>UUID</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.uuid}</TableCell>\n                    </TableRow>\n                    { data.callback_by_pk.payload.filemetum ? (\n                        <TableRow key={'filename_text'} hover>\n                            <TableCell>Filename</TableCell>\n                            <TableCell>{data.callback_by_pk.payload.filemetum.filename_text}</TableCell>\n                        </TableRow>\n                    ) : null }\n                    <TableRow hover>\n                        <TableCell>Download URL</TableCell>\n                        <TableCell>{window.location.origin + \"/direct/download/\" + data.callback_by_pk.payload.filemetum.agent_file_id}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>SHA1</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.sha1}</TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>MD5</TableCell>\n                        <TableCell>{data.callback_by_pk.payload.filemetum.md5}</TableCell>\n                    </TableRow>\n                </TableBody>\n              </Table>\n              <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                    Build Parameters\n                </Typography>\n              </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{ \"overflowWrap\": \"break-word\"}}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                    <TableCell>Value</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {\n                    buildParameters.map( (cmd, i) => (\n                        <TableRow key={\"buildprop\" + i + \"for\" + data.callback_by_pk.payload.id}>\n                            <TableCell>{cmd.description}</TableCell>\n                            <TableCell>{cmd.value}</TableCell>\n                        </TableRow>\n                    ))\n                    \n                  }\n                </TableBody>\n              </Table>\n                { c2Profiles.map( (c2) => (\n                    <React.Fragment key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile}>\n                          <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                            <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                                {c2.c2_profile}\n                            </Typography>\n                          </Paper>\n                        <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n                            <TableHead>\n                              <TableRow>\n                                <TableCell style={{width: \"30%\"}}>Parameter</TableCell>\n                                <TableCell>Value</TableCell>\n                              </TableRow>\n                            </TableHead>\n                            <TableBody style={{whiteSpace: \"pre\"}}>\n                              {\n                                c2.parameters.map( (cmd, j) => (\n                                    <TableRow key={\"c2frag\" + data.callback_by_pk.payload.id + c2.c2_profile + j} hover>\n                                        <TableCell>{cmd.description}</TableCell>\n                                        <TableCell>\n                                          {cmd.parameter_type === \"Dictionary\" || cmd.parameter_type === \"Array\" ? (\n                                            JSON.stringify(JSON.parse(cmd.value), null, 2)\n                                            ) : (cmd.value)}\n                                        </TableCell>\n                                    </TableRow>\n                                ))\n                              }\n                            </TableBody>\n                          </Table>\n                      </React.Fragment>\n                ))}\n            <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n              <Typography variant=\"h6\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n                  Loaded Commands\n              </Typography>\n            </Paper>\n            <Table size=\"small\" aria-label=\"details\" style={{\"overflowWrap\": \"break-word\"}}>\n            <TableHead>\n              <TableRow>\n                <TableCell>Command Name</TableCell>\n                <TableCell>Mythic Version</TableCell>\n                <TableCell>Loaded Version</TableCell>\n                <TableCell>Documentation</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {\n                commands.map( (cmd) => (\n                    <TableRow key={cmd.cmd + data.callback_by_pk.payload.id} hover>\n                        <TableCell>{cmd.cmd}</TableCell>\n                        <TableCell>{cmd.mythic}</TableCell>\n                        <TableCell>{cmd.payload}</TableCell>\n                        <TableCell>\n                          <Button variant=\"contained\" color=\"primary\" target=\"_blank\"\n                             href={\"/docs/agents/\" + data.callback_by_pk.payload.payloadtype.ptype + \"/commands/\" + cmd.cmd}>Docs</Button> \n                        </TableCell>\n                    </TableRow>\n                ))\n                \n              }\n            </TableBody>\n          </Table>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n              Close\n            </Button>\n        </DialogActions>\n        </React.Fragment>\n        )\n}\n\n","import React, {useCallback, useEffect} from 'react';\nimport {Button} from '@material-ui/core';\nimport TableCell from '@material-ui/core/TableCell';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { MythicDisplayTextDialog} from '../../MythicComponents/MythicDisplayTextDialog';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\nimport {EnhancedTableRow} from '../../MythicComponents/MythicTable';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport LockIcon from '@material-ui/icons/Lock';\nimport {getTimeDifference, useInterval } from '../../utilities/Time';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport InsertLinkTwoToneIcon from '@material-ui/icons/InsertLinkTwoTone';\nimport {C2PathDialog} from './C2PathDialog';\nimport {snackActions} from '../../utilities/Snackbar';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport {hideCallbackMutation} from './CallbackMutations';\nimport {useMutation } from '@apollo/client';\nimport SnoozeIcon from '@material-ui/icons/Snooze';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport {useTheme} from '@material-ui/core/styles';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/Edit';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {faQuestion} from '@fortawesome/free-solid-svg-icons';\nimport {faLinux, faApple, faWindows, faChrome} from '@fortawesome/free-brands-svg-icons';\nimport {useSubscription, gql } from '@apollo/client';\nimport {DetailedCallbackTable} from './DetailedCallbackTable';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($callback_id: Int!){\n  callback_by_pk(id: $callback_id) {\n    id\n    last_checkin\n  }\n}\n `;\nexport function CallbacksTableRowPreMemo(props){\n    const dropdownAnchorRef = React.useRef(null);\n    const theme = useTheme();\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const [openMetaDialog, setOpenMetaDialog] = React.useState(false);\n    const [activeEgress, setActiveEgress] = React.useState(theme.palette.success.main);\n    const [activeEgressBool, setActiveEgressBool] = React.useState(true);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [openC2Dialog, setOpenC2Dialog] = React.useState(false);\n    const [openSleepDialog, setOpenSleepDialog] = React.useState(false);\n    const [openOSDialog, setOpenOSDialog] = React.useState(false);\n    const [callbackgraphedges, setCallbackgraphedges] = React.useState([]);\n    const [callbackgraphedgesAll, setCallbackgraphedgesAll] = React.useState([]);\n    const [shownColumns, setShownColumns] = React.useState([]);\n    const [hasEgressRoute, setHasEgressRoute] = React.useState(true);\n    const handleDropdownToggle = (evt) => {\n            evt.stopPropagation();\n            setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    useEffect( () => {\n        if(props.shownColumns === undefined){\n            setShownColumns([]);\n        }else{\n            setShownColumns(props.shownColumns);\n        }\n    }, [props.shownColumns]);\n    \n    const onOpenTab = (tabType) => {\n        if(!activeEgressBool){\n            snackActions.warning(\"Agent has no egress route! Re-link before tasking\");\n        }\n        if(tabType === \"interact\"){\n            props.onOpenTab({tabType, tabID: props.id + tabType, callbackID: props.id});\n        }else if(tabType === \"processBrowser\"){\n            props.onOpenTab({tabType, tabID: props.host, callbackID: props.id});\n        }else{\n            props.onOpenTab({tabType, tabID: props.id + tabType, callbackID: props.id});\n        }\n    }\n    useEffect( () => {\n        const routes = callbackgraphedgesAll.filter( (edge) => {\n            if(!edge.c2profile.is_p2p && edge.source.id === props.id && edge.destination.id === props.id){\n                return true;\n            }\n            return false;\n        }).length;\n        if(routes > 0 && !hasEgressRoute){\n            setHasEgressRoute(true);\n        }else if(routes === 0 && hasEgressRoute){\n            setHasEgressRoute(false);\n        }\n    }, [callbackgraphedgesAll])\n    useEffect( () => {\n        const getEdges = (activeOnly) => {\n            //update our aggregate of callbackgraphedges for both src and dst that involve us\n            let myEdges = props.callbackgraphedges.filter( (edge) =>{\n                if(edge.source.id === props.id || edge.destination.id === props.id){\n                    if(activeOnly){\n                        if(edge.end_timestamp === null){\n                            return true;\n                        }\n                        else{return false}\n                    }\n                    return true;\n                }\n                return false;\n            });\n            let foundMore = true;\n            while(foundMore){\n                //look at all of the edges in myEdges and see if there are any edges that share a source/destination in props.callbackgraphedges that are _not_ in myEdges so far\n                const newEdges = props.callbackgraphedges.reduce( (prev, edge) => {\n                    //looking to see if we should add 'edge' to our list of relevant edges\n                    if(prev.includes(edge)){return [...prev]}\n                    //look through all of the previous edges we know about and see if there's a matching source/destination id with the new edge\n                    const matching = prev.filter( (e) => {\n                        if(e.source.id === edge.source.id || e.source.id === edge.destination.id || e.destination.id === edge.source.id ){\n                            if(activeOnly){\n                                if(edge.end_timestamp === null) { return true}\n                                else{return false}\n                            }\n                            return true;\n                        }\n                        return false;\n                    });\n                    if(matching.length > 0){\n                        return [...prev, edge];\n                    }else{\n                        return [...prev];\n                    }\n                }, [...myEdges]);\n                foundMore = newEdges.length > myEdges;\n                myEdges = [...newEdges];\n            }\n            return myEdges;\n        }\n        const myActiveEdges = getEdges(true);\n        const myEdges = getEdges(false);\n        if(callbackgraphedges.length !== myActiveEdges.length){\n            setCallbackgraphedges(myActiveEdges);\n        }\n        if(callbackgraphedgesAll.length !== myEdges.length){\n            setCallbackgraphedgesAll(myEdges);\n        }\n    }, [props.callbackgraphedges, props.id]);\n    \n    useEffect( () => {\n        //determine if there are any active routes left at all\n        const activeRoutes = callbackgraphedges.filter( (edge) => {\n            if(!edge.c2profile.is_p2p  && edge.end_timestamp === null){\n                return true;\n            }\n            return false\n        });\n        if(activeRoutes.length === 0){\n            setActiveEgress(theme.palette.error.main);\n            setActiveEgressBool(false);\n        }else{\n            setActiveEgress(theme.palette.success.main);\n            setActiveEgressBool(true);\n        }\n    }, [callbackgraphedges, theme.palette.success.main, theme.palette.error.main]);\n    const handleMenuItemClick = (event, index) => {\n        options[index].click(event);\n        setDropdownOpen(false);\n    };\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n\n        setDropdownOpen(false);\n      };\n      const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            console.log(data);\n        }\n    });\n    const toggleLock = () => {\n        props.toggleLock({id: props.id, locked: props.locked})\n    }\n    const editDescriptionSubmit = (description) => {\n        props.updateDescription({description, id: props.id})\n    }\n    const editSleepSubmit = (sleep) => {\n        props.updateSleepInfo({sleep_info: sleep, id: props.id});\n    }\n    const displayOSInfo = React.useCallback( () => {\n        setOpenOSDialog(true);\n    }, []);\n    const getOSIcon = useCallback( () => {\n        switch(props.payload.os.toLowerCase()){\n            case \"windows\":\n                return <FontAwesomeIcon icon={faWindows} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"linux\":\n                return <FontAwesomeIcon icon={faLinux} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            case \"macos\":\n                return <FontAwesomeIcon icon={faApple} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo}/>\n            case \"chrome\":\n                return <FontAwesomeIcon icon={faChrome} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n            default:\n                return <FontAwesomeIcon icon={faQuestion} size=\"2x\" style={{cursor: \"pointer\"}} onClick={displayOSInfo} />\n        }\n    }, [])\n    const options =  [{name: 'Hide Callback', icon: <VisibilityOffIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        hideCallback({variables: {callback_id: props.id}});\n                     }},\n                     {name: 'File Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onOpenTab(\"fileBrowser\");\n                     }},\n                     {name: 'Process Browser', icon: <AccountTreeIcon style={{paddingRight: \"5px\"}}/>, click: (evt) => {\n                        evt.stopPropagation();\n                        onOpenTab(\"processBrowser\");\n                     }},\n                     {name: props.locked ? 'Unlock (Locked by ' + props.locked_operator.username + ')' : 'Lock Callback', icon: props.locked ? (<LockOpenIcon style={{paddingRight: \"5px\"}}/>) : (<LockIcon style={{paddingRight: \"5px\"}} />), click: (evt) => {\n                        evt.stopPropagation();\n                        toggleLock();\n                     }},\n                     {name: \"Edit Description\", icon: <EditIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        setOpenEditDescriptionDialog(true);\n                     }},\n                     {name: \"Expand Callback\", icon: <OpenInNewIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                        evt.stopPropagation();\n                        window.open(\"/new/callbacks/\" + props.id, \"_blank\").focus();\n                     }},\n                     {name: \"View Metadata\", icon: <InfoIcon style={{paddingRight: \"5px\"}} />, click: (evt) => {\n                         evt.stopPropagation();\n                         setOpenMetaDialog(true);\n                     }}\n                 ];\n    return (\n    <React.Fragment>\n        <EnhancedTableRow id={props.id} handleClick={props.handleClick} isItemSelected={props.isItemSelected(props.id)}> \n            <TableCell>\n                <ButtonGroup variant=\"contained\" color={props.integrity_level > 2 ? \"secondary\" : \"primary\"} ref={dropdownAnchorRef} aria-label=\"split button\">\n                <Button size=\"small\" onClick={(evt) => {evt.stopPropagation();onOpenTab(\"interact\")}}>\n                 { props.locked ? (<LockIcon />):(<KeyboardIcon />) } {props.id}\n                 </Button>\n                 <Button\n                    style={{padding:0}} \n                    size=\"small\"\n                    aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}\n                  >\n                    <ArrowDropDownIcon />\n                  </Button>\n                </ButtonGroup>\n                <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal style={{zIndex: 200}}>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                      }}\n                    >\n                      <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList id=\"split-button-menu\">\n                            {options.map((option, index) => (\n                              <MenuItem\n                                key={option.name}\n                                onClick={(event) => handleMenuItemClick(event, index)}\n                              >\n                                {option.icon}{option.name}\n                              </MenuItem>\n                            ))}\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n            </TableCell>\n            {shownColumns.includes(\"ip\") ? (\n                <TableCell>{props.ip}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"host\") ? (\n                <TableCell>{props.host}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"user\") ? (\n                <TableCell>{props.user}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"domain\") ? (\n                <TableCell>{props.domain}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"os\") ? (\n                <TableCell>\n                    {getOSIcon()}\n                    <MythicDisplayTextDialog onClose={()=>{setOpenOSDialog(false);}} title={\"Operating System Information\"} maxWidth={\"md\"} fullWidth={true} value={props.os} open={openOSDialog}/>\n                </TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"arch\") ? (\n                <TableCell>{props.architecture}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"pid\") ? (\n                <TableCell>{props.pid}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"last_checkin\") ? (\n            <TableCell>\n                <TimeUpdater callback_id={props.id} />\n            </TableCell>\n            ) : (null)} \n            {shownColumns.includes(\"description\") ? (\n            <TableCell>{props.description}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"sleep\") ? (\n            <TableCell><SnoozeIcon onClick={(evt)=>{evt.stopPropagation();setOpenSleepDialog(true);}} style={{color: props.sleep_info === \"\" ? theme.palette.warning.main : theme.palette.info.main, cursor: \"pointer\"}}/></TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"type\") ? (\n            <TableCell>{props.payload.payloadtype.ptype}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"c2\") ? (\n            <TableCell>{hasEgressRoute ? \n                <WifiIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}}/> : \n                <InsertLinkTwoToneIcon onClick={(evt)=>{evt.stopPropagation();setOpenC2Dialog(true);}} style={{color: activeEgress, cursor: \"pointer\"}} />\n                }\n            </TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"process_name\") ? (\n            <TableCell>{props.process_name}</TableCell>\n            ) : (null)}\n            {shownColumns.includes(\"external_ip\") ? (\n            <TableCell>{props.external_ip}</TableCell>\n            ) : (null)}\n        </EnhancedTableRow>\n        <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openC2Dialog}\n                    onClose={()=>{setOpenC2Dialog(false);}} \n                    innerDialog={<C2PathDialog onClose={()=>{setOpenC2Dialog(false);}} {...props} callbackgraphedges={activeEgressBool ? callbackgraphedges : callbackgraphedgesAll} />}\n                />\n            {openMetaDialog && \n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openMetaDialog}\n                    onClose={()=>{setOpenMetaDialog(false);}} \n                    innerDialog={<DetailedCallbackTable onClose={()=>{setOpenMetaDialog(false);}} callback_id={props.id} />}\n                />\n            }\n        <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n            innerDialog={\n                <MythicModifyStringDialog title={\"Edit Callback's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={props.description} onSubmit={editDescriptionSubmit} />\n            }\n            />\n        <MythicDialog fullWidth={true} open={openSleepDialog}  onClose={() => {setOpenSleepDialog(false);}}\n            innerDialog={\n                <MythicModifyStringDialog title={\"Sleep Information\"} onClose={() => {setOpenSleepDialog(false);}} value={props.sleep_info} onSubmit={editSleepSubmit} />\n            }\n            />\n    </React.Fragment>\n    )\n}\nexport const CallbacksTableRow = React.memo(CallbacksTableRowPreMemo);\n\nfunction TimeUpdaterPreMemo({callback_id}){\n    const [displayTime, setDisplayTime] = React.useState(\"\");\n    const [lastCheckin, setLastCheckin] = React.useState(\"\");\n    useSubscription(SUB_Callbacks, {\n        variables: {callback_id: callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setLastCheckin(subscriptionData.data.callback_by_pk.last_checkin);\n        }\n    });\n    const updateTime = (curTime) => {\n        setDisplayTime(getTimeDifference(curTime));\n    };\n    useInterval( () => {\n        updateTime(lastCheckin);\n    });\n    return (\n        displayTime\n    )\n}\nconst TimeUpdater = React.memo(TimeUpdaterPreMemo)","import React, { useEffect, useMemo } from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport {EnhancedTableHead, stableSort, getComparator} from '../../MythicComponents/MythicTable';\nimport {MythicTransferListDialog} from '../../MythicComponents/MythicTransferList';\nimport {MythicDialog} from '../../MythicComponents/MythicDialog';\nimport { CallbacksTableRow } from './CallbacksTableRow';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VisibilityOffOutlinedIcon from '@material-ui/icons/VisibilityOffOutlined';\nimport {useTheme} from '@material-ui/core/styles';\nimport {hideCallbackMutation, unlockCallbackMutation, lockCallbackMutation, updateDescriptionCallbackMutation, updateSleepInfoCallbackMutation} from './CallbackMutations';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation } from '@apollo/client';\nimport {Button} from '@material-ui/core';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport { faTasks } from '@fortawesome/free-solid-svg-icons';\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    minHeight: \"unset\",\n    marginTop: \"10px\"\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  title: {\n  },\n}));\n\nconst EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const theme = useTheme();\n  const { numSelected } = props;\n  return (\n    <React.Fragment>\n        {numSelected > 1 ? (\n          <Toolbar className={clsx(classes.root, {[classes.highlight]: numSelected > 1, })} >\n            <React.Fragment>\n              <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\n                {numSelected} selected\n              </Typography>\n              <Tooltip title=\"Hide Selected\">\n                <IconButton aria-label=\"hide\" onClick={props.onHideSelected}>\n                  <VisibilityOffOutlinedIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Task Selected\">\n                <IconButton aria-label=\"hide\" onClick={props.onTaskSelected}>\n                  <FontAwesomeIcon icon={faTasks} title=\"Task All\" />\n                </IconButton>\n              </Tooltip>\n            </React.Fragment>\n          </Toolbar>\n      ) : (\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\", width: \"100%\"}} variant={\"elevation\"}>\n          <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\", color: theme.pageHeaderColor}}>\n              Active Callbacks\n          </Typography>\n          <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"70px\"}} \n                    onClick={(evt) => {evt.stopPropagation(); props.openDialog(); }}>Show/Hide Columns</Button>\n        </Paper>\n      )\n      }\n    </React.Fragment>\n  );\n};\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n  },\n  paper: {\n    width: '100%',\n    marginBottom: theme.spacing(2),\n  },\n  table: {\n    minWidth: 750,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n}));\nexport function CallbacksTable(props){\n      const classes = useStyles();\n      const [order, setOrder] = React.useState('asc');\n      const [orderBy, setOrderBy] = React.useState('interact');\n      const [selected, setSelected] = React.useState([]);\n      const [openAdjustColumnsDialog, setOpenAdjustColumnsDialog] = React.useState(false);\n      const [allColumns, setAllColumns] = React.useState([]);\n      const [shownColumns, setShownColumns] = React.useState([\"user\", \"host\", \"domain\", \"description\", \"last_checkin\", \"type\", \"c2\", \"ip\", \"os\"]);\n      const handleSelectAllClick = (event) => {\n        if (event.target.checked) {\n          if(selected.length > 0){\n            setSelected([]);\n          }else{\n            const newSelecteds = props.callbacks.map((n) => n.id);\n            setSelected(newSelecteds);\n          }\n          \n          return;\n        }\n        setSelected([]);\n      };\n      const handleClick = (event, name) => {\n        const selectedIndex = selected.indexOf(name);\n        let newSelected = [];\n        if (selectedIndex === -1) {\n          newSelected = newSelected.concat(selected, name);\n        } else if (selectedIndex === 0) {\n          newSelected = newSelected.concat(selected.slice(1));\n        } else if (selectedIndex === selected.length - 1) {\n          newSelected = newSelected.concat(selected.slice(0, -1));\n        } else if (selectedIndex > 0) {\n          newSelected = newSelected.concat(\n            selected.slice(0, selectedIndex),\n            selected.slice(selectedIndex + 1),\n          );\n        }\n        setSelected(newSelected);\n      };\n      const isSelected = (name) => selected.indexOf(name) !== -1;\n      const handleRequestSort = (event, property) => {\n        const isAsc = orderBy === property && order === 'asc';\n        setOrder(isAsc ? 'desc' : 'asc');\n        setOrderBy(property);\n      };\n      const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            if(data.updateCallback.status === \"success\"){\n                snackActions.success(\"Hiding callback\");\n            }else{\n                snackActions.warning(data.updateCallback.error);\n            }\n            \n        },\n        onError: data => {\n            snackActions.warning(data);\n            console.log(data);\n        }\n    });\n    const [lockCallback] = useMutation(lockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Locked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [unlockCallback] = useMutation(unlockCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Unlocked callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n    },\n    onError: data => {\n        console.log(data);\n        snackActions.warning(data);\n    }\n    });\n    const [updateDescription] = useMutation(updateDescriptionCallbackMutation, {\n      update: (cache, {data}) => {\n        if(data.updateCallback.status === \"success\"){\n            snackActions.success(\"Updated Callback\");\n        }else{\n            snackActions.warning(data.updateCallback.error);\n        }\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const [updateSleep] = useMutation(updateSleepInfoCallbackMutation, {\n      update: (cache, {data}) => {\n        snackActions.success(\"Updated Callback\");\n        \n      },\n      onError: data => {\n          console.log(data);\n          snackActions.warning(data);\n      }\n    });\n    const hideSelected = () => {\n      let updated_selected = [...selected];\n      for(let i = 0; i < props.callbacks.length; i++){\n        if(updated_selected.includes(props.callbacks[i][\"id\"])){\n          hideCallback({variables: {callback_id: props.callbacks[i][\"id\"]}});\n          updated_selected = updated_selected.filter(e => e !== props.callbacks[i][\"id\"]);\n        }\n      }\n      setSelected(updated_selected);\n      //\n    }\n    const onSubmitAdjustColumns = ({left, right}) => {\n      setShownColumns(right);\n      localStorage.setItem(\"callbacks_table_columns\", JSON.stringify(right));\n    }\n    \n    const tableHeadCells = useMemo( () => [\n        {id: \"id\", numeric: true, disablePadding: false, label: \"Interact\"},\n        {id: \"ip\", numeric: false, disablePadding: false, label: \"IP\"},\n        {id: \"host\", numeric: false, disablePadding: false, label: \"Host\"},\n        {id: \"user\", numeric: false, disablePadding: false, label: \"User\"},\n        {id: \"domain\", numeric: false, disablePadding: false, label: \"Domain\"},\n        {id: \"os\", numeric: false, disablePadding: false, label: \"OS\"},\n        {id: \"arch\", numberic: false, disablePadding: false, label: \"Arch\"},\n        {id: \"pid\", numeric: true, disablePadding: false, label: \"PID\"},\n        {id: \"last_checkin\", numeric: true, disablePadding: false, label: \"Last Checkin\"},\n        {id: \"description\", numeric: false, disablePadding: false, label: \"Description\"},\n        {id: \"sleep\", numeric: false, disablePadding: true, label: \"Sleep\"},\n        {id: \"type\", numeric: false, disablePadding: false, label: \"Type\"},\n        {id: \"c2\", numeric: false, disablePadding: true, label: \"C2\"},\n        {id: \"process_name\", numeric: false, disablePadding: true, label: \"Process Name\"},\n        {id: \"external_ip\", numberic: false, disablePadding: true, label: \"External IP\"}\n    ], []);\n    useEffect( () => {\n      const ids = tableHeadCells.map( (cell) => cell.id);\n      const allColumnNames = ids.filter( i => i !== \"id\");\n      setAllColumns(allColumnNames);\n      let localSettings = localStorage.getItem(\"callbacks_table_columns\");\n      if(localSettings !== null){\n        setShownColumns(JSON.parse(localSettings));\n      }\n    }, [tableHeadCells]);\n    const toggleLock = React.useCallback( ({id, locked}) => {\n      if(locked){\n        unlockCallback({variables: {callback_id: id}})\n      }else{\n        lockCallback({variables: {callback_id: id}})\n      }\n    }, []);\n    const updateDescriptionSubmit = React.useCallback( ({id, description}) => {\n      updateDescription({variables: {callback_id: id, description}})\n    }, []);\n    const updateSleepInfo = React.useCallback( ({id, sleep_info}) => {\n      updateSleep({variables: {callback_id: id, sleep_info}})\n    }, [])\n    const taskSelected = () => {\n      snackActions.warning(\"Not Implemented Yet\")\n    }\n    return (\n        <React.Fragment>\n            <EnhancedTableToolbar numSelected={selected.length} onHideSelected={hideSelected} onTaskSelected={taskSelected} openDialog={() => setOpenAdjustColumnsDialog(true)}/>\n              <TableContainer component={Paper} className=\"mythicElement\" style={{\"maxWidth\": \"100%\", marginRight: \"5px\", overflow: \"auto\"}}>\n                    <Table size=\"small\">\n                        <EnhancedTableHead shownColumns={shownColumns} numSelected={selected.length} \n                          rowCount={props.callbacks.length} classes={classes} headCells={tableHeadCells} \n                          onSelectAllClick={handleSelectAllClick} onRequestSort={handleRequestSort} orderBy={orderBy} \n                          order={order} />\n                        <TableBody >\n                        {\n                            stableSort(props.callbacks, getComparator(order, orderBy)).map( (cal, index) => (\n                                <CallbacksTableRow shownColumns={shownColumns} handleClick={handleClick} isItemSelected={isSelected} \n                                  onOpenTab={props.onOpenTab} key={\"callback\" + cal.id} {...cal} \n                                  callbackgraphedges={props.callbackgraphedges}\n                                  toggleLock={toggleLock} updateDescription={updateDescriptionSubmit} updateSleepInfo={updateSleepInfo}\n                                  />\n                            ))\n                        }\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n                {openAdjustColumnsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"lg\" open={openAdjustColumnsDialog} \n                  onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                  innerDialog={\n                    <MythicTransferListDialog onClose={()=>{setOpenAdjustColumnsDialog(false);}} \n                      onSubmit={onSubmitAdjustColumns} right={shownColumns} rightTitle=\"Show these columns\"\n                      leftTitle={\"Hidden Columns\"} left={allColumns} dialogTitle={\"Edit which columns are shown\"}/>}\n                />\n                }              \n        </React.Fragment>\n    )\n}\n\n","import React, {useRef} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport {muiTheme} from '../../../themes/Themes.js';\nimport {useQuery, useReactiveVar, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst getP2PProfilesAndCallbacks = gql`\nquery getP2PProfilesAndCallbacks($operation_id: Int!){\n  c2profile(where: {is_p2p: {_eq: true}}) {\n    callbackc2profiles(where: {callback: {operation_id: {_eq: $operation_id}}}) {\n      id\n      callback {\n        id\n        description\n      }\n    }\n    name\n    id\n  }\n}\n`;\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    width: \"97%\"\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\nexport function ManuallyAddEdgeDialog(props) {\n    const classes = useStyles();\n    const [callbackOptions, setCallbackOptions] = React.useState([]);\n    const [profileOptions, setProfileOptions] = React.useState([]);\n    const [selectedDestination, setSelectedDestination] = React.useState('');\n    const [selectedProfile, setSelectedProfile] = React.useState('');\n    const inputRefDestination = useRef(null); \n      const handleChangeProfile = (event) => {\n        setSelectedProfile(event.target.value);\n      };\n      const handleChangeDestination = (event) => {\n        setSelectedDestination(event.target.value);\n      };\n    const handleSubmit = () => {\n        props.onSubmit(props.source.id, selectedProfile, selectedDestination.callback);\n        props.onClose();\n    }\n    const me = useReactiveVar(meState);\n    const { loading, error } = useQuery(getP2PProfilesAndCallbacks, {\n        variables: {operation_id: me.user.current_operation_id},\n        onCompleted: data => {\n            const filteredProfileOptions = data.c2profile.filter( (profile) => {\n                let found = false;\n                props.source.callbackc2profiles.forEach( (source_profile) => {\n                    if(source_profile.c2profile.name === profile.name){found = true};\n                });\n                return found;\n            } );\n            setProfileOptions(filteredProfileOptions);\n            if(filteredProfileOptions.length > 0){\n                setSelectedProfile(filteredProfileOptions[0]);\n                const cbopts = filteredProfileOptions[0][\"callbackc2profiles\"].filter( (cb) => cb.callback.id !== props.source.id );\n                setCallbackOptions(cbopts);\n                if(cbopts.length > 0){\n                    setSelectedDestination(cbopts[0]);\n                }\n            }\n        },\n        fetchPolicy: \"network-only\"\n    });\n    if (loading) {\n     return <LinearProgress style={{marginTop: \"10px\"}} />;\n    }\n    if (error) {\n     console.error(error);\n     return <div>Error!</div>;\n    }\n  return (\n    <React.Fragment>\n        <DialogTitle >Manually Add Edge From Callback {props.source.id}</DialogTitle>\n        <DialogContent dividers={true}>\n            <React.Fragment>\n                Manually add an edge from Callback {props.source.id} to another callback via a P2P C2 Profile they both share.<br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"demo-dialog-select-label-profile\">Profile</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-profile\"\n                    id=\"demo-dialog-select\"\n                    \n                    value={selectedProfile}\n                    onChange={handleChangeProfile}\n                    style={{minWidth: \"30%\"}}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {profileOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"profile:\" + opt.id}>{opt.name}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl><br/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel ref={inputRefDestination}>Destination</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label-destination\"\n                    id=\"demo-dialog-select-destination\"\n                    value={selectedDestination}\n                    \n                    onChange={handleChangeDestination}\n                    input={<Input />}\n                  >\n                    <MenuItem value=\"\">\n                      <em>None</em>\n                    </MenuItem>\n                    {callbackOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"callback:\" + opt.callback.id}>{opt.callback.id} ({opt.callback.description})</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={handleSubmit} variant=\"contained\" style={{backgroundColor: muiTheme.palette.success.main}}>\n            Add\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect, useState, useMemo} from 'react';\nimport {drawC2PathElements, getNodeEdges} from './C2PathDialog';\nimport {Button} from '@material-ui/core';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport Paper from '@material-ui/core/Paper';\nimport Grow from '@material-ui/core/Grow';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport {useMutation } from '@apollo/client';\nimport {saveSvgAsPng} from 'save-svg-as-png';\nimport {hideCallbackMutation, removeEdgeMutation, addEdgeMutation} from './CallbackMutations';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicSelectFromListDialog} from '../../MythicComponents/MythicSelectFromListDialog';\nimport {ManuallyAddEdgeDialog} from './ManuallyAddEdgeDialog';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {createTaskingMutation} from './CallbacksTabsTasking';\nimport {useTheme} from '@material-ui/core/styles';\n\nexport const loadedLinkCommandsQuery = gql`\nquery loadedLinkCommandsQuery ($callback_id: Int!){\n  loadedcommands(where: {callback_id: {_eq: $callback_id}, command: {supported_ui_features: {_ilike: \"graph_view:link\"}, deleted: {_eq: false}}}) {\n    command {\n        id\n        cmd\n        help_cmd\n        description\n        needs_admin\n    }\n  }\n}\n`;\n\nexport function CallbacksGraph({onOpenTab, callbackgraphedges}){\n    const theme = useTheme();\n    const dagreRef = useRef(null);    \n    const dropdownAnchorRef = React.useRef(null);\n    const [dropdownOpen, setDropdownOpen] = React.useState(false);\n    const [reZoom, setReZoom] = useState(true);\n    //used for creating a task to do a link command\n    const [linkCommands, setLinkCommands] = React.useState([]);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [openSelectLinkCommandDialog, setOpenSelectLinkCommandDialog] = React.useState(false);\n    const [selectedLinkCommand, setSelectedLinkCommand] = useState();\n    const [selectedCallback, setSelectedCallback] = useState();\n    const [manuallyRemoveEdgeDialogOpen, setManuallyRemoveEdgeDialogOpen] = useState(false);\n    const [manuallyAddEdgeDialogOpen, setManuallyAddEdgeDialogOpen] = useState(false);\n    const [edgeOptions, setEdgeOptions] = useState([]); // used for manuallyRemoveEdgeDialog\n    const [addEdgeSource, setAddEdgeSource] = useState(null); // used for manuallyAddEdgeDialog\n    const [getLinkCommands] = useLazyQuery(loadedLinkCommandsQuery, {fetchPolicy: \"network-only\",\n        onCompleted: data => {            \n            if(data.loadedcommands.length === 1){\n                //no need for a popup, there's only one possible command\n                setSelectedLinkCommand(data.loadedcommands[0].command);\n                setOpenParametersDialog(true);\n            }else if(data.loadedcommands.length === 0){\n                //no possible command can be used, do a notification\n                snackActions.warning(\"No commands loaded that are 'link' commands\");\n            }else{\n                const cmds = data.loadedcommands.map( (cmd) => { return {...cmd, display: cmd.command.cmd} } );\n                setLinkCommands(cmds);\n                setSelectedLinkCommand(cmds[0].command);\n                setOpenSelectLinkCommandDialog(true);\n            }\n        }});\n    const onSubmitSelectedLinkCommand = (cmd) => {\n        setSelectedLinkCommand(cmd.command);\n        //console.log(cmd);\n        setOpenParametersDialog(true);\n    }\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"task created\");\n            }\n            \n        }\n    });\n    const submitParametersDialog = (cmd, parameters, files) => {\n        setOpenParametersDialog(false);\n        createTask({variables: {callback_id: selectedCallback.id, command: cmd, params: parameters, files}});\n    }\n    const [viewConfig, setViewConfig] = React.useState({\n        rankDir: \"LR\",\n        label_components: [\"id\", \"user\"],\n        packet_flow_view: true,\n        include_disconnected: true,\n        show_all_nodes: false\n    });\n    const [hideCallback] = useMutation(hideCallbackMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyRemoveEdge] = useMutation(removeEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const [manuallyAddEdge] = useMutation(addEdgeMutation, {\n        update: (cache, {data}) => {\n            //console.log(data);\n        }\n    });\n    const onSubmitManuallyRemoveEdge = (edge) => {\n        if(edge === \"\"){\n            snackActions.warning(\"No edge selected\");\n            return;\n        }\n        manuallyRemoveEdge({variables: {edge_id: edge.edge_id, end_timestamp: (new Date()).toISOString()}});\n    }\n    const onSubmitManuallyAddEdge = (source_id, profile, destination) => {\n        if(profile === \"\" || destination === \"\"){\n            snackActions.warning(\"Profile or Destination Callback not provided\");\n            return;\n        }\n        manuallyAddEdge({variables: {source_id: source_id, profile_id: profile.id, destination_id: destination.id}});\n        //console.log(\"want to submit: \", source_id, profile, destination);\n    }\n    const node_events = useMemo(() => {return {\n        \"mouseover\": (parent, node, d) => {return},\n        \"mouseout\": (parent, node, d) => {return},\n        \"click\": (parent, node, d) => {return},\n        \"contextmenu\":  [\n\t        {\n\t\t        title: 'Hide Callback',\n\t\t        action: function(g, elm) {\n\t\t            hideCallback({variables: {callback_id: elm.node.id}});\n\t\t        }\n\t        },\n\t        {\n\t\t        title: 'Interact',\n\t\t        action: function(g, elm){\n\t\t            onOpenTab({tabType: \"interact\", tabID: elm.node.id + \"interact\", callbackID: elm.node.id});\n\t            }\n            },\n            {\n\t            title: \"Manually Remove Edge\",\n\t            action: function(g, elm){\n\t                const edges = getNodeEdges(g, elm.node.id);\n\t                const opts = edges.reduce( (prev, e) => {\n\t                    const fulledg = g.edge(e.v, e.w, e.name);\n\t                    if(fulledg.end_timestamp === null){\n\t                        if(fulledg.direction === 1){\n\t                            if(viewConfig[\"packet_flow_view\"]){\n\t                                return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                            }else{\n\t                                return [...prev, {...fulledg, \"display\": e.v + \" --> \" + e.name + \" --> \" + e.w}];\n\t                            }\n\t                        }else{\n\t                            return [...prev, {...fulledg, \"display\": e.w + \" --> \" + e.name + \" --> \" + e.v}];\n\t                        }\n\t                        \n\t                    }else{\n\t                        return [...prev];\n\t                    }\n\t                }, []);\n\t                setEdgeOptions(opts);\n\t                setManuallyRemoveEdgeDialogOpen(true);\n                }\n            },\n            {\n                title: \"Manually Add Edge\",\n                action: function(g, elm){\n                    setAddEdgeSource(elm.node);\n                    setManuallyAddEdgeDialogOpen(true);\n                }\n\t        },\n\t        {\n\t            title: \"Task Callback for Edge\",\n\t            action: function(g, elm){\n\t                setLinkCommands([]);\n                    setSelectedLinkCommand(null);\n                    setSelectedCallback(null);\n\t                getLinkCommands({variables: {callback_id: elm.node.id} });\n\t                setSelectedCallback(elm.node);\n\t                \n                }\n            },\n        ]       \n    }}, [getLinkCommands, hideCallback, viewConfig, onOpenTab]);\n    const handleDropdownToggle = (evt) => {\n        evt.stopPropagation();\n        setDropdownOpen((prevOpen) => !prevOpen);\n      };\n    const handleMenuItemClick = (event, index) => {\n        options[index].click();\n        setDropdownOpen(false);\n    };\n    const options = [{name: viewConfig[\"include_disconnected\"] ? 'Show Only Active Edges' : \"Show All Edges\", click: () => {\n                        const view = {...viewConfig, include_disconnected: !viewConfig[\"include_disconnected\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }}, \n                     {name: viewConfig[\"show_all_nodes\"] ? 'Hide inactive callbacks' : 'Show All Callbacks', click: () => {\n                        const view = {...viewConfig, show_all_nodes: !viewConfig[\"show_all_nodes\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: 'Autosize', click: () => {\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, viewConfig, node_events, theme);\n                     }}, \n                     {name: viewConfig[\"rankDir\"] === \"LR\" ? 'Change Layout to Top-Bottom' : \"Change Layout to Left-Right\", click: () => {\n                        if(viewConfig[\"rankDir\"] === \"LR\"){\n                            const view = {...viewConfig, rankDir: \"BT\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }else{\n                            const view = {...viewConfig, rankDir: \"LR\"};\n                            drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                            setViewConfig(view);\n                        }\n                     }},\n                     {name: viewConfig[\"packet_flow_view\"] ? \"View Connection Directions\" : \"View Egress Routes\" , click: () => {\n                        const view = {...viewConfig, packet_flow_view: !viewConfig[\"packet_flow_view\"]};\n                        drawC2PathElements([...callbackgraphedges], dagreRef, true, view, node_events, theme);\n                        setViewConfig(view);\n                     }},\n                     {name: \"Download Graph\", click: () => {\n                        saveSvgAsPng(document.getElementById(\"callbacksgraph\"), \"diagram.png\");\n                     }}];\n    const getConfigString = () => {\n        let config = \"\";\n        config += viewConfig[\"include_disconnected\"] ? \"Showing All Edges, \" : \"Showing Only Active Edges, \";\n        config += viewConfig[\"show_all_nodes\"] ? \"Showing All Callbacks, \" : \"Showing Active Callbacks, \";\n        config += \"Layout: \" + viewConfig[\"rankDir\"] + \", \";\n        config += viewConfig[\"packet_flow_view\"] ? \"Showing Egress Routes\" : \"Showing Connections Paths\";\n        return config;\n    }\n    const handleClose = (event) => {\n        if (dropdownAnchorRef.current && dropdownAnchorRef.current.contains(event.target)) {\n          return;\n        }\n        setDropdownOpen(false);\n      };\n    useEffect( () => {\n        const allEdges = [...callbackgraphedges];\n        drawC2PathElements(allEdges, dagreRef, reZoom, viewConfig, node_events, theme);\n        setReZoom(false);\n    }, [callbackgraphedges, reZoom, viewConfig, theme])\n    return (\n        <div style={{maxWidth: \"100%\", \"overflow\": \"auto\", height: \"100%\"}}>\n            <ButtonGroup variant=\"contained\" ref={dropdownAnchorRef} aria-label=\"split button\" style={{marginTop: \"10px\"}} color=\"primary\">\n                <Button size=\"small\" color=\"primary\" aria-controls={dropdownOpen ? 'split-button-menu' : undefined}\n                    aria-expanded={dropdownOpen ? 'true' : undefined}\n                    aria-haspopup=\"menu\"\n                    onClick={handleDropdownToggle}>\n                        Actions <ArrowDropDownIcon />\n                </Button>\n            </ButtonGroup>\n            {getConfigString()}\n            <Popper open={dropdownOpen} anchorEl={dropdownAnchorRef.current} role={undefined} transition disablePortal>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{\n                    transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom',\n                  }}\n                >\n                  <Paper style={{backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}>\n                    <ClickAwayListener onClickAway={handleClose}>\n                      <MenuList id=\"split-button-menu\">\n                        {options.map((option, index) => (\n                          <MenuItem\n                            key={option.name}\n                            onClick={(event) => handleMenuItemClick(event, index)}\n                          >\n                            {option.name}\n                          </MenuItem>\n                        ))}\n                      </MenuList>\n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyRemoveEdgeDialogOpen}\n                    onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setManuallyRemoveEdgeDialogOpen(false);}} identifier=\"edge_id\" display=\"display\"\n                                        onSubmit={onSubmitManuallyRemoveEdge} options={edgeOptions} title={\"Manually Remove Edge\"} action={\"remove\"} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={manuallyAddEdgeDialogOpen}\n                    onClose={()=>{setManuallyAddEdgeDialogOpen(false);}} \n                    innerDialog={<ManuallyAddEdgeDialog onClose={()=>{setManuallyAddEdgeDialogOpen(false);}}\n                                        onSubmit={onSubmitManuallyAddEdge} source={addEdgeSource} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                    onClose={()=>{setOpenParametersDialog(false);}} \n                    innerDialog={<TaskParametersDialog command={selectedLinkCommand} callback={selectedCallback} onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} />}\n                />\n            <MythicDialog fullWidth={true} maxWidth=\"sm\" open={openSelectLinkCommandDialog}\n                    onClose={()=>{setOpenSelectLinkCommandDialog(false);}} \n                    innerDialog={<MythicSelectFromListDialog onClose={()=>{setOpenSelectLinkCommandDialog(false);}}\n                                        onSubmit={onSubmitSelectedLinkCommand} options={linkCommands} title={\"Select Link Command\"} \n                                        action={\"select\"} display={\"display\"} identifier={\"display\"}/>}\n                />\n            \n                <svg id=\"callbacksgraph\" ref={dagreRef} width=\"100%\" height=\"90%\"></svg> \n            </div>\n    );\n}\n\n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport {CallbacksTable} from './CallbacksTable';\nimport {CallbacksGraph} from './CallbacksGraph';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst SUB_Callbacks = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callback(where: {active: {_eq: true}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    architecture\n    description\n    domain\n    external_ip\n    host\n    id\n    integrity_level\n    ip\n    locked\n    locked_operator {\n      username\n    }\n    extra_info\n    sleep_info\n    pid\n    os\n    user\n    agent_callback_id\n    operation_id\n    process_name\n    payload {\n      os\n      payloadtype {\n        ptype\n        id\n      }\n      tag\n      id\n    }\n  }\n}\n `;\nconst SUB_Edges = gql`\nsubscription CallbacksSubscription ($operation_id: Int!){\n  callbackgraphedge(where: {operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    id\n    end_timestamp\n    direction\n    destination {\n      active\n      id\n      operation_id\n      user\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    source {\n      active\n      id\n      user\n      operation_id\n      host\n      payload {\n        payloadtype {\n          ptype\n          id\n        }\n      }\n      callbackc2profiles {\n        c2profile {\n          name\n        }\n      }\n    }\n    c2profile {\n      id\n      is_p2p\n      name\n    }\n  }\n}\n `;\nexport function CallbacksTop({onOpenTab, topDisplay, heights}){\n    const me = useReactiveVar(meState);\n    const [callbacks, setCallbacks] = React.useState([]);\n    const [callbackEdges, setCallbackEdges] = React.useState([]);\n    useSubscription(SUB_Callbacks, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbacks(subscriptionData.data.callback);\n        }\n    });\n    useSubscription(SUB_Edges, {\n        variables: {operation_id: me.user.current_operation_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n          setCallbackEdges(subscriptionData.data.callbackgraphedge)\n        }\n    });\n    const onOpenTabLocal = ({tabType, tabID, callbackID}) => {\n      for(let i = 0; i < callbacks.length; i++){\n        if(callbacks[i][\"id\"] === callbackID){\n          const tabData = {tabID, tabType, callbackID, \n              payloadtype: callbacks[i][\"payload\"][\"payloadtype\"][\"ptype\"],\n              payloadtype_id: callbacks[i][\"payload\"][\"payloadtype\"][\"id\"],\n              operation_id: callbacks[i][\"operation_id\"],\n              payloadDescription: callbacks[i][\"payload\"][\"tag\"],\n              callbackDescription: callbacks[i][\"description\"],\n              host: callbacks[i][\"host\"],\n              os: callbacks[i][\"payload\"][\"os\"]};\n          onOpenTab(tabData);\n        }\n      }\n    }\n    return (\n      <div style={{height: \"100%\", maxHeight: \"100%\", overflow: \"auto\"}}>\n        {topDisplay === \"graph\" ? (\n          <CallbacksGraph maxHeight={\"100%\"} topHeight={heights.top} key={\"callbacksgraph\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        ) : (\n          <CallbacksTable key={\"callbackstable\"} onOpenTab={onOpenTabLocal} callbacks={callbacks} callbackgraphedges={callbackEdges} />\n        )}\n        </div>\n    );\n}","import React, { useEffect } from 'react';\nimport { CallbacksTabs } from './CallbacksTabs';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AspectRatioIcon from '@material-ui/icons/AspectRatio';\nimport TocIcon from '@material-ui/icons/Toc';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport { HeightsDialog } from './HeightsDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { CallbacksTop } from './CallbacksTop';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        transform: 'translateZ(0px)',\n        flexGrow: 1,\n    },\n    speedDial: {\n        position: 'absolute',\n        '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n            bottom: theme.spacing(2),\n            right: theme.spacing(2),\n        },\n        '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n            top: theme.spacing(2),\n            right: theme.spacing(2),\n        },\n    },\n    tooltip: {\n        backgroundColor: theme.palette.background.contrast,\n        color: theme.palette.text.contrast,\n        boxShadow: theme.shadows[1],\n        fontSize: 13,\n    },\n    arrow: {\n        color: theme.palette.background.contrast,\n    },\n}));\nexport function Callbacks() {\n    const [topDisplay, setTopDisplay] = React.useState('table');\n    const [openTabs, setOpenTabs] = React.useState([]);\n    const [clickedTabId, setClickedTabId] = React.useState('');\n    const [heights, setHeights] = React.useState({ top: '30%', bottom: '68%' });\n    useEffect(() => {\n        const oldTabs = localStorage.getItem('openTabs');\n        if (oldTabs !== undefined && oldTabs !== null) {\n            try {\n                const tabs = JSON.parse(oldTabs);\n                setOpenTabs(tabs);\n                const lastClickedTab = localStorage.getItem('clickedTab');\n                if (lastClickedTab !== undefined && lastClickedTab !== null) {\n                    setClickedTabId(lastClickedTab);\n                }\n            } catch (error) {\n                console.log('failed to parse oldTabs', error);\n            }\n        }\n        const oldHeights = localStorage.getItem('heights');\n        if (oldHeights !== undefined && oldHeights !== null) {\n            try {\n                const newHeights = JSON.parse(oldHeights);\n                setHeights(newHeights);\n            } catch (error) {\n                console.log('failed to parse oldHeights', error);\n            }\n        }\n    }, []);\n    const onOpenTab = (tabData) => {\n        let found = false;\n        openTabs.forEach((tab) => {\n            if (tab.tabID === tabData.tabID) found = true;\n        });\n        //console.log(\"found is\", found, tabData.tabID, tabData.tabType, tabData.callbackID, openTabs);\n        if (!found) {\n            const tabs = [...openTabs, { ...tabData }];\n            localStorage.setItem('openTabs', JSON.stringify(tabs));\n            setOpenTabs(tabs);\n        }\n        localStorage.setItem('clickedTab', tabData.tabID);\n        setClickedTabId(tabData.tabID);\n    };\n    const onEditTabDescription = (tabInfo, description) => {\n        const tabs = openTabs.map((t) => {\n            if (t.tabID === tabInfo.tabID) {\n                return { ...t, customDescription: description };\n            } else {\n                return { ...t };\n            }\n        });\n        setOpenTabs(tabs);\n        localStorage.setItem('openTabs', JSON.stringify(tabs));\n    };\n    const onCloseTab = ({ tabID, index }) => {\n        const tabSet = openTabs.filter((tab) => {\n            return tab.tabID !== tabID;\n        });\n        localStorage.setItem('openTabs', JSON.stringify(tabSet));\n        setOpenTabs(tabSet);\n    };\n    const clearSelectedTab = React.useCallback(() => {\n        setClickedTabId('');\n    }, []);\n\n    const onSubmitHeights = React.useCallback((newHeights) => {\n        setHeights(newHeights);\n        localStorage.setItem('heights', JSON.stringify(newHeights));\n    }, []);\n    return (\n        <div style={{ maxWidth: '100%', height: '100%',  display: 'flex', flexDirection: 'column' }}>\n            <React.Fragment>\n                <SpeedDialWrapper setTopDisplay={setTopDisplay} heights={heights} onSubmitHeights={onSubmitHeights} />\n                <div style={{ flexGrow: 1, flexBasis: heights.top, height: heights.top }}>\n                    <CallbacksTop topDisplay={topDisplay} onOpenTab={onOpenTab} heights={heights} />\n                </div>\n                <div style={{ flexGrow: 1, flexBasis: heights.bottom, height: heights.bottom }}>\n                    <CallbacksTabs\n                        onCloseTab={onCloseTab}\n                        onEditTabDescription={onEditTabDescription}\n                        clearSelectedTab={clearSelectedTab}\n                        tabHeight={heights.bottom}\n                        maxHeight={heights.bottom}\n                        key={'callbackstabs'}\n                        clickedTabId={clickedTabId}\n                        openTabs={openTabs}\n                    />\n                </div>\n            </React.Fragment>\n        </div>\n    );\n}\n\nfunction SpeedDialWrapperPreMemo({ setTopDisplay, onSubmitHeights, heights }) {\n    const [open, setOpen] = React.useState(false);\n    const classes = useStyles();\n    const [openHeightsDialog, setOpenHeightsDialog] = React.useState(false);\n    const submitHeights = (newHeights) => {\n        setOpen(false);\n        onSubmitHeights(newHeights);\n    };\n    const actions = React.useMemo(\n        () => [\n            {\n                icon: <TocIcon />,\n                name: 'Table layout',\n                onClick: () => {\n                    setTopDisplay('table');\n                },\n            },\n            {\n                icon: <AssessmentIcon />,\n                name: 'Graph layout',\n                onClick: () => {\n                    setTopDisplay('graph');\n                },\n            },\n            {\n                icon: <AspectRatioIcon />,\n                name: 'Adjust Top/Bottom Size',\n                onClick: () => {\n                    setOpenHeightsDialog(true);\n                    setOpen(false);\n                },\n            },\n        ],\n        []\n    );\n    return (\n        <React.Fragment>\n            {openHeightsDialog && (\n                <MythicDialog\n                    fullWidth={true}\n                    maxWidth='sm'\n                    open={openHeightsDialog}\n                    onClose={() => {\n                        setOpenHeightsDialog(false);\n                        setOpen(false);\n                    }}\n                    innerDialog={\n                        <HeightsDialog\n                            onClose={() => {\n                                setOpenHeightsDialog(false);\n                                setOpen(false);\n                            }}\n                            heights={heights}\n                            onSubmit={submitHeights}\n                        />\n                    }\n                />\n            )}\n            <SpeedDial\n                ariaLabel='SpeedDial example'\n                className={classes.speedDial}\n                icon={<SpeedDialIcon />}\n                onClose={() => {\n                    setOpen(false);\n                }}\n                onOpen={() => {\n                    setOpen(true);\n                }}\n                FabProps={{ color: 'secondary' }}\n                open={open}\n                style={{ marginTop: '35px' }}\n                direction='down'>\n                {actions.map((action) => (\n                    <SpeedDialAction\n                        arrow\n                        key={action.name}\n                        TooltipClasses={{ tooltip: classes.tooltip, arrow: classes.arrow }}\n                        icon={action.icon}\n                        tooltipTitle={action.name}\n                        onClick={action.onClick}\n                    />\n                ))}\n            </SpeedDial>\n        </React.Fragment>\n    );\n}\nconst SpeedDialWrapper = React.memo(SpeedDialWrapperPreMemo);\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport {taskingDataFragment} from '../Callbacks/CallbacksTabsTasking'\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst fetchLimit = 20;\nconst responseSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, responses: {response_text: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, responses: {response_text: {_ilike: $search}}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst parameterSearch = gql`\n${taskingDataFragment}\nquery parametersQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, original_params: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\nconst commentSearch = gql`\n${taskingDataFragment}\nquery responseQuery($operation_id: Int!, $search: String!, $offset: Int!, $fetchLimit: Int!, $status: String!) {\n    task_aggregate(distinct_on: id, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      aggregate {\n        count(columns: id)\n      }\n    }\n    task(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: asc}, where: {status: {_ilike: $status}, parent_task_id: {_is_null: true}, comment: {_ilike: $search}, callback: {operation_id: {_eq: $operation_id}}}) {\n      ...taskData\n    }\n  }\n`;\n\nexport function SearchTabTasksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tasks\"} iconComponent={<AssignmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTasksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const searchFieldOptions = [\"Output\", \"Parameters\", \"Comment\"];\n    const [filterTaskStatus, setFilterTaskStatus] = React.useState(\"\");\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const handleFilterTaskStatusValueChange = (name, value, error) => {\n        setFilterTaskStatus(value);\n        props.changeSearchParam(\"taskStatus\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField, queryTaskStatus) => {\n            let adjustedSearchField = querySearchField ? querySearchField : searchField;\n            let adjustedSearch = querySearch ? querySearch : search;\n            let adjustedTaskStatus = queryTaskStatus ? queryTaskStatus : filterTaskStatus;\n            switch(adjustedSearchField){\n            case \"Output\":\n                props.onOutputSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            case \"Parameters\":\n                props.onParameterSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0, taskStatus: adjustedTaskStatus})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Output\";\n            let adjustedTaskStatus = \"\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Output\");\n                props.onChangeSearchField(\"Output\");\n                props.changeSearchParam(\"searchField\", \"Output\");\n            }\n            if(queryParams.has(\"taskStatus\")){\n                setFilterTaskStatus(queryParams.get(\"taskStatus\"));\n                props.onChangeTaskStatus(queryParams.get(\"taskStatus\"));\n                adjustedTaskStatus = queryParams.get(\"taskStatus\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField, adjustedTaskStatus);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={3}>\n                <FormLabel component=\"legend\">Search Task's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Filter Task Status...\" value={filterTaskStatus}\n                        onChange={handleFilterTaskStatusValueChange} onEnter={submitSearch} name=\"Filter Task Status...\"/>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTasksPanel = (props) =>{\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Output\");\n    const [taskStatus, setTaskStatus] = React.useState(\"\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n    }\n    const onChangeTaskStatus = (status) => {\n        setTaskStatus(status);\n    }\n    const handleCallbackSearchSuccess = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.task_aggregate.aggregate.count);\n        setTaskingData({task: data.task});\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getOutputSearch] = useLazyQuery(responseSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const [getParameterSearch] = useLazyQuery(parameterSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchSuccess,\n        onError: handleCallbackSearchFailure\n    })\n    const onOutputSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        getOutputSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onParameterSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        getParameterSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onCommentSearch = ({search, offset, taskStatus}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        console.log(\"search\", search);\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        let newTaskStatus = taskStatus;\n        if(newTaskStatus === \"\"){\n            newTaskStatus = \"_\";\n        }\n        setSearch(search);\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            search: \"%\" + new_search + \"%\",\n            status: \"%\" + newTaskStatus + \"%\"\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: 0, taskStatus});\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: 0, taskStatus});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0, taskStatus});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Output\":\n                    onOutputSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                case \"Parameters\":\n                    onParameterSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit, taskStatus });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTasksSearchPanel onChangeSearchField={onChangeSearchField} onOutputSearch={onOutputSearch} value={props.value} index={props.index} onChangeTaskStatus={onChangeTaskStatus}\n                onParameterSearch={onParameterSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                \n                {\n                    taskingData.task.length > 0 ? (\n                        taskingData.task.map( (task) => (\n                            <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} />\n                        ))\n                    ) : (<div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>)\n                }\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport {useTheme} from '@material-ui/core/styles';\nimport { useSnackbar, SnackbarContent } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\n\nconst useStyles =  makeStyles(theme => ({\n  root: {\n      [theme.breakpoints.up('sm')]: {\n          minWidth: '344px !important',\n      },\n  },\n  typography: {\n      fontWeight: 'bold',\n  },\n  actionRoot: {\n      padding: '8px 8px 8px 16px',\n  },\n  icons: {\n      marginLeft: 'auto',\n      float: \"right\"\n  },\n  expand: {\n      padding: '8px 8px',\n      transform: 'rotate(0deg)',\n      transition: theme.transitions.create('transform', {\n          duration: theme.transitions.duration.shortest,\n      }),\n  },\n  expandOpen: {\n      transform: 'rotate(180deg)',\n  },\n  collapse: {\n      padding: 16,\n  },\n  checkIcon: {\n      fontSize: 20,\n      color: '#b3b3b3',\n      paddingRight: 4,\n  },\n  button: {\n      padding: 0,\n      textTransform: 'none',\n  },\n}));\n\nexport const MythicSnackDownload = React.forwardRef((props, ref) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const { closeSnackbar } = useSnackbar();\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpandClick = () => {\n      setExpanded(!expanded);\n  };\n\n  const handleDismiss = () => {\n      closeSnackbar(props.id);\n  };\n\n  return (\n      <SnackbarContent ref={ref} className={classes.root}>\n          <Card style={{backgroundColor: theme.palette.success.main}} >\n              <CardActions classes={{ root: classes.actionRoot }}>\n                  <Typography variant=\"subtitle2\" className={classes.typography}>{props.title}</Typography>\n                  <div className={classes.icons}>\n                      <IconButton\n                          aria-label=\"Show more\"\n                          className={clsx(classes.expand, { [classes.expandOpen]: expanded })}\n                          onClick={handleExpandClick}\n                      >\n                          <ExpandMoreIcon />\n                      </IconButton>\n                      <IconButton className={classes.expand} onClick={handleDismiss}>\n                          <CloseIcon />\n                      </IconButton>\n                  </div>\n              </CardActions>\n              <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                  <Paper className={classes.collapse}>\n                      <Typography gutterBottom>{props.innerText}</Typography>\n                      <Button size=\"small\" className={classes.button} download href={props.downloadLink}>\n                          <CheckCircleIcon className={classes.checkIcon} />\n                          Download now\n                      </Button>\n                  </Paper>\n              </Collapse>\n          </Card>\n      </SnackbarContent>\n  );\n});","import React, {useEffect} from 'react';\nimport {Button, Link, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\nimport {useTheme} from '@material-ui/core/styles';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Switch from '@material-ui/core/Switch';\nimport IconButton from '@material-ui/core/IconButton';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport ArchiveIcon from '@material-ui/icons/Archive';\nimport { gql, useMutation } from '@apollo/client';\nimport { ResponseDisplayScreenshotModal } from '../Callbacks/ResponseDisplayScreenshotModal';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst downloadBulkQuery = gql`\nmutation downloadBulkMutation($files: [String!]!){\n    download_bulk(files: $files){\n        status\n        error\n        file_id\n    }\n}\n`;\nconst updateFileDeleted = gql`\nmutation updateFileMutation($file_id: Int!){\n    deleteFile(file_id: $file_id) {\n        status\n        error\n        file_ids\n    }\n}\n`;\nconst updateFileComment = gql`\nmutation updateCommentMutation($file_id: Int!, $comment: String!){\n    update_filemeta_by_pk(pk_columns: {id: $file_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileMetaDownloadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({file_ids}) => {\n        const updated = files.map( (file) => {\n            if(file_ids.includes(file.id)){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >File</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaDownloadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        onEditComment={onEditComment}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaDownloadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.deleteFile);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <Tooltip title=\"Toggle to download multiple files at once\">\n                            <Switch\n                                checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                                onChange={onSelectChanged}\n                                color=\"primary\"\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"select_multiple\"\n                                />\n                        </Tooltip>\n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>{props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell style={{width: \"16rem\"}}>md5</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>sha1</TableCell>\n                                                <TableCell style={{width: \"20rem\"}}>UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell ><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (\n                                                        null\n                                                    ) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaUploadTable(props){\n    const [selected, setSelected] = React.useState({});\n    const [files, setFiles] = React.useState([]);\n    const onToggleSelection = (id, checked) => {\n        setSelected({...selected, [id]: checked});\n    }\n    useEffect( () => {\n        const initialSelected = props.files.reduce( (prev, file) => {\n            return {...prev, [file.id]: false}\n        }, {});\n        setSelected(initialSelected);\n        setFiles([...props.files]);\n    }, [props.files]);\n    const [downloadBulk] = useMutation(downloadBulkQuery, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.download_bulk.status === \"success\"){\n                snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Zip File\" innerText=\"Filenames are random UUIDs, so a JSON file is included with a mapping of UUID to real filename\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + data.download_bulk.file_id} />});\n            }else{\n                snackActions.error(data.error);\n            }\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to zip up files\");\n        }\n    })\n    const onDownloadBulk = () => {\n        snackActions.info(\"Zipping up files...\");\n        let fileIds = [];\n        for(const [key, value] of Object.entries(selected)){\n            if(value){\n                for(let j = 0; j < props.files.length; j++){\n                    if(props.files[j].id === parseInt(key)){\n                        fileIds.push(props.files[j].agent_file_id);\n                    }\n                }\n            }\n        }\n        downloadBulk({variables:{files: fileIds}})\n    }\n    const onDelete = ({file_ids}) => {\n        const updated = files.map( (file) => {\n            if(file_ids.includes(file.id)){\n                return {...file, deleted: true};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >   \n            <Button size=\"small\" onClick={onDownloadBulk} style={{float: \"right\"}} color=\"primary\" variant=\"contained\"><ArchiveIcon/>Zip & Download Selected</Button>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}></TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Source</TableCell>\n                        <TableCell >Destination</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaUploadTableRow\n                        key={\"file\" + op.id}\n                        onToggleSelection={onToggleSelection}\n                        onEditComment={onEditComment}\n                        selected={selected}\n                        onDelete={onDelete}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileMetaUploadTableRow(props){\n    const [openDelete, setOpenDelete] = React.useState(false);\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [deleteFile] = useMutation(updateFileDeleted, {\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            props.onDelete(data.deleteFile);\n        },\n        onError: (data) => {\n            console.log(data);\n            snackActions.error(\"Failed to delete file\");\n        }\n    })\n    const onAcceptDelete = () => {\n        deleteFile({variables: {file_id: props.id}})\n    }\n    const onSelectChanged = (event) => {\n        props.onToggleSelection(props.id, event.target.checked);\n    }\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDelete(false);}} onSubmit={onAcceptDelete} open={openDelete}/>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <Tooltip title=\"Toggle to download multiple files at once\">\n                            <Switch\n                                checked={props.selected[props.id] === undefined ? false : props.selected[props.id]}\n                                onChange={onSelectChanged}\n                                color=\"primary\"\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"select_multiple\"\n                                />\n                        </Tooltip>\n                    )}\n                    \n                </TableCell>\n                <TableCell>\n                    {props.deleted ? (null) : (\n                        <IconButton size=\"small\" onClick={()=>{setOpenDelete(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    )}\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" download underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.filename_text}</Link>\n                </TableCell>\n                <TableCell  style={{wordBreak: \"break-all\"}}>\n                    {props.deleted ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography>) : (\n                        props.complete ? (\n                            <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" href={window.location.origin + \"/api/v1.4/files/download/\" + props.agent_file_id}>{props.full_remote_path_text}</Link>\n                        ) : (\n                            <React.Fragment>\n                                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.full_remote_path_text}</Typography> <Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>\n                            </React.Fragment>\n                        )\n                    )}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>\n                    {props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={7}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}\n\nexport function FileMetaScreenshotTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updated = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment: comment};\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updated);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"400px\"}}>Thumbnail</TableCell>\n                        <TableCell >Filename</TableCell>\n                        <TableCell >Time</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>More</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileMetaScreenshotTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\nfunction FileMetaScreenshotTableRow(props){\n    const [openDetails, setOpenDetails] = React.useState(false);\n    const me = useReactiveVar(meState);\n    const [openScreenshot, setOpenScreenshot] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filemeta_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {file_id: props.id, comment: comment}})\n    }\n    \n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell >\n                    <img onClick={() => setOpenScreenshot(true)} src={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} style={{width: \"350px\", cursor: \"pointer\"}} />\n                    <MythicDialog fullWidth={true} maxWidth=\"xl\" open={openScreenshot} \n                        onClose={()=>{setOpenScreenshot(false);}} \n                        innerDialog={<ResponseDisplayScreenshotModal href={\"/api/v1.4/files/screencaptures/\" + props.agent_file_id} onClose={()=>{setOpenScreenshot(false);}} />} />\n                        {props.chunks_received < props.total_chunks ? (<Typography color=\"secondary\" style={{wordBreak: \"break-all\"}} >{props.chunks_received} / {props.total_chunks} Chunks Received</Typography>) : (null)}\n                </TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.filename_text}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography></TableCell>\n                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography></TableCell>\n                <TableCell>\n                    {props.comment}<IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                        onClose={()=>{setEditCommentDialogOpen(false);}} \n                        innerDialog={<MythicModifyStringDialog title=\"Edit File Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    <IconButton size=\"small\" aria-label=\"expand row\" onClick={() => setOpenDetails(!openDetails)}>\n                            {openDetails ? <KeyboardArrowUpIcon className=\"mythicElement\"/> : <KeyboardArrowDownIcon className=\"mythicElement\"/>}\n                        </IconButton>\n                </TableCell>\n            </TableRow>\n                {openDetails ? (\n                    <TableRow>\n                        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n                            <Collapse in={openDetails}>\n                                <Box margin={1}>\n                                <TableContainer component={Paper} className=\"mythicElement\">   \n                                    <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"99%\", \"overflow\": \"scroll\"}}>\n                                        <TableHead>\n                                            <TableRow>\n                                                <TableCell >md5</TableCell>\n                                                <TableCell >sha1</TableCell>\n                                                <TableCell >UUID</TableCell>\n                                                <TableCell >Operator</TableCell>\n                                                <TableCell style={{width: \"6rem\"}}>Task</TableCell>\n                                                <TableCell>Task Comment</TableCell>\n                                                <TableCell>Command</TableCell>\n                                            </TableRow>\n                                        </TableHead>\n                                        <TableBody>\n                                            <TableRow>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.md5}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.sha1}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.agent_file_id}</Typography></TableCell>\n                                                <TableCell><Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.operator.username}</Typography></TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Link style={{wordBreak: \"break-all\"}} underline=\"always\" target=\"_blank\" href={\"/new/task/\" + props.task.id}>{props.task.id}</Link>\n                                                    )}\n                                                    \n                                                </TableCell>\n                                                <TableCell>{props.task !== null ? (<Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.comment}</Typography>) : (null)}</TableCell>\n                                                <TableCell>\n                                                    {props.task === null ? (null) : (\n                                                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                                                    )}\n                                                </TableCell>\n                                            </TableRow>\n                                        </TableBody>\n                                    </Table>\n                                </TableContainer>\n                                </Box>\n                            </Collapse>\n                        </TableCell>\n                    </TableRow>\n            ) : (null) }\n        </React.Fragment>\n    )\n}","import React, { useEffect } from 'react';\nimport {Button, IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog, MythicViewJSONAsTableDialog } from '../../MythicComponents/MythicDialog';\nimport {DownloadHistoryDialog} from '../Callbacks/DownloadHistoryDialog';\nimport HistoryIcon from '@material-ui/icons/History';\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst updateFileComment = gql`\nmutation updateCommentMutation($filebrowserobj_id: Int!, $comment: String!){\n    update_filebrowserobj_by_pk(pk_columns: {id: $filebrowserobj_id}, _set: {comment: $comment}) {\n        comment\n        id\n    }\n}\n`;\n\nexport function FileBrowserTable(props){\n    const [files, setFiles] = React.useState([]);\n    useEffect( () => {\n        setFiles([...props.files]);\n    }, [props.files]);\n    const onEditComment = ({id, comment}) => {\n        const updates = files.map( (file) => {\n            if(file.id === id){\n                return {...file, comment}\n            }else{\n                return {...file}\n            }\n        });\n        setFiles(updates);\n    }\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Host / Path</TableCell>\n                        <TableCell >Modify Time</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Permissions</TableCell>\n                        <TableCell style={{width: \"7rem\"}}>Downloads</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {files.map( (op) => (\n                    <FileBrowserTableRow\n                        key={\"file\" + op.id}\n                        onEditComment={onEditComment}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction FileBrowserTableRow(props){\n    const [viewPermissionsDialogOpen, setViewPermissionsDialogOpen] = React.useState(false);\n    const [fileHistoryDialogOpen, setFileHistoryDialogOpen] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateFileComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_filebrowserobj_by_pk)\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {filebrowserobj_id: props.id, comment: comment}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewPermissionsDialogOpen} \n                    onClose={()=>{setViewPermissionsDialogOpen(false);}} \n                    innerDialog={<MythicViewJSONAsTableDialog title=\"View Permissions Data\" leftColumn=\"Permission\" rightColumn=\"Value\" value={props.permissions} onClose={()=>{setViewPermissionsDialogOpen(false);}} />}\n                    />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={fileHistoryDialogOpen} \n                    onClose={()=>{setFileHistoryDialogOpen(false);}} \n                    innerDialog={<DownloadHistoryDialog title=\"Download History\" value={props.filemeta} onClose={()=>{setFileHistoryDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit File Browser Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.host}</Typography>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", textDecoration: props.deleted ? \"strike-through\" : \"\"}}>{props.full_path_text}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.modify_time}</Typography>\n                </TableCell>\n                <TableCell><IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton><Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography></TableCell>\n                <TableCell>\n                    <Button color=\"primary\" variant=\"outlined\" onClick={() => setViewPermissionsDialogOpen(true)}><PlaylistAddCheckIcon /></Button>\n                </TableCell>\n                <TableCell>\n                    {props.filemeta.length > 0 ? (\n                        <Tooltip title=\"View Download History and Download Files\">\n                            <Button color=\"primary\" variant=\"contained\" onClick={() => setFileHistoryDialogOpen(true)}><HistoryIcon /></Button>\n                        </Tooltip>\n                    ): (null)}\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {FileMetaDownloadTable, FileMetaUploadTable, FileMetaScreenshotTable} from './FileMetaTable';\nimport {FileBrowserTable} from './FileBrowserTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst fileMetaFragment = gql`\nfragment filemetaData on filemeta{\n    agent_file_id\n    chunk_size\n    chunks_received\n    complete\n    deleted\n    filename_text\n    full_remote_path_text\n    host\n    id\n    is_download_from_agent\n    is_payload\n    is_screenshot\n    md5\n    operator {\n        id\n        username\n    }\n    comment\n    sha1\n    timestamp\n    total_chunks\n    task {\n        id\n        comment\n        command {\n            cmd\n            id\n        }\n    }\n}\n`;\nconst fileBrowserFragment = gql`\nfragment filebrowserData on filebrowserobj{\n    comment\n    deleted\n    full_path_text\n    host\n    id\n    is_file\n    modify_time\n    permissions\n    size\n    filemeta {\n        id\n        agent_file_id\n        chunks_received\n        complete\n        total_chunks\n        timestamp\n        task {\n            id\n            comment\n        }\n    }\n}\n`;\nconst fetchLimit = 20;\nconst filenameFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaUploadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaDownloadQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst filenameFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {full_path_text: {_ilike: $filename}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, full_path_text: {_ilike: $filename}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst hashFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaUploadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaUploadSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaUploadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: false}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaDownloadSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaDownloadQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: false}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileBrowserSearch = gql`\n${fileBrowserFragment}\nquery filenameFileBrowserQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filebrowserobj_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    filebrowserobj(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...filebrowserData\n    }\n  }\n`;\nconst filenameFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery filenameFileMetaScreenshotQuery($operation_id: Int!, $filename: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true},task_id: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{filename_text: {_ilike: $filename}}, {full_remote_path_text: {_ilike: $filename}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst hashFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery hashFileMetaScreenshotQuery($operation_id: Int!, $hash: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, _and: [{_or: [{md5: {_ilike: $hash}}, {sha1: {_ilike: $hash}}]}, {_or: [{task_id: {_is_null: false}}, {is_payload: {_eq: false}}]}], operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nconst commentFileMetaScreenshotSearch = gql`\n${fileMetaFragment}\nquery commentFileMetaScreenshotQuery($operation_id: Int!, $comment: String!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    filemeta_aggregate(distinct_on: id, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      aggregate {\n        count\n      }\n    }\n    filemeta(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}, is_download_from_agent: {_eq: true}, is_screenshot: {_eq: true}}) {\n      ...filemetaData\n    }\n  }\n`;\nexport function SearchTabFilesLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Files\"} iconComponent={<AttachmentIcon />} {...props}/>\n    )\n}\n\nconst SearchTabFilesSearchPanel = (props) => {\n    const theme = useTheme();\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const searchFieldOptions = [\"Filename\", \"Hash\", \"Comment\"];\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const searchLocationOptions = [\"Uploads\", \"Downloads\", \"FileBrowser\", \"Screenshots\"];\n    const [parsedSearch, setParsedSearch] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchLocationChange = (event) => {\n        setSearchLocation(event.target.value);\n        props.onChangeSearchLocation(event.target.value);\n        props.changeSearchParam(\"location\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const handleSearchHostValueChange = (name, value, error) => {\n        setSearchHost(value);\n        props.changeSearchParam(\"host\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchHost, querySearchField, querySearchLocation) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        let adjustedSearchHost = querySearchHost ? querySearchHost : searchHost;\n        let adjustedSearchLocation = querySearchLocation ? querySearchLocation : searchLocation;\n        switch(adjustedSearchField){\n            case \"Filename\":\n                props.onFilenameSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            case \"Hash\":\n                props.onHashSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, searchHost:adjustedSearchHost, offset: 0, adjustedSearchLocation})\n                break;\n            default:\n                break;\n        }\n    }\n    const uploadFile = (file) => {\n        try {\n            let xhr = new XMLHttpRequest();\n            let fd = new FormData();\n            xhr.open(\"POST\", window.location.origin + \"/api/v1.4/files/manual\", true);\n            //xhr.withCredentials = true;\n            xhr.setRequestHeader(\"Authorization\", \"Bearer \" + localStorage.getItem(\"access_token\"));\n            //xhr.setRequestHeader(\"refresh_token\", localStorage.getItem(\"refresh_token\"));\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    try{\n                        let response = JSON.parse(xhr.responseText);\n                        if(response[\"status\"] === \"success\"){\n                            snackActions.success(\"Successfuly hosted file! Now searchable on the 'Uploads' search\");\n                        }else{\n                            snackActions.error(\"Failed to host file! \" + response[\"error\"]);\n                        }\n                    }catch(error){\n                        snackActions.error(\"Failed to process response from upload: \" + error);\n                        console.log(error);\n                    }\n                } else if (xhr.readyState === 4 && (xhr.status === 302 || xhr.status === 405)) {\n                    // either got redirected or try to post/put to a bad path\n                    console.log(\"httpGetAsync was 302 or 405 from url \");\n                    snackActions.error(\"Got HTTP 302 or 405 when trying to host file\");\n                } else if (xhr.readyState === 4) {\n                    console.log(\"httpGetAsync Error with data: \" + fd);\n                    snackActions.error(\"Mythic hit an error trying to hos the file: \" + xhr.status + \": \" + xhr.statusText);\n                }\n            };\n            fd.append(\"upload_file\", file);\n            xhr.send(fd);\n        } catch (error) {\n            snackActions.error(\"HTTP Browser error trying to upload file: \" + error.toString());\n            console.error(\"HTTP Browser error: \" + error.toString());\n        }\n    \n    }\n    const onFileChange = (evt) => {  \n        uploadFile(evt.target.files[0]);\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchHost = \"\";\n            let adjustedSearchField = \"Filename\";\n            let adjustedSearchLocation = \"Downloads\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Filename\");\n                props.onChangeSearchField(\"Filename\");\n                props.changeSearchParam(\"searchField\", \"Filename\");\n            }\n            if(queryParams.has(\"location\") && searchLocationOptions.includes(queryParams.get(\"location\"))){\n                setSearchLocation(queryParams.get(\"location\"));\n                adjustedSearchLocation = queryParams.get(\"location\");\n                props.onChangeSearchLocation(queryParams.get(\"location\"));\n            }\n            if(queryParams.has(\"host\")){\n                setSearchHost(queryParams.get(\"host\"));\n                adjustedSearchHost = queryParams.get(\"host\")\n            }\n            setParsedSearch(!parsedSearch);\n            submitSearch(null, adjustedSearch, adjustedSearchHost, adjustedSearchField, adjustedSearchLocation);\n        }\n    }, [props.value, props.index]);\n    return (\n        <Grid container spacing={1} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={2}>\n                <MythicTextField placeholder=\"Host Name Search...\" value={searchHost}\n                    onChange={handleSearchHostValueChange} onEnter={submitSearch} name=\"Host Name Search...\" />\n            </Grid>\n            <Grid item xs={3}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search File's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n            <FormLabel component=\"legend\">Search Location</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchLocation}\n                    onChange={handleSearchLocationChange}\n                >\n                    {\n                        searchLocationOptions.map((opt, i) => (\n                            <MenuItem key={\"searchlocopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <Button variant=\"contained\" color=\"primary\" component=\"label\">Host File in Mythic <input onChange={onFileChange} type=\"file\" hidden /></Button>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabFilesPanel = (props) =>{\n    const [fileMetaData, setFileMetaData] = React.useState([]);\n    const [fileBrowserData, setFileBrowserData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchHost, setSearchHost] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Filename\");\n    const [searchLocation, setSearchLocation] = React.useState(\"Downloads\");\n    const me = useReactiveVar(meState);\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n    }\n    const onChangeSearchLocation = (field) => {\n        setSearchLocation(field);\n        setFileMetaData([]);\n        setFileBrowserData([]);\n    }\n    const handleFileMetaSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.filemeta_aggregate.aggregate.count);\n        setFileBrowserData([]);\n        setFileMetaData(data.filemeta);\n    }\n    const handleFileBrowserSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.filebrowserobj_aggregate.aggregate.count);\n        setFileBrowserData(data.filebrowserobj);\n        setFileMetaData([]);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getfilenameFileMetaUploadSearch] = useLazyQuery(filenameFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileMetaDownloadSearch] = useLazyQuery(filenameFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileBrowserSearch] = useLazyQuery(filenameFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getfilenameFileMetaScreenshotSearch] = useLazyQuery(filenameFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaUploadSearch] = useLazyQuery(hashFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaDownloadSearch] = useLazyQuery(hashFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [gethashFileMetaScreenshotSearch] = useLazyQuery(hashFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaUploadSearch] = useLazyQuery(commentFileMetaUploadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaDownloadSearch] = useLazyQuery(commentFileMetaDownloadSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileBrowserSearch] = useLazyQuery(commentFileBrowserSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileBrowserSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getcommentFileMetaScreenshotSearch] = useLazyQuery(commentFileMetaScreenshotSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleFileMetaSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onFilenameSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            getfilenameFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            getfilenameFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            getfilenameFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getfilenameFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                filename: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onHashSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            snackActions.dismiss();\n            snackActions.warning(\"FileBrowser doesn't currently track file hashes\");\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            gethashFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            gethashFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            gethashFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                hash: \"%\" + search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onCommentSearch = ({search, searchHost, offset, adjustedSearchLocation}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        let new_search = search;\n        if(search === \"\"){\n            new_search = \"_\";\n        }\n        setSearch(new_search);\n        setSearchHost(searchHost);\n        if(adjustedSearchLocation === \"FileBrowser\"){\n            getcommentFileBrowserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Uploads\"){\n            getcommentFileMetaUploadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else if(adjustedSearchLocation === \"Downloads\"){\n            getcommentFileMetaDownloadSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }else{\n            getcommentFileMetaScreenshotSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                comment: \"%\" + new_search + \"%\",\n                host: \"%\" + searchHost + \"%\"\n            }})\n        }\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, searchHost, offset: 0});\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Filename\":\n                    onFilenameSearch({search, searchHost, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Hash\":\n                    onHashSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                case \"Comments\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit });\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    \n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabFilesSearchPanel onChangeSearchField={onChangeSearchField} onFilenameSearch={onFilenameSearch} value={props.value} index={props.index} queryParams={props.queryParams}\n                onHashSearch={onHashSearch} onCommentSearch={onCommentSearch} onChangeSearchLocation={onChangeSearchLocation} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {fileMetaData.length > 0 ? (\n                    searchLocation === \"Uploads\" ? (<FileMetaUploadTable files={fileMetaData} />) : (searchLocation === \"Downloads\" ? (<FileMetaDownloadTable files={fileMetaData} />) : (<FileMetaScreenshotTable files={fileMetaData} />))\n                ) : (fileBrowserData.length > 0 ? (<FileBrowserTable files={fileBrowserData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                ))}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog, MythicModifyStringDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst updateCredentialComment = gql`\nmutation updateCommentMutation($credential_id: Int!, $comment: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {comment: $comment}) {\n        comment\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialAccount = gql`\nmutation updateAccountMutation($credential_id: Int!, $account: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {account: $account}) {\n        account\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialRealm = gql`\nmutation updateAccountMutation($credential_id: Int!, $realm: String!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {realm: $realm}) {\n        realm\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialCredential = gql`\nmutation updateAccountMutation($credential_id: Int!, $credential: bytea!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {credential_raw: $credential}) {\n        credential_text\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\nconst updateCredentialDeleted = gql`\nmutation updateAccountMutation($credential_id: Int!, $deleted: Boolean!){\n    update_credential_by_pk(pk_columns: {id: $credential_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n        operator {\n            username\n        }\n    }\n}\n`;\n\nexport function CredentialTable(props){\n    const [credentials, setCredentials] = React.useState([]);\n    useEffect( () => {\n        setCredentials([...props.credentials]);\n    }, [props.credentials]);\n    const onEditComment = ({id, comment, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, comment, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditAccount = ({id, account, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, account, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditRealm = ({id, realm, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, realm, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditCredential = ({id, credential_text, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, credential_text, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n    const onEditDeleted = ({id, deleted, operator}) => {\n        const updates = credentials.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted, operator}\n            }else{\n                return {...cred}\n            }\n        });\n        setCredentials(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" >\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >Account</TableCell>\n                        <TableCell >Realm</TableCell>\n                        <TableCell >Credential</TableCell>\n                        <TableCell >Comment</TableCell>\n                        <TableCell >Timestamp</TableCell>\n                        <TableCell >Task / Operator</TableCell>\n                        <TableCell style={{width: \"5rem\"}}>Type</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {credentials.map( (op) => (\n                    <CredentialTableRow\n                        key={\"cred\" + op.id}\n                        onEditComment={onEditComment}\n                        onEditAccount={onEditAccount}\n                        onEditRealm={onEditRealm}\n                        onEditCredential={onEditCredential}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CredentialTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [editCommentDialogOpen, setEditCommentDialogOpen] = React.useState(false);\n    const [editAccountDialogOpen, setEditAccountDialogOpen] = React.useState(false);\n    const [editRealmDialogOpen, setEditRealmDialogOpen] = React.useState(false);\n    const [editCredentialDialogOpen, setEditCredentialDialogOpen] = React.useState(false);\n    const [updateComment] = useMutation(updateCredentialComment, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated comment\");\n            props.onEditComment(data.update_credential_by_pk);\n        }\n    });\n    const [updateAccount] = useMutation(updateCredentialAccount, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated account\");\n            props.onEditAccount(data.update_credential_by_pk);\n        }\n    });\n    const [updateRealm] = useMutation(updateCredentialRealm, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated realm\");\n            props.onEditRealm(data.update_credential_by_pk);\n        }\n    });\n    const [updateCredential] = useMutation(updateCredentialCredential, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated credential\");\n            props.onEditCredential(data.update_credential_by_pk);\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"updated deleted status\");\n            props.onEditDeleted(data.update_credential_by_pk);\n        }\n    });\n    const onSubmitUpdatedComment = (comment) => {\n        updateComment({variables: {credential_id: props.id, comment: comment}})\n    }\n    const onSubmitUpdatedAccount = (account) => {\n        updateAccount({variables: {credential_id: props.id, account: account}})\n    }\n    const onSubmitUpdatedRealm = (realm) => {\n        updateRealm({variables: {credential_id: props.id, realm: realm}})\n    }\n    const onSubmitUpdatedCredential = (credential) => {\n        updateCredential({variables: {credential_id: props.id, credential: credential}})\n    }\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {credential_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCommentDialogOpen} \n                    onClose={()=>{setEditCommentDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Comment\" onSubmit={onSubmitUpdatedComment} value={props.comment} onClose={()=>{setEditCommentDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editAccountDialogOpen} \n                    onClose={()=>{setEditAccountDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Account\" onSubmit={onSubmitUpdatedAccount} value={props.account} onClose={()=>{setEditAccountDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editRealmDialogOpen} \n                    onClose={()=>{setEditRealmDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Realm\" onSubmit={onSubmitUpdatedRealm} value={props.realm} onClose={()=>{setEditRealmDialogOpen(false);}} />}\n                />\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={editCredentialDialogOpen} \n                    onClose={()=>{setEditCredentialDialogOpen(false);}} \n                    innerDialog={<MythicModifyStringDialog title=\"Edit Credential Credential\" onSubmit={onSubmitUpdatedCredential} value={props.credential_text} onClose={()=>{setEditCredentialDialogOpen(false);}} />}\n                />\n                \n                <TableCell>{props.deleted ? (\n                    <Tooltip title=\"Restore Credential for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Delete Credential so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <IconButton onClick={() => setEditAccountDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.account}</Typography>\n                </TableCell>\n                <TableCell >\n                    <IconButton onClick={() => setEditRealmDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.realm}</Typography>\n                </TableCell>\n                <TableCell >\n                    <IconButton onClick={() => setEditCredentialDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.credential_text}</Typography>\n                </TableCell>\n                <TableCell>\n                    <IconButton onClick={() => setEditCommentDialogOpen(true)} size=\"small\" style={{display: \"inline-block\"}}><EditIcon /></IconButton>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.comment}</Typography>\n                    </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.task_id !== null ? (\n                        props.task_id\n                    ): (props.operator.username)}\n                </TableCell>\n                <TableCell>{props.type}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery, useMutation} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Button, Typography } from '@material-ui/core';\nimport {CredentialTable} from './CredentialTable';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CredentialTableNewCredentialDialog} from './CredentialTableNewCredentialDialog';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst credentialFragment = gql`\nfragment credentialData on credential{\n    account\n    comment\n    credential_text\n    id\n    realm\n    type\n    task_id\n    timestamp\n    deleted\n    operator {\n        username\n    }\n}\n`;\nconst fetchLimit = 20;\nconst accountSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $account: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {account: {_ilike: $account}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst realmSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $realm: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {realm: {_ilike: $realm}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst credentialSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $credential: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {credential_text: {_ilike: $credential}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst commentSearch = gql`\n${credentialFragment}\nquery accountQuery($operation_id: Int!, $comment: String!, $offset: Int!, $fetchLimit: Int!) {\n    credential_aggregate(distinct_on: id, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    credential(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {comment: {_ilike: $comment}, operation_id: {_eq: $operation_id}}) {\n      ...credentialData\n    }\n  }\n`;\nconst createCredentialMutation = gql`\n${credentialFragment}\nmutation createCredential($comment: String!, $account: String!, $realm: String!, $type: String!, $credential: bytea!) {\n    insert_credential_one(object: {account: $account, credential_raw: $credential, comment: $comment, realm: $realm, type: $type}) {\n      id\n    }\n  }\n`;\n\nexport function SearchTabCredentialsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Credentials\"} iconComponent={<VpnKeyIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCredentialsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const searchFieldOptions = [\"Account\", \"Realm\", \"Comment\", \"Credential\"];\n    const [createCredentialDialogOpen, setCreateCredentialDialogOpen] = React.useState(false);\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const [createCredential] = useMutation(createCredentialMutation, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.success(\"Successfully created new credential\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to create credential\");\n            console.log(data);\n        }\n    })\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Account\":\n                props.onAccountSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Realm\":\n                props.onRealmSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Comment\":\n                props.onCommentSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Credential\":\n                props.onCredentialSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.OnTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    const onCreateCredential = ({type, account, realm, comment, credential}) => {\n        createCredential({variables: {type, account, realm, comment, credential}})\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Account\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Account\");\n                props.onChangeSearchField(\"Account\");\n                props.changeSearchParam(\"searchField\", \"Account\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={5}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Credential's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n            <Grid item xs={2}>\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={createCredentialDialogOpen} \n                    onClose={()=>{setCreateCredentialDialogOpen(false);}} \n                    innerDialog={<CredentialTableNewCredentialDialog onSubmit={onCreateCredential} onClose={()=>{setCreateCredentialDialogOpen(false);}} />}\n                />\n                <Button size=\"small\" color=\"primary\" onClick={ () => {setCreateCredentialDialogOpen(true);}} variant=\"contained\">New Credential</Button>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCredentialsPanel = (props) =>{\n    const [credentialaData, setCredentialData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Account\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setCredentialData([]);\n    }\n    const handleCredentialSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.credential_aggregate.aggregate.count);\n        setCredentialData(data.credential);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getAccountSearch] = useLazyQuery(accountSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getRealmSearch] = useLazyQuery(realmSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCredentialSearch] = useLazyQuery(credentialSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommentSearch] = useLazyQuery(commentSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCredentialSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onAccountSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getAccountSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            account: \"%\" + search + \"%\",\n        }})\n    }\n    const onRealmSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getRealmSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            realm: \"%\" + search + \"%\",\n        }})\n    }\n    const onCredentialSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCredentialSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            credential: \"%\" + search + \"%\",\n        }})\n    }\n    const onCommentSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommentSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            comment: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: 0});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: 0});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: 0});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Account\":\n                    onAccountSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Realm\":\n                    onRealmSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Credential\":\n                    onCredentialSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Comment\":\n                    onCommentSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabCredentialsSearchPanel onChangeSearchField={onChangeSearchField} onAccountSearch={onAccountSearch} value={props.value} index={props.index}\n                onRealmSearch={onRealmSearch} onCredentialSearch={onCredentialSearch} onCommentSearch={onCommentSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {credentialaData.length > 0 ? (\n                    <CredentialTable credentials={credentialaData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\n\nexport function KeylogsTable(props){\n    const [keylogs, setKeylogs] = React.useState([]);\n    useEffect( () => {\n        const condensed = props.keylogs.reduce( (prev, cur) => {\n            if(prev[cur.user] === undefined){\n                prev[cur.user] = {[cur.task.callback.host]: {[cur.window]: [{...cur}]}}\n            }else if(prev[cur.user][cur.task.callback.host] === \"undefined\"){\n                prev[cur.user][cur.task.callback.host] = {[cur.window]: [{...cur}]}\n            }else if(prev[cur.user][cur.task.callback.host][cur.window] === undefined){\n                prev[cur.user][cur.task.callback.host][cur.window] = [{...cur}];\n            }else{\n                prev[cur.user][cur.task.callback.host][cur.window].push({...cur});\n            }\n            return {...prev}\n        },{})\n        //now that we have it split into a dictionary, we need to split it back out into an array for easy processing\n        let newArrayData = [];\n        for(const [key, value] of Object.entries(condensed)){\n            // key should be a User, Host, or Window\n            let newSecondLevel = [];\n            //console.log(\"key\", key, \"value\", value);\n            for(const [key2, value2] of Object.entries(value)){\n                // key2 should be a Host, User, or Host\n                let newThirdLevel = []\n                //console.log(\"key2\", key2, \"value2\", value2);\n                for( const[key3, value3] of Object.entries(value2)){\n                    // key3 should be Window, Window, or User\n                    // value3 should always be an array of keylog entries so we can get the actual keystrokes\n                    //console.log(\"key3\", key3, \"value3\", value3);\n                    newThirdLevel.push({\"name\": key3, \"value\": value3});\n                }\n                //console.log(\"newThirdLevel\", newThirdLevel);\n                newSecondLevel.push({\"name\": key2, \"value\": newThirdLevel});\n            }\n            newArrayData.push({\"name\": key, \"value\": newSecondLevel});\n        }\n        //console.log(newArrayData);\n        setKeylogs([...newArrayData]);\n    }, [props.keylogs]);\n//k0[\"name\"]\n    return (\n        <Grid container spacing={0} direction=\"row\" columns={12}>\n            {keylogs.map( k0 => (\n                <React.Fragment key={k0[\"name\"]}>\n                    <Grid item xs={2} style={{borderBottom: \"2px solid grey\"}}>{k0[\"name\"]}</Grid>\n                    <Grid container item spacing={0} xs={10} style={{borderBottom: \"2px solid grey\"}}>\n                        {k0.value.map( (k1, k1i) => (\n                            <React.Fragment key={k0[\"name\"] + k1[\"name\"]}>\n                                <Grid item xs={2} style={{borderBottom: k1i + 1 !== k0.value.length ? \"2px solid grey\": \"\"}}>{k1[\"name\"]}</Grid>\n                                <Grid container item spacing={0} xs={10} style={{borderBottom: k1i + 1 !== k0.value.length ? \"2px solid grey\" : \"\"}}>\n                                    {k1.value.map( (k2, k2i) => (\n                                        <React.Fragment key={k0[\"name\"] + k1[\"name\"] + k2[\"name\"]}>\n                                            <Grid item xs={2} style={{borderBottom: k2i + 1 !== k1.value.length ? \"2px solid grey\" : \"\"}}> {k2[\"name\"]} </Grid>\n                                            <Grid container item spacing={0} xs={10} style={{borderBottom: k2i + 1 !== k1.value.length ? \"2px solid grey\": \"\"}}>\n                                                <Grid item xs={12}>\n                                                    {k2.value.map( (k3, k3i) => (\n                                                        <span key={k0[\"name\"] + k1[\"name\"] + k2[\"name\"] + k3i}>{k3.keystrokes_text}</span>\n                                                    ))}\n                                                </Grid>\n                                            </Grid>\n                                        </React.Fragment>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>\n                        ))}\n                    </Grid>\n                </React.Fragment>\n            ))}\n        </Grid>\n    )\n}\n\n/*\n    <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{toLocalTime(props.timestamp, me.user.view_utc_time)}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.task.callback.host}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", maxWidth: \"40rem\"}}>{props.keystrokes_text}</Typography>\n                </TableCell>\n*/\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {KeylogsTable} from './KeylogsTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst keylogFragment = gql`\nfragment keylogData on keylog{\n    keystrokes_text\n    task {\n        id\n        callback {\n            host\n            id\n        }\n    }\n    user\n    window\n    timestamp\n    id\n}\n`;\nconst fetchLimit = 200;\nconst keylogSearch = gql`\n${keylogFragment}\nquery keylogQuery($operation_id: Int!, $keylog: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {keystrokes_text: {_ilike: $keylog}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userUniqueSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: user, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: user, offset: $offset, order_by: {user: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst userSearch = gql`\n${keylogFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {user: {_ilike: $user}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst programUniqueSearch = gql`\n${keylogFragment}\nquery programQuery($operation_id: Int!, $program: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: window, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: window, offset: $offset, order_by: {window: desc}, where: {window: {_ilike: $program}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\nconst hostSearch = gql`\n${keylogFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    keylog_aggregate(distinct_on: id, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    keylog(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {host: {_ilike: $host}}}, operation_id: {_eq: $operation_id}}) {\n      ...keylogData\n    }\n  }\n`;\n\nexport function SearchTabKeylogsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Keylogs\"} iconComponent={<KeyboardIcon />} {...props}/>\n    )\n}\n\nconst SearchTabKeylogsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const searchFieldOptions = [\"Keystroke\", \"User\", \"Program\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Keystroke\":\n                props.onKeylogSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Program\":\n                props.onProgramSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Keystroke\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Keystroke\");\n                props.onChangeSearchField(\"Keystroke\");\n                props.changeSearchParam(\"searchField\", \"Keystroke\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Keylog's</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabKeylogsPanel = (props) =>{\n    const [keylogData, setKeylogData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Keystroke\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setKeylogData([]);\n    }\n    const handleKeylogSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.keylog_aggregate.aggregate.count);\n        setKeylogData(data.keylog);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getKeylogSearch] = useLazyQuery(keylogSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getUserUniqueSearch] = useLazyQuery(userUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique User\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramSearch] = useLazyQuery(programSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getProgramUniqueSearch] = useLazyQuery(programUniqueSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.keylog_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Results\");\n            }else{\n                snackActions.success(\"Showing One Entry for Each Unique Program\");\n            }\n            setTotalCount(data.keylog_aggregate.aggregate.count);\n            setKeylogData(data.keylog);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleKeylogSearchResults,\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for search\");\n            console.log(data);\n        }\n    })\n    const onKeylogSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getKeylogSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            keylog: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getUserUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%_%\",\n            }})\n        }else{\n            getUserSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                user: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onProgramSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        if(search === \"\"){\n            getProgramUniqueSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%_%\",\n            }})\n        }else{\n            getProgramSearch({variables:{\n                operation_id: me.user.current_operation_id,\n                offset: offset,\n                fetchLimit: fetchLimit,\n                program: \"%\" + search + \"%\",\n            }})\n        }\n        \n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: 0});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Keystroke\":\n                    onKeylogSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Program\":\n                    onProgramSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabKeylogsSearchPanel onChangeSearchField={onChangeSearchField} onKeylogSearch={onKeylogSearch} value={props.value} index={props.index}\n                onUserSearch={onUserSearch} onProgramSearch={onProgramSearch} onHostSearch={onHostSearch} changeSearchParam={props.changeSearchParam}/>\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {keylogData.length > 0 ? (\n                    <KeylogsTable keylogs={keylogData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport {useQuery, gql, useMutation} from '@apollo/client';\n\nconst updateCommentMutation = gql`\nmutation updateComment ($token_id: Int!, $description: String) {\n  update_token_by_pk(pk_columns: {id: $token_id}, _set: {description: $description}) {\n    description\n    id\n  }\n}\n`;\nconst getCommentQuery = gql`\nquery getCommentQuery ($token_id: Int!) {\n  token_by_pk(id: $token_id) {\n    description\n    id\n  }\n}\n`;\n\nexport function TokenDescriptionDialog(props) {\n    const [comment, setComment] = useState(\"\");\n    useQuery(getCommentQuery, {\n        variables: {token_id: props.token_id},\n        onCompleted: data => {\n            setComment(data.token_by_pk.description)\n        },\n        fetchPolicy: \"network-only\"\n    });\n    const [updateComment] = useMutation(updateCommentMutation, {\n        onCompleted: (data) => {\n          console.log('udpated');\n          props.onClose();\n        },\n        onError: (data) => {\n          console.error(data);\n          props.onClose();\n        }\n        \n    });\n    const onCommitSubmit = () => {\n        updateComment({variables: {token_id: props.token_id, description: comment}});\n        \n    }\n    const onChange = (name, value, error) => {\n        setComment(value);\n    }\n  \n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Edit Token Description</DialogTitle>\n        <DialogContent dividers={true}>\n            <MythicTextField autoFocus onEnter={onCommitSubmit} onChange={onChange} value={comment} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onCommitSubmit} variant=\"contained\" color=\"secondary\">\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport EditIcon from '@material-ui/icons/Edit';\nimport {TaskTokenDialog} from '../Callbacks/TaskTokenDialog';\nimport {TokenDescriptionDialog} from './TokenDescriptionDialog';\n\nconst updateCredentialDeleted = gql`\nmutation updateCredentialDeletedMutation($token_id: Int!, $deleted: Boolean!){\n    update_token_by_pk(pk_columns: {id: $token_id}, _set: {deleted: $deleted}) {\n        deleted\n        id\n    }\n}\n`;\nconst updateCallbacksOfDeletedToken = gql`\nmutation updateCallbacksOfDeletedTokenMutation($token_id: Int!, $deleted: Boolean!){\n    update_callbacktoken(where: {token_id: {_eq: $token_id}}, _set: {deleted: $deleted}) {\n        affected_rows\n    }\n}\n`;\n\nexport function TokenTable(props){\n    const [tokens, setTokens] = React.useState([]);\n    useEffect( () => {\n        setTokens([...props.tokens]);\n    }, [props.credentials]);\n\n    const onEditDeleted = ({id, deleted}) => {\n        const updates = tokens.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, deleted}\n            }else{\n                return {...cred}\n            }\n        });\n        setTokens(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Delete</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Groups</TableCell>\n                        <TableCell >TokenId</TableCell>\n                        <TableCell >Logon Session</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callbacks With Handles</TableCell>\n                        <TableCell >Host</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {tokens.map( (op) => (\n                    <TokenTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction TokenTableRow(props){\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n    const [viewTokenDialog, setViewTokenDialog] = React.useState(false);\n    const [editDescriptionDialog, setEditDescriptionDialog] = React.useState(false);\n    const [updateCallbackTokensDeleted] = useMutation(updateCallbacksOfDeletedToken, {\n        onCompleted: (data) => {\n            snackActions.success(\"Removed token from callback\");\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const [updateDeleted] = useMutation(updateCredentialDeleted, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated deleted status\");\n            if(props.callbacktokens !== null && !props.deleted){\n                //token was deleted, make sure to delete associated callback tokens too\n                updateCallbackTokensDeleted({variables: {token_id: props.id, deleted: true}})\n            }\n            props.onEditDeleted(data.update_token_by_pk);\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {token_id: props.id, deleted: !props.deleted}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.deleted ? \"Restore\" : \"Remove\" }/>\n                \n                <TableCell>{props.deleted ? (\n                    <Tooltip title=\"Restore Token for use in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Delete Token so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.User}</Typography>\n                    \n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.Groups}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.TokenId}</Typography>\n                    <Tooltip title=\"View Token Information\"><IconButton size=\"small\" color=\"primary\" onClick={()=>{setViewTokenDialog(true);}}><ConfirmationNumberIcon/></IconButton></Tooltip>\n                    <MythicDialog fullWidth={true} maxWidth=\"md\" open={viewTokenDialog} \n                        onClose={()=>{setViewTokenDialog(false);}} \n                        innerDialog={<TaskTokenDialog token_id={props.id} onClose={()=>{setViewTokenDialog(false);}} />}\n                    />\n                </TableCell>\n                <TableCell>\n                    {props.logonsession === null ? (\n                        <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>No Logon Session Data</Typography>\n                    ) : (\n                        <React.Fragment>\n                            {props.logonsession.LogonId} {props.logonsession.LogonType !== null ? (\" (\" + props.logonsession.LogonType + \")\") : (null)}\n                        </React.Fragment>\n                    )}\n                    </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                    <IconButton onClick={() => setEditDescriptionDialog(true)} size=\"small\"><EditIcon /></IconButton>\n                        <MythicDialog fullWidth={true} maxWidth=\"md\" open={editDescriptionDialog} \n                            onClose={()=>{setEditDescriptionDialog(false);}} \n                            innerDialog={<TokenDescriptionDialog token_id={props.id} onClose={()=>{setEditDescriptionDialog(false);}}/>}\n                        />\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>{props.callbacktokens?.map( (cbt) => (\n                        cbt.callback_id\n                    )) || null\n                }</TableCell>\n                <TableCell>{props.host}</TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {TokenTable} from './TokenTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst tokenFragment = gql`\nfragment tokenData on token{\n    id\n    User\n    Groups\n    TokenId\n    logonsession {\n        LogonType\n        UserName\n        LogonDomain\n        id\n        LogonId\n        authenticationpackages(where: {deleted: {_eq: false}}) {\n            Name\n            id\n        }\n    }\n    task {\n        id\n    }\n    host\n    deleted\n    description\n    callbacktokens(where: {deleted: {_eq: false}}) {\n        callback_id\n        id\n    }\n}\n`;\nconst fetchLimit = 20;\nconst userGroupSearch = gql`\n${tokenFragment}\nquery usergroupQuery($operation_id: Int!, $name: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{Groups: {_ilike: $name}}, {User: {_ilike: $name}}, {logonsession: {UserName: {_ilike: $name}}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst SIDSearch = gql`\n${tokenFragment}\nquery sidQuery($operation_id: Int!, $sid: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback: {operation_id: {_eq: $operation_id}}}, _or: [{AppContainerSid: {_ilike: $sid}}, {LogonSid: {_ilike: $sid}}, {Owner: {_ilike: sid}}, {PrimaryGroup: {_ilike: sid}}, {DefaultDacl: {_ilike: sid}}]}) {\n      ...tokenData\n    }\n}\n`;\nconst logonTypeSearch = gql`\n${tokenFragment}\nquery logontypeQuery($operation_id: Int!, $logontype: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {logonsession: {LogonType: { _ilike: $logontype}}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n  }\n`;\nconst hostSearch = gql`\n${tokenFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    token_aggregate(distinct_on: id, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      aggregate {\n        count\n      }\n    }\n    token(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, task: {callback: {operation_id: {_eq: $operation_id}}}}) {\n      ...tokenData\n    }\n}\n`;\nexport function SearchTabTokensLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Tokens\"} iconComponent={<ConfirmationNumberIcon />} {...props}/>\n    )\n}\n\nconst SearchTabTokensSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const searchFieldOptions = [\"User/Group\", \"SID\", \"LogonType\", \"Host\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"User/Group\":\n                props.onUserGroupSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"SID\":\n                props.onSIDSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"LogonType\":\n                props.onLogonTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User/Group\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User/Group\");\n                props.onChangeSearchField(\"User/Group\");\n                props.changeSearchParam(\"searchField\", \"User/Group\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={2}>\n                <FormLabel component=\"legend\">Search Tokens by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabTokensPanel = (props) =>{\n    const [tokenData, setTokenData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User/Group\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setTokenData([]);\n    }\n    const handleTokenSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.token_aggregate.aggregate.count);\n        setTokenData(data.token);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getUserGroupSearch] = useLazyQuery(userGroupSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getSIDSearch] = useLazyQuery(SIDSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getLogonTypeSearch] = useLazyQuery(logonTypeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleTokenSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onUserGroupSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserGroupSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            name: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onLogonTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getLogonTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            logontype: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onSIDSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getSIDSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            sid: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: 0});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: 0});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User/Group\":\n                    onUserGroupSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"SID\":\n                    onSIDSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"LogonType\":\n                    onLogonTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <SearchTabTokensSearchPanel onChangeSearchField={onChangeSearchField} onUserGroupSearch={onUserGroupSearch} value={props.value} index={props.index}\n                onLogonTypeSearch={onLogonTypeSearch} onHostSearch={onHostSearch} onSIDSearch={onSIDSearch} changeSearchParam={props.changeSearchParam} />\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {tokenData.length > 0 ? (\n                    <TokenTable tokens={tokenData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { toLocalTime } from '../../utilities/Time';\nimport {  useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport RestoreFromTrashIcon from '@material-ui/icons/RestoreFromTrash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {toggleHideCallbackMutations} from '../Callbacks/CallbackMutations';\n\nexport function CallbackSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, active}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\">\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"auto\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Hide</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >IP</TableCell>\n                        <TableCell >Process Name</TableCell>\n                        <TableCell >ID</TableCell>\n                        <TableCell>Checkin Times</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const me = useReactiveVar(meState);\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(toggleHideCallbackMutations, {\n        onCompleted: (data) => {\n            snackActions.success(\"Updated active status\");\n            props.onEditDeleted({id: props.id, active: !props.active});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id, active: !props.active}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={props.active ? \"Hide\" : \"Restore\" }/>\n                \n                <TableCell>{!props.active ? (\n                    <Tooltip title=\"Restore Callback for Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.success.main}} variant=\"contained\"><RestoreFromTrashIcon/></IconButton>\n                    </Tooltip>\n                ) : (\n                    <Tooltip title=\"Hide Callback so it can't be used in Tasking\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                    {props.ip}\n                </TableCell>\n                <TableCell>\n                    {props.process_name}\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Initial: {toLocalTime(props.init_callback, me.user.view_utc_time)}\n                    </Typography>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>\n                        Latest: {toLocalTime(props.last_checkin, me.user.view_utc_time)}\n                    </Typography>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {CallbackSearchTable} from './CallbackSearchTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n}\n`;\nconst fetchLimit = 50;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $user: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, user: {_ilike: $user}}) {\n      ...callbackData\n    }\n}\n`;\nconst hostSearch = gql`\n${callbackFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst domainSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $domain: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {domain: {_ilike: $domain}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst descriptionSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $description: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {description: {_ilike: $description}, operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\nconst ipSearch = gql`\n${callbackFragment}\nquery domainQuery($operation_id: Int!, $ip: String!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {_or: [{ip: {_ilike: $ip}}, {external_ip: {_ilike: $ip}}], operation_id: {_eq: $operation_id}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabCallbacksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Callbacks\"} iconComponent={<PhoneCallbackIcon />} {...props}/>\n    )\n}\n\nconst SearchTabCallbacksSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const searchFieldOptions = [\"User\", \"Domain\", \"Host\", \"Description\", \"IP\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"User\":\n                props.onUserSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Domain\":\n                props.onDomainSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Description\":\n                props.onDescriptionSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"IP\":\n                props.onIPSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"User\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            console.log(queryParams.get(\"searchField\"));\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"User\");\n                props.onChangeSearchField(\"User\");\n                props.changeSearchParam(\"searchField\", \"User\");\n            }\n            submitSearch(null, adjustedSearch,  adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Callbacks by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabCallbacksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"User\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setCallbackData([]);\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.callback_aggregate.aggregate.count);\n        setCallbackData(data.callback);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getUserSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getDomainSearch] = useLazyQuery(domainSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getDescriptionSearch] = useLazyQuery(descriptionSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getIPSearch] = useLazyQuery(ipSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onUserSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getUserSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            user: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDomainSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDomainSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            domain: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onDescriptionSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getDescriptionSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            description: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onIPSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getIPSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            ip: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: 0});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: 0});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"User\":\n                    onUserSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Domain\":\n                    onDomainSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Description\":\n                    onDescriptionSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"IP\":\n                    onIPSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n                <SearchTabCallbacksSearchPanel onChangeSearchField={onChangeSearchField} onUserSearch={onUserSearch} onIPSearch={onIPSearch} value={props.value} index={props.index}\n                    onDomainSearch={onDomainSearch} onHostSearch={onHostSearch} onDescriptionSearch={onDescriptionSearch} changeSearchParam={props.changeSearchParam}/>\n                <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                    {callbackData.length > 0 ? (\n                        <CallbackSearchTable callbacks={callbackData} />) : (\n                        <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                    )}\n                </div>\n                <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingTop: \"5px\", paddingBottom: \"5px\"}}>\n                    <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                            siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                        <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n                </div>\n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nexport function ArtifactTable(props){\n    const [artifacts, setArtifacts] = React.useState([]);\n    useEffect( () => {\n        setArtifacts([...props.artifacts]);\n    }, [props.artifacts]);\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{}}>\n            <Table stickyHeader size=\"small\" style={{}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell >Type</TableCell>\n                        <TableCell >Command</TableCell>\n                        <TableCell >Task</TableCell>\n                        <TableCell >Callback</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {artifacts.map( (op) => (\n                    <ArtifactTableRow\n                        key={\"cred\" + op.id}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction ArtifactTableRow(props){\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.artifact.name}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.task.command.cmd}</Typography>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/task/\" + props.task.id}>\n                            {props.task.id}\n                    </Link>\n                </TableCell>\n                <TableCell>\n                    <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.task.callback_id}>\n                            {props.task.callback_id}\n                    </Link>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.host}</Typography>\n                </TableCell>\n                <TableCell>\n                <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.artifact_instance_text}</Typography>\n                </TableCell>\n              \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React from 'react';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Grid from '@material-ui/core/Grid';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {useTheme} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {ArtifactTable} from './ArtifactTable';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst artifactFragment = gql`\nfragment artifactData on taskartifact{\n    id\n    artifact_instance_text\n    host\n    id\n    timestamp\n    artifact {\n        name\n        description\n    }\n    task {\n        id\n        callback_id\n        command {\n            cmd\n        }\n    }\n}\n`;\nconst fetchLimit = 100;\nconst artifactSearch = gql`\n${artifactFragment}\nquery artifactQuery($operation_id: Int!, $artifact: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, artifact_instance_text: {_ilike: $artifact}}) {\n      ...artifactData\n    }\n}\n`;\nconst hostSearch = gql`\n${artifactFragment}\nquery hostQuery($operation_id: Int!, $host: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {host: {_ilike: $host}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst commandSearch = gql`\n${artifactFragment}\nquery commandQuery($operation_id: Int!, $command: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {command: {cmd: {_ilike: $command}}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst typeSearch = gql`\n${artifactFragment}\nquery typeQuery($operation_id: Int!, $type: String!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {artifact: {name: {_ilike: $type}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst taskSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $task_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task_id: {_eq: $task_id}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\nconst callbackSearch = gql`\n${artifactFragment}\nquery taskQuery($operation_id: Int!, $callback_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    taskartifact_aggregate(distinct_on: id, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}){\n      aggregate {\n        count\n      }\n    }\n    taskartifact(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {task: {callback_id: {_eq: $callback_id}}, operation_id: {_eq: $operation_id}}) {\n      ...artifactData\n    }\n}\n`;\n\nexport function SearchTabArtifactsLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"Artifacts\"} iconComponent={<FingerprintIcon />} {...props}/>\n    )\n}\n\nconst SearchTabArtifactsSearchPanel = (props) => {\n    const theme = useTheme();\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const searchFieldOptions = [\"Artifact\", \"Command\", \"Host\", \"Type\", \"Task\", \"Callback\"];\n    const handleSearchFieldChange = (event) => {\n        setSearchField(event.target.value);\n        props.onChangeSearchField(event.target.value);\n        props.changeSearchParam(\"searchField\", event.target.value);\n    }\n    const handleSearchValueChange = (name, value, error) => {\n        setSearch(value);\n        props.changeSearchParam(\"search\", value);\n    }\n    const submitSearch = (event, querySearch, querySearchField) => {\n        let adjustedSearchField = querySearchField ? querySearchField : searchField;\n        let adjustedSearch = querySearch ? querySearch : search;\n        switch(adjustedSearchField){\n            case \"Artifact\":\n                props.onArtifactSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Command\":\n                props.onCommandSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Host\":\n                props.onHostSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Type\":\n                props.onTypeSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Task\":\n                props.onTaskSearch({search:adjustedSearch, offset: 0})\n                break;\n            case \"Callback\":\n                props.onCallbackSearch({search:adjustedSearch, offset: 0})\n                break;\n            default:\n                break;\n        }\n    }\n    React.useEffect(() => {\n        if(props.value === props.index){\n            let queryParams = new URLSearchParams(window.location.search);\n            let adjustedSearch = \"\";\n            let adjustedSearchField = \"Artifact\";\n            if(queryParams.has(\"search\")){\n                setSearch(queryParams.get(\"search\"));\n                adjustedSearch = queryParams.get(\"search\");\n            }\n            if(queryParams.has(\"searchField\") && searchFieldOptions.includes(queryParams.get(\"searchField\"))){\n                setSearchField(queryParams.get(\"searchField\"));\n                props.onChangeSearchField(queryParams.get(\"searchField\"));\n                adjustedSearchField = queryParams.get(\"searchField\");\n            }else{\n                setSearchField(\"Artifact\");\n                props.onChangeSearchField(\"Artifact\");\n                props.changeSearchParam(\"searchField\", \"Artifact\");\n            }\n            submitSearch(null, adjustedSearch, adjustedSearchField);\n        }\n    }, [props.value, props.index])\n    return (\n        <Grid container spacing={2} style={{paddingTop: \"10px\", paddingLeft: \"10px\", maxWidth: \"100%\"}}>\n            <Grid item xs={6}>\n                <MythicTextField placeholder=\"Search...\" value={search}\n                    onChange={handleSearchValueChange} onEnter={submitSearch} name=\"Search...\" InputProps={{\n                        endAdornment: \n                        <React.Fragment>\n                            <Tooltip title=\"Search\">\n                                <IconButton onClick={submitSearch}><SearchIcon style={{color: theme.palette.info.main}}/></IconButton>\n                            </Tooltip>\n                        </React.Fragment>,\n                        style: {padding: 0}\n                    }}/>\n            </Grid>\n            <Grid item xs={6}>\n                <FormLabel component=\"legend\">Search Artifacts by</FormLabel>\n                <Select\n                    style={{marginBottom: \"10px\", width: \"15rem\", marginTop: \"5px\"}}\n                    value={searchField}\n                    onChange={handleSearchFieldChange}\n                >\n                    {\n                        searchFieldOptions.map((opt, i) => (\n                            <MenuItem key={\"searchopt\" + opt} value={opt}>{opt}</MenuItem>\n                        ))\n                    }\n                </Select>\n            </Grid>\n        </Grid>\n    )\n}\nexport const SearchTabArtifactsPanel = (props) =>{\n    const [artifactData, setArtifactData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const [search, setSearch] = React.useState(\"\");\n    const [searchField, setSearchField] = React.useState(\"Artifact\");\n    const me = useReactiveVar(meState);\n\n    const onChangeSearchField = (field) => {\n        setSearchField(field);\n        setArtifactData([]);\n    }\n    const handleCallbackSearchResults = (data) => {\n        snackActions.dismiss();\n        setTotalCount(data.taskartifact_aggregate.aggregate.count);\n        setArtifactData(data.taskartifact);\n    }\n    const handleCallbackSearchFailure = (data) => {\n        snackActions.dismiss();\n        snackActions.error(\"Failed to fetch data for search\");\n        console.log(data);\n    }\n    const [getArtifactSearch] = useLazyQuery(artifactSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCommandSearch] = useLazyQuery(commandSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getTypeSearch] = useLazyQuery(typeSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getHostSearch] = useLazyQuery(hostSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getTaskSearch] = useLazyQuery(taskSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const [getCallbackSearch] = useLazyQuery(callbackSearch, {\n        fetchPolicy: \"no-cache\",\n        onCompleted: handleCallbackSearchResults,\n        onError: handleCallbackSearchFailure\n    })\n    const onArtifactSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getArtifactSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            artifact: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onCommandSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getCommandSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            command: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onHostSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getHostSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            host: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTypeSearch = ({search, offset}) => {\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        let new_search = search;\n        if(new_search === \"\"){\n            new_search = \"_\";\n        }\n        getTypeSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            type: \"%\" + new_search + \"%\",\n        }})\n    }\n    const onTaskSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a task number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getTaskSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            task_id: parseInt(search),\n        }})\n    }\n    const onCallbackSearch = ({search, offset}) => {\n        if(search === \"\"){\n            snackActions.warning(\"Must specify a callback number\");\n            return;\n        }\n        snackActions.info(\"Searching...\", {persist:true});\n        setSearch(search);\n        getCallbackSearch({variables:{\n            operation_id: me.user.current_operation_id,\n            offset: offset,\n            fetchLimit: fetchLimit,\n            callback_id: search,\n        }})\n    }\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: 0});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: 0});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: 0});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: 0});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: 0});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: 0});\n                    break;\n                default:\n                    break;\n            }\n            \n        }else{\n            switch(searchField){\n                case \"Artifact\":\n                    onArtifactSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Command\":\n                    onCommandSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Type\":\n                    onTypeSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Host\":\n                    onHostSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Task\":\n                    onTaskSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                case \"Callback\":\n                    onCallbackSearch({search, offset: (value - 1) * fetchLimit});\n                    break;\n                default:\n                    break;\n            }\n            \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n                <SearchTabArtifactsSearchPanel onChangeSearchField={onChangeSearchField} onArtifactSearch={onArtifactSearch} onTaskSearch={onTaskSearch} value={props.value} index={props.index}\n                        onCommandSearch={onCommandSearch} onHostSearch={onHostSearch} onTypeSearch={onTypeSearch} onCallbackSearch={onCallbackSearch} changeSearchParam={props.changeSearchParam}/>\n         \n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {artifactData.length > 0 ? (\n                    <ArtifactTable artifacts={artifactData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingTop: \"5px\", paddingBottom: \"10px\"}}>\n                <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n                \n        </MythicTabPanel>\n    )\n}","import React, { useEffect } from 'react';\nimport {IconButton, Typography, Link} from '@material-ui/core';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {MythicConfirmDialog} from '../../MythicComponents/MythicConfirmDialog';\nimport { gql, useMutation } from '@apollo/client';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useTheme} from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst stopSocks = gql`\nmutation StopSocksMutation($callback_id: Int!){\n    stop_socks(callback_id: $callback_id){\n        status\n        error\n    }\n}\n`;\n\nexport function SocksSearchTable(props){\n    const [callbacks, setCallbacks] = React.useState([]);\n    useEffect( () => {\n        setCallbacks([...props.callbacks]);\n    }, [props.callbacks]);\n\n    const onEditDeleted = ({id, active}) => {\n        const updates = callbacks.map( (cred) => {\n            if(cred.id === id){\n                return {...cred, port: null}\n            }else{\n                return {...cred}\n            }\n        });\n        setCallbacks(updates);\n    }\n\n    return (\n        <TableContainer component={Paper} className=\"mythicElement\" style={{height: \"calc(78vh)\"}}>\n            <Table stickyHeader size=\"small\" style={{\"maxWidth\": \"100%\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"5rem\"}}>Stop</TableCell>\n                        <TableCell >User</TableCell>\n                        <TableCell >Domain</TableCell>\n                        <TableCell >Host</TableCell>\n                        <TableCell >Description</TableCell>\n                        <TableCell >ID</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                \n                {callbacks.map( (op) => (\n                    <CallbackSearchTableRow\n                        key={\"cred\" + op.id}\n                        onEditDeleted={onEditDeleted}\n                        {...op}\n                    />\n                ))}\n                </TableBody>\n            </Table>\n        </TableContainer>\n    )\n}\n\nfunction CallbackSearchTableRow(props){\n    const theme = useTheme();\n    const [openDeleteDialog, setOpenDeleteDialog] = React.useState(false);\n\n    const [updateDeleted] = useMutation(stopSocks, {\n        onCompleted: (data) => {\n            snackActions.success(\"Stopped Socks on that Port\");\n            props.onEditDeleted({id: props.id});\n        },\n        onError: (data) => {\n            snackActions.error(\"Operation not allowed\");\n        }\n    });\n    const onAcceptDelete = () => {\n        updateDeleted({variables: {callback_id: props.id}})\n    }\n    return (\n        <React.Fragment>\n            <TableRow hover>\n                <MythicConfirmDialog onClose={() => {setOpenDeleteDialog(false);}} onSubmit={onAcceptDelete} open={openDeleteDialog} acceptText={\"Stop Socks\"}/>\n                \n                <TableCell>{props.port ? (\n                    <Tooltip title=\"Stop Socks Port on Mythic Server\">\n                        <IconButton size=\"small\" onClick={()=>{setOpenDeleteDialog(true);}} style={{color: theme.palette.error.main}} variant=\"contained\"><DeleteIcon/></IconButton>\n                    </Tooltip>\n                ) : ( null )} </TableCell>\n                <TableCell>\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.user}</Typography>\n                </TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\"}}>{props.domain}</Typography>\n                </TableCell>\n                <TableCell>{props.host}</TableCell>\n                <TableCell >\n                    <Typography variant=\"body2\" style={{wordBreak: \"break-all\", display: \"inline-block\"}}>{props.description}</Typography>\n                </TableCell>\n                <TableCell>\n                <Link style={{wordBreak: \"break-all\"}} color=\"textPrimary\" underline=\"always\" target=\"_blank\" \n                        href={\"/new/callbacks/\" + props.id}>\n                            {props.id}\n                    </Link>\n                </TableCell>\n                \n            </TableRow>\n        </React.Fragment>\n    )\n}\n\n","import {MythicTabPanel, MythicSearchTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, { useEffect } from 'react';\nimport { gql, useLazyQuery} from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { Typography } from '@material-ui/core';\nimport {SocksSearchTable} from './SocksSearchTable';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\n\nconst callbackFragment = gql`\nfragment callbackData on callback{\n    user\n    host\n    description\n    domain\n    id\n    integrity_level\n    ip\n    process_name\n    active\n    init_callback\n    last_checkin\n    port\n}\n`;\nconst fetchLimit = 20;\nconst userSearch = gql`\n${callbackFragment}\nquery userQuery($operation_id: Int!, $offset: Int!, $fetchLimit: Int!) {\n    callback_aggregate(distinct_on: id, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      aggregate {\n        count\n      }\n    }\n    callback(limit: $fetchLimit, distinct_on: id, offset: $offset, order_by: {id: desc}, where: {operation_id: {_eq: $operation_id}, port: {_is_null: false}}) {\n      ...callbackData\n    }\n}\n`;\n\nexport function SearchTabSocksLabel(props){\n    return (\n        <MythicSearchTabLabel label={\"SOCKS\"} iconComponent={<FontAwesomeIcon icon={faSocks} size=\"lg\" />} {...props}/>\n    )\n}\n\nexport const SearchTabSocksPanel = (props) =>{\n    const [callbackData, setCallbackData] = React.useState([]);\n    const [totalCount, setTotalCount] = React.useState(0);\n    const me = useReactiveVar(meState);\n    const [onSocksSearch] = useLazyQuery(userSearch, {\n        fetchPolicy: \"network-only\",\n        onCompleted: (data) => {\n            snackActions.dismiss();\n            if(data.callback_aggregate.aggregate.count === 0){\n                snackActions.info(\"No Socks Running\");\n            }\n            setTotalCount(data.callback_aggregate.aggregate.count);\n            setCallbackData(data.callback);\n        },\n        onError: (data) => {\n            snackActions.error(\"Failed to fetch data for socks\");\n            console.log(data);\n        }\n    });\n    useEffect(() => {\n        if(props.value === props.index){\n            onSocksSearch({variables: {offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }\n    }, [props.value, props.index])\n    const onChangePage = (event, value) => {\n        if(value === 1){\n            onSocksSearch({variables: { offset: 0, operation_id: me.user.current_operation_id, fetchLimit}});\n        }else{\n            onSocksSearch({variables: { offset: (value - 1) * fetchLimit, operation_id: me.user.current_operation_id, fetchLimit}});        \n        }\n    }\n    return (\n        <MythicTabPanel {...props} >\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n                {callbackData.length > 0 ? (\n                    <SocksSearchTable callbacks={callbackData} />) : (\n                    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", position: \"absolute\", left: \"50%\", top: \"50%\"}}>No Search Results</div>\n                )}\n            </div>\n            <div style={{background: \"transparent\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Pagination count={Math.ceil(totalCount / fetchLimit)} variant=\"outlined\" color=\"primary\" boundaryCount={1}\n                    siblingCount={1} onChange={onChangePage} showFirstButton={true} showLastButton={true} style={{padding: \"20px\"}}/>\n                <Typography style={{paddingLeft: \"10px\"}}>Total Results: {totalCount}</Typography>\n            </div>\n        </MythicTabPanel>\n    )\n}","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {SearchTabTasksLabel, SearchTabTasksPanel} from './SearchTabTasks';\nimport {SearchTabFilesLabel, SearchTabFilesPanel} from './SearchTabFiles';\nimport {SearchTabCredentialsLabel, SearchTabCredentialsPanel} from './SearchTabCredentials';\nimport {SearchTabKeylogsLabel, SearchTabKeylogsPanel} from './SearchTabKeylog';\nimport {SearchTabTokensLabel, SearchTabTokensPanel} from './SearchTabTokens';\nimport {SearchTabCallbacksLabel, SearchTabCallbacksPanel} from './SearchTabCallbacks';\nimport {SearchTabArtifactsLabel, SearchTabArtifactsPanel} from './SearchTabArtifacts';\nimport {SearchTabSocksLabel, SearchTabSocksPanel} from './SearchTabSocks';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nexport function Search(props){\n  const classes = useStyles();\n  const tabTypes = [\"callbacks\", \"tasks\", \"files\", \"credentials\", \"keylogs\", \"artifacts\", \"tokens\", \"socks\"];\n  var params = new URLSearchParams(window.location.search);\n  var valueString = params.get(\"tab\");\n  var valueIndex = tabTypes.findIndex(t => t === valueString);\n  var value = valueIndex === -1 ? 0 : valueIndex;\n\n  const handleChange = (event, newValue) => {\n      params.set(\"tab\", tabTypes[newValue]);\n      var newRelativePathQuery = window.location.pathname + \"?\" + params.toString();\n      props.history.push(newRelativePathQuery);\n  };\n\nconst changeSearchParam = (name, value) => {\n  params.set(name, value);\n  var newRelativePathQuery = window.location.pathname + \"?\" + params.toString();\n  props.history.push(newRelativePathQuery);\n}\nreturn (\n  <div className={classes.root} style={{  height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n      <AppBar position=\"static\" color=\"default\">\n        <Tabs \n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n        >\n        {\n            tabTypes.map( (tab, index) => {\n              switch (tab){\n                case \"tasks\":\n                  return <SearchTabTasksLabel key={\"taskstab\"} />;\n                case \"files\":\n                  return <SearchTabFilesLabel key={\"filestab\"} />;\n                case \"credentials\":\n                  return <SearchTabCredentialsLabel key={\"credentialstab\"} />;\n                case \"keylogs\":\n                  return <SearchTabKeylogsLabel key={\"keylogstab\"} />;\n                case \"tokens\":\n                  return <SearchTabTokensLabel key={\"tokenstab\"} />;\n                case \"callbacks\":\n                  return <SearchTabCallbacksLabel key={\"callbackstab\"} />;\n                case \"artifacts\":\n                  return <SearchTabArtifactsLabel key={\"artifactstab\"} />;\n                case \"socks\":\n                  return <SearchTabSocksLabel key={\"sockstab\"} />;\n                default:\n                  return (null);\n              }\n            })\n        }\n        </Tabs>\n      </AppBar>\n      {\n        tabTypes.map( (tab, index) => {\n          switch(tab){\n              case \"tasks\":\n                return <SearchTabTasksPanel key={\"taskspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"callbacks\":\n                return <SearchTabCallbacksPanel key={\"callbackspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"files\":\n                return <SearchTabFilesPanel key={\"filespanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"credentials\":\n                return <SearchTabCredentialsPanel key={\"credentialspanel\"} index={index} value={value} changeSearchParam={changeSearchParam}/>\n              case \"keylogs\":\n                return <SearchTabKeylogsPanel key={\"keylogspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              case \"tokens\":\n                return <SearchTabTokensPanel key={\"tokenspanel\"} index={index} value={value}  changeSearchParam={changeSearchParam} />\n              case \"artifacts\":\n                return <SearchTabArtifactsPanel key={\"artifactspanel\"} index={index} value={value}  changeSearchParam={changeSearchParam} />\n              case \"socks\":\n                return <SearchTabSocksPanel key={\"sockspanel\"} index={index} value={value} changeSearchParam={changeSearchParam} />\n              default:\n                return (null);\n          }\n        })\n      }\n  </div>\n)\n} \n","import React from 'react';\nimport {useSubscription, gql } from '@apollo/client';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { Link } from 'react-router-dom';\nimport { IconButton, Tooltip } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport {snackActions} from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst SUB_Event_Logs = gql`\nsubscription MySubscription($operation_id: Int!) {\n  operationeventlog_aggregate(where: {deleted: {_eq: false}, level: {_eq: \"warning\"}, resolved: {_eq: false}, operation_id: {_eq: $operation_id}}) {\n    aggregate{\n        count\n    }\n  }\n}\n `;\n \n const useStyles = makeStyles((theme) => ({\n    tooltip: {\n      backgroundColor: theme.palette.background.contrast,\n      color: theme.palette.text.contrast,\n      boxShadow: theme.shadows[1],\n      fontSize: 13\n    },\n    arrow: {\n      color: theme.palette.background.contrast,\n    }\n  }));\nexport function TopAppBarNotifications(props) {\n    const me = useReactiveVar(meState);\n    const classes = useStyles();\n  const { loading, error, data } = useSubscription(SUB_Event_Logs, {\n      variables: {operation_id: me?.user?.current_operation_id || 0},\n    onError: data => {\n        snackActions.error(\"Mythic encountered an error getting event log messages: \" + data.toString());\n        console.error(data);\n    }\n  });\n\n    return (    \n        <IconButton color=\"inherit\" component={Link} to='/new/EventFeed' style={{float: \"right\"}}>\n            <Tooltip title=\"Event Feed\" arrow classes={{tooltip: classes.tooltip, arrow: classes.arrow}}>\n            { \n                loading ? (\n                    <Badge color=\"secondary\" badgeContent={0}>\n                        <CircularProgress size={20} thickness={4} />\n                    </Badge>\n                ) : \n                \n                (\n                    error ? (\n                        <Badge color=\"secondary\" badgeContent={0}>\n                            <ErrorIcon />\n                        </Badge>\n                    ) : (\n                        <Badge badgeContent={data.operationeventlog_aggregate.aggregate.count} color=\"error\">\n                            <MailIcon />\n                        </Badge>\n                    )\n                )\n                \n            }\n            </Tooltip>\n        </IconButton>\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport {gql, useSubscription} from '@apollo/client';\nimport { meState } from '../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {snackActions} from './utilities/Snackbar';\n\n//fromNow must be in ISO format for hasura/postgres stuff\n//new Date().toISOString() will do it\nconst subscribe_payloads = gql`\nsubscription EventFeedNotificationSubscription($fromNow: timestamp!, $operation_id: Int!) {\n  operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}}, order_by: {id: desc}) {\n    operator {\n        username\n    }\n    message\n    level\n    resolved\n    source\n  }\n}\n `;\n\nexport function EventFeedNotifications(props) {\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n\n    const { loading, error, data } = useSubscription(subscribe_payloads, {\n        variables: {fromNow: fromNow.current, operation_id: me?.user?.current_operation_id || 0}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get event notifications\");\n        }\n    });\n\n    useEffect( () => {\n        //console.log(data, loading, error, fromNow.current);\n        if(!loading && !error && data && data.operationeventlog.length > 0){\n            if(data.operationeventlog[0].source === \"debug\"){\n                return;\n            }\n            if(data.operationeventlog[0].operator ){\n                const message = data.operationeventlog[0].operator.username + \":\" + data.operationeventlog[0].message;\n                snackActions.toast(message, data.operationeventlog[0].level, { autoHideDuration: 2000});\n            }else if(!data.operationeventlog[0].operator){\n                snackActions.toast(data.operationeventlog[0].message, data.operationeventlog[0].level, {autoHideDuration: 3000});\n            }\n        }else if(error){\n            console.error(error);\n            snackActions.warning(\"Mythic encountered an error getting operational event stream\", {autoHideDuration: 2000});\n        }\n    }, [loading, data, error, me.user]);\n    return (    \n       null\n    );\n}\n\n","var _image;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMythicRedSmall(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"80px\",\n    height: \"66px\",\n    viewBox: \"0 0 80 66\",\n    enableBackground: \"new 0 0 80 66\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _image || (_image = /*#__PURE__*/React.createElement(\"image\", {\n    id: \"image0\",\n    width: 80,\n    height: 66,\n    x: 0,\n    y: 0,\n    href: \"data:image/png;base64,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\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMythicRedSmall);\nexport default __webpack_public_path__ + \"static/media/mythic_red_small.793b41cc.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Menu from '@material-ui/core/Menu';\nimport { Link } from 'react-router-dom';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState, menuOpen, FailedRefresh } from '../cache';\nimport Switch from '@material-ui/core/Switch';\nimport { TopAppBarNotifications } from './TopAppBarNotifications';\nimport { EventFeedNotifications } from './EventFeedNotifications';\nimport {Redirect} from 'react-router-dom';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport HelpIcon from '@material-ui/icons/Help';\nimport PhoneCallbackIcon from '@material-ui/icons/PhoneCallback';\nimport {ReactComponent as ReactLogo} from './mythic_red_small.svg';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport PostAddIcon from '@material-ui/icons/PostAdd';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Typography } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport HeadsetIcon from '@material-ui/icons/Headset';\nimport CodeIcon from '@material-ui/icons/Code';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faBiohazard, faFlagCheckered} from '@fortawesome/free-solid-svg-icons';\nimport AttachmentIcon from '@material-ui/icons/Attachment';\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport {faSocks} from '@fortawesome/free-solid-svg-icons';\nimport {faCamera} from '@fortawesome/free-solid-svg-icons';\nimport {mythicVersion, mythicUIVersion} from '../index';\nimport {MythicStyledTooltip} from '../components/MythicComponents/MythicStyledTooltip';\n\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  appBar: {\n    width: \"100%\",\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    maxWidth: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  mythicElement: {},\n}));\n\nexport function TopAppBar(props) {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  \n  const settingsRef = React.useRef(null);\n  const documentationRef = React.useRef(null);\n  const [anchorEl, setAnchorEl] = React.useState(false);\n  const [documentationAnchorEl, setDocumentationAnchorEl] = React.useState(false);\n  const me = useReactiveVar(meState);\n  const isOpen = useReactiveVar(menuOpen);\n  const [openGlobal, setOpenGlobal] = React.useState(false);\n  const [openCreate, setOpenCreate] = React.useState(false);\n  const [openOperations, setOpenOperations] = React.useState(false);\n  const [openData, setOpenData] = React.useState(false);\n  const handleDrawerOpen = () => {\n    menuOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    menuOpen(false);\n  };\n\n  const handleMenu = (event) => {\n    setAnchorEl(true);\n  };\n\n  const handleClose = (evt) => {\n    setAnchorEl(false);\n  };\n  const handleDocumentationMenu = (event) => {\n    setDocumentationAnchorEl(true);\n  };\n  const handleDocumentationClose = (evt) => {\n    setDocumentationAnchorEl(false);\n  };\n\n  const handleToggleGlobal = () => {\n    setOpenGlobal(!openGlobal);\n  }\n  const handleToggleCreate = () => {\n    setOpenCreate(!openCreate);\n  }\n  const handleToggleOperations = () => {\n    setOpenOperations(!openOperations);\n  }\n  const handleToggleData = () => {\n    setOpenData(!openData);\n  }\n  const handleLogout = () => {\n    menuOpen(false);\n    console.log(\"clicked logout, calling FailedRefresh\");\n    FailedRefresh();\n  }\n\n  return (\n    <React.Fragment >\n\n      {me?.user?.current_operation_id ? (<EventFeedNotifications />) : (null) }\n      <AppBar className={clsx(classes.appBar, {[classes.appBarShift]: isOpen,})}>\n        \n        { me?.loggedIn ? (\n        <Toolbar variant=\"dense\" >\n            <IconButton edge=\"start\" className={clsx(classes.menuButton, isOpen && classes.hide)} color=\"inherit\" aria-label=\"menu\" onClick={handleDrawerOpen}>\n                <MenuIcon />\n            </IconButton>\n            <div style={{width: \"100%\"}}>\n                <MythicStyledTooltip title=\"C2 Profiles and Payload Types\">\n                  <IconButton component={Link} to='/new/payloadtypes' color=\"inherit\">\n                    <HeadsetIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Payloads\">\n                    <IconButton component={Link} to='/new/payloads' color=\"inherit\">\n                      <FontAwesomeIcon icon={faBiohazard} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Search Operation\">\n                  <IconButton component={Link} to='/new/search' color=\"inherit\">\n                    <SearchIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Files\">\n                  <IconButton component={Link} to='/new/search?searchField=Filename&tab=files&location=Downloads' color=\"inherit\">\n                    <AttachmentIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Artifacts\">\n                  <IconButton component={Link} to='/new/search?searchField=Artifact&tab=artifacts' color=\"inherit\">\n                    <FingerprintIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"SOCKS\">\n                  <IconButton component={Link} to='/new/search?tab=socks' color=\"inherit\">\n                      <FontAwesomeIcon icon={faSocks} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Screenshots\" arrow >\n                  <IconButton component={Link} to='/new/search?searchField=Filename&tab=files&location=Screenshots' color=\"inherit\">\n                      <FontAwesomeIcon icon={faCamera} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Active Callbacks\">\n                  <IconButton component={Link} to='/new/callbacks' color=\"inherit\">\n                    <PhoneCallbackIcon className=\"mythicElement\"/>\n                  </IconButton>\n                </MythicStyledTooltip>\n                <MythicStyledTooltip title=\"Reporting\" >\n                  <IconButton component={Link} to='/new/reporting' color=\"inherit\">\n                      <FontAwesomeIcon icon={faFlagCheckered} />\n                  </IconButton>\n                </MythicStyledTooltip>\n                <Button style={{display: \"inline-flex\", alignItems: \"center\", paddingRight: \"10px\", color: \"white\"}} component={Link} to=\"/new/operations\">\n                    <Typography >\n                        {me?.user?.current_operation || \"No Operation Set\"}\n                    </Typography>\n                </Button>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={settingsRef}\n                    anchorEl={()=>settingsRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={anchorEl}\n                    onClose={handleClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} to=\"/new/settings\" onClick={handleClose} name=\"settings\">User Management</MenuItem>\n                    <MenuItem component={Link} to=\"/new/login\" onClick={handleLogout}>Logout</MenuItem>\n                </Menu>\n                <div style={{display: \"inline-flex\", justifyContent: \"flex-end\", float: \"right\"}}>\n                <IconButton\n                    aria-label=\"account of current user\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleMenu}\n                    ref={settingsRef}\n                    color=\"inherit\"\n                    style={{float: \"right\"}}\n                >\n                  <MythicStyledTooltip title=\"Settings or Logout\">\n                    <AccountCircle />\n                  </MythicStyledTooltip>\n                </IconButton>\n                <IconButton\n                    aria-label=\"documentation links\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleDocumentationMenu}\n                    ref={documentationRef}\n                    color=\"inherit\"\n                    style={{float:\"right\"}}\n                >\n                  <MythicStyledTooltip title=\"Help Documentation\">\n                    <HelpIcon />  \n                  </MythicStyledTooltip>\n                </IconButton>\n                <Menu\n                    id=\"menu-appbar\"\n                    nodeRef={documentationRef}\n                    anchorEl={()=>documentationRef.current}\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right',\n                    }}\n                    getContentAnchorEl={null}\n                    transformOrigin={{\n                      vertical: 'top',\n                      horizontal: 'center',\n                    }}\n                    open={documentationAnchorEl}\n                    onClose={handleDocumentationClose}\n                    MenuListProps={{style: {backgroundColor: theme.palette.type === 'dark' ? theme.palette.primary.dark : theme.palette.primary.light, color: \"white\"}}}\n                >\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/agents\" onClick={handleDocumentationClose}>Agent Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/wrappers\" onClick={handleDocumentationClose}>Wrapper Documentation</MenuItem>\n                    <MenuItem component={Link} target=\"_blank\" to=\"/docs/c2-profiles\" onClick={handleDocumentationClose}>C2 Profile Documentation</MenuItem>\n                    <MenuItem component={Link} href=\"https://docs.mythic-c2.net\" target=\"_blank\" onClick={handleDocumentationClose}>Mythic Documentation</MenuItem>\n                </Menu>\n                <TopAppBarNotifications />\n                { me?.user?.username ? \n                  <Typography style={{display: \"flex\", alignItems: \"center\", paddingRight: \"10px\"}} >\n                    {me?.user?.username }\n                  </Typography> : (\n                  <Redirect to='/new/login'/>\n                )}\n                </div>\n            </div>\n        </Toolbar>\n          ) : null\n        } \n      </AppBar>\n      <Drawer\n            className={classes.drawer}\n            anchor=\"left\"\n            open={isOpen}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            onEscapeKeyDown={handleDrawerClose}\n          >\n        <div className={classes.drawerHeader} role=\"presentation\">\n          <ReactLogo style={{width: \"90%\"}}/>\n          v{mythicVersion}\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon className=\"mythicElement\"/> : <ChevronRightIcon className=\"mythicElement\"/>}\n          </IconButton>\n        </div>\n        <Divider />\n        <List\n        subheader={\n          <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n            Home\n          </ListSubheader>\n        }>\n            <ListItem button component={Link} to='/new' key={\"home\"} onClick={handleDrawerClose}>\n              <ListItemIcon ><HomeIcon className=\"mythicElement\" /></ListItemIcon>\n              <ListItemText primary={\"Home\"} />\n            </ListItem>\n        </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Global Configurations\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleGlobal}>\n                <ListItemIcon><LayersIcon /></ListItemIcon>\n                <ListItemText>Services</ListItemText>\n                {openGlobal ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openGlobal} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                  <ListItem button className={classes.nested} component={Link} to='/new/payloadtypes' key={\"payloadtypes\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><InboxIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"Payload Types\"} />\n                  </ListItem>\n                  <ListItem button className={classes.nested} component={Link} to='/new/c2profiles' key={\"c2profiles\"} onClick={handleDrawerClose}>\n                    <ListItemIcon><WifiIcon className=\"mythicElement\"/></ListItemIcon>\n                    <ListItemText primary={\"C2 Profiles\"} />\n                  </ListItem>\n                </List>\n              </Collapse>\n              <ListItem button onClick={handleToggleCreate}>\n                <ListItemIcon><PostAddIcon /></ListItemIcon>\n                <ListItemText>Create</ListItemText>\n                {openCreate ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openCreate} unmountOnExit>\n                  <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createpayload' key={\"createpayload\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Payload\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/createwrapper' key={\"createwrapper\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><PostAddIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Create Wrapped Payload\"} />\n                    </ListItem>\n                  </List>\n                </Collapse>\n              <ListItem button onClick={handleToggleOperations}>\n                <ListItemIcon><SupervisorAccountIcon /></ListItemIcon>\n                <ListItemText>Operations</ListItemText>\n                {openOperations ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openOperations} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/operations' key={\"modifyoperations\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><EditIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Modify Operations\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/browserscripts' key={\"browserscripts\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><CodeIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"BrowserScripts\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n            </List>\n        <Divider />\n            <List\n            subheader={\n              <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                Operational Views\n              </ListSubheader>\n            }>\n              <ListItem button onClick={handleToggleData}>\n                <ListItemIcon><BarChartIcon /></ListItemIcon>\n                <ListItemText>Operational Data</ListItemText>\n                {openData ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={openData} unmountOnExit>\n                <List component=\"div\" disablePadding>\n                    <ListItem button className={classes.nested} component={Link} to='/new/payloads' key={\"payloads\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><FontAwesomeIcon icon={faBiohazard} size=\"lg\"/></ListItemIcon>\n                      <ListItemText primary={\"Payloads\"} />\n                    </ListItem>\n                    <ListItem button className={classes.nested} component={Link} to='/new/search' key={\"search\"} onClick={handleDrawerClose}>\n                      <ListItemIcon><SearchIcon className=\"mythicElement\"/></ListItemIcon>\n                      <ListItemText primary={\"Search\"} />\n                    </ListItem>\n                </List>\n              </Collapse>\n                <ListItem button component={Link} to='/new/callbacks' key={\"callbacks\"} onClick={handleDrawerClose}>\n                  <ListItemIcon><PhoneCallbackIcon className=\"mythicElement\"/></ListItemIcon>\n                  <ListItemText primary={\"Active Callbacks\"} />\n                </ListItem>\n            </List>\n        <ListItem>\n        <Switch\n            checked={props.theme === 'dark'}\n            onChange={props.toggleTheme}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'primary checkbox' }}\n            name=\"darkMode\"\n          />\n        <div style={{display: \"inline-block\"}}> Enable Dark Mode </div>\n        </ListItem>\n        <ListItem>\n          UI Version: {mythicUIVersion}\n        </ListItem>\n      </Drawer>\n    </React.Fragment>\n  );\n}\n\n","import { useEffect, useState } from 'react';\nexport const useDarkMode = () => {\n    const [theme, setTheme] = useState('light');\n    const [mountedComponent, setMountedComponent] = useState(false)\n    const setMode = mode => {\n        window.localStorage.setItem('theme', mode)\n        setTheme(mode)\n    };\n\n    const themeToggler = () => {\n        theme === 'light' ? setMode('dark') : setMode('light')\n    };\n\n    useEffect(() => {\n        const localTheme = window.localStorage.getItem('theme');\n        localTheme ? setTheme(localTheme) : setMode('light')\n        setMountedComponent(true)\n    }, []);\n\n    return [theme, themeToggler, mountedComponent]\n};\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskArtifactsTable(props){\n   const [artifacts, setArtifacts] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.taskartifacts];\n    }, []);\n    condensed.sort((a,b) => (a.task_id > b.task_id) ? 1 : ((b.task_id > a.task_id) ? -1 : 0));\n    setArtifacts(condensed);\n   }, [props.tasks]);\n   if(artifacts.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Artifact Tasks\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task ID</TableCell>\n                        <TableCell>Artifact Type</TableCell>\n                        <TableCell>Host</TableCell>\n                        <TableCell>Artifact</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {artifacts.map( (artifact) => (\n                    <TableRow key={\"artifact\" + artifact.id}>\n                      <TableCell>{artifact.task_id}</TableCell>\n                      <TableCell>{artifact.artifact.name}</TableCell>\n                      <TableCell>{artifact.host}</TableCell>\n                      <TableCell>{artifact.artifact_instance_text}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskMITREATTACKTable(props){\n   const [attacks, setAttacks] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      \n      const newAdds = tsk.attacktasks.reduce( (old, attck) => {\n        if(prev.find(element => element.attack.t_num === attck.attack.t_num)){\n          return [...old];\n        }else{\n          return [...old, attck];\n        }\n      }, []);\n      return [...prev, ...newAdds];\n    }, []);\n    condensed.sort((a,b) => (a.attack.t_num > b.attack.t_num) ? 1 : ((b.attack.t_num > a.attack.t_num) ? -1 : 0));\n    setAttacks(condensed);\n    \n   }, [props.tasks]);\n   if(attacks.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                MITRE ATT&amp;CK Mappings\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Technique ID</TableCell>\n                        <TableCell>Technique</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {attacks.map( (attack) => (\n                    <TableRow key={'attack' + attack.attack.id}>\n                      <TableCell>{attack.attack.t_num}</TableCell>\n                      <TableCell>{attack.attack.name}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Link from '@material-ui/core/Link';\n\n\nexport function TaskFilesTable(props){\n   const [files, setFiles] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.filemeta];\n    }, []);\n    setFiles(condensed);\n    condensed.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n   }, [props.tasks]);\n   if(files.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Files / Screenshots\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Filename</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Remote Path</TableCell>\n                        <TableCell>Comment</TableCell>\n                        <TableCell>Hashes</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {files.map( (file) => (\n                    <TableRow key={\"file\" + file.id}>\n                      <TableCell>\n                        {!file.deleted && file.complete ? (\n                          <Link href={window.origin + \"/api/v1.4/files/download/\" + file.agent_file_id} style={{textDecoration: \"underline\", color: \"inherit\"}}>{file.filename_text}</Link>\n                        ) : ( \n                          !file.complete ? (\n                            file.filename_text +  \" (\" + file.chunks_received + \"/\" + file.total_chunks + \")\"\n                          ) : (file.filename_text)\n                         )}\n                        </TableCell>\n                      <TableCell>\n                        {file.is_screenshot ? (\"Screenshot\") : (\n                          file.is_payload ? (\"Payload\") : (\n                            file.is_download_from_agent ? (\"Download\") : (\n                              \"Upload\"\n                            )\n                          )\n                        )}\n                      </TableCell>\n                      <TableCell>{file.full_remote_path_text === \"\" ? (\"\") : (file.host + \":\" + file.full_remote_path_text) }</TableCell>\n                      <TableCell>{file.comment}</TableCell>\n                      <TableCell>MD5:<br/>{file.md5}<br/>SHA1:<br/>{file.sha1}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport function TaskCredentialsTable(props){\n   const [credentials, setCredentials] = React.useState([]);\n   const theme = useTheme();\n\n   useEffect( () => {\n    const condensed = props.tasks.reduce( (prev, tsk) => {\n      return [...prev, ...tsk.credentials];\n    }, []);\n    setCredentials(condensed);\n   }, [props.tasks]);\n   if(credentials.length === 0){\n     return (null)\n   }\n  return (\n    <React.Fragment>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Credentials\n            </Typography>\n        </Paper>\n        \n        <Paper elevation={5} style={{position: \"relative\", backgroundColor: theme.body}} variant={\"elevation\"}>\n        <TableContainer component={Paper} className=\"mythicElement\">\n          <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Task</TableCell>\n                        <TableCell>Type</TableCell>\n                        <TableCell>Realm</TableCell>\n                        <TableCell>Account</TableCell>\n                        <TableCell>Credentials</TableCell>\n                        <TableCell>Comment</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                  {credentials.map( (cred) => (\n                    <TableRow key={\"cred\" + cred.id}>\n                      <TableCell>{cred.task_id}</TableCell>\n                      <TableCell>{cred.type}</TableCell>\n                      <TableCell>{cred.realm}</TableCell>\n                      <TableCell>{cred.account}</TableCell>\n                      <TableCell>{cred.credential_text}</TableCell>\n                      <TableCell>{cred.comment}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n            </Table>\n          </TableContainer>\n        </Paper>\n    </React.Fragment>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useLazyQuery, gql } from '@apollo/client';\nimport {TaskArtifactsTable} from './TaskArtifactsTable';\nimport {TaskMITREATTACKTable} from './TaskMITREATTACKTable';\nimport {TaskFilesTable} from './TaskFilesTable';\nimport {TaskCredentialsTable} from './TaskCredentialsTable';\n\nconst MetadataQuery = gql`\nquery taskMetadataQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}) {\n      credentials {\n        account\n        comment\n        credential_text\n        id\n        realm\n        type\n        task_id\n      }\n      filemeta {\n        agent_file_id\n        complete\n        deleted\n        filename_text\n        full_remote_path_text\n        host\n        id\n        comment\n        total_chunks\n        chunks_received\n        is_download_from_agent\n        is_payload\n        is_screenshot\n        md5\n        sha1\n        task {\n            comment\n            id\n        }\n      }\n      taskartifacts {\n        artifact_instance_text\n        host\n        task_id\n        artifact{\n            id\n            name\n        }\n        id\n      }\n      tokens {\n        TokenId\n        id\n        host\n      }\n      attacktasks(distinct_on: attack_id) {\n        attack {\n          name\n          os\n          id\n          t_num\n          tactic\n        }\n        id\n      }\n      id\n    }\n  }`;\nexport function TaskMetadataTable(props){\n   const [tasks, setTasks] = React.useState([]);\n\n   const [getMetadata] = useLazyQuery(MetadataQuery, {\n        onCompleted: data => {\n            setTasks(data.task);\n        },\n        onError: data => {\n            console.log(\"error!\", data)\n        }\n    });\n    useEffect( () => {\n        getMetadata({variables: {task_range: props.taskIDs } });\n    }, [props.taskIDs, getMetadata]);\n  return (\n    <div style={{marginTop: \"10px\", marginRight: \"5px\"}}>\n        <TaskArtifactsTable tasks={tasks}/>\n        <TaskMITREATTACKTable tasks={tasks}/>\n        <TaskFilesTable tasks={tasks}/>\n        <TaskCredentialsTable tasks={tasks}/>\n    </div>\n  );\n}\n","import React, {useState, useRef, useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function IncludeMoreTasksDialog(props) {\n    const [taskSelected, setTaskSelected] = useState(0);\n    const [taskOptions, setTaskOptions] = useState([]);\n    const [beforeCount, setBeforeCount] = useState(10);\n    const [afterCount, setAfterCount] = useState(10);\n    const [searchTerm, setSearchTerm] = useState(\"all\");\n    const [operator, setOperator] = useState(\"\");\n    const searchOptions = [\n        {\"type\": \"all\", \"text\": \"All Callbacks\"},\n        {\"type\": \"callback\", \"text\": \"This Callack\"},\n        {\"type\": \"operator\", \"text\": \"All callbacks but limited by operator\"}\n    ];\n    const inputRef = useRef(null); \n    const onRequestSubmit = () => {\n        props.submitFetchTasks({\n            taskSelected,\n            beforeCount: parseInt(beforeCount),\n            afterCount: parseInt(afterCount),\n            search: searchTerm === \"operator\" ? operator : searchTerm\n        });\n        props.onClose();\n    }\n    const handleChange = (event) => {\n        setSearchTerm(event.target.value);\n      };\n    const handleTaskChange = (event) => {\n        setTaskSelected(event.target.value);\n    };\n    useEffect( () => {\n        setTaskOptions(props.taskOptions);\n        if(props.taskOptions.length > 0){\n            setTaskSelected(props.taskOptions[0]);\n        }\n    }, [props.tasks, props.taskOptions])\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Add More Tasks to View</DialogTitle>\n        <DialogContent dividers={true}>\n        <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>View More Tasks Around Task:</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={taskSelected}\n                    onChange={handleTaskChange}\n                    input={<Input />}\n                  >\n                    {taskOptions.map( (opt) => (\n                        <MenuItem value={opt} key={\"selectiontask:\" + opt}>{opt}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            <MythicTextField type=\"number\" value={beforeCount} onChange={(name, value, error)=>setBeforeCount(value)} name={\"Number of tasks before\"} />\n            <MythicTextField type=\"number\" value={afterCount} onChange={(name, value, error)=>setAfterCount(value)} name={\"Number of tasks after\"} />\n            <React.Fragment>\n                <FormControl style={{width:\"100%\"}}>\n                  <InputLabel ref={inputRef}>Search Type</InputLabel>\n                  <Select\n                    labelId=\"demo-dialog-select-label\"\n                    id=\"demo-dialog-select\"\n                    value={searchTerm}\n                    onChange={handleChange}\n                    input={<Input />}\n                  >\n                    {searchOptions.map( (opt) => (\n                        <MenuItem value={opt.type} key={\"selectiontype:\" + opt.type}>{opt.text}</MenuItem>\n                    ) )}\n                  </Select>\n                </FormControl>\n                <br/><br/>\n            </React.Fragment>\n            {searchTerm === 'operator' ? (\n                <MythicTextField multiline={false} onChange={(name, value, error)=>{setOperator(value)}} value={operator} name={\"Operator Username\"}/>\n            ) : (null)}\n            \n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" color=\"primary\">\n            Close\n          </Button>\n          <Button onClick={onRequestSubmit} variant=\"contained\" color=\"secondary\">Fetch Tasks</Button>          \n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useEffect} from 'react';\nimport {TaskDisplay} from '../Callbacks/TaskDisplay';\nimport {gql, useLazyQuery } from '@apollo/client';\nimport  {useParams} from \"react-router-dom\";\nimport {TaskMetadataTable} from './MetadataTable';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport {Button, Grid} from '@material-ui/core';\nimport {IncludeMoreTasksDialog} from './IncludeMoreTasksDialog';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport { useReactiveVar } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {copyStringToClipboard} from '../../utilities/Clipboard';\nimport Switch from '@material-ui/core/Switch';\nimport {useTheme} from '@material-ui/core/styles';\nconst taskInfoFragment = gql`\nfragment TaskData on task {\n    comment\n    callback_id\n    commentOperator{\n        username\n    }\n    completed\n    id\n    operator{\n        username\n    }\n    display_params\n    original_params\n    command_name\n    status\n    timestamp\n    command {\n        cmd\n        id\n    }\n    callback {\n        id\n        host\n        user\n        integrity_level\n        domain\n    }\n    responses_aggregate{\n        aggregate{\n            count\n        }\n    }\n    parent_task_id\n    opsec_pre_blocked\n    opsec_pre_bypassed\n    opsec_post_blocked\n    opsec_post_bypassed\n    tasks {\n        id\n    }\n    token {\n        id\n    }\n}\n`;\nconst tasksQuery = gql`\n${taskInfoFragment}\nquery tasksQuery($task_range: [Int!]) {\n    task(where: {id: {_in: $task_range}}, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacks($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, order_by: {id: desc}, limit: $beforeCount) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossACallbackQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossACallbacks($callback_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!){\n    before: task(where: {callback:{id: {_eq: $operation_id}}, id:{_lt: $baseTask}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{id: {_eq: $operation_id}}, id:{_gt: $baseTask}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nconst getTasksAcrossAllCallbacksByOperatorQuery = gql`\n${taskInfoFragment}\nquery tasksAcrossAllCallbacksByOperator($operation_id: Int!, $baseTask: Int!, $beforeCount: Int!, $afterCount: Int!, $operator: String!){\n    before: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_lt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $beforeCount, order_by: {id: desc}) {\n        ...TaskData\n    }\n    after: task(where: {callback:{operation_id: {_eq: $operation_id}}, id:{_gt: $baseTask}, operator: {username: {_eq: $operator}}}, limit: $afterCount, order_by: {id: asc}) {\n        ...TaskData\n    }\n}`;\nexport function SingleTaskView(props){\n    const me = useReactiveVar(meState);\n    const {taskId} = useParams();\n    const [taskIDs, setTaskIDs] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [tasks, setTasks] = React.useState([]);\n    const [removing, setRemoving] = React.useState(false);\n    const [openIncludeMoreTasksDialog, setOpenIncludeMoreTasksDialog] = React.useState(false);\n    const theme = useTheme();\n    const mergeData = (taskData) => {\n        let allNewParents = taskData.filter( (task) => task.parent_task_id === null);\n        let allData = [];\n        let recent_callback = -1;\n        if(allNewParents.length === 0){\n            allNewParents = [...taskData];\n        }\n        const allParents = tasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\" && cur.parent_task_id === null){\n                if(prev.find( (element) => element.id === cur.id)){\n                    return [...prev];\n                }\n                return [...prev, {...cur, checked: false}];\n            }\n            return [...prev];\n        }, [...allNewParents]);\n        \n        allParents.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0));\n        allParents.forEach( (tsk) => {\n            if(tsk.callback.id !== recent_callback){\n                allData.push({\"type\": \"callback\", ...tsk.callback, checked: false});\n            }\n            recent_callback = tsk.callback.id;\n            allData.push({\"type\": \"task\", ...tsk, checked: false});\n        });\n        setTasks(allData);\n        const allTaskIds = taskData.reduce( (prev, cur) => {\n            const subIds = cur.tasks.filter( (cur) => !prev.includes(cur.id)).map( (cur) => cur.id);\n            if(prev.includes(cur.id)){\n                return [...prev, ...subIds];\n            }else{\n                return [...prev, cur.id, ...subIds];\n            }\n        }, [...taskIDs]);\n        setTaskIDs(allTaskIds);\n    }\n    const [getTasksAcrossAllCallbacks] = useLazyQuery(getTasksAcrossAllCallbacksQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossACallback,] = useLazyQuery(getTasksAcrossACallbackQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasksAcrossAllCallbacksByOperator] = useLazyQuery(getTasksAcrossAllCallbacksByOperatorQuery, {\n        onCompleted: completedData => {\n           snackActions.success(\"Successfully fetched tasks\");\n           mergeData([...completedData.before, ...completedData.after]);\n        }\n    });\n    const [getTasks] = useLazyQuery(tasksQuery, {\n     onCompleted: completedData => {\n        mergeData(completedData.task);\n     }\n    });\n    const setTaskSearchInfo = (callback_id) => {\n        const opts = tasks.reduce( (prev, cur) => {\n            if(cur.type === 'task' && cur.callback.id === callback_id){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskOptions(opts);\n        \n        setOpenIncludeMoreTasksDialog(true);\n    }\n    const toggleTaskToRemove = (event) => {\n        const updated = tasks.map( (task) => {\n            if(task.type === \"task\" && (\"task\" + task.id) === event.target.name){\n                return {...task, checked: event.target.checked};\n            }\n            return {...task};\n        });\n        setTasks(updated);\n    }\n    const removeTasksButton = () => {\n        removing ? setRemoving(false) : setRemoving(true);\n        const remainingTasks = tasks.filter( (task) => !task.checked);\n        setTasks(remainingTasks);\n        const remainingTaskIDs = remainingTasks.reduce( (prev, cur) => {\n            if(cur.type === \"task\"){\n                return [...prev, cur.id];\n            }else{\n                return [...prev];\n            }\n        }, []);\n        setTaskIDs(remainingTaskIDs);\n    }\n    const collapse_range = (all_nums) =>{\n        // takes in an array of the expanded numbers and collapses it down\n        all_nums.sort( (a,b) => (a-b));\n        // pulled from https://stackoverflow.com/a/2270987\n        let ranges = [], rstart, rend;\n        for (let i = 0; i < all_nums.length; i++) {\n          rstart = all_nums[i];\n          rend = rstart;\n          while (all_nums[i + 1] - all_nums[i] === 1) {\n            rend = all_nums[i + 1]; // increment the index if the numbers sequential\n            i++;\n          }\n          ranges.push(rstart === rend ? rstart+'' : rstart + '-' + rend);\n        }\n        return ranges.join(\",\");\n    }\n    const expand_range = (range) =>{\n        let numbers = [], ranges = range.split(\",\");\n        for(let i = 0; i < ranges.length; i++){\n            if(ranges[i].includes(\"-\")){\n                let split = ranges[i].split(\"-\");\n                split = split.map( (r) => parseInt(r) );\n                numbers.push( ...[...Array(split[1]-split[0]+1).keys()].map(x => x+split[0]))\n            }else{\n                numbers.push(parseInt(ranges[i]));\n            }\n        }\n        numbers.sort( (a,b) => a - b);\n        return numbers;\n    }\n    const getShareableLink = () => {\n        let ids = [...taskIDs];\n        const range = collapse_range(ids);\n        copyStringToClipboard(window.origin + \"/new/tasks/by_range?tasks=\" + range);\n        snackActions.success(\"Copied link to clipboard!\");\n    }\n    const submitIncludeMoreTasks = ({taskSelected, beforeCount, afterCount, search}) => {\n        snackActions.info(\"Searching for tasks...\");\n        switch(search){\n            case \"all\":\n                getTasksAcrossAllCallbacks({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount}});\n                break;\n            case \"callback\":\n                getTasksAcrossACallback({variables: {}});\n                break;\n            default:\n                getTasksAcrossAllCallbacksByOperator({variables: {operation_id: me.user.current_operation_id, baseTask: taskSelected, beforeCount, afterCount, operator: search}});\n                break;\n        }\n    }\n    useEffect( () => {\n        if(window.location.pathname.includes(\"/new/tasks/by_range\")){\n            let params = new URLSearchParams(window.location.search);\n            if(params.has(\"tasks\")){\n                console.log(params.get(\"tasks\"));\n                let ids = expand_range(params.get(\"tasks\"));\n                getTasks({variables: {task_range: ids}});\n            }else{\n                snackActions.warning(\"URL Query missing '?tasks=' with a range of tasks\")\n            }\n        }else{\n            getTasks({variables: {task_range: [parseInt(taskId)]}});\n        }      \n    }, [getTasks, taskId]);\n  return (\n    <div style={{marginTop: \"10px\", maxHeight: \"calc(94vh)\", width:\"100%\", marginBottom: \"10px\" }}>\n        <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main, marginBottom: \"5px\", marginTop: \"10px\", marginRight: \"5px\"}} variant={\"elevation\"}>\n            <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                Task View\n            </Typography>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.success.main}} \n                onClick={getShareableLink}>Get Shareable link</Button>\n            <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.warning.main}} \n                onClick={removeTasksButton}>Remove Tasks From View</Button>\n            <Button variant=\"contained\" color={\"primary\"} size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\"}} \n                onClick={(evt) => {evt.stopPropagation(); snackActions.warning(\"Not implemented yet\");}}>Add Tags To All</Button>\n            \n        </Paper>\n        {tasks.map( (task) => (\n            task.type === \"task\" ? (\n                    <Grid container alignItems=\"stretch\" key={\"taskdisplay:\" + task.id} style={{marginRight: \"5px\"}}>\n                        <Grid item style={{display: \"inline-flex\", width: removing ? \"96%\" : \"100%\"}}>\n                            <TaskDisplay  task={task} command_id={task.command === null ? 0 : task.command.id} />\n                        </Grid>\n                        <Grid item  style={{display: \"inline-flex\"}}>\n                        {removing ? (\n                            <Switch\n                                checked={task.checked}\n                                onChange={toggleTaskToRemove}\n                                name={\"task\" + task.id}\n                                inputProps={{ 'aria-label': 'checkbox', 'color': theme.palette.error.main }}\n                        />\n                        ) : (null)}\n                        </Grid>\n                    </Grid>\n                    \n            ) : (\n                <Paper key={\"taskdisplayforcallback:\" + task.id} elevation={5} style={{ marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n                    <Typography variant=\"h4\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n                        {task.domain === \"\" ? (null) : (task.domain + \"\\\\\")}{task.user}{task.integrity_level > 2 ? (\"*\") : (null)}@{task.host} ({task.id})\n                    </Typography>\n                    <Button variant=\"contained\" size=\"small\" style={{display: \"inline-block\", float: \"right\", marginTop:\"5px\", marginRight:\"10px\", backgroundColor: theme.palette.info.main}} \n                        onClick={() => {setTaskSearchInfo(task.id)}}>Include More Tasks</Button>                  \n                </Paper>\n            ))\n            \n            )\n        }\n        <MythicDialog fullWidth={true} maxWidth=\"md\" open={openIncludeMoreTasksDialog} \n            onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} \n            innerDialog={<IncludeMoreTasksDialog submitFetchTasks={submitIncludeMoreTasks} taskOptions={taskOptions} onClose={()=>{setOpenIncludeMoreTasksDialog(false);}} />}\n        />\n        <TaskMetadataTable taskIDs={taskIDs} />\n    </div>\n  );\n}\n//\n","import { createGlobalStyle} from \"styled-components\"\nexport const GlobalStyles = createGlobalStyle`\nbody {\n    margin: 0\n}\nhtml, body, #root {\n    height: 100%;\n}\n.MuiAccordionDetails-root{\n\n    padding-bottom: 0;\n    padding-top: 0;\n}\n.MuiAccordionSummary-content.Mui-expanded{\n    margin: 0px 0px 0px 0px !important;\n    min-height: unset;\n}\n.MuiAccordionSummary-root.Mui-expanded{\n    min-height: unset;\n}\n// placeholder/helper text for input boxes\n.MuiFormLabel-root {\n    background: transparent;\n}\n.MuiTableCell-head {\n\n    font-weight: bold;\n}\n.MuiSelect-select.MuiSelect-select{\n    padding-left: 10px\n}\n.ReactVirtualized__Table__row {\n    &:hover,\n    &--hovered {\n        background-color: ${(props) => props.theme.tableHover} !important;\n        color: ${(props) => props.theme.palette.text.primary} !important;\n        \n    }\n}\n.menuEntry {\n  cursor: pointer;\n}\n\ntspan {\n  font-size: 15px;\n  stroke: none;\n}\n\n.ReactVirtualized__Table__headerTruncatedText {\n\n  }\n.ReactVirtualized__Table__headerColumn {\n\n    padding: 0;\n  }\n.MuiTab-root {\n    max-width: unset;\n}\n.MuiSpeedDialAction-staticTooltipLabel {\n    white-space: nowrap;\n    max-width: none;\n}\n.MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label{\n    background-color: transparent;\n}\n.MuiTreeItem-root.Mui-selected:hover > .MuiTreeItem-content .MuiTreeItem-label{\n    background-color: transparent;\n}\n.MuiTreeItem-root:hover > .MuiTreeItem-content .MuiTreeItem-label {\n    background-color: transparent;\n}\n.MuiAppBar-root{\n    z-index: 1\n}\n.ace-monokai .ace_invalid {\n    color: #F8F8F0;\n    background-color: #52524d;\n}\n`\n","import React, { useEffect } from 'react';\nimport {Button} from '@material-ui/core';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport {snackActions} from '../../utilities/Snackbar';\nimport {useMutation, gql, useSubscription} from '@apollo/client';\nimport { meState } from '../../../cache';\nimport { useReactiveVar } from '@apollo/client';\nimport {MythicSnackDownload} from '../../MythicComponents/MythicSnackDownload';\n\nconst generateReportMutation = gql`\nmutation generateReportMutation($outputFormat: String!, $includeMITREPerTask: Boolean!, $includeMITREOverall: Boolean!, $excludedUsers: String!, $excludedHosts: String!, $excludedIDs: String!, $includeOutput: Boolean!){\n    generateReport(outputFormat: $outputFormat, includeMITREPerTask: $includeMITREPerTask, includeMITREOverall: $includeMITREOverall, excludedUsers: $excludedUsers, excludedHosts: $excludedHosts, excludedIDs: $excludedIDs, includeOutput: $includeOutput){\n        status\n        error\n    }\n}\n`;\nconst generatedReportSubscription = gql`\nsubscription generatedReportEventSubscription($fromNow: timestamp!, $operation_id: Int!){\n    operationeventlog(limit: 1, where: {deleted: {_eq: false}, timestamp: {_gte: $fromNow}, operation_id: {_eq: $operation_id}, source: {_eq: \"generated_report\"}}, order_by: {id: desc}) {\n        operator {\n            username\n        }\n        message\n        level\n      }\n}\n`;\nexport function ReportingTable(props){\n    const theme = useTheme();\n    const me = useReactiveVar(meState);\n    const fromNow = React.useRef( (new Date()).toISOString() );\n    const [selectedOutputFormat, setSelectedOutputFormat] = React.useState(\"pdf\");\n    const outputOptions = [\"pdf\", \"latex\", \"json\"];\n    const [includeMITREPerTask, setIncludeMITREPerTask] = React.useState(false);\n    const [includeMITREOverview, setIncludeMITREOverview] = React.useState(false);\n    const [includeOutput, setIncludeOutput] = React.useState(false);\n    const [includeGraphs, setIncludeGraphs] = React.useState(false);\n    const [excludedCallbackHost, setExcludedCallbackHost] = React.useState(\"\");\n    const [excludedCallbackUser, setExcludedCallbackUser] = React.useState(\"\");\n    const [excludedCallbackID, setExcludedCallbackID] = React.useState(\"\");\n    const [generateReport] = useMutation(generateReportMutation, {\n        onCompleted: (data) => {\n            if(data.generateReport.status === \"success\"){\n                snackActions.info(\"Generating report...\");\n                snackActions.info(\"Final reports are always available via the 'Uploads' tab within 'Search'\");\n            }else{\n                snackActions.error(data.generateReport.error);\n            }\n        },\n        onError: (data) => {\n            snackActions.error(data);\n        }\n    });\n    const { data } = useSubscription(generatedReportSubscription, {\n        variables: {fromNow: fromNow.current, operation_id: me?.user?.current_operation_id || 0}, \n        fetchPolicy: \"no-cache\",\n        onError: (errorData) => {\n            snackActions.warning(\"Failed to get notifications for generated payloads\");\n        }\n    });\n    const setOutputFormat = (evt) => {\n        setSelectedOutputFormat(evt.target.value);\n        if(evt.target.value !== \"json\"){\n            setIncludeOutput(false);\n        }\n        if(evt.target.value === \"json\"){\n            setIncludeGraphs(false);\n        }\n    }\n    const changeExcludedCallbackUser = (name, value, error) => {\n        setExcludedCallbackUser(value);\n    }\n    const changeExcludedCallbackHost = (name, value, error) => {\n        setExcludedCallbackHost(value);\n    }\n    const changeExcludedCallbackID = (name, value, error) => {\n        setExcludedCallbackID(value);\n    }\n    const onGenerateReport = () => {\n        generateReport({variables: {\n            outputFormat: selectedOutputFormat,\n            includeMITREOverall: includeMITREOverview,\n            includeMITREPerTask,\n            includeOutput,\n            excludedUsers: excludedCallbackUser,\n            excludedHosts: excludedCallbackHost,\n            excludedIDs: excludedCallbackID\n        }})\n    }\n    useEffect( () => {\n        console.log(data);\n        if(data?.operationeventlog?.length > 0){\n            const dataUUID = data.operationeventlog[0].message.split(\":\").pop().trim();\n            snackActions.success(\"\", {persist: true, content: key => <MythicSnackDownload id={key} title=\"Download Generated Report\" downloadLink={window.location.origin + \"/api/v1.4/files/download/\" + dataUUID} />});\n        }\n    }, [data])\n    return (\n        <React.Fragment>\n\n        <TableContainer component={Paper} className=\"mythicElement\">   \n            <Table  size=\"small\" style={{\"tableLayout\": \"fixed\", \"maxWidth\": \"calc(100vw)\", \"overflow\": \"scroll\"}}>\n                <TableHead>\n                    <TableRow>\n                        <TableCell style={{width: \"25rem\"}}>Report Option</TableCell>\n                        <TableCell >Selected Values</TableCell> \n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    <TableRow hover>\n                        <TableCell>Output Format</TableCell>\n                        <TableCell>\n                            <Select\n                              autoFocus\n                              style={{width: \"100%\", marginBottom: \"10px\"}}\n                              value={selectedOutputFormat}\n                              label=\"Select an Output Format\"\n                              onChange={setOutputFormat}\n                            >\n                            {\n                                outputOptions.map((opt, i) => (\n                                    <MenuItem key={\"outputformat\" + i} value={opt}>{opt}</MenuItem>\n                                ))\n                            }\n                            </Select>\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Include MITRE ATT&CK Coverage Per Task</TableCell>\n                        <TableCell>\n                            <Switch\n                                checked={includeMITREPerTask}\n                                onChange={evt => setIncludeMITREPerTask(!includeMITREPerTask)}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"active\"\n                            />\n                        </TableCell>\n                    </TableRow>\n                    <TableRow hover>\n                        <TableCell>Include MITRE ATT&CK Coverage Overview</TableCell>\n                        <TableCell>\n                            <Switch\n                                checked={includeMITREOverview}\n                                onChange={evt => setIncludeMITREOverview(!includeMITREOverview)}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                name=\"active\"\n                            />\n                        </TableCell>\n                    </TableRow>\n                    {\n                        selectedOutputFormat === \"json\" && \n                        <TableRow hover>\n                            <TableCell>Include Command Output</TableCell>\n                            <TableCell>\n                                <Switch\n                                    checked={includeOutput}\n                                    onChange={evt => setIncludeOutput(!includeOutput)}\n                                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                                    name=\"active\"\n                                />\n                            </TableCell>\n                        </TableRow>\n                    }\n                    <TableRow hover>\n                        <TableCell>Exclude Callbacks With Matching Values</TableCell>\n                        <TableCell>\n                                <Table>\n                                    <TableRow>\n                                        <TableCell style={{width: \"10rem\"}}>Exclude Users</TableCell>\n                                        <TableCell>\n                                            <MythicTextField onChange={changeExcludedCallbackUser} value={excludedCallbackUser} name={\"Excluded Usernames\"}/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Exclude Hosts</TableCell>\n                                        <TableCell>\n                                            <MythicTextField onChange={changeExcludedCallbackHost} value={excludedCallbackHost} name={\"Excluded Hostnames\"}/>\n                                        </TableCell>\n                                    </TableRow>\n                                    <TableRow>\n                                        <TableCell>Exclude IDs</TableCell>\n                                        <TableCell>\n                                            <MythicTextField onChange={changeExcludedCallbackID} value={excludedCallbackID} name={\"Excluded Callback IDs\"}/>\n                                        </TableCell>\n                                    </TableRow>\n                                </Table>\n                        </TableCell>\n                    </TableRow>\n                </TableBody>\n            </Table>\n        </TableContainer>\n        <Button variant=\"contained\" style={{marginTop: \"10px\", backgroundColor: theme.palette.success.main, color: \"white\"}} onClick={onGenerateReport}>Generate</Button>\n    </React.Fragment>\n    )\n}\n\n/**\n *                     {\n                        selectedOutputFormat !== \"json\" &&\n                        <TableRow hover>\n                            <TableCell>Include Graphs</TableCell>\n                            <TableCell>\n                                <Switch\n                                    checked={includeGraphs}\n                                    onChange={evt => setIncludeGraphs(!includeOutput)}\n                                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                                    name=\"active\"\n                                />\n                            </TableCell>\n                        </TableRow>\n                    }\n */\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {ReportingTable} from './ReportingTable';\n\n\nexport function Reporting() {\n  const theme = useTheme();\n  return (\n  <div style={{maxHeight: \"calc(96vh)\", margin:\"10px\", }}>\n    <Paper elevation={5} style={{backgroundColor: theme.pageHeader.main, color: theme.pageHeaderText.main,marginBottom: \"5px\", marginTop: \"10px\"}} variant={\"elevation\"}>\n      <Typography variant=\"h3\" style={{textAlign: \"left\", display: \"inline-block\", marginLeft: \"20px\"}}>\n          Mythic Report Generation\n      </Typography>\n    </Paper> \n    <ReportingTable />\n  </div>\n  );\n}\n","import { LoginForm } from './pages/Login/LoginForm';\nimport { Settings } from './pages/Settings/Settings';\nimport { PayloadTypesC2Profiles } from './pages/PayloadTypesC2Profiles/PayloadTypesC2Profiles';\nimport { CreatePayload } from './pages/CreatePayload/CreatePayload';\nimport { CreatePayloadWrapper } from './pages/CreateWrapper/CreatePayload';\nimport { EventFeed } from './pages/EventFeed/EventFeed';\nimport { Operations } from './pages/Operations/Operations';\nimport { BrowserScripts } from './pages/BrowserScripts/BrowserScripts';\nimport { Payloads } from './pages/Payloads/Payloads';\nimport { ExpandedCallback } from './pages/ExpandedCallback/ExpandedCallback';\nimport { Home } from './pages/Home/Home';\nimport { LoggedInRoute } from './utilities/LoggedInRoute';\nimport { Callbacks } from './pages/Callbacks/Callbacks';\nimport { Search } from './pages/Search/Search';\nimport React from 'react';\nimport { TopAppBar } from './TopAppBar';\nimport { useReactiveVar } from '@apollo/client';\nimport { useDarkMode } from './utilities/useDarkMode';\nimport { SnackbarProvider } from 'notistack';\nimport { SingleTaskView } from './pages/SingleTaskView/SingleTaskView';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { GlobalStyles } from '../themes/GlobalStyles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { SnackbarUtilsConfigurator } from './utilities/Snackbar';\nimport { meState } from '../cache';\nimport { Reporting } from './pages/Reporting/Reporting';\n\n//background-color: #282c34;\nimport { Route, Switch } from 'react-router-dom';\n\nexport function App(props) {\n    const me = useReactiveVar(meState);\n    const [themeMode, themeToggler] = useDarkMode();\n    const theme = React.useMemo(\n        () =>\n            createMuiTheme({\n                palette: {\n                    primary: {\n                        main: '#7f93c0',\n                    },\n                    secondary: {\n                        main: '#a791c3',\n                    },\n                    error: {\n                        main: '#f44336',\n                    },\n                    warning: {\n                        main: '#ff9800',\n                    },\n                    info: {\n                        main: '#2196f3',\n                    },\n                    disabled: {\n                        main: 'rgba(0, 0, 0, 0.38)',\n                    },\n                    type: themeMode,\n                    background: {\n                        default: themeMode === 'dark' ? 'rgb(37, 41, 51)' : '#ffffff',\n                        paper: themeMode === 'dark' ? 'rgb(50, 60, 69)' : '#ffffff',\n                        contrast: themeMode === 'dark' ? '#ffffff' : 'rgb(37, 41, 51)',\n                    },\n                    text: {\n                        primary: themeMode === 'dark' ? '#fff' : '#000',\n                        secondary: themeMode === 'dark' ? 'rgba(255, 255, 255, 0.7)' : 'rgba(0, 0, 0, 0.54)',\n                        contrast: themeMode === 'dark' ? '#000' : '#fff',\n                    },\n                    textBackgroundColor: themeMode === 'dark' ? '#74828b' : '#d9dbdc',\n                    textBackgroundColorMythic: themeMode === 'dark' ? '#436b9f' : '#aadcf5',\n                    textBackgroundColorSuccess: themeMode === 'dark' ? '#09a21a' : '#70e373',\n                    textBackgroundColorError: themeMode === 'dark' ? '#9f1616' : '#f19da3',\n                    graphGroup: themeMode === 'dark' ? '#394c5d' : '#d3d7e8',\n                },\n                folderColor: '#f1d592',\n                tableHeader: '#484848',\n                tableBorder: themeMode === 'dark' ? 'rgba(81,81,81,1)' : 'rgba(224,224,224,1)',\n                tableHover: themeMode === 'dark' ? 'rgba(61, 69, 75)' : 'rgba(245, 245, 245)',\n                pageHeader: {\n                    main: '#827E80',\n                },\n                pageHeaderText: {\n                    main: 'white',\n                },\n            }),\n        [themeMode]\n    );\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyles theme={theme} />\n            <CssBaseline />\n            <SnackbarProvider\n                maxSnack={5}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}>\n                <SnackbarUtilsConfigurator />\n                <div style={{ maxHeight: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>\n                    <div style={{ minHeight: '54px', flexGrow: 0 }}>\n                        {me.loggedIn && me.user !== undefined && me.user !== null ? (\n                            <TopAppBar theme={themeMode} toggleTheme={themeToggler} />\n                        ) : null}\n                    </div>\n                    <div style={{ margin: '0px 16px 0px 16px', flexGrow: 1, display: 'flex', flexDirection: 'column', height: \"calc(100% - 54px)\", maxHeight: \"calc(100% - 54px)\", }}>\n                        <Switch>\n                            <LoggedInRoute exact path='/new' component={Home} />\n                            <Route exact path='/new/login' component={LoginForm} />\n                            <LoggedInRoute exact path='/new/settings' component={Settings} />\n                            <LoggedInRoute exact path='/new/payloadtypes' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/eventfeed' component={EventFeed} />\n                            <LoggedInRoute exact path='/new/createpayload' component={CreatePayload} />\n                            <LoggedInRoute exact path='/new/createwrapper' component={CreatePayloadWrapper} />\n                            <LoggedInRoute exact path='/new/payloads' component={Payloads} />\n                            <LoggedInRoute exact path='/new/c2profiles' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/services/' component={PayloadTypesC2Profiles} />\n                            <LoggedInRoute exact path='/new/callbacks' component={Callbacks} />\n                            <LoggedInRoute path='/new/search' component={Search} />\n                            <LoggedInRoute exact path='/new/browserscripts' component={BrowserScripts} />\n                            <LoggedInRoute exact path='/new/task/:taskId' component={SingleTaskView} />\n                            <LoggedInRoute exact path='/new/tasks/by_range' component={SingleTaskView} />\n                            <LoggedInRoute exact path='/new/operations' component={Operations} />\n                            <LoggedInRoute exact path='/new/callbacks/:callbackId' component={ExpandedCallback} />\n                            <LoggedInRoute exact path='/new/reporting' component={Reporting} />\n                        </Switch>\n                    </div>\n                </div>\n            </SnackbarProvider>\n        </ThemeProvider>\n    );\n}\n","//import './wdyr';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport { ApolloProvider, ApolloClient, InMemoryCache, from, split, HttpLink } from '@apollo/client';\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport { successfulRefresh, FailedRefresh } from './cache';\nimport { onError } from \"@apollo/client/link/error\";\nimport { RetryLink } from \"@apollo/client/link/retry\";\nimport { SubscriptionClient } from 'subscriptions-transport-ws'\nimport { getMainDefinition } from '@apollo/client/utilities'\nimport { setContext } from '@apollo/client/link/context';\nimport {snackActions} from './components/utilities/Snackbar';\nimport MessageTypes from 'subscriptions-transport-ws/dist/message-types';\nimport jwt_decode from 'jwt-decode';\nimport {meState} from './cache';\n\nexport const mythicVersion = \"2.3.3\";\nexport const mythicUIVersion = \"0.0.4\";\n\nconst cache = new InMemoryCache({\n    typePolicies: {\n        Query: {\n            fields: {\n                operationeventlog: {\n                    \n                },\n                callback: {\n                  \n                }\n            }\n        }\n    }\n});\n\nconst retryLink = new RetryLink({\n  delay: {\n    initial: 20,\n    max: 300,\n    jitter: true\n  },\n  attempts: {\n    max: 2,\n    retryIf: (error, _operation) => !!error\n  }\n});\nconst httpLink = new HttpLink({\n    uri: window.location.origin + \"/graphql/\",\n    options: {\n        reconnect: true,   \n        connectionParams: {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       }     \n    }\n});\nexport const isJWTValid = () => {\n  let access_token = localStorage.getItem(\"access_token\");\n  //console.log(\"in isJWTValid\", \"access_token\", access_token);\n  if(access_token){\n    const decoded_token = jwt_decode(access_token);\n    if(Date.now() > decoded_token.exp * 1000){\n      //console.log(\"exp is expired: \", decoded_token.exp * 1000, Date.now())\n      return false;\n    }else{\n      return true;\n    }\n  }else{\n    return false;\n  }\n}\nconst authLink = setContext( async (_, {headers}) => {\n  // get the authentication token from local storage if it exists\n  // return the headers to the context so httpLink can read them\n    let access_token = localStorage.getItem('access_token');\n    if(access_token){\n      const decoded_token = jwt_decode(access_token);\n      //console.log(decoded_token);\n      // JWT lifetime is 4 hours. If there's 2hrs or less left of the JWT, update it\n      let diff = Math.abs(Date.now() - (decoded_token.exp * 1000));\n      let twoHours = 7200000; // 2 hours in miliseconds, this is half the JWT lifetime\n      // we want to make sure we try to get a new access_token while the current one is still active or it'll fail\n      if(diff < twoHours || !isJWTValid()){\n        console.log(\"token is at its half life or less, try to get a new token\");\n        const updated = await GetNewToken();\n        //console.log(\"updated?\", updated);\n        if(updated){\n          return{\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n            }\n          }\n        }else{\n          //console.log(\"update failed!\");\n        }\n      }else{\n        //console.log(\"No update needed, access_token still valid\");\n      }\n    }else{\n      //console.log(\"no access token\");\n    }\n    //console.log(\"should be called after updating if needed\");\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      }\n    }\n});\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  console.log(\"errors?\");\n  try{\n    if (graphQLErrors) {\n      console.log(\"[graphQLError]\", graphQLErrors);\n      for (let err of graphQLErrors) {\n        switch (err.extensions.code) {\n          case 'forbidden':\n              snackActions.error(err.message);\n              break;\n          case 'access-denied':\n            //fallsthrough\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in graphql\");\n            // modify the operation context with a new token\n            /*\n            return promiseToObservable(\n              GetNewToken())\n              .flatMap(() => {\n              // retry the request, returning the new observable\n              operation.setContext({\n                headers: {\n                 Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n                },\n              });\n              // retry the request, returning the new observable\n              console.log(\"forwarding operation in promise thingy\", localStorage.getItem(\"access_token\"))\n              return forward(operation);\n              });\n              */\n             console.log(\"would have asked for new token, but auth link will handle it\");\n          case 'validation-failed':\n            console.log(err);\n            return;\n          default:\n              console.log(err);\n              snackActions.error(err.message);\n        }\n      }\n    }\n    if (networkError) {\n      console.log(\"[Network error]\", networkError);\n      \n      if(networkError.extensions === undefined){\n        snackActions.error(\"Failed to connect to Mythic, please refresh\");\n        FailedRefresh();\n        restartWebsockets();\n        window.location = \"/new/login\";\n        return;\n      }\n      switch (networkError.extensions.code) {\n          case 'access-denied':\n            snackActions.warning(\"Access Denied\");\n            break;\n          case 'start-failed':\n            // when AuthenticationError thrown in resolver\n              console.log(\"got start-failed error in network\");\n              FailedRefresh();\n              restartWebsockets();\n              window.location = \"/new/login\";\n              break;\n          default:\n              console.log(networkError);\n        }\n        \n    }\n  }catch(error){\n    snackActions.error(\"Failed to connect to Mythic, please refresh\");\n    console.log(error);\n    restartWebsockets();\n    window.location = \"/new/login\";\n    return;\n  }\n});\n\nconst GetNewToken = async () =>{\n  const requestOptions = {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\"refresh_token\": localStorage.getItem(\"refresh_token\"),\n        \"access_token\": localStorage.getItem(\"access_Token\")})\n  };\n  const response = await fetch('/refresh', requestOptions);\n  const json = response.json().then(data => {\n          console.log(data)\n          if(\"access_token\" in data){\n              successfulRefresh(data);\n              console.log(\"successfully got new access_token\");\n              return true;\n          }else{\n            console.log(\"calling FailedRefresh from GetNewToken call\");\n              FailedRefresh();\n              return false;\n          }\n      }).catch(error => {\n          console.log(\"Error trying to get json response in GetNewToken\", error);\n          console.log(response);\n          FailedRefresh();\n          return false;\n      });\n  return json;\n}\nconst websocketAddress =() =>{\n    return window.location.protocol === \"https:\" ? \"wss://\" + window.location.host + \"/graphql/\" : \"ws://\" + window.location.host + \"/graphql/\";\n}\nconst websocketClient = new SubscriptionClient(websocketAddress(), {\n  reconnect: true,\n  reconnectionAttempts: 10,\n  connectionParams: () => {\n    return {\n      Authorization: `Bearer ${localStorage.getItem('access_token')}`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('access_token')}`\n      }\n    }\n  }\n})\nconst wsLink = new WebSocketLink(websocketClient);\n/*\nconst websocketLink = new WebSocketLink({\n     uri: websocketAddress(),\n     options: {\n       reconnect: true,\n       lazy: true,\n       connectionParams: async () => ({\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('access_token')}`\n          }\n       })\n     }\n    });\n  */\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query)\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    )\n  },\n  wsLink,\n  httpLink\n)\nexport const apolloClient = new ApolloClient({\n   link: from([authLink, errorLink, retryLink, authLink.concat(splitLink)]),\n    cache\n  });\nexport function restartWebsockets () {\n    // Copy current operations\n    const operations = Object.assign({}, websocketClient.operations)\n  \n    // Close connection\n    websocketClient.close(true)\n  \n    // Open a new one\n    websocketClient.connect()\n  \n    // Push all current operations to the new connection\n    Object.keys(operations).forEach(id => {\n      websocketClient.sendMessage(\n        id,\n        MessageTypes.GQL_START,\n        operations[id].options\n      )\n    })\n  }\n  // if the user refreshes the page, we lose all react tracking, so try to reload from localstorage first\nif(localStorage.getItem(\"access_token\") !== null){\n  if(isJWTValid(localStorage.getItem(\"access_token\"))){\n      if(localStorage.getItem(\"user\") !== null){\n          meState({\n              loggedIn: true,\n              access_token: localStorage.getItem(\"access_token\"),\n              refresh_token: localStorage.getItem(\"refresh_token\"),\n              user: JSON.parse(localStorage.getItem(\"user\"))\n          })\n      }\n  }else{\n      //leave meState as a blank value to force new login\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"refresh_token\");\n      localStorage.removeItem(\"user\");\n  }\n}\nReactDOM.render(\n  <React.StrictMode>\n        <ApolloProvider client={apolloClient}>\n            <Router>\n                <App key=\"App\"/>\n            </Router>\n        </ApolloProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","import React, {useEffect} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MythicTextField from '../../MythicComponents/MythicTextField';\nimport Switch from '@material-ui/core/Switch';\nimport Select from '@material-ui/core/Select';\nimport Chip from '@material-ui/core/Chip';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {useQuery, gql } from '@apollo/client';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n  variant: \"menu\",\n  getContentAnchorEl: () => null\n};\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    width: \"100%\",\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(2),\n  },\n}));\nconst operatorQuery = gql`\nquery operatorQuery($operation_id: Int!) {\n  operation_by_pk(id: $operation_id) {\n    id\n    operators {\n      username\n      id\n    }\n  }\n}`;\nexport function CallbacksTabsTaskingFilterDialog(props) {\n  const me = useReactiveVar(meState);\n  const [onlyOperators, setOnlyOperators] = React.useState([]);\n  const [operatorUsernames, setOperatorUsernames] = React.useState([]);\n  const [onlyHasComments, setOnlyHasComments] = React.useState(false);\n  const [onlyCommands, setOnlyCommands] = React.useState([]);\n  const [everythingBut, setEverythingBut] = React.useState([]);\n  const [onlyParameters, setOnlyParameters] = React.useState(\"\");\n  const [commandOptions, setCommandOptions] = React.useState([]);\n  const classes = useStyles();\n  useQuery(operatorQuery, {variables: {operation_id: me.user.current_operation_id},\n    onCompleted: (data) => {\n      setOperatorUsernames(data.operation_by_pk.operators.map( (op) => op.username));\n    }\n  });\n  useEffect( () => {\n    if(props.filterOptions[\"operatorsList\"] !== undefined){\n      setOnlyOperators(props.filterOptions[\"operatorsList\"]);\n    }\n    if(props.filterOptions[\"commentsFlag\"] !== undefined){\n      setOnlyHasComments(props.filterOptions[\"commentsFlag\"]);\n    }\n    if(props.filterOptions[\"commandsList\"] !== undefined){\n      setOnlyCommands(props.filterOptions[\"commandsList\"]);\n    }\n    if(props.filterOptions[\"parameterString\"] !== undefined){\n      setOnlyParameters(props.filterOptions[\"parameterString\"]);\n    }\n    if(props.filterOptions[\"everythingButList\"] !== undefined){\n      setEverythingBut(props.filterOptions[\"everythingButList\"]);\n    }\n    if(props.filterCommandOptions){\n      const commandOptionNames = props.filterCommandOptions.map(c => c.cmd);\n      setCommandOptions(commandOptionNames);\n    }\n  }, [props.filterOptions]);\n  const onSubmit = () => {\n    props.onSubmit({\n      \"operatorsList\": onlyOperators,\n      \"commentsFlag\": onlyHasComments,\n      \"commandsList\": onlyCommands,\n      \"everythingButList\": everythingBut,\n      \"parameterString\": onlyParameters\n    });\n    props.onClose();\n  }\n  const onChange = (name, value, error) => {\n    setOnlyParameters(value);\n  }\n  const handleCommentsChange = (event) => {\n    setOnlyHasComments(event.target.checked);\n  }\n  const handleOperatorChange = (event) => {\n    setOnlyOperators(event.target.value);\n  }\n  const handleOnlyCommandsChange = (event) => {\n    setOnlyCommands(event.target.value);\n    if(event.target.value.length > 0){\n      setEverythingBut([]);\n    }\n  }\n  const handleEverythingButChange = (event) => {\n    setEverythingBut(event.target.value);\n    if(event.target.value.length > 0){\n      setOnlyCommands([]);\n    }\n  }\n  return (\n    <React.Fragment>\n        <DialogTitle id=\"form-dialog-title\">Filter Which Tasks Are Visible</DialogTitle>\n        <DialogContent dividers={true} style={{overflow: \"hidden\"}}>\n            <React.Fragment>\n                <FormControl className={classes.formControl}>\n                <InputLabel id=\"operator-chip-label\">Only Show Tasks by the Following Operators</InputLabel>\n                <Select\n                  labelId=\"operator-chip-label\"\n                  multiple\n                  id=\"operator-chip\"\n                  value={onlyOperators}\n                  onChange={handleOperatorChange}\n                  input={<Input />}\n                  renderValue={(selected) => (\n                    <div className={classes.chips}>\n                      {selected.map((value) => (\n                        <Chip key={value} label={value} className={classes.chip} />\n                      ))}\n                    </div>\n                  )}\n                  MenuProps={MenuProps}\n                >\n                  {operatorUsernames.map((name) => (\n                    <MenuItem key={name} value={name}>\n                      <Checkbox color=\"primary\" checked={onlyOperators.indexOf(name) > -1} />\n                      <ListItemText primary={name} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n                Only Show Tasks with Comments: <Switch checked={onlyHasComments} onChange={handleCommentsChange} color=\"primary\" name=\"Only Comments\" inputProps={{'aria-label': 'primary checkbox'}}/>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"include-chip-label\">Only Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"include-chip-label\"\n                    multiple\n                    id=\"include-chip\"\n                    value={onlyCommands}\n                    onChange={handleOnlyCommandsChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={onlyCommands.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                  <InputLabel id=\"exclude-chip-label\">Do Not Show These Commands</InputLabel>\n                  <Select\n                    labelId=\"exclude-chip-label\"\n                    multiple\n                    id=\"exclude-chip\"\n                    value={everythingBut}\n                    onChange={handleEverythingButChange}\n                    input={<Input />}\n                    renderValue={(selected) => (\n                      <div className={classes.chips}>\n                        {selected.map((value) => (\n                          <Chip key={value} label={value} className={classes.chip} />\n                        ))}\n                      </div>\n                    )}\n                    MenuProps={MenuProps}\n                  >\n                    {commandOptions.map((name) => (\n                      <MenuItem key={name} value={name}>\n                        <Checkbox color=\"primary\" checked={everythingBut.indexOf(name) > -1} />\n                        <ListItemText primary={name} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <MythicTextField value={onlyParameters} onChange={onChange} name=\"Only Show Tasks with the Following Parameter Regex\"/>\n            </React.Fragment>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={props.onClose} variant=\"contained\" >\n            Close\n          </Button>\n          <Button onClick={onSubmit} color=\"primary\" variant=\"contained\" >\n            Submit\n          </Button>\n        </DialogActions>\n  </React.Fragment>\n  );\n}\n\n","import React, {useRef, useEffect} from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\n\nexport function CallbacksTabsTaskingInputTokenSelect(props) {\n    const [options, setOptions] = React.useState([]);\n    const [selected, setSelected] = React.useState('');\n    const inputRef = useRef(null); \n    const handleChange = (event) => {\n        setSelected(event.target.value);\n        props.changeSelectedToken(event.target.value);\n      };\n    useEffect( () => {\n        const opts = [...props.options];\n        setOptions(opts);\n        if(opts.length > 0){\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }else{\n            setSelected(\"Default Token\");\n            props.changeSelectedToken(\"Default Token\");\n        }\n    }, [props.options]);\n    const renderValue = (value) => {\n      if(value === \"Default Token\"){\n        return \"Default Token\";\n      }\n      if(value.User === null){\n        return value.tokenId;\n      }else{\n        return value.User;\n      }\n    }\n  return (\n      <FormControl style={{width: \"20%\"}}>\n        <InputLabel ref={inputRef}>Tokens</InputLabel>\n        <Select\n          labelId=\"demo-dialog-select-label\"\n          id=\"demo-dialog-select\"\n          value={selected}\n          onChange={handleChange}\n          variant=\"filled\"\n          renderValue={renderValue}\n          input={<Input style={{width: \"100%\"}}/>}\n        >\n          <MenuItem value={\"Default Token\"} key={0}>Default Token</MenuItem>\n          {options.map( (opt) => (\n              <MenuItem value={opt.token} key={opt.token.id}>{opt.token.User === null ? opt.token.TokenId + \" - \" + opt.token.description : opt.token.User + \" - \" + opt.token.description}</MenuItem>\n          ) )}\n        </Select>\n      </FormControl>\n  );\n}\n\n","import { IconButton, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport React from 'react';\nimport {TextField} from '@material-ui/core';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {CallbacksTabsTaskingFilterDialog} from './CallbacksTabsTaskingFilterDialog';\nimport {CallbacksTabsTaskingInputTokenSelect} from './CallbacksTabsTaskingInputTokenSelect';\nimport { gql, useSubscription } from '@apollo/client';\nimport { snackActions } from '../../utilities/Snackbar';\nimport parser from 'yargs-parser';\nimport { meState } from '../../../cache';\nimport {useReactiveVar} from '@apollo/client';\nconst arrgv = require('arrgv');\n\nconst GetLoadedCommandsSubscription = gql`\nsubscription GetLoadedCommandsSubscription($callback_id: Int!){\n    loadedcommands(where: {callback_id: {_eq: $callback_id}}){\n        id\n        command {\n            cmd\n            id\n            attributes\n            commandparameters {\n                id\n                parameter_type: type \n                required\n                name\n                ui_position\n                parameter_group_name\n                cli_name\n                display_name\n            }\n        }\n    }\n    \n}\n`;\nconst subscriptionCallbackTokens = gql`\nsubscription subscriptionCallbackTokens ($callback_id: Int!){\n  callbacktoken(where: {deleted: {_eq: false}, callback_id: {_eq: $callback_id}}) {\n    token {\n      TokenId\n      id\n      User\n      description\n    }\n    id\n  }\n}\n`;\nconst subscriptionTask = gql`\nsubscription tasksSubscription($callback_id: Int!){\n    task(where: {callback_id: {_eq: $callback_id}}, order_by: {id: desc}){\n        id\n        original_params\n        display_params\n        command_name\n        comment\n        tasking_location\n        parameter_group_name\n        status\n        operator{\n            username\n        }\n        command {\n            commandparameters {\n                id\n                type\n                name\n            }\n        }\n    }\n}\n`;\n\nexport function CallbacksTabsTaskingInputPreMemo(props){\n    const snackMessageStyles = {anchorOrigin:{vertical: \"bottom\", horizontal: \"left\"}, autoHideDuration: 2000, preventDuplicate: true, maxSnack: 1, style:{marginBottom: \"50px\"}};\n    const snackReverseSearchMessageStyles = {anchorOrigin:{vertical: \"bottom\", horizontal: \"left\"}, autoHideDuration: 1000, preventDuplicate: true, maxSnack: 1, style:{marginBottom: \"100px\"}};\n    const [message, setMessage] = React.useState(\"\");\n    const [loadedOptions, setLoadedOptions] = React.useState([]);\n    const [taskOptions, setTaskOptions] = React.useState([]);\n    const [taskOptionsIndex, setTaskOptionsIndex] = React.useState(-1);\n    const [filteredTaskOptions, setFilteredTaskOptions] = React.useState([]);\n\n    const [tabOptions, setTabOptions] = React.useState([]);\n    const [tabOptionsIndex, setTabOptionsIndex] = React.useState(-1);\n\n    const [openFilterOptionsDialog, setOpenFilterOptionsDialog] = React.useState(false);\n    const [tokenOptions, setTokenOptions] = React.useState([]);\n\n    const [unmodifiedHistoryValue, setUnmodifiedHistoryValue] = React.useState(\"parsed_cli\");\n    const [reverseSearching, setReverseSearching] = React.useState(false);\n    const [reverseSearchString, setReverseSearchString] = React.useState('');\n    const [reverseSearchOptions, setReverseSearchOptions] = React.useState([]);\n    const [reverseSearchIndex, setReverseSearchIndex] = React.useState(-1);\n\n    const me = useReactiveVar(meState);\n\n    useSubscription(subscriptionCallbackTokens, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setTokenOptions(subscriptionData.data.callbacktoken);\n        }\n      });\n    useSubscription(subscriptionTask, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            setTaskOptions(subscriptionData.data.task);\n            const filteredOptions = subscriptionData.data.task.filter( c => applyFilteringToTasks(c));\n            setFilteredTaskOptions(filteredOptions);\n        }\n    });\n    useSubscription(GetLoadedCommandsSubscription, {\n        variables: {callback_id: props.callback_id}, fetchPolicy: \"network-only\",\n        shouldResubscribe: true,\n        onSubscriptionData: ({subscriptionData}) => {\n            const cmds = subscriptionData.data.loadedcommands.map( c => {\n                let cmdData = {...c.command};\n                cmdData.attributes = JSON.parse(cmdData.attributes);\n                return cmdData;\n            })\n            cmds.push({cmd: \"help\", description: \"Get help for a command or info about loaded commands\", commandparameters: [], attributes: {supported_os: []}});\n            cmds.push({cmd: \"clear\", description: \"Clear 'submitted' jobs from being pulled down by an agent\", commandparameters: [], attributes: {supported_os: []}});\n            cmds.sort((a,b) => a.cmd > b.cmd ? 1 : -1);\n            setLoadedOptions(cmds);\n        }\n    });\n    React.useEffect( () => {\n        //console.log(\"filter updated\")\n        const filteredOptions = taskOptions.filter( c => applyFilteringToTasks(c));\n        setFilteredTaskOptions(filteredOptions);\n    }, [props.filterOptions])\n    const applyFilteringToTasks = (task) => {\n        if(task.display_params.includes(\"help\") && task.operator.username !== me.user.username){\n            return false;\n          }\n          if(props.filterOptions === undefined){\n            return true;\n          }\n          if(props.filterOptions[\"operatorsList\"].length > 0){\n            if(!props.filterOptions[\"operatorsList\"].includes(task.operator.username)){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"commentsFlag\"]){\n            if(task.comment === \"\"){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"commandsList\"].length > 0){\n            // only show these commands\n            if(!props.filterOptions[\"commandsList\"].includes(task.command_name)){\n              return false;\n            }\n          }\n          if(props.filterOptions[\"everythingButList\"].length > 0){\n            if(task.command !== null){\n              if(props.filterOptions[\"everythingButList\"].includes(task.command_name)){\n                return false;\n              }\n            }\n          }\n          if(props.filterOptions[\"parameterString\"] !== \"\"){\n            let regex = new RegExp(props.filterOptions[\"parameterString\"]);\n            if(!regex.test(task.display_params)){\n              return false;\n            }\n          }\n          return true;\n    }\n    const handleInputChange = (event) => {\n        setTabOptions([]);\n        setTabOptionsIndex(0);\n        setMessage(event.target.value);\n        if(event.target.value.length === 0){\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n        }\n    }\n    const onKeyDown = (event) => {\n        if(event.key === \"r\" && event.ctrlKey){\n            //this means they typed ctrl+r, so they're wanting to do a reverse search for a command\n            setReverseSearching(true);\n            setMessage(\"\");\n            setReverseSearchString(\"\");\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n        }\n        if(event.key === \"Tab\"){\n            // if we're still typing the command, we want this to cycle through possible matching commands\n            // if we have a command, this should cycle through parameter names that are required\n            event.stopPropagation();\n            event.preventDefault();\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n            if(message.includes(\" \")){\n                // this means we're not trying to help with the initial command since there's already a space in what the user typed\n                // first find the command in question\n                let cmd = loadedOptions.find( l => l.cmd === message.split(\" \")[0]);\n                if(cmd.commandparameters.length > 0){\n                    if(message[message.length -1] === \" \"){\n                        // somebody hit tab after a parameter name or after a parameter value\n                        const parsed = parseCommandLine(message, cmd);\n                        const cmdGroupNames = determineCommandGroupName(cmd, parsed);\n                        if(cmdGroupNames === undefined){\n                            snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n                            return;\n                        }\n                        console.log(\"cmdGroupNames in tab\", cmdGroupNames);\n                        // look for required arguments that aren't present in our parsed dictionary\n                        for(const [key, value] of Object.entries(parsed)){\n                            if(key !== \"_\"){\n                                if(value !== value || value === undefined){\n                                    snackActions.warning(key + \" needs a valid value\",snackMessageStyles);\n                                    return;\n                                }\n                                if(value === undefined){\n                                    // this means we parsed something and it's undefined, so we need a value\n                                    if(message.endsWith(\" -\" + key)){\n                                        //this value is undefined and it's the last one in the list, so we can potentially swap it out with another parameter\n                                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                                            if(cmd.commandparameters[i][\"required\"] && \n                                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) && \n                                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                                const newMsg = message.trim().slice(0, -1 * key.length) + cmd.commandparameters[i][\"cli_name\"];\n                                                setMessage(newMsg);\n                                                return;\n                                            }\n                                        }\n                                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                                            if(!cmd.commandparameters[i][\"required\"] && \n                                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                                const newMsg = message.trim().slice(0, -1 * key.length) + cmd.commandparameters[i][\"cli_name\"];\n                                                setMessage(newMsg);\n                                                return;\n                                            }\n                                        }\n                                    }\n                                    snackActions.warning(key + \" needs a value\", snackMessageStyles);\n                                    return;\n                                }\n                            }\n                        }\n                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                            if(cmd.commandparameters[i][\"required\"] && \n                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                const newMsg = message.trim() + \" -\" + cmd.commandparameters[i][\"cli_name\"];\n                                setMessage(newMsg);\n                                return;\n                            }\n                        }\n                        for(let i = 0; i < cmd.commandparameters.length; i++){\n                            if(!cmd.commandparameters[i][\"required\"] && \n                                !(cmd.commandparameters[i][\"cli_name\"] in parsed) &&\n                                (cmdGroupNames.includes(cmd.commandparameters[i][\"parameter_group_name\"]) || cmdGroupNames.length === 0)){\n                                const newMsg = message.trim() + \" -\" + cmd.commandparameters[i][\"cli_name\"];\n                                setMessage(newMsg);\n                                return;\n                            }\n                        }\n                    }else{\n                        // somebody hit tab when looking at something like `shell dj` or `shell -command`\n                        // so, we should check if the last word is a -CommandParameterName and if so, determine other parameters to replace it\n                        // if we're looking at the first option, do nothing until they hit space\n                        if(tabOptions.length > 0){\n                            const newIndex = (tabOptionsIndex + 1) % tabOptions.length;\n                            setTabOptionsIndex(newIndex);\n                            let newMessage = message.split(\" \").slice(0, -1).join(\" \") + \" -\" + tabOptions[newIndex];\n                            setMessage(newMessage);\n                            return;\n                        }\n                        const pieces = message.split(\" \");\n                        const lastFlag = pieces.slice(-1)[0];\n                        // determine if this last thing we see is a flag or not\n                        if(lastFlag.startsWith(\"-\")){\n                            // the last thing we see starts with - and doesn't have a space at the end, so treat this like a tab-completable command parameter\n                            // so we need to remove it and see what group we're dealing with so far\n                            const parsed = parseCommandLine(pieces.slice(0, -1).join(\" \"), cmd);\n                            const cmdGroupNames = determineCommandGroupName(cmd, parsed);\n                            if(cmdGroupNames === undefined){\n                                snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n                                return;\n                            }\n                            // determine if we're looking at a valid flag name in lastFlag or if it's simply the start of a flag\n                            //console.log(\"swapping parameter name, group options: \", cmdGroupNames);\n                            let exactMatch = cmd.commandparameters.find(cur => \n                                cmdGroupNames.includes(cur.parameter_group_name) && \n                                cur.cli_name === lastFlag.slice(1) &&\n                                !(cur.cli_name in parsed)\n                            );\n                            let paramOptions = [];\n                            if(exactMatch){\n                                // what the user typed or what we filled out is an exact match to a parameter name\n                                // the options should be all parameters in that group except for the ones already supplied in parsed\n                                paramOptions = cmd.commandparameters.reduce( (prev, cur) => {\n                                    if(cmdGroupNames.includes(cur.parameter_group_name) && \n                                        cur.cli_name !== lastFlag.slice(1) &&\n                                        !(cur.cli_name in parsed)){\n                                        return [...prev, cur.cli_name];\n                                    }else{\n                                        return [...prev];\n                                    }\n                                }, []);\n                                paramOptions.push(lastFlag.slice(1));\n                            }else{\n                                // what the user typed isn't an exact match, so find things that start with what they're trying to type\n                                paramOptions = cmd.commandparameters.reduce( (prev, cur) => {\n                                    if(cmdGroupNames.includes(cur.parameter_group_name) && \n                                        cur.cli_name.toLowerCase().startsWith(lastFlag.slice(1).toLocaleLowerCase()) &&\n                                        !(cur.cli_name in parsed)){\n                                        return [...prev, cur.cli_name];\n                                    }else{\n                                        return [...prev];\n                                    }\n                                }, []);\n                            }\n                            if(paramOptions.length > 0){\n                                if(paramOptions.length === 1){\n                                    setTabOptions([]);\n                                    setTabOptionsIndex(0);\n                                    let newMsg = pieces.slice(0,-1).join(\" \") + \" -\" + paramOptions[0];\n                                    setMessage(newMsg);\n                                }else{\n                                    setTabOptions(paramOptions);\n                                    setTabOptionsIndex(0);\n                                    let newMsg = pieces.slice(0,-1).join(\" \") + \" -\" + paramOptions[0];\n                                    setMessage(newMsg);\n                                }\n                                return;\n                            }else{\n                                snackActions.warning(\"Unknown Parameter Name\", snackMessageStyles);\n                                return;\n                            }\n                        }else{\n                            // the last thing doesn't start with -, so we're just looking at text, do nothing for now\n                            return;\n                        }\n                        \n                    }\n                    \n                    snackActions.info(\"No more arguments for command\", snackMessageStyles);\n                }else{\n                    snackActions.info(\"No arguments for command\", snackMessageStyles);\n                }\n                \n            }else{\n                // somebody hit tab with either a blank message or a partial word\n                if(tabOptions.length === 0){\n                    let opts = loadedOptions.filter( l => l.cmd.toLowerCase().startsWith(message.toLocaleLowerCase()) && (l.attributes.supported_os.length === 0 || l.attributes.supported_os.includes(props.callback_os)));\n                    setTabOptions(opts);\n                    setTabOptionsIndex(0);\n                    if(opts.length > 0){\n                        setMessage(opts[0].cmd);\n                    }\n                }else{\n                    setTabOptionsIndex( (tabOptionsIndex + 1) % tabOptions.length );\n                    setMessage(tabOptions[(tabOptionsIndex + 1) % tabOptions.length].cmd)\n                }\n            }\n        }else if(event.key === \"Enter\"){\n            if(event.shiftKey){\n                onSubmitCommandLine(event, true);\n            }else{\n                onSubmitCommandLine(event, false);\n            }\n            \n        }else if(event.key === \"ArrowUp\"){\n            if(filteredTaskOptions.length === 0){\n                snackActions.warning(\"No previous tasks\", snackMessageStyles);\n                return;\n            }else{\n                \n                let newIndex = (taskOptionsIndex + 1);\n                if(newIndex > filteredTaskOptions.length -1){\n                    newIndex = filteredTaskOptions.length -1;\n                }\n                setTaskOptionsIndex(newIndex);\n                setMessage(filteredTaskOptions[newIndex].command_name + \" \" + filteredTaskOptions[newIndex].original_params);\n                setUnmodifiedHistoryValue(filteredTaskOptions[newIndex].tasking_location);\n                //setMessage(taskOptions[newIndex].command_name + \" \" + taskOptions[newIndex].display_params);\n            }\n        }else if(event.key === \"ArrowDown\"){\n            if(filteredTaskOptions.length === 0){\n                snackActions.warning(\"No previous tasks\", snackMessageStyles);\n                return;\n            }else{\n                let newIndex = (taskOptionsIndex - 1);\n                if(newIndex < 0){\n                    newIndex = 0;\n                }\n                setTaskOptionsIndex(newIndex);\n                setMessage(filteredTaskOptions[newIndex].command_name + \" \" + filteredTaskOptions[newIndex].original_params);\n                setUnmodifiedHistoryValue(filteredTaskOptions[newIndex].tasking_location);\n                //setMessage(taskOptions[newIndex].command_name + \" \" + taskOptions[newIndex].display_params);\n            }\n        }else{\n            setTabOptions([]);\n            setTabOptionsIndex(0);\n            if(taskOptionsIndex !== -1){\n                setTaskOptionsIndex(-1);\n            }\n        }\n    }\n    const parseCommandLine = (command_line, cmd) => {\n        // given a command line and the associated command\n        let stringArgs = [];\n        let booleanArgs = [];\n        let arrayArgs = [];\n        let numberArgs = [];\n        for(let i = 0; i < cmd.commandparameters.length; i++){\n            switch(cmd.commandparameters[i].parameter_type){\n                case \"Choice\":\n                case \"String\":\n                    stringArgs.push(cmd.commandparameters[i].cli_name);\n                case \"Number\":\n                    numberArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                case \"Boolean\":\n                    booleanArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                case \"Array\":\n                case \"ChoiceMultiple\":\n                    arrayArgs.push(cmd.commandparameters[i].cli_name);\n                    break;\n                default:\n                    stringArgs.push(cmd.commandparameters[i].cli_name);\n            }\n        }\n        try{\n            const argv = arrgv(command_line);\n            //console.log(\"argv\", argv);\n            //console.log(\"arrayArgs\", arrayArgs);\n            const yargs_parsed = parser(argv, {\n                string: stringArgs,\n                boolean: booleanArgs,\n                number: numberArgs,\n                array: arrayArgs,\n                configuration: {\n                    \"short-option-groups\": false,\n                    \"camel-case-expansion\": false,\n                    \"dot-notation\": false,\n                    \"unknown-options-as-args\": false,\n                    \"greedy-arrays\": true\n                }\n            });\n            //console.log(yargs_parsed, cmd.commandparameters);\n            return yargs_parsed;\n        }catch(error){\n            snackActions.warning(\"Failed to parse command line: \" + error, snackMessageStyles);\n            return undefined;\n        }\n    }\n    const determineCommandGroupName = (cmd, parsed) => {\n        if(cmd.commandparameters.length === 0){\n            return [];\n        }\n        let cmdGroupOptions = cmd.commandparameters.reduce( (prev, cur) => {\n            if(prev.includes(cur.parameter_group_name)){\n                return [...prev];\n            }\n            return [...prev, cur.parameter_group_name];\n        }, []);\n        for(const key of Object.keys(parsed)){\n            // for all of the things we've parsed out so far, determin their parameter groups\n            if( key !== \"_\"){\n                // we don't care about positional arguments at the moment\n                let paramGroups = [];\n                for(let i = 0; i < cmd.commandparameters.length; i++){\n                    if(cmd.commandparameters[i][\"cli_name\"] === key){\n                        paramGroups.push(cmd.commandparameters[i][\"parameter_group_name\"])\n                    }\n                }\n                // now paramGroups has all of the group names associated with `key`\n                // we have some set of possible options, so we need to find the intersection with paramGroups and cmdGroupOptions\n                let intersection = cmdGroupOptions.reduce( (prev, cur) => {\n                    if(paramGroups.includes(cur)){\n                        return [...prev, cur];\n                    }\n                    return [...prev];\n                }, [])\n                if(intersection.length === 0){\n                    // this is a bad thing, we did an intersection and there's no similar paramter groups, but parameters have been supplied\n                    return [];\n                }\n                cmdGroupOptions = [...intersection];\n            }\n        }\n        // now cmdGroupOptions is a list of all the matching parameter_group_names for the commandline arguments we've specified\n        return cmdGroupOptions;\n    }\n    const fillOutPositionalArguments = (cmd, parsed, groupNames) => {\n        let parsedCopy = {...parsed};\n        parsedCopy[\"_\"].shift(); // get rid of the command name from this list of arguments.\n        if(cmd.commandparameters.length === 0){\n            return parsedCopy;\n        }\n        if(groupNames.length === 0){\n            return parsedCopy;\n        }\n        // figure out how to deal with positional parameters\n        const groupParameters = cmd.commandparameters.filter(c => c.parameter_group_name === groupNames[0]);\n        groupParameters.sort((a,b) => a.ui_position < b.ui_position ? -1 : 1);\n        // now we have all of the parameters and they're sorted by `ui_position`\n        \n        let unSatisfiedArguments = [];\n        for(let i = 0; i < groupParameters.length; i++){\n            if( !(groupParameters[i][\"cli_name\"] in parsedCopy)){\n                // this parameter hasn't been supplied yet, track it\n                unSatisfiedArguments.push(groupParameters[i]); \n            }\n        }\n        // now iterate over the unsatisfied arguments and add in the positional paramters\n        for(let i = 0; i < unSatisfiedArguments.length -1; i++){\n            // we cut this short by one so that the last unSatisifedArgument can do a greedy matching for the rest of what was supplied\n            // this parameter hasn't been supplied yet, check if we have any positional parameters in parsedCopy[\"_\"]\n            if(parsedCopy[\"_\"].length > 0){\n                parsedCopy[groupParameters[i][\"cli_name\"]] = parsedCopy[\"_\"].shift();\n            }\n        }\n        if(unSatisfiedArguments.length > 0 && parsedCopy[\"_\"].length > 0){\n            parsedCopy[unSatisfiedArguments[unSatisfiedArguments.length -1][\"cli_name\"]] = parsedCopy[\"_\"].join(\" \");\n            parsedCopy[\"_\"] = [];\n        }\n        return parsedCopy;\n\n    }\n    const onSubmitCommandLine = (evt, force_parsed_popup) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n        //console.log(\"onSubmitCommandLine\", evt, message);\n        let splitMessage = message.split(\" \");\n        let cmd = loadedOptions.find( l => l.cmd === splitMessage[0]);\n        if(cmd === undefined){\n            snackActions.warning(\"Unknown command\", snackMessageStyles);\n            return;\n        }\n        let cmdGroupName = \"Default\";\n        let parsedWithPositionalParameters = {};\n        if(unmodifiedHistoryValue.includes(\"modal\") || unmodifiedHistoryValue.includes(\"browserscript\")){\n            // these are the two kinds that'll introduce dictionary values as original_params\n            try{\n                let params = splitMessage.slice(1).join(\" \");\n                parsedWithPositionalParameters = JSON.parse(params);\n                cmdGroupName = determineCommandGroupName(cmd, parsedWithPositionalParameters);\n            }catch(error){\n                snackActions.warning(\"Failed to parse modified JSON value\", snackMessageStyles);\n                return;\n            }   \n        }else{\n            let parsed = parseCommandLine(message, cmd);\n            if(!parsed){\n                return;\n            }\n            cmdGroupName = determineCommandGroupName(cmd, parsed);\n            if(cmd.commandparameters.length > 0){\n                parsedWithPositionalParameters = fillOutPositionalArguments(cmd, parsed, cmdGroupName);\n                if(parsedWithPositionalParameters[\"_\"].length > 0){\n                    snackActions.warning(\"Too many positional arguments given. Did you mean to quote some of them?\", snackMessageStyles);\n                    return;\n                }\n            }else{\n                parsedWithPositionalParameters = parsed;\n            }\n        }\n        if(cmdGroupName === undefined){\n            snackActions.warning(\"Two or more of the specified parameters can't be used together\", snackMessageStyles);\n            return;\n        }else if(cmdGroupName.length > 1){\n            if(Boolean(force_parsed_popup)){\n                props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), cmdGroupName, unmodifiedHistoryValue);\n            }else{\n                if(cmdGroupName.includes(\"Default\")){\n                    props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), [\"Default\"], unmodifiedHistoryValue);\n                }else{\n                    snackActions.warning(\"Passed arguments are ambiguous, use shift+enter for modal or provide more parameters\", snackMessageStyles);\n                    return;\n                }\n            }\n            setMessage(\"\");\n            setTaskOptionsIndex(-1);\n            setReverseSearchIndex(-1);\n            setReverseSearching(false);\n            setUnmodifiedHistoryValue(\"parsed_cli\");\n            return;\n        }\n        //console.log(\"positional args added in:\", parsedWithPositionalParameters);\n        props.onSubmitCommandLine(message, cmd, parsedWithPositionalParameters, Boolean(force_parsed_popup), cmdGroupName, unmodifiedHistoryValue);\n        setMessage(\"\");\n        setTaskOptionsIndex(-1);\n        setReverseSearchIndex(-1);\n        setReverseSearching(false);\n        setUnmodifiedHistoryValue(\"parsed_cli\");\n    }\n    const onClickFilter = () => {\n        setOpenFilterOptionsDialog(true);\n    }\n    const handleReverseSearchInputChange = (event) => {\n        setReverseSearchString(event.target.value);\n        if(event.target.value.length === 0){\n            setMessage(\"\");\n            setReverseSearchOptions([]);\n            setReverseSearchIndex(0);\n            return;\n        }\n        // need to do a reverse i search through taskOptions\n        const lowerCaseTextSearch = event.target.value.toLowerCase();\n        const matchingOptions = taskOptions.filter( x => (x.command_name + \" \" + x.original_params).toLowerCase().includes(lowerCaseTextSearch));\n        const filteredMatches = matchingOptions.filter( x => applyFilteringToTasks(x))\n        setReverseSearchOptions(filteredMatches);\n        if(filteredMatches.length > 0){\n            setMessage(filteredMatches[0].command_name + \" \" + filteredMatches[0].original_params);\n        }\n    }\n    const onReverseSearchKeyDown = (event) => {\n        if(event.key === \"Escape\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n        }else if(event.key === \"Tab\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n        }else if(event.key === \"Enter\"){\n            setReverseSearching(false);\n            setReverseSearchIndex(0);\n            setReverseSearchOptions([]);\n            onSubmitCommandLine(event);\n        }else if(event.key === \"ArrowUp\"){\n            // go up through the reverseSearchOptions by incrementing reverseSearchIndex\n            // setMessage to teh value\n            if(reverseSearchOptions.length === 0){\n                snackActions.warning(\"No matching options\", snackReverseSearchMessageStyles);\n                return;\n            }else{\n                const newIndex = (reverseSearchIndex + 1) % reverseSearchOptions.length;\n                setReverseSearchIndex(newIndex);\n                setMessage(reverseSearchOptions[newIndex].command_name + \" \" + reverseSearchOptions[newIndex].original_params);\n            }\n        }else if(event.key === \"ArrowDown\"){\n            // go down through the reverseSearchOptions by decrementing reverseSearchIndex\n            // setMessage to the value\n            if(reverseSearchOptions.length === 0){\n                snackActions.warning(\"No matching options\", snackReverseSearchMessageStyles);\n                return;\n            }else{\n                let newIndex = (reverseSearchIndex - 1) % reverseSearchOptions.length;\n                if(newIndex < 0){\n                    newIndex = reverseSearchOptions.length - 1;\n                }\n                setReverseSearchIndex(newIndex);\n                setMessage(reverseSearchOptions[newIndex].command_name + \" \" + reverseSearchOptions[newIndex].original_params);\n            }\n        }\n    }\n    return (\n        <React.Fragment>\n            {reverseSearching &&\n                <TextField\n                    placeholder={\"Search previous commands\"}\n                    onKeyDown={onReverseSearchKeyDown}    \n                    onChange={handleReverseSearchInputChange}                     \n                    size=\"small\"\n                    autoFocus={true}\n                    variant=\"outlined\"\n                    value={reverseSearchString}\n                    fullWidth={true}\n                    InputProps={{ type: 'search',\n                        startAdornment: <React.Fragment><Typography style={{width: \"10%\"}}>reverse-i-search:</Typography></React.Fragment>\n                    \n                    }}\n                />\n            }\n            <TextField\n                placeholder={\"Task an agent...\"}\n                onKeyDown={onKeyDown}    \n                onChange={handleInputChange}                     \n                size=\"small\"\n                variant=\"outlined\"\n                disabled={reverseSearching}\n                value={message}\n                autoFocus={true}\n                fullWidth={true}\n                style={{marginBottom: \"10px\"}}\n                InputProps={{ type: 'search',\n                    endAdornment:\n                    <React.Fragment>\n                    <IconButton color=\"primary\" variant=\"contained\" onClick={onSubmitCommandLine}><SendIcon/></IconButton>\n                    <IconButton color=\"secondary\" variant=\"contained\" onClick={onClickFilter}><TuneIcon/></IconButton>\n                    </React.Fragment>,\n                    startAdornment: <React.Fragment>\n                        {tokenOptions.length > 0 ? (\n                            <CallbacksTabsTaskingInputTokenSelect options={tokenOptions} changeSelectedToken={props.changeSelectedToken}/>\n                        ) : (null)}\n                        \n                    </React.Fragment>\n                \n                }}\n                />\n              {openFilterOptionsDialog &&\n                <MythicDialog fullWidth={true} maxWidth=\"md\" open={openFilterOptionsDialog} \n                    onClose={()=>{setOpenFilterOptionsDialog(false);}} \n                    innerDialog={<CallbacksTabsTaskingFilterDialog filterCommandOptions={loadedOptions} onSubmit={props.onSubmitFilter} filterOptions={props.filterOptions} onClose={()=>{setOpenFilterOptionsDialog(false);}} />}\n                />\n              }\n        </React.Fragment>\n    )\n}\nexport const CallbacksTabsTaskingInput = React.memo(CallbacksTabsTaskingInputPreMemo);\n","import {MythicTabPanel, MythicTabLabel} from '../../../components/MythicComponents/MythicTabPanel';\nimport React, {useEffect, useRef, useCallback, useLayoutEffect} from 'react';\nimport { gql, useMutation, useLazyQuery, useSubscription } from '@apollo/client';\nimport { TaskDisplay } from './TaskDisplay';\nimport {snackActions} from '../../utilities/Snackbar';\nimport { MythicDialog } from '../../MythicComponents/MythicDialog';\nimport {TaskParametersDialog} from './TaskParametersDialog';\nimport {CallbacksTabsTaskingInput} from './CallbacksTabsTaskingInput';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { IconButton, Tooltip} from '@material-ui/core';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nimport {MythicModifyStringDialog} from '../../MythicComponents/MythicDialog';\n\n\nexport function CallbacksTabsTaskingLabel(props){\n    const [description, setDescription] = React.useState(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription ? props.tabInfo.callbackDescription : \"Callback: \" + props.tabInfo.callbackID)\n    const [openEditDescriptionDialog, setOpenEditDescriptionDialog] = React.useState(false);\n    const onContextMenu = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        setOpenEditDescriptionDialog(true);\n    }\n    useEffect( () => {\n        if(props.tabInfo.customDescription !== \"\" && props.tabInfo.customDescription !== undefined){\n            setDescription(props.tabInfo.customDescription);\n        }else if(props.tabInfo.payloadDescription !== props.tabInfo.callbackDescription){\n            setDescription(props.tabInfo.callbackDescription);\n        }else{\n            setDescription(\"Callback: \" + props.tabInfo.callbackID);\n        }\n    }, [props.tabInfo.payloadDescription, props.tabInfo.customDescription])\n    const editDescriptionSubmit = (description) => {\n        props.onEditTabDescription(props.tabInfo, description);\n    }\n    return (\n        <React.Fragment>\n            <MythicTabLabel label={description} onContextMenu={onContextMenu} {...props}/>\n            {openEditDescriptionDialog &&\n                <MythicDialog fullWidth={true} open={openEditDescriptionDialog}  onClose={() => {setOpenEditDescriptionDialog(false);}}\n                    innerDialog={\n                        <MythicModifyStringDialog title={\"Edit Tab's Description\"} onClose={() => {setOpenEditDescriptionDialog(false);}} value={description} onSubmit={editDescriptionSubmit} />\n                    }\n                />\n            }\n        </React.Fragment>  \n    )\n}\nexport const taskingDataFragment = gql`\n    fragment taskData on task {\n        comment\n        callback_id\n        commentOperator{\n            username\n        }\n        completed\n        id\n        operator{\n            username\n        }\n        original_params\n        display_params\n        status\n        timestamp\n        command {\n          cmd\n          id\n        }\n        command_name\n        responses_aggregate {\n            aggregate{\n              count\n              max {\n                timestamp\n              }\n            }\n          }\n        opsec_pre_blocked\n        opsec_pre_bypassed\n        opsec_post_blocked\n        opsec_post_bypassed\n        tasks {\n            id\n        }\n        token {\n            id\n        }\n    }\n`;\nexport const createTaskingMutation = gql`\nmutation createTasking($callback_id: Int!, $command: String!, $params: String!, $files: String, $token_id: Int, $tasking_location: String, $original_params: String, $parameter_group_name: String) {\n  createTask(callback_id: $callback_id, command: $command, params: $params, files: $files, token: $token_id, tasking_location: $tasking_location, original_params: $original_params, parameter_group_name: $parameter_group_name) {\n    status\n    id\n    error\n  }\n}\n`;\n// this is to listen for the latest taskings\nconst fetchLimit = 10;\nconst getTaskingQuery = gql`\n${taskingDataFragment}\nsubscription getTasking($callback_id: Int!, $fromNow: timestamp!, $limit: Int){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}, timestamp: {_gt: $fromNow}}, order_by: {id: desc}, limit: $limit) {\n        ...taskData\n    }\n}\n `;\nconst getNextBatchTaskingQuery = gql`\n${taskingDataFragment}\nquery getBatchTasking($callback_id: Int!, $offset: Int!, $fetchLimit: Int!){\n    task(where: {callback_id: {_eq: $callback_id}, parent_task_id: {_is_null: true}}, order_by: {id: desc}, limit: $fetchLimit, offset: $offset) {\n        ...taskData\n    }\n    callback(where: {id: {_eq: $callback_id}}){\n        id\n    }\n}\n`;\nexport const CallbacksTabsTaskingPanel = ({tabInfo, index, value, onCloseTab}) =>{\n    const [taskLimit, setTaskLimit] = React.useState(10);\n    const [openParametersDialog, setOpenParametersDialog] = React.useState(false);\n    const [commandInfo, setCommandInfo] = React.useState({});\n    const [taskingData, setTaskingData] = React.useState({task: []});\n    const taskingDataRef = React.useRef({task: []});\n    const [fromNow, setFromNow] = React.useState((new Date()).toISOString());\n    const [selectedToken, setSelectedToken] = React.useState({});\n    const [filterOptions, setFilterOptions] = React.useState({\n        \"operatorsList\": [],\n        \"commentsFlag\": false,\n        \"commandsList\": [],\n        \"parameterString\": \"\",\n        \"everythingButList\": []\n    });\n    const [canScroll, setCanScroll] = React.useState(true);\n    useEffect( () => {\n        taskingDataRef.current = taskingData;\n    }, [taskingData]);\n    const [fetched, setFetched] = React.useState(false);\n    const [fetchedAllTasks, setFetchedAllTasks] = React.useState(false);\n    const messagesEndRef = useRef(null);\n    const [createTask] = useMutation(createTaskingMutation, {\n        update: (cache, {data}) => {\n            if(data.createTask.status === \"error\"){\n                snackActions.error(data.createTask.error);\n            }else{\n                snackActions.success(\"Task created\", {autoHideDuration: 1000});\n            }\n        },\n        onError: data => {\n            console.error(data);\n        }\n    });\n    const equalTaskTrees = (oldArray, newArray) => {\n        if(oldArray.length !== newArray.length){\n            return false;\n        }\n        for(let i = 0; i < oldArray.length; i++){\n            if(oldArray[i].comment !== newArray[i].comment){\n                return false;\n            }\n            if(oldArray[i].commentOperator !== newArray[i].commentOperator){\n                return false;\n            }\n            if(oldArray[i].completed !== newArray[i].completed){\n                return false;\n            }\n            if(oldArray[i].display_params !== newArray[i].display_params){\n                return false;\n            }\n            if(oldArray[i].original_params !== newArray[i].original_params){\n                return false;\n            }\n            if(oldArray[i].status !== newArray[i].status){\n                return false;\n            }\n            if(oldArray[i].timestamp !== newArray[i].timestamp){\n                return false;\n            }\n            if(oldArray[i].responses_aggregate.aggregate.count !== newArray[i].responses_aggregate.aggregate.count){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_blocked !== newArray[i].opsec_pre_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_pre_bypassed !== newArray[i].opsec_pre_bypassed){\n                return false;\n            }\n            if(oldArray[i].opsec_post_blocked !== newArray[i].opsec_post_blocked){\n                return false;\n            }\n            if(oldArray[i].opsec_post_bypassed !== newArray[i].opsec_post_bypassed){\n                return false;\n            }\n            if(oldArray[i].tasks.length !== newArray[i].tasks.length){\n                return false;\n            }\n        }\n        return true;\n    }\n    const subscriptionDataCallback = useCallback( ({subscriptionData}) => {\n        if(!fetched){\n            setFetched(true);\n        }\n        //console.log(subscriptionData);\n        const oldLength = taskingDataRef.current.task.length;\n        const mergedData = subscriptionData.data.task.reduce( (prev, cur) => {\n            const index = prev.findIndex(element => element.id === cur.id);\n            if(index > -1){\n                // need to update an element\n                const updated = prev.map( (element) => {\n                    if(element.id === cur.id){\n                        return cur;\n                    }else{\n                        return element;\n                    }\n                });\n                return updated;\n            }else{\n                return [...prev, cur];\n            }\n        }, [...taskingDataRef.current.task]);\n        mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n        if(!equalTaskTrees(taskingDataRef.current.task, mergedData)){\n            setTaskingData({task: mergedData});\n        }\n        if(mergedData.length > oldLength){\n            setCanScroll(true);\n        }     \n        if(mergedData.length > taskLimit){\n            setTaskLimit(mergedData.length);\n        }\n    }, [fetched, setFetched, setCanScroll, taskLimit])\n    useSubscription(getTaskingQuery, {\n        variables: {callback_id: tabInfo.callbackID, fromNow:fromNow, limit: taskLimit},\n        onError: data => {\n            console.error(data)\n        },\n        fetchPolicy: \"no-cache\",\n        onSubscriptionData: subscriptionDataCallback});\n    const scrollToBottom = useCallback( () => {\n        if(taskingData && messagesEndRef.current){\n            messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n        }\n      }, [taskingData, messagesEndRef]);\n    useLayoutEffect( () => {\n        if(canScroll){\n            scrollToBottom();\n            setCanScroll(false);\n        }\n    }, [canScroll, scrollToBottom]);\n    const [getInfiniteScrollTasking, {loading: loadingMore}] = useLazyQuery(getNextBatchTaskingQuery, {\n        onError: data => {\n            console.error(data);\n        },\n        onCompleted: (data) => {\n            let foundNew = false;\n            if(data.callback.length === 0){\n                onCloseTab(tabInfo);\n                return;\n            }\n            const mergedData = data.task.reduce( (prev, cur) => {\n                const index = prev.findIndex(element => element.id === cur.id);\n                if(index > -1){\n                    // need to update an element\n                    const updated = prev.map( (element) => {\n                        if(element.id === cur.id){\n                            return cur;\n                        }else{\n                            return element;\n                        }\n                    });\n                    return updated;\n                }else{\n                    foundNew = true;\n                    return [...prev, cur];\n                }\n            }, [...taskingData.task]);\n            mergedData.sort( (a,b) => a.id < b.id ? -1 : 1);\n            setTaskingData({task: mergedData});    \n            if(!foundNew){\n                setFetchedAllTasks(true);\n            }else{\n                if(data.task.length < fetchLimit){\n                    setFetchedAllTasks(true);\n                }else{\n                    setFetchedAllTasks(false);\n                }\n            }\n        },\n        fetchPolicy: \"no-cache\"\n    });\n    useEffect( () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n        setCanScroll(true);\n    }, [])\n    const loadMoreTasks = () => {\n        getInfiniteScrollTasking({variables: {callback_id: tabInfo.callbackID, offset: taskingData.task.length, fetchLimit}});\n    }\n    const onSubmitCommandLine = (message, cmd, parsed, force_parsed_popup, cmdGroupNames, previousTaskingLocation) => {\n        //console.log(message, cmd, parsed);\n        let params = message.split(\" \");\n        delete params[0];\n        params = params.join(\" \").trim();\n        let newTaskingLocation = \"parsed_cli\";\n        if(previousTaskingLocation.includes(\"modal\")){\n            newTaskingLocation = \"modal_modified\"\n        }else if(previousTaskingLocation.includes(\"browserscript\")){\n            newTaskingLocation = \"browserscript_modified\";\n        }\n        if(cmd.commandparameters.length === 0){\n            // if there are no parameters, just send whatever the user types along\n            onCreateTask({callback_id: tabInfo.callbackID, command: cmd.cmd, params: params, parameter_group_name: \"Default\"});\n        }else{\n            // check if there's a \"file\" component that needs to be displayed\n            const fileParamExists = cmd.commandparameters.find(param => param.parameter_type === \"File\" && cmdGroupNames.includes(param.parameter_group_name));\n            let missingRequiredPrams = false;\n            if(cmdGroupNames.length === 1){\n                const missingParams = cmd.commandparameters.filter(param => param.required && param.parameter_group_name === cmdGroupNames[0] && !(param.cli_name in parsed));\n                if(missingParams.length > 0){\n                    missingRequiredPrams = true;\n                }\n            }else if(cmdGroupNames > 1 && !force_parsed_popup){\n                // need to force a popup because the tasking is ambiguous\n                force_parsed_popup = true;\n            }\n            if(fileParamExists || force_parsed_popup || missingRequiredPrams){\n                //need to do a popup\n                if(cmdGroupNames.length > 0){\n                    setCommandInfo({...cmd, \"parsedParameters\": parsed, groupName: cmdGroupNames[0]});\n                }else{\n                    setCommandInfo({...cmd, \"parsedParameters\": parsed});\n                }\n                setOpenParametersDialog(true);\n                return;\n            }else{\n                delete parsed[\"_\"];\n                onCreateTask({callback_id: tabInfo.callbackID, \n                    command: cmd.cmd, \n                    params: JSON.stringify(parsed), \n                    tasking_location: newTaskingLocation, \n                    original_params: params, \n                    parameter_group_name: cmdGroupNames[0]});\n            }            \n        }\n    }\n    const submitParametersDialog = (cmd, parameters, files, selectedParameterGroup) => {\n        setOpenParametersDialog(false);\n        onCreateTask({callback_id: tabInfo.callbackID, command: cmd, params: parameters, files: files, tasking_location: \"modal\", parameter_group_name: selectedParameterGroup});\n    }\n    const onCreateTask = ({callback_id, command, params, files, tasking_location, original_params, parameter_group_name}) => {\n        if(selectedToken.id !== undefined){\n            createTask({variables: {callback_id, command, params, files, token_id: selectedToken.TokenId, tasking_location, original_params, parameter_group_name}});\n        }else{\n            createTask({variables: {callback_id, command, params, files, tasking_location, original_params, parameter_group_name}});\n        }\n    }\n    const onSubmitFilter = (newFilter) => {\n        setFilterOptions(newFilter);\n    }\n    const changeSelectedToken = (token) => {\n        if(token === \"Default Token\"){\n            setSelectedToken(\"Default Token\");\n            return;\n        }\n        if(token.TokenId !== selectedToken.TokenId){\n            setSelectedToken(token);\n        }\n    }\n    return (\n        <MythicTabPanel index={index} value={value} >\n            {!fetchedAllTasks && <Tooltip title=\"Fetch Older Tasks\"> \n                <IconButton onClick={loadMoreTasks} variant=\"contained\" color=\"primary\"  ><AutorenewIcon /></IconButton>\n                </Tooltip>}\n            {!fetched && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n            {loadingMore && <LinearProgress color=\"primary\" thickness={2} style={{paddingTop: \"5px\"}}/>}\n            <div style={{overflowY: \"auto\", flexGrow: 1}}>\n            {\n                taskingData.task.map( (task) => (\n                    <TaskDisplay key={\"taskinteractdisplay\" + task.id} task={task} command_id={task.command == null ? 0 : task.command.id} \n                        filterOptions={filterOptions}/>\n                ))\n            }\n            </div>\n            <div ref={messagesEndRef} />\n        <CallbacksTabsTaskingInput onSubmitFilter={onSubmitFilter} onSubmitCommandLine={onSubmitCommandLine} changeSelectedToken={changeSelectedToken}\n            filterOptions={filterOptions} callback_id={tabInfo.callbackID} callback_os={tabInfo.os} />\n        {openParametersDialog && \n            <MythicDialog fullWidth={true} maxWidth=\"md\" open={openParametersDialog} \n                onClose={()=>{setOpenParametersDialog(false);}} \n                innerDialog={<TaskParametersDialog command={commandInfo} callback_id={tabInfo.callbackID} \n                    payloadtype_id={tabInfo.payloadtype_id} operation_id={tabInfo.operation_id} \n                    onSubmit={submitParametersDialog} onClose={()=>{setOpenParametersDialog(false);}} \n                    />}\n            />\n        }\n            \n    </MythicTabPanel>\n    )\n}"],"sourceRoot":""}